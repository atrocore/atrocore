(function(Xe,ft){typeof exports=="object"&&typeof module<"u"?ft(exports):typeof define=="function"&&define.amd?define(["exports"],ft):(Xe=typeof globalThis<"u"?globalThis:Xe||self,ft(Xe.Svelte={}))})(this,function(Xe){"use strict";var dh=Object.defineProperty;var ph=(Xe,ft,Kt)=>ft in Xe?dh(Xe,ft,{enumerable:!0,configurable:!0,writable:!0,value:Kt}):Xe[ft]=Kt;var sn=(Xe,ft,Kt)=>ph(Xe,typeof ft!="symbol"?ft+"":ft,Kt);let ft={};function Kt(n={}){ft={animate:!0,allowClose:!0,overlayOpacity:.7,smoothScroll:!1,disableActiveInteraction:!1,showProgress:!1,stagePadding:10,stageRadius:5,popoverOffset:10,showButtons:["next","previous","close"],disableButtons:[],overlayColor:"#000",...n}}function le(n){return n?ft[n]:ft}function Si(n,e,t,i){return(n/=i/2)<1?t/2*n*n+e:-t/2*(--n*(n-2)-1)+e}function sr(n){const e='a[href]:not([disabled]), button:not([disabled]), textarea:not([disabled]), input[type="text"]:not([disabled]), input[type="radio"]:not([disabled]), input[type="checkbox"]:not([disabled]), select:not([disabled])';return n.flatMap(t=>{const i=t.matches(e),l=Array.from(t.querySelectorAll(e));return[...i?[t]:[],...l]}).filter(t=>getComputedStyle(t).pointerEvents!=="none"&&ou(t))}function ur(n){if(!n||ru(n))return;const e=le("smoothScroll");n.scrollIntoView({behavior:!e||lu(n)?"auto":"smooth",inline:"center",block:"center"})}function lu(n){if(!n||!n.parentElement)return;const e=n.parentElement;return e.scrollHeight>e.clientHeight}function ru(n){const e=n.getBoundingClientRect();return e.top>=0&&e.left>=0&&e.bottom<=(window.innerHeight||document.documentElement.clientHeight)&&e.right<=(window.innerWidth||document.documentElement.clientWidth)}function ou(n){return!!(n.offsetWidth||n.offsetHeight||n.getClientRects().length)}let Di={};function tt(n,e){Di[n]=e}function ue(n){return n?Di[n]:Di}function cr(){Di={}}let Ai={};function Ci(n,e){Ai[n]=e}function un(n){var e;(e=Ai[n])==null||e.call(Ai)}function au(){Ai={}}function su(n,e,t,i){let l=ue("__activeStagePosition");const r=l||t.getBoundingClientRect(),o=i.getBoundingClientRect(),s=Si(n,r.x,o.x-r.x,e),a=Si(n,r.y,o.y-r.y,e),c=Si(n,r.width,o.width-r.width,e),u=Si(n,r.height,o.height-r.height,e);l={x:s,y:a,width:c,height:u},dr(l),tt("__activeStagePosition",l)}function fr(n){if(!n)return;const e=n.getBoundingClientRect(),t={x:e.x,y:e.y,width:e.width,height:e.height};tt("__activeStagePosition",t),dr(t)}function uu(){const n=ue("__activeStagePosition"),e=ue("__overlaySvg");if(!n)return;if(!e){console.warn("No stage svg found.");return}const t=window.innerWidth,i=window.innerHeight;e.setAttribute("viewBox",`0 0 ${t} ${i}`)}function cu(n){const e=fu(n);document.body.appendChild(e),gr(e,t=>{t.target.tagName==="path"&&un("overlayClick")}),tt("__overlaySvg",e)}function dr(n){const e=ue("__overlaySvg");if(!e){cu(n);return}const t=e.firstElementChild;if((t==null?void 0:t.tagName)!=="path")throw new Error("no path element found in stage svg");t.setAttribute("d",pr(n))}function fu(n){const e=window.innerWidth,t=window.innerHeight,i=document.createElementNS("http://www.w3.org/2000/svg","svg");i.classList.add("driver-overlay","driver-overlay-animated"),i.setAttribute("viewBox",`0 0 ${e} ${t}`),i.setAttribute("xmlSpace","preserve"),i.setAttribute("xmlnsXlink","http://www.w3.org/1999/xlink"),i.setAttribute("version","1.1"),i.setAttribute("preserveAspectRatio","xMinYMin slice"),i.style.fillRule="evenodd",i.style.clipRule="evenodd",i.style.strokeLinejoin="round",i.style.strokeMiterlimit="2",i.style.zIndex="10000",i.style.position="fixed",i.style.top="0",i.style.left="0",i.style.width="100%",i.style.height="100%";const l=document.createElementNS("http://www.w3.org/2000/svg","path");return l.setAttribute("d",pr(n)),l.style.fill=le("overlayColor")||"rgb(0,0,0)",l.style.opacity=`${le("overlayOpacity")}`,l.style.pointerEvents="auto",l.style.cursor="auto",i.appendChild(l),i}function pr(n){const e=window.innerWidth,t=window.innerHeight,i=le("stagePadding")||0,l=le("stageRadius")||0,r=n.width+i*2,o=n.height+i*2,s=Math.min(l,r/2,o/2),a=Math.floor(Math.max(s,0)),c=n.x-i+a,u=n.y-i,f=r-a*2,d=o-a*2;return`M${e},0L0,0L0,${t}L${e},${t}L${e},0Z
    M${c},${u} h${f} a${a},${a} 0 0 1 ${a},${a} v${d} a${a},${a} 0 0 1 -${a},${a} h-${f} a${a},${a} 0 0 1 -${a},-${a} v-${d} a${a},${a} 0 0 1 ${a},-${a} z`}function du(){const n=ue("__overlaySvg");n&&n.remove()}function pu(){const n=document.getElementById("driver-dummy-element");if(n)return n;let e=document.createElement("div");return e.id="driver-dummy-element",e.style.width="0",e.style.height="0",e.style.pointerEvents="none",e.style.opacity="0",e.style.position="fixed",e.style.top="50%",e.style.left="50%",document.body.appendChild(e),e}function mr(n){const{element:e}=n;let t=typeof e=="string"?document.querySelector(e):e;t||(t=pu()),hu(t,n)}function mu(){const n=ue("__activeElement"),e=ue("__activeStep");n&&(fr(n),uu(),yr(n,e))}function hu(n,e){const t=Date.now(),i=ue("__activeStep"),l=ue("__activeElement")||n,r=!l||l===n,o=n.id==="driver-dummy-element",s=l.id==="driver-dummy-element",a=le("animate"),c=e.onHighlightStarted||le("onHighlightStarted"),u=(e==null?void 0:e.onHighlighted)||le("onHighlighted"),f=(i==null?void 0:i.onDeselected)||le("onDeselected"),d=le(),p=ue();!r&&f&&f(s?void 0:l,i,{config:d,state:p}),c&&c(o?void 0:n,e,{config:d,state:p});const h=!r&&a;let m=!1;wu(),tt("previousStep",i),tt("previousElement",l),tt("activeStep",e),tt("activeElement",n);const v=()=>{if(ue("__transitionCallback")!==v)return;const _=Date.now()-t,k=400-_<=400/2;e.popover&&k&&!m&&h&&(vr(n,e),m=!0),le("animate")&&_<400?su(_,400,l,n):(fr(n),u&&u(o?void 0:n,e,{config:le(),state:ue()}),tt("__transitionCallback",void 0),tt("__previousStep",i),tt("__previousElement",l),tt("__activeStep",e),tt("__activeElement",n)),window.requestAnimationFrame(v)};tt("__transitionCallback",v),window.requestAnimationFrame(v),ur(n),!h&&e.popover&&vr(n,e),l.classList.remove("driver-active-element","driver-no-interaction"),l.removeAttribute("aria-haspopup"),l.removeAttribute("aria-expanded"),l.removeAttribute("aria-controls"),le("disableActiveInteraction")&&n.classList.add("driver-no-interaction"),n.classList.add("driver-active-element"),n.setAttribute("aria-haspopup","dialog"),n.setAttribute("aria-expanded","true"),n.setAttribute("aria-controls","driver-popover-content")}function gu(){var n;(n=document.getElementById("driver-dummy-element"))==null||n.remove(),document.querySelectorAll(".driver-active-element").forEach(e=>{e.classList.remove("driver-active-element","driver-no-interaction"),e.removeAttribute("aria-haspopup"),e.removeAttribute("aria-expanded"),e.removeAttribute("aria-controls")})}function Xn(){const n=ue("__resizeTimeout");n&&window.cancelAnimationFrame(n),tt("__resizeTimeout",window.requestAnimationFrame(mu))}function vu(n){var e;if(!ue("isInitialized")||!(n.key==="Tab"||n.keyCode===9))return;const t=ue("__activeElement"),i=(e=ue("popover"))==null?void 0:e.wrapper,l=sr([...i?[i]:[],...t?[t]:[]]),r=l[0],o=l[l.length-1];if(n.preventDefault(),n.shiftKey){const s=l[l.indexOf(document.activeElement)-1]||o;s==null||s.focus()}else{const s=l[l.indexOf(document.activeElement)+1]||r;s==null||s.focus()}}function hr(n){var e;((e=le("allowKeyboardControl"))==null||e)&&(n.key==="Escape"?un("escapePress"):n.key==="ArrowRight"?un("arrowRightPress"):n.key==="ArrowLeft"&&un("arrowLeftPress"))}function gr(n,e,t){const i=(l,r)=>{const o=l.target;n.contains(o)&&((!t||t(o))&&(l.preventDefault(),l.stopPropagation(),l.stopImmediatePropagation()),r==null||r(l))};document.addEventListener("pointerdown",i,!0),document.addEventListener("mousedown",i,!0),document.addEventListener("pointerup",i,!0),document.addEventListener("mouseup",i,!0),document.addEventListener("click",l=>{i(l,e)},!0)}function bu(){window.addEventListener("keyup",hr,!1),window.addEventListener("keydown",vu,!1),window.addEventListener("resize",Xn),window.addEventListener("scroll",Xn)}function _u(){window.removeEventListener("keyup",hr),window.removeEventListener("resize",Xn),window.removeEventListener("scroll",Xn)}function wu(){const n=ue("popover");n&&(n.wrapper.style.display="none")}function vr(n,e){var t,i;let l=ue("popover");l&&document.body.removeChild(l.wrapper),l=ku(),document.body.appendChild(l.wrapper);const{title:r,description:o,showButtons:s,disableButtons:a,showProgress:c,nextBtnText:u=le("nextBtnText")||"Next &rarr;",prevBtnText:f=le("prevBtnText")||"&larr; Previous",progressText:d=le("progressText")||"{current} of {total}"}=e.popover||{};l.nextButton.innerHTML=u,l.previousButton.innerHTML=f,l.progress.innerHTML=d,r?(l.title.innerHTML=r,l.title.style.display="block"):l.title.style.display="none",o?(l.description.innerHTML=o,l.description.style.display="block"):l.description.style.display="none";const p=s||le("showButtons"),h=c||le("showProgress")||!1,m=(p==null?void 0:p.includes("next"))||(p==null?void 0:p.includes("previous"))||h;l.closeButton.style.display=p.includes("close")?"block":"none",m?(l.footer.style.display="flex",l.progress.style.display=h?"block":"none",l.nextButton.style.display=p.includes("next")?"block":"none",l.previousButton.style.display=p.includes("previous")?"block":"none"):l.footer.style.display="none";const v=a||le("disableButtons")||[];v!=null&&v.includes("next")&&(l.nextButton.disabled=!0,l.nextButton.classList.add("driver-popover-btn-disabled")),v!=null&&v.includes("previous")&&(l.previousButton.disabled=!0,l.previousButton.classList.add("driver-popover-btn-disabled")),v!=null&&v.includes("close")&&(l.closeButton.disabled=!0,l.closeButton.classList.add("driver-popover-btn-disabled"));const _=l.wrapper;_.style.display="block",_.style.left="",_.style.top="",_.style.bottom="",_.style.right="",_.id="driver-popover-content",_.setAttribute("role","dialog"),_.setAttribute("aria-labelledby","driver-popover-title"),_.setAttribute("aria-describedby","driver-popover-description");const k=l.arrow;k.className="driver-popover-arrow";const S=((t=e.popover)==null?void 0:t.popoverClass)||le("popoverClass")||"";_.className=`driver-popover ${S}`.trim(),gr(l.wrapper,T=>{var I,D,C;const N=T.target,P=((I=e.popover)==null?void 0:I.onNextClick)||le("onNextClick"),V=((D=e.popover)==null?void 0:D.onPrevClick)||le("onPrevClick"),R=((C=e.popover)==null?void 0:C.onCloseClick)||le("onCloseClick");if(N.classList.contains("driver-popover-next-btn"))return P?P(n,e,{config:le(),state:ue()}):un("nextClick");if(N.classList.contains("driver-popover-prev-btn"))return V?V(n,e,{config:le(),state:ue()}):un("prevClick");if(N.classList.contains("driver-popover-close-btn"))return R?R(n,e,{config:le(),state:ue()}):un("closeClick")},T=>!(l!=null&&l.description.contains(T))&&!(l!=null&&l.title.contains(T))&&typeof T.className=="string"&&T.className.includes("driver-popover")),tt("popover",l);const b=((i=e.popover)==null?void 0:i.onPopoverRender)||le("onPopoverRender");b&&b(l,{config:le(),state:ue()}),yr(n,e),ur(_);const A=n.classList.contains("driver-dummy-element"),w=sr([_,...A?[]:[n]]);w.length>0&&w[0].focus()}function br(){const n=ue("popover");if(!(n!=null&&n.wrapper))return;const e=n.wrapper.getBoundingClientRect(),t=le("stagePadding")||0,i=le("popoverOffset")||0;return{width:e.width+t+i,height:e.height+t+i,realWidth:e.width,realHeight:e.height}}function _r(n,e){const{elementDimensions:t,popoverDimensions:i,popoverPadding:l,popoverArrowDimensions:r}=e;return n==="start"?Math.max(Math.min(t.top-l,window.innerHeight-i.realHeight-r.width),r.width):n==="end"?Math.max(Math.min(t.top-(i==null?void 0:i.realHeight)+t.height+l,window.innerHeight-(i==null?void 0:i.realHeight)-r.width),r.width):n==="center"?Math.max(Math.min(t.top+t.height/2-(i==null?void 0:i.realHeight)/2,window.innerHeight-(i==null?void 0:i.realHeight)-r.width),r.width):0}function wr(n,e){const{elementDimensions:t,popoverDimensions:i,popoverPadding:l,popoverArrowDimensions:r}=e;return n==="start"?Math.max(Math.min(t.left-l,window.innerWidth-i.realWidth-r.width),r.width):n==="end"?Math.max(Math.min(t.left-(i==null?void 0:i.realWidth)+t.width+l,window.innerWidth-(i==null?void 0:i.realWidth)-r.width),r.width):n==="center"?Math.max(Math.min(t.left+t.width/2-(i==null?void 0:i.realWidth)/2,window.innerWidth-(i==null?void 0:i.realWidth)-r.width),r.width):0}function yr(n,e){const t=ue("popover");if(!t)return;const{align:i="start",side:l="left"}=(e==null?void 0:e.popover)||{},r=i,o=n.id==="driver-dummy-element"?"over":l,s=le("stagePadding")||0,a=br(),c=t.arrow.getBoundingClientRect(),u=n.getBoundingClientRect(),f=u.top-a.height;let d=f>=0;const p=window.innerHeight-(u.bottom+a.height);let h=p>=0;const m=u.left-a.width;let v=m>=0;const _=window.innerWidth-(u.right+a.width);let k=_>=0;const S=!d&&!h&&!v&&!k;let b=o;if(o==="top"&&d?k=v=h=!1:o==="bottom"&&h?k=v=d=!1:o==="left"&&v?k=d=h=!1:o==="right"&&k&&(v=d=h=!1),o==="over"){const A=window.innerWidth/2-a.realWidth/2,w=window.innerHeight/2-a.realHeight/2;t.wrapper.style.left=`${A}px`,t.wrapper.style.right="auto",t.wrapper.style.top=`${w}px`,t.wrapper.style.bottom="auto"}else if(S){const A=window.innerWidth/2-(a==null?void 0:a.realWidth)/2,w=10;t.wrapper.style.left=`${A}px`,t.wrapper.style.right="auto",t.wrapper.style.bottom=`${w}px`,t.wrapper.style.top="auto"}else if(v){const A=Math.min(m,window.innerWidth-(a==null?void 0:a.realWidth)-c.width),w=_r(r,{elementDimensions:u,popoverDimensions:a,popoverPadding:s,popoverArrowDimensions:c});t.wrapper.style.left=`${A}px`,t.wrapper.style.top=`${w}px`,t.wrapper.style.bottom="auto",t.wrapper.style.right="auto",b="left"}else if(k){const A=Math.min(_,window.innerWidth-(a==null?void 0:a.realWidth)-c.width),w=_r(r,{elementDimensions:u,popoverDimensions:a,popoverPadding:s,popoverArrowDimensions:c});t.wrapper.style.right=`${A}px`,t.wrapper.style.top=`${w}px`,t.wrapper.style.bottom="auto",t.wrapper.style.left="auto",b="right"}else if(d){const A=Math.min(f,window.innerHeight-a.realHeight-c.width);let w=wr(r,{elementDimensions:u,popoverDimensions:a,popoverPadding:s,popoverArrowDimensions:c});t.wrapper.style.top=`${A}px`,t.wrapper.style.left=`${w}px`,t.wrapper.style.bottom="auto",t.wrapper.style.right="auto",b="top"}else if(h){const A=Math.min(p,window.innerHeight-(a==null?void 0:a.realHeight)-c.width);let w=wr(r,{elementDimensions:u,popoverDimensions:a,popoverPadding:s,popoverArrowDimensions:c});t.wrapper.style.left=`${w}px`,t.wrapper.style.bottom=`${A}px`,t.wrapper.style.top="auto",t.wrapper.style.right="auto",b="bottom"}S?t.arrow.classList.add("driver-popover-arrow-none"):yu(r,b,n)}function yu(n,e,t){const i=ue("popover");if(!i)return;const l=t.getBoundingClientRect(),r=br(),o=i.arrow,s=r.width,a=window.innerWidth,c=l.width,u=l.left,f=r.height,d=window.innerHeight,p=l.top,h=l.height;o.className="driver-popover-arrow";let m=e,v=n;e==="top"?(u+c<=0?(m="right",v="end"):u+c-s<=0&&(m="top",v="start"),u>=a?(m="left",v="end"):u+s>=a&&(m="top",v="end")):e==="bottom"?(u+c<=0?(m="right",v="start"):u+c-s<=0&&(m="bottom",v="start"),u>=a?(m="left",v="start"):u+s>=a&&(m="bottom",v="end")):e==="left"?(p+h<=0?(m="bottom",v="end"):p+h-f<=0&&(m="left",v="start"),p>=d?(m="top",v="end"):p+f>=d&&(m="left",v="end")):e==="right"&&(p+h<=0?(m="bottom",v="start"):p+h-f<=0&&(m="right",v="start"),p>=d?(m="top",v="start"):p+f>=d&&(m="right",v="end")),m?(o.classList.add(`driver-popover-arrow-side-${m}`),o.classList.add(`driver-popover-arrow-align-${v}`)):o.classList.add("driver-popover-arrow-none")}function ku(){const n=document.createElement("div");n.classList.add("driver-popover");const e=document.createElement("div");e.classList.add("driver-popover-arrow");const t=document.createElement("header");t.id="driver-popover-title",t.classList.add("driver-popover-title"),t.style.display="none",t.innerText="Popover Title";const i=document.createElement("div");i.id="driver-popover-description",i.classList.add("driver-popover-description"),i.style.display="none",i.innerText="Popover description is here";const l=document.createElement("button");l.type="button",l.classList.add("driver-popover-close-btn"),l.setAttribute("aria-label","Close"),l.innerHTML="&times;";const r=document.createElement("footer");r.classList.add("driver-popover-footer");const o=document.createElement("span");o.classList.add("driver-popover-progress-text"),o.innerText="";const s=document.createElement("span");s.classList.add("driver-popover-navigation-btns");const a=document.createElement("button");a.type="button",a.classList.add("driver-popover-prev-btn"),a.innerHTML="&larr; Previous";const c=document.createElement("button");return c.type="button",c.classList.add("driver-popover-next-btn"),c.innerHTML="Next &rarr;",s.appendChild(a),s.appendChild(c),r.appendChild(o),r.appendChild(s),n.appendChild(l),n.appendChild(e),n.appendChild(t),n.appendChild(i),n.appendChild(r),{wrapper:n,arrow:e,title:t,description:i,footer:r,previousButton:a,nextButton:c,closeButton:l,footerButtons:s,progress:o}}function Eu(){var n;const e=ue("popover");e&&((n=e.wrapper.parentElement)==null||n.removeChild(e.wrapper))}function Su(n={}){Kt(n);function e(){le("allowClose")&&c()}function t(){const u=ue("activeIndex"),f=le("steps")||[];if(typeof u>"u")return;const d=u+1;f[d]?a(d):c()}function i(){const u=ue("activeIndex"),f=le("steps")||[];if(typeof u>"u")return;const d=u-1;f[d]?a(d):c()}function l(u){(le("steps")||[])[u]?a(u):c()}function r(){var u;if(ue("__transitionCallback"))return;const f=ue("activeIndex"),d=ue("__activeStep"),p=ue("__activeElement");if(typeof f>"u"||typeof d>"u"||typeof ue("activeIndex")>"u")return;const h=((u=d.popover)==null?void 0:u.onPrevClick)||le("onPrevClick");if(h)return h(p,d,{config:le(),state:ue()});i()}function o(){var u;if(ue("__transitionCallback"))return;const f=ue("activeIndex"),d=ue("__activeStep"),p=ue("__activeElement");if(typeof f>"u"||typeof d>"u")return;const h=((u=d.popover)==null?void 0:u.onNextClick)||le("onNextClick");if(h)return h(p,d,{config:le(),state:ue()});t()}function s(){ue("isInitialized")||(tt("isInitialized",!0),document.body.classList.add("driver-active",le("animate")?"driver-fade":"driver-simple"),bu(),Ci("overlayClick",e),Ci("escapePress",e),Ci("arrowLeftPress",r),Ci("arrowRightPress",o))}function a(u=0){var f,d,p,h,m,v,_,k;const S=le("steps");if(!S){console.error("No steps to drive through"),c();return}if(!S[u]){c();return}tt("__activeOnDestroyed",document.activeElement),tt("activeIndex",u);const b=S[u],A=S[u+1],w=S[u-1],T=((f=b.popover)==null?void 0:f.doneBtnText)||le("doneBtnText")||"Done",I=le("allowClose"),D=typeof((d=b.popover)==null?void 0:d.showProgress)<"u"?(p=b.popover)==null?void 0:p.showProgress:le("showProgress"),C=(((h=b.popover)==null?void 0:h.progressText)||le("progressText")||"{{current}} of {{total}}").replace("{{current}}",`${u+1}`).replace("{{total}}",`${S.length}`),N=((m=b.popover)==null?void 0:m.showButtons)||le("showButtons"),P=["next","previous",...I?["close"]:[]].filter(U=>!(N!=null&&N.length)||N.includes(U)),V=((v=b.popover)==null?void 0:v.onNextClick)||le("onNextClick"),R=((_=b.popover)==null?void 0:_.onPrevClick)||le("onPrevClick"),H=((k=b.popover)==null?void 0:k.onCloseClick)||le("onCloseClick");mr({...b,popover:{showButtons:P,nextBtnText:A?void 0:T,disableButtons:[...w?[]:["previous"]],showProgress:D,progressText:C,onNextClick:V||(()=>{A?a(u+1):c()}),onPrevClick:R||(()=>{a(u-1)}),onCloseClick:H||(()=>{c()}),...(b==null?void 0:b.popover)||{}}})}function c(u=!0){const f=ue("__activeElement"),d=ue("__activeStep"),p=ue("__activeOnDestroyed"),h=le("onDestroyStarted");if(u&&h){const _=!f||(f==null?void 0:f.id)==="driver-dummy-element";h(_?void 0:f,d,{config:le(),state:ue()});return}const m=(d==null?void 0:d.onDeselected)||le("onDeselected"),v=le("onDestroyed");if(document.body.classList.remove("driver-active","driver-fade","driver-simple"),_u(),Eu(),gu(),du(),au(),cr(),f&&d){const _=f.id==="driver-dummy-element";m&&m(_?void 0:f,d,{config:le(),state:ue()}),v&&v(_?void 0:f,d,{config:le(),state:ue()})}p&&p.focus()}return{isActive:()=>ue("isInitialized")||!1,refresh:Xn,drive:(u=0)=>{s(),a(u)},setConfig:Kt,setSteps:u=>{cr(),Kt({...le(),steps:u})},getConfig:le,getState:ue,getActiveIndex:()=>ue("activeIndex"),isFirstStep:()=>ue("activeIndex")===0,isLastStep:()=>{const u=le("steps")||[],f=ue("activeIndex");return f!==void 0&&f===u.length-1},getActiveStep:()=>ue("activeStep"),getActiveElement:()=>ue("activeElement"),getPreviousElement:()=>ue("previousElement"),getPreviousStep:()=>ue("previousStep"),moveNext:t,movePrevious:i,moveTo:l,hasNextStep:()=>{const u=le("steps")||[],f=ue("activeIndex");return f!==void 0&&u[f+1]},hasPreviousStep:()=>{const u=le("steps")||[],f=ue("activeIndex");return f!==void 0&&u[f-1]},highlight:u=>{s(),mr({...u,popover:u.popover?{showButtons:[],showProgress:!1,progressText:"",...u.popover}:void 0})},destroy:()=>{c(!1)}}}var mt="top",Et="bottom",St="right",ht="left",hl="auto",Yn=[mt,Et,St,ht],yn="start",Qn="end",Du="clippingParents",kr="viewport",Jn="popper",Au="reference",Er=Yn.reduce(function(n,e){return n.concat([e+"-"+yn,e+"-"+Qn])},[]),Sr=[].concat(Yn,[hl]).reduce(function(n,e){return n.concat([e,e+"-"+yn,e+"-"+Qn])},[]),Cu="beforeRead",Tu="read",Lu="afterRead",Iu="beforeMain",Ou="main",Pu="afterMain",Mu="beforeWrite",Nu="write",Fu="afterWrite",Bu=[Cu,Tu,Lu,Iu,Ou,Pu,Mu,Nu,Fu];function Pt(n){return n?(n.nodeName||"").toLowerCase():null}function _t(n){if(n==null)return window;if(n.toString()!=="[object Window]"){var e=n.ownerDocument;return e&&e.defaultView||window}return n}function cn(n){var e=_t(n).Element;return n instanceof e||n instanceof Element}function Dt(n){var e=_t(n).HTMLElement;return n instanceof e||n instanceof HTMLElement}function gl(n){if(typeof ShadowRoot>"u")return!1;var e=_t(n).ShadowRoot;return n instanceof e||n instanceof ShadowRoot}function Ru(n){var e=n.state;Object.keys(e.elements).forEach(function(t){var i=e.styles[t]||{},l=e.attributes[t]||{},r=e.elements[t];!Dt(r)||!Pt(r)||(Object.assign(r.style,i),Object.keys(l).forEach(function(o){var s=l[o];s===!1?r.removeAttribute(o):r.setAttribute(o,s===!0?"":s)}))})}function Hu(n){var e=n.state,t={popper:{position:e.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(e.elements.popper.style,t.popper),e.styles=t,e.elements.arrow&&Object.assign(e.elements.arrow.style,t.arrow),function(){Object.keys(e.elements).forEach(function(i){var l=e.elements[i],r=e.attributes[i]||{},o=Object.keys(e.styles.hasOwnProperty(i)?e.styles[i]:t[i]),s=o.reduce(function(a,c){return a[c]="",a},{});!Dt(l)||!Pt(l)||(Object.assign(l.style,s),Object.keys(r).forEach(function(a){l.removeAttribute(a)}))})}}const Dr={name:"applyStyles",enabled:!0,phase:"write",fn:Ru,effect:Hu,requires:["computeStyles"]};function Mt(n){return n.split("-")[0]}var fn=Math.max,Ti=Math.min,kn=Math.round;function vl(){var n=navigator.userAgentData;return n!=null&&n.brands&&Array.isArray(n.brands)?n.brands.map(function(e){return e.brand+"/"+e.version}).join(" "):navigator.userAgent}function Ar(){return!/^((?!chrome|android).)*safari/i.test(vl())}function En(n,e,t){e===void 0&&(e=!1),t===void 0&&(t=!1);var i=n.getBoundingClientRect(),l=1,r=1;e&&Dt(n)&&(l=n.offsetWidth>0&&kn(i.width)/n.offsetWidth||1,r=n.offsetHeight>0&&kn(i.height)/n.offsetHeight||1);var o=cn(n)?_t(n):window,s=o.visualViewport,a=!Ar()&&t,c=(i.left+(a&&s?s.offsetLeft:0))/l,u=(i.top+(a&&s?s.offsetTop:0))/r,f=i.width/l,d=i.height/r;return{width:f,height:d,top:u,right:c+f,bottom:u+d,left:c,x:c,y:u}}function bl(n){var e=En(n),t=n.offsetWidth,i=n.offsetHeight;return Math.abs(e.width-t)<=1&&(t=e.width),Math.abs(e.height-i)<=1&&(i=e.height),{x:n.offsetLeft,y:n.offsetTop,width:t,height:i}}function Cr(n,e){var t=e.getRootNode&&e.getRootNode();if(n.contains(e))return!0;if(t&&gl(t)){var i=e;do{if(i&&n.isSameNode(i))return!0;i=i.parentNode||i.host}while(i)}return!1}function Wt(n){return _t(n).getComputedStyle(n)}function qu(n){return["table","td","th"].indexOf(Pt(n))>=0}function xt(n){return((cn(n)?n.ownerDocument:n.document)||window.document).documentElement}function Li(n){return Pt(n)==="html"?n:n.assignedSlot||n.parentNode||(gl(n)?n.host:null)||xt(n)}function Tr(n){return!Dt(n)||Wt(n).position==="fixed"?null:n.offsetParent}function Wu(n){var e=/firefox/i.test(vl()),t=/Trident/i.test(vl());if(t&&Dt(n)){var i=Wt(n);if(i.position==="fixed")return null}var l=Li(n);for(gl(l)&&(l=l.host);Dt(l)&&["html","body"].indexOf(Pt(l))<0;){var r=Wt(l);if(r.transform!=="none"||r.perspective!=="none"||r.contain==="paint"||["transform","perspective"].indexOf(r.willChange)!==-1||e&&r.willChange==="filter"||e&&r.filter&&r.filter!=="none")return l;l=l.parentNode}return null}function Zn(n){for(var e=_t(n),t=Tr(n);t&&qu(t)&&Wt(t).position==="static";)t=Tr(t);return t&&(Pt(t)==="html"||Pt(t)==="body"&&Wt(t).position==="static")?e:t||Wu(n)||e}function _l(n){return["top","bottom"].indexOf(n)>=0?"x":"y"}function Kn(n,e,t){return fn(n,Ti(e,t))}function ju(n,e,t){var i=Kn(n,e,t);return i>t?t:i}function Lr(){return{top:0,right:0,bottom:0,left:0}}function Ir(n){return Object.assign({},Lr(),n)}function Or(n,e){return e.reduce(function(t,i){return t[i]=n,t},{})}var zu=function(e,t){return e=typeof e=="function"?e(Object.assign({},t.rects,{placement:t.placement})):e,Ir(typeof e!="number"?e:Or(e,Yn))};function Gu(n){var e,t=n.state,i=n.name,l=n.options,r=t.elements.arrow,o=t.modifiersData.popperOffsets,s=Mt(t.placement),a=_l(s),c=[ht,St].indexOf(s)>=0,u=c?"height":"width";if(!(!r||!o)){var f=zu(l.padding,t),d=bl(r),p=a==="y"?mt:ht,h=a==="y"?Et:St,m=t.rects.reference[u]+t.rects.reference[a]-o[a]-t.rects.popper[u],v=o[a]-t.rects.reference[a],_=Zn(r),k=_?a==="y"?_.clientHeight||0:_.clientWidth||0:0,S=m/2-v/2,b=f[p],A=k-d[u]-f[h],w=k/2-d[u]/2+S,T=Kn(b,w,A),I=a;t.modifiersData[i]=(e={},e[I]=T,e.centerOffset=T-w,e)}}function Vu(n){var e=n.state,t=n.options,i=t.element,l=i===void 0?"[data-popper-arrow]":i;l!=null&&(typeof l=="string"&&(l=e.elements.popper.querySelector(l),!l)||Cr(e.elements.popper,l)&&(e.elements.arrow=l))}const Uu={name:"arrow",enabled:!0,phase:"main",fn:Gu,effect:Vu,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function Sn(n){return n.split("-")[1]}var Xu={top:"auto",right:"auto",bottom:"auto",left:"auto"};function Yu(n,e){var t=n.x,i=n.y,l=e.devicePixelRatio||1;return{x:kn(t*l)/l||0,y:kn(i*l)/l||0}}function Pr(n){var e,t=n.popper,i=n.popperRect,l=n.placement,r=n.variation,o=n.offsets,s=n.position,a=n.gpuAcceleration,c=n.adaptive,u=n.roundOffsets,f=n.isFixed,d=o.x,p=d===void 0?0:d,h=o.y,m=h===void 0?0:h,v=typeof u=="function"?u({x:p,y:m}):{x:p,y:m};p=v.x,m=v.y;var _=o.hasOwnProperty("x"),k=o.hasOwnProperty("y"),S=ht,b=mt,A=window;if(c){var w=Zn(t),T="clientHeight",I="clientWidth";if(w===_t(t)&&(w=xt(t),Wt(w).position!=="static"&&s==="absolute"&&(T="scrollHeight",I="scrollWidth")),w=w,l===mt||(l===ht||l===St)&&r===Qn){b=Et;var D=f&&w===A&&A.visualViewport?A.visualViewport.height:w[T];m-=D-i.height,m*=a?1:-1}if(l===ht||(l===mt||l===Et)&&r===Qn){S=St;var C=f&&w===A&&A.visualViewport?A.visualViewport.width:w[I];p-=C-i.width,p*=a?1:-1}}var N=Object.assign({position:s},c&&Xu),P=u===!0?Yu({x:p,y:m},_t(t)):{x:p,y:m};if(p=P.x,m=P.y,a){var V;return Object.assign({},N,(V={},V[b]=k?"0":"",V[S]=_?"0":"",V.transform=(A.devicePixelRatio||1)<=1?"translate("+p+"px, "+m+"px)":"translate3d("+p+"px, "+m+"px, 0)",V))}return Object.assign({},N,(e={},e[b]=k?m+"px":"",e[S]=_?p+"px":"",e.transform="",e))}function Qu(n){var e=n.state,t=n.options,i=t.gpuAcceleration,l=i===void 0?!0:i,r=t.adaptive,o=r===void 0?!0:r,s=t.roundOffsets,a=s===void 0?!0:s,c={placement:Mt(e.placement),variation:Sn(e.placement),popper:e.elements.popper,popperRect:e.rects.popper,gpuAcceleration:l,isFixed:e.options.strategy==="fixed"};e.modifiersData.popperOffsets!=null&&(e.styles.popper=Object.assign({},e.styles.popper,Pr(Object.assign({},c,{offsets:e.modifiersData.popperOffsets,position:e.options.strategy,adaptive:o,roundOffsets:a})))),e.modifiersData.arrow!=null&&(e.styles.arrow=Object.assign({},e.styles.arrow,Pr(Object.assign({},c,{offsets:e.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:a})))),e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-placement":e.placement})}const Ju={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:Qu,data:{}};var Ii={passive:!0};function Zu(n){var e=n.state,t=n.instance,i=n.options,l=i.scroll,r=l===void 0?!0:l,o=i.resize,s=o===void 0?!0:o,a=_t(e.elements.popper),c=[].concat(e.scrollParents.reference,e.scrollParents.popper);return r&&c.forEach(function(u){u.addEventListener("scroll",t.update,Ii)}),s&&a.addEventListener("resize",t.update,Ii),function(){r&&c.forEach(function(u){u.removeEventListener("scroll",t.update,Ii)}),s&&a.removeEventListener("resize",t.update,Ii)}}const Ku={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:Zu,data:{}};var xu={left:"right",right:"left",bottom:"top",top:"bottom"};function Oi(n){return n.replace(/left|right|bottom|top/g,function(e){return xu[e]})}var $u={start:"end",end:"start"};function Mr(n){return n.replace(/start|end/g,function(e){return $u[e]})}function wl(n){var e=_t(n),t=e.pageXOffset,i=e.pageYOffset;return{scrollLeft:t,scrollTop:i}}function yl(n){return En(xt(n)).left+wl(n).scrollLeft}function ec(n,e){var t=_t(n),i=xt(n),l=t.visualViewport,r=i.clientWidth,o=i.clientHeight,s=0,a=0;if(l){r=l.width,o=l.height;var c=Ar();(c||!c&&e==="fixed")&&(s=l.offsetLeft,a=l.offsetTop)}return{width:r,height:o,x:s+yl(n),y:a}}function tc(n){var e,t=xt(n),i=wl(n),l=(e=n.ownerDocument)==null?void 0:e.body,r=fn(t.scrollWidth,t.clientWidth,l?l.scrollWidth:0,l?l.clientWidth:0),o=fn(t.scrollHeight,t.clientHeight,l?l.scrollHeight:0,l?l.clientHeight:0),s=-i.scrollLeft+yl(n),a=-i.scrollTop;return Wt(l||t).direction==="rtl"&&(s+=fn(t.clientWidth,l?l.clientWidth:0)-r),{width:r,height:o,x:s,y:a}}function kl(n){var e=Wt(n),t=e.overflow,i=e.overflowX,l=e.overflowY;return/auto|scroll|overlay|hidden/.test(t+l+i)}function Nr(n){return["html","body","#document"].indexOf(Pt(n))>=0?n.ownerDocument.body:Dt(n)&&kl(n)?n:Nr(Li(n))}function xn(n,e){var t;e===void 0&&(e=[]);var i=Nr(n),l=i===((t=n.ownerDocument)==null?void 0:t.body),r=_t(i),o=l?[r].concat(r.visualViewport||[],kl(i)?i:[]):i,s=e.concat(o);return l?s:s.concat(xn(Li(o)))}function El(n){return Object.assign({},n,{left:n.x,top:n.y,right:n.x+n.width,bottom:n.y+n.height})}function nc(n,e){var t=En(n,!1,e==="fixed");return t.top=t.top+n.clientTop,t.left=t.left+n.clientLeft,t.bottom=t.top+n.clientHeight,t.right=t.left+n.clientWidth,t.width=n.clientWidth,t.height=n.clientHeight,t.x=t.left,t.y=t.top,t}function Fr(n,e,t){return e===kr?El(ec(n,t)):cn(e)?nc(e,t):El(tc(xt(n)))}function ic(n){var e=xn(Li(n)),t=["absolute","fixed"].indexOf(Wt(n).position)>=0,i=t&&Dt(n)?Zn(n):n;return cn(i)?e.filter(function(l){return cn(l)&&Cr(l,i)&&Pt(l)!=="body"}):[]}function lc(n,e,t,i){var l=e==="clippingParents"?ic(n):[].concat(e),r=[].concat(l,[t]),o=r[0],s=r.reduce(function(a,c){var u=Fr(n,c,i);return a.top=fn(u.top,a.top),a.right=Ti(u.right,a.right),a.bottom=Ti(u.bottom,a.bottom),a.left=fn(u.left,a.left),a},Fr(n,o,i));return s.width=s.right-s.left,s.height=s.bottom-s.top,s.x=s.left,s.y=s.top,s}function Br(n){var e=n.reference,t=n.element,i=n.placement,l=i?Mt(i):null,r=i?Sn(i):null,o=e.x+e.width/2-t.width/2,s=e.y+e.height/2-t.height/2,a;switch(l){case mt:a={x:o,y:e.y-t.height};break;case Et:a={x:o,y:e.y+e.height};break;case St:a={x:e.x+e.width,y:s};break;case ht:a={x:e.x-t.width,y:s};break;default:a={x:e.x,y:e.y}}var c=l?_l(l):null;if(c!=null){var u=c==="y"?"height":"width";switch(r){case yn:a[c]=a[c]-(e[u]/2-t[u]/2);break;case Qn:a[c]=a[c]+(e[u]/2-t[u]/2);break}}return a}function $n(n,e){e===void 0&&(e={});var t=e,i=t.placement,l=i===void 0?n.placement:i,r=t.strategy,o=r===void 0?n.strategy:r,s=t.boundary,a=s===void 0?Du:s,c=t.rootBoundary,u=c===void 0?kr:c,f=t.elementContext,d=f===void 0?Jn:f,p=t.altBoundary,h=p===void 0?!1:p,m=t.padding,v=m===void 0?0:m,_=Ir(typeof v!="number"?v:Or(v,Yn)),k=d===Jn?Au:Jn,S=n.rects.popper,b=n.elements[h?k:d],A=lc(cn(b)?b:b.contextElement||xt(n.elements.popper),a,u,o),w=En(n.elements.reference),T=Br({reference:w,element:S,strategy:"absolute",placement:l}),I=El(Object.assign({},S,T)),D=d===Jn?I:w,C={top:A.top-D.top+_.top,bottom:D.bottom-A.bottom+_.bottom,left:A.left-D.left+_.left,right:D.right-A.right+_.right},N=n.modifiersData.offset;if(d===Jn&&N){var P=N[l];Object.keys(C).forEach(function(V){var R=[St,Et].indexOf(V)>=0?1:-1,H=[mt,Et].indexOf(V)>=0?"y":"x";C[V]+=P[H]*R})}return C}function rc(n,e){e===void 0&&(e={});var t=e,i=t.placement,l=t.boundary,r=t.rootBoundary,o=t.padding,s=t.flipVariations,a=t.allowedAutoPlacements,c=a===void 0?Sr:a,u=Sn(i),f=u?s?Er:Er.filter(function(h){return Sn(h)===u}):Yn,d=f.filter(function(h){return c.indexOf(h)>=0});d.length===0&&(d=f);var p=d.reduce(function(h,m){return h[m]=$n(n,{placement:m,boundary:l,rootBoundary:r,padding:o})[Mt(m)],h},{});return Object.keys(p).sort(function(h,m){return p[h]-p[m]})}function oc(n){if(Mt(n)===hl)return[];var e=Oi(n);return[Mr(n),e,Mr(e)]}function ac(n){var e=n.state,t=n.options,i=n.name;if(!e.modifiersData[i]._skip){for(var l=t.mainAxis,r=l===void 0?!0:l,o=t.altAxis,s=o===void 0?!0:o,a=t.fallbackPlacements,c=t.padding,u=t.boundary,f=t.rootBoundary,d=t.altBoundary,p=t.flipVariations,h=p===void 0?!0:p,m=t.allowedAutoPlacements,v=e.options.placement,_=Mt(v),k=_===v,S=a||(k||!h?[Oi(v)]:oc(v)),b=[v].concat(S).reduce(function(x,ie){return x.concat(Mt(ie)===hl?rc(e,{placement:ie,boundary:u,rootBoundary:f,padding:c,flipVariations:h,allowedAutoPlacements:m}):ie)},[]),A=e.rects.reference,w=e.rects.popper,T=new Map,I=!0,D=b[0],C=0;C<b.length;C++){var N=b[C],P=Mt(N),V=Sn(N)===yn,R=[mt,Et].indexOf(P)>=0,H=R?"width":"height",U=$n(e,{placement:N,boundary:u,rootBoundary:f,altBoundary:d,padding:c}),oe=R?V?St:ht:V?Et:mt;A[H]>w[H]&&(oe=Oi(oe));var te=Oi(oe),Oe=[];if(r&&Oe.push(U[P]<=0),s&&Oe.push(U[oe]<=0,U[te]<=0),Oe.every(function(x){return x})){D=N,I=!1;break}T.set(N,Oe)}if(I)for(var Ve=h?3:1,Je=function(ie){var se=b.find(function(we){var Ee=T.get(we);if(Ee)return Ee.slice(0,ie).every(function(X){return X})});if(se)return D=se,"break"},J=Ve;J>0;J--){var Y=Je(J);if(Y==="break")break}e.placement!==D&&(e.modifiersData[i]._skip=!0,e.placement=D,e.reset=!0)}}const sc={name:"flip",enabled:!0,phase:"main",fn:ac,requiresIfExists:["offset"],data:{_skip:!1}};function Rr(n,e,t){return t===void 0&&(t={x:0,y:0}),{top:n.top-e.height-t.y,right:n.right-e.width+t.x,bottom:n.bottom-e.height+t.y,left:n.left-e.width-t.x}}function Hr(n){return[mt,St,Et,ht].some(function(e){return n[e]>=0})}function uc(n){var e=n.state,t=n.name,i=e.rects.reference,l=e.rects.popper,r=e.modifiersData.preventOverflow,o=$n(e,{elementContext:"reference"}),s=$n(e,{altBoundary:!0}),a=Rr(o,i),c=Rr(s,l,r),u=Hr(a),f=Hr(c);e.modifiersData[t]={referenceClippingOffsets:a,popperEscapeOffsets:c,isReferenceHidden:u,hasPopperEscaped:f},e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-reference-hidden":u,"data-popper-escaped":f})}const cc={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:uc};function fc(n,e,t){var i=Mt(n),l=[ht,mt].indexOf(i)>=0?-1:1,r=typeof t=="function"?t(Object.assign({},e,{placement:n})):t,o=r[0],s=r[1];return o=o||0,s=(s||0)*l,[ht,St].indexOf(i)>=0?{x:s,y:o}:{x:o,y:s}}function dc(n){var e=n.state,t=n.options,i=n.name,l=t.offset,r=l===void 0?[0,0]:l,o=Sr.reduce(function(u,f){return u[f]=fc(f,e.rects,r),u},{}),s=o[e.placement],a=s.x,c=s.y;e.modifiersData.popperOffsets!=null&&(e.modifiersData.popperOffsets.x+=a,e.modifiersData.popperOffsets.y+=c),e.modifiersData[i]=o}const pc={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:dc};function mc(n){var e=n.state,t=n.name;e.modifiersData[t]=Br({reference:e.rects.reference,element:e.rects.popper,strategy:"absolute",placement:e.placement})}const hc={name:"popperOffsets",enabled:!0,phase:"read",fn:mc,data:{}};function gc(n){return n==="x"?"y":"x"}function vc(n){var e=n.state,t=n.options,i=n.name,l=t.mainAxis,r=l===void 0?!0:l,o=t.altAxis,s=o===void 0?!1:o,a=t.boundary,c=t.rootBoundary,u=t.altBoundary,f=t.padding,d=t.tether,p=d===void 0?!0:d,h=t.tetherOffset,m=h===void 0?0:h,v=$n(e,{boundary:a,rootBoundary:c,padding:f,altBoundary:u}),_=Mt(e.placement),k=Sn(e.placement),S=!k,b=_l(_),A=gc(b),w=e.modifiersData.popperOffsets,T=e.rects.reference,I=e.rects.popper,D=typeof m=="function"?m(Object.assign({},e.rects,{placement:e.placement})):m,C=typeof D=="number"?{mainAxis:D,altAxis:D}:Object.assign({mainAxis:0,altAxis:0},D),N=e.modifiersData.offset?e.modifiersData.offset[e.placement]:null,P={x:0,y:0};if(w){if(r){var V,R=b==="y"?mt:ht,H=b==="y"?Et:St,U=b==="y"?"height":"width",oe=w[b],te=oe+v[R],Oe=oe-v[H],Ve=p?-I[U]/2:0,Je=k===yn?T[U]:I[U],J=k===yn?-I[U]:-T[U],Y=e.elements.arrow,x=p&&Y?bl(Y):{width:0,height:0},ie=e.modifiersData["arrow#persistent"]?e.modifiersData["arrow#persistent"].padding:Lr(),se=ie[R],we=ie[H],Ee=Kn(0,T[U],x[U]),X=S?T[U]/2-Ve-Ee-se-C.mainAxis:Je-Ee-se-C.mainAxis,z=S?-T[U]/2+Ve+Ee+we+C.mainAxis:J+Ee+we+C.mainAxis,Z=e.elements.arrow&&Zn(e.elements.arrow),re=Z?b==="y"?Z.clientTop||0:Z.clientLeft||0:0,ye=(V=N==null?void 0:N[b])!=null?V:0,He=oe+X-ye-re,Ue=oe+z-ye,ct=Kn(p?Ti(te,He):te,oe,p?fn(Oe,Ue):Oe);w[b]=ct,P[b]=ct-oe}if(s){var ce,Ie=b==="x"?mt:ht,Re=b==="x"?Et:St,Ze=w[A],ot=A==="y"?"height":"width",Ht=Ze+v[Ie],Zt=Ze-v[Re],wn=[mt,ht].indexOf(_)!==-1,jn=(ce=N==null?void 0:N[A])!=null?ce:0,zn=wn?Ht:Ze-T[ot]-I[ot]-jn+C.altAxis,Gn=wn?Ze+T[ot]+I[ot]-jn-C.altAxis:Zt,Vn=p&&wn?ju(zn,Ze,Gn):Kn(p?zn:Ht,Ze,p?Gn:Zt);w[A]=Vn,P[A]=Vn-Ze}e.modifiersData[i]=P}}const bc={name:"preventOverflow",enabled:!0,phase:"main",fn:vc,requiresIfExists:["offset"]};function _c(n){return{scrollLeft:n.scrollLeft,scrollTop:n.scrollTop}}function wc(n){return n===_t(n)||!Dt(n)?wl(n):_c(n)}function yc(n){var e=n.getBoundingClientRect(),t=kn(e.width)/n.offsetWidth||1,i=kn(e.height)/n.offsetHeight||1;return t!==1||i!==1}function kc(n,e,t){t===void 0&&(t=!1);var i=Dt(e),l=Dt(e)&&yc(e),r=xt(e),o=En(n,l,t),s={scrollLeft:0,scrollTop:0},a={x:0,y:0};return(i||!i&&!t)&&((Pt(e)!=="body"||kl(r))&&(s=wc(e)),Dt(e)?(a=En(e,!0),a.x+=e.clientLeft,a.y+=e.clientTop):r&&(a.x=yl(r))),{x:o.left+s.scrollLeft-a.x,y:o.top+s.scrollTop-a.y,width:o.width,height:o.height}}function Ec(n){var e=new Map,t=new Set,i=[];n.forEach(function(r){e.set(r.name,r)});function l(r){t.add(r.name);var o=[].concat(r.requires||[],r.requiresIfExists||[]);o.forEach(function(s){if(!t.has(s)){var a=e.get(s);a&&l(a)}}),i.push(r)}return n.forEach(function(r){t.has(r.name)||l(r)}),i}function Sc(n){var e=Ec(n);return Bu.reduce(function(t,i){return t.concat(e.filter(function(l){return l.phase===i}))},[])}function Dc(n){var e;return function(){return e||(e=new Promise(function(t){Promise.resolve().then(function(){e=void 0,t(n())})})),e}}function Ac(n){var e=n.reduce(function(t,i){var l=t[i.name];return t[i.name]=l?Object.assign({},l,i,{options:Object.assign({},l.options,i.options),data:Object.assign({},l.data,i.data)}):i,t},{});return Object.keys(e).map(function(t){return e[t]})}var qr={placement:"bottom",modifiers:[],strategy:"absolute"};function Wr(){for(var n=arguments.length,e=new Array(n),t=0;t<n;t++)e[t]=arguments[t];return!e.some(function(i){return!(i&&typeof i.getBoundingClientRect=="function")})}function Cc(n){n===void 0&&(n={});var e=n,t=e.defaultModifiers,i=t===void 0?[]:t,l=e.defaultOptions,r=l===void 0?qr:l;return function(s,a,c){c===void 0&&(c=r);var u={placement:"bottom",orderedModifiers:[],options:Object.assign({},qr,r),modifiersData:{},elements:{reference:s,popper:a},attributes:{},styles:{}},f=[],d=!1,p={state:u,setOptions:function(_){var k=typeof _=="function"?_(u.options):_;m(),u.options=Object.assign({},r,u.options,k),u.scrollParents={reference:cn(s)?xn(s):s.contextElement?xn(s.contextElement):[],popper:xn(a)};var S=Sc(Ac([].concat(i,u.options.modifiers)));return u.orderedModifiers=S.filter(function(b){return b.enabled}),h(),p.update()},forceUpdate:function(){if(!d){var _=u.elements,k=_.reference,S=_.popper;if(Wr(k,S)){u.rects={reference:kc(k,Zn(S),u.options.strategy==="fixed"),popper:bl(S)},u.reset=!1,u.placement=u.options.placement,u.orderedModifiers.forEach(function(C){return u.modifiersData[C.name]=Object.assign({},C.data)});for(var b=0;b<u.orderedModifiers.length;b++){if(u.reset===!0){u.reset=!1,b=-1;continue}var A=u.orderedModifiers[b],w=A.fn,T=A.options,I=T===void 0?{}:T,D=A.name;typeof w=="function"&&(u=w({state:u,options:I,name:D,instance:p})||u)}}}},update:Dc(function(){return new Promise(function(v){p.forceUpdate(),v(u)})}),destroy:function(){m(),d=!0}};if(!Wr(s,a))return p;p.setOptions(c).then(function(v){!d&&c.onFirstUpdate&&c.onFirstUpdate(v)});function h(){u.orderedModifiers.forEach(function(v){var _=v.name,k=v.options,S=k===void 0?{}:k,b=v.effect;if(typeof b=="function"){var A=b({state:u,name:_,instance:p,options:S}),w=function(){};f.push(A||w)}})}function m(){f.forEach(function(v){return v()}),f=[]}return p}}var Tc=[Ku,hc,Ju,Dr,pc,sc,bc,Uu,cc],Lc=Cc({defaultModifiers:Tc}),Ic="tippy-box",jr="tippy-content",Oc="tippy-backdrop",zr="tippy-arrow",Gr="tippy-svg-arrow",dn={passive:!0,capture:!0},Vr=function(){return document.body};function Sl(n,e,t){if(Array.isArray(n)){var i=n[e];return i??(Array.isArray(t)?t[e]:t)}return n}function Dl(n,e){var t={}.toString.call(n);return t.indexOf("[object")===0&&t.indexOf(e+"]")>-1}function Ur(n,e){return typeof n=="function"?n.apply(void 0,e):n}function Xr(n,e){if(e===0)return n;var t;return function(i){clearTimeout(t),t=setTimeout(function(){n(i)},e)}}function Pc(n){return n.split(/\s+/).filter(Boolean)}function Dn(n){return[].concat(n)}function Yr(n,e){n.indexOf(e)===-1&&n.push(e)}function Mc(n){return n.filter(function(e,t){return n.indexOf(e)===t})}function Nc(n){return n.split("-")[0]}function Pi(n){return[].slice.call(n)}function Qr(n){return Object.keys(n).reduce(function(e,t){return n[t]!==void 0&&(e[t]=n[t]),e},{})}function ei(){return document.createElement("div")}function Mi(n){return["Element","Fragment"].some(function(e){return Dl(n,e)})}function Fc(n){return Dl(n,"NodeList")}function Bc(n){return Dl(n,"MouseEvent")}function Rc(n){return!!(n&&n._tippy&&n._tippy.reference===n)}function Hc(n){return Mi(n)?[n]:Fc(n)?Pi(n):Array.isArray(n)?n:Pi(document.querySelectorAll(n))}function Al(n,e){n.forEach(function(t){t&&(t.style.transitionDuration=e+"ms")})}function Jr(n,e){n.forEach(function(t){t&&t.setAttribute("data-state",e)})}function qc(n){var e,t=Dn(n),i=t[0];return i!=null&&(e=i.ownerDocument)!=null&&e.body?i.ownerDocument:document}function Wc(n,e){var t=e.clientX,i=e.clientY;return n.every(function(l){var r=l.popperRect,o=l.popperState,s=l.props,a=s.interactiveBorder,c=Nc(o.placement),u=o.modifiersData.offset;if(!u)return!0;var f=c==="bottom"?u.top.y:0,d=c==="top"?u.bottom.y:0,p=c==="right"?u.left.x:0,h=c==="left"?u.right.x:0,m=r.top-i+f>a,v=i-r.bottom-d>a,_=r.left-t+p>a,k=t-r.right-h>a;return m||v||_||k})}function Cl(n,e,t){var i=e+"EventListener";["transitionend","webkitTransitionEnd"].forEach(function(l){n[i](l,t)})}function Zr(n,e){for(var t=e;t;){var i;if(n.contains(t))return!0;t=t.getRootNode==null||(i=t.getRootNode())==null?void 0:i.host}return!1}var Nt={isTouch:!1},Kr=0;function jc(){Nt.isTouch||(Nt.isTouch=!0,window.performance&&document.addEventListener("mousemove",xr))}function xr(){var n=performance.now();n-Kr<20&&(Nt.isTouch=!1,document.removeEventListener("mousemove",xr)),Kr=n}function zc(){var n=document.activeElement;if(Rc(n)){var e=n._tippy;n.blur&&!e.state.isVisible&&n.blur()}}function Gc(){document.addEventListener("touchstart",jc,dn),window.addEventListener("blur",zc)}var Vc=typeof window<"u"&&typeof document<"u",Uc=Vc?!!window.msCrypto:!1,Xc={animateFill:!1,followCursor:!1,inlinePositioning:!1,sticky:!1},Yc={allowHTML:!1,animation:"fade",arrow:!0,content:"",inertia:!1,maxWidth:350,role:"tooltip",theme:"",zIndex:9999},Ct=Object.assign({appendTo:Vr,aria:{content:"auto",expanded:"auto"},delay:0,duration:[300,250],getReferenceClientRect:null,hideOnClick:!0,ignoreAttributes:!1,interactive:!1,interactiveBorder:2,interactiveDebounce:0,moveTransition:"",offset:[0,10],onAfterUpdate:function(){},onBeforeUpdate:function(){},onCreate:function(){},onDestroy:function(){},onHidden:function(){},onHide:function(){},onMount:function(){},onShow:function(){},onShown:function(){},onTrigger:function(){},onUntrigger:function(){},onClickOutside:function(){},placement:"top",plugins:[],popperOptions:{},render:null,showOnCreate:!1,touch:!0,trigger:"mouseenter focus",triggerTarget:null},Xc,Yc),Qc=Object.keys(Ct),Jc=function(e){var t=Object.keys(e);t.forEach(function(i){Ct[i]=e[i]})};function $r(n){var e=n.plugins||[],t=e.reduce(function(i,l){var r=l.name,o=l.defaultValue;if(r){var s;i[r]=n[r]!==void 0?n[r]:(s=Ct[r])!=null?s:o}return i},{});return Object.assign({},n,t)}function Zc(n,e){var t=e?Object.keys($r(Object.assign({},Ct,{plugins:e}))):Qc,i=t.reduce(function(l,r){var o=(n.getAttribute("data-tippy-"+r)||"").trim();if(!o)return l;if(r==="content")l[r]=o;else try{l[r]=JSON.parse(o)}catch{l[r]=o}return l},{});return i}function eo(n,e){var t=Object.assign({},e,{content:Ur(e.content,[n])},e.ignoreAttributes?{}:Zc(n,e.plugins));return t.aria=Object.assign({},Ct.aria,t.aria),t.aria={expanded:t.aria.expanded==="auto"?e.interactive:t.aria.expanded,content:t.aria.content==="auto"?e.interactive?null:"describedby":t.aria.content},t}var Kc=function(){return"innerHTML"};function Tl(n,e){n[Kc()]=e}function to(n){var e=ei();return n===!0?e.className=zr:(e.className=Gr,Mi(n)?e.appendChild(n):Tl(e,n)),e}function no(n,e){Mi(e.content)?(Tl(n,""),n.appendChild(e.content)):typeof e.content!="function"&&(e.allowHTML?Tl(n,e.content):n.textContent=e.content)}function Ll(n){var e=n.firstElementChild,t=Pi(e.children);return{box:e,content:t.find(function(i){return i.classList.contains(jr)}),arrow:t.find(function(i){return i.classList.contains(zr)||i.classList.contains(Gr)}),backdrop:t.find(function(i){return i.classList.contains(Oc)})}}function io(n){var e=ei(),t=ei();t.className=Ic,t.setAttribute("data-state","hidden"),t.setAttribute("tabindex","-1");var i=ei();i.className=jr,i.setAttribute("data-state","hidden"),no(i,n.props),e.appendChild(t),t.appendChild(i),l(n.props,n.props);function l(r,o){var s=Ll(e),a=s.box,c=s.content,u=s.arrow;o.theme?a.setAttribute("data-theme",o.theme):a.removeAttribute("data-theme"),typeof o.animation=="string"?a.setAttribute("data-animation",o.animation):a.removeAttribute("data-animation"),o.inertia?a.setAttribute("data-inertia",""):a.removeAttribute("data-inertia"),a.style.maxWidth=typeof o.maxWidth=="number"?o.maxWidth+"px":o.maxWidth,o.role?a.setAttribute("role",o.role):a.removeAttribute("role"),(r.content!==o.content||r.allowHTML!==o.allowHTML)&&no(c,n.props),o.arrow?u?r.arrow!==o.arrow&&(a.removeChild(u),a.appendChild(to(o.arrow))):a.appendChild(to(o.arrow)):u&&a.removeChild(u)}return{popper:e,onUpdate:l}}io.$$tippy=!0;var xc=1,Ni=[],Il=[];function $c(n,e){var t=eo(n,Object.assign({},Ct,$r(Qr(e)))),i,l,r,o=!1,s=!1,a=!1,c=!1,u,f,d,p=[],h=Xr(He,t.interactiveDebounce),m,v=xc++,_=null,k=Mc(t.plugins),S={isEnabled:!0,isVisible:!1,isDestroyed:!1,isMounted:!1,isShown:!1},b={id:v,reference:n,popper:ei(),popperInstance:_,props:t,state:S,plugins:k,clearDelayTimeouts:zn,setProps:Gn,setContent:Vn,show:lr,hide:rr,hideWithInteractivity:or,enable:wn,disable:jn,unmount:B,destroy:fe};if(!t.render)return b;var A=t.render(b),w=A.popper,T=A.onUpdate;w.setAttribute("data-tippy-root",""),w.id="tippy-"+b.id,b.popper=w,n._tippy=b,w._tippy=b;var I=k.map(function(L){return L.fn(b)}),D=n.hasAttribute("aria-expanded");return Z(),Ve(),oe(),te("onCreate",[b]),t.showOnCreate&&Ht(),w.addEventListener("mouseenter",function(){b.props.interactive&&b.state.isVisible&&b.clearDelayTimeouts()}),w.addEventListener("mouseleave",function(){b.props.interactive&&b.props.trigger.indexOf("mouseenter")>=0&&R().addEventListener("mousemove",h)}),b;function C(){var L=b.props.touch;return Array.isArray(L)?L:[L,0]}function N(){return C()[0]==="hold"}function P(){var L;return!!((L=b.props.render)!=null&&L.$$tippy)}function V(){return m||n}function R(){var L=V().parentNode;return L?qc(L):document}function H(){return Ll(w)}function U(L){return b.state.isMounted&&!b.state.isVisible||Nt.isTouch||u&&u.type==="focus"?0:Sl(b.props.delay,L?0:1,Ct.delay)}function oe(L){L===void 0&&(L=!1),w.style.pointerEvents=b.props.interactive&&!L?"":"none",w.style.zIndex=""+b.props.zIndex}function te(L,G,Q){if(Q===void 0&&(Q=!0),I.forEach(function(ne){ne[L]&&ne[L].apply(ne,G)}),Q){var ee;(ee=b.props)[L].apply(ee,G)}}function Oe(){var L=b.props.aria;if(L.content){var G="aria-"+L.content,Q=w.id,ee=Dn(b.props.triggerTarget||n);ee.forEach(function(ne){var Ae=ne.getAttribute(G);if(b.state.isVisible)ne.setAttribute(G,Ae?Ae+" "+Q:Q);else{var Ke=Ae&&Ae.replace(Q,"").trim();Ke?ne.setAttribute(G,Ke):ne.removeAttribute(G)}})}}function Ve(){if(!(D||!b.props.aria.expanded)){var L=Dn(b.props.triggerTarget||n);L.forEach(function(G){b.props.interactive?G.setAttribute("aria-expanded",b.state.isVisible&&G===V()?"true":"false"):G.removeAttribute("aria-expanded")})}}function Je(){R().removeEventListener("mousemove",h),Ni=Ni.filter(function(L){return L!==h})}function J(L){if(!(Nt.isTouch&&(a||L.type==="mousedown"))){var G=L.composedPath&&L.composedPath()[0]||L.target;if(!(b.props.interactive&&Zr(w,G))){if(Dn(b.props.triggerTarget||n).some(function(Q){return Zr(Q,G)})){if(Nt.isTouch||b.state.isVisible&&b.props.trigger.indexOf("click")>=0)return}else te("onClickOutside",[b,L]);b.props.hideOnClick===!0&&(b.clearDelayTimeouts(),b.hide(),s=!0,setTimeout(function(){s=!1}),b.state.isMounted||se())}}}function Y(){a=!0}function x(){a=!1}function ie(){var L=R();L.addEventListener("mousedown",J,!0),L.addEventListener("touchend",J,dn),L.addEventListener("touchstart",x,dn),L.addEventListener("touchmove",Y,dn)}function se(){var L=R();L.removeEventListener("mousedown",J,!0),L.removeEventListener("touchend",J,dn),L.removeEventListener("touchstart",x,dn),L.removeEventListener("touchmove",Y,dn)}function we(L,G){X(L,function(){!b.state.isVisible&&w.parentNode&&w.parentNode.contains(w)&&G()})}function Ee(L,G){X(L,G)}function X(L,G){var Q=H().box;function ee(ne){ne.target===Q&&(Cl(Q,"remove",ee),G())}if(L===0)return G();Cl(Q,"remove",f),Cl(Q,"add",ee),f=ee}function z(L,G,Q){Q===void 0&&(Q=!1);var ee=Dn(b.props.triggerTarget||n);ee.forEach(function(ne){ne.addEventListener(L,G,Q),p.push({node:ne,eventType:L,handler:G,options:Q})})}function Z(){N()&&(z("touchstart",ye,{passive:!0}),z("touchend",Ue,{passive:!0})),Pc(b.props.trigger).forEach(function(L){if(L!=="manual")switch(z(L,ye),L){case"mouseenter":z("mouseleave",Ue);break;case"focus":z(Uc?"focusout":"blur",ct);break;case"focusin":z("focusout",ct);break}})}function re(){p.forEach(function(L){var G=L.node,Q=L.eventType,ee=L.handler,ne=L.options;G.removeEventListener(Q,ee,ne)}),p=[]}function ye(L){var G,Q=!1;if(!(!b.state.isEnabled||ce(L)||s)){var ee=((G=u)==null?void 0:G.type)==="focus";u=L,m=L.currentTarget,Ve(),!b.state.isVisible&&Bc(L)&&Ni.forEach(function(ne){return ne(L)}),L.type==="click"&&(b.props.trigger.indexOf("mouseenter")<0||o)&&b.props.hideOnClick!==!1&&b.state.isVisible?Q=!0:Ht(L),L.type==="click"&&(o=!Q),Q&&!ee&&Zt(L)}}function He(L){var G=L.target,Q=V().contains(G)||w.contains(G);if(!(L.type==="mousemove"&&Q)){var ee=ot().concat(w).map(function(ne){var Ae,Ke=ne._tippy,kt=(Ae=Ke.popperInstance)==null?void 0:Ae.state;return kt?{popperRect:ne.getBoundingClientRect(),popperState:kt,props:t}:null}).filter(Boolean);Wc(ee,L)&&(Je(),Zt(L))}}function Ue(L){var G=ce(L)||b.props.trigger.indexOf("click")>=0&&o;if(!G){if(b.props.interactive){b.hideWithInteractivity(L);return}Zt(L)}}function ct(L){b.props.trigger.indexOf("focusin")<0&&L.target!==V()||b.props.interactive&&L.relatedTarget&&w.contains(L.relatedTarget)||Zt(L)}function ce(L){return Nt.isTouch?N()!==L.type.indexOf("touch")>=0:!1}function Ie(){Re();var L=b.props,G=L.popperOptions,Q=L.placement,ee=L.offset,ne=L.getReferenceClientRect,Ae=L.moveTransition,Ke=P()?Ll(w).arrow:null,kt=ne?{getBoundingClientRect:ne,contextElement:ne.contextElement||V()}:n,on={name:"$$tippy",enabled:!0,phase:"beforeWrite",requires:["computeStyles"],fn:function(pl){var Un=pl.state;if(P()){var fh=H(),ar=fh.box;["placement","reference-hidden","escaped"].forEach(function(ml){ml==="placement"?ar.setAttribute("data-placement",Un.placement):Un.attributes.popper["data-popper-"+ml]?ar.setAttribute("data-"+ml,""):ar.removeAttribute("data-"+ml)}),Un.attributes.popper={}}}},qt=[{name:"offset",options:{offset:ee}},{name:"preventOverflow",options:{padding:{top:2,bottom:2,left:5,right:5}}},{name:"flip",options:{padding:5}},{name:"computeStyles",options:{adaptive:!Ae}},on];P()&&Ke&&qt.push({name:"arrow",options:{element:Ke,padding:3}}),qt.push.apply(qt,(G==null?void 0:G.modifiers)||[]),b.popperInstance=Lc(kt,w,Object.assign({},G,{placement:Q,onFirstUpdate:d,modifiers:qt}))}function Re(){b.popperInstance&&(b.popperInstance.destroy(),b.popperInstance=null)}function Ze(){var L=b.props.appendTo,G,Q=V();b.props.interactive&&L===Vr||L==="parent"?G=Q.parentNode:G=Ur(L,[Q]),G.contains(w)||G.appendChild(w),b.state.isMounted=!0,Ie()}function ot(){return Pi(w.querySelectorAll("[data-tippy-root]"))}function Ht(L){b.clearDelayTimeouts(),L&&te("onTrigger",[b,L]),ie();var G=U(!0),Q=C(),ee=Q[0],ne=Q[1];Nt.isTouch&&ee==="hold"&&ne&&(G=ne),G?i=setTimeout(function(){b.show()},G):b.show()}function Zt(L){if(b.clearDelayTimeouts(),te("onUntrigger",[b,L]),!b.state.isVisible){se();return}if(!(b.props.trigger.indexOf("mouseenter")>=0&&b.props.trigger.indexOf("click")>=0&&["mouseleave","mousemove"].indexOf(L.type)>=0&&o)){var G=U(!1);G?l=setTimeout(function(){b.state.isVisible&&b.hide()},G):r=requestAnimationFrame(function(){b.hide()})}}function wn(){b.state.isEnabled=!0}function jn(){b.hide(),b.state.isEnabled=!1}function zn(){clearTimeout(i),clearTimeout(l),cancelAnimationFrame(r)}function Gn(L){if(!b.state.isDestroyed){te("onBeforeUpdate",[b,L]),re();var G=b.props,Q=eo(n,Object.assign({},G,Qr(L),{ignoreAttributes:!0}));b.props=Q,Z(),G.interactiveDebounce!==Q.interactiveDebounce&&(Je(),h=Xr(He,Q.interactiveDebounce)),G.triggerTarget&&!Q.triggerTarget?Dn(G.triggerTarget).forEach(function(ee){ee.removeAttribute("aria-expanded")}):Q.triggerTarget&&n.removeAttribute("aria-expanded"),Ve(),oe(),T&&T(G,Q),b.popperInstance&&(Ie(),ot().forEach(function(ee){requestAnimationFrame(ee._tippy.popperInstance.forceUpdate)})),te("onAfterUpdate",[b,L])}}function Vn(L){b.setProps({content:L})}function lr(){var L=b.state.isVisible,G=b.state.isDestroyed,Q=!b.state.isEnabled,ee=Nt.isTouch&&!b.props.touch,ne=Sl(b.props.duration,0,Ct.duration);if(!(L||G||Q||ee)&&!V().hasAttribute("disabled")&&(te("onShow",[b],!1),b.props.onShow(b)!==!1)){if(b.state.isVisible=!0,P()&&(w.style.visibility="visible"),oe(),ie(),b.state.isMounted||(w.style.transition="none"),P()){var Ae=H(),Ke=Ae.box,kt=Ae.content;Al([Ke,kt],0)}d=function(){var qt;if(!(!b.state.isVisible||c)){if(c=!0,w.offsetHeight,w.style.transition=b.props.moveTransition,P()&&b.props.animation){var an=H(),pl=an.box,Un=an.content;Al([pl,Un],ne),Jr([pl,Un],"visible")}Oe(),Ve(),Yr(Il,b),(qt=b.popperInstance)==null||qt.forceUpdate(),te("onMount",[b]),b.props.animation&&P()&&Ee(ne,function(){b.state.isShown=!0,te("onShown",[b])})}},Ze()}}function rr(){var L=!b.state.isVisible,G=b.state.isDestroyed,Q=!b.state.isEnabled,ee=Sl(b.props.duration,1,Ct.duration);if(!(L||G||Q)&&(te("onHide",[b],!1),b.props.onHide(b)!==!1)){if(b.state.isVisible=!1,b.state.isShown=!1,c=!1,o=!1,P()&&(w.style.visibility="hidden"),Je(),se(),oe(!0),P()){var ne=H(),Ae=ne.box,Ke=ne.content;b.props.animation&&(Al([Ae,Ke],ee),Jr([Ae,Ke],"hidden"))}Oe(),Ve(),b.props.animation?P()&&we(ee,b.unmount):b.unmount()}}function or(L){R().addEventListener("mousemove",h),Yr(Ni,h),h(L)}function B(){b.state.isVisible&&b.hide(),b.state.isMounted&&(Re(),ot().forEach(function(L){L._tippy.unmount()}),w.parentNode&&w.parentNode.removeChild(w),Il=Il.filter(function(L){return L!==b}),b.state.isMounted=!1,te("onHidden",[b]))}function fe(){b.state.isDestroyed||(b.clearDelayTimeouts(),b.unmount(),re(),delete n._tippy,b.state.isDestroyed=!0,te("onDestroy",[b]))}}function ti(n,e){e===void 0&&(e={});var t=Ct.plugins.concat(e.plugins||[]);Gc();var i=Object.assign({},e,{plugins:t}),l=Hc(n),r=l.reduce(function(o,s){var a=s&&$c(s,i);return a&&o.push(a),o},[]);return Mi(n)?r[0]:r}ti.defaultProps=Ct,ti.setDefaultProps=Jc,ti.currentInput=Nt,Object.assign({},Dr,{effect:function(e){var t=e.state,i={popper:{position:t.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};Object.assign(t.elements.popper.style,i.popper),t.styles=i,t.elements.arrow&&Object.assign(t.elements.arrow.style,i.arrow)}}),ti.setDefaultProps({render:io});function De(){}const lo=n=>n;function ni(n,e){for(const t in e)n[t]=e[t];return n}function ro(n){return n()}function oo(){return Object.create(null)}function nt(n){n.forEach(ro)}function Tt(n){return typeof n=="function"}function Se(n,e){return n!=n?e==e:n!==e||n&&typeof n=="object"||typeof n=="function"}let Fi;function Bi(n,e){return n===e?!0:(Fi||(Fi=document.createElement("a")),Fi.href=e,n===Fi.href)}function ef(n){return Object.keys(n).length===0}function tf(n,...e){if(n==null){for(const i of e)i(void 0);return De}const t=n.subscribe(...e);return t.unsubscribe?()=>t.unsubscribe():t}function Lt(n){let e;return tf(n,t=>e=t)(),e}function ii(n,e,t,i){if(n){const l=ao(n,e,t,i);return n[0](l)}}function ao(n,e,t,i){return n[1]&&i?ni(t.ctx.slice(),n[1](i(e))):t.ctx}function li(n,e,t,i){if(n[2]&&i){const l=n[2](i(t));if(e.dirty===void 0)return l;if(typeof l=="object"){const r=[],o=Math.max(e.dirty.length,l.length);for(let s=0;s<o;s+=1)r[s]=e.dirty[s]|l[s];return r}return e.dirty|l}return e.dirty}function ri(n,e,t,i,l,r){if(l){const o=ao(e,t,i,r);n.p(o,l)}}function oi(n){if(n.ctx.length>32){const e=[],t=n.ctx.length/32;for(let i=0;i<t;i++)e[i]=-1;return e}return-1}function gt(n){return n??""}const so=typeof window<"u";let nf=so?()=>window.performance.now():()=>Date.now(),Ol=so?n=>requestAnimationFrame(n):De;const An=new Set;function uo(n){An.forEach(e=>{e.c(n)||(An.delete(e),e.f())}),An.size!==0&&Ol(uo)}function lf(n){let e;return An.size===0&&Ol(uo),{promise:new Promise(t=>{An.add(e={c:n,f:t})}),abort(){An.delete(e)}}}function y(n,e){n.appendChild(e)}function co(n){if(!n)return document;const e=n.getRootNode?n.getRootNode():n.ownerDocument;return e&&e.host?e:n.ownerDocument}function rf(n){const e=E("style");return e.textContent="/* empty */",of(co(n),e),e.sheet}function of(n,e){return y(n.head||n,e),e.sheet}function M(n,e,t){n.insertBefore(e,t||null)}function O(n){n.parentNode&&n.parentNode.removeChild(n)}function et(n,e){for(let t=0;t<n.length;t+=1)n[t]&&n[t].d(e)}function E(n){return document.createElement(n)}function pn(n){return document.createElementNS("http://www.w3.org/2000/svg",n)}function ve(n){return document.createTextNode(n)}function q(){return ve(" ")}function ze(){return ve("")}function $(n,e,t,i){return n.addEventListener(e,t,i),()=>n.removeEventListener(e,t,i)}function $t(n){return function(e){return e.preventDefault(),n.call(this,e)}}function Pl(n){return function(e){return e.stopPropagation(),n.call(this,e)}}function af(n){return function(e){e.target===this&&n.call(this,e)}}function g(n,e,t){t==null?n.removeAttribute(e):n.getAttribute(e)!==t&&n.setAttribute(e,t)}const sf=["width","height"];function en(n,e){const t=Object.getOwnPropertyDescriptors(n.__proto__);for(const i in e)e[i]==null?n.removeAttribute(i):i==="style"?n.style.cssText=e[i]:i==="__value"?n.value=n[i]=e[i]:t[i]&&t[i].set&&sf.indexOf(i)===-1?n[i]=e[i]:g(n,i,e[i])}function uf(n){return Array.from(n.childNodes)}function Ne(n,e){e=""+e,n.data!==e&&(n.data=e)}function Ri(n,e){n.value=e??""}function Fe(n,e,t,i){t==null?n.style.removeProperty(e):n.style.setProperty(e,t,"")}function fo(n,e,t){for(let i=0;i<n.options.length;i+=1){const l=n.options[i];if(l.__value===e){l.selected=!0;return}}(!t||e!==void 0)&&(n.selectedIndex=-1)}function cf(n){const e=n.querySelector(":checked");return e&&e.__value}function me(n,e,t){n.classList.toggle(e,!!t)}function po(n,e,{bubbles:t=!1,cancelable:i=!1}={}){return new CustomEvent(n,{detail:e,bubbles:t,cancelable:i})}class jt{constructor(e=!1){sn(this,"is_svg",!1);sn(this,"e");sn(this,"n");sn(this,"t");sn(this,"a");this.is_svg=e,this.e=this.n=null}c(e){this.h(e)}m(e,t,i=null){this.e||(this.is_svg?this.e=pn(t.nodeName):this.e=E(t.nodeType===11?"TEMPLATE":t.nodeName),this.t=t.tagName!=="TEMPLATE"?t:t.content,this.c(e)),this.i(i)}h(e){this.e.innerHTML=e,this.n=Array.from(this.e.nodeName==="TEMPLATE"?this.e.content.childNodes:this.e.childNodes)}i(e){for(let t=0;t<this.n.length;t+=1)M(this.t,this.n[t],e)}p(e){this.d(),this.h(e),this.i(this.a)}d(){this.n.forEach(O)}}const Hi=new Map;let qi=0;function ff(n){let e=5381,t=n.length;for(;t--;)e=(e<<5)-e^n.charCodeAt(t);return e>>>0}function df(n,e){const t={stylesheet:rf(e),rules:{}};return Hi.set(n,t),t}function mo(n,e,t,i,l,r,o,s=0){const a=16.666/i;let c=`{
`;for(let v=0;v<=1;v+=a){const _=e+(t-e)*r(v);c+=v*100+`%{${o(_,1-_)}}
`}const u=c+`100% {${o(t,1-t)}}
}`,f=`__svelte_${ff(u)}_${s}`,d=co(n),{stylesheet:p,rules:h}=Hi.get(d)||df(d,n);h[f]||(h[f]=!0,p.insertRule(`@keyframes ${f} ${u}`,p.cssRules.length));const m=n.style.animation||"";return n.style.animation=`${m?`${m}, `:""}${f} ${i}ms linear ${l}ms 1 both`,qi+=1,f}function pf(n,e){const t=(n.style.animation||"").split(", "),i=t.filter(e?r=>r.indexOf(e)<0:r=>r.indexOf("__svelte")===-1),l=t.length-i.length;l&&(n.style.animation=i.join(", "),qi-=l,qi||mf())}function mf(){Ol(()=>{qi||(Hi.forEach(n=>{const{ownerNode:e}=n.stylesheet;e&&O(e)}),Hi.clear())})}let ai;function si(n){ai=n}function Wi(){if(!ai)throw new Error("Function called outside component initialization");return ai}function it(n){Wi().$$.on_mount.push(n)}function hf(n){Wi().$$.after_update.push(n)}function mn(n){Wi().$$.on_destroy.push(n)}function hn(){const n=Wi();return(e,t,{cancelable:i=!1}={})=>{const l=n.$$.callbacks[e];if(l){const r=po(e,t,{cancelable:i});return l.slice().forEach(o=>{o.call(n,r)}),!r.defaultPrevented}return!0}}const Cn=[],qe=[];let Tn=[];const Ml=[],ho=Promise.resolve();let Nl=!1;function go(){Nl||(Nl=!0,ho.then(vo))}function gn(){return go(),ho}function Ln(n){Tn.push(n)}function In(n){Ml.push(n)}const Fl=new Set;let On=0;function vo(){if(On!==0)return;const n=ai;do{try{for(;On<Cn.length;){const e=Cn[On];On++,si(e),gf(e.$$)}}catch(e){throw Cn.length=0,On=0,e}for(si(null),Cn.length=0,On=0;qe.length;)qe.pop()();for(let e=0;e<Tn.length;e+=1){const t=Tn[e];Fl.has(t)||(Fl.add(t),t())}Tn.length=0}while(Cn.length);for(;Ml.length;)Ml.pop()();Nl=!1,Fl.clear(),si(n)}function gf(n){if(n.fragment!==null){n.update(),nt(n.before_update);const e=n.dirty;n.dirty=[-1],n.fragment&&n.fragment.p(n.ctx,e),n.after_update.forEach(Ln)}}function vf(n){const e=[],t=[];Tn.forEach(i=>n.indexOf(i)===-1?e.push(i):t.push(i)),t.forEach(i=>i()),Tn=e}let ui;function bf(){return ui||(ui=Promise.resolve(),ui.then(()=>{ui=null})),ui}function Bl(n,e,t){n.dispatchEvent(po(`${e?"intro":"outro"}${t}`))}const ji=new Set;let zt;function We(){zt={r:0,c:[],p:zt}}function je(){zt.r||nt(zt.c),zt=zt.p}function W(n,e){n&&n.i&&(ji.delete(n),n.i(e))}function j(n,e,t,i){if(n&&n.o){if(ji.has(n))return;ji.add(n),zt.c.push(()=>{ji.delete(n),i&&(t&&n.d(1),i())}),n.o(e)}else i&&i()}const _f={duration:0};function bo(n,e,t,i){let r=e(n,t,{direction:"both"}),o=i?0:1,s=null,a=null,c=null,u;function f(){c&&pf(n,c)}function d(h,m){const v=h.b-o;return m*=Math.abs(v),{a:o,b:h.b,d:v,duration:m,start:h.start,end:h.start+m,group:h.group}}function p(h){const{delay:m=0,duration:v=300,easing:_=lo,tick:k=De,css:S}=r||_f,b={start:nf()+m,b:h};h||(b.group=zt,zt.r+=1),"inert"in n&&(h?u!==void 0&&(n.inert=u):(u=n.inert,n.inert=!0)),s||a?a=b:(S&&(f(),c=mo(n,o,h,v,m,_,S)),h&&k(0,1),s=d(b,v),Ln(()=>Bl(n,h,"start")),lf(A=>{if(a&&A>a.start&&(s=d(a,v),a=null,Bl(n,s.b,"start"),S&&(f(),c=mo(n,o,s.b,s.duration,0,_,r.css))),s){if(A>=s.end)k(o=s.b,1-o),Bl(n,s.b,"end"),a||(s.b?f():--s.group.r||nt(s.group.c)),s=null;else if(A>=s.start){const w=A-s.start;o=s.a+s.d*_(w/s.duration),k(o,1-o)}}return!!(s||a)}))}return{run(h){Tt(r)?bf().then(()=>{r=r({direction:h?"in":"out"}),p(h)}):p(h)},end(){f(),s=a=null}}}function de(n){return(n==null?void 0:n.length)!==void 0?n:Array.from(n)}function Gt(n,e){n.d(1),e.delete(n.key)}function Vt(n,e,t,i,l,r,o,s,a,c,u,f){let d=n.length,p=r.length,h=d;const m={};for(;h--;)m[n[h].key]=h;const v=[],_=new Map,k=new Map,S=[];for(h=p;h--;){const T=f(l,r,h),I=t(T);let D=o.get(I);D?S.push(()=>D.p(T,e)):(D=c(I,T),D.c()),_.set(I,v[h]=D),I in m&&k.set(I,Math.abs(h-m[I]))}const b=new Set,A=new Set;function w(T){W(T,1),T.m(s,u),o.set(T.key,T),u=T.first,p--}for(;d&&p;){const T=v[p-1],I=n[d-1],D=T.key,C=I.key;T===I?(u=T.first,d--,p--):_.has(C)?!o.has(D)||b.has(D)?w(T):A.has(C)?d--:k.get(D)>k.get(C)?(A.add(D),w(T)):(b.add(C),d--):(a(I,o),d--)}for(;d--;){const T=n[d];_.has(T.key)||a(T,o)}for(;p;)w(v[p-1]);return nt(S),v}function zi(n,e){const t={},i={},l={$$scope:1};let r=n.length;for(;r--;){const o=n[r],s=e[r];if(s){for(const a in o)a in s||(i[a]=1);for(const a in s)l[a]||(t[a]=s[a],l[a]=1);n[r]=s}else for(const a in o)l[a]=1}for(const o in i)o in t||(t[o]=void 0);return t}function Pn(n,e,t){const i=n.$$.props[e];i!==void 0&&(n.$$.bound[i]=t,t(n.$$.ctx[i]))}function be(n){n&&n.c()}function he(n,e,t){const{fragment:i,after_update:l}=n.$$;i&&i.m(e,t),Ln(()=>{const r=n.$$.on_mount.map(ro).filter(Tt);n.$$.on_destroy?n.$$.on_destroy.push(...r):nt(r),n.$$.on_mount=[]}),l.forEach(Ln)}function ge(n,e){const t=n.$$;t.fragment!==null&&(vf(t.after_update),nt(t.on_destroy),t.fragment&&t.fragment.d(e),t.on_destroy=t.fragment=null,t.ctx=[])}function wf(n,e){n.$$.dirty[0]===-1&&(Cn.push(n),go(),n.$$.dirty.fill(0)),n.$$.dirty[e/31|0]|=1<<e%31}function Te(n,e,t,i,l,r,o=null,s=[-1]){const a=ai;si(n);const c=n.$$={fragment:null,ctx:[],props:r,update:De,not_equal:l,bound:oo(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(a?a.$$.context:[])),callbacks:oo(),dirty:s,skip_bound:!1,root:e.target||a.$$.root};o&&o(c.root);let u=!1;if(c.ctx=t?t(n,e.props||{},(f,d,...p)=>{const h=p.length?p[0]:d;return c.ctx&&l(c.ctx[f],c.ctx[f]=h)&&(!c.skip_bound&&c.bound[f]&&c.bound[f](h),u&&wf(n,f)),d}):[],c.update(),u=!0,nt(c.before_update),c.fragment=i?i(c.ctx):!1,e.target){if(e.hydrate){const f=uf(e.target);c.fragment&&c.fragment.l(f),f.forEach(O)}else c.fragment&&c.fragment.c();e.intro&&W(n.$$.fragment),he(n,e.target,e.anchor),vo()}si(a)}class Le{constructor(){sn(this,"$$");sn(this,"$$set")}$destroy(){ge(this,1),this.$destroy=De}$on(e,t){if(!Tt(t))return De;const i=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return i.push(t),()=>{const l=i.indexOf(t);l!==-1&&i.splice(l,1)}}$set(e){this.$$set&&!ef(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}const yf="4",Mn=[];function at(n,e=De){let t;const i=new Set;function l(s){if(Se(n,s)&&(n=s,t)){const a=!Mn.length;for(const c of i)c[1](),Mn.push(c,n);if(a){for(let c=0;c<Mn.length;c+=2)Mn[c][0](Mn[c+1]);Mn.length=0}}}function r(s){l(s(n))}function o(s,a=De){const c=[s,a];return i.add(c),i.size===1&&(t=e(l,r)||De),s(n),()=>{i.delete(c),i.size===0&&t&&(t(),t=null)}}return{set:l,update:r,subscribe:o}}const Gi=at({}),F={getData(){return Lt(Gi)},setTranslations(n){Gi.set(n)},has(n,e,t){let i=!1;return Gi.subscribe(l=>{if(t in l&&e in l[t]&&n in l[t][e]){i=!0;return}})(),i},get(n,e,t){let i=t;return Gi.subscribe(l=>{if(n in l&&e in l[n]&&t in l[n][e]){i=l[n][e][t];return}if(n in l&&e in l[n]&&t in l[n][e]){i=l[n][e][t];return}if(n=="Global"){i=t;return}i=null})(),i},translate(n,e=null,t=null){t=t||"Global",e=e||"labels";let i=F.get(t,e,n);return i===null&&t!="Global"&&(i=F.get("Global",e,n)),i},translateOption(n,e,t=null){let i=F.translate(e,"options",t);return i===null?"":typeof i=="object"?i[n]:n}},_o=at({}),st={set(n){_o.set(n)},get(){let n=null;return _o.subscribe(e=>{e&&(n=e)})(),n}},Rl=at(),Be={setNotifier(n){Rl.set(n)},notify(n,e=null,t=2e3){Rl.subscribe(i=>{i&&i.notify(n,e,2e3)})()},confirm(n=null,e=null,t){Rl.subscribe(i=>{if(i){let l=null,r=null,o=null;typeof n=="string"||n instanceof String?(r=n,o=F.translate("Yes")):(n=n||{},r=n.message,o=n.confirmText,l=n.confirmStyle||null),i.confirm(r,{confirmText:o,cancelText:F.translate("Cancel"),confirmStyle:l},e,t)}})()}},Vi=at(),Ut={setLayoutManager(n){Vi.set(n)},resetToDefault(n,e,t,i,l){let r=null;return Vi.subscribe(o=>{o&&(r=o.resetToDefault(n,e,t,i,l))})(),r},get:function(n,e,t,i,l,r){let o=null;return Vi.subscribe(s=>{s&&(o=s.get(n,e,t,i,l,r))})(),o},set:function(n,e,t,i,l,r){let o=null;return Vi.subscribe(s=>{s&&(o=s.set(n,e,t,i,l,r))})(),o}},wo=at(),ae={setMetadata(n){wo.set(n)},get(n){let e=null;return wo.subscribe(t=>{t&&(e=t.get(n))})(),e}},yo=at(),Hl={setModelFactory(n){yo.set(n)},create(n,e){yo.subscribe(t=>{t&&t.create(n,e)})()}},ko=at(),Eo={setConfig(n){ko.set(n)},get(n){let e=null;return ko.subscribe(t=>{t&&(e=t.get(n))})(),e}},ci=at(),Ce={setStorage(n){ci.set(n)},get(n,e){let t=null;return ci.subscribe(i=>{i&&(t=i.get(n,e))})(),t},has(n,e){let t=null;return ci.subscribe(i=>{i&&(t=i.has(n,e))})(),t},clear(n,e){ci.subscribe(t=>{t&&t.clear(n,e)})()},set(n,e,t){ci.subscribe(i=>{i&&i.set(n,e,t)})()}},tn=at(),Ft={setAcl(n){tn.set(n)},getUser(){let n=null;return tn.subscribe(e=>{e&&(n=e.getUser())})(),n},checkScope(n,e,t,i){let l=null;return tn.subscribe(r=>{r&&(l=r.checkScope(n,e,t,i))})(),l},checkModel(n,e,t,i){let l=null;return tn.subscribe(r=>{r&&(l=r.checkModel(n,e,t,i))})(),l},checkModelDelete(n,e,t){let i=null;return tn.subscribe(l=>{l&&(i=l.checkModelDelete(n,e,t))})(),i},checkIsOwner(n){let e=null;return tn.subscribe(t=>{t&&(e=t.checkIsOwner(n))})(),e},checkInTeam(n){let e=null;return tn.subscribe(t=>{t&&(e=t.checkInTeam(n))})(),e},check(n,e,t=null){let i=null;return tn.subscribe(l=>{l&&(i=l.check(n,e,t))})(),i}},So=at(),Do={setCollectionFactory(n){So.set(n)},create(n,e){So.subscribe(t=>{t&&t.create(n,e)})()}};typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(yf);function Ao(n){let e,t,i,l,r,o,s,a,c,u,f,d,p,h,m;function v(S,b){return S[2]?Ef:kf}let _=v(n),k=_(n);return{c(){e=E("div"),t=E("div"),i=E("div"),l=E("span"),l.textContent=`${F.translate("jobManager")}`,r=q(),o=E("span"),s=E("a"),s.innerHTML='<span aria-hidden="true"></span>',a=q(),k.c(),c=q(),u=E("a"),u.textContent=`${F.translate("View List")}`,f=q(),d=E("div"),p=E("div"),p.textContent=`${F.translate("Loading...")}`,g(l,"class","panel-heading-title"),g(s,"href","/"),g(s,"class","close svelte-1p6ppx8"),g(u,"href","#Job"),g(u,"title",F.translate("View List")),g(u,"class","qp-view-list svelte-1p6ppx8"),g(o,"class","pull-right"),g(i,"class","panel-heading clearfix"),g(p,"class","list-container"),g(d,"class","panel-body"),g(t,"class","panel panel-default"),g(e,"class","queue-panel-container")},m(S,b){M(S,e,b),y(e,t),y(t,i),y(i,l),y(i,r),y(i,o),y(o,s),y(o,a),k.m(o,null),y(o,c),y(o,u),y(t,f),y(t,d),y(d,p),n[9](e),h||(m=$(s,"click",n[6]),h=!0)},p(S,b){_===(_=v(S))&&k?k.p(S,b):(k.d(1),k=_(S),k&&(k.c(),k.m(o,c)))},d(S){S&&O(e),k.d(),n[9](null),h=!1,m()}}}function kf(n){let e,t,i;return{c(){e=E("a"),e.textContent=`${F.translate("Pause")}`,g(e,"href","/"),g(e,"title",F.translate("Pause")),g(e,"class","qm-button")},m(l,r){M(l,e,r),t||(i=$(e,"click",n[8]),t=!0)},p:De,d(l){l&&O(e),t=!1,i()}}}function Ef(n){let e,t,i;return{c(){e=E("a"),e.textContent=`${F.translate("Start")}`,g(e,"href","/"),g(e,"title",F.translate("Start")),g(e,"class","qm-button")},m(l,r){M(l,e,r),t||(i=$(e,"click",n[7]),t=!0)},p:De,d(l){l&&O(e),t=!1,i()}}}function Sf(n){let e,t=n[0]&&Ao(n);return{c(){t&&t.c(),e=ze()},m(i,l){t&&t.m(i,l),M(i,e,l)},p(i,[l]){i[0]?t?t.p(i,l):(t=Ao(i),t.c(),t.m(e.parentNode,e)):t&&(t.d(1),t=null)},i:De,o:De,d(i){i&&O(e),t&&t.d(i)}}}function Df(n,e,t){let{isOpen:i=!1}=e,{close:l}=e,{icon:r}=e,o=!1;window.addEventListener("publicDataFetched",h=>{t(2,o=!!h.detail.qmPaused)});let s;function a(h){s&&!s.contains(h.target)&&r&&!r.contains(h.target)&&i===!0&&l()}it(()=>{document.addEventListener("click",a)}),mn(()=>{document.removeEventListener("click",a)});async function c(h){let m=st.get();if(m)try{const v=await fetch("/api/v1/App/action/QueueManagerUpdate",{method:"POST",headers:{"Content-Type":"application/json","Authorization-Token":btoa(m.user.userName+":"+m.token)},body:JSON.stringify({pause:h})});if(!v.ok)throw new Error("Network response was not ok");await v.json(),Be.notify("Done","success")}catch(v){console.error("Error:",v)}}const u=h=>{h.preventDefault(),l()},f=h=>{h.preventDefault(),c(!1)},d=h=>{h.preventDefault(),c(!0)};function p(h){qe[h?"unshift":"push"](()=>{s=h,t(3,s)})}return n.$$set=h=>{"isOpen"in h&&t(0,i=h.isOpen),"close"in h&&t(1,l=h.close),"icon"in h&&t(5,r=h.icon)},[i,l,o,s,c,r,u,f,d,p]}class Af extends Le{constructor(e){super(),Te(this,e,Df,Sf,Se,{isOpen:0,close:1,icon:5})}}function Co(n){let e;return{c(){e=E("span"),g(e,"class","fas fa-pause-circle pause-icon")},m(t,i){M(t,e,i)},d(t){t&&O(e)}}}function Cf(n){let e,t,i,l,r,o,s,a,c,u=n[2]&&Co();return o=new Af({props:{icon:n[0],isOpen:n[1],close:n[4]}}),{c(){e=E("a"),t=pn("svg"),i=pn("use"),l=q(),u&&u.c(),r=q(),be(o.$$.fragment),g(i,"href","client/img/icons/icons.svg#tasks"),g(t,"class","icon"),g(e,"href","/"),g(e,"class","notifications-button"),g(e,"title",F.translate("jobManager"))},m(f,d){M(f,e,d),y(e,t),y(t,i),y(e,l),u&&u.m(e,null),n[6](e),M(f,r,d),he(o,f,d),s=!0,a||(c=$(e,"click",n[7]),a=!0)},p(f,[d]){f[2]?u||(u=Co(),u.c(),u.m(e,null)):u&&(u.d(1),u=null);const p={};d&1&&(p.icon=f[0]),d&2&&(p.isOpen=f[1]),o.$set(p)},i(f){s||(W(o.$$.fragment,f),s=!0)},o(f){j(o.$$.fragment,f),s=!1},d(f){f&&(O(e),O(r)),u&&u.d(),n[6](null),ge(o,f),a=!1,c()}}}function Tf(n,e,t){let{renderTable:i=()=>{}}=e,l,r=!1,o=!1;window.addEventListener("publicDataFetched",f=>{t(2,o=!!f.detail.qmPaused)});function s(){r||(t(1,r=!0),i())}function a(){t(1,r=!1),window.dispatchEvent(new Event("jobManagerPanelClosed"))}function c(f){qe[f?"unshift":"push"](()=>{l=f,t(0,l)})}const u=f=>{f.preventDefault(),s()};return n.$$set=f=>{"renderTable"in f&&t(5,i=f.renderTable)},[l,r,o,s,a,i,c,u]}class Lf extends Le{constructor(e){super(),Te(this,e,Tf,Cf,Se,{renderTable:5})}}function If(n){let e,t=`${n[0]}px`,i=`${n[0]}px`,l=`${n[1]}px`;return{c(){e=E("div"),g(e,"class","loading-icon spinner svelte-yw8t7l"),Fe(e,"width",t),Fe(e,"height",i),Fe(e,"border-width",l)},m(r,o){M(r,e,o)},p(r,[o]){o&1&&t!==(t=`${r[0]}px`)&&Fe(e,"width",t),o&1&&i!==(i=`${r[0]}px`)&&Fe(e,"height",i),o&2&&l!==(l=`${r[1]}px`)&&Fe(e,"border-width",l)},i:De,o:De,d(r){r&&O(e)}}}function Of(n,e,t){let{size:i=40}=e,{thickness:l=4}=e;return n.$$set=r=>{"size"in r&&t(0,i=r.size),"thickness"in r&&t(1,l=r.thickness)},[i,l]}class Pf extends Le{constructor(e){super(),Te(this,e,Of,If,Se,{size:0,thickness:1})}}function To(n){let e,t;return{c(){e=E("img"),Bi(e.src,t=n[1])||g(e,"src",t),g(e,"class","logo"),g(e,"alt",n[0])},m(i,l){M(i,e,l)},p(i,l){l&2&&!Bi(e.src,t=i[1])&&g(e,"src",t),l&1&&g(e,"alt",i[0])},d(i){i&&O(e)}}}function Lo(n){let e,t,i;return{c(){e=E("a"),t=E("i"),i=ve("Recovery Instructions"),g(t,"class","fa fa-history svelte-1qmezxs"),g(e,"href",n[2]),g(e,"target","_blank"),g(e,"class","btn btn-default svelte-1qmezxs"),g(e,"role","button"),Fe(e,"float","right")},m(l,r){M(l,e,r),y(e,t),y(e,i)},p(l,r){r&4&&g(e,"href",l[2])},d(l){l&&O(e)}}}function Io(n){let e,t,i,l,r,o;return{c(){e=E("hr"),t=q(),i=E("pre"),l=ve(n[3]),g(i,"class","logs-container svelte-1qmezxs")},m(s,a){M(s,e,a),M(s,t,a),M(s,i,a),y(i,l),n[11](i),r||(o=$(i,"scroll",n[8]),r=!0)},p(s,a){a&8&&Ne(l,s[3])},d(s){s&&(O(e),O(t),O(i)),n[11](null),r=!1,o()}}}function Mf(n){let e,t,i,l,r,o,s,a,c,u,f,d,p,h,m,v,_,k,S=n[4]?"Hide":"Show",b,A,w,T,I,D,C,N,P=n[1]&&To(n);u=new Pf({props:{size:"40",thickness:"5"}});let V=n[2]&&Lo(n),R=n[4]&&n[3]&&Io(n);return{c(){e=E("div"),t=E("div"),i=E("div"),P&&P.c(),l=q(),r=E("div"),o=E("div"),s=E("h3"),s.textContent="System is updating...",a=q(),c=E("section"),be(u.$$.fragment),f=q(),d=E("h5"),p=ve(n[5]),h=q(),m=E("section"),v=E("div"),_=E("button"),k=E("i"),b=ve(S),A=ve(" logs"),T=q(),V&&V.c(),I=q(),R&&R.c(),g(i,"class","logo-container"),g(t,"class","panel-heading"),g(d,"class","svelte-1qmezxs"),g(c,"class","progress-section svelte-1qmezxs"),g(k,"class","fa fa-list svelte-1qmezxs"),g(_,"class","btn btn-default svelte-1qmezxs"),_.disabled=w=!n[3],g(v,"class","buttons"),g(m,"class","logs-section"),g(o,"class","form-group"),g(r,"class","panel-body"),g(e,"id","login"),g(e,"class","panel panel-default panel-updating")},m(H,U){M(H,e,U),y(e,t),y(t,i),P&&P.m(i,null),y(e,l),y(e,r),y(r,o),y(o,s),y(o,a),y(o,c),he(u,c,null),y(c,f),y(c,d),y(d,p),y(o,h),y(o,m),y(m,v),y(v,_),y(_,k),y(_,b),y(_,A),y(v,T),V&&V.m(v,null),y(m,I),R&&R.m(m,null),D=!0,C||(N=$(_,"click",n[7]),C=!0)},p(H,[U]){H[1]?P?P.p(H,U):(P=To(H),P.c(),P.m(i,null)):P&&(P.d(1),P=null),(!D||U&32)&&Ne(p,H[5]),(!D||U&16)&&S!==(S=H[4]?"Hide":"Show")&&Ne(b,S),(!D||U&8&&w!==(w=!H[3]))&&(_.disabled=w),H[2]?V?V.p(H,U):(V=Lo(H),V.c(),V.m(v,null)):V&&(V.d(1),V=null),H[4]&&H[3]?R?R.p(H,U):(R=Io(H),R.c(),R.m(m,null)):R&&(R.d(1),R=null)},i(H){D||(W(u.$$.fragment,H),D=!0)},o(H){j(u.$$.fragment,H),D=!1},d(H){H&&O(e),P&&P.d(),ge(u),V&&V.d(),R&&R.d(),C=!1,N()}}}function Nf(n){return n.replace(/^\d{2,4}.\d{2}.\d{2,4} \d{2}:\d{2}:\d{2}/g,"").replace(/^[\-\|\s]+/,"")}function Ff(n,e,t){let{applicationName:i="AtroCore"}=e,{logoPath:l=null}=e,{logFilePath:r}=e,{restoreLink:o=null}=e,s=!1,a=!1,c=0,u=!0,f="",d,p;hf(()=>{p&&u&&p.scrollTo(0,p.scrollHeight)});function h(){t(4,s=!s),s||(u=!0)}function m(_){const k=_.currentTarget;u=k.scrollHeight-k.scrollTop===k.clientHeight}setInterval(async()=>{try{const _=await fetch(r,{cache:"no-store"});c+=1,_.ok?(t(3,f=(await _.text()).trim()),f.search("composer")>=0&&t(10,a=!0),c>65&&!a&&t(3,f="Something wrong. Please, reboot the server.")):a?setTimeout(()=>{location.reload()},2e3):c>65&&t(3,f="Something wrong. Please, reboot the server.")}catch(_){console.error("Error: ",_)}},1e3);function v(_){qe[_?"unshift":"push"](()=>{p=_,t(6,p)})}return n.$$set=_=>{"applicationName"in _&&t(0,i=_.applicationName),"logoPath"in _&&t(1,l=_.logoPath),"logFilePath"in _&&t(9,r=_.logFilePath),"restoreLink"in _&&t(2,o=_.restoreLink)},n.$$.update=()=>{if(n.$$.dirty&1032)if(f){const _=f.trim().split(`
`);t(5,d=Nf(_.pop()))}else a?t(5,d=""):t(5,d="Starting...")},[i,l,o,f,s,d,p,h,m,r,a,v]}class Bf extends Le{constructor(e){super(),Te(this,e,Ff,Mf,Se,{applicationName:0,logoPath:1,logFilePath:9,restoreLink:2})}}function Oo(n,e,t){const i=n.slice();return i[20]=e[t],i}function Po(n){let e,t=n[20].label+"",i,l,r,o,s,a;function c(){return n[12](n[20])}return{c(){e=E("button"),i=ve(t),l=q(),g(e,"data-action",r=n[20].name),e.disabled=n[1],g(e,"type","button"),g(e,"class",o=`btn action btn-${n[20].style??"default"}`)},m(u,f){M(u,e,f),y(e,i),y(e,l),s||(a=$(e,"click",c),s=!0)},p(u,f){n=u,f&1&&t!==(t=n[20].label+"")&&Ne(i,t),f&1&&r!==(r=n[20].name)&&g(e,"data-action",r),f&2&&(e.disabled=n[1]),f&1&&o!==(o=`btn action btn-${n[20].style??"default"}`)&&g(e,"class",o)},d(u){u&&O(e),s=!1,a()}}}function Rf(n){let e,t,i,l=de(n[0]),r=[];for(let a=0;a<l.length;a+=1)r[a]=Po(Oo(n,l,a));const o=n[11].default,s=ii(o,n,n[10],null);return{c(){e=E("div");for(let a=0;a<r.length;a+=1)r[a].c();t=q(),s&&s.c(),g(e,"class","button-container"),Fe(e,"padding-top","10px")},m(a,c){M(a,e,c);for(let u=0;u<r.length;u+=1)r[u]&&r[u].m(e,null);n[13](e),M(a,t,c),s&&s.m(a,c),i=!0},p(a,[c]){if(c&11){l=de(a[0]);let u;for(u=0;u<l.length;u+=1){const f=Oo(a,l,u);r[u]?r[u].p(f,c):(r[u]=Po(f),r[u].c(),r[u].m(e,null))}for(;u<r.length;u+=1)r[u].d(1);r.length=l.length}s&&s.p&&(!i||c&1024)&&ri(s,o,a,a[10],i?li(o,a[10],c,null):oi(a[10]),null)},i(a){i||(W(s,a),i=!0)},o(a){j(s,a),i=!1},d(a){a&&(O(e),O(t)),et(r,a),n[13](null),s&&s.d(a)}}}function Hf(n,e,t){let{$$slots:i={},$$scope:l}=e;const r=hn();let{params:o}=e,{fetch:s}=e,a,{loadLayout:c=w=>{Ut.get(scope,type,layoutProfileId,w,!1)}}=e,{validate:u=()=>!0}=e,f=!1,d=[],p;o.layoutProfiles,it(async()=>{var T;await h(),await gn(),r("ready");const w=document.querySelector("#layout-buttons");p&&w&&(o.inModal||o.replaceButtons)&&((T=w.closest(".modal-body"))==null||T.classList.add("modal-layout-manager"),w.appendChild(p))});async function h(){return Be.notify("Loading..."),new Promise((w,T)=>{c(I=>{t(9,a=I),Be.notify(!1),w(),o.afterRender&&o.afterRender()})})}function m(){t(1,f=!0);const w=s();if(!u(w)){t(1,f=!1);return}if(Be.notify("Saving..."),o.inModal&&!o.getActiveLayoutProfileId()){v(!0);return}Ut.set(o.scope,o.type,o.relatedScope,o.layoutProfileId,w,()=>{Be.notify("Saved","success",2e3),v(!1),t(1,f=!1),o.inModal||h()})}function v(w){o.onUpdate&&o.onUpdate(w)}function _(){o.inModal||h()}function k(){Be.confirm("Are you sure you want to reset this layout?",()=>{var w;Ut.resetToDefault(o.scope,o.type,o.relatedScope,(w=a.storedProfile)==null?void 0:w.id,()=>{v(!0),_()})})}function S(w){switch(w.name){case"save":m();break;case"cancel":_();break;case"reset":k();break;case"fullEdit":window.open(`#Admin/layouts/scope=${o.scope}&type=${o.type}${o.relatedScope?"&relatedScope="+o.relatedScope:""}${o.layoutProfileId?"&layoutProfileId="+o.layoutProfileId:""}`,"_blank");break}}const b=w=>S(w);function A(w){qe[w?"unshift":"push"](()=>{p=w,t(2,p)})}return n.$$set=w=>{"params"in w&&t(4,o=w.params),"fetch"in w&&t(5,s=w.fetch),"loadLayout"in w&&t(6,c=w.loadLayout),"validate"in w&&t(7,u=w.validate),"$$scope"in w&&t(10,l=w.$$scope)},n.$$.update=()=>{if(n.$$.dirty&529){if(t(0,d=[{name:"cancel",label:F.translate("Cancel","labels")}]),o.inModal){let w=st.get();w&&w.user&&w.user.isAdmin&&d.unshift({name:"fullEdit",label:F.translate("Full Edit","labels","LayoutManager")})}(!o.inModal||a!=null&&a.canEdit)&&d.unshift({name:"save",label:F.translate("Save","labels"),style:"primary"}),a&&a.storedProfile&&a.storedProfile.id===o.layoutProfileId&&a.canEdit&&d.push({name:"reset",label:F.translate("reset","labels","LayoutManager")})}},[d,f,p,S,o,s,c,u,m,a,l,i,b,A]}let Mo=class extends Le{constructor(e){super(),Te(this,e,Hf,Rf,Se,{params:4,fetch:5,loadLayout:6,validate:7,save:8})}get save(){return this.$$.ctx[8]}};/**!
 * Sortable 1.15.6
 * @author	RubaXa   <trash@rubaxa.org>
 * @author	owenm    <owen23355@gmail.com>
 * @license MIT
 */function No(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);e&&(i=i.filter(function(l){return Object.getOwnPropertyDescriptor(n,l).enumerable})),t.push.apply(t,i)}return t}function Bt(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?No(Object(t),!0).forEach(function(i){qf(n,i,t[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):No(Object(t)).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(t,i))})}return n}function Ui(n){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Ui=function(e){return typeof e}:Ui=function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ui(n)}function qf(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function Xt(){return Xt=Object.assign||function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n},Xt.apply(this,arguments)}function Wf(n,e){if(n==null)return{};var t={},i=Object.keys(n),l,r;for(r=0;r<i.length;r++)l=i[r],!(e.indexOf(l)>=0)&&(t[l]=n[l]);return t}function jf(n,e){if(n==null)return{};var t=Wf(n,e),i,l;if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);for(l=0;l<r.length;l++)i=r[l],!(e.indexOf(i)>=0)&&Object.prototype.propertyIsEnumerable.call(n,i)&&(t[i]=n[i])}return t}var zf="1.15.6";function Yt(n){if(typeof window<"u"&&window.navigator)return!!navigator.userAgent.match(n)}var Qt=Yt(/(?:Trident.*rv[ :]?11\.|msie|iemobile|Windows Phone)/i),fi=Yt(/Edge/i),Fo=Yt(/firefox/i),di=Yt(/safari/i)&&!Yt(/chrome/i)&&!Yt(/android/i),ql=Yt(/iP(ad|od|hone)/i),Bo=Yt(/chrome/i)&&Yt(/android/i),Ro={capture:!1,passive:!1};function Me(n,e,t){n.addEventListener(e,t,!Qt&&Ro)}function Pe(n,e,t){n.removeEventListener(e,t,!Qt&&Ro)}function Xi(n,e){if(e){if(e[0]===">"&&(e=e.substring(1)),n)try{if(n.matches)return n.matches(e);if(n.msMatchesSelector)return n.msMatchesSelector(e);if(n.webkitMatchesSelector)return n.webkitMatchesSelector(e)}catch{return!1}return!1}}function Ho(n){return n.host&&n!==document&&n.host.nodeType?n.host:n.parentNode}function It(n,e,t,i){if(n){t=t||document;do{if(e!=null&&(e[0]===">"?n.parentNode===t&&Xi(n,e):Xi(n,e))||i&&n===t)return n;if(n===t)break}while(n=Ho(n))}return null}var qo=/\s+/g;function wt(n,e,t){if(n&&e)if(n.classList)n.classList[t?"add":"remove"](e);else{var i=(" "+n.className+" ").replace(qo," ").replace(" "+e+" "," ");n.className=(i+(t?" "+e:"")).replace(qo," ")}}function _e(n,e,t){var i=n&&n.style;if(i){if(t===void 0)return document.defaultView&&document.defaultView.getComputedStyle?t=document.defaultView.getComputedStyle(n,""):n.currentStyle&&(t=n.currentStyle),e===void 0?t:t[e];!(e in i)&&e.indexOf("webkit")===-1&&(e="-webkit-"+e),i[e]=t+(typeof t=="string"?"":"px")}}function Nn(n,e){var t="";if(typeof n=="string")t=n;else do{var i=_e(n,"transform");i&&i!=="none"&&(t=i+" "+t)}while(!e&&(n=n.parentNode));var l=window.DOMMatrix||window.WebKitCSSMatrix||window.CSSMatrix||window.MSCSSMatrix;return l&&new l(t)}function Wo(n,e,t){if(n){var i=n.getElementsByTagName(e),l=0,r=i.length;if(t)for(;l<r;l++)t(i[l],l);return i}return[]}function Rt(){var n=document.scrollingElement;return n||document.documentElement}function xe(n,e,t,i,l){if(!(!n.getBoundingClientRect&&n!==window)){var r,o,s,a,c,u,f;if(n!==window&&n.parentNode&&n!==Rt()?(r=n.getBoundingClientRect(),o=r.top,s=r.left,a=r.bottom,c=r.right,u=r.height,f=r.width):(o=0,s=0,a=window.innerHeight,c=window.innerWidth,u=window.innerHeight,f=window.innerWidth),(e||t)&&n!==window&&(l=l||n.parentNode,!Qt))do if(l&&l.getBoundingClientRect&&(_e(l,"transform")!=="none"||t&&_e(l,"position")!=="static")){var d=l.getBoundingClientRect();o-=d.top+parseInt(_e(l,"border-top-width")),s-=d.left+parseInt(_e(l,"border-left-width")),a=o+r.height,c=s+r.width;break}while(l=l.parentNode);if(i&&n!==window){var p=Nn(l||n),h=p&&p.a,m=p&&p.d;p&&(o/=m,s/=h,f/=h,u/=m,a=o+u,c=s+f)}return{top:o,left:s,bottom:a,right:c,width:f,height:u}}}function jo(n,e,t){for(var i=nn(n,!0),l=xe(n)[e];i;){var r=xe(i)[t],o=void 0;if(o=l>=r,!o)return i;if(i===Rt())break;i=nn(i,!1)}return!1}function Fn(n,e,t,i){for(var l=0,r=0,o=n.children;r<o.length;){if(o[r].style.display!=="none"&&o[r]!==pe.ghost&&(i||o[r]!==pe.dragged)&&It(o[r],t.draggable,n,!1)){if(l===e)return o[r];l++}r++}return null}function Wl(n,e){for(var t=n.lastElementChild;t&&(t===pe.ghost||_e(t,"display")==="none"||e&&!Xi(t,e));)t=t.previousElementSibling;return t||null}function At(n,e){var t=0;if(!n||!n.parentNode)return-1;for(;n=n.previousElementSibling;)n.nodeName.toUpperCase()!=="TEMPLATE"&&n!==pe.clone&&(!e||Xi(n,e))&&t++;return t}function zo(n){var e=0,t=0,i=Rt();if(n)do{var l=Nn(n),r=l.a,o=l.d;e+=n.scrollLeft*r,t+=n.scrollTop*o}while(n!==i&&(n=n.parentNode));return[e,t]}function Gf(n,e){for(var t in n)if(n.hasOwnProperty(t)){for(var i in e)if(e.hasOwnProperty(i)&&e[i]===n[t][i])return Number(t)}return-1}function nn(n,e){if(!n||!n.getBoundingClientRect)return Rt();var t=n,i=!1;do if(t.clientWidth<t.scrollWidth||t.clientHeight<t.scrollHeight){var l=_e(t);if(t.clientWidth<t.scrollWidth&&(l.overflowX=="auto"||l.overflowX=="scroll")||t.clientHeight<t.scrollHeight&&(l.overflowY=="auto"||l.overflowY=="scroll")){if(!t.getBoundingClientRect||t===document.body)return Rt();if(i||e)return t;i=!0}}while(t=t.parentNode);return Rt()}function Vf(n,e){if(n&&e)for(var t in e)e.hasOwnProperty(t)&&(n[t]=e[t]);return n}function jl(n,e){return Math.round(n.top)===Math.round(e.top)&&Math.round(n.left)===Math.round(e.left)&&Math.round(n.height)===Math.round(e.height)&&Math.round(n.width)===Math.round(e.width)}var pi;function Go(n,e){return function(){if(!pi){var t=arguments,i=this;t.length===1?n.call(i,t[0]):n.apply(i,t),pi=setTimeout(function(){pi=void 0},e)}}}function Uf(){clearTimeout(pi),pi=void 0}function Vo(n,e,t){n.scrollLeft+=e,n.scrollTop+=t}function Uo(n){var e=window.Polymer,t=window.jQuery||window.Zepto;return e&&e.dom?e.dom(n).cloneNode(!0):t?t(n).clone(!0)[0]:n.cloneNode(!0)}function Xo(n,e,t){var i={};return Array.from(n.children).forEach(function(l){var r,o,s,a;if(!(!It(l,e.draggable,n,!1)||l.animated||l===t)){var c=xe(l);i.left=Math.min((r=i.left)!==null&&r!==void 0?r:1/0,c.left),i.top=Math.min((o=i.top)!==null&&o!==void 0?o:1/0,c.top),i.right=Math.max((s=i.right)!==null&&s!==void 0?s:-1/0,c.right),i.bottom=Math.max((a=i.bottom)!==null&&a!==void 0?a:-1/0,c.bottom)}}),i.width=i.right-i.left,i.height=i.bottom-i.top,i.x=i.left,i.y=i.top,i}var vt="Sortable"+new Date().getTime();function Xf(){var n=[],e;return{captureAnimationState:function(){if(n=[],!!this.options.animation){var i=[].slice.call(this.el.children);i.forEach(function(l){if(!(_e(l,"display")==="none"||l===pe.ghost)){n.push({target:l,rect:xe(l)});var r=Bt({},n[n.length-1].rect);if(l.thisAnimationDuration){var o=Nn(l,!0);o&&(r.top-=o.f,r.left-=o.e)}l.fromRect=r}})}},addAnimationState:function(i){n.push(i)},removeAnimationState:function(i){n.splice(Gf(n,{target:i}),1)},animateAll:function(i){var l=this;if(!this.options.animation){clearTimeout(e),typeof i=="function"&&i();return}var r=!1,o=0;n.forEach(function(s){var a=0,c=s.target,u=c.fromRect,f=xe(c),d=c.prevFromRect,p=c.prevToRect,h=s.rect,m=Nn(c,!0);m&&(f.top-=m.f,f.left-=m.e),c.toRect=f,c.thisAnimationDuration&&jl(d,f)&&!jl(u,f)&&(h.top-f.top)/(h.left-f.left)===(u.top-f.top)/(u.left-f.left)&&(a=Qf(h,d,p,l.options)),jl(f,u)||(c.prevFromRect=u,c.prevToRect=f,a||(a=l.options.animation),l.animate(c,h,f,a)),a&&(r=!0,o=Math.max(o,a),clearTimeout(c.animationResetTimer),c.animationResetTimer=setTimeout(function(){c.animationTime=0,c.prevFromRect=null,c.fromRect=null,c.prevToRect=null,c.thisAnimationDuration=null},a),c.thisAnimationDuration=a)}),clearTimeout(e),r?e=setTimeout(function(){typeof i=="function"&&i()},o):typeof i=="function"&&i(),n=[]},animate:function(i,l,r,o){if(o){_e(i,"transition",""),_e(i,"transform","");var s=Nn(this.el),a=s&&s.a,c=s&&s.d,u=(l.left-r.left)/(a||1),f=(l.top-r.top)/(c||1);i.animatingX=!!u,i.animatingY=!!f,_e(i,"transform","translate3d("+u+"px,"+f+"px,0)"),this.forRepaintDummy=Yf(i),_e(i,"transition","transform "+o+"ms"+(this.options.easing?" "+this.options.easing:"")),_e(i,"transform","translate3d(0,0,0)"),typeof i.animated=="number"&&clearTimeout(i.animated),i.animated=setTimeout(function(){_e(i,"transition",""),_e(i,"transform",""),i.animated=!1,i.animatingX=!1,i.animatingY=!1},o)}}}}function Yf(n){return n.offsetWidth}function Qf(n,e,t,i){return Math.sqrt(Math.pow(e.top-n.top,2)+Math.pow(e.left-n.left,2))/Math.sqrt(Math.pow(e.top-t.top,2)+Math.pow(e.left-t.left,2))*i.animation}var Bn=[],zl={initializeByDefault:!0},mi={mount:function(e){for(var t in zl)zl.hasOwnProperty(t)&&!(t in e)&&(e[t]=zl[t]);Bn.forEach(function(i){if(i.pluginName===e.pluginName)throw"Sortable: Cannot mount plugin ".concat(e.pluginName," more than once")}),Bn.push(e)},pluginEvent:function(e,t,i){var l=this;this.eventCanceled=!1,i.cancel=function(){l.eventCanceled=!0};var r=e+"Global";Bn.forEach(function(o){t[o.pluginName]&&(t[o.pluginName][r]&&t[o.pluginName][r](Bt({sortable:t},i)),t.options[o.pluginName]&&t[o.pluginName][e]&&t[o.pluginName][e](Bt({sortable:t},i)))})},initializePlugins:function(e,t,i,l){Bn.forEach(function(s){var a=s.pluginName;if(!(!e.options[a]&&!s.initializeByDefault)){var c=new s(e,t,e.options);c.sortable=e,c.options=e.options,e[a]=c,Xt(i,c.defaults)}});for(var r in e.options)if(e.options.hasOwnProperty(r)){var o=this.modifyOption(e,r,e.options[r]);typeof o<"u"&&(e.options[r]=o)}},getEventProperties:function(e,t){var i={};return Bn.forEach(function(l){typeof l.eventProperties=="function"&&Xt(i,l.eventProperties.call(t[l.pluginName],e))}),i},modifyOption:function(e,t,i){var l;return Bn.forEach(function(r){e[r.pluginName]&&r.optionListeners&&typeof r.optionListeners[t]=="function"&&(l=r.optionListeners[t].call(e[r.pluginName],i))}),l}};function Jf(n){var e=n.sortable,t=n.rootEl,i=n.name,l=n.targetEl,r=n.cloneEl,o=n.toEl,s=n.fromEl,a=n.oldIndex,c=n.newIndex,u=n.oldDraggableIndex,f=n.newDraggableIndex,d=n.originalEvent,p=n.putSortable,h=n.extraEventProperties;if(e=e||t&&t[vt],!!e){var m,v=e.options,_="on"+i.charAt(0).toUpperCase()+i.substr(1);window.CustomEvent&&!Qt&&!fi?m=new CustomEvent(i,{bubbles:!0,cancelable:!0}):(m=document.createEvent("Event"),m.initEvent(i,!0,!0)),m.to=o||t,m.from=s||t,m.item=l||t,m.clone=r,m.oldIndex=a,m.newIndex=c,m.oldDraggableIndex=u,m.newDraggableIndex=f,m.originalEvent=d,m.pullMode=p?p.lastPutMode:void 0;var k=Bt(Bt({},h),mi.getEventProperties(i,e));for(var S in k)m[S]=k[S];t&&t.dispatchEvent(m),v[_]&&v[_].call(e,m)}}var Zf=["evt"],bt=function(e,t){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},l=i.evt,r=jf(i,Zf);mi.pluginEvent.bind(pe)(e,t,Bt({dragEl:K,parentEl:Qe,ghostEl:ke,rootEl:Ge,nextEl:vn,lastDownEl:Yi,cloneEl:Ye,cloneHidden:ln,dragStarted:gi,putSortable:lt,activeSortable:pe.active,originalEvent:l,oldIndex:Rn,oldDraggableIndex:hi,newIndex:yt,newDraggableIndex:rn,hideGhostForTarget:$o,unhideGhostForTarget:ea,cloneNowHidden:function(){ln=!0},cloneNowShown:function(){ln=!1},dispatchSortableEvent:function(s){dt({sortable:t,name:s,originalEvent:l})}},r))};function dt(n){Jf(Bt({putSortable:lt,cloneEl:Ye,targetEl:K,rootEl:Ge,oldIndex:Rn,oldDraggableIndex:hi,newIndex:yt,newDraggableIndex:rn},n))}var K,Qe,ke,Ge,vn,Yi,Ye,ln,Rn,yt,hi,rn,Qi,lt,Hn=!1,Ji=!1,Zi=[],bn,Ot,Gl,Vl,Yo,Qo,gi,qn,vi,bi=!1,Ki=!1,xi,ut,Ul=[],Xl=!1,$i=[],el=typeof document<"u",tl=ql,Jo=fi||Qt?"cssFloat":"float",Kf=el&&!Bo&&!ql&&"draggable"in document.createElement("div"),Zo=function(){if(el){if(Qt)return!1;var n=document.createElement("x");return n.style.cssText="pointer-events:auto",n.style.pointerEvents==="auto"}}(),Ko=function(e,t){var i=_e(e),l=parseInt(i.width)-parseInt(i.paddingLeft)-parseInt(i.paddingRight)-parseInt(i.borderLeftWidth)-parseInt(i.borderRightWidth),r=Fn(e,0,t),o=Fn(e,1,t),s=r&&_e(r),a=o&&_e(o),c=s&&parseInt(s.marginLeft)+parseInt(s.marginRight)+xe(r).width,u=a&&parseInt(a.marginLeft)+parseInt(a.marginRight)+xe(o).width;if(i.display==="flex")return i.flexDirection==="column"||i.flexDirection==="column-reverse"?"vertical":"horizontal";if(i.display==="grid")return i.gridTemplateColumns.split(" ").length<=1?"vertical":"horizontal";if(r&&s.float&&s.float!=="none"){var f=s.float==="left"?"left":"right";return o&&(a.clear==="both"||a.clear===f)?"vertical":"horizontal"}return r&&(s.display==="block"||s.display==="flex"||s.display==="table"||s.display==="grid"||c>=l&&i[Jo]==="none"||o&&i[Jo]==="none"&&c+u>l)?"vertical":"horizontal"},xf=function(e,t,i){var l=i?e.left:e.top,r=i?e.right:e.bottom,o=i?e.width:e.height,s=i?t.left:t.top,a=i?t.right:t.bottom,c=i?t.width:t.height;return l===s||r===a||l+o/2===s+c/2},$f=function(e,t){var i;return Zi.some(function(l){var r=l[vt].options.emptyInsertThreshold;if(!(!r||Wl(l))){var o=xe(l),s=e>=o.left-r&&e<=o.right+r,a=t>=o.top-r&&t<=o.bottom+r;if(s&&a)return i=l}}),i},xo=function(e){function t(r,o){return function(s,a,c,u){var f=s.options.group.name&&a.options.group.name&&s.options.group.name===a.options.group.name;if(r==null&&(o||f))return!0;if(r==null||r===!1)return!1;if(o&&r==="clone")return r;if(typeof r=="function")return t(r(s,a,c,u),o)(s,a,c,u);var d=(o?s:a).options.group.name;return r===!0||typeof r=="string"&&r===d||r.join&&r.indexOf(d)>-1}}var i={},l=e.group;(!l||Ui(l)!="object")&&(l={name:l}),i.name=l.name,i.checkPull=t(l.pull,!0),i.checkPut=t(l.put),i.revertClone=l.revertClone,e.group=i},$o=function(){!Zo&&ke&&_e(ke,"display","none")},ea=function(){!Zo&&ke&&_e(ke,"display","")};el&&!Bo&&document.addEventListener("click",function(n){if(Ji)return n.preventDefault(),n.stopPropagation&&n.stopPropagation(),n.stopImmediatePropagation&&n.stopImmediatePropagation(),Ji=!1,!1},!0);var _n=function(e){if(K){e=e.touches?e.touches[0]:e;var t=$f(e.clientX,e.clientY);if(t){var i={};for(var l in e)e.hasOwnProperty(l)&&(i[l]=e[l]);i.target=i.rootEl=t,i.preventDefault=void 0,i.stopPropagation=void 0,t[vt]._onDragOver(i)}}},ed=function(e){K&&K.parentNode[vt]._isOutsideThisEl(e.target)};function pe(n,e){if(!(n&&n.nodeType&&n.nodeType===1))throw"Sortable: `el` must be an HTMLElement, not ".concat({}.toString.call(n));this.el=n,this.options=e=Xt({},e),n[vt]=this;var t={group:null,sort:!0,disabled:!1,store:null,handle:null,draggable:/^[uo]l$/i.test(n.nodeName)?">li":">*",swapThreshold:1,invertSwap:!1,invertedSwapThreshold:null,removeCloneOnHide:!0,direction:function(){return Ko(n,this.options)},ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",dragClass:"sortable-drag",ignore:"a, img",filter:null,preventOnFilter:!0,animation:0,easing:null,setData:function(o,s){o.setData("Text",s.textContent)},dropBubble:!1,dragoverBubble:!1,dataIdAttr:"data-id",delay:0,delayOnTouchOnly:!1,touchStartThreshold:(Number.parseInt?Number:window).parseInt(window.devicePixelRatio,10)||1,forceFallback:!1,fallbackClass:"sortable-fallback",fallbackOnBody:!1,fallbackTolerance:0,fallbackOffset:{x:0,y:0},supportPointer:pe.supportPointer!==!1&&"PointerEvent"in window&&(!di||ql),emptyInsertThreshold:5};mi.initializePlugins(this,n,t);for(var i in t)!(i in e)&&(e[i]=t[i]);xo(e);for(var l in this)l.charAt(0)==="_"&&typeof this[l]=="function"&&(this[l]=this[l].bind(this));this.nativeDraggable=e.forceFallback?!1:Kf,this.nativeDraggable&&(this.options.touchStartThreshold=1),e.supportPointer?Me(n,"pointerdown",this._onTapStart):(Me(n,"mousedown",this._onTapStart),Me(n,"touchstart",this._onTapStart)),this.nativeDraggable&&(Me(n,"dragover",this),Me(n,"dragenter",this)),Zi.push(this.el),e.store&&e.store.get&&this.sort(e.store.get(this)||[]),Xt(this,Xf())}pe.prototype={constructor:pe,_isOutsideThisEl:function(e){!this.el.contains(e)&&e!==this.el&&(qn=null)},_getDirection:function(e,t){return typeof this.options.direction=="function"?this.options.direction.call(this,e,t,K):this.options.direction},_onTapStart:function(e){if(e.cancelable){var t=this,i=this.el,l=this.options,r=l.preventOnFilter,o=e.type,s=e.touches&&e.touches[0]||e.pointerType&&e.pointerType==="touch"&&e,a=(s||e).target,c=e.target.shadowRoot&&(e.path&&e.path[0]||e.composedPath&&e.composedPath()[0])||a,u=l.filter;if(sd(i),!K&&!(/mousedown|pointerdown/.test(o)&&e.button!==0||l.disabled)&&!c.isContentEditable&&!(!this.nativeDraggable&&di&&a&&a.tagName.toUpperCase()==="SELECT")&&(a=It(a,l.draggable,i,!1),!(a&&a.animated)&&Yi!==a)){if(Rn=At(a),hi=At(a,l.draggable),typeof u=="function"){if(u.call(this,e,a,this)){dt({sortable:t,rootEl:c,name:"filter",targetEl:a,toEl:i,fromEl:i}),bt("filter",t,{evt:e}),r&&e.preventDefault();return}}else if(u&&(u=u.split(",").some(function(f){if(f=It(c,f.trim(),i,!1),f)return dt({sortable:t,rootEl:f,name:"filter",targetEl:a,fromEl:i,toEl:i}),bt("filter",t,{evt:e}),!0}),u)){r&&e.preventDefault();return}l.handle&&!It(c,l.handle,i,!1)||this._prepareDragStart(e,s,a)}}},_prepareDragStart:function(e,t,i){var l=this,r=l.el,o=l.options,s=r.ownerDocument,a;if(i&&!K&&i.parentNode===r){var c=xe(i);if(Ge=r,K=i,Qe=K.parentNode,vn=K.nextSibling,Yi=i,Qi=o.group,pe.dragged=K,bn={target:K,clientX:(t||e).clientX,clientY:(t||e).clientY},Yo=bn.clientX-c.left,Qo=bn.clientY-c.top,this._lastX=(t||e).clientX,this._lastY=(t||e).clientY,K.style["will-change"]="all",a=function(){if(bt("delayEnded",l,{evt:e}),pe.eventCanceled){l._onDrop();return}l._disableDelayedDragEvents(),!Fo&&l.nativeDraggable&&(K.draggable=!0),l._triggerDragStart(e,t),dt({sortable:l,name:"choose",originalEvent:e}),wt(K,o.chosenClass,!0)},o.ignore.split(",").forEach(function(u){Wo(K,u.trim(),Yl)}),Me(s,"dragover",_n),Me(s,"mousemove",_n),Me(s,"touchmove",_n),o.supportPointer?(Me(s,"pointerup",l._onDrop),!this.nativeDraggable&&Me(s,"pointercancel",l._onDrop)):(Me(s,"mouseup",l._onDrop),Me(s,"touchend",l._onDrop),Me(s,"touchcancel",l._onDrop)),Fo&&this.nativeDraggable&&(this.options.touchStartThreshold=4,K.draggable=!0),bt("delayStart",this,{evt:e}),o.delay&&(!o.delayOnTouchOnly||t)&&(!this.nativeDraggable||!(fi||Qt))){if(pe.eventCanceled){this._onDrop();return}o.supportPointer?(Me(s,"pointerup",l._disableDelayedDrag),Me(s,"pointercancel",l._disableDelayedDrag)):(Me(s,"mouseup",l._disableDelayedDrag),Me(s,"touchend",l._disableDelayedDrag),Me(s,"touchcancel",l._disableDelayedDrag)),Me(s,"mousemove",l._delayedDragTouchMoveHandler),Me(s,"touchmove",l._delayedDragTouchMoveHandler),o.supportPointer&&Me(s,"pointermove",l._delayedDragTouchMoveHandler),l._dragStartTimer=setTimeout(a,o.delay)}else a()}},_delayedDragTouchMoveHandler:function(e){var t=e.touches?e.touches[0]:e;Math.max(Math.abs(t.clientX-this._lastX),Math.abs(t.clientY-this._lastY))>=Math.floor(this.options.touchStartThreshold/(this.nativeDraggable&&window.devicePixelRatio||1))&&this._disableDelayedDrag()},_disableDelayedDrag:function(){K&&Yl(K),clearTimeout(this._dragStartTimer),this._disableDelayedDragEvents()},_disableDelayedDragEvents:function(){var e=this.el.ownerDocument;Pe(e,"mouseup",this._disableDelayedDrag),Pe(e,"touchend",this._disableDelayedDrag),Pe(e,"touchcancel",this._disableDelayedDrag),Pe(e,"pointerup",this._disableDelayedDrag),Pe(e,"pointercancel",this._disableDelayedDrag),Pe(e,"mousemove",this._delayedDragTouchMoveHandler),Pe(e,"touchmove",this._delayedDragTouchMoveHandler),Pe(e,"pointermove",this._delayedDragTouchMoveHandler)},_triggerDragStart:function(e,t){t=t||e.pointerType=="touch"&&e,!this.nativeDraggable||t?this.options.supportPointer?Me(document,"pointermove",this._onTouchMove):t?Me(document,"touchmove",this._onTouchMove):Me(document,"mousemove",this._onTouchMove):(Me(K,"dragend",this),Me(Ge,"dragstart",this._onDragStart));try{document.selection?il(function(){document.selection.empty()}):window.getSelection().removeAllRanges()}catch{}},_dragStarted:function(e,t){if(Hn=!1,Ge&&K){bt("dragStarted",this,{evt:t}),this.nativeDraggable&&Me(document,"dragover",ed);var i=this.options;!e&&wt(K,i.dragClass,!1),wt(K,i.ghostClass,!0),pe.active=this,e&&this._appendGhost(),dt({sortable:this,name:"start",originalEvent:t})}else this._nulling()},_emulateDragOver:function(){if(Ot){this._lastX=Ot.clientX,this._lastY=Ot.clientY,$o();for(var e=document.elementFromPoint(Ot.clientX,Ot.clientY),t=e;e&&e.shadowRoot&&(e=e.shadowRoot.elementFromPoint(Ot.clientX,Ot.clientY),e!==t);)t=e;if(K.parentNode[vt]._isOutsideThisEl(e),t)do{if(t[vt]){var i=void 0;if(i=t[vt]._onDragOver({clientX:Ot.clientX,clientY:Ot.clientY,target:e,rootEl:t}),i&&!this.options.dragoverBubble)break}e=t}while(t=Ho(t));ea()}},_onTouchMove:function(e){if(bn){var t=this.options,i=t.fallbackTolerance,l=t.fallbackOffset,r=e.touches?e.touches[0]:e,o=ke&&Nn(ke,!0),s=ke&&o&&o.a,a=ke&&o&&o.d,c=tl&&ut&&zo(ut),u=(r.clientX-bn.clientX+l.x)/(s||1)+(c?c[0]-Ul[0]:0)/(s||1),f=(r.clientY-bn.clientY+l.y)/(a||1)+(c?c[1]-Ul[1]:0)/(a||1);if(!pe.active&&!Hn){if(i&&Math.max(Math.abs(r.clientX-this._lastX),Math.abs(r.clientY-this._lastY))<i)return;this._onDragStart(e,!0)}if(ke){o?(o.e+=u-(Gl||0),o.f+=f-(Vl||0)):o={a:1,b:0,c:0,d:1,e:u,f};var d="matrix(".concat(o.a,",").concat(o.b,",").concat(o.c,",").concat(o.d,",").concat(o.e,",").concat(o.f,")");_e(ke,"webkitTransform",d),_e(ke,"mozTransform",d),_e(ke,"msTransform",d),_e(ke,"transform",d),Gl=u,Vl=f,Ot=r}e.cancelable&&e.preventDefault()}},_appendGhost:function(){if(!ke){var e=this.options.fallbackOnBody?document.body:Ge,t=xe(K,!0,tl,!0,e),i=this.options;if(tl){for(ut=e;_e(ut,"position")==="static"&&_e(ut,"transform")==="none"&&ut!==document;)ut=ut.parentNode;ut!==document.body&&ut!==document.documentElement?(ut===document&&(ut=Rt()),t.top+=ut.scrollTop,t.left+=ut.scrollLeft):ut=Rt(),Ul=zo(ut)}ke=K.cloneNode(!0),wt(ke,i.ghostClass,!1),wt(ke,i.fallbackClass,!0),wt(ke,i.dragClass,!0),_e(ke,"transition",""),_e(ke,"transform",""),_e(ke,"box-sizing","border-box"),_e(ke,"margin",0),_e(ke,"top",t.top),_e(ke,"left",t.left),_e(ke,"width",t.width),_e(ke,"height",t.height),_e(ke,"opacity","0.8"),_e(ke,"position",tl?"absolute":"fixed"),_e(ke,"zIndex","100000"),_e(ke,"pointerEvents","none"),pe.ghost=ke,e.appendChild(ke),_e(ke,"transform-origin",Yo/parseInt(ke.style.width)*100+"% "+Qo/parseInt(ke.style.height)*100+"%")}},_onDragStart:function(e,t){var i=this,l=e.dataTransfer,r=i.options;if(bt("dragStart",this,{evt:e}),pe.eventCanceled){this._onDrop();return}bt("setupClone",this),pe.eventCanceled||(Ye=Uo(K),Ye.removeAttribute("id"),Ye.draggable=!1,Ye.style["will-change"]="",this._hideClone(),wt(Ye,this.options.chosenClass,!1),pe.clone=Ye),i.cloneId=il(function(){bt("clone",i),!pe.eventCanceled&&(i.options.removeCloneOnHide||Ge.insertBefore(Ye,K),i._hideClone(),dt({sortable:i,name:"clone"}))}),!t&&wt(K,r.dragClass,!0),t?(Ji=!0,i._loopId=setInterval(i._emulateDragOver,50)):(Pe(document,"mouseup",i._onDrop),Pe(document,"touchend",i._onDrop),Pe(document,"touchcancel",i._onDrop),l&&(l.effectAllowed="move",r.setData&&r.setData.call(i,l,K)),Me(document,"drop",i),_e(K,"transform","translateZ(0)")),Hn=!0,i._dragStartId=il(i._dragStarted.bind(i,t,e)),Me(document,"selectstart",i),gi=!0,window.getSelection().removeAllRanges(),di&&_e(document.body,"user-select","none")},_onDragOver:function(e){var t=this.el,i=e.target,l,r,o,s=this.options,a=s.group,c=pe.active,u=Qi===a,f=s.sort,d=lt||c,p,h=this,m=!1;if(Xl)return;function v(te,Oe){bt(te,h,Bt({evt:e,isOwner:u,axis:p?"vertical":"horizontal",revert:o,dragRect:l,targetRect:r,canSort:f,fromSortable:d,target:i,completed:k,onMove:function(Je,J){return nl(Ge,t,K,l,Je,xe(Je),e,J)},changed:S},Oe))}function _(){v("dragOverAnimationCapture"),h.captureAnimationState(),h!==d&&d.captureAnimationState()}function k(te){return v("dragOverCompleted",{insertion:te}),te&&(u?c._hideClone():c._showClone(h),h!==d&&(wt(K,lt?lt.options.ghostClass:c.options.ghostClass,!1),wt(K,s.ghostClass,!0)),lt!==h&&h!==pe.active?lt=h:h===pe.active&&lt&&(lt=null),d===h&&(h._ignoreWhileAnimating=i),h.animateAll(function(){v("dragOverAnimationComplete"),h._ignoreWhileAnimating=null}),h!==d&&(d.animateAll(),d._ignoreWhileAnimating=null)),(i===K&&!K.animated||i===t&&!i.animated)&&(qn=null),!s.dragoverBubble&&!e.rootEl&&i!==document&&(K.parentNode[vt]._isOutsideThisEl(e.target),!te&&_n(e)),!s.dragoverBubble&&e.stopPropagation&&e.stopPropagation(),m=!0}function S(){yt=At(K),rn=At(K,s.draggable),dt({sortable:h,name:"change",toEl:t,newIndex:yt,newDraggableIndex:rn,originalEvent:e})}if(e.preventDefault!==void 0&&e.cancelable&&e.preventDefault(),i=It(i,s.draggable,t,!0),v("dragOver"),pe.eventCanceled)return m;if(K.contains(e.target)||i.animated&&i.animatingX&&i.animatingY||h._ignoreWhileAnimating===i)return k(!1);if(Ji=!1,c&&!s.disabled&&(u?f||(o=Qe!==Ge):lt===this||(this.lastPutMode=Qi.checkPull(this,c,K,e))&&a.checkPut(this,c,K,e))){if(p=this._getDirection(e,i)==="vertical",l=xe(K),v("dragOverValid"),pe.eventCanceled)return m;if(o)return Qe=Ge,_(),this._hideClone(),v("revert"),pe.eventCanceled||(vn?Ge.insertBefore(K,vn):Ge.appendChild(K)),k(!0);var b=Wl(t,s.draggable);if(!b||ld(e,p,this)&&!b.animated){if(b===K)return k(!1);if(b&&t===e.target&&(i=b),i&&(r=xe(i)),nl(Ge,t,K,l,i,r,e,!!i)!==!1)return _(),b&&b.nextSibling?t.insertBefore(K,b.nextSibling):t.appendChild(K),Qe=t,S(),k(!0)}else if(b&&id(e,p,this)){var A=Fn(t,0,s,!0);if(A===K)return k(!1);if(i=A,r=xe(i),nl(Ge,t,K,l,i,r,e,!1)!==!1)return _(),t.insertBefore(K,A),Qe=t,S(),k(!0)}else if(i.parentNode===t){r=xe(i);var w=0,T,I=K.parentNode!==t,D=!xf(K.animated&&K.toRect||l,i.animated&&i.toRect||r,p),C=p?"top":"left",N=jo(i,"top","top")||jo(K,"top","top"),P=N?N.scrollTop:void 0;qn!==i&&(T=r[C],bi=!1,Ki=!D&&s.invertSwap||I),w=rd(e,i,r,p,D?1:s.swapThreshold,s.invertedSwapThreshold==null?s.swapThreshold:s.invertedSwapThreshold,Ki,qn===i);var V;if(w!==0){var R=At(K);do R-=w,V=Qe.children[R];while(V&&(_e(V,"display")==="none"||V===ke))}if(w===0||V===i)return k(!1);qn=i,vi=w;var H=i.nextElementSibling,U=!1;U=w===1;var oe=nl(Ge,t,K,l,i,r,e,U);if(oe!==!1)return(oe===1||oe===-1)&&(U=oe===1),Xl=!0,setTimeout(nd,30),_(),U&&!H?t.appendChild(K):i.parentNode.insertBefore(K,U?H:i),N&&Vo(N,0,P-N.scrollTop),Qe=K.parentNode,T!==void 0&&!Ki&&(xi=Math.abs(T-xe(i)[C])),S(),k(!0)}if(t.contains(K))return k(!1)}return!1},_ignoreWhileAnimating:null,_offMoveEvents:function(){Pe(document,"mousemove",this._onTouchMove),Pe(document,"touchmove",this._onTouchMove),Pe(document,"pointermove",this._onTouchMove),Pe(document,"dragover",_n),Pe(document,"mousemove",_n),Pe(document,"touchmove",_n)},_offUpEvents:function(){var e=this.el.ownerDocument;Pe(e,"mouseup",this._onDrop),Pe(e,"touchend",this._onDrop),Pe(e,"pointerup",this._onDrop),Pe(e,"pointercancel",this._onDrop),Pe(e,"touchcancel",this._onDrop),Pe(document,"selectstart",this)},_onDrop:function(e){var t=this.el,i=this.options;if(yt=At(K),rn=At(K,i.draggable),bt("drop",this,{evt:e}),Qe=K&&K.parentNode,yt=At(K),rn=At(K,i.draggable),pe.eventCanceled){this._nulling();return}Hn=!1,Ki=!1,bi=!1,clearInterval(this._loopId),clearTimeout(this._dragStartTimer),Ql(this.cloneId),Ql(this._dragStartId),this.nativeDraggable&&(Pe(document,"drop",this),Pe(t,"dragstart",this._onDragStart)),this._offMoveEvents(),this._offUpEvents(),di&&_e(document.body,"user-select",""),_e(K,"transform",""),e&&(gi&&(e.cancelable&&e.preventDefault(),!i.dropBubble&&e.stopPropagation()),ke&&ke.parentNode&&ke.parentNode.removeChild(ke),(Ge===Qe||lt&&lt.lastPutMode!=="clone")&&Ye&&Ye.parentNode&&Ye.parentNode.removeChild(Ye),K&&(this.nativeDraggable&&Pe(K,"dragend",this),Yl(K),K.style["will-change"]="",gi&&!Hn&&wt(K,lt?lt.options.ghostClass:this.options.ghostClass,!1),wt(K,this.options.chosenClass,!1),dt({sortable:this,name:"unchoose",toEl:Qe,newIndex:null,newDraggableIndex:null,originalEvent:e}),Ge!==Qe?(yt>=0&&(dt({rootEl:Qe,name:"add",toEl:Qe,fromEl:Ge,originalEvent:e}),dt({sortable:this,name:"remove",toEl:Qe,originalEvent:e}),dt({rootEl:Qe,name:"sort",toEl:Qe,fromEl:Ge,originalEvent:e}),dt({sortable:this,name:"sort",toEl:Qe,originalEvent:e})),lt&&lt.save()):yt!==Rn&&yt>=0&&(dt({sortable:this,name:"update",toEl:Qe,originalEvent:e}),dt({sortable:this,name:"sort",toEl:Qe,originalEvent:e})),pe.active&&((yt==null||yt===-1)&&(yt=Rn,rn=hi),dt({sortable:this,name:"end",toEl:Qe,originalEvent:e}),this.save()))),this._nulling()},_nulling:function(){bt("nulling",this),Ge=K=Qe=ke=vn=Ye=Yi=ln=bn=Ot=gi=yt=rn=Rn=hi=qn=vi=lt=Qi=pe.dragged=pe.ghost=pe.clone=pe.active=null,$i.forEach(function(e){e.checked=!0}),$i.length=Gl=Vl=0},handleEvent:function(e){switch(e.type){case"drop":case"dragend":this._onDrop(e);break;case"dragenter":case"dragover":K&&(this._onDragOver(e),td(e));break;case"selectstart":e.preventDefault();break}},toArray:function(){for(var e=[],t,i=this.el.children,l=0,r=i.length,o=this.options;l<r;l++)t=i[l],It(t,o.draggable,this.el,!1)&&e.push(t.getAttribute(o.dataIdAttr)||ad(t));return e},sort:function(e,t){var i={},l=this.el;this.toArray().forEach(function(r,o){var s=l.children[o];It(s,this.options.draggable,l,!1)&&(i[r]=s)},this),t&&this.captureAnimationState(),e.forEach(function(r){i[r]&&(l.removeChild(i[r]),l.appendChild(i[r]))}),t&&this.animateAll()},save:function(){var e=this.options.store;e&&e.set&&e.set(this)},closest:function(e,t){return It(e,t||this.options.draggable,this.el,!1)},option:function(e,t){var i=this.options;if(t===void 0)return i[e];var l=mi.modifyOption(this,e,t);typeof l<"u"?i[e]=l:i[e]=t,e==="group"&&xo(i)},destroy:function(){bt("destroy",this);var e=this.el;e[vt]=null,Pe(e,"mousedown",this._onTapStart),Pe(e,"touchstart",this._onTapStart),Pe(e,"pointerdown",this._onTapStart),this.nativeDraggable&&(Pe(e,"dragover",this),Pe(e,"dragenter",this)),Array.prototype.forEach.call(e.querySelectorAll("[draggable]"),function(t){t.removeAttribute("draggable")}),this._onDrop(),this._disableDelayedDragEvents(),Zi.splice(Zi.indexOf(this.el),1),this.el=e=null},_hideClone:function(){if(!ln){if(bt("hideClone",this),pe.eventCanceled)return;_e(Ye,"display","none"),this.options.removeCloneOnHide&&Ye.parentNode&&Ye.parentNode.removeChild(Ye),ln=!0}},_showClone:function(e){if(e.lastPutMode!=="clone"){this._hideClone();return}if(ln){if(bt("showClone",this),pe.eventCanceled)return;K.parentNode==Ge&&!this.options.group.revertClone?Ge.insertBefore(Ye,K):vn?Ge.insertBefore(Ye,vn):Ge.appendChild(Ye),this.options.group.revertClone&&this.animate(K,Ye),_e(Ye,"display",""),ln=!1}}};function td(n){n.dataTransfer&&(n.dataTransfer.dropEffect="move"),n.cancelable&&n.preventDefault()}function nl(n,e,t,i,l,r,o,s){var a,c=n[vt],u=c.options.onMove,f;return window.CustomEvent&&!Qt&&!fi?a=new CustomEvent("move",{bubbles:!0,cancelable:!0}):(a=document.createEvent("Event"),a.initEvent("move",!0,!0)),a.to=e,a.from=n,a.dragged=t,a.draggedRect=i,a.related=l||e,a.relatedRect=r||xe(e),a.willInsertAfter=s,a.originalEvent=o,n.dispatchEvent(a),u&&(f=u.call(c,a,o)),f}function Yl(n){n.draggable=!1}function nd(){Xl=!1}function id(n,e,t){var i=xe(Fn(t.el,0,t.options,!0)),l=Xo(t.el,t.options,ke),r=10;return e?n.clientX<l.left-r||n.clientY<i.top&&n.clientX<i.right:n.clientY<l.top-r||n.clientY<i.bottom&&n.clientX<i.left}function ld(n,e,t){var i=xe(Wl(t.el,t.options.draggable)),l=Xo(t.el,t.options,ke),r=10;return e?n.clientX>l.right+r||n.clientY>i.bottom&&n.clientX>i.left:n.clientY>l.bottom+r||n.clientX>i.right&&n.clientY>i.top}function rd(n,e,t,i,l,r,o,s){var a=i?n.clientY:n.clientX,c=i?t.height:t.width,u=i?t.top:t.left,f=i?t.bottom:t.right,d=!1;if(!o){if(s&&xi<c*l){if(!bi&&(vi===1?a>u+c*r/2:a<f-c*r/2)&&(bi=!0),bi)d=!0;else if(vi===1?a<u+xi:a>f-xi)return-vi}else if(a>u+c*(1-l)/2&&a<f-c*(1-l)/2)return od(e)}return d=d||o,d&&(a<u+c*r/2||a>f-c*r/2)?a>u+c/2?1:-1:0}function od(n){return At(K)<At(n)?1:-1}function ad(n){for(var e=n.tagName+n.className+n.src+n.href+n.textContent,t=e.length,i=0;t--;)i+=e.charCodeAt(t);return i.toString(36)}function sd(n){$i.length=0;for(var e=n.getElementsByTagName("input"),t=e.length;t--;){var i=e[t];i.checked&&$i.push(i)}}function il(n){return setTimeout(n,0)}function Ql(n){return clearTimeout(n)}el&&Me(document,"touchmove",function(n){(pe.active||Hn)&&n.cancelable&&n.preventDefault()}),pe.utils={on:Me,off:Pe,css:_e,find:Wo,is:function(e,t){return!!It(e,t,e,!1)},extend:Vf,throttle:Go,closest:It,toggleClass:wt,clone:Uo,index:At,nextTick:il,cancelNextTick:Ql,detectDirection:Ko,getChild:Fn,expando:vt},pe.get=function(n){return n[vt]},pe.mount=function(){for(var n=arguments.length,e=new Array(n),t=0;t<n;t++)e[t]=arguments[t];e[0].constructor===Array&&(e=e[0]),e.forEach(function(i){if(!i.prototype||!i.prototype.constructor)throw"Sortable: Mounted plugin must be a constructor function, not ".concat({}.toString.call(i));i.utils&&(pe.utils=Bt(Bt({},pe.utils),i.utils)),mi.mount(i)})},pe.create=function(n,e){return new pe(n,e)},pe.version=zf;var $e=[],_i,Jl,Zl=!1,Kl,xl,ll,wi;function ud(){function n(){this.defaults={scroll:!0,forceAutoScrollFallback:!1,scrollSensitivity:30,scrollSpeed:10,bubbleScroll:!0};for(var e in this)e.charAt(0)==="_"&&typeof this[e]=="function"&&(this[e]=this[e].bind(this))}return n.prototype={dragStarted:function(t){var i=t.originalEvent;this.sortable.nativeDraggable?Me(document,"dragover",this._handleAutoScroll):this.options.supportPointer?Me(document,"pointermove",this._handleFallbackAutoScroll):i.touches?Me(document,"touchmove",this._handleFallbackAutoScroll):Me(document,"mousemove",this._handleFallbackAutoScroll)},dragOverCompleted:function(t){var i=t.originalEvent;!this.options.dragOverBubble&&!i.rootEl&&this._handleAutoScroll(i)},drop:function(){this.sortable.nativeDraggable?Pe(document,"dragover",this._handleAutoScroll):(Pe(document,"pointermove",this._handleFallbackAutoScroll),Pe(document,"touchmove",this._handleFallbackAutoScroll),Pe(document,"mousemove",this._handleFallbackAutoScroll)),ta(),rl(),Uf()},nulling:function(){ll=Jl=_i=Zl=wi=Kl=xl=null,$e.length=0},_handleFallbackAutoScroll:function(t){this._handleAutoScroll(t,!0)},_handleAutoScroll:function(t,i){var l=this,r=(t.touches?t.touches[0]:t).clientX,o=(t.touches?t.touches[0]:t).clientY,s=document.elementFromPoint(r,o);if(ll=t,i||this.options.forceAutoScrollFallback||fi||Qt||di){$l(t,this.options,s,i);var a=nn(s,!0);Zl&&(!wi||r!==Kl||o!==xl)&&(wi&&ta(),wi=setInterval(function(){var c=nn(document.elementFromPoint(r,o),!0);c!==a&&(a=c,rl()),$l(t,l.options,c,i)},10),Kl=r,xl=o)}else{if(!this.options.bubbleScroll||nn(s,!0)===Rt()){rl();return}$l(t,this.options,nn(s,!1),!1)}}},Xt(n,{pluginName:"scroll",initializeByDefault:!0})}function rl(){$e.forEach(function(n){clearInterval(n.pid)}),$e=[]}function ta(){clearInterval(wi)}var $l=Go(function(n,e,t,i){if(e.scroll){var l=(n.touches?n.touches[0]:n).clientX,r=(n.touches?n.touches[0]:n).clientY,o=e.scrollSensitivity,s=e.scrollSpeed,a=Rt(),c=!1,u;Jl!==t&&(Jl=t,rl(),_i=e.scroll,u=e.scrollFn,_i===!0&&(_i=nn(t,!0)));var f=0,d=_i;do{var p=d,h=xe(p),m=h.top,v=h.bottom,_=h.left,k=h.right,S=h.width,b=h.height,A=void 0,w=void 0,T=p.scrollWidth,I=p.scrollHeight,D=_e(p),C=p.scrollLeft,N=p.scrollTop;p===a?(A=S<T&&(D.overflowX==="auto"||D.overflowX==="scroll"||D.overflowX==="visible"),w=b<I&&(D.overflowY==="auto"||D.overflowY==="scroll"||D.overflowY==="visible")):(A=S<T&&(D.overflowX==="auto"||D.overflowX==="scroll"),w=b<I&&(D.overflowY==="auto"||D.overflowY==="scroll"));var P=A&&(Math.abs(k-l)<=o&&C+S<T)-(Math.abs(_-l)<=o&&!!C),V=w&&(Math.abs(v-r)<=o&&N+b<I)-(Math.abs(m-r)<=o&&!!N);if(!$e[f])for(var R=0;R<=f;R++)$e[R]||($e[R]={});($e[f].vx!=P||$e[f].vy!=V||$e[f].el!==p)&&($e[f].el=p,$e[f].vx=P,$e[f].vy=V,clearInterval($e[f].pid),(P!=0||V!=0)&&(c=!0,$e[f].pid=setInterval((function(){i&&this.layer===0&&pe.active._onTouchMove(ll);var H=$e[this.layer].vy?$e[this.layer].vy*s:0,U=$e[this.layer].vx?$e[this.layer].vx*s:0;typeof u=="function"&&u.call(pe.dragged.parentNode[vt],U,H,n,ll,$e[this.layer].el)!=="continue"||Vo($e[this.layer].el,U,H)}).bind({layer:f}),24))),f++}while(e.bubbleScroll&&d!==a&&(d=nn(d,!1)));Zl=c}},30),na=function(e){var t=e.originalEvent,i=e.putSortable,l=e.dragEl,r=e.activeSortable,o=e.dispatchSortableEvent,s=e.hideGhostForTarget,a=e.unhideGhostForTarget;if(t){var c=i||r;s();var u=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:t,f=document.elementFromPoint(u.clientX,u.clientY);a(),c&&!c.el.contains(f)&&(o("spill"),this.onSpill({dragEl:l,putSortable:i}))}};function er(){}er.prototype={startIndex:null,dragStart:function(e){var t=e.oldDraggableIndex;this.startIndex=t},onSpill:function(e){var t=e.dragEl,i=e.putSortable;this.sortable.captureAnimationState(),i&&i.captureAnimationState();var l=Fn(this.sortable.el,this.startIndex,this.options);l?this.sortable.el.insertBefore(t,l):this.sortable.el.appendChild(t),this.sortable.animateAll(),i&&i.animateAll()},drop:na},Xt(er,{pluginName:"revertOnSpill"});function tr(){}tr.prototype={onSpill:function(e){var t=e.dragEl,i=e.putSortable,l=i||this.sortable;l.captureAnimationState(),t.parentNode&&t.parentNode.removeChild(t),l.animateAll()},drop:na},Xt(tr,{pluginName:"removeOnSpill"}),pe.mount(new ud),pe.mount(tr,er);function ia(n,e,t){const i=n.slice();return i[16]=e[t],i}function la(n,e,t){const i=n.slice();return i[19]=e[t],i}function ra(n,e,t){const i=n.slice();return i[22]=e[t],i}function oa(n){let e,t,i,l;function r(){return n[11](n[22])}return{c(){e=E("div"),t=E("a"),t.innerHTML='<svg class="icon icon-small"><use href="client/img/icons/icons.svg#pencil-alt"></use></svg>',g(t,"href","javascript:"),g(t,"data-action","editField"),g(t,"class","edit-field svelte-1azk92t"),g(e,"class","right svelte-1azk92t")},m(o,s){M(o,e,s),y(e,t),i||(l=$(t,"click",r),i=!0)},p(o,s){n=o},d(o){o&&O(e),i=!1,l()}}}function aa(n,e){let t,i,l,r=e[22].label+"",o,s,a,c=e[2].editable&&oa(e),u=[e[10](e[22])],f={};for(let d=0;d<u.length;d+=1)f=ni(f,u[d]);return{key:n,first:null,c(){t=E("li"),i=E("div"),l=E("label"),o=ve(r),s=q(),c&&c.c(),a=q(),g(l,"class","svelte-1azk92t"),g(i,"class","left svelte-1azk92t"),en(t,f),me(t,"svelte-1azk92t",!0),this.first=t},m(d,p){M(d,t,p),y(t,i),y(i,l),y(l,o),y(t,s),c&&c.m(t,null),y(t,a)},p(d,p){e=d,p&1&&r!==(r=e[22].label+"")&&Ne(o,r),e[2].editable?c?c.p(e,p):(c=oa(e),c.c(),c.m(t,a)):c&&(c.d(1),c=null),en(t,f=zi(u,[p&1&&e[10](e[22])])),me(t,"svelte-1azk92t",!0)},d(d){d&&O(t),c&&c.d()}}}function sa(n){let e,t=F.translate(n[16].name,"scopeNames")+"",i;return{c(){e=E("span"),i=ve(t),g(e,"class","title svelte-1azk92t")},m(l,r){M(l,e,r),y(e,i)},p(l,r){r&2&&t!==(t=F.translate(l[16].name,"scopeNames")+"")&&Ne(i,t)},d(l){l&&O(e)}}}function ua(n,e){let t,i,l,r=e[19].label+"",o,s,a=[e[10](e[19])],c={};for(let u=0;u<a.length;u+=1)c=ni(c,a[u]);return{key:n,first:null,c(){t=E("li"),i=E("div"),l=E("label"),o=ve(r),s=q(),g(l,"class","svelte-1azk92t"),g(i,"class","left svelte-1azk92t"),en(t,c),me(t,"svelte-1azk92t",!0),this.first=t},m(u,f){M(u,t,f),y(t,i),y(i,l),y(l,o),y(t,s)},p(u,f){e=u,f&2&&r!==(r=e[19].label+"")&&Ne(o,r),en(t,c=zi(a,[f&2&&e[10](e[19])])),me(t,"svelte-1azk92t",!0)},d(u){u&&O(t)}}}function ca(n,e){let t,i,l,r=[],o=new Map,s,a,c=e[1].length>1&&sa(e),u=de(e[16].fields);const f=d=>d[19].name;for(let d=0;d<u.length;d+=1){let p=la(e,u,d),h=f(p);o.set(h,r[d]=ua(h,p))}return{key:n,first:null,c(){t=E("div"),c&&c.c(),i=q(),l=E("ul");for(let d=0;d<r.length;d+=1)r[d].c();a=q(),g(l,"class","disabled connected svelte-1azk92t"),g(l,"data-name",s=e[16].name),g(t,"class","svelte-1azk92t"),me(t,"group",e[1].length>1),this.first=t},m(d,p){M(d,t,p),c&&c.m(t,null),y(t,i),y(t,l);for(let h=0;h<r.length;h+=1)r[h]&&r[h].m(l,null);y(t,a)},p(d,p){e=d,e[1].length>1?c?c.p(e,p):(c=sa(e),c.c(),c.m(t,i)):c&&(c.d(1),c=null),p&1026&&(u=de(e[16].fields),r=Vt(r,p,f,1,e,u,o,l,Gt,ua,null,la)),p&2&&s!==(s=e[16].name)&&g(l,"data-name",s),p&2&&me(t,"group",e[1].length>1)},d(d){d&&O(t),c&&c.d();for(let p=0;p<r.length;p+=1)r[p].d()}}}function cd(n){let e,t,i,l,r,o,s,a=[],c=new Map,u,f,d,p,h,m,v,_,k=[],S=new Map,b=de(n[0].sort(da));const A=I=>I[22].name;for(let I=0;I<b.length;I+=1){let D=ra(n,b,I),C=A(D);c.set(C,a[I]=aa(C,D))}let w=de(n[1]);const T=I=>I[16].name;for(let I=0;I<w.length;I+=1){let D=ia(n,w,I),C=T(D);S.set(C,k[I]=ca(C,D))}return{c(){e=E("div"),t=E("div"),i=E("div"),l=E("header"),l.textContent=`${F.translate("Selected","labels","Admin")}`,r=q(),o=E("div"),s=E("ul");for(let I=0;I<a.length;I+=1)a[I].c();u=q(),f=E("div"),d=q(),p=E("div"),h=E("div"),m=E("header"),m.textContent=`${F.translate("Available","labels","Admin")}`,v=q(),_=E("div");for(let I=0;I<k.length;I+=1)k[I].c();g(l,"class","svelte-1azk92t"),g(s,"class","enabled connected svelte-1azk92t"),g(o,"class","rows-wrapper svelte-1azk92t"),g(i,"class","well svelte-1azk92t"),g(t,"class","col-sm-5 svelte-1azk92t"),g(f,"class","col-sm-1 svelte-1azk92t"),Fe(f,"width","35px"),g(m,"class","svelte-1azk92t"),g(_,"class","rows-wrapper svelte-1azk92t"),g(h,"class","well svelte-1azk92t"),g(p,"class","col-sm-5 svelte-1azk92t"),g(e,"id","layout"),g(e,"class","row svelte-1azk92t")},m(I,D){M(I,e,D),y(e,t),y(t,i),y(i,l),y(i,r),y(i,o),y(o,s);for(let C=0;C<a.length;C+=1)a[C]&&a[C].m(s,null);y(e,u),y(e,f),y(e,d),y(e,p),y(p,h),y(h,m),y(h,v),y(h,_);for(let C=0;C<k.length;C+=1)k[C]&&k[C].m(_,null);n[12](e)},p(I,D){D&1285&&(b=de(I[0].sort(da)),a=Vt(a,D,A,1,I,b,c,s,Gt,aa,null,ra)),D&1026&&(w=de(I[1]),k=Vt(k,D,T,1,I,w,S,_,Gt,ca,null,ia))},d(I){I&&O(e);for(let D=0;D<a.length;D+=1)a[D].d();for(let D=0;D<k.length;D+=1)k[D].d();n[12](null)}}}function fd(n){let e,t,i={params:n[2],validate:n[9],fetch:n[4],loadLayout:n[3],$$slots:{default:[cd]},$$scope:{ctx:n}};return e=new Mo({props:i}),n[13](e),e.$on("ready",n[7]),{c(){be(e.$$.fragment)},m(l,r){he(e,l,r),t=!0},p(l,[r]){const o={};r&4&&(o.params=l[2]),r&16&&(o.fetch=l[4]),r&8&&(o.loadLayout=l[3]),r&33554471&&(o.$$scope={dirty:r,ctx:l}),e.$set(o)},i(l){t||(W(e.$$.fragment,l),t=!0)},o(l){j(e.$$.fragment,l),t=!1},d(l){n[13](null),ge(e,l)}}}function dd(n){return n.toLowerCase()}function fa(n,e){return n[e]}const da=(n,e)=>n.sortOrder-e.sortOrder;function pd(n,e,t){let i,l,r,{params:o}=e,{selectedFields:s=[]}=e,{availableGroups:a=[]}=e,{loadLayout:c}=e,u;mn(()=>{l&&l.destroy(),r&&r.forEach(S=>S.destroy())});function f(){const S={group:"fields",draggable:"li",animation:150};l=pe.create(i.querySelector("ul.enabled"),{...S,onEnd(b){const A=b.to.closest(".connected");if(A.classList.contains("enabled")){const[w]=s.splice(b.oldIndex,1);s.splice(b.newIndex,0,w)}else{const w=s[b.oldIndex];s.splice(b.oldIndex,1);let T=a.find(I=>!I.prefix);if(a.forEach(I=>{I.prefix&&w.name.startsWith(I.prefix)&&(T=I)}),T.name!==A.attributes["data-name"].value){const I=document.querySelector(`#layout ul.disabled[data-name="${T.name}"]`);I.children.length?I.insertBefore(b.item,I.children[0]):I.appendChild(b.item),T.fields.unshift(w)}else T.fields.splice(b.newIndex,0,w);t(1,a=[...a])}t(0,s=[...s])}}),r=[];for(let b of i.querySelectorAll("ul.disabled")){const A=pe.create(b,{...S,onEnd(w){const T=w.to.closest(".connected");let I=null;if(T.classList.contains("disabled")){if(T!==b){w.oldIndex>=w.from.children.length?w.from.appendChild(w.item):w.from.insertBefore(w.item,w.from.children[w.oldIndex]);return}for(let D of a)if(D.name===T.attributes["data-name"].value){[I]=D.fields.splice(w.oldIndex,1),I&&D.fields.splice(w.newIndex,0,I);break}}else t(1,a=a.map(D=>(D.name===w.from.closest("ul").attributes["data-name"].value&&([I]=D.fields.splice(w.oldIndex,1)),D))),s.splice(w.newIndex,0,I),t(0,s=[...s])}});r.push(A)}}function d(S){o.openEditDialog(S,o.scope,o.dataAttributeList,o.dataAttributesDefs,b=>{t(0,s=s.map(A=>{if(A.name===S.name)for(let w in b)A[w]=b[w];return A}))})}let{fetch:p=()=>s}=e;function h(S){return S.length===0?(Be.notify("Layout cannot be empty","error"),!1):!0}function m(S){const b={};return o.dataAttributeList.forEach(A=>{fa(S,A)!=null&&(b[`data-${dd(A)}`]=fa(S,A))}),b}const v=S=>d(S);function _(S){qe[S?"unshift":"push"](()=>{i=S,t(5,i)})}function k(S){qe[S?"unshift":"push"](()=>{u=S,t(6,u)})}return n.$$set=S=>{"params"in S&&t(2,o=S.params),"selectedFields"in S&&t(0,s=S.selectedFields),"availableGroups"in S&&t(1,a=S.availableGroups),"loadLayout"in S&&t(3,c=S.loadLayout),"fetch"in S&&t(4,p=S.fetch)},[s,a,o,c,p,i,u,f,d,h,m,v,_,k]}let pa=class extends Le{constructor(e){super(),Te(this,e,pd,fd,Se,{params:2,selectedFields:0,availableGroups:1,loadLayout:3,fetch:4})}};const ol={upperCaseFirst(n){return n.length?n[0].toUpperCase()+n.slice(1):""}};function md(n){let e,t,i={params:n[0],selectedFields:n[2],availableGroups:n[3],editable:hd,loadLayout:n[4]};return e=new pa({props:i}),n[5](e),{c(){be(e.$$.fragment)},m(l,r){he(e,l,r),t=!0},p(l,[r]){const o={};r&1&&(o.params=l[0]),r&4&&(o.selectedFields=l[2]),r&8&&(o.availableGroups=l[3]),e.$set(o)},i(l){t||(W(e.$$.fragment,l),t=!0)},o(l){j(e.$$.fragment,l),t=!1},d(l){n[5](null),ge(e,l)}}}let hd=!0;function gd(n,e,t){let{params:i}=e;i.dataAttributeList||(i.dataAttributeList=["id","name","width","widthPx","link","notSortable","align","view","customLabel","editable"]),i.dataAttributesDefs||(i.dataAttributesDefs={link:{type:"bool"},width:{type:"float"},notSortable:{type:"bool"},align:{type:"enum",options:["left","right"]},view:{type:"varchar",readOnly:!0},customLabel:{type:"varchar",readOnly:!0},widthPx:{type:"float"},name:{type:"varchar",readOnly:!0},editable:{type:"bool"}});let l,r=[],o=[];const s=[],a=[];function c(k){Ut.get(i.scope,i.type,i.relatedScope,i.layoutProfileId,S=>{k&&(h(S.layout),k(S))},!1)}function u(k,S){return S==="_self"?F.translate(k,"scopeNamesPlural","Global"):S==="_bookmark"?F.translate("Bookmark","scopeNamesPlural","Global"):S==="_admin"?F.translate("Administration","labels","Global"):F.translate(S,"fields",k)}function f(){var S,b;const k=[];return i.type==="leftSidebar"&&(ae.get(["scopes",i.scope,"bookmarkDisabled"])||k.push("_bookmark"),ae.get(["scopes",i.scope,"type"])==="Hierarchy"&&!ae.get(["scopes",i.scope,"disableHierarchy"])&&k.push("_self"),(b=(S=st.get())==null?void 0:S.user)!=null&&b.isAdmin&&k.push("_admin")),k}function d(k,S){return ae.get(["entityDefs",k,"fields",S,"type"])??""}function p(k,S){const b=S.split("."),A=ae.get(["entityDefs",b[0],"links",b[1]])??{};return A.entity===k&&A.relationName?Espo.utils.upperCaseFirst(A.relationName):""}function h(k){const S=[];let b="";if(i.relatedScope&&i.type==="list"&&(b=p(i.scope,i.relatedScope),b)){const I={name:b,scope:b,prefix:b+"__"};let D=Object.keys(ae.get(["entityDefs",b,"fields"])||{}).filter(C=>m(d(b,C))&&v(b,C));D=D.filter(C=>!(ae.get(["entityDefs",b,"fields",C,"relationField"])??!1)),D=D.sort((C,N)=>u(b,C).localeCompare(u(b,N))).map(C=>I.prefix+C),I.fields=D,S.push(I)}let A=Object.keys(ae.get(["entityDefs",i.scope,"fields"])||{}).filter(I=>m(d(i.scope,I))&&v(i.scope,I));A.push(...f()),A=A.sort((I,D)=>u(i.scope,I).localeCompare(u(i.scope,D))),S.unshift({name:i.scope,scope:i.scope,fields:A});const w=[],T=[];for(const I of S)I.fields=I.fields.map(D=>{const C=u(I.scope,I.prefix?D.replace(I.prefix,""):D);I.prefix||(w.includes(C)&&T.push(C),w.push(C));const N={name:D,label:C},P=ae.get(["entityDefs",I.scope,"fields",D,"type"]);return P&&ae.get(["fields",P,"notSortable"])&&(N.notSortable=!0),N});t(2,r=k),S[0].fields.forEach(I=>{T.includes(I.label)&&(I.label+=` (${I.name})`);const D=r.find(C=>!C.label&&C.name===I.name);D&&(D.label=I.label)}),S[1]&&S[1].fields.forEach(I=>{w.includes(I.label)&&(I.label+=" (Relation)");const D=r.find(C=>!C.label&&C.name===I.name);D&&(D.label=I.label)});for(const I of S)I.fields=I.fields.filter(D=>!r.find(C=>C.name===D.name));t(3,o=S.reverse())}function m(k){return i.fieldTypes?i.fieldTypes.includes(k):!0}function v(k,S){if(s.includes(S)||a.includes(d(k,S)))return!1;const b=["disabled",`layout${ol.upperCaseFirst(i.type)}Disabled`];i.reelType&&b.push(`layout${ol.upperCaseFirst(i.reelType)}Disabled`);for(let A of b)if(ae.get(["entityDefs",k,"fields",S,A]))return!1;return!0}function _(k){qe[k?"unshift":"push"](()=>{l=k,t(1,l)})}return n.$$set=k=>{"params"in k&&t(0,i=k.params)},[i,l,r,o,c,_]}class nr extends Le{constructor(e){super(),Te(this,e,gd,md,Se,{params:0})}}function vd(n){let e,t;return e=new pa({props:{params:n[0],selectedFields:n[1],availableGroups:n[2],loadLayout:n[3]}}),{c(){be(e.$$.fragment)},m(i,l){he(e,i,l),t=!0},p(i,[l]){const r={};l&1&&(r.params=i[0]),l&2&&(r.selectedFields=i[1]),l&4&&(r.availableGroups=i[2]),e.$set(r)},i(i){t||(W(e.$$.fragment,i),t=!0)},o(i){j(e.$$.fragment,i),t=!1},d(i){ge(e,i)}}}function bd(n,e){return!n.getLinkParam(e,"disabled")&&!n.getLinkParam(e,"layoutRelationshipsDisabled")}function _d(n,e,t){let{params:i}=e;i.dataAttributeList||(i.dataAttributeList=["id","name","style","hiddenPerDefault"]),i.dataAttributesDefs||(i.dataAttributesDefs={style:{type:"enum",options:["default","success","danger","primary","info","warning"],translation:"LayoutManager.options.style"},hiddenPerDefault:{type:"bool"},name:{readOnly:!0}});let l=[],r=[];function o(a){Hl.create(i.scope,function(c){Ut.get(i.scope,i.type,null,i.layoutProfileId,u=>{a&&(s(c,u.layout),a(u))},!1)})}function s(a,c){let u=[];for(let h in a.defs.links)["belongsTo","hasMany","hasChildren"].includes(a.defs.links[h].type)&&bd(a,h)&&u.push(h);const f=ae.get(["clientDefs",i.scope,"bottomPanels","detail"])||[];for(let h of f)h.layoutRelationshipsDisabled||u.push(h.name);u.sort(function(h,m){let v,_,k=f.find(b=>b.name===h),S=f.find(b=>b.name===m);return h in a.defs.links?v=F.translate(h,"links",i.scope):k&&(v=F.translate(k.label,"labels",i.scope)),m in a.defs.links?_=F.translate(m,"links",i.scope):S&&(_=F.translate(S.label,"labels",i.scope)),v.localeCompare(_)});let d=[];t(1,l=[]);const p={name:i.scope,fields:[]};for(let h in c){let m=c[h],v,_=f.find(k=>k.name===m.name);typeof m=="string"||m instanceof String?v={name:m,label:_?F.translate(_.label,"labels",i.scope):F.translate(m,"fields",i.scope)}:(v=m,v.label=_?F.translate(_.label,"labels",i.scope):F.translate(v.name,"fields",i.scope)),i.dataAttributeList.forEach(k=>{if(k==="name"||k in v)return;let S=ae.get(["clientDefs",i.scope,"relationshipPanels",v.name,k]);S!==null&&(v[k]=S)}),l.push(v),d.push(v.name)}for(let h of u)if(!d.includes(h)){let m=f.find(v=>v.name===h);p.fields.push({name:h,label:m?F.translate(m.label,"labels",i.scope):F.translate(h,"fields",i.scope)})}t(2,r=[p])}return n.$$set=a=>{"params"in a&&t(0,i=a.params)},[i,l,r,o]}class wd extends Le{constructor(e){super(),Te(this,e,_d,vd,Se,{params:0})}}function ma(n,e,t){const i=n.slice();return i[43]=e[t],i}function ha(n,e,t){const i=n.slice();return i[46]=e[t],i}function ga(n,e,t){const i=n.slice();return i[49]=e[t],i}function va(n,e,t){const i=n.slice();return i[52]=e[t],i}function ba(n,e,t){const i=n.slice();return i[55]=e[t],i[57]=t,i}function yd(n){let e,t,i,l,r;function o(){return n[20](n[49],n[52],n[57])}function s(...a){return n[21](n[49],n[52],n[57],...a)}return{c(){e=E("li"),t=E("a"),t.innerHTML='<i class="fas fa-minus"></i>',i=q(),g(t,"href","#"),g(t,"data-action","minusCell"),g(t,"class","remove-field svelte-t2y606"),g(e,"class","empty cell svelte-t2y606")},m(a,c){M(a,e,c),y(e,t),y(e,i),l||(r=[$(t,"click",$t(o)),$(e,"dragover",$t(Ad)),$(e,"drop",s)],l=!0)},p(a,c){n=a},d(a){a&&O(e),l=!1,nt(r)}}}function kd(n){let e,t=n[55].label+"",i,l,r,o,s,a,c,u,f,d,p;function h(){return n[18](n[49],n[52],n[57])}function m(...v){return n[19](n[55],...v)}return{c(){e=E("li"),i=ve(t),l=q(),r=E("a"),r.innerHTML='<i class="fas fa-times"></i>',o=q(),g(r,"href","#"),g(r,"data-action","removeField"),g(r,"class","remove-field svelte-t2y606"),g(e,"class","cell svelte-t2y606"),g(e,"draggable","true"),g(e,"data-id",s=n[55].id),g(e,"data-name",a=n[55].name),g(e,"data-full-width",c=n[55].fullWidth?"true":void 0),g(e,"data-custom-label",u=n[55].customLabel?n[55].customLabel:void 0),g(e,"data-no-label",f=n[55].noLabel)},m(v,_){M(v,e,_),y(e,i),y(e,l),y(e,r),y(e,o),d||(p=[$(r,"click",$t(h)),$(e,"dragstart",Pl(m))],d=!0)},p(v,_){n=v,_[0]&2&&t!==(t=n[55].label+"")&&Ne(i,t),_[0]&2&&s!==(s=n[55].id)&&g(e,"data-id",s),_[0]&2&&a!==(a=n[55].name)&&g(e,"data-name",a),_[0]&2&&c!==(c=n[55].fullWidth?"true":void 0)&&g(e,"data-full-width",c),_[0]&2&&u!==(u=n[55].customLabel?n[55].customLabel:void 0)&&g(e,"data-custom-label",u),_[0]&2&&f!==(f=n[55].noLabel)&&g(e,"data-no-label",f)},d(v){v&&O(e),d=!1,nt(p)}}}function _a(n){let e;function t(r,o){return r[55]?kd:yd}let i=t(n),l=i(n);return{c(){l.c(),e=ze()},m(r,o){l.m(r,o),M(r,e,o)},p(r,o){i===(i=t(r))&&l?l.p(r,o):(l.d(1),l=i(r),l&&(l.c(),l.m(e.parentNode,e)))},d(r){r&&O(e),l.d(r)}}}function wa(n,e){let t,i,l,r,o,s,a,c,u;function f(){return e[17](e[49],e[52])}let d=de(e[52].cells),p=[];for(let h=0;h<d.length;h+=1)p[h]=_a(ba(e,d,h));return{key:n,first:null,c(){t=E("li"),i=E("div"),l=E("a"),l.innerHTML='<i class="fas fa-times"></i>',r=q(),o=E("ul");for(let h=0;h<p.length;h+=1)p[h].c();s=q(),g(l,"href","#"),g(l,"data-action","removeRow"),g(l,"class","remove-row pull-right svelte-t2y606"),g(i,"class","svelte-t2y606"),g(o,"class","cells svelte-t2y606"),g(t,"class","row svelte-t2y606"),g(t,"data-number",a=e[52].number),this.first=t},m(h,m){M(h,t,m),y(t,i),y(i,l),y(t,r),y(t,o);for(let v=0;v<p.length;v+=1)p[v]&&p[v].m(o,null);y(t,s),c||(u=[$(l,"click",$t(f)),$(o,"mousedown",Pl(Cd))],c=!0)},p(h,m){if(e=h,m[0]&5634){d=de(e[52].cells);let v;for(v=0;v<d.length;v+=1){const _=ba(e,d,v);p[v]?p[v].p(_,m):(p[v]=_a(_),p[v].c(),p[v].m(o,null))}for(;v<p.length;v+=1)p[v].d(1);p.length=d.length}m[0]&2&&a!==(a=e[52].number)&&g(t,"data-number",a)},d(h){h&&O(t),et(p,h),c=!1,nt(u)}}}function ya(n,e){let t,i,l,r=(e[49].customLabel||e[49].label||"")+"",o,s,a,c,u,f,d,p,h,m,v,_=[],k=new Map,S,b,A,w,T,I,D;function C(){return e[15](e[49])}function N(){return e[16](e[49])}let P=de(e[49].rows);const V=H=>H[52].number;for(let H=0;H<P.length;H+=1){let U=va(e,P,H),oe=V(U);k.set(oe,_[H]=wa(oe,U))}function R(){return e[22](e[49])}return{key:n,first:null,c(){t=E("li"),i=E("header"),l=E("label"),o=ve(r),a=ve(`
                                    `),c=E("a"),c.innerHTML='<svg class="icon icon-small"><use href="client/img/icons/icons.svg#pencil-alt"></use></svg>',u=q(),f=E("a"),d=E("i"),m=q(),v=E("ul");for(let H=0;H<_.length;H+=1)_[H].c();S=q(),b=E("div"),A=E("a"),A.innerHTML='<i class="fas fa-plus"></i>',w=q(),g(l,"data-is-custom",s=e[49].customLabel?"true":void 0),g(l,"class","svelte-t2y606"),g(c,"href","#"),g(c,"data-action","edit-panel-label"),g(c,"class","edit-panel-label svelte-t2y606"),g(d,"class","fas fa-times"),g(f,"href","#"),Fe(f,"float","right"),g(f,"data-action","removePanel"),g(f,"class","remove-panel svelte-t2y606"),g(f,"data-number",p=e[49].number),g(i,"data-name",h=e[49].name),g(i,"class","svelte-t2y606"),g(v,"class","rows svelte-t2y606"),g(A,"href","#"),g(A,"data-action","addRow"),g(A,"class","svelte-t2y606"),g(b,"class","svelte-t2y606"),g(t,"data-number",T=e[49].number),g(t,"class","panel-layout svelte-t2y606"),this.first=t},m(H,U){M(H,t,U),y(t,i),y(i,l),y(l,o),y(i,a),y(i,c),y(i,u),y(i,f),y(f,d),y(t,m),y(t,v);for(let oe=0;oe<_.length;oe+=1)_[oe]&&_[oe].m(v,null);y(t,S),y(t,b),y(b,A),y(t,w),I||(D=[$(c,"click",$t(C)),$(f,"click",$t(N)),$(v,"mousedown",Pl(Td)),$(A,"click",$t(R))],I=!0)},p(H,U){e=H,U[0]&2&&r!==(r=(e[49].customLabel||e[49].label||"")+"")&&Ne(o,r),U[0]&2&&s!==(s=e[49].customLabel?"true":void 0)&&g(l,"data-is-custom",s),U[0]&2&&p!==(p=e[49].number)&&g(f,"data-number",p),U[0]&2&&h!==(h=e[49].name)&&g(i,"data-name",h),U[0]&5890&&(P=de(e[49].rows),_=Vt(_,U,V,1,e,P,k,v,Gt,wa,null,va)),U[0]&2&&T!==(T=e[49].number)&&g(t,"data-number",T)},d(H){H&&O(t);for(let U=0;U<_.length;U+=1)_[U].d();I=!1,nt(D)}}}function ka(n){let e,t=F.translate(n[43].name,"scopeNames")+"",i;return{c(){e=E("span"),i=ve(t),g(e,"class","title svelte-t2y606")},m(l,r){M(l,e,r),y(e,i)},p(l,r){r[0]&4&&t!==(t=F.translate(l[43].name,"scopeNames")+"")&&Ne(i,t)},d(l){l&&O(e)}}}function Ea(n,e){let t,i=e[46].label+"",l,r,o,s,a;function c(...u){return e[23](e[46],...u)}return{key:n,first:null,c(){t=E("li"),l=ve(i),r=q(),g(t,"class","cell svelte-t2y606"),g(t,"data-name",o=e[46].name),this.first=t},m(u,f){M(u,t,f),y(t,l),y(t,r),s||(a=$(t,"dragstart",c),s=!0)},p(u,f){e=u,f[0]&4&&i!==(i=e[46].label+"")&&Ne(l,i),f[0]&4&&o!==(o=e[46].name)&&g(t,"data-name",o)},d(u){u&&O(t),s=!1,a()}}}function Sa(n,e){let t,i,l,r=[],o=new Map,s,a,c=e[2].length>1&&ka(e),u=de(e[43].fields);const f=d=>d[46].name;for(let d=0;d<u.length;d+=1){let p=ha(e,u,d),h=f(p);o.set(h,r[d]=Ea(h,p))}return{key:n,first:null,c(){t=E("div"),c&&c.c(),i=q(),l=E("ul");for(let d=0;d<r.length;d+=1)r[d].c();a=q(),g(l,"class","disabled cells clearfix svelte-t2y606"),g(l,"data-name",s=e[43].name),g(t,"class","svelte-t2y606"),me(t,"group",e[2].length>1),this.first=t},m(d,p){M(d,t,p),c&&c.m(t,null),y(t,i),y(t,l);for(let h=0;h<r.length;h+=1)r[h]&&r[h].m(l,null);y(t,a)},p(d,p){e=d,e[2].length>1?c?c.p(e,p):(c=ka(e),c.c(),c.m(t,i)):c&&(c.d(1),c=null),p[0]&4&&(u=de(e[43].fields),r=Vt(r,p,f,1,e,u,o,l,Gt,Ea,null,ha)),p[0]&4&&s!==(s=e[43].name)&&g(l,"data-name",s),p[0]&4&&me(t,"group",e[2].length>1)},d(d){d&&O(t),c&&c.d();for(let p=0;p<r.length;p+=1)r[p].d()}}}function Ed(n){let e,t,i,l,r,o,s,a,c,u=[],f=new Map,d,p,h,m,v,_,k=[],S=new Map,b,A,w=de(n[1]);const T=C=>C[49].number;for(let C=0;C<w.length;C+=1){let N=ga(n,w,C),P=T(N);f.set(P,u[C]=ya(P,N))}let I=de(n[2]);const D=C=>C[43].name;for(let C=0;C<I.length;C+=1){let N=ma(n,I,C),P=D(N);S.set(P,k[C]=Sa(P,N))}return{c(){e=E("div"),t=E("div"),i=E("div"),l=E("header"),l.textContent=`${F.translate("Layout","LayoutManager")}`,r=q(),o=E("a"),o.textContent=`${F.translate("Add Panel","Admin")}`,s=q(),a=E("div"),c=E("ul");for(let C=0;C<u.length;C+=1)u[C].c();d=q(),p=E("div"),h=E("div"),m=E("header"),m.textContent=`${F.translate("Available Fields","Admin")}`,v=q(),_=E("div");for(let C=0;C<k.length;C+=1)k[C].c();g(l,"class","svelte-t2y606"),g(o,"href","#"),g(o,"class","svelte-t2y606"),g(c,"class","panels svelte-t2y606"),g(a,"class","rows-wrapper svelte-t2y606"),g(i,"class","well svelte-t2y606"),g(t,"class","col-md-8 svelte-t2y606"),g(m,"class","svelte-t2y606"),g(_,"class","rows-wrapper svelte-t2y606"),g(h,"class","well available-fields svelte-t2y606"),g(p,"class","col-md-4 svelte-t2y606"),g(e,"id","layout"),g(e,"class","row svelte-t2y606")},m(C,N){M(C,e,N),y(e,t),y(t,i),y(i,l),y(i,r),y(i,o),y(i,s),y(i,a),y(a,c);for(let P=0;P<u.length;P+=1)u[P]&&u[P].m(c,null);y(e,d),y(e,p),y(p,h),y(h,m),y(h,v),y(h,_);for(let P=0;P<k.length;P+=1)k[P]&&k[P].m(_,null);b||(A=$(o,"click",$t(n[5])),b=!0)},p(C,N){N[0]&8130&&(w=de(C[1]),u=Vt(u,N,T,1,C,w,f,c,Gt,ya,null,ga)),N[0]&4&&(I=de(C[2]),k=Vt(k,N,D,1,C,I,S,_,Gt,Sa,null,ma))},d(C){C&&O(e);for(let N=0;N<u.length;N+=1)u[N].d();for(let N=0;N<k.length;N+=1)k[N].d();b=!1,A()}}}function Sd(n){let e,t;return e=new Mo({props:{params:n[0],validate:n[13],fetch:n[4],loadLayout:n[3],$$slots:{default:[Ed]},$$scope:{ctx:n}}}),{c(){be(e.$$.fragment)},m(i,l){he(e,i,l),t=!0},p(i,l){const r={};l[0]&1&&(r.params=i[0]),l[0]&6|l[1]&134217728&&(r.$$scope={dirty:l,ctx:i}),e.$set(r)},i(i){t||(W(e.$$.fragment,i),t=!0)},o(i){j(e.$$.fragment,i),t=!1},d(i){ge(e,i)}}}function Dd(n,e){return e.prefix?n.startsWith(e.prefix):!n.includes("__")}const Ad=n=>n.dataTransfer.dropEffect="move",Cd=()=>{},Td=()=>{};function Ld(n,e,t){let{params:i}=e,{columnCount:l=2}=e,r=["id","label","style"],o={label:{type:"varchar"},style:{type:"enum",options:["default","success","danger","primary","info","warning"],translation:"LayoutManager.options.style"}},s=[],a=[],c=[],u=-1,f=-1,d;hn();function p(X){let z;const Z=[];Z.push(new Promise(re=>{Ut.get(i.scope,i.type,i.relatedScope,i.layoutProfileId,ye=>{z=ye,re()},!1)})),i.type==="detail"&&Z.push(new Promise(re=>{Ut.get(i.scope,"sidePanelsDetail",null,i.layoutProfileId,ye=>{d=ye.layout,re()},!1)})),Promise.all(Z).then(()=>{X&&(k(z.layout),T(),gn().then(()=>{D()}),X(z))})}function h(X,z){const Z=z.split("."),re=ae.get(["entityDefs",Z[0],"links",Z[1]])??{};return re.entity===X&&re.relationName?Espo.utils.upperCaseFirst(re.relationName):""}function m(X,z){return F.translate(z,"fields",X)}function v(X,z){return ae.get(["entityDefs",X,"fields",z,"type"])??""}function _(X){return i.fieldTypes?i.fieldTypes.includes(X):!0}function k(X){const z=[];let Z="";if(i.relatedScope&&(Z=h(i.scope,i.relatedScope),Z)){const ce={name:Z,scope:Z,prefix:Z+"__"};let Ie=Object.keys(ae.get(["entityDefs",Z,"fields"])||{}).filter(Re=>_(v(Z,Re))&&b(Z,Re));Ie=Ie.filter(Re=>!(ae.get(["entityDefs",Z,"fields",Re,"relationField"])??!1)),Ie=Ie.sort((Re,Ze)=>m(Z,Re).localeCompare(m(Z,Ze))).map(Re=>ce.prefix+Re),ce.fields=Ie,z.push(ce)}let re=[];const ye=[];for(const ce in ae.get(["entityDefs",i.scope,"fields"])||{})b(i.scope,ce)&&(ye.push(F.translate(ce,"fields",i.scope)),re.push(ce));z.unshift({name:i.scope,scope:i.scope,fields:re});const He=[],Ue=[];for(const ce of z)ce.fields=ce.fields.map(Ie=>{const Re=m(ce.scope,ce.prefix?Ie.replace(ce.prefix,""):Ie);return ce.prefix||(He.includes(Re)&&Ue.push(Re),He.push(Re)),{name:Ie,label:Re}});t(1,a=X);let ct=[];X.forEach((ce,Ie)=>{ce.rows.forEach((Re,Ze)=>{Re&&Re.forEach((ot,Ht)=>{Ht==l||!ot||ct.push(ot.name)})})}),z[0].fields.forEach(ce=>{Ue.includes(ce.label)&&(ce.label+=` (${ce.name})`);const Ie=S(ce.name);Ie&&(Ie.label=ce.label)}),z[1]&&z[1].fields.forEach(ce=>{ce.label+=" (Relation)";const Ie=S(ce.name);Ie&&(Ie.label=ce.label)});for(const ce of z)ce.fields=ce.fields.filter(Ie=>!ct.find(Re=>Re===Ie.name));t(2,c=z.reverse())}function S(X){for(const z of a)for(const Z of z.rows)for(const re of Z)if(re&&re.name===X)return re;return null}function b(X,z){if(A()&&s.includes(z))return!1;const Z=["disabled",`layout${ol.upperCaseFirst(i.type)}Disabled`];i.reelType&&Z.push(`layout${ol.upperCaseFirst(i.reelType)}Disabled`);for(let re of Z)if(ae.get(["entityDefs",X,"fields",z,re]))return!1;return!0}function A(){if(ae.get(["clientDefs",i.scope,"defaultSidePanelDisabled"]))return!1;if(d){for(const X in d)if(X==="default"&&d[X].disabled)return!1}return!0}function w(){return a.map(X=>({...X,rows:X.rows.map(z=>z.cells)}))}function T(){u=-1,f=-1,t(1,a=a.map((X,z)=>(X.number=z,u=z,X.rows=X.rows.map(Z=>({number:f++,cells:Z})),X)))}function I(X){pe.create(X,{animation:150,group:"rows",draggable:"li.row",onEnd(z){const Z=parseInt(z.to.closest(".panel-layout").getAttribute("data-number")),re=parseInt(z.from.closest(".panel-layout").getAttribute("data-number"));if(re===Z)t(1,a=a.map(ye=>{if(ye.number===Z){const[He]=ye.rows.splice(z.oldIndex,1);ye.rows.splice(z.newIndex,0,He)}return ye}));else{const He=a.find(Ue=>Ue.number===re).rows[z.oldIndex];t(1,a=a.map(Ue=>(Ue.number===re&&Ue.rows.splice(z.oldIndex,1),Ue.number===Z&&Ue.rows.splice(z.newIndex,0,He),Ue)))}}})}function D(){const X=document.querySelector("ul.panels");X&&pe.create(X,{animation:150,group:"panels",draggable:"li.panel-layout",onEnd(z){const Z=Array.from(z.to.children);t(1,a=Z.map(re=>{const ye=parseInt(re.getAttribute("data-number"));return a.find(He=>He.number===ye)}))}}),document.querySelectorAll("ul.rows").forEach(z=>{I(z)}),document.querySelectorAll("ul.cells.disabled").forEach(z=>{pe.create(z,{animation:150,group:"cells",draggable:"li.cell",onEnd(Z){const re=Z.to.closest(".cells.disabled");if(re&&re!==z){Z.oldIndex>=Z.from.children.length?Z.from.appendChild(Z.item):Z.from.insertBefore(Z.item,Z.from.children[Z.oldIndex]);return}}})})}function C(){u++;const X={label:"New panel",rows:[{number:f++,cells:[!1,!1]}],number:u,name:`panel${u}`,isCustomLabel:!0};t(1,a=[...a,X]),gn().then(()=>{const z=document.querySelector(`.panel-layout[data-number="${X.number}"] > .rows`);I(z),z.scrollIntoView()})}function N(X){const z=a.find(re=>re.number===X);t(1,a=a.filter(re=>re!==z));let Z=[];z.rows.forEach(re=>{re.cells.forEach(ye=>{ye&&Z.push(ye)})}),P(Z)}function P(X){t(2,c=c.map(z=>(z.fields=[...X.filter(Z=>!!Z&&Dd(Z.name,z)),...z.fields],z)))}function V(X){t(1,a=a.map(z=>(z.number===X&&(z.rows=[...z.rows,{number:f++,cells:Array(l).fill(!1)}]),z)))}function R(X,z){t(1,a=a.map(Z=>{if(Z.number===X){const re=Z.rows.find(ye=>ye.number===z);Z.rows=Z.rows.filter(ye=>ye!=re),P(re.cells.filter(ye=>!!ye))}return Z}))}function H(X,z,Z){t(1,a=a.map(re=>(re.number===X&&(re.rows=re.rows.map((ye,He)=>{if(ye.number===z){const Ue=ye.cells[Z];Ue&&P([Ue]),ye.cells[Z]=!1}return ye})),re)))}function U(X,z,Z,re){const ye=X.dataTransfer.getData("name");let He=null;for(const ce of c)if(He=ce.fields.find(Ie=>Ie.name===ye),He)break;let Ue=null,ct=null;if(He)t(2,c=c.map(ce=>(ce.fields=ce.fields.filter(Ie=>Ie!==He),ce)));else{if(a.forEach(ce=>{ce.rows.forEach((Ie,Re)=>{Ie.cells.forEach(Ze=>{Ze&&Ze.name===ye&&(He=Ze,Ue=Ie.number,ct=ce.number)})})}),!He)return;t(1,a=a.map((ce,Ie)=>(ct===ce.number&&(ce.rows=ce.rows.map((Re,Ze)=>(Re.number===Ue&&(Re.cells=Re.cells.map((ot,Ht)=>ot&&ot.name===ye?!1:ot)),Re))),ce)))}t(1,a=a.map(ce=>(z===ce.number&&(ce.rows=ce.rows.map(Ie=>(Z===Ie.number&&(Ie.cells=Ie.cells.map((Re,Ze)=>Ze===re?(He.fullWidth&&Ie.cells.length>1&&delete He.fullWidth,He):Re)),Ie))),ce)))}function oe(X){i.onEditPanel(X,r,o,z=>{t(1,a=a.map(Z=>(Z.number===X.number&&r.forEach(re=>{X[re]=z[re]}),Z)))})}function te(X,z,Z){t(1,a=a.map(re=>(X===re.number&&(re.rows=re.rows.map(ye=>{if(z===ye.number){const He=ye.cells.filter((Ue,ct)=>ct!==Z);He.length===1&&He[0]&&(He[0].fullWidth=!0),ye.cells=He}return ye})),re)))}function Oe(X){let z=0;return X.forEach(Z=>{Z.rows.forEach(re=>{re.forEach(ye=>{ye&&z++})})}),z===0?(Be.notify("Layout cannot be empty.","error"),!1):!0}const Ve=X=>oe(X),Je=X=>N(X.number),J=(X,z)=>R(X.number,z.number),Y=(X,z,Z)=>H(X.number,z.number,Z),x=(X,z)=>{z.dataTransfer.setData("name",X.name)},ie=(X,z,Z)=>te(X.number,z.number,Z),se=(X,z,Z,re)=>U(re,X.number,z.number,Z),we=X=>V(X.number),Ee=(X,z)=>{z.dataTransfer.setData("name",X.name)};return n.$$set=X=>{"params"in X&&t(0,i=X.params),"columnCount"in X&&t(14,l=X.columnCount)},[i,a,c,p,w,C,N,V,R,H,U,oe,te,Oe,l,Ve,Je,J,Y,x,ie,se,we,Ee]}class Id extends Le{constructor(e){super(),Te(this,e,Ld,Sd,Se,{params:0,columnCount:14},null,[-1,-1])}}function Od(n){let e,t;return e=new n[1]({props:{params:n[0],viewType:n[2]}}),{c(){be(e.$$.fragment)},m(i,l){he(e,i,l),t=!0},p(i,[l]){const r={};l&1&&(r.params=i[0]),e.$set(r)},i(i){t||(W(e.$$.fragment,i),t=!0)},o(i){j(e.$$.fragment,i),t=!1},d(i){ge(e,i)}}}function Pd(n,e,t){let{params:i}=e,l,r;const o=ae.get(["clientDefs",i.scope,"additionalLayouts",i.type])||i.type;switch(o&&(i.reelType=o),n.$$set=s=>{"params"in s&&t(0,i=s.params)},o){case"list":t(1,l=nr);break;case"leftSidebar":t(1,l=nr),t(0,i.fieldTypes=["link","linkMultiple"],i);break;case"kanban":t(1,l=nr),t(0,i.dataAttributeList=["id","name","link","align","view","isLarge","cssStyle"],i),t(0,i.dataAttributesDefs={link:{type:"bool"},isLarge:{type:"bool"},width:{type:"float"},cssStyle:{type:"varchar"},align:{type:"enum",options:["left","right"]},view:{type:"varchar",readOnly:!0},name:{type:"varchar",readOnly:!0}},i);break;case"relationships":t(1,l=wd);break;case"rightSideView":case"detail":t(1,l=Id);break}return[i,l,r]}class Md extends Le{constructor(e){super(),Te(this,e,Pd,Od,Se,{params:0})}}function Da(n,e,t){const i=n.slice();return i[2]=e[t],i[4]=t,i}function Nd(n){let e,t;function i(o,s){return o[2].html?Hd:Rd}let l=i(n),r=l(n);return{c(){e=E("span"),r.c(),g(e,"class",t=gt(n[2].className)+" svelte-14ktdgy")},m(o,s){M(o,e,s),r.m(e,null)},p(o,s){l===(l=i(o))&&r?r.p(o,s):(r.d(1),r=l(o),r&&(r.c(),r.m(e,null))),s&1&&t!==(t=gt(o[2].className)+" svelte-14ktdgy")&&g(e,"class",t)},d(o){o&&O(e),r.d()}}}function Fd(n){let e,t;function i(o,s){return o[2].html?Wd:qd}let l=i(n),r=l(n);return{c(){e=E("h3"),r.c(),g(e,"class",t=gt(n[2].className)+" svelte-14ktdgy")},m(o,s){M(o,e,s),r.m(e,null)},p(o,s){l===(l=i(o))&&r?r.p(o,s):(r.d(1),r=l(o),r&&(r.c(),r.m(e,null))),s&1&&t!==(t=gt(o[2].className)+" svelte-14ktdgy")&&g(e,"class",t)},d(o){o&&O(e),r.d()}}}function Bd(n){let e;function t(r,o){return r[2].url?zd:jd}let i=t(n),l=i(n);return{c(){l.c(),e=ze()},m(r,o){l.m(r,o),M(r,e,o)},p(r,o){i===(i=t(r))&&l?l.p(r,o):(l.d(1),l=i(r),l&&(l.c(),l.m(e.parentNode,e)))},d(r){r&&O(e),l.d(r)}}}function Rd(n){let e=n[2].label+"",t;return{c(){t=ve(e)},m(i,l){M(i,t,l)},p(i,l){l&1&&e!==(e=i[2].label+"")&&Ne(t,e)},d(i){i&&O(t)}}}function Hd(n){let e,t=n[2].html+"",i;return{c(){e=new jt(!1),i=ze(),e.a=i},m(l,r){e.m(t,l,r),M(l,i,r)},p(l,r){r&1&&t!==(t=l[2].html+"")&&e.p(t)},d(l){l&&(O(i),e.d())}}}function qd(n){let e=n[2].label+"",t;return{c(){t=ve(e)},m(i,l){M(i,t,l)},p(i,l){l&1&&e!==(e=i[2].label+"")&&Ne(t,e)},d(i){i&&O(t)}}}function Wd(n){let e,t=n[2].html+"",i;return{c(){e=new jt(!1),i=ze(),e.a=i},m(l,r){e.m(t,l,r),M(l,i,r)},p(l,r){r&1&&t!==(t=l[2].html+"")&&e.p(t)},d(l){l&&(O(i),e.d())}}}function jd(n){let e,t;function i(o,s){return o[2].html?Vd:Gd}let l=i(n),r=l(n);return{c(){e=E("span"),r.c(),g(e,"class",t=gt(n[2].className)+" svelte-14ktdgy")},m(o,s){M(o,e,s),r.m(e,null)},p(o,s){l===(l=i(o))&&r?r.p(o,s):(r.d(1),r=l(o),r&&(r.c(),r.m(e,null))),s&1&&t!==(t=gt(o[2].className)+" svelte-14ktdgy")&&g(e,"class",t)},d(o){o&&O(e),r.d()}}}function zd(n){let e,t,i;function l(s,a){return s[2].html?Xd:Ud}let r=l(n),o=r(n);return{c(){e=E("a"),o.c(),g(e,"href",t=n[2].url),g(e,"class",i=gt(n[2].className)+" svelte-14ktdgy")},m(s,a){M(s,e,a),o.m(e,null)},p(s,a){r===(r=l(s))&&o?o.p(s,a):(o.d(1),o=r(s),o&&(o.c(),o.m(e,null))),a&1&&t!==(t=s[2].url)&&g(e,"href",t),a&1&&i!==(i=gt(s[2].className)+" svelte-14ktdgy")&&g(e,"class",i)},d(s){s&&O(e),o.d()}}}function Gd(n){let e=n[2].label+"",t;return{c(){t=ve(e)},m(i,l){M(i,t,l)},p(i,l){l&1&&e!==(e=i[2].label+"")&&Ne(t,e)},d(i){i&&O(t)}}}function Vd(n){let e,t=n[2].html+"",i;return{c(){e=new jt(!1),i=ze(),e.a=i},m(l,r){e.m(t,l,r),M(l,i,r)},p(l,r){r&1&&t!==(t=l[2].html+"")&&e.p(t)},d(l){l&&(O(i),e.d())}}}function Ud(n){let e=n[2].label+"",t;return{c(){t=ve(e)},m(i,l){M(i,t,l)},p(i,l){l&1&&e!==(e=i[2].label+"")&&Ne(t,e)},d(i){i&&O(t)}}}function Xd(n){let e,t=n[2].html+"",i;return{c(){e=new jt(!1),i=ze(),e.a=i},m(l,r){e.m(t,l,r),M(l,i,r)},p(l,r){r&1&&t!==(t=l[2].html+"")&&e.p(t)},d(l){l&&(O(i),e.d())}}}function Aa(n){let e,t;function i(o,s){return o[4]!==o[0].length-1?Bd:o[1]?Fd:Nd}let l=i(n),r=l(n);return{c(){e=E("li"),r.c(),t=q(),g(e,"class","breadcrumbs-item svelte-14ktdgy"),me(e,"full-width",n[4]===n[0].length-1&&n[1])},m(o,s){M(o,e,s),r.m(e,null),y(e,t)},p(o,s){l===(l=i(o))&&r?r.p(o,s):(r.d(1),r=l(o),r&&(r.c(),r.m(e,t))),s&3&&me(e,"full-width",o[4]===o[0].length-1&&o[1])},d(o){o&&O(e),r.d()}}}function Yd(n){let e,t=de(n[0]),i=[];for(let l=0;l<t.length;l+=1)i[l]=Aa(Da(n,t,l));return{c(){e=E("ul");for(let l=0;l<i.length;l+=1)i[l].c();g(e,"class","breadcrumbs-wrapper svelte-14ktdgy")},m(l,r){M(l,e,r);for(let o=0;o<i.length;o+=1)i[o]&&i[o].m(e,null)},p(l,[r]){if(r&3){t=de(l[0]);let o;for(o=0;o<t.length;o+=1){const s=Da(l,t,o);i[o]?i[o].p(s,r):(i[o]=Aa(s),i[o].c(),i[o].m(e,null))}for(;o<i.length;o+=1)i[o].d(1);i.length=t.length}},i:De,o:De,d(l){l&&O(e),et(i,l)}}}function Qd(n,e,t){let{items:i=[]}=e,{currentIsHeading:l=!0}=e;return n.$$set=r=>{"items"in r&&t(0,i=r.items),"currentIsHeading"in r&&t(1,l=r.currentIsHeading)},[i,l]}class Jd extends Le{constructor(e){super(),Te(this,e,Qd,Yd,Se,{items:0,currentIsHeading:1})}}function Ca(n){let e,t,i;return t=new Jd({props:{items:n[0],currentIsHeading:n[1]}}),{c(){e=E("nav"),be(t.$$.fragment),g(e,"class","header-breadcrumbs")},m(l,r){M(l,e,r),he(t,e,null),i=!0},p(l,r){const o={};r&1&&(o.items=l[0]),r&2&&(o.currentIsHeading=l[1]),t.$set(o)},i(l){i||(W(t.$$.fragment,l),i=!0)},o(l){j(t.$$.fragment,l),i=!1},d(l){l&&O(e),ge(t)}}}function Zd(n){let e,t,i=n[0].length>0&&Ca(n);const l=n[3].default,r=ii(l,n,n[2],null);return{c(){i&&i.c(),e=q(),r&&r.c()},m(o,s){i&&i.m(o,s),M(o,e,s),r&&r.m(o,s),t=!0},p(o,[s]){o[0].length>0?i?(i.p(o,s),s&1&&W(i,1)):(i=Ca(o),i.c(),W(i,1),i.m(e.parentNode,e)):i&&(We(),j(i,1,1,()=>{i=null}),je()),r&&r.p&&(!t||s&4)&&ri(r,l,o,o[2],t?li(l,o[2],s,null):oi(o[2]),null)},i(o){t||(W(i),W(r,o),t=!0)},o(o){j(i),j(r,o),t=!1},d(o){o&&O(e),i&&i.d(o),r&&r.d(o)}}}function Kd(n,e,t){let{$$slots:i={},$$scope:l}=e,{breadcrumbs:r=[]}=e,{currentIsHeading:o=!0}=e;return n.$$set=s=>{"breadcrumbs"in s&&t(0,r=s.breadcrumbs),"currentIsHeading"in s&&t(1,o=s.currentIsHeading),"$$scope"in s&&t(2,l=s.$$scope)},[r,o,l,i]}class al extends Le{constructor(e){super(),Te(this,e,Kd,Zd,Se,{breadcrumbs:0,currentIsHeading:1})}}function xd(n){let e,t,i,l,r,o,s,a,c,u,f,d,p,h,m,v,_,k,S,b,A,w=F.translate("response","fields","Admin")+"",T,I,D=F.translate("status","labels","Admin")+"",C,N,P,V,R,H,U,oe;return t=new al({props:{breadcrumbs:n[2]}}),{c(){e=E("div"),be(t.$$.fragment),i=q(),l=E("button"),l.textContent=`${F.translate("execute","labels","Admin")}`,r=q(),o=E("div"),s=E("div"),a=E("div"),c=E("div"),u=E("label"),u.textContent=`${F.translate("Type","fields","Admin")}`,f=q(),d=E("div"),p=q(),h=E("div"),m=E("div"),v=E("label"),v.textContent=`${F.translate("request","fields","Admin")}`,_=q(),k=E("div"),S=q(),b=E("div"),A=E("label"),T=ve(w),I=E("span"),C=ve(D),N=ve(": "),P=E("span"),V=q(),R=E("div"),Fe(l,"margin","10px 7px 0 5px"),g(l,"class","btn btn-primary action"),g(l,"data-action","execute"),g(l,"type","button"),g(e,"class","page-header"),g(u,"class","control-label"),g(u,"data-name","type"),g(d,"class","field"),g(d,"data-name","type"),g(c,"class","col-xs-12 cell form-group"),g(a,"class","row"),g(s,"class","col-sm-3"),g(o,"class","row"),g(v,"class","control-label"),g(v,"data-name","request"),g(k,"class","field"),g(k,"data-name","request"),g(m,"class","col-sm-12 col-md-6 cell form-group"),g(I,"class","pull-right status hidden"),Fe(A,"width","100%"),g(A,"class","control-label"),g(A,"data-name","response"),g(R,"class","field"),g(R,"data-name","response"),g(b,"class","col-sm-12 col-md-6 cell form-group"),g(h,"class","row")},m(te,Oe){M(te,e,Oe),he(t,e,null),y(e,i),y(e,l),M(te,r,Oe),M(te,o,Oe),y(o,s),y(s,a),y(a,c),y(c,u),y(c,f),y(c,d),M(te,p,Oe),M(te,h,Oe),y(h,m),y(m,v),y(m,_),y(m,k),y(h,S),y(h,b),y(b,A),y(A,T),y(A,I),y(I,C),y(I,N),y(I,P),y(b,V),y(b,R),H=!0,U||(oe=$(l,"click",function(){Tt(n[0](n[1]))&&n[0](n[1]).apply(this,arguments)}),U=!0)},p(te,[Oe]){n=te},i(te){H||(W(t.$$.fragment,te),H=!0)},o(te){j(t.$$.fragment,te),H=!1},d(te){te&&(O(e),O(r),O(o),O(p),O(h)),ge(t),U=!1,oe()}}}function $d(n,e,t){let{afterOnMount:i=()=>null}=e,{sendRequest:l=()=>null}=e,r=null;it(()=>{Hl.create("",function(s){t(1,r=s),i(r)})});const o=[{url:"#Admin",label:F.translate("Administration")},{url:"#",label:F.translate("apiRequest","labels","Admin"),className:"header-title"}];return n.$$set=s=>{"afterOnMount"in s&&t(3,i=s.afterOnMount),"sendRequest"in s&&t(0,l=s.sendRequest)},[l,r,o,i]}class ep extends Le{constructor(e){super(),Te(this,e,$d,xd,Se,{afterOnMount:3,sendRequest:0})}}function Ta(n,e,t){const i=n.slice();return i[12]=e[t],i}function La(n){let e,t=n[12].label+"",i,l,r,o,s,a,c;function u(){return n[10](n[12])}return{c(){e=E("button"),i=ve(t),l=q(),g(e,"data-action",r=n[12].name),e.disabled=n[1],g(e,"type","button"),g(e,"style",o=n[12].cssStyle),g(e,"class",s=`btn action btn-${n[12].style??"default"}`)},m(f,d){M(f,e,d),y(e,i),y(e,l),a||(c=$(e,"click",u),a=!0)},p(f,d){n=f,d&1&&t!==(t=n[12].label+"")&&Ne(i,t),d&1&&r!==(r=n[12].name)&&g(e,"data-action",r),d&2&&(e.disabled=n[1]),d&1&&o!==(o=n[12].cssStyle)&&g(e,"style",o),d&1&&s!==(s=`btn action btn-${n[12].style??"default"}`)&&g(e,"class",s)},d(f){f&&O(e),a=!1,c()}}}function tp(n){let e,t,i,l=de(n[0]),r=[];for(let a=0;a<l.length;a+=1)r[a]=La(Ta(n,l,a));const o=n[9].default,s=ii(o,n,n[8],null);return{c(){e=E("div");for(let a=0;a<r.length;a+=1)r[a].c();t=q(),s&&s.c(),g(e,"class","button-container"),Fe(e,"padding-top","10px")},m(a,c){M(a,e,c);for(let u=0;u<r.length;u+=1)r[u]&&r[u].m(e,null);n[11](e),M(a,t,c),s&&s.m(a,c),i=!0},p(a,[c]){if(c&11){l=de(a[0]);let u;for(u=0;u<l.length;u+=1){const f=Ta(a,l,u);r[u]?r[u].p(f,c):(r[u]=La(f),r[u].c(),r[u].m(e,null))}for(;u<r.length;u+=1)r[u].d(1);r.length=l.length}s&&s.p&&(!i||c&256)&&ri(s,o,a,a[8],i?li(o,a[8],c,null):oi(a[8]),null)},i(a){i||(W(s,a),i=!0)},o(a){j(s,a),i=!1},d(a){a&&(O(e),O(t)),et(r,a),n[11](null),s&&s.d(a)}}}function np(n,e,t){let{$$slots:i={},$$scope:l}=e,{params:r}=e,{fetch:o}=e,{validate:s=()=>!0}=e,a=!1,{buttonList:c=[{name:"save",label:F.translate("Save","labels"),style:"primary"},{name:"cancel",label:F.translate("Cancel","labels")}]}=e,u;function f(){t(1,a=!0);const m=o();s(m)&&r.onSaved(m),t(1,a=!1)}function d(m){if(m.action){m.action();return}switch(m.name){case"save":f();break}}const p=m=>d(m);function h(m){qe[m?"unshift":"push"](()=>{u=m,t(2,u)})}return n.$$set=m=>{"params"in m&&t(4,r=m.params),"fetch"in m&&t(5,o=m.fetch),"validate"in m&&t(6,s=m.validate),"buttonList"in m&&t(0,c=m.buttonList),"$$scope"in m&&t(8,l=m.$$scope)},[c,a,u,d,r,o,s,f,l,i,p,h]}class ip extends Le{constructor(e){super(),Te(this,e,np,tp,Se,{params:4,fetch:5,validate:6,buttonList:0,save:7})}get save(){return this.$$.ctx[7]}}function Ia(n,e,t){const i=n.slice();return i[22]=e[t],i}function Oa(n,e,t){const i=n.slice();return i[22]=e[t],i}function Pa(n){let e,t,i;function l(){return n[14](n[22])}return{c(){e=E("a"),e.innerHTML='<svg class="icon icon-small"><use href="client/img/icons/icons.svg#pencil-alt"></use></svg>',g(e,"href","javascript:"),g(e,"data-action","editField"),g(e,"class","edit-field svelte-7ge08f")},m(r,o){M(r,e,o),t||(i=$(e,"click",l),t=!0)},p(r,o){n=r},d(r){r&&O(e),t=!1,i()}}}function Ma(n){let e,t,i;function l(){return n[15](n[22])}return{c(){e=E("a"),e.innerHTML='<svg class="icon icon-small" style="fill: var(--link-color)"><use href="client/img/icons/icons.svg#close"></use></svg>',g(e,"href","javascript:"),g(e,"data-action","removeField"),g(e,"class","remove-field svelte-7ge08f")},m(r,o){M(r,e,o),t||(i=$(e,"click",l),t=!0)},p(r,o){n=r},d(r){r&&O(e),t=!1,i()}}}function Na(n,e){let t,i,l,r=e[22].label+"",o,s,a,c,u,f,d,p=e[22].canEdit&&Pa(e),h=e[22].canRemove&&Ma(e),m=[sl(e[22]),{class:d=(e[22].isGroup?"group":"")+" "+(e[22].groupEnd?"end":"")+" "+(e[1][e[22].name]&&!e[22].isGroup?"in-group":"")}],v={};for(let _=0;_<m.length;_+=1)v=ni(v,m[_]);return{key:n,first:null,c(){t=E("li"),i=E("div"),l=E("label"),o=ve(r),a=q(),c=E("div"),p&&p.c(),u=q(),h&&h.c(),f=q(),g(l,"title",s=e[22].label),g(l,"class","svelte-7ge08f"),g(i,"class","left svelte-7ge08f"),g(c,"class","right svelte-7ge08f"),en(t,v),me(t,"svelte-7ge08f",!0),this.first=t},m(_,k){M(_,t,k),y(t,i),y(i,l),y(l,o),y(t,a),y(t,c),p&&p.m(c,null),y(c,u),h&&h.m(c,null),y(t,f)},p(_,k){e=_,k&1&&r!==(r=e[22].label+"")&&Ne(o,r),k&1&&s!==(s=e[22].label)&&g(l,"title",s),e[22].canEdit?p?p.p(e,k):(p=Pa(e),p.c(),p.m(c,u)):p&&(p.d(1),p=null),e[22].canRemove?h?h.p(e,k):(h=Ma(e),h.c(),h.m(c,null)):h&&(h.d(1),h=null),en(t,v=zi(m,[k&1&&sl(e[22]),k&3&&d!==(d=(e[22].isGroup?"group":"")+" "+(e[22].groupEnd?"end":"")+" "+(e[1][e[22].name]&&!e[22].isGroup?"in-group":""))&&{class:d}])),me(t,"svelte-7ge08f",!0)},d(_){_&&O(t),p&&p.d(),h&&h.d()}}}function Fa(n,e){let t,i,l,r=e[22].label+"",o,s,a,c=[sl(e[22])],u={};for(let f=0;f<c.length;f+=1)u=ni(u,c[f]);return{key:n,first:null,c(){t=E("li"),i=E("div"),l=E("label"),o=ve(r),a=q(),g(l,"title",s=e[22].label),g(l,"class","svelte-7ge08f"),g(i,"class","left svelte-7ge08f"),en(t,u),me(t,"svelte-7ge08f",!0),this.first=t},m(f,d){M(f,t,d),y(t,i),y(i,l),y(l,o),y(t,a)},p(f,d){e=f,d&8&&r!==(r=e[22].label+"")&&Ne(o,r),d&8&&s!==(s=e[22].label)&&g(l,"title",s),en(t,u=zi(c,[d&8&&sl(e[22])])),me(t,"svelte-7ge08f",!0)},d(f){f&&O(t)}}}function lp(n){let e,t,i,l,r,o,s,a=[],c=new Map,u,f,d,p,h,m,v,_,k,S=[],b=new Map,A=de(n[0].sort(Ra));const w=D=>D[22].name;for(let D=0;D<A.length;D+=1){let C=Oa(n,A,D),N=w(C);c.set(N,a[D]=Na(N,C))}let T=de(n[3]);const I=D=>D[22].name;for(let D=0;D<T.length;D+=1){let C=Ia(n,T,D),N=I(C);b.set(N,S[D]=Fa(N,C))}return{c(){e=E("div"),t=E("div"),i=E("div"),l=E("header"),l.textContent=`${F.translate("Selected","labels","Admin")}`,r=q(),o=E("div"),s=E("ul");for(let D=0;D<a.length;D+=1)a[D].c();u=q(),f=E("div"),d=q(),p=E("div"),h=E("div"),m=E("header"),m.textContent=`${F.translate("Available","labels","Admin")}`,v=q(),_=E("div"),k=E("ul");for(let D=0;D<S.length;D+=1)S[D].c();g(l,"class","svelte-7ge08f"),g(s,"class","enabled connected svelte-7ge08f"),g(o,"class","rows-wrapper svelte-7ge08f"),g(i,"class","well svelte-7ge08f"),g(t,"class","col-sm-5 svelte-7ge08f"),g(f,"class","col-sm-2 svelte-7ge08f"),g(m,"class","svelte-7ge08f"),g(k,"class","disabled connected svelte-7ge08f"),g(_,"class","rows-wrapper svelte-7ge08f"),g(h,"class","well svelte-7ge08f"),g(p,"class","col-sm-5 svelte-7ge08f"),g(e,"id","layout"),g(e,"class","row svelte-7ge08f")},m(D,C){M(D,e,C),y(e,t),y(t,i),y(i,l),y(i,r),y(i,o),y(o,s);for(let N=0;N<a.length;N+=1)a[N]&&a[N].m(s,null);y(e,u),y(e,f),y(e,d),y(e,p),y(p,h),y(h,m),y(h,v),y(h,_),y(_,k);for(let N=0;N<S.length;N+=1)S[N]&&S[N].m(k,null);n[16](e)},p(D,C){C&2115&&(A=de(D[0].sort(Ra)),a=Vt(a,C,w,1,D,A,c,s,Gt,Na,null,Oa)),C&8&&(T=de(D[3]),S=Vt(S,C,I,1,D,T,b,k,Gt,Fa,null,Ia))},d(D){D&&O(e);for(let C=0;C<a.length;C+=1)a[C].d();for(let C=0;C<S.length;C+=1)S[C].d();n[16](null)}}}function rp(n){let e,t,i={params:n[2],validate:n[8],fetch:n[7],loadData:n[5],buttonList:n[4],$$slots:{default:[lp]},$$scope:{ctx:n}};return e=new ip({props:i}),n[17](e),{c(){be(e.$$.fragment)},m(l,r){he(e,l,r),t=!0},p(l,[r]){const o={};r&4&&(o.params=l[2]),r&256&&(o.validate=l[8]),r&128&&(o.fetch=l[7]),r&32&&(o.loadData=l[5]),r&16&&(o.buttonList=l[4]),r&134218315&&(o.$$scope={dirty:r,ctx:l}),e.$set(o)},i(l){t||(W(e.$$.fragment,l),t=!0)},o(l){j(e.$$.fragment,l),t=!1},d(l){n[17](null),ge(e,l)}}}function op(n){return n.toLowerCase()}function Ba(n,e){return n[e]}function sl(n){let e={};return["name","id"].forEach(t=>{Ba(n,t)!=null&&(e[`data-${op(t)}`]=Ba(n,t))}),e}const Ra=(n,e)=>n.sortOrder-e.sortOrder;function ap(n,e,t){let i,l,r,{params:o}=e,{enabledItems:s=[]}=e,{disabledItems:a=[]}=e,{buttonList:c}=e,{loadData:u}=e,{refresh:f=()=>{}}=e,{editItem:d}=e,{getGroupId:p=()=>"id"}=e,{fieldsInGroup:h}=e,m;function v(D){let C=!1,N={};D.forEach(P=>{if(P.isGroup){C=P.name!=="";return}C&&(N[P.name]=!0)}),t(1,h=N)}it(()=>{_()}),mn(()=>{l&&l.destroy(),r&&r.destroy()});function _(){const D={group:"fields",draggable:"li",animation:150};l=pe.create(i.querySelector("ul.enabled"),{...D,onEnd(C){if(C.to.closest(".connected").classList.contains("enabled")){const[N]=s.splice(C.oldIndex,1);s.splice(C.newIndex,0,N);for(let P=C.newIndex;P<s.length;P++)t(0,s[P].sortOrder=(P>0?s[P-1].sortOrder:0)+P,s);v(s),f()}else{const N=s[C.oldIndex];if(N.canDisabled===!1){f();return}s.splice(C.oldIndex,1),a.splice(C.newIndex,0,N),f()}}}),r=pe.create(i.querySelector("ul.disabled"),{...D,onEnd(C){if(C.to.closest(".connected").classList.contains("disabled")){const[N]=a.splice(C.oldIndex,1);a.splice(C.newIndex,0,N)}else{const N=a[C.oldIndex];a.splice(C.oldIndex,1),s.splice(C.newIndex,0,N);for(let P=C.newIndex;P<s.length;P++)t(0,s[P].sortOrder=(P>0?s[P-1].sortOrder:0)+P,s);v(s),f()}}})}let{fetch:k=()=>{let D=[],C=!1,N=!1;for(let H=0;H<s.length;H++){const U=s[H];if(U.isGroup){C=!U.groupEnd,D.push({id:U.id,name:U.name,color:U.color,iconClass:U.iconClass,items:[]});continue}C?D[D.length-1].items.push(U.name):D.push(U.name)}let P=!1,V=D.filter(H=>{if(typeof H=="object"){if(H.name!==""&&!H.items.length)return!1;if(H.name!==""&&H.items.length)return P=!0,!0;if(H.name===""&&P)return P=!1,!0;if(H.name===""&&!P)return!1}return!0});N=V.length!==D.length,D=V;let R=[];for(let H=0;H<D.length;H++){let U=D[H];R.push(U),typeof U=="object"&&U.name!==""&&(H===D.length-1||!(typeof D[H+1]=="object"&&D[H+1].name===""))&&(N=!0,R.push({id:p(),name:"",items:[]}))}return{adjusted:N,navigation:R}}}=e;function S(D){s.splice(s.findIndex(C=>C.id===D.id),1),f()}let{validate:b=D=>D.length===0?(Be.notify("Menu cannot be empty","error"),!1):!0}=e;const A=D=>d(D),w=D=>S(D);function T(D){qe[D?"unshift":"push"](()=>{i=D,t(9,i)})}function I(D){qe[D?"unshift":"push"](()=>{m=D,t(10,m)})}return n.$$set=D=>{"params"in D&&t(2,o=D.params),"enabledItems"in D&&t(0,s=D.enabledItems),"disabledItems"in D&&t(3,a=D.disabledItems),"buttonList"in D&&t(4,c=D.buttonList),"loadData"in D&&t(5,u=D.loadData),"refresh"in D&&t(12,f=D.refresh),"editItem"in D&&t(6,d=D.editItem),"getGroupId"in D&&t(13,p=D.getGroupId),"fieldsInGroup"in D&&t(1,h=D.fieldsInGroup),"fetch"in D&&t(7,k=D.fetch),"validate"in D&&t(8,b=D.validate)},n.$$.update=()=>{n.$$.dirty&1&&v(s)},[s,h,o,a,c,u,d,k,b,i,m,S,f,p,A,w,T,I]}class Ha extends Le{constructor(e){super(),Te(this,e,ap,rp,Se,{params:2,enabledItems:0,disabledItems:3,buttonList:4,loadData:5,refresh:12,editItem:6,getGroupId:13,fieldsInGroup:1,fetch:7,validate:8})}}function qa(n){let e,t,i={params:n[0],enabledItems:n[2],disabledItems:n[4],buttonList:n[6],fieldsInGroup:n[5],refresh:n[7],editItem:n[8],getGroupId:yi};return e=new Ha({props:i}),n[9](e),{c(){be(e.$$.fragment)},m(l,r){he(e,l,r),t=!0},p(l,r){const o={};r&1&&(o.params=l[0]),r&4&&(o.enabledItems=l[2]),e.$set(o)},i(l){t||(W(e.$$.fragment,l),t=!0)},o(l){j(e.$$.fragment,l),t=!1},d(l){n[9](null),ge(e,l)}}}function sp(n){let e,t=n[3],i,l=qa(n);return{c(){e=E("div"),l.c()},m(r,o){M(r,e,o),l.m(e,null),i=!0},p(r,[o]){o&8&&Se(t,t=r[3])?(We(),j(l,1,1,De),je(),l=qa(r),l.c(),W(l,1),l.m(e,null)):l.p(r,o)},i(r){i||(W(l),i=!0)},o(r){j(l),i=!1},d(r){r&&O(e),l.d(r)}}}let up="_delimiter_";function yi(){return up+cp()}function cp(){return Math.floor((1+Math.random())*4294967296).toString(16).substring(1)}function fp(n,e,t){let{params:i}=e,l,r=[],o=[],s=0,a={},c=[{name:"save",label:F.translate("Save","labels"),style:"primary"},{name:"cancel",label:F.translate("Cancel","labels")},{name:"addGroup",label:F.translate("addGroup","labels"),cssStyle:"margin-left: 30px",action:()=>{i.onEditItem({id:yi(),groupEnd:!1},h=>{let m=10;r.length&&(m=r[r.length-1].sortOrder+10);let v={isGroup:!0,canEdit:!0,canRemove:!0,isGroup:!0,canDisabled:!1,name:"",label:"",sortOrder:m,...h};r.push(v),v.name!==""&&r.push({id:yi(),isGroup:!0,canEdit:!0,canRemove:!0,isGroup:!0,canDisabled:!1,groupEnd:!0,name:"",label:"",sortOrder:v.sortOrder+1}),u()})}}];function u(){t(3,s++,s)}function f(h){i.onEditItem(h,m=>{let v=r.findIndex(_=>_.id===m.id);t(2,r[v]=m,r),u()})}d();function d(){let h=i.list??[],m=0;for(let v=0;v<h.length;v++){let _=h[v];if(typeof _=="string")ae.get(["scopes",_,"tab"])&&r.push({name:_,label:F.translate(_,"scopeNamesPlural"),sortOrder:m}),m++;else if(typeof _=="object"){r.push({id:_.id??yi(),canEdit:!0,canRemove:!0,isGroup:!0,canDisabled:!1,groupEnd:_.name==="",name:_.name,label:_.name,iconClass:_.iconClass||null,sortOrder:m}),m++;for(const k of _.items)ae.get(["scopes",k,"tab"])&&(r.push({name:k,label:F.translate(k,"scopeNamesPlural"),sortOrder:m}),m++);if(v<h.length-1&&h[v+1].name==="")continue;_.name!==""&&(v===h.length-1||typeof h[v+v]=="string"||_.items.length===0)&&(r.push({id:yi(),canEdit:!0,canRemove:!0,canDisabled:!1,isGroup:!0,groupEnd:!0,name:"",label:"",iconClass:_.iconClass||null,sortOrder:m}),m++)}}Object.entries(ae.get(["scopes"])).forEach(([v,_])=>{_.disabled||_.emHidden||!_.tab||r.find(k=>k.name===v)||o.push({name:v,label:F.translate(v,"scopeNamesPlural")})}),o.sort((v,_)=>v.label.localeCompare(_.label))}function p(h){qe[h?"unshift":"push"](()=>{l=h,t(1,l)})}return n.$$set=h=>{"params"in h&&t(0,i=h.params)},[i,l,r,s,o,a,c,u,f,p]}class dp extends Le{constructor(e){super(),Te(this,e,fp,sp,Se,{params:0})}}function Wa(n){let e,t,i={params:n[0],enabledItems:n[3],disabledItems:n[4],buttonList:n[6],fieldsInGroup:n[5],refresh:n[7],validate:mp};return e=new Ha({props:i}),n[8](e),{c(){be(e.$$.fragment)},m(l,r){he(e,l,r),t=!0},p(l,r){const o={};r&1&&(o.params=l[0]),e.$set(o)},i(l){t||(W(e.$$.fragment,l),t=!0)},o(l){j(e.$$.fragment,l),t=!1},d(l){n[8](null),ge(e,l)}}}function pp(n){let e,t=n[2],i,l=Wa(n);return{c(){e=E("div"),l.c()},m(r,o){M(r,e,o),l.m(e,null),i=!0},p(r,[o]){o&4&&Se(t,t=r[2])?(We(),j(l,1,1,De),je(),l=Wa(r),l.c(),W(l,1),l.m(e,null)):l.p(r,o)},i(r){i||(W(l),i=!0)},o(r){j(l),i=!1},d(r){r&&O(e),l.d(r)}}}function mp(n){return!0}function hp(n,e,t){let{params:i}=e,l,r=[],o=[],s=0,a={},c=[{name:"save",label:F.translate("Save","labels"),style:"primary"},{name:"cancel",label:F.translate("Cancel","labels")}];function u(){t(2,s++,s)}f();function f(){let p=i.list??[],h=0;for(let m=0;m<p.length;m++){let v=p[m];typeof v=="string"&&(ae.get(["scopes",v,"tab"])&&r.push({name:v,label:F.translate(v,"scopeNamesPlural"),sortOrder:h}),h++)}Object.entries(ae.get(["scopes"])).forEach(([m,v])=>{v.disabled||v.emHidden||!v.tab||r.find(_=>_.name===m)||o.push({name:m,label:F.translate(m,"scopeNamesPlural")})}),o.sort((m,v)=>m.label.localeCompare(v.label))}function d(p){qe[p?"unshift":"push"](()=>{l=p,t(1,l)})}return n.$$set=p=>{"params"in p&&t(0,i=p.params)},[i,l,s,r,o,a,c,u,d]}class gp extends Le{constructor(e){super(),Te(this,e,hp,pp,Se,{params:0})}}function ja(n,{delay:e=0,duration:t=400,easing:i=lo}={}){const l=+getComputedStyle(n).opacity;return{delay:e,duration:t,easing:i,css:r=>`opacity: ${r*l}`}}function vp(n){let e,t;return{c(){e=E("img"),g(e,"class","preloader svelte-tpjtng"),Bi(e.src,t="client/img/atro-loader.svg")||g(e,"src",t),g(e,"alt","Loading"),Fe(e,"height",`${n[0]}px`)},m(i,l){M(i,e,l)},p(i,[l]){l&1&&Fe(e,"height",`${i[0]}px`)},i:De,o:De,d(i){i&&O(e)}}}function bp(n,e,t){let{heightPx:i=12}=e;return n.$$set=l=>{"heightPx"in l&&t(0,i=l.heightPx)},[i]}class ul extends Le{constructor(e){super(),Te(this,e,bp,vp,Se,{heightPx:0})}}const cl='<svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960" width="24px" fill="#000"><path d="M560-240 320-480l240-240 56 56-184 184 184 184-56 56Z"/></svg>',fl='<svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960" width="24px" fill="#5f6368"><path d="M504-480 320-664l56-56 240 240-240 240-56-56 184-184Z"/></svg>',za='<svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960" width="24px" fill="#000"><path d="m640-480 80 80v80H520v240l-40 40-40-40v-240H240v-80l80-80v-280h-40v-80h400v80h-40v280Zm-286 80h252l-46-46v-314H400v314l-46 46Zm126 0Z"/></svg>',Ga='<svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960" width="24px" fill="#000"><path d="M680-840v80h-40v327l-80-80v-247H400v87l-87-87-33-33v-47h400ZM480-40l-40-40v-240H240v-80l80-80v-46L56-792l56-56 736 736-58 56-264-264h-6v240l-40 40ZM354-400h92l-44-44-2-2-46 46Zm126-193Zm-78 149Z"/></svg>';function Va(n){let e,t=(n[1]?Ga:za)+"",i,l,r;return{c(){e=E("button"),g(e,"class","pin-button svelte-cui6f3"),g(e,"type","button"),g(e,"title",i=F.translate(n[1]?"sidebarUnpin":"sidebarPin"))},m(o,s){M(o,e,s),e.innerHTML=t,l||(r=$(e,"click",n[6]),l=!0)},p(o,s){s&2&&t!==(t=(o[1]?Ga:za)+"")&&(e.innerHTML=t),s&2&&i!==(i=F.translate(o[1]?"sidebarUnpin":"sidebarPin"))&&g(e,"title",i)},d(o){o&&O(e),l=!1,r()}}}function Ua(n){let e,t,i=F.translate(n[0]?"sidebarExpand":"sidebarCollapse")+"",l,r;return{c(){e=E("span"),t=ve(" "),l=ve(i),r=ve(" "),g(e,"class","collapse-text svelte-cui6f3")},m(o,s){M(o,e,s),y(e,t),y(e,l),y(e,r)},p(o,s){s&1&&i!==(i=F.translate(o[0]?"sidebarExpand":"sidebarCollapse")+"")&&Ne(l,i)},d(o){o&&O(e)}}}function _p(n){let e,t=(n[0]?cl:fl)+"",i;return{c(){e=new jt(!1),i=ze(),e.a=i},m(l,r){e.m(t,l,r),M(l,i,r)},p(l,r){r&1&&t!==(t=(l[0]?cl:fl)+"")&&e.p(t)},d(l){l&&(O(i),e.d())}}}function wp(n){let e,t=(n[0]?fl:cl)+"",i;return{c(){e=new jt(!1),i=ze(),e.a=i},m(l,r){e.m(t,l,r),M(l,i,r)},p(l,r){r&1&&t!==(t=(l[0]?fl:cl)+"")&&e.p(t)},d(l){l&&(O(i),e.d())}}}function Xa(n){let e,t,i;return{c(){e=E("div"),g(e,"class","sidebar-resizer svelte-cui6f3")},m(l,r){M(l,e,r),t||(i=$(e,"mousedown",n[8]),t=!0)},p:De,d(l){l&&O(e),t=!1,i()}}}function yp(n){let e,t,i,l,r,o,s,a,c,u,f,d,p;const h=n[16].default,m=ii(h,n,n[15],null);let v=!n[5]&&Va(n),_=n[1]&&!n[5]&&Ua(n);function k(w,T){return w[2]==="left"?wp:_p}let S=k(n),b=S(n),A=!n[0]&&Xa(n);return{c(){e=E("aside"),t=E("div"),m&&m.c(),i=q(),l=E("div"),v&&v.c(),r=q(),_&&_.c(),o=q(),s=E("button"),b.c(),a=q(),A&&A.c(),g(t,"class","sidebar-inner svelte-cui6f3"),g(s,"class","collapse-button svelte-cui6f3"),g(s,"type","button"),g(l,"class","collapse-strip svelte-cui6f3"),g(e,"class",c=gt(n[3])+" svelte-cui6f3"),me(e,"collapsed",n[0]),me(e,"pinned",n[1]&&!n[5]),Fe(e,"width",n[4])},m(w,T){M(w,e,T),y(e,t),m&&m.m(t,null),y(e,i),y(e,l),v&&v.m(l,null),y(l,r),_&&_.m(l,null),y(l,o),y(l,s),b.m(s,null),y(e,a),A&&A.m(e,null),f=!0,d||(p=[$(s,"click",n[7]),$(l,"click",af(n[7])),$(e,"mouseenter",n[10]),$(e,"mouseleave",n[9])],d=!0)},p(w,[T]){m&&m.p&&(!f||T&32768)&&ri(m,h,w,w[15],f?li(h,w[15],T,null):oi(w[15]),null),w[5]?v&&(v.d(1),v=null):v?v.p(w,T):(v=Va(w),v.c(),v.m(l,r)),w[1]&&!w[5]?_?_.p(w,T):(_=Ua(w),_.c(),_.m(l,o)):_&&(_.d(1),_=null),S===(S=k(w))&&b?b.p(w,T):(b.d(1),b=S(w),b&&(b.c(),b.m(s,null))),w[0]?A&&(A.d(1),A=null):A?A.p(w,T):(A=Xa(w),A.c(),A.m(e,null)),(!f||T&8&&c!==(c=gt(w[3])+" svelte-cui6f3"))&&g(e,"class",c),(!f||T&9)&&me(e,"collapsed",w[0]),(!f||T&42)&&me(e,"pinned",w[1]&&!w[5]),T&16&&Fe(e,"width",w[4])},i(w){f||(W(m,w),w&&Ln(()=>{f&&(u||(u=bo(e,ja,{},!0)),u.run(1))}),f=!0)},o(w){j(m,w),w&&(u||(u=bo(e,ja,{},!1)),u.run(0)),f=!1},d(w){w&&O(e),m&&m.d(w),v&&v.d(),_&&_.d(),b.d(),A&&A.d(),w&&u&&u.end(),d=!1,nt(p)}}}function kp(n,e,t){let{$$slots:i={},$$scope:l}=e,{className:r=""}=e,{isCollapsed:o=!1}=e,{isPinned:s=!0}=e,{minWidth:a=250}=e,{maxWidth:c=600}=e,{width:u=a}=e,{position:f}=e;const d=hn();let p=!1,h=!1,m,v,_,k,S,b,A=!1;const w=()=>{t(5,A=window.innerWidth<=768)};function T(H){t(1,s=!s),d("sidebar-pin",{isPinned:s})}function I(H){t(0,o=H),d("sidebar-collapse",{isCollapsed:o})}function D(){I(!o)}function C(H){p=!0,m=H.pageX,v=u,document.addEventListener("mousemove",P),document.addEventListener("mouseup",N,{once:!0}),document.body.style.userSelect="none"}function N(){p&&(p=!1,d("sidebar-resize",{width:u}),document.removeEventListener("mousemove",P),document.body.style.userSelect="")}function P(H){if(!p)return;H.preventDefault();const U=f=="left"?H.pageX-m:m-H.pageX,oe=v+U;oe>=a&&oe<=c&&requestAnimationFrame(()=>{t(11,u=oe),d("sidebar-resize",{width:u})})}function V(){s||(h=!1,k!==null&&clearTimeout(k),k=null,_=setTimeout(()=>{h||I(!0)},500))}function R(){s||(h=!0,_!==null&&clearTimeout(_),_=null,o&&(k=setTimeout(()=>{h&&I(!1)},500)))}return it(()=>{w(),window.addEventListener("resize",w)}),mn(()=>{p&&N(),_!==null&&clearTimeout(_),k!==null&&clearTimeout(k),window.removeEventListener("resize",w)}),n.$$set=H=>{"className"in H&&t(12,r=H.className),"isCollapsed"in H&&t(0,o=H.isCollapsed),"isPinned"in H&&t(1,s=H.isPinned),"minWidth"in H&&t(13,a=H.minWidth),"maxWidth"in H&&t(14,c=H.maxWidth),"width"in H&&t(11,u=H.width),"position"in H&&t(2,f=H.position),"$$scope"in H&&t(15,l=H.$$scope)},n.$$.update=()=>{n.$$.dirty&4108&&(t(3,S="sidebar"),f==="left"?t(3,S+=" sidebar-left"):t(3,S+=" sidebar-right"),r&&t(3,S+=` ${r}`)),n.$$.dirty&2049&&t(4,b=o?"auto":`${u}px`)},[o,s,f,S,b,A,T,D,C,V,R,u,r,a,c,l,i]}class Ya extends Le{constructor(e){super(),Te(this,e,kp,yp,Se,{className:12,isCollapsed:0,isPinned:1,minWidth:13,maxWidth:14,width:11,position:2})}}function Qa(n,e,t){const i=n.slice();return i[67]=e[t],i}function Ja(n,e,t){const i=n.slice();return i[70]=e[t],i}function Ep(n){let e,t,i,l,r,o,s=de(n[9]),a=[];for(let u=0;u<s.length;u+=1)a[u]=Ka(Ja(n,s,u));let c=n[4]&&xa(n);return{c(){e=E("div"),t=E("div");for(let u=0;u<a.length;u+=1)a[u].c();i=q(),l=E("span"),r=q(),c&&c.c(),o=ze(),g(l,"class","btn layout-editor-container svelte-smsth7"),g(t,"class","btn-group"),g(e,"class","panel-group"),Fe(e,"margin-bottom","10px")},m(u,f){M(u,e,f),y(e,t);for(let d=0;d<a.length;d+=1)a[d]&&a[d].m(t,null);y(t,i),y(t,l),n[40](l),M(u,r,f),c&&c.m(u,f),M(u,o,f)},p(u,f){if(f[0]&16912){s=de(u[9]);let d;for(d=0;d<s.length;d+=1){const p=Ja(u,s,d);a[d]?a[d].p(p,f):(a[d]=Ka(p),a[d].c(),a[d].m(t,i))}for(;d<a.length;d+=1)a[d].d(1);a.length=s.length}u[4]?c?c.p(u,f):(c=xa(u),c.c(),c.m(o.parentNode,o)):c&&(c.d(1),c=null)},i:De,o:De,d(u){u&&(O(e),O(r),O(o)),et(a,u),n[40](null),c&&c.d(u)}}}function Sp(n){let e,t,i;return t=new ul({props:{heightPx:12}}),{c(){e=E("div"),be(t.$$.fragment),g(e,"class","text-center")},m(l,r){M(l,e,r),he(t,e,null),i=!0},p:De,i(l){i||(W(t.$$.fragment,l),i=!0)},o(l){j(t.$$.fragment,l),i=!1},d(l){l&&O(e),ge(t)}}}function Za(n){let e,t=n[70].label+"",i,l,r;function o(){return n[39](n[70])}return{c(){e=E("a"),i=ve(t),g(e,"href","javascript:"),g(e,"class","btn btn-link tree-item svelte-smsth7"),me(e,"active",n[70].name===n[4].name)},m(s,a){M(s,e,a),y(e,i),l||(r=$(e,"click",o),l=!0)},p(s,a){n=s,a[0]&512&&t!==(t=n[70].label+"")&&Ne(i,t),a[0]&528&&me(e,"active",n[70].name===n[4].name)},d(s){s&&O(e),l=!1,r()}}}function Ka(n){let e,t=n[70].name!==n[4].name&&Za(n);return{c(){t&&t.c(),e=ze()},m(i,l){t&&t.m(i,l),M(i,e,l)},p(i,l){i[70].name!==i[4].name?t?t.p(i,l):(t=Za(i),t.c(),t.m(e.parentNode,e)):t&&(t.d(1),t=null)},d(i){i&&O(e),t&&t.d(i)}}}function xa(n){let e,t,i=n[4].label+"",l,r,o,s,a,c,u,f,d,p,h,m,v,_,k=n[10]&&$a(n),S=n[4].name!=="_admin"&&es(n);return{c(){e=E("div"),t=E("h5"),l=ve(i),r=q(),o=E("div"),s=E("div"),a=E("input"),c=q(),u=E("div"),k&&k.c(),f=q(),d=E("button"),d.innerHTML='<svg class="icon"><use href="client/img/icons/icons.svg#search"></use></svg>',p=q(),S&&S.c(),h=q(),m=E("div"),m.innerHTML="",g(e,"class","sidebar-header"),g(a,"type","text"),g(a,"tabindex","1"),g(a,"class","form-control category-search svelte-smsth7"),g(a,"placeholder",F.translate("typeToSearch")),me(a,"search-enabled",!!n[10]),g(d,"class","search-in-tree-button svelte-smsth7"),g(u,"class","button-container svelte-smsth7"),g(s,"class","field svelte-smsth7"),g(s,"data-name","category-search"),g(o,"class","panel-group category-search"),Fe(o,"margin-bottom","20px"),g(m,"class","panel-group category-tree")},m(b,A){M(b,e,A),y(e,t),y(t,l),M(b,r,A),M(b,o,A),y(o,s),y(s,a),n[41](a),y(s,c),y(s,u),k&&k.m(u,null),y(u,f),y(u,d),y(o,p),S&&S.m(o,null),M(b,h,A),M(b,m,A),n[44](m),v||(_=[$(a,"keydown",n[42]),$(d,"click",n[16])],v=!0)},p(b,A){A[0]&16&&i!==(i=b[4].label+"")&&Ne(l,i),A[0]&1024&&me(a,"search-enabled",!!b[10]),b[10]?k?k.p(b,A):(k=$a(b),k.c(),k.m(u,f)):k&&(k.d(1),k=null),b[4].name!=="_admin"?S?S.p(b,A):(S=es(b),S.c(),S.m(o,null)):S&&(S.d(1),S=null)},d(b){b&&(O(e),O(r),O(o),O(h),O(m)),n[41](null),k&&k.d(),S&&S.d(),n[44](null),v=!1,nt(_)}}}function $a(n){let e,t,i;return{c(){e=E("button"),g(e,"class","fas fa-times reset-search-in-tree-button svelte-smsth7")},m(l,r){M(l,e,r),t||(i=$(e,"click",n[15]),t=!0)},p:De,d(l){l&&O(e),t=!1,i()}}}function es(n){let e,t,i,l,r,o,s,a,c,u,f=de(n[13]),d=[];for(let p=0;p<f.length;p+=1)d[p]=ts(Qa(n,f,p));return{c(){e=E("div"),t=E("div"),i=E("button"),l=E("i"),s=q(),a=E("select");for(let p=0;p<d.length;p+=1)d[p].c();g(l,"class",r=gt("fas "+(n[11]?"fa-sort-amount-up":"fa-sort-amount-down"))+" svelte-smsth7"),g(i,"type","button"),g(i,"class","btn btn-default sort-btn svelte-smsth7"),g(i,"data-tippy","true"),g(i,"title",o=F.translateOption(n[11]?"asc":"desc","sortDirection","Entity")),g(a,"class","form-control svelte-smsth7"),Fe(a,"max-width","300px"),Fe(a,"flex","1"),n[12]===void 0&&Ln(()=>n[43].call(a)),g(t,"class","btn-group"),Fe(t,"display","flex"),Fe(t,"align-items","stretch"),Fe(e,"margin-top","20px"),Fe(e,"display","flex"),Fe(e,"justify-content","space-between"),Fe(e,"flex-wrap","wrap")},m(p,h){M(p,e,h),y(e,t),y(t,i),y(i,l),y(t,s),y(t,a);for(let m=0;m<d.length;m+=1)d[m]&&d[m].m(a,null);fo(a,n[12],!0),c||(u=[$(i,"click",n[18]),$(a,"change",n[43]),$(a,"change",n[17])],c=!0)},p(p,h){if(h[0]&2048&&r!==(r=gt("fas "+(p[11]?"fa-sort-amount-up":"fa-sort-amount-down"))+" svelte-smsth7")&&g(l,"class",r),h[0]&2048&&o!==(o=F.translateOption(p[11]?"asc":"desc","sortDirection","Entity"))&&g(i,"title",o),h[0]&8192){f=de(p[13]);let m;for(m=0;m<f.length;m+=1){const v=Qa(p,f,m);d[m]?d[m].p(v,h):(d[m]=ts(v),d[m].c(),d[m].m(a,null))}for(;m<d.length;m+=1)d[m].d(1);d.length=f.length}h[0]&12288&&fo(a,p[12])},d(p){p&&O(e),et(d,p),c=!1,nt(u)}}}function ts(n){let e,t=n[67].label+"",i,l,r;return{c(){e=E("option"),i=ve(t),l=q(),e.__value=r=n[67].name,Ri(e,e.__value)},m(o,s){M(o,e,s),y(e,i),y(e,l)},p(o,s){s[0]&8192&&t!==(t=o[67].label+"")&&Ne(i,t),s[0]&8192&&r!==(r=o[67].name)&&(e.__value=r,Ri(e,e.__value))},d(o){o&&O(e)}}}function Dp(n){let e,t,i,l;const r=[Sp,Ep],o=[];function s(a,c){return a[9].length>0?1:-1}return~(t=s(n))&&(i=o[t]=r[t](n)),{c(){e=E("div"),i&&i.c(),g(e,"class","category-panel"),me(e,"hidden",n[1])},m(a,c){M(a,e,c),~t&&o[t].m(e,null),l=!0},p(a,c){let u=t;t=s(a),t===u?~t&&o[t].p(a,c):(i&&(We(),j(o[u],1,1,()=>{o[u]=null}),je()),~t?(i=o[t],i?i.p(a,c):(i=o[t]=r[t](a),i.c()),W(i,1),i.m(e,null)):i=null),(!l||c[0]&2)&&me(e,"hidden",a[1])},i(a){l||(W(i),l=!0)},o(a){j(i),l=!1},d(a){a&&O(e),~t&&o[t].d()}}}function Ap(n){let e,t,i,l,r;function o(u){n[45](u)}function s(u){n[46](u)}function a(u){n[47](u)}let c={className:"catalog-tree-panel",position:"left",minWidth:n[2],maxWidth:n[3],$$slots:{default:[Dp]},$$scope:{ctx:n}};return n[0]!==void 0&&(c.width=n[0]),n[1]!==void 0&&(c.isCollapsed=n[1]),n[5]!==void 0&&(c.isPinned=n[5]),e=new Ya({props:c}),qe.push(()=>Pn(e,"width",o)),qe.push(()=>Pn(e,"isCollapsed",s)),qe.push(()=>Pn(e,"isPinned",a)),e.$on("sidebar-resize",n[19]),e.$on("sidebar-collapse",n[20]),e.$on("sidebar-pin",n[21]),{c(){be(e.$$.fragment)},m(u,f){he(e,u,f),r=!0},p(u,f){const d={};f[0]&4&&(d.minWidth=u[2]),f[0]&8&&(d.maxWidth=u[3]),f[0]&16338|f[2]&2048&&(d.$$scope={dirty:f,ctx:u}),!t&&f[0]&1&&(t=!0,d.width=u[0],In(()=>t=!1)),!i&&f[0]&2&&(i=!0,d.isCollapsed=u[1],In(()=>i=!1)),!l&&f[0]&32&&(l=!0,d.isPinned=u[5],In(()=>l=!1)),e.$set(d)},i(u){r||(W(e.$$.fragment,u),r=!0)},o(u){j(e.$$.fragment,u),r=!1},d(u){ge(e,u)}}}function ki(){return window.location.hash.split("/").shift().replace("#","")}function dl(n){n&&n.length&&n.find(".reset-button").remove()}function Cp(n){let e=[];return(n||"").split("|").forEach(t=>{t&&e.push(t)}),e}function Tp(n,e,t){((t||n.tree("getTree")).children||[]).findIndex(r=>e.id===r.id)===-1&&n.tree("appendNode",e,t)}function Lp(n,e,t){((t||n.tree("getTree")).children||[]).findIndex(r=>e.id===r.id)===-1&&n.tree("prependNode",e,t)}function ir(n,e,t){if(!Array.isArray(e)||e.length===0){t();return}const i=e[0];let l=n.find(`.jqtree-title[data-id="${i}"]`);l.length>0&&l.each((r,o)=>{if(o=window.$(o),o.parent().parent().hasClass("jqtree-closed")){let a=n.tree("getNodeByHtmlElement",o);n.tree("openNode",a,!1,()=>ir(n,e.slice(1),t))}else ir(n,e.slice(1),t)})}function Ip(n,e,t){let i,{scope:l}=e,{model:r}=e,{collection:o}=e,{callbacks:s}=e,{minWidth:a=300}=e,{maxWidth:c=600}=e,{currentWidth:u=a}=e,{isCollapsed:f=!1}=e,{mode:d}=e,{maxSize:p=Eo.get("recordsPerPageSmall")||20}=e,{renderLayoutEditor:h}=e,{isAdminPage:m=!1}=e,v=!0,_,k,S,b=[],A,w="",T,I,D,C=!0,N=null,P=[];function V(B){o&&B.name===l&&Ce.set("treeWhereData",l,B.where),f||R()}function R(){H(),oe()}function H(){let B=window.$(_);B&&B.tree("destroy")}function U(){let B=Ce.get("treeWhereData",l)||[];return["_self","_bookmark"].includes(A.name)||(B=[]),B}function oe(B=null){if(!A)return;A.name==="_admin"&&(B=ct());let fe=window.$(_),L=U();if(B===null&&w&&ae.get(["scopes",T,"type"])==="Hierarchy"&&!ae.get(["scopes",T,"hierarchyDisabled"])){L.push({type:"textFilter",value:w}),Espo.ajax.getRequest(`${T}/action/TreeData`,{where:L,scope:l,link:A.name,sortBy:N,asc:!!C}).then(Q=>{oe(Q.tree)});return}let G={dataUrl:Ve(),dataFilter:Q=>ie(Q),selectable:!0,saveState:!1,autoOpen:!1,dragAndDrop:ae.get(["scopes",T,"multiParents"])!==!0&&ae.get(["scopes",T,"dragAndDrop"])&&N==="sortOrder",useContextMenu:!1,closedIcon:window.$('<svg class="icon"><use href="client/img/icons/icons.svg#angle-up"></use></svg>'),openedIcon:window.$('<svg class="icon"><use href="client/img/icons/icons.svg#angle-down"></use></svg>'),onCreateLi:(function(Q,ee,ne){Q.disabled?ee.addClass("disabled"):ee.removeClass("disabled");const Ae=ee.find(".jqtree-title");if(w){let Ke=w.replace(/\*/g,"");if(Ke.length>0){let kt=Ae.html(),on=kt.match(new RegExp(Ke,"ig"));if(on){let qt=[];on.forEach(an=>{qt.includes(an)||(qt.push(an),Ae.html(kt.replace(new RegExp(an,"g"),`<b>${an}</b>`)))})}}}["_self","_bookmark"].includes(A.name)&&r&&r.get("id")===Q.id&&(fe.tree("addToSelection",Q),ee.addClass("jqtree-selected")),!["_self","_bookmark"].includes(A.name)&&D===Q.id&&(fe.tree("addToSelection",Q),ee.addClass("jqtree-selected")),A.name==="_admin"&&(ae.get(["scopes",ki()])&&Q.id.includes("#"+ki()+"/")&&Ue(ki())||Q.id===window.location.hash)&&(fe.tree("addToSelection",Q),ee.addClass("jqtree-selected")),Ae.attr("data-id",Q.id),Q.showMoreDirection?(ee.addClass("show-more"),ee.addClass("show-more-"+Q.showMoreDirection),ee.find(".jqtree-title").addClass("more-label")):Ae.attr("title",Q.name)}).bind(this)};B&&(G.data=B,G.autoOpen=!0,G.dragAndDrop=!1,delete G.dataUrl,delete G.dataFilter),fe.tree(G),fe.on("tree.load_data",Q=>{Be.notify(!1),s!=null&&s.treeLoad&&s.treeLoad(T,G)}),fe.on("tree.refresh",Q=>{if(A.name==="_admin"){let ee=ki();ae.get(["scopes",ee])&&(Je(ee,[]),s!=null&&s.selectNode&&s.selectNode({id:ee},!0));return}if(Ce.get("selectedNodeId",l)&&d==="list"){const ee=Ce.get("selectedNodeId",l),ne=Ce.get("selectedNodeRoute",l);s!=null&&s.selectNode&&s.selectNode({id:ee,route:ne},!0)}d==="detail"&&(r&&["_self","_bookmark"].includes(A.name)?Je(r.get("id"),Object.keys(r.get("hierarchyRoute")??[]).reverse()):Ce.get("selectedNodeId",l)&&Je(Ce.get("selectedNodeId",l),Cp(Ce.get("selectedNodeRoute",l))))}),fe.on("tree.move",Q=>{Q.preventDefault();const ee="parent";let ne=Q.move_info,Ae={_position:ne.position,_sortAsc:C,_target:ne.target_node.id};Ae[ee+"Id"]=null,Ae[ee+"Name"]=null,ne.position==="inside"?(Ae[ee+"Id"]=ne.target_node.id,Ae[ee+"Name"]=ne.target_node.name):ne.target_node.parent.id&&(Ae[ee+"Id"]=ne.target_node.parent.id,Ae[ee+"Name"]=ne.target_node.parent.name),Espo.ajax.patchRequest(`${T}/${ne.moved_node.id}`,Ae).success(Ke=>{ne.do_move()})}),fe.on("tree.click",Q=>{if(Q.preventDefault(),A.name==="_admin"&&!Q.node.disabled){window.location.href=Q.node.id;return}if(Q.node.disabled)return!1;const ee=window.$(Q.click_event.target);if(ee.hasClass("jqtree-title")||ee.parent().hasClass("jqtree-title")){let ne=Q.node;if(ne.showMoreDirection)return Oe(ne);ne.element&&te(window.$(ne.element));let Ae=[];for(;ne.parent.id;)Ae.push(ne.parent.id),ne=ne.parent;let Ke={id:Q.node.id,route:"",click:!0};Ae.length>0&&(Ke.route="|"+Ae.reverse().join("|")+"|"),s!=null&&s.selectNode&&s.selectNode(Ke)}})}function te(B){if(B&&B.length&&(dl(B),D&&i)){const fe=document.createElement("span");fe.classList.add("reset-button","fa","fa-times","pull-right"),fe.addEventListener("click",()=>{dl(B),J()}),B.append(fe)}}function Oe(B){Be.notify("Loading..."),Espo.ajax.getRequest(Ve(B)).then(fe=>{if(fe.list){const L=window.$(_);B.showMoreDirection==="up"?ie(JSON.parse(JSON.stringify(fe)),"up").reverse().forEach(G=>{Lp(L,G,B.getParent())}):B.showMoreDirection==="down"&&ie(JSON.parse(JSON.stringify(fe)),"down").forEach(G=>{Tp(L,G,B.getParent())}),L.tree("removeNode",B)}})}function Ve(B){let fe=T+`/action/Tree?isTreePanel=1&scope=${l}&link=${A.name}`;if(N&&(fe+=`&sortBy=${N}&asc=${C?"true":"false"}`),B&&B.showMoreDirection){let G=B.offset,Q=p;if(B.showMoreDirection==="up"){let ee=B.offset-Q;G=B.offset-Q,ee<0?(G=0,Q=Q+ee):G=ee}else B.showMoreDirection==="down"&&(G=G+1);fe+="&offset="+G+"&maxSize="+Q,B.getParent()&&(fe+="&node="+B.getParent().id)}else B&&B.id?fe+="&node="+B.id+"&offset=0&maxSize="+p:r&&r.id&&[r.urlRoot,"Bookmark"].includes(T)&&(fe+="&selectedId="+r.id);let L=U();return w&&(L=[...L,{type:"textFilter",value:w}]),L.length>0&&(fe+="&",fe+=window.$.param({where:L})),fe}function Je(B,fe){const L=window.$(_);ir(L,fe,()=>{let Q=L.tree("getNodeById",B);Q&&(L.tree("addToSelection",Q),D=B),L.find(".jqtree-title").each((ee,ne)=>{ne=window.$(ne);let Ae=ne.parent().parent();if(ne.data("id")!==B&&L.tree("getNodeById",ne.data("id"))){L.tree("removeFromSelection",L.tree("getNodeById",ne.data("id"))),Ae.removeClass("jqtree-selected"),dl(Ae);return}else Ae.hasClass("jqtree-selected")||Ae.addClass("jqtree-selected");Ae.hasClass("jqtree-selected")&&te(Ae)})})}function J(){s!=null&&s.selectNode&&s.selectNode({id:D})}function Y(B){const fe=x(),L=fe.tree("getNodeById",B);D=null,L&&(L.element&&dl(window.$(L.element)),fe.tree("removeFromSelection",L))}function x(){return window.$(_)}function ie(B,fe=null){return B.list?(se(B.list,fe),B.list):B}function se(B,fe){if(!fe||fe==="up"){let L=JSON.parse(JSON.stringify(B)).shift();L&&L.offset&&L.offset!==0&&B.unshift({id:"show-more-"+L.offset,offset:L.offset,showMoreDirection:"up",name:F.translate("Show more")})}if(!fe||fe==="down"){let L=JSON.parse(JSON.stringify(B)).pop();L&&L.offset&&L.total-1!==L.offset&&B.push({id:"show-more-"+L.offset,offset:L.offset,showMoreDirection:"down",name:F.translate("Show more")})}B.forEach(L=>{L.children&&se(L.children)})}function we(B){return B==="_self"?l:B==="_bookmark"?"Bookmark":ae.get(["entityDefs",l,"links",B,"entity"])||ae.get(["entityDefs",l,"fields",B,"entity"])}function Ee(B){A&&A.name===B.name||(t(10,w=""),t(8,S.value="",S),Ce.clear("treeSearchValue",T),Ce.clear("treeSearchValue","_admin"),d==="list"?D&&(s!=null&&s.selectNode&&s.selectNode({id:D}),D=null):D=null,t(4,A=B),Ie(!1),Ce.set("treeItem",l,B.name),Be.notify("Loading..."),gn().then(()=>{R()}))}function X(){t(8,S.value="",S),d==="detail"&&Ce.clear("treeWhereData",l),z()}function z(){t(10,w=S.value),w&&A.name==="_admin"?Ce.set("treeSearchValue","_admin",w):w?Ce.set("treeSearchValue",l,w):(Ce.clear("treeSearchValue",l),Ce.clear("treeSearchValue","_admin")),Be.notify("Loading..."),R()}function Z(){T==="Bookmark"&&R()}function re(){return I}function ye(B){t(12,N=B.target.value),Ce.set("treeItemSorting",l,{sortBy:N,sortAsc:C}),R()}function He(B){B.preventDefault(),t(11,C=!C),Ce.set("treeItemSorting",l,{sortBy:N,sortAsc:C}),R()}function Ue(B){let fe=0;for(const L of ct())for(const G of L.children)G.id.includes("#"+B)&&(fe+=1);return fe==1}function ct(){let B=ae.get(["app","adminPanel"]),fe=Object.keys(B).length,L=[],G=0;return Object.entries(B).forEach(([Q,ee])=>{let ne={id:Q,name:F.get("Admin","labels",ee.label)??ee.label,offset:G,total:fe,disabled:!0,load_on_demand:!1,children:[]},Ae=0,Ke=ee.itemList.length;for(const kt of ee.itemList){if(kt.listDisabled)continue;const on=F.translate(kt.label,"labels","Admin");((w??"").length<3||on.toLowerCase().includes(w.toLowerCase()))&&(ne.children.push({id:kt.url,name:on,offset:Ae,total:Ke,disabled:!1,load_on_demand:!1}),Ae++)}ne.children.length!==0&&(L.push(ne),G++)}),L}function ce(B){m?(t(4,A={name:"_admin",label:F.get("Global","labels","Administration")}),t(9,b=[A]),B()):Ut.get(l,"leftSidebar",null,null,fe=>{I=fe,t(9,b=fe.layout.map(G=>{const Q=ae.get(["entityDefs",l,"fields",G.name,"type"]);let ee="";if(G.name==="_self")ee=F.get("Global","scopeNamesPlural",l);else if(G.name==="_bookmark")ee=F.get("Global","scopeNamesPlural","Bookmark");else if(G.name==="_admin")ee=F.get("Global","labels","Administration");else{if(Q=="link"){const ne=we(G.name);ee=F.get("Global","scopeNamesPlural",ne)}ee||(ee=F.get(l,"links",G.name)||F.get(l,"fields",G.name)||F.get("Global","fields",G.name))}return{name:G.name,label:ee}}));let L=Ce.get("treeItem",l);ki()===l&&(L="_admin"),b.length>0&&(!L||!b.find(G=>G.name===L)?(Ce.set("treeItem",l,b[0].name),t(4,A=b[0])):t(4,A=b.find(G=>G.name===L)),Ie(!0)),B()})}function Ie(B){var fe;if(t(38,T=we(A.name)),T==="Bookmark"&&t(38,T=l),B&&A.name===Ce.get("treeItem",l)){const L=Ce.get("treeItemSorting",l);if(L&&typeof L=="object"&&ae.get(["entityDefs",T,"fields",L.sortBy])){t(11,C=L.sortAsc),t(12,N=L.sortBy);return}}ae.get(["scopes",T,"type"])==="Hierarchy"&&!ae.get(["scopes",T,"hierarchyDisabled"])&&A.name!=="_bookmark"?t(12,N="sortOrder"):t(12,N=ae.get(["entityDefs",T,"collection","sortBy"])||"name"),ae.get(["entityDefs",T,"fields",N])||t(12,N=(fe=P[0])==null?void 0:fe.name),t(11,C=!!ae.get(["entityDefs",T,"collection","asc"])),Ce.set("treeItemSorting",l,{sortBy:N,sortAsc:C})}function Re(){ce(()=>{gn().then(()=>{R()})})}it(()=>{const B=Ce.get("panelWidth",l);B&&t(0,u=parseInt(B)||a),(window.innerWidth<=767||Ce.get("catalog-tree-panel",l))&&t(1,f=!0),t(5,v=Ce.get("catalog-tree-panel-pin",l)!=="not-pinned"),ce(()=>{var fe,L;b.length===0&&(t(1,f=!0),(L=(fe=st.get())==null?void 0:fe.user)!=null&&L.isAdmin),gn().then(()=>{A.name==="_admin"?t(10,w=Ce.get("treeSearchValue","_admin")||null):t(10,w=Ce.get("treeSearchValue",l)||null),w&&t(8,S.value=w,S),f||oe(),h&&h(k)})})});function Ze(B){Ce.set("panelWidth",l,u.toString()),s!=null&&s.treeWidthChanged&&s.treeWidthChanged(u)}function ot(B){Ce.set("catalog-tree-panel",l,f?"collapsed":""),f||R()}function Ht(B){Ce.set("catalog-tree-panel-pin",l,v?"pin":"not-pinned")}const Zt=B=>Ee(B);function wn(B){qe[B?"unshift":"push"](()=>{k=B,t(7,k)})}function jn(B){qe[B?"unshift":"push"](()=>{S=B,t(8,S)})}const zn=B=>B.key==="Enter"&&z();function Gn(){N=cf(this),t(12,N),t(13,P),t(38,T),t(22,l),t(4,A)}function Vn(B){qe[B?"unshift":"push"](()=>{_=B,t(6,_)})}function lr(B){u=B,t(0,u)}function rr(B){f=B,t(1,f)}function or(B){v=B,t(5,v)}return n.$$set=B=>{"scope"in B&&t(22,l=B.scope),"model"in B&&t(23,r=B.model),"collection"in B&&t(24,o=B.collection),"callbacks"in B&&t(25,s=B.callbacks),"minWidth"in B&&t(2,a=B.minWidth),"maxWidth"in B&&t(3,c=B.maxWidth),"currentWidth"in B&&t(0,u=B.currentWidth),"isCollapsed"in B&&t(1,f=B.isCollapsed),"mode"in B&&t(26,d=B.mode),"maxSize"in B&&t(27,p=B.maxSize),"renderLayoutEditor"in B&&t(28,h=B.renderLayoutEditor),"isAdminPage"in B&&t(29,m=B.isAdminPage)},n.$$.update=()=>{if(n.$$.dirty[0]&16&&t(38,T=A?we(A.name):null),n.$$.dirty[0]&67108880&&(i=A&&(!["_self","_bookmark"].includes(A.name)&&d==="list"||A.name==="_admin")),n.$$.dirty[0]&4194304|n.$$.dirty[1]&128)if(!T)t(13,P=[]);else{const B=T==="Bookmark"?l:T,fe=ae.get(["entityDefs",B,"fields"]);t(13,P=Object.keys(fe).filter(function(L){return["varchar","text","int","float","date","datetime"].includes(fe[L].type)&&!fe[L].notStorable}).sort(function(L,G){return F.translate(L,"fields",B).localeCompare(F.translate(G,"fields",B))}).map(L=>({name:L,label:F.translate(L,"fields",B)})))}},[u,f,a,c,A,v,_,k,S,b,w,C,N,P,Ee,X,z,ye,He,Ze,ot,Ht,l,r,o,s,d,p,h,m,V,R,Je,Y,x,Z,re,Re,T,Zt,wn,jn,zn,Gn,Vn,lr,rr,or]}class Op extends Le{constructor(e){super(),Te(this,e,Ip,Ap,Se,{scope:22,model:23,collection:24,callbacks:25,minWidth:2,maxWidth:3,currentWidth:0,isCollapsed:1,mode:26,maxSize:27,renderLayoutEditor:28,isAdminPage:29,handleCollectionSearch:30,rebuildTree:31,selectTreeNode:32,unSelectTreeNode:33,getTreeEl:34,reloadBookmarks:35,getLayoutData:36,refreshLayout:37},null,[-1,-1,-1])}get handleCollectionSearch(){return this.$$.ctx[30]}get rebuildTree(){return this.$$.ctx[31]}get selectTreeNode(){return this.$$.ctx[32]}get unSelectTreeNode(){return this.$$.ctx[33]}get getTreeEl(){return this.$$.ctx[34]}get reloadBookmarks(){return this.$$.ctx[35]}get getLayoutData(){return this.$$.ctx[36]}get refreshLayout(){return this.$$.ctx[37]}}function Pp(){const n=at([]),e=at([]),t=at(null),i=at(!1);async function l(c){return new Promise(u=>{if(Lt(t)!==null)return u(Lt(t));Do.create("SavedSearch",f=>{f.url="SavedSearch",t.set(f),u(f)})})}async function r(c){if(!(Lt(i)||Lt(n).length>0))return i.set(!0),l().then(u=>{u.where=[{type:"equals",attribute:"entityType",value:c}],u.fetch().then(f=>(n.set(f.list),i.set(!1),f.list))})}async function o(c,u=null){const f=st.get();if(!f)return;const d=await fetch(u?`/api/v1/SavedSearch/${u}`:"/api/v1/SavedSearch",{method:u?"PUT":"POST",headers:{"Content-Type":"application/json","Authorization-Token":btoa(f.user.userName+":"+f.token)},body:JSON.stringify(c)});if(d.ok){const p=await d.json();return n.update(h=>[p,...h]),p}}async function s(c){const u=st.get();if(!u)return;(await fetch(`/api/v1/SavedSearch/${c}`,{method:"DELETE",headers:{"Content-Type":"application/json","Authorization-Token":btoa(u.user.userName+":"+u.token)}})).ok&&n.update(d=>d.filter(p=>p.id!==c))}function a(c){e.update(u=>u.includes(c)?u.filter(f=>f!==c):[...u,c])}return{savedSearchItems:n,selectedSavedItemIds:e,collection:t,loading:i,fetchSavedSearch:r,toggleSavedItemSelection:a,saveSavedSearch:o,removeSavedSearch:s}}const rt=Pp();function ns(n,e,t){const i=n.slice();return i[21]=e[t],i}function Mp(n){let e,t,i,l=de(n[0]),r=[];for(let o=0;o<l.length;o+=1)r[o]=rs(ns(n,l,o));return{c(){e=E("h5"),e.textContent=`${F.translate("Saved Filters")}`,t=q(),i=E("ul");for(let o=0;o<r.length;o+=1)r[o].c();Fe(i,"padding","0")},m(o,s){M(o,e,s),M(o,t,s),M(o,i,s);for(let a=0;a<r.length;a+=1)r[a]&&r[a].m(i,null)},p(o,s){if(s&1021){l=de(o[0]);let a;for(a=0;a<l.length;a+=1){const c=ns(o,l,a);r[a]?r[a].p(c,s):(r[a]=rs(c),r[a].c(),r[a].m(i,null))}for(;a<r.length;a+=1)r[a].d(1);r.length=l.length}},d(o){o&&(O(e),O(t),O(i)),et(r,o)}}}function Np(n){let e,t;return{c(){e=E("img"),g(e,"class","preloader svelte-1w2fnjq"),Bi(e.src,t="client/img/atro-loader.svg")||g(e,"src",t),g(e,"alt","loader")},m(i,l){M(i,e,l)},p:De,d(i){i&&O(e)}}}function is(n){var d;let e,t,i,l,r,o=Ft.check("SavedSearch","edit"),s,a=Ft.check("SavedSearch","delete"),c=((d=n[4])==null?void 0:d.id)===n[21].id&&ls(),u=o&&Fp(n),f=a&&Hp(n);return{c(){e=E("div"),c&&c.c(),t=q(),i=E("a"),i.innerHTML='<svg class="icon"><use href="client/img/icons/icons.svg#dots"></use></svg>',l=q(),r=E("ul"),u&&u.c(),s=q(),f&&f.c(),Fe(i,"cursor","pointer"),g(i,"class","dropdown-toggle"),g(i,"data-toggle","dropdown"),g(r,"class","dropdown-menu pull-right"),g(e,"class","list-row-buttons btn-group")},m(p,h){M(p,e,h),c&&c.m(e,null),y(e,t),y(e,i),y(e,l),y(e,r),u&&u.m(r,null),y(r,s),f&&f.m(r,null)},p(p,h){var m;((m=p[4])==null?void 0:m.id)===p[21].id?c||(c=ls(),c.c(),c.m(e,t)):c&&(c.d(1),c=null),o&&u.p(p,h),a&&f.p(p,h)},d(p){p&&O(e),c&&c.d(),u&&u.d(),f&&f.d()}}}function ls(n){let e;return{c(){e=E("span"),e.innerHTML='<svg class="icon"><use href="client/img/icons/icons.svg#edit"></use></svg>',Fe(e,"position","absolute"),Fe(e,"right","15px")},m(t,i){M(t,e,i)},d(t){t&&O(e)}}}function Fp(n){let e,t,i,l,r;function o(u,f){var d;return((d=u[4])==null?void 0:d.id)===u[21].id?Rp:Bp}let s=o(n),a=s(n);function c(){return n[14](n[21])}return{c(){a.c(),e=q(),t=E("li"),i=E("a"),i.textContent=`${F.translate("Rename")}`},m(u,f){a.m(u,f),M(u,e,f),M(u,t,f),y(t,i),l||(r=$(i,"click",c),l=!0)},p(u,f){n=u,s===(s=o(n))&&a?a.p(n,f):(a.d(1),a=s(n),a&&(a.c(),a.m(e.parentNode,e)))},d(u){u&&(O(e),O(t)),a.d(u),l=!1,r()}}}function Bp(n){let e,t,i,l;function r(){return n[13](n[21])}return{c(){e=E("li"),t=E("a"),t.textContent=`${F.translate("Edit")}`},m(o,s){M(o,e,s),y(e,t),i||(l=$(t,"click",r),i=!0)},p(o,s){n=o},d(o){o&&O(e),i=!1,l()}}}function Rp(n){let e,t,i,l;return{c(){e=E("li"),t=E("a"),t.textContent=`${F.translate("Cancel Edit")}`},m(r,o){M(r,e,o),y(e,t),i||(l=$(t,"click",function(){Tt(n[8])&&n[8].apply(this,arguments)}),i=!0)},p(r,o){n=r},d(r){r&&O(e),i=!1,l()}}}function Hp(n){let e,t,i,l;function r(){return n[15](n[21])}return{c(){e=E("li"),t=E("a"),t.textContent=`${F.translate("Remove")}`},m(o,s){M(o,e,s),y(e,t),i||(l=$(t,"click",r),i=!0)},p(o,s){n=o},d(o){o&&O(e),i=!1,l()}}}function rs(n){let e,t,i,l,r,o,s=n[21].name+"",a,c,u,f,d,p,h=(Ft.check("SavedSearch","edit")||Ft.check("SavedSearch","delete"))&&!n[3],m,v,_;function k(...b){return n[12](n[21],...b)}let S=h&&is(n);return{c(){e=E("li"),t=E("label"),i=E("input"),o=q(),a=ve(s),c=q(),u=pn("svg"),f=pn("use"),p=q(),S&&S.c(),m=q(),g(i,"type","checkbox"),i.checked=l=n[2].includes(n[21].id),g(i,"name",r=n[21].id),g(f,"href",d=n[21].isPublic?"client/img/icons/icons.svg#group":"client/img/icons/icons.svg#shield"),g(u,"class","icon visibility svelte-1w2fnjq"),me(t,"active",n[2].includes(n[21].id)),g(e,"class","checkbox")},m(b,A){M(b,e,A),y(e,t),y(t,i),y(t,o),y(t,a),y(t,c),y(t,u),y(u,f),y(e,p),S&&S.m(e,null),y(e,m),v||(_=$(i,"change",k),v=!0)},p(b,A){n=b,A&5&&l!==(l=n[2].includes(n[21].id))&&(i.checked=l),A&1&&r!==(r=n[21].id)&&g(i,"name",r),A&1&&s!==(s=n[21].name+"")&&Ne(a,s),A&1&&d!==(d=n[21].isPublic?"client/img/icons/icons.svg#group":"client/img/icons/icons.svg#shield")&&g(f,"href",d),A&5&&me(t,"active",n[2].includes(n[21].id)),A&8&&(h=(Ft.check("SavedSearch","edit")||Ft.check("SavedSearch","delete"))&&!n[3]),h?S?S.p(n,A):(S=is(n),S.c(),S.m(e,m)):S&&(S.d(1),S=null)},d(b){b&&O(e),S&&S.d(),v=!1,_()}}}function qp(n){let e;function t(r,o){if(r[1])return Np;if(r[0].length>0)return Mp}let i=t(n),l=i&&i(n);return{c(){e=E("div"),l&&l.c(),g(e,"class","checkboxes-filter")},m(r,o){M(r,e,o),l&&l.m(e,null)},p(r,[o]){i===(i=t(r))&&l?l.p(r,o):(l&&l.d(1),l=i&&i(r),l&&(l.c(),l.m(e,null)))},i:De,o:De,d(r){r&&O(e),l&&l.d()}}}function Wp(n,e,t){let{scope:i}=e,{savedSearchList:l=[]}=e,{loading:r=!0}=e,{searchManager:o}=e,{hideRowAction:s}=e,{editingItem:a=null}=e,{edit:c=w=>{}}=e,{rename:u=w=>{}}=e,{remove:f=w=>{}}=e,{cancel:d=()=>{}}=e,{selectedSavedSearchIds:p=[]}=e;hn();const h=rt.savedSearchItems.subscribe(w=>{t(0,l=w)});rt.savedSearchItems.set(o.savedSearchList||[]),rt.selectedSavedItemIds.set(o.getSavedFilters().map(w=>w.id));const m=rt.selectedSavedItemIds.subscribe(w=>{t(2,p=w)});rt.loading.subscribe(w=>{t(1,r=w)});function v(w,T){rt.toggleSavedItemSelection(T.id);let I=Lt(rt.selectedSavedItemIds);o.update({savedFilters:Lt(rt.savedSearchItems).filter(D=>I.includes(D.id))}),_()}function _(){o.collection.reset(),Be.notify(F.translate("loading","messages")),t(10,o.collection.where=o.getWhere(),o),o.collection.abortLastFetch(),o.collection.fetch().then(()=>window.Backbone.trigger("after:search",o.collection))}it(()=>(rt.fetchSavedSearch(i),()=>{h(),m()}));const k=(w,T)=>v(T,w),S=w=>{c(w)},b=w=>u(w),A=w=>f(w);return n.$$set=w=>{"scope"in w&&t(11,i=w.scope),"savedSearchList"in w&&t(0,l=w.savedSearchList),"loading"in w&&t(1,r=w.loading),"searchManager"in w&&t(10,o=w.searchManager),"hideRowAction"in w&&t(3,s=w.hideRowAction),"editingItem"in w&&t(4,a=w.editingItem),"edit"in w&&t(5,c=w.edit),"rename"in w&&t(6,u=w.rename),"remove"in w&&t(7,f=w.remove),"cancel"in w&&t(8,d=w.cancel),"selectedSavedSearchIds"in w&&t(2,p=w.selectedSavedSearchIds)},[l,r,p,s,a,c,u,f,d,v,o,i,k,S,b,A]}class os extends Le{constructor(e){super(),Te(this,e,Wp,qp,Se,{scope:11,savedSearchList:0,loading:1,searchManager:10,hideRowAction:3,editingItem:4,edit:5,rename:6,remove:7,cancel:8,selectedSavedSearchIds:2})}}function jp(){const n=at([]),e=at(!1);function t(i){n.update(l=>l.includes(i)?l.filter(r=>r!==i):[i,...l])}return{selectBoolFilters:n,advancedFilterChecked:e,toggleBoolFilters:t}}const pt=jp();function as(n,e,t){const i=n.slice();return i[8]=e[t],i}function ss(n){let e,t,i,l=de(n[1]),r=[];for(let o=0;o<l.length;o+=1)r[o]=us(as(n,l,o));return{c(){e=E("h5"),e.textContent=`${F.translate("General Filters")}`,t=q(),i=E("ul");for(let o=0;o<r.length;o+=1)r[o].c();Fe(i,"padding","0")},m(o,s){M(o,e,s),M(o,t,s),M(o,i,s);for(let a=0;a<r.length;a+=1)r[a]&&r[a].m(i,null)},p(o,s){if(s&15){l=de(o[1]);let a;for(a=0;a<l.length;a+=1){const c=as(o,l,a);r[a]?r[a].p(c,s):(r[a]=us(c),r[a].c(),r[a].m(i,null))}for(;a<r.length;a+=1)r[a].d(1);r.length=l.length}},d(o){o&&(O(e),O(t),O(i)),et(r,o)}}}function us(n){let e,t,i,l,r,o,s=F.translate(n[8],"boolFilters",n[0])+"",a,c,u,f;function d(){return n[5](n[8])}return{c(){e=E("li"),t=E("label"),i=E("input"),o=q(),a=ve(s),c=q(),g(i,"type","checkbox"),i.checked=l=n[2].includes(n[8]),g(i,"name",r=n[8]),me(t,"active",n[2].includes(n[8])),g(e,"class","checkbox")},m(p,h){M(p,e,h),y(e,t),y(t,i),y(t,o),y(t,a),y(e,c),u||(f=$(i,"change",d),u=!0)},p(p,h){n=p,h&6&&l!==(l=n[2].includes(n[8]))&&(i.checked=l),h&2&&r!==(r=n[8])&&g(i,"name",r),h&3&&s!==(s=F.translate(n[8],"boolFilters",n[0])+"")&&Ne(a,s),h&6&&me(t,"active",n[2].includes(n[8]))},d(p){p&&O(e),u=!1,f()}}}function zp(n){var i;let e,t=((i=n[1])==null?void 0:i.length)>0&&ss(n);return{c(){e=E("div"),t&&t.c(),g(e,"class","checkboxes-filter")},m(l,r){M(l,e,r),t&&t.m(e,null)},p(l,[r]){var o;((o=l[1])==null?void 0:o.length)>0?t?t.p(l,r):(t=ss(l),t.c(),t.m(e,null)):t&&(t.d(1),t=null)},i:De,o:De,d(l){l&&O(e),t&&t.d()}}}function Gp(n,e,t){let{searchManager:i}=e,{scope:l}=e,r=[],o=[];c(),pt.selectBoolFilters.subscribe(f=>{f.length!==o.length&&t(2,o=f)});function s(){Be.notify(F.translate("loading","messages")),i.collection.reset(),t(4,i.collection.where=i.getWhere(),i),i.collection.abortLastFetch(),i.collection.fetch().then(()=>window.Backbone.trigger("after:search",i.collection))}function a(f){pt.toggleBoolFilters(f);let d=Lt(pt.selectBoolFilters),p={};for(const h of d)p[h]=!0;i.update({bool:p}),s()}function c(){t(1,r=(ae.get(["clientDefs",l,"boolFilterList"])||[]).filter(function(p){return typeof p=="string"?!0:(p=p||{},!(p.accessDataList&&!window.Espo.Utils.checkAccessDataList(p.accessDataList,Acl,Acl.getUser())))}).map(function(p){return typeof p=="string"?p:(p=p||{},p.name)}));let f=ae.get(["clientDefs",l,"hiddenBoolFilterList"])||[];t(1,r=r.filter(function(p){return!f.includes(p)}));const d=i.getBool();for(const p in d)d[p]&&r.includes(p)&&o.push(p);pt.selectBoolFilters.set(o)}it(()=>{});const u=f=>a(f);return n.$$set=f=>{"searchManager"in f&&t(4,i=f.searchManager),"scope"in f&&t(0,l=f.scope)},[l,r,o,a,i,u]}class cs extends Le{constructor(e){super(),Te(this,e,Gp,zp,Se,{searchManager:4,scope:0})}}function Vp(n){let e,t;return e=new os({props:{scope:n[1],searchManager:n[0],editingItem:n[4],rename:n[11],remove:n[12],edit:n[13],cancel:n[14]}}),{c(){be(e.$$.fragment)},m(i,l){he(e,i,l),t=!0},p(i,l){const r={};l[0]&2&&(r.scope=i[1]),l[0]&1&&(r.searchManager=i[0]),l[0]&16&&(r.editingItem=i[4]),e.$set(r)},i(i){t||(W(e.$$.fragment,i),t=!0)},o(i){j(e.$$.fragment,i),t=!1},d(i){ge(e,i)}}}function Up(n){let e,t,i,l=F.translate("Save")+"",r,o,s;return{c(){e=E("button"),t=E("span"),t.innerHTML='<svg class="icon"><use href="client/img/icons/icons.svg#save"></use></svg>',i=q(),r=ve(l),g(e,"class","filter-item save svelte-1hmatq3")},m(a,c){M(a,e,c),y(e,t),y(e,i),y(e,r),o||(s=$(e,"click",n[10]),o=!0)},p:De,d(a){a&&O(e),o=!1,s()}}}function Xp(n){let e,t,i,l,r,o=F.translate("Unset All")+"",s,a,c,u,f=Ft.check("SavedSearch","read"),d,p,h,m,v,_,k,S,b,A,w,T=F.translate("Unset")+"",I,D,C=Ft.check("SavedSearch","create"),N,P,V,R,H;c=new cs({props:{scope:n[1],searchManager:n[0]}});let U=f&&Vp(n),oe=C&&Up(n);return{c(){e=E("div"),t=E("div"),i=E("button"),l=E("span"),l.innerHTML='<svg class="icon"><use href="client/img/icons/icons.svg#close"></use></svg>',r=q(),s=ve(o),a=q(),be(c.$$.fragment),u=q(),U&&U.c(),d=q(),p=E("div"),h=E("h5"),m=E("input"),v=q(),_=E("span"),_.textContent=`${F.translate("Advanced Filter")}`,k=q(),S=E("div"),b=E("button"),A=E("span"),A.innerHTML='<svg class="icon"><use href="client/img/icons/icons.svg#close"></use></svg>',w=q(),I=ve(T),D=q(),oe&&oe.c(),N=q(),P=E("div"),g(i,"class","filter-item svelte-1hmatq3"),g(i,"data-action","filter"),me(i,"disabled",!n[5]),g(m,"type","checkbox"),g(m,"class","svelte-1hmatq3"),g(h,"class","svelte-1hmatq3"),g(b,"class","filter-item svelte-1hmatq3"),g(S,"class","row filter-action svelte-1hmatq3"),g(P,"class","query-builder"),g(p,"class","advanced-filters svelte-1hmatq3"),g(e,"class","query-builder-container")},m(te,Oe){M(te,e,Oe),y(e,t),y(t,i),y(i,l),y(i,r),y(i,s),y(e,a),he(c,e,null),y(e,u),U&&U.m(e,null),y(e,d),y(e,p),y(p,h),y(h,m),m.checked=n[3],y(h,v),y(h,_),y(p,k),y(p,S),y(S,b),y(b,A),y(b,w),y(b,I),y(S,D),oe&&oe.m(S,null),y(p,N),y(p,P),n[19](P),V=!0,R||(H=[$(i,"click",n[8]),$(m,"change",n[17]),$(m,"change",n[18]),$(_,"click",n[7]),$(b,"click",n[6])],R=!0)},p(te,Oe){(!V||Oe[0]&32)&&me(i,"disabled",!te[5]);const Ve={};Oe[0]&2&&(Ve.scope=te[1]),Oe[0]&1&&(Ve.searchManager=te[0]),c.$set(Ve),f&&U.p(te,Oe),Oe[0]&8&&(m.checked=te[3]),C&&oe.p(te,Oe)},i(te){V||(W(c.$$.fragment,te),W(U),V=!0)},o(te){j(c.$$.fragment,te),j(U),V=!1},d(te){te&&O(e),ge(c),U&&U.d(),oe&&oe.d(),n[19](null),R=!1,nt(H)}}}function Ei(n){let e=[".query-builder .rule-container .rule-filter-container",".query-builder .rule-container .rule-operator-container",".query-builder .rule-container .rule-value-container"];for(const i of e){let l=document.querySelectorAll(i);if(!l.length)return;for(const r of l)r.style.display!=="none"&&(n<450?(r.style.display="block",r.style.width="100%"):(r.style.display="inline-block",r.style.width="25%",i.includes("operator")&&(r.style.width="20%")))}let t=document.querySelector(".query-builder .rule-actions");t&&(n>450?(t.style.marginTop="10px",t.style.marginBottom="5px"):(t.style.marginTop="0",t.style.marginBottom="0"))}function Yp(n){return n.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}function fs(n){let e=[];return n.forEach(t=>{t.rules?fs(t.rules).forEach(i=>{e.push(i)}):t.id&&e.push(t.id)}),e}function Qp(n,e,t){let{scope:i}=e,{searchManager:l}=e,{createView:r}=e,{parentWidth:o}=e,s=[],a,c=new l.collection.model,u=!1,f=null,d=null,p=!1;pt.advancedFilterChecked.set(l.isQueryBuilderApplied());const h=rt.selectedSavedItemIds.subscribe(J=>{te()}),m=pt.selectBoolFilters.subscribe(J=>{te()}),v=pt.advancedFilterChecked.subscribe(J=>{t(3,u=J),te()});function _(J){l.set({...l.get(),...J})}function k(J){let Y=J;return J.forEach((x,ie)=>{x.rules?J[ie].rules=k(J[ie].rules):x.id&&(s.find(se=>se.id===x.id)||(Y=J.filter(se=>se.id!==x.id)))}),Y}function S(){const J=window.$(a);let Y=l.getQueryBuilder()||[];typeof Y=="object"&&!Y.condition&&(Y=[]),Y.rules&&(Y.rules=k(Y.rules));const x="emptyAttributeRule";let ie={};for(const se of s){let we=se.optgroup??"default";ie[we]=ie[we]??[],ie[we].push(se)}for(const se in ie)ie[se].sort(function(we,Ee){return we.label.localeCompare(Ee.label)});if(I()){let se={id:x,label:`[${F.translate("addAttribute")}]`,type:"boolean",optgroup:F.translate("Attributes"),operators:["equal"],input:"radio",values:{0:"false"}};ie[F.translate("Attributes")]?(ie[F.translate("Attributes")]=ie[F.translate("Attributes")].filter(we=>we.id!==se.id),ie[F.translate("Attributes")].unshift(se)):ie[F.translate("Attributes")]=[se]}s=[...ie[F.translate("Attributes")]??[],...ie.default??[],...ie[F.translate("Fields")]??[]],J.queryBuilder({allow_empty:!0,select_placeholder:F.translate("filterPlaceHolder"),operators:[{type:"contains"},{type:"not_contains"},{type:"equal"},{type:"not_equal"},{type:"less"},{type:"less_or_equal"},{type:"greater"},{type:"greater_or_equal"},{type:"between"},{type:"in"},{type:"not_in"},{type:"is_null"},{type:"is_not_null"},{type:"linked_with",nb_inputs:1,multiple:!0,apply_to:["string"]},{type:"not_linked_with",nb_inputs:1,multiple:!0,apply_to:["string"]},{type:"array_any_of",nb_inputs:1,multiple:!0,apply_to:["string"]},{type:"array_none_of",nb_inputs:1,multiple:!0,apply_to:["string"]},{type:"is_linked",nb_inputs:0,apply_to:["string"]},{type:"is_not_linked",nb_inputs:0,apply_to:["string"]},{type:"query_in",nb_inputs:1,apply_to:["string"]},{type:"query_linked_with",nb_inputs:1,apply_to:["string"]}],rules:Y,filters:s,plugins:{sortable:{icon:"fas fa-sort"}}}),c.trigger("afterInitQueryBuilder"),Ei(o),J.on("rulesChanged.queryBuilder",(se,we)=>{t(3,u=!1),setTimeout(()=>{Ei(o)},250);try{const Ee=J.queryBuilder("getRules");Ee&&(_({queryBuilder:Ee}),N(!1))}catch{}c.trigger("rulesChanged",we)}),J.on("afterUpdateRuleOperator.queryBuilder",(se,we)=>{c.trigger("afterUpdateRuleOperator",we)}),J.on("afterSetRules.queryBuilder",(se,we)=>{c.trigger("afterInitQueryBuilder")}),J.on("afterAddGroup.queryBuilder",(se,we)=>{c.trigger("afterAddGroup",we),Ei(o)}),J.on("afterAddRule.queryBuilder",(se,we)=>{setTimeout(()=>{Ei(o)},250),c.trigger("afterAddRule",we)})}function b(J){s=s.filter(ie=>ie.id.includes("attr"));let Y=[];Object.entries(ae.get(["entityDefs",i,"fields"])).forEach(([ie,se])=>{if(se.filterDisabled)return;const we=Yp(se.type),Ee=ae.get(["fields",we,"view"])||`views/fields/${we}`;Y.push(new Promise(X=>{r(ie,Ee,{name:ie,model:c,defs:{name:ie,params:{attribute:null}}},z=>{let Z=z.createQueryBuilderFilter();Z&&s.push(Z),X()})}))});const x=l.getQueryBuilder();x.rules&&Y.push(new Promise(ie=>{let se=[];if(fs(x.rules).forEach(we=>{let Ee=we.split("_");Ee.length===2&&Ee[0]==="attr"&&se.push(Ee[1])}),se.length>0){const we=[{attribute:"id",type:"in",value:se}];let Ee=st.get();fetch("/api/v1/Attribute?"+window.$.param({where:we}),{method:"GET",headers:{"Content-Type":"application/json","Authorization-Token":btoa(Ee.user.userName+":"+Ee.token)}}).then(X=>X.json().then(z=>{z.list.length?z.list.forEach(Z=>{T(Z,(re,ye)=>{ie()})}):ie()}))}else ie()})),Promise.all(Y).then(()=>{J()})}function A(){_({queryBuilder:[]}),window.$(a).queryBuilder("setRules",[])}function w(){Be.notify(F.translate("loading","messages")),l.collection.reset(),t(0,l.collection.where=l.getWhere(),l),l.collection.abortLastFetch(),l.collection.fetch().then(()=>window.Backbone.trigger("after:search",l.collection))}function T(J,Y){const x=window.Espo.Utils.camelCaseToHyphen(J.type),ie=ae.get(["fields",x,"view"])??`views/fields/${x}`,se=`attr_${J.id}`;r(se,ie,{name:se,model:c,defs:{name:se,params:{attribute:J}}},we=>{let Ee=we.createQueryBuilderFilter();Ee&&(Ee.label=J.name,Ee.optgroup=F.translate("Attributes"),s.map(z=>z.id).includes(se)?Y(!1,Ee):(s.push(Ee),Y(!0,Ee)))})}function I(){return Ft.check("Attribute","read")&&ae.get(["scopes",i,"hasAttribute"])||i==="Product"}function D(J){const Y="Attribute",x=ae.get(["clientDefs",Y,"modalViews","select"])||"views/modals/select-records";Be.notify("Loading..."),r("dialog",x,{scope:Y,multiple:!1,createButton:!1,massRelateEnabled:!1,allowSelectAllResult:!1},ie=>{ie.render(),Be.notify(!1),ie.dialog.$el.on("hidden.bs.modal",se=>{J&&J(!1)}),ie.listenTo(ie,"cancel, close",()=>{J&&J(!1)}),ie.once("select",se=>{T(se.attributes,(we,Ee)=>{J&&J(we,Ee)})})})}function C(){p&&(l.reset(),t(3,u=!1),N(!1),rt.selectedSavedItemIds.set([]),pt.selectBoolFilters.set([]),te(),w(),window.dispatchEvent(new CustomEvent("filter:unset-all")))}function N(J=!0){if(u&&!window.$(a).queryBuilder("validate")){Be.notify(F.translate("youHaveErrorsInFilter","messages"),"error"),t(3,u=!1);return}pt.advancedFilterChecked.set(u),_({queryBuilderApplied:u?"apply":!1}),J&&w(),te()}async function P(J,Y=null){Be.notify(F.translate("pleaseWait","messages")),rt.saveSavedSearch(J,Y).then(x=>{Be.notify(F.translate("Done"),"success")}).catch(x=>{console.error("Error on saving saveSearch",x),Be.notify(!1)})}function V(){if(!window.$(a).queryBuilder("validate")){Be.notify(F.translate("youHaveErrorsInFilter","messages"),"error");return}if(f!==null){P({data:window.$(a).queryBuilder("getRules")},f.id);return}r("savePreset","views/modals/save-filters",{},function(Y){Y.render(),Y.listenToOnce(Y,"save",x=>{P({entityType:i,name:x.name,data:l.getQueryBuilder(),isPublic:x.isPublic}),Y.close()})})}function R(J){r("savePreset","views/modals/save-filters",{name:J.name,isPublic:J.isPublic},function(Y){Y.render(),Y.listenToOnce(Y,"save",x=>{P({name:x.name,isPublic:x.isPublic},J.id),Y.close()})})}async function H(J){st.get()&&(Be.notify(F.translate("pleaseWait","messages")),rt.removeSavedSearch(J.id).then(x=>{Be.notify(F.translate("Done"),"success")}).catch(x=>{console.error("Error on deleting saveSearch",x),Be.notify(!1)}))}function U(J){b(()=>{const Y=window.$(a);try{d=d??l.getQueryBuilder(),Y.queryBuilder("setFilters",s),Y.queryBuilder("setRules",J.data),t(4,f=J)}catch{Be.notify(F.translate("theSavedFilterMightBeCorrupt","messages"),"error"),Y.queryBuilder("setRules",l.getQueryBuilder())}})}function oe(){window.$(a).queryBuilder("setRules",d??[]),d=null,t(4,f=null)}function te(){setTimeout(()=>{t(5,p=l.isQueryBuilderApplied()||l.getSavedFilters().length>0);let J=l.getBool();for(const Y in J)if(J[Y]){t(5,p=!0);break}},100)}it(()=>{const J=new URLSearchParams(window.location.search);if(J.has("where")){const x=JSON.parse(J.get("where"));x&&(Ce.set("queryBuilderRules",i,x),window.history.replaceState({},document.title,window.location.origin+"#"+i),w())}window.$.fn.queryBuilder.regional.main=F.getData().Global.queryBuilderFilter,window.$.fn.queryBuilder.defaults({lang_code:"main"});let Y=window.$.fn.queryBuilder.constructor.prototype.updateRuleFilter;return window.$.fn.queryBuilder.constructor.prototype.updateRuleFilter=function(x,ie){x.filter&&x.filter.id==="emptyAttributeRule"?D((se,we)=>{se?(this.setFilters(s),x.filter=we,Y.call(this,x,ie)):(x.filter.id==="emptyAttributeRule"&&(x.filter=ie),Y.call(this,x,ie))}):Y.call(this,x,ie)},t(3,u=l.isQueryBuilderApplied()),te(),b(()=>{S()}),()=>{m(),h(),v()}});function Oe(){u=this.checked,t(3,u)}const Ve=J=>N();function Je(J){qe[J?"unshift":"push"](()=>{a=J,t(2,a)})}return n.$$set=J=>{"scope"in J&&t(1,i=J.scope),"searchManager"in J&&t(0,l=J.searchManager),"createView"in J&&t(15,r=J.createView),"parentWidth"in J&&t(16,o=J.parentWidth)},n.$$.update=()=>{n.$$.dirty[0]&65536&&Ei(o)},[l,i,a,u,f,p,A,w,C,N,V,R,H,U,oe,r,o,Oe,Ve,Je]}class Jp extends Le{constructor(e){super(),Te(this,e,Qp,Xp,Se,{scope:1,searchManager:0,createView:15,parentWidth:16},null,[-1,-1])}}function ds(n,e,t){const i=n.slice();return i[27]=e[t],i}function ps(n){let e,t=n[27].label+"",i,l,r,o;function s(){return n[20](n[27])}return{c(){e=E("a"),i=ve(t),l=q(),g(e,"href","javascript:"),g(e,"class","btn btn-link item svelte-1kvkmv5")},m(a,c){M(a,e,c),y(e,i),y(e,l),r||(o=$(e,"click",s),r=!0)},p(a,c){n=a,c&512&&t!==(t=n[27].label+"")&&Ne(i,t)},d(a){a&&O(e),r=!1,o()}}}function ms(n){let e,t=n[27].name!==n[10].name&&ps(n);return{c(){t&&t.c(),e=ze()},m(i,l){t&&t.m(i,l),M(i,e,l)},p(i,l){i[27].name!==i[10].name?t?t.p(i,l):(t=ps(i),t.c(),t.m(e.parentNode,e)):t&&(t.d(1),t=null)},d(i){i&&O(e),t&&t.d(i)}}}function hs(n){let e,t,i;return t=new Jp({props:{scope:n[2],searchManager:n[5],createView:n[6],parentWidth:n[0]}}),{c(){var l;e=E("div"),be(t.$$.fragment),g(e,"class","filter"),me(e,"hidden",((l=n[10])==null?void 0:l.name)!=="filter")},m(l,r){M(l,e,r),he(t,e,null),i=!0},p(l,r){var s;const o={};r&4&&(o.scope=l[2]),r&32&&(o.searchManager=l[5]),r&64&&(o.createView=l[6]),r&1&&(o.parentWidth=l[0]),t.$set(o),(!i||r&1024)&&me(e,"hidden",((s=l[10])==null?void 0:s.name)!=="filter")},i(l){i||(W(t.$$.fragment,l),i=!0)},o(l){j(t.$$.fragment,l),i=!1},d(l){l&&O(e),ge(t)}}}function Zp(n){var S;let e,t,i,l,r,o=(((S=n[10])==null?void 0:S.label)??"")+"",s,a,c,u,f,d,p,h,m,v=de(n[9]),_=[];for(let b=0;b<v.length;b+=1)_[b]=ms(ds(n,v,b));let k=n[7]&&hs(n);return{c(){var b,A,w;e=E("div"),t=E("div");for(let T=0;T<_.length;T+=1)_[T].c();i=q(),l=E("div"),r=E("h5"),s=ve(o),a=q(),c=E("div"),u=q(),k&&k.c(),f=q(),d=E("div"),d.innerHTML='<img class="preloader svelte-1kvkmv5" src="client/img/atro-loader.svg" alt="loader"/>',p=q(),h=E("div"),h.innerHTML='<img class="preloader svelte-1kvkmv5" src="client/img/atro-loader.svg" alt="loader"/>',g(t,"class","btn-group svelte-1kvkmv5"),g(c,"class","layout-editor-container"),me(c,"hidden",((b=n[10])==null?void 0:b.name)!=="summary"),g(l,"class","sidebar-header"),g(d,"class","summary svelte-1kvkmv5"),me(d,"hidden",((A=n[10])==null?void 0:A.name)!=="summary"),g(h,"class","activities svelte-1kvkmv5"),me(h,"hidden",((w=n[10])==null?void 0:w.name)!=="activities"),g(e,"class","content svelte-1kvkmv5")},m(b,A){M(b,e,A),y(e,t);for(let w=0;w<_.length;w+=1)_[w]&&_[w].m(t,null);y(e,i),y(e,l),y(l,r),y(r,s),y(l,a),y(l,c),y(e,u),k&&k.m(e,null),y(e,f),y(e,d),y(e,p),y(e,h),m=!0},p(b,A){var w,T,I,D;if(A&3584){v=de(b[9]);let C;for(C=0;C<v.length;C+=1){const N=ds(b,v,C);_[C]?_[C].p(N,A):(_[C]=ms(N),_[C].c(),_[C].m(t,null))}for(;C<_.length;C+=1)_[C].d(1);_.length=v.length}(!m||A&1024)&&o!==(o=(((w=b[10])==null?void 0:w.label)??"")+"")&&Ne(s,o),(!m||A&1024)&&me(c,"hidden",((T=b[10])==null?void 0:T.name)!=="summary"),b[7]?k?(k.p(b,A),A&128&&W(k,1)):(k=hs(b),k.c(),W(k,1),k.m(e,f)):k&&(We(),j(k,1,1,()=>{k=null}),je()),(!m||A&1024)&&me(d,"hidden",((I=b[10])==null?void 0:I.name)!=="summary"),(!m||A&1024)&&me(h,"hidden",((D=b[10])==null?void 0:D.name)!=="activities")},i(b){m||(W(k),m=!0)},o(b){j(k),m=!1},d(b){b&&O(e),et(_,b),k&&k.d()}}}function Kp(n){let e,t,i,l,r;function o(u){n[21](u)}function s(u){n[22](u)}function a(u){n[23](u)}let c={position:"right",className:"right-side-view",minWidth:n[3],maxWidth:n[4],$$slots:{default:[Zp]},$$scope:{ctx:n}};return n[1]!==void 0&&(c.isCollapsed=n[1]),n[8]!==void 0&&(c.isPinned=n[8]),n[0]!==void 0&&(c.width=n[0]),e=new Ya({props:c}),qe.push(()=>Pn(e,"isCollapsed",o)),qe.push(()=>Pn(e,"isPinned",s)),qe.push(()=>Pn(e,"width",a)),e.$on("sidebar-resize",n[12]),e.$on("sidebar-collapse",n[14]),e.$on("sidebar-pin",n[13]),{c(){be(e.$$.fragment)},m(u,f){he(e,u,f),r=!0},p(u,[f]){const d={};f&8&&(d.minWidth=u[3]),f&16&&(d.maxWidth=u[4]),f&1073743589&&(d.$$scope={dirty:f,ctx:u}),!t&&f&2&&(t=!0,d.isCollapsed=u[1],In(()=>t=!1)),!i&&f&256&&(i=!0,d.isPinned=u[8],In(()=>i=!1)),!l&&f&1&&(l=!0,d.width=u[0],In(()=>l=!1)),e.$set(d)},i(u){r||(W(e.$$.fragment,u),r=!0)},o(u){j(e.$$.fragment,u),r=!1},d(u){ge(e,u)}}}function xp(n,e,t){let i,{scope:l}=e,{mode:r}=e,{minWidth:o=300}=e,{maxWidth:s=600}=e,{currentWidth:a=o}=e,{loadSummary:c}=e,{loadActivities:u}=e,{isCollapsed:f=!1}=e,{hasStream:d=!1}=e,{searchManager:p}=e,{createView:h}=e,{showFilter:m}=e,v=!0,_,k=[],S;["detail","edit"].includes(r)&&(k.push({name:"summary",label:F.translate("Summary")}),S=k[0]);function b(R){S&&S.name===R.name||(t(10,S=R),S.name==="activities"&&A(),Ce.set("right-side-view-active-item",i,S.name))}function A(){f||(_==null?u(R=>{_=R}):_==null||_.refresh())}function w(R){Ce.set("rightSideView",i,a.toString())}function T(R){Ce.set("right-side-view-pin",i,v?"pin":"not-pinned")}function I(R){Ce.set("right-side-view-collapse",i,f?"collapsed":"expanded"),S.name==="activities"&&A()}function D(){b(k.find(R=>R.name==="filter")),t(1,f=!1)}it(()=>{const R=Ce.get("rightSideView",i);R&&t(0,a=parseInt(R)||o);let H=Ce.get("right-side-view-collapse",i);!H&&!["detail","edit"].includes(r)||window.innerWidth<=768?t(1,f=!0):t(1,f=H==="collapsed"),t(8,v=Ce.get("right-side-view-pin",i)!=="not-pinned"),["detail","edit"].includes(r)&&c(),m&&t(9,k=[...k,{name:"filter",label:F.translate("filter")}]),d&&t(9,k=[...k,{name:"activities",label:F.translate("Activities")}]);let U=Ce.get("right-side-view-active-item",i);U&&k.map(oe=>oe.name).includes(U)&&b(k.find(oe=>oe.name===U)),S||b(k[0])});const C=R=>b(R);function N(R){f=R,t(1,f)}function P(R){v=R,t(8,v)}function V(R){a=R,t(0,a)}return n.$$set=R=>{"scope"in R&&t(2,l=R.scope),"mode"in R&&t(15,r=R.mode),"minWidth"in R&&t(3,o=R.minWidth),"maxWidth"in R&&t(4,s=R.maxWidth),"currentWidth"in R&&t(0,a=R.currentWidth),"loadSummary"in R&&t(16,c=R.loadSummary),"loadActivities"in R&&t(17,u=R.loadActivities),"isCollapsed"in R&&t(1,f=R.isCollapsed),"hasStream"in R&&t(18,d=R.hasStream),"searchManager"in R&&t(5,p=R.searchManager),"createView"in R&&t(6,h=R.createView),"showFilter"in R&&t(7,m=R.showFilter)},n.$$.update=()=>{n.$$.dirty&32772&&(i=l+r)},[a,f,l,o,s,p,h,m,v,k,S,b,w,T,I,r,c,u,d,D,C,N,P,V]}class $p extends Le{constructor(e){super(),Te(this,e,xp,Kp,Se,{scope:2,mode:15,minWidth:3,maxWidth:4,currentWidth:0,loadSummary:16,loadActivities:17,isCollapsed:1,hasStream:18,searchManager:5,createView:6,showFilter:7,openFilter:19})}get openFilter(){return this.$$.ctx[19]}}function gs(n){let e,t,i,l,r,o,s,a;function c(d,p){return d[0].html?tm:em}let u=c(n),f=u(n);return{c(){e=E("button"),f.c(),g(e,"class",n[1]),g(e,"data-name",t=n[0].name),g(e,"data-action",i=n[0].action||n[0].name),g(e,"data-id",l=n[0].id),g(e,"type","button"),g(e,"title",r=n[0].tooltip),e.disabled=o=n[0].disabled},m(d,p){M(d,e,p),f.m(e,null),s||(a=$(e,"click",n[2]),s=!0)},p(d,p){u===(u=c(d))&&f?f.p(d,p):(f.d(1),f=u(d),f&&(f.c(),f.m(e,null))),p&2&&g(e,"class",d[1]),p&1&&t!==(t=d[0].name)&&g(e,"data-name",t),p&1&&i!==(i=d[0].action||d[0].name)&&g(e,"data-action",i),p&1&&l!==(l=d[0].id)&&g(e,"data-id",l),p&1&&r!==(r=d[0].tooltip)&&g(e,"title",r),p&1&&o!==(o=d[0].disabled)&&(e.disabled=o)},d(d){d&&O(e),f.d(),s=!1,a()}}}function em(n){let e=F.translate(n[0].label)+"",t;return{c(){t=ve(e)},m(i,l){M(i,t,l)},p(i,l){l&1&&e!==(e=F.translate(i[0].label)+"")&&Ne(t,e)},d(i){i&&O(t)}}}function tm(n){let e,t=n[0].html+"",i;return{c(){e=new jt(!1),i=ze(),e.a=i},m(l,r){e.m(t,l,r),M(l,i,r)},p(l,r){r&1&&t!==(t=l[0].html+"")&&e.p(t)},d(l){l&&(O(i),e.d())}}}function nm(n){let e,t=!n[0].hidden&&gs(n);return{c(){t&&t.c(),e=ze()},m(i,l){t&&t.m(i,l),M(i,e,l)},p(i,[l]){i[0].hidden?t&&(t.d(1),t=null):t?t.p(i,l):(t=gs(i),t.c(),t.m(e.parentNode,e))},i:De,o:De,d(i){i&&O(e),t&&t.d(i)}}}function im(n,e,t){const i=hn();let{params:l}=e,{className:r=""}=e;const o=["default","primary","success","warning","danger"];let s;function a(c){const u=c.currentTarget;i("execute",{data:u.dataset,action:u.dataset.action,event:c})}return n.$$set=c=>{"params"in c&&t(0,l=c.params),"className"in c&&t(3,r=c.className)},n.$$.update=()=>{n.$$.dirty&11&&(t(1,s="action btn"),(l.style??"default").split(" ").forEach(c=>{o.includes(c)?t(1,s+=` btn-${c}`):t(1,s+=` ${c}`)}),r&&t(1,s+=` ${r}`))},[l,s,a,r]}class Jt extends Le{constructor(e){super(),Te(this,e,im,nm,Se,{params:0,className:3})}}function lm(n){let e,t;return e=new Jt({props:{params:n[0],className:"btn-favorite"}}),e.$on("execute",n[1]),{c(){be(e.$$.fragment)},m(i,l){he(e,i,l),t=!0},p(i,[l]){const r={};l&1&&(r.params=i[0]),e.$set(r)},i(i){t||(W(e.$$.fragment,i),t=!0)},o(i){j(e.$$.fragment,i),t=!1},d(i){ge(e,i)}}}function rm(n,e,t){let{scope:i}=e,{onFavoriteAdd:l}=e,{onFavoriteRemove:r}=e,{active:o=!1}=e,s,a="default";function c(u){o?r(i):l(i)}return n.$$set=u=>{"scope"in u&&t(2,i=u.scope),"onFavoriteAdd"in u&&t(3,l=u.onFavoriteAdd),"onFavoriteRemove"in u&&t(4,r=u.onFavoriteRemove),"active"in u&&t(5,o=u.active)},n.$$.update=()=>{n.$$.dirty&96&&(t(6,a=o?"primary outline":"default"),t(0,s={action:"favorite",html:'<svg class="icon"><use href="client/img/icons/icons.svg#star"></use></svg>',style:a}))},[s,c,i,l,r,o,a]}class om extends Le{constructor(e){super(),Te(this,e,rm,lm,Se,{scope:2,onFavoriteAdd:3,onFavoriteRemove:4,active:5})}}function am(n){let e=F.translate(n[0].label)+"",t;return{c(){t=ve(e)},m(i,l){M(i,t,l)},p(i,l){l&1&&e!==(e=F.translate(i[0].label)+"")&&Ne(t,e)},d(i){i&&O(t)}}}function sm(n){let e,t=n[0].html+"",i;return{c(){e=new jt(!1),i=ze(),e.a=i},m(l,r){e.m(t,l,r),M(l,i,r)},p(l,r){r&1&&t!==(t=l[0].html+"")&&e.p(t)},d(l){l&&(O(i),e.d())}}}function um(n){let e,t,i,l,r,o,s;function a(f,d){return f[0].html?sm:am}let c=a(n),u=c(n);return{c(){e=E("a"),u.c(),g(e,"href","javascript:"),g(e,"role","button"),g(e,"class",t="action "+n[1]),g(e,"data-action",i=n[0].name||n[0].action),g(e,"data-id",l=n[0].id),g(e,"title",r=n[0].tooltip)},m(f,d){M(f,e,d),u.m(e,null),o||(s=$(e,"click",n[2]),o=!0)},p(f,[d]){c===(c=a(f))&&u?u.p(f,d):(u.d(1),u=c(f),u&&(u.c(),u.m(e,null))),d&2&&t!==(t="action "+f[1])&&g(e,"class",t),d&1&&i!==(i=f[0].name||f[0].action)&&g(e,"data-action",i),d&1&&l!==(l=f[0].id)&&g(e,"data-id",l),d&1&&r!==(r=f[0].tooltip)&&g(e,"title",r)},i:De,o:De,d(f){f&&O(e),u.d(),o=!1,s()}}}function cm(n,e,t){const i=hn();let{params:l}=e,{className:r=""}=e;function o(s){const a=s.target;i("execute",{data:a.dataset,action:a.dataset.action,event:s})}return n.$$set=s=>{"params"in s&&t(0,l=s.params),"className"in s&&t(1,r=s.className)},[l,r,o]}class vs extends Le{constructor(e){super(),Te(this,e,cm,um,Se,{params:0,className:1})}}function bs(n,e,t){const i=n.slice();return i[11]=e[t],i}function _s(n,e,t){const i=n.slice();return i[11]=e[t],i}function ws(n,e,t){const i=n.slice();return i[16]=e[t],i}function ys(n){let e,t;return e=new Jt({props:{params:n[16]}}),e.$on("execute",function(){Tt(n[6])&&n[6].apply(this,arguments)}),{c(){be(e.$$.fragment)},m(i,l){he(e,i,l),t=!0},p(i,l){n=i;const r={};l&1&&(r.params=n[16]),e.$set(r)},i(i){t||(W(e.$$.fragment,i),t=!0)},o(i){j(e.$$.fragment,i),t=!1},d(i){ge(e,i)}}}function fm(n){let e;return{c(){e=E("button"),e.innerHTML='<span class="caret"></span>',g(e,"type","button"),g(e,"class","btn btn-default dropdown-toggle svelte-1ds6xdg"),g(e,"data-toggle","dropdown"),g(e,"aria-haspopup","true")},m(t,i){M(t,e,i)},d(t){t&&O(e)}}}function dm(n){let e,t=F.translate("More")+"",i,l,r,o;return{c(){e=E("button"),i=ve(t),l=q(),r=pn("svg"),o=pn("use"),g(o,"href","client/img/icons/icons.svg#angle-down"),g(r,"class","icon more-arrow svelte-1ds6xdg"),g(e,"type","button"),g(e,"class","btn btn-default dropdown-toggle more-button svelte-1ds6xdg"),g(e,"data-toggle","dropdown"),g(e,"aria-haspopup","true")},m(s,a){M(s,e,a),y(e,i),y(e,l),y(e,r),y(r,o)},d(s){s&&O(e)}}}function ks(n){let e,t,i,l,r,o,s=de(n[1]),a=[];for(let m=0;m<s.length;m+=1)a[m]=Es(_s(n,s,m));const c=m=>j(a[m],1,1,()=>{a[m]=null});let u=n[1]&&(n[2]||n[3])&&Ss(),f=n[3]&&Ds(),d=de(n[2]),p=[];for(let m=0;m<d.length;m+=1)p[m]=As(bs(n,d,m));const h=m=>j(p[m],1,1,()=>{p[m]=null});return{c(){e=E("ul");for(let m=0;m<a.length;m+=1)a[m].c();t=q(),u&&u.c(),i=q(),f&&f.c(),l=q();for(let m=0;m<p.length;m+=1)p[m].c();g(e,"class",r=gt(n[7])+" svelte-1ds6xdg")},m(m,v){M(m,e,v);for(let _=0;_<a.length;_+=1)a[_]&&a[_].m(e,null);y(e,t),u&&u.m(e,null),y(e,i),f&&f.m(e,null),y(e,l);for(let _=0;_<p.length;_+=1)p[_]&&p[_].m(e,null);o=!0},p(m,v){if(v&66){s=de(m[1]);let _;for(_=0;_<s.length;_+=1){const k=_s(m,s,_);a[_]?(a[_].p(k,v),W(a[_],1)):(a[_]=Es(k),a[_].c(),W(a[_],1),a[_].m(e,t))}for(We(),_=s.length;_<a.length;_+=1)c(_);je()}if(m[1]&&(m[2]||m[3])?u||(u=Ss(),u.c(),u.m(e,i)):u&&(u.d(1),u=null),m[3]?f?v&8&&W(f,1):(f=Ds(),f.c(),W(f,1),f.m(e,l)):f&&(We(),j(f,1,1,()=>{f=null}),je()),v&68){d=de(m[2]);let _;for(_=0;_<d.length;_+=1){const k=bs(m,d,_);p[_]?(p[_].p(k,v),W(p[_],1)):(p[_]=As(k),p[_].c(),W(p[_],1),p[_].m(e,null))}for(We(),_=d.length;_<p.length;_+=1)h(_);je()}(!o||v&128&&r!==(r=gt(m[7])+" svelte-1ds6xdg"))&&g(e,"class",r)},i(m){if(!o){for(let v=0;v<s.length;v+=1)W(a[v]);W(f);for(let v=0;v<d.length;v+=1)W(p[v]);o=!0}},o(m){a=a.filter(Boolean);for(let v=0;v<a.length;v+=1)j(a[v]);j(f),p=p.filter(Boolean);for(let v=0;v<p.length;v+=1)j(p[v]);o=!1},d(m){m&&O(e),et(a,m),u&&u.d(),f&&f.d(),et(p,m)}}}function Es(n){let e,t,i;return t=new vs({props:{params:n[11]}}),t.$on("execute",function(){Tt(n[6])&&n[6].apply(this,arguments)}),{c(){e=E("li"),be(t.$$.fragment)},m(l,r){M(l,e,r),he(t,e,null),i=!0},p(l,r){n=l;const o={};r&2&&(o.params=n[11]),t.$set(o)},i(l){i||(W(t.$$.fragment,l),i=!0)},o(l){j(t.$$.fragment,l),i=!1},d(l){l&&O(e),ge(t)}}}function Ss(n){let e;return{c(){e=E("li"),g(e,"class","divider")},m(t,i){M(t,e,i)},d(t){t&&O(e)}}}function Ds(n){let e,t,i,l;return i=new ul({props:{heightPx:12}}),{c(){e=E("li"),t=E("a"),be(i.$$.fragment),g(t,"href","javascript:"),g(e,"class","preloader")},m(r,o){M(r,e,o),y(e,t),he(i,t,null),l=!0},i(r){l||(W(i.$$.fragment,r),l=!0)},o(r){j(i.$$.fragment,r),l=!1},d(r){r&&O(e),ge(i)}}}function As(n){let e,t,i,l;return t=new vs({props:{params:n[11]}}),t.$on("execute",function(){Tt(n[6])&&n[6].apply(this,arguments)}),{c(){e=E("li"),be(t.$$.fragment),i=q(),g(e,"class","dynamic-action")},m(r,o){M(r,e,o),he(t,e,null),y(e,i),l=!0},p(r,o){n=r;const s={};o&4&&(s.params=n[11]),t.$set(s)},i(r){l||(W(t.$$.fragment,r),l=!0)},o(r){j(t.$$.fragment,r),l=!1},d(r){r&&O(e),ge(t)}}}function pm(n){let e,t,i,l,r,o,s=de(n[0]),a=[];for(let v=0;v<s.length;v+=1)a[v]=ys(ws(n,s,v));const c=v=>j(a[v],1,1,()=>{a[v]=null});function u(v,_){if(v[4]&&(v[1].length>0||v[2].length>0))return dm;if(v[1].length>0||v[2].length>0)return fm}let f=u(n),d=f&&f(n),p=(n[1].length>0||n[2].length>0)&&ks(n);const h=n[10].default,m=ii(h,n,n[9],null);return{c(){e=E("div");for(let v=0;v<a.length;v+=1)a[v].c();t=q(),d&&d.c(),i=q(),p&&p.c(),l=q(),m&&m.c(),g(e,"class",r="btn-group "+n[5]+" svelte-1ds6xdg")},m(v,_){M(v,e,_);for(let k=0;k<a.length;k+=1)a[k]&&a[k].m(e,null);y(e,t),d&&d.m(e,null),y(e,i),p&&p.m(e,null),y(e,l),m&&m.m(e,null),o=!0},p(v,[_]){if(_&65){s=de(v[0]);let k;for(k=0;k<s.length;k+=1){const S=ws(v,s,k);a[k]?(a[k].p(S,_),W(a[k],1)):(a[k]=ys(S),a[k].c(),W(a[k],1),a[k].m(e,t))}for(We(),k=s.length;k<a.length;k+=1)c(k);je()}f!==(f=u(v))&&(d&&d.d(1),d=f&&f(v),d&&(d.c(),d.m(e,i))),v[1].length>0||v[2].length>0?p?(p.p(v,_),_&6&&W(p,1)):(p=ks(v),p.c(),W(p,1),p.m(e,l)):p&&(We(),j(p,1,1,()=>{p=null}),je()),m&&m.p&&(!o||_&512)&&ri(m,h,v,v[9],o?li(h,v[9],_,null):oi(v[9]),null),(!o||_&32&&r!==(r="btn-group "+v[5]+" svelte-1ds6xdg"))&&g(e,"class",r)},i(v){if(!o){for(let _=0;_<s.length;_+=1)W(a[_]);W(p),W(m,v),o=!0}},o(v){a=a.filter(Boolean);for(let _=0;_<a.length;_+=1)j(a[_]);j(p),j(m,v),o=!1},d(v){v&&O(e),et(a,v),d&&d.d(),p&&p.d(),m&&m.d(v)}}}function mm(n,e,t){let{$$slots:i={},$$scope:l}=e,{actions:r=[]}=e,{dropdownActions:o=[]}=e,{dynamicActionsDropdown:s=[]}=e,{loadingActions:a=!1}=e,{hasMoreButton:c=!1}=e,{dropdownPosition:u="left"}=e,{className:f=""}=e,{executeAction:d=()=>{}}=e,p;return n.$$set=h=>{"actions"in h&&t(0,r=h.actions),"dropdownActions"in h&&t(1,o=h.dropdownActions),"dynamicActionsDropdown"in h&&t(2,s=h.dynamicActionsDropdown),"loadingActions"in h&&t(3,a=h.loadingActions),"hasMoreButton"in h&&t(4,c=h.hasMoreButton),"dropdownPosition"in h&&t(8,u=h.dropdownPosition),"className"in h&&t(5,f=h.className),"executeAction"in h&&t(6,d=h.executeAction),"$$scope"in h&&t(9,l=h.$$scope)},n.$$.update=()=>{n.$$.dirty&384&&(t(7,p="dropdown-menu"),u==="right"&&t(7,p+=" dropdown-menu-right"))},[r,o,s,a,c,f,d,p,u,l,i]}class Cs extends Le{constructor(e){super(),Te(this,e,mm,pm,Se,{actions:0,dropdownActions:1,dynamicActionsDropdown:2,loadingActions:3,hasMoreButton:4,dropdownPosition:8,className:5,executeAction:6})}}function Ts(n,e,t){const i=n.slice();return i[7]=e[t],i}function Ls(n){let e,t=de(n[1]),i=[];for(let l=0;l<t.length;l+=1)i[l]=Is(Ts(n,t,l));return{c(){e=E("div");for(let l=0;l<i.length;l+=1)i[l].c();g(e,"class","btn-group view-mode-switch")},m(l,r){M(l,e,r);for(let o=0;o<i.length;o+=1)i[o]&&i[o].m(e,null)},p(l,r){if(r&7){t=de(l[1]);let o;for(o=0;o<t.length;o+=1){const s=Ts(l,t,o);i[o]?i[o].p(s,r):(i[o]=Is(s),i[o].c(),i[o].m(e,null))}for(;o<i.length;o+=1)i[o].d(1);i.length=t.length}},d(l){l&&O(e),et(i,l)}}}function Is(n){let e,t,i=n[7].icon+"",l,r,o,s,a;return{c(){e=E("a"),t=new jt(!1),l=q(),t.a=l,g(e,"role","button"),g(e,"href",r=n[7].link),g(e,"class","btn action svelte-likomh"),g(e,"data-name",o=n[7].name),g(e,"data-action","List"),me(e,"btn-default",n[7].name!==n[0]),me(e,"btn-primary",n[7].name===n[0])},m(c,u){M(c,e,u),t.m(i,e),y(e,l),s||(a=$(e,"click",n[2]),s=!0)},p(c,u){u&2&&i!==(i=c[7].icon+"")&&t.p(i),u&2&&r!==(r=c[7].link)&&g(e,"href",r),u&2&&o!==(o=c[7].name)&&g(e,"data-name",o),u&3&&me(e,"btn-default",c[7].name!==c[0]),u&3&&me(e,"btn-primary",c[7].name===c[0])},d(c){c&&O(e),s=!1,a()}}}function hm(n){let e,t=n[1].length>1&&Ls(n);return{c(){t&&t.c(),e=ze()},m(i,l){t&&t.m(i,l),M(i,e,l)},p(i,[l]){i[1].length>1?t?t.p(i,l):(t=Ls(i),t.c(),t.m(e.parentNode,e)):t&&(t.d(1),t=null)},i:De,o:De,d(i){i&&O(e),t&&t.d(i)}}}function gm(n,e,t){const i=hn(),l={list:'<svg class="icon"><use href="client/img/icons/icons.svg#th-list"></use></svg>',plate:'<svg class="icon"><use href="client/img/icons/icons.svg#plate"></use></svg>',kanban:'<svg class="icon"><use href="client/img/icons/icons.svg#kanban"></use></svg>',tree:'<svg class="icon"><use href="client/img/icons/icons.svg#stream"></use></svg>'};let{modes:r=null}=e,{mode:o="list"}=e,{scope:s}=e,a;function c(u){const f=u.currentTarget;f.dataset.name&&f.dataset.name!==o&&i("view-change",{name:f.dataset.name})}return it(()=>{if(r!==null)return;const u=ae.get(["clientDefs",s,"listViewModeList"])||["list"];ae.get(["clientDefs",s,"plateViewMode"])&&u.push("plate"),ae.get(["clientDefs",s,"kanbanViewMode"])&&u.push("kanban"),t(3,r=u)}),n.$$set=u=>{"modes"in u&&t(3,r=u.modes),"mode"in u&&t(0,o=u.mode),"scope"in u&&t(4,s=u.scope)},n.$$.update=()=>{n.$$.dirty&25&&t(1,a=(r||[o]).filter((u,f,d)=>l[u]&&d.indexOf(u)===f).map(u=>(l[u]||(u="list"),{name:u,link:`#${s}/${u}`,icon:l[u]})))},[o,a,c,r,s]}class vm extends Le{constructor(e){super(),Te(this,e,gm,hm,Se,{modes:3,mode:0,scope:4})}}function Os(n){let e,t,i;return t=new om({props:{active:n[0],onFavoriteAdd:n[3].onAddFavorite,onFavoriteRemove:n[3].onRemoveFavorite,scope:n[1]}}),{c(){e=E("div"),be(t.$$.fragment),g(e,"class","entity-buttons svelte-22sfhv")},m(l,r){M(l,e,r),he(t,e,null),i=!0},p(l,r){const o={};r&1&&(o.active=l[0]),r&8&&(o.onFavoriteAdd=l[3].onAddFavorite),r&8&&(o.onFavoriteRemove=l[3].onRemoveFavorite),r&2&&(o.scope=l[1]),t.$set(o)},i(l){i||(W(t.$$.fragment,l),i=!0)},o(l){j(t.$$.fragment,l),i=!1},d(l){l&&O(e),ge(t)}}}function bm(n){let e,t,i,l,r,o,s;t=new Cs({props:{actions:n[5],dropdownActions:n[6],className:"entity-actions",hasMoreButton:!0,dropdownPosition:"right"}});let a=n[7]&&Os(n);return o=new vm({props:{mode:n[2],scope:n[1]}}),o.$on("view-change",function(){Tt(n[4])&&n[4].apply(this,arguments)}),{c(){e=E("div"),be(t.$$.fragment),i=q(),l=E("div"),a&&a.c(),r=q(),be(o.$$.fragment),g(l,"class","right-group svelte-22sfhv"),g(e,"class","buttons-container svelte-22sfhv")},m(c,u){M(c,e,u),he(t,e,null),y(e,i),y(e,l),a&&a.m(l,null),y(l,r),he(o,l,null),s=!0},p(c,[u]){n=c;const f={};u&32&&(f.actions=n[5]),u&64&&(f.dropdownActions=n[6]),t.$set(f),n[7]?a?(a.p(n,u),u&128&&W(a,1)):(a=Os(n),a.c(),W(a,1),a.m(l,r)):a&&(We(),j(a,1,1,()=>{a=null}),je());const d={};u&4&&(d.mode=n[2]),u&2&&(d.scope=n[1]),o.$set(d)},i(c){s||(W(t.$$.fragment,c),W(a),W(o.$$.fragment,c),s=!0)},o(c){j(t.$$.fragment,c),j(a),j(o.$$.fragment,c),s=!1},d(c){c&&O(e),ge(t),a&&a.d(),ge(o)}}}function _m(n,e,t){let{scope:i}=e,{viewMode:l}=e,{isFavoriteEntity:r=!1}=e,{entityActions:o}=e,{callbacks:s}=e,{onViewChange:a}=e,c,u,f=[],d=[],p=!1;window.addEventListener("favorites:update",m=>{const v=m.detail||[];t(0,r=v.includes(i))});function h(){const m=new Map,v=new Map;(ae.get(["clientDefs",i,"dynamicEntityActions"])||[]).forEach(_=>{s.canRunAction(_.acl.scope,_.acl.action)&&(_.display==="dropdown"&&!v.has(_.id)&&v.set(_.id,{label:_.name,action:"dynamicEntityAction",id:_.id}),_.display==="single"&&!m.has(_.id)&&m.set(_.id,{label:_.name,action:"dynamicEntityAction",id:_.id}))}),t(9,f=Array.from(m.values())),t(10,d=Array.from(v.values()))}return it(()=>{t(7,p=ae.get(["scopes",i,"tab"])),h()}),n.$$set=m=>{"scope"in m&&t(1,i=m.scope),"viewMode"in m&&t(2,l=m.viewMode),"isFavoriteEntity"in m&&t(0,r=m.isFavoriteEntity),"entityActions"in m&&t(8,o=m.entityActions),"callbacks"in m&&t(3,s=m.callbacks),"onViewChange"in m&&t(4,a=m.onViewChange)},n.$$.update=()=>{n.$$.dirty&1792&&(t(5,c=[...o.buttons??[],...f]),t(6,u=[...o.dropdownButtons??[],...d]))},[r,i,l,s,a,c,u,p,o,f,d]}class wm extends Le{constructor(e){super(),Te(this,e,_m,bm,Se,{scope:1,viewMode:2,isFavoriteEntity:0,entityActions:8,callbacks:3,onViewChange:4})}}function Ps(n,e,t){const i=n.slice();return i[6]=e[t],i[8]=t,i}function Ms(n){let e,t;return e=new ul({props:{heightPx:10}}),{c(){be(e.$$.fragment)},m(i,l){he(e,i,l),t=!0},i(i){t||(W(e.$$.fragment,i),t=!0)},o(i){j(e.$$.fragment,i),t=!1},d(i){ge(e,i)}}}function Ns(n){let e,t=de(n[1]),i=[];for(let l=0;l<t.length;l+=1)i[l]=Fs(Ps(n,t,l));return{c(){e=E("ul");for(let l=0;l<i.length;l+=1)i[l].c();g(e,"class","svelte-nuyn3")},m(l,r){M(l,e,r);for(let o=0;o<i.length;o+=1)i[o]&&i[o].m(e,null)},p(l,r){if(r&3){t=de(l[1]);let o;for(o=0;o<t.length;o+=1){const s=Ps(l,t,o);i[o]?i[o].p(s,r):(i[o]=Fs(s),i[o].c(),i[o].m(e,null))}for(;o<i.length;o+=1)i[o].d(1);i.length=t.length}},d(l){l&&O(e),et(i,l)}}}function ym(n){let e,t,i=n[6].label+"",l;return{c(){e=E("li"),t=E("span"),l=ve(i),g(e,"class","svelte-nuyn3")},m(r,o){M(r,e,o),y(e,t),y(t,l)},p(r,o){o&2&&i!==(i=r[6].label+"")&&Ne(l,i)},d(r){r&&O(e)}}}function km(n){let e,t,i=n[6].label+"",l;return{c(){e=E("li"),t=E("h3"),l=ve(i),g(t,"class","header-title svelte-nuyn3"),g(e,"class","full-width svelte-nuyn3")},m(r,o){M(r,e,o),y(e,t),y(t,l)},p(r,o){o&2&&i!==(i=r[6].label+"")&&Ne(l,i)},d(r){r&&O(e)}}}function Em(n){let e,t,i=n[6].label+"",l,r;return{c(){e=E("li"),t=E("a"),l=ve(i),g(t,"href",r=n[6].link),g(t,"class","svelte-nuyn3"),g(e,"class","svelte-nuyn3")},m(o,s){M(o,e,s),y(e,t),y(t,l)},p(o,s){s&2&&i!==(i=o[6].label+"")&&Ne(l,i),s&2&&r!==(r=o[6].link)&&g(t,"href",r)},d(o){o&&O(e)}}}function Fs(n){let e;function t(r,o){return r[8]!==r[1].length-1?Em:r[0]?km:ym}let i=t(n),l=i(n);return{c(){l.c(),e=ze()},m(r,o){l.m(r,o),M(r,e,o)},p(r,o){i===(i=t(r))&&l?l.p(r,o):(l.d(1),l=i(r),l&&(l.c(),l.m(e.parentNode,e)))},d(r){r&&O(e),l.d(r)}}}function Sm(n){let e,t,i,l=n[2]&&Ms(),r=n[1].length>0&&Ns(n);return{c(){e=E("nav"),l&&l.c(),t=q(),r&&r.c(),g(e,"class","entity-history svelte-nuyn3")},m(o,s){M(o,e,s),l&&l.m(e,null),y(e,t),r&&r.m(e,null),i=!0},p(o,[s]){o[2]?l?s&4&&W(l,1):(l=Ms(),l.c(),W(l,1),l.m(e,t)):l&&(We(),j(l,1,1,()=>{l=null}),je()),o[1].length>0?r?r.p(o,s):(r=Ns(o),r.c(),r.m(e,null)):r&&(r.d(1),r=null)},i(o){i||(W(l),i=!0)},o(o){j(l),i=!1},d(o){o&&O(e),l&&l.d(),r&&r.d()}}}function Dm(n,e,t){let{scope:i}=e,{currentIsHeading:l=!0}=e,r,o=[],s=!1;async function a(){let c=st.get();if(!c)return[];t(4,o=[]);try{let u="/api/v1/LastViewed/action/getLastEntities";const f=new URLSearchParams({maxSize:"3",entity:i}).toString();f&&(u+=`?${f}`);const d=await fetch(u,{method:"GET",headers:{"Content-Type":"application/json","Authorization-Token":btoa(c.user.userName+":"+c.token)}});if(!d.ok)throw new Error("Network response was not ok");return await d.json()}catch(u){return console.error("Error:",u),[]}}return it(()=>{t(2,s=!0),a().then(c=>{t(4,o=c)}).catch(c=>{console.error("Error: ",c)}).finally(()=>t(2,s=!1))}),n.$$set=c=>{"scope"in c&&t(3,i=c.scope),"currentIsHeading"in c&&t(0,l=c.currentIsHeading)},n.$$.update=()=>{n.$$.dirty&24&&t(1,r=o.reverse().map(c=>({name:c,label:F.translate(c,"scopeNamesPlural"),link:`#${c}`})).concat({name:i,label:F.translate(i,"scopeNamesPlural"),link:`#${i}`}))},[l,r,s,i,o]}class Am extends Le{constructor(e){super(),Te(this,e,Dm,Sm,Se,{scope:3,currentIsHeading:0})}}function Cm(n){let e,t,i,l;return e=new wm({props:{viewMode:n[0],scope:n[1].scope,entityActions:n[2],onViewChange:n[5],callbacks:n[3],isFavoriteEntity:n[4]}}),{c(){be(e.$$.fragment),t=q(),i=E("div"),g(i,"class","search-container")},m(r,o){he(e,r,o),M(r,t,o),M(r,i,o),l=!0},p(r,o){const s={};o&1&&(s.viewMode=r[0]),o&2&&(s.scope=r[1].scope),o&4&&(s.entityActions=r[2]),o&8&&(s.callbacks=r[3]),o&16&&(s.isFavoriteEntity=r[4]),e.$set(s)},i(r){l||(W(e.$$.fragment,r),l=!0)},o(r){j(e.$$.fragment,r),l=!1},d(r){r&&(O(t),O(i)),ge(e,r)}}}function Tm(n){let e,t,i,l;return e=new Am({props:{scope:n[1].scope}}),i=new al({props:{$$slots:{default:[Cm]},$$scope:{ctx:n}}}),{c(){be(e.$$.fragment),t=q(),be(i.$$.fragment)},m(r,o){he(e,r,o),M(r,t,o),he(i,r,o),l=!0},p(r,[o]){const s={};o&2&&(s.scope=r[1].scope),e.$set(s);const a={};o&159&&(a.$$scope={dirty:o,ctx:r}),i.$set(a)},i(r){l||(W(e.$$.fragment,r),W(i.$$.fragment,r),l=!0)},o(r){j(e.$$.fragment,r),j(i.$$.fragment,r),l=!1},d(r){r&&O(t),ge(e,r),ge(i,r)}}}function Lm(n,e,t){let{params:i}=e,{entityActions:l}=e,{callbacks:r}=e,{viewMode:o="list"}=e,{isFavoriteEntity:s=!1}=e,{onViewModeChange:a=u=>{}}=e;function c(u){t(0,o=u.detail.name),a(u.detail.name)}return it(()=>{i.afterOnMount&&i.afterOnMount()}),mn(()=>{i.afterOnDestroy&&i.afterOnDestroy()}),n.$$set=u=>{"params"in u&&t(1,i=u.params),"entityActions"in u&&t(2,l=u.entityActions),"callbacks"in u&&t(3,r=u.callbacks),"viewMode"in u&&t(0,o=u.viewMode),"isFavoriteEntity"in u&&t(4,s=u.isFavoriteEntity),"onViewModeChange"in u&&t(6,a=u.onViewModeChange)},[o,i,l,r,s,c,a]}class Im extends Le{constructor(e){super(),Te(this,e,Lm,Tm,Se,{params:1,entityActions:2,callbacks:3,viewMode:0,isFavoriteEntity:4,onViewModeChange:6})}}function Bs(n,e,t){const i=n.slice();return i[36]=e[t],i}function Rs(n){let e,t,i,l,r=de(n[0]),o=[];for(let s=0;s<r.length;s+=1)o[s]=Hs(Bs(n,r,s));return{c(){e=E("div"),t=E("ul");for(let s=0;s<o.length;s+=1)o[s].c();g(t,"class","nav-pills svelte-ud8o6q"),g(e,"class","items-container svelte-ud8o6q"),me(e,"has-left-scroll",n[5]),me(e,"has-right-scroll",n[4])},m(s,a){M(s,e,a),y(e,t);for(let c=0;c<o.length;c+=1)o[c]&&o[c].m(t,null);n[20](t),n[21](e),i||(l=[$(e,"mousedown",n[6]),$(e,"mousemove",n[7]),$(e,"mouseup",n[8]),$(e,"mouseleave",n[8]),$(e,"touchstart",n[9]),$(e,"touchmove",n[10]),$(e,"touchend",n[11],{passive:!0}),$(e,"wheel",n[12])],i=!0)},p(s,a){if(a[0]&8193){r=de(s[0]);let c;for(c=0;c<r.length;c+=1){const u=Bs(s,r,c);o[c]?o[c].p(u,a):(o[c]=Hs(u),o[c].c(),o[c].m(t,null))}for(;c<o.length;c+=1)o[c].d(1);o.length=r.length}a[0]&32&&me(e,"has-left-scroll",s[5]),a[0]&16&&me(e,"has-right-scroll",s[4])},d(s){s&&O(e),et(o,s),n[20](null),n[21](null),i=!1,nt(l)}}}function Hs(n){let e,t,i=(n[36].title??n[36].name)+"",l,r,o,s;return{c(){e=E("li"),t=E("a"),l=ve(i),g(t,"href","javascript:"),g(t,"data-name",r=n[36].name),g(t,"class","svelte-ud8o6q"),g(e,"class","item svelte-ud8o6q")},m(a,c){M(a,e,c),y(e,t),y(t,l),o||(s=$(t,"click",n[13]),o=!0)},p(a,c){c[0]&1&&i!==(i=(a[36].title??a[36].name)+"")&&Ne(l,i),c[0]&1&&r!==(r=a[36].name)&&g(t,"data-name",r)},d(a){a&&O(e),o=!1,s()}}}function qs(n){let e;return{c(){e=E("div"),g(e,"class","layout-editor-container svelte-ud8o6q")},m(t,i){M(t,e,i)},d(t){t&&O(e)}}}function Om(n){let e,t,i=n[0]&&Rs(n),l=n[1]&&qs();return{c(){e=E("div"),i&&i.c(),t=q(),l&&l.c(),g(e,"class","panel-navigation svelte-ud8o6q")},m(r,o){M(r,e,o),i&&i.m(e,null),y(e,t),l&&l.m(e,null)},p(r,o){r[0]?i?i.p(r,o):(i=Rs(r),i.c(),i.m(e,t)):i&&(i.d(1),i=null),r[1]?l||(l=qs(),l.c(),l.m(e,null)):l&&(l.d(1),l=null)},i:De,o:De,d(r){r&&O(e),i&&i.d(),l&&l.d()}}}const Ws=5;function Wn(n,e,t){return Math.min(Math.max(n,e),t)}function Pm(n,e,t){let i,l,r,{items:o}=e,{scrollCallback:s=(Y,x)=>{}}=e,{hasLayoutEditor:a=!1}=e,c,u,f=!1,d=!1,p=0,h=0,m=0,v=0,_=0,k=0,S=null,b=0,A=0,w=0;async function T(){await gn(),t(16,b=c.clientWidth),t(17,A=u.scrollWidth),t(18,w=b-A),w>0&&t(18,w=0),t(15,m=Wn(m,w,0)),t(3,u.style.transform=`translateX(${m}px)`,u),v=m}function I(Y){const x=Y.offsetLeft,ie=Y.offsetWidth,se=-m,we=se+b;let Ee=m;x<se?Ee=-x:x+ie>we&&(Ee=-(x+ie-b)),Ee=Wn(Ee,w,0),t(15,m=Ee),v=m,t(3,u.style.transform=`translateX(${m}px)`,u)}function D(Y){f=!0,d=!1,p=Y.pageX,h=p,_=performance.now(),U()}function C(Y){if(!f)return;const x=Y.pageX,ie=x-h,se=performance.now(),we=se-_;k=ie/we,Math.abs(x-p)>Ws&&(d=!0),t(15,m=Wn(v+(x-p),w,0)),t(3,u.style.transform=`translateX(${m}px)`,u),h=x,_=se}function N(){f&&(f=!1,v=m,H(),setTimeout(()=>d=!1,0))}function P(Y){f=!0,d=!1,p=Y.touches[0].pageX,h=p,_=performance.now(),U()}function V(Y){if(!f)return;const x=Y.touches[0].pageX,ie=x-h,se=performance.now(),we=se-_;k=ie/we,Math.abs(x-p)>Ws&&(d=!0),t(15,m=Wn(v+(x-p),w,0)),t(3,u.style.transform=`translateX(${m}px)`,u),h=x,_=se}function R(){f&&(f=!1,v=m,H(),setTimeout(()=>d=!1,0))}function H(){function x(){k*=.95,Math.abs(k)>.02?(t(15,m=Wn(m+k*16,w,0)),t(3,u.style.transform=`translateX(${m}px)`,u),S=requestAnimationFrame(x)):U(),v=m}S=requestAnimationFrame(x)}function U(){S!==null&&(cancelAnimationFrame(S),S=null)}function oe(Y){Y.shiftKey&&(Y.preventDefault(),t(15,m=Wn(m-Y.deltaY,w,0)),t(3,u.style.transform=`translateX(${m}px)`,u),v=m)}let te,Oe;it(()=>{T(),Oe=new ResizeObserver(()=>{T()}),te=new MutationObserver(()=>{T()}),te.observe(c,{childList:!0,subtree:!0}),Oe.observe(c)}),mn(()=>{te&&te.disconnect(),Oe&&Oe.disconnect()});function Ve(Y){if(Y.preventDefault(),d){Y.stopPropagation();return}const x=Y.currentTarget,ie=x.closest("li");ie&&I(ie),x.dataset.name&&s(x.dataset.name,Y)}function Je(Y){qe[Y?"unshift":"push"](()=>{u=Y,t(3,u)})}function J(Y){qe[Y?"unshift":"push"](()=>{c=Y,t(2,c)})}return n.$$set=Y=>{"items"in Y&&t(0,o=Y.items),"scrollCallback"in Y&&t(14,s=Y.scrollCallback),"hasLayoutEditor"in Y&&t(1,a=Y.hasLayoutEditor)},n.$$.update=()=>{n.$$.dirty[0]&196608&&t(19,i=A>b),n.$$.dirty[0]&557056&&t(5,l=i&&m<0),n.$$.dirty[0]&819200&&t(4,r=i&&m>w)},[o,a,c,u,r,l,D,C,N,P,V,R,oe,Ve,s,m,b,A,w,i,Je,J]}class Mm extends Le{constructor(e){super(),Te(this,e,Pm,Om,Se,{items:0,scrollCallback:14,hasLayoutEditor:1},null,[-1,-1])}}function Nm(n){let e,t;return e=new Jt({props:{params:n[1]}}),e.$on("execute",function(){Tt(n[0])&&n[0].apply(this,arguments)}),{c(){be(e.$$.fragment)},m(i,l){he(e,i,l),t=!0},p(i,[l]){n=i;const r={};l&2&&(r.params=n[1]),e.$set(r)},i(i){t||(W(e.$$.fragment,i),t=!0)},o(i){j(e.$$.fragment,i),t=!1},d(i){ge(e,i)}}}function Fm(n,e,t){let{filterApplied:i=!1}=e,{onExecute:l}=e,r,o;return n.$$set=s=>{"filterApplied"in s&&t(2,i=s.filterApplied),"onExecute"in s&&t(0,l=s.onExecute)},n.$$.update=()=>{n.$$.dirty&12&&(t(3,r=i?"danger":"default"),t(1,o={action:"openOverviewFilter",html:'<svg class="icon"><use href="client/img/icons/icons.svg#filter"></use></svg>',style:r,tooltip:F.translate("actionOpenFilter")}))},[l,o,i,r]}class Bm extends Le{constructor(e){super(),Te(this,e,Fm,Nm,Se,{filterApplied:2,onExecute:0})}}function Rm(n){let e,t;return e=new Jt({props:{params:n[0]}}),e.$on("execute",n[1]),{c(){be(e.$$.fragment)},m(i,l){he(e,i,l),t=!0},p(i,[l]){const r={};l&1&&(r.params=i[0]),e.$set(r)},i(i){t||(W(e.$$.fragment,i),t=!0)},o(i){j(e.$$.fragment,i),t=!1},d(i){ge(e,i)}}}function Hm(n,e,t){let{entity:i}=e,{id:l}=e,{bookmarkId:r=null}=e,{loading:o=!1}=e,s,a;async function c(){const d=st.get();if(d){Be.notify(F.translate("Bookmarking")+"..."),t(3,o=!0);try{const p=await fetch("/api/v1/Bookmark",{method:"POST",headers:{"Content-Type":"application/json","Authorization-Token":btoa(d.user.userName+":"+d.token)},body:JSON.stringify({entityType:i,entityId:l})});if(p.ok){const h=await p.json();t(2,r=h.id),Be.notify(F.translate("Done"),"success")}}catch(p){console.error("Error on adding bookmark",p)}finally{t(3,o=!1)}}}async function u(){const d=st.get();if(!(!d||!r)){Be.notify(F.translate("Unbookmarking")+"..."),t(3,o=!0);try{(await fetch("/api/v1/Bookmark/"+r,{method:"DELETE",headers:{"Authorization-Token":btoa(d.user.userName+":"+d.token),permanently:"true"}})).ok&&(t(2,r=null),Be.notify(F.translate("Done"),"success"))}catch(p){console.error("Error on removing bookmark",p)}finally{t(3,o=!1)}}}function f(d){a.action==="unbookmark"?u():c()}return n.$$set=d=>{"entity"in d&&t(4,i=d.entity),"id"in d&&t(5,l=d.id),"bookmarkId"in d&&t(2,r=d.bookmarkId),"loading"in d&&t(3,o=d.loading)},n.$$.update=()=>{n.$$.dirty&76&&(t(6,s=r?"primary outline":"default"),t(0,a={name:"bookmarking",action:r?"unbookmark":"bookmark",html:'<svg class="icon"><use href="client/img/icons/icons.svg#bookmark"></use></svg>',style:s,disabled:o,tooltip:F.translate(r?"actionUnbookmark":"actionBookmark")}))},[a,f,r,o,i,l,s]}class qm extends Le{constructor(e){super(),Te(this,e,Hm,Rm,Se,{entity:4,id:5,bookmarkId:2,loading:3})}}function Wm(n){let e,t;return e=new Jt({props:{params:n[0]}}),e.$on("execute",n[1]),{c(){be(e.$$.fragment)},m(i,l){he(e,i,l),t=!0},p(i,[l]){const r={};l&1&&(r.params=i[0]),e.$set(r)},i(i){t||(W(e.$$.fragment,i),t=!0)},o(i){j(e.$$.fragment,i),t=!1},d(i){ge(e,i)}}}function jm(n,e,t){let{entity:i}=e,{id:l}=e,{followers:r}=e,{onFollow:o}=e,{onUnfollow:s}=e,a=!1,c,u,f;async function d(){const m=st.get();if(m)try{t(7,a=!0);const v=await fetch(`/api/v1/${i}/${l}/subscription`,{method:"DELETE",headers:{"Authorization-Token":btoa(m.user.userName+":"+m.token)}});v.ok?(delete r[m.user.id],s()):console.error("Error on unfollowing record",v)}catch(v){console.error("Error on unfollowing record",v)}finally{t(7,a=!1)}}async function p(){const m=st.get();if(m){try{const v=await fetch(`/api/v1/${i}/${l}/subscription`,{method:"PUT",headers:{"Authorization-Token":btoa(m.user.userName+":"+m.token)}});v.ok?(t(2,r[m.user.id]=m.user.name,r),s()):console.error("Error on following record",v)}catch(v){console.error("Error on following record",v)}finally{t(7,a=!1)}o()}}function h(m){f.action==="unfollow"?d():p()}return n.$$set=m=>{"entity"in m&&t(3,i=m.entity),"id"in m&&t(4,l=m.id),"followers"in m&&t(2,r=m.followers),"onFollow"in m&&t(5,o=m.onFollow),"onUnfollow"in m&&t(6,s=m.onUnfollow)},n.$$.update=()=>{var m;if(n.$$.dirty&900){const v=((m=st.get())==null?void 0:m.user.id)??null;t(8,c=v?!!r[v]:!1),t(9,u=c?"primary outline":"default"),t(0,f={name:"following",action:c?"unfollow":"follow",html:'<svg class="icon bell"><use href="client/img/icons/icons.svg#bell"></use></svg>',style:u,disabled:a,tooltip:F.translate(c?"actionUnfollow":"actionFollow")})}},[f,h,r,i,l,o,s,a,c,u]}class zm extends Le{constructor(e){super(),Te(this,e,jm,Wm,Se,{entity:3,id:4,followers:2,onFollow:5,onUnfollow:6})}}function js(n,e,t){const i=n.slice();return i[6]=e[t],i}function zs(n){let e,t;return e=new Jt({props:{params:n[6]}}),e.$on("execute",n[1]),{c(){be(e.$$.fragment)},m(i,l){he(e,i,l),t=!0},p(i,l){const r={};l&1&&(r.params=i[6]),e.$set(r)},i(i){t||(W(e.$$.fragment,i),t=!0)},o(i){j(e.$$.fragment,i),t=!1},d(i){ge(e,i)}}}function Gm(n){let e,t,i=de(n[0]),l=[];for(let o=0;o<i.length;o+=1)l[o]=zs(js(n,i,o));const r=o=>j(l[o],1,1,()=>{l[o]=null});return{c(){e=E("div");for(let o=0;o<l.length;o+=1)l[o].c();g(e,"class","btn-group")},m(o,s){M(o,e,s);for(let a=0;a<l.length;a+=1)l[a]&&l[a].m(e,null);t=!0},p(o,[s]){if(s&3){i=de(o[0]);let a;for(a=0;a<i.length;a+=1){const c=js(o,i,a);l[a]?(l[a].p(c,s),W(l[a],1)):(l[a]=zs(c),l[a].c(),W(l[a],1),l[a].m(e,null))}for(We(),a=i.length;a<l.length;a+=1)r(a);je()}},i(o){if(!t){for(let s=0;s<i.length;s+=1)W(l[s]);t=!0}},o(o){l=l.filter(Boolean);for(let s=0;s<l.length;s+=1)j(l[s]);t=!1},d(o){o&&O(e),et(l,o)}}}function Vm(n,e,t){let{hasPrevious:i=!1}=e,{hasNext:l=!1}=e,{onExecute:r}=e,o=!1,s;function a(c){t(5,o=!0),r(c)}return n.$$set=c=>{"hasPrevious"in c&&t(2,i=c.hasPrevious),"hasNext"in c&&t(3,l=c.hasNext),"onExecute"in c&&t(4,r=c.onExecute)},n.$$.update=()=>{n.$$.dirty&44&&t(0,s=[{name:"navigation",action:"previous",html:'<svg class="icon"><use href="client/img/icons/icons.svg#angle-left"></use></svg>',tooltip:F.translate("Previous Entry"),disabled:!i||o},{name:"navigation",action:"next",html:'<svg class="icon"><use href="client/img/icons/icons.svg#angle-right"></use></svg>',tooltip:F.translate("Next Entry"),disabled:!l||o}])},[s,a,i,l,r,o]}class Um extends Le{constructor(e){super(),Te(this,e,Vm,Gm,Se,{hasPrevious:2,hasNext:3,onExecute:4})}}function Gs(n,e,t){const i=n.slice();return i[19]=e[t],i}function Vs(n,e,t){const i=n.slice();return i[22]=e[t],i}function Us(n,e,t){const i=n.slice();return i[22]=e[t],i}function Xm(n){let e,t,i=de(n[9]),l=[];for(let o=0;o<i.length;o+=1)l[o]=Xs(Vs(n,i,o));const r=o=>j(l[o],1,1,()=>{l[o]=null});return{c(){for(let o=0;o<l.length;o+=1)l[o].c();e=ze()},m(o,s){for(let a=0;a<l.length;a+=1)l[a]&&l[a].m(o,s);M(o,e,s),t=!0},p(o,s){if(s&8704){i=de(o[9]);let a;for(a=0;a<i.length;a+=1){const c=Vs(o,i,a);l[a]?(l[a].p(c,s),W(l[a],1)):(l[a]=Xs(c),l[a].c(),W(l[a],1),l[a].m(e.parentNode,e))}for(We(),a=i.length;a<l.length;a+=1)r(a);je()}},i(o){if(!t){for(let s=0;s<i.length;s+=1)W(l[s]);t=!0}},o(o){l=l.filter(Boolean);for(let s=0;s<l.length;s+=1)j(l[s]);t=!1},d(o){o&&O(e),et(l,o)}}}function Ym(n){let e,t,i,l=de(n[7]),r=[];for(let a=0;a<l.length;a+=1)r[a]=Ys(Us(n,l,a));const o=a=>j(r[a],1,1,()=>{r[a]=null});let s=n[11]&&Qs();return{c(){for(let a=0;a<r.length;a+=1)r[a].c();e=q(),s&&s.c(),t=ze()},m(a,c){for(let u=0;u<r.length;u+=1)r[u]&&r[u].m(a,c);M(a,e,c),s&&s.m(a,c),M(a,t,c),i=!0},p(a,c){if(c&8320){l=de(a[7]);let u;for(u=0;u<l.length;u+=1){const f=Us(a,l,u);r[u]?(r[u].p(f,c),W(r[u],1)):(r[u]=Ys(f),r[u].c(),W(r[u],1),r[u].m(e.parentNode,e))}for(We(),u=l.length;u<r.length;u+=1)o(u);je()}a[11]?s?c&2048&&W(s,1):(s=Qs(),s.c(),W(s,1),s.m(t.parentNode,t)):s&&(We(),j(s,1,1,()=>{s=null}),je())},i(a){if(!i){for(let c=0;c<l.length;c+=1)W(r[c]);W(s),i=!0}},o(a){r=r.filter(Boolean);for(let c=0;c<r.length;c+=1)j(r[c]);j(s),i=!1},d(a){a&&(O(e),O(t)),et(r,a),s&&s.d(a)}}}function Xs(n){let e,t;return e=new Jt({props:{params:n[22],className:"additional-button"}}),e.$on("execute",n[13]),{c(){be(e.$$.fragment)},m(i,l){he(e,i,l),t=!0},p(i,l){const r={};l&512&&(r.params=i[22]),e.$set(r)},i(i){t||(W(e.$$.fragment,i),t=!0)},o(i){j(e.$$.fragment,i),t=!1},d(i){ge(e,i)}}}function Ys(n){let e,t;return e=new Jt({props:{params:n[22],className:"additional-button dynamic-action"}}),e.$on("execute",n[13]),{c(){be(e.$$.fragment)},m(i,l){he(e,i,l),t=!0},p(i,l){const r={};l&128&&(r.params=i[22]),e.$set(r)},i(i){t||(W(e.$$.fragment,i),t=!0)},o(i){j(e.$$.fragment,i),t=!1},d(i){ge(e,i)}}}function Qs(n){let e,t,i;return t=new ul({props:{heightPx:12}}),{c(){e=E("button"),be(t.$$.fragment),g(e,"class","btn preloader additional-button svelte-1fwhcnk")},m(l,r){M(l,e,r),he(t,e,null),i=!0},i(l){i||(W(t.$$.fragment,l),i=!0)},o(l){j(t.$$.fragment,l),i=!1},d(l){l&&O(e),ge(t)}}}function Qm(n){let e,t,i,l;const r=[Ym,Xm],o=[];function s(a,c){return a[1]==="detail"?0:a[1]==="edit"?1:-1}return~(e=s(n))&&(t=o[e]=r[e](n)),{c(){t&&t.c(),i=ze()},m(a,c){~e&&o[e].m(a,c),M(a,i,c),l=!0},p(a,c){let u=e;e=s(a),e===u?~e&&o[e].p(a,c):(t&&(We(),j(o[u],1,1,()=>{o[u]=null}),je()),~e?(t=o[e],t?t.p(a,c):(t=o[e]=r[e](a),t.c()),W(t,1),t.m(i.parentNode,i)):t=null)},i(a){l||(W(t),l=!0)},o(a){j(t),l=!1},d(a){a&&O(i),~e&&o[e].d(a)}}}function Js(n){let e,t,i,l,r=de(n[10]),o=[];for(let a=0;a<r.length;a+=1)o[a]=xs(Gs(n,r,a));const s=a=>j(o[a],1,1,()=>{o[a]=null});return{c(){e=E("div"),t=E("div"),i=E("div");for(let a=0;a<o.length;a+=1)o[a].c();g(i,"class","header-items"),g(t,"class","header-buttons svelte-1fwhcnk"),g(e,"class","header-buttons-container")},m(a,c){M(a,e,c),y(e,t),y(t,i);for(let u=0;u<o.length;u+=1)o[u]&&o[u].m(i,null);l=!0},p(a,c){if(c&15389){r=de(a[10]);let u;for(u=0;u<r.length;u+=1){const f=Gs(a,r,u);o[u]?(o[u].p(f,c),W(o[u],1)):(o[u]=xs(f),o[u].c(),W(o[u],1),o[u].m(i,null))}for(We(),u=r.length;u<o.length;u+=1)s(u);je()}},i(a){if(!l){for(let c=0;c<r.length;c+=1)W(o[c]);l=!0}},o(a){o=o.filter(Boolean);for(let c=0;c<o.length;c+=1)j(o[c]);l=!1},d(a){a&&O(e),et(o,a)}}}function Jm(n){let e,t;return e=new Jt({props:{params:n[19]}}),e.$on("execute",n[13]),{c(){be(e.$$.fragment)},m(i,l){he(e,i,l),t=!0},p(i,l){const r={};l&1024&&(r.params=i[19]),e.$set(r)},i(i){t||(W(e.$$.fragment,i),t=!0)},o(i){j(e.$$.fragment,i),t=!1},d(i){ge(e,i)}}}function Zm(n){let e,t;return e=new Um({props:{hasNext:n[0].hasNext,hasPrevious:n[0].hasPrevious,onExecute:n[13]}}),{c(){be(e.$$.fragment)},m(i,l){he(e,i,l),t=!0},p(i,l){const r={};l&1&&(r.hasNext=i[0].hasNext),l&1&&(r.hasPrevious=i[0].hasPrevious),e.$set(r)},i(i){t||(W(e.$$.fragment,i),t=!0)},o(i){j(e.$$.fragment,i),t=!1},d(i){ge(e,i)}}}function Km(n){let e,t,i=n[4]&&n[0].followers&&Zs(n);return{c(){i&&i.c(),e=ze()},m(l,r){i&&i.m(l,r),M(l,e,r),t=!0},p(l,r){l[4]&&l[0].followers?i?(i.p(l,r),r&17&&W(i,1)):(i=Zs(l),i.c(),W(i,1),i.m(e.parentNode,e)):i&&(We(),j(i,1,1,()=>{i=null}),je())},i(l){t||(W(i),t=!0)},o(l){j(i),t=!1},d(l){l&&O(e),i&&i.d(l)}}}function xm(n){let e,t,i=n[4]&&Ks(n);return{c(){i&&i.c(),e=ze()},m(l,r){i&&i.m(l,r),M(l,e,r),t=!0},p(l,r){l[4]?i?(i.p(l,r),r&16&&W(i,1)):(i=Ks(l),i.c(),W(i,1),i.m(e.parentNode,e)):i&&(We(),j(i,1,1,()=>{i=null}),je())},i(l){t||(W(i),t=!0)},o(l){j(i),t=!1},d(l){l&&O(e),i&&i.d(l)}}}function $m(n){let e,t;return e=new Bm({props:{filterApplied:n[0].isOverviewFilterActive??!1,onExecute:n[13]}}),{c(){be(e.$$.fragment)},m(i,l){he(e,i,l),t=!0},p(i,l){const r={};l&1&&(r.filterApplied=i[0].isOverviewFilterActive??!1),e.$set(r)},i(i){t||(W(e.$$.fragment,i),t=!0)},o(i){j(e.$$.fragment,i),t=!1},d(i){ge(e,i)}}}function Zs(n){let e,t;return e=new zm({props:{entity:n[3],id:n[4],followers:n[0].followers,onFollow:n[2].onFollow,onUnfollow:n[2].onUnfollow}}),{c(){be(e.$$.fragment)},m(i,l){he(e,i,l),t=!0},p(i,l){const r={};l&8&&(r.entity=i[3]),l&16&&(r.id=i[4]),l&1&&(r.followers=i[0].followers),l&4&&(r.onFollow=i[2].onFollow),l&4&&(r.onUnfollow=i[2].onUnfollow),e.$set(r)},i(i){t||(W(e.$$.fragment,i),t=!0)},o(i){j(e.$$.fragment,i),t=!1},d(i){ge(e,i)}}}function Ks(n){let e,t;return e=new qm({props:{entity:n[3],id:n[4],bookmarkId:n[12],loading:n[11]}}),{c(){be(e.$$.fragment)},m(i,l){he(e,i,l),t=!0},p(i,l){const r={};l&8&&(r.entity=i[3]),l&16&&(r.id=i[4]),l&4096&&(r.bookmarkId=i[12]),l&2048&&(r.loading=i[11]),e.$set(r)},i(i){t||(W(e.$$.fragment,i),t=!0)},o(i){j(e.$$.fragment,i),t=!1},d(i){ge(e,i)}}}function xs(n){let e,t,i,l,r,o;const s=[$m,xm,Km,Zm,Jm],a=[];function c(u,f){return f&1024&&(e=null),f&1024&&(t=null),u[19].action==="openOverviewFilter"?0:(e==null&&(e=!!["bookmark","unbookmark"].includes(u[19].action)),e?1:(t==null&&(t=!!["follow","unfollow"].includes(u[19].action)),t?2:u[19].action==="navigation"?3:4))}return i=c(n,-1),l=a[i]=s[i](n),{c(){l.c(),r=ze()},m(u,f){a[i].m(u,f),M(u,r,f),o=!0},p(u,f){let d=i;i=c(u,f),i===d?a[i].p(u,f):(We(),j(a[d],1,1,()=>{a[d]=null}),je(),l=a[i],l?l.p(u,f):(l=a[i]=s[i](u),l.c()),W(l,1),l.m(r.parentNode,r))},i(u){o||(W(l),o=!0)},o(u){j(l),o=!1},d(u){u&&O(r),a[i].d(u)}}}function eh(n){var o;let e,t,i,l;t=new Cs({props:{actions:n[5],dropdownActions:n[6],dynamicActionsDropdown:n[1]!=="edit"?n[8]:[],executeAction:n[13],loadingActions:n[11],hasMoreButton:!0,className:"record-actions",$$slots:{default:[Qm]},$$scope:{ctx:n}}});let r=n[1]==="detail"&&((o=n[0])==null?void 0:o.headerButtons)&&Js(n);return{c(){e=E("div"),be(t.$$.fragment),i=q(),r&&r.c(),g(e,"class","button-row svelte-1fwhcnk")},m(s,a){M(s,e,a),he(t,e,null),y(e,i),r&&r.m(e,null),l=!0},p(s,[a]){var u;const c={};a&32&&(c.actions=s[5]),a&64&&(c.dropdownActions=s[6]),a&258&&(c.dynamicActionsDropdown=s[1]!=="edit"?s[8]:[]),a&2048&&(c.loadingActions=s[11]),a&134220418&&(c.$$scope={dirty:a,ctx:s}),t.$set(c),s[1]==="detail"&&((u=s[0])!=null&&u.headerButtons)?r?(r.p(s,a),a&3&&W(r,1)):(r=Js(s),r.c(),W(r,1),r.m(e,null)):r&&(We(),j(r,1,1,()=>{r=null}),je())},i(s){l||(W(t.$$.fragment,s),W(r),l=!0)},o(s){j(t.$$.fragment,s),j(r),l=!1},d(s){s&&O(e),ge(t),r&&r.d()}}}function th(n,e,t){let{mode:i="detail"}=e,{recordButtons:l}=e,{callbacks:r}=e,{permissions:o}=e,{scope:s}=e,{id:a}=e,c=[],u=[],f=[],d=[],p=[],h=[],m=[],v=!1,_=null;window.addEventListener("detail:overview-filters-changed",w=>{const T=w.detail;!T||!l||t(0,l.isOverviewFilterActive=T.isOverviewFilterActive,l)}),window.addEventListener("record:actions-reload",w=>{b()}),window.addEventListener("record:buttons-update",w=>{l?t(0,l=Object.assign(l,w.detail||{})):t(0,l=w.detail||{})}),window.addEventListener("record:followers-updated",w=>{l&&t(0,l.followers=w.detail,l)});async function k(){let w=st.get();if(!w||!a)return[];try{const T=await fetch(`/api/v1/Action/${s}/${a}/dynamicActions?type=record`,{method:"GET",headers:{"Content-Type":"application/json","Authorization-Token":btoa(w.user.userName+":"+w.token)}});return T.ok?await T.json():[]}catch(T){return console.error(T),[]}}function S(){const w=[];return(ae.get(["clientDefs",s,"uiHandler"])||[]).forEach(T=>{T.type==="setValue"&&T.triggerAction==="onButtonClick"&&w.push({action:"uiHandler",id:T.id,label:T.name})}),w}function b(){ae.get(["scopes",s,"actionDisabled"])||(t(15,d=[]),t(8,p=[]),t(11,v=!0),k().then(w=>{const T=w.map(D=>({...D,id:D.data.action_id??null})),I=w.filter(D=>["bookmark","unbookmark"].includes(D.action)).pop();I&&t(12,_=I.data.bookmark_id??null),t(15,d=T.filter(D=>D.display==="single")),t(8,p=T.filter(D=>D.display==="dropdown"))}).catch(w=>{console.error(w)}).finally(()=>t(11,v=!1)))}function A(w){l==null||l.executeAction(w.detail.action,w.detail.data,w.detail.event||w)}return it(()=>{b()}),n.$$set=w=>{"mode"in w&&t(1,i=w.mode),"recordButtons"in w&&t(0,l=w.recordButtons),"callbacks"in w&&t(2,r=w.callbacks),"permissions"in w&&t(14,o=w.permissions),"scope"in w&&t(3,s=w.scope),"id"in w&&t(4,a=w.id)},n.$$.update=()=>{var w;n.$$.dirty&32771&&(t(5,c=(i==="edit"?l==null?void 0:l.editButtons:l==null?void 0:l.buttons)??[]),t(7,f=[...(l==null?void 0:l.additionalButtons)??[],...d]),t(6,u=(i==="edit"?l==null?void 0:l.dropdownEditButtons:l==null?void 0:l.dropdownButtons)??[]),t(9,h=i==="edit"?[...(l==null?void 0:l.additionalEditButtons)??[],...S()]:[]),t(10,m=(((w=l==null?void 0:l.headerButtons)==null?void 0:w.buttons)??[]).filter(T=>!T.hidden)))},[l,i,r,s,a,c,u,f,p,h,m,v,_,A,o,d]}class nh extends Le{constructor(e){super(),Te(this,e,th,eh,Se,{mode:1,recordButtons:0,callbacks:2,permissions:14,scope:3,id:4})}}function $s(n){let e,t,i;return t=new nh({props:{mode:n[5],scope:n[0].scope,id:n[0].id,permissions:n[0].scopePermissions,recordButtons:n[2],callbacks:n[3]}}),{c(){e=E("div"),be(t.$$.fragment),g(e,"class","detail-button-container")},m(l,r){M(l,e,r),he(t,e,null),i=!0},p(l,r){const o={};r&32&&(o.mode=l[5]),r&1&&(o.scope=l[0].scope),r&1&&(o.id=l[0].id),r&1&&(o.permissions=l[0].scopePermissions),r&4&&(o.recordButtons=l[2]),r&8&&(o.callbacks=l[3]),t.$set(o)},i(l){i||(W(t.$$.fragment,l),i=!0)},o(l){j(t.$$.fragment,l),i=!1},d(l){l&&O(e),ge(t)}}}function eu(n){var l;let e,t,i;return t=new Mm({props:{items:n[1],scrollCallback:n[4],hasLayoutEditor:((l=n[2])==null?void 0:l.hasLayoutEditor)&&n[0].mode!=="edit"}}),{c(){e=E("div"),be(t.$$.fragment),g(e,"class","anchor-nav-container")},m(r,o){M(r,e,o),he(t,e,null),i=!0},p(r,o){var a;const s={};o&2&&(s.items=r[1]),o&16&&(s.scrollCallback=r[4]),o&5&&(s.hasLayoutEditor=((a=r[2])==null?void 0:a.hasLayoutEditor)&&r[0].mode!=="edit"),t.$set(s)},i(r){i||(W(t.$$.fragment,r),i=!0)},o(r){j(t.$$.fragment,r),i=!1},d(r){r&&O(e),ge(t)}}}function ih(n){let e,t,i,l=n[2]&&$s(n),r=n[1].length>1&&eu(n);return{c(){l&&l.c(),e=q(),r&&r.c(),t=ze()},m(o,s){l&&l.m(o,s),M(o,e,s),r&&r.m(o,s),M(o,t,s),i=!0},p(o,s){o[2]?l?(l.p(o,s),s&4&&W(l,1)):(l=$s(o),l.c(),W(l,1),l.m(e.parentNode,e)):l&&(We(),j(l,1,1,()=>{l=null}),je()),o[1].length>1?r?(r.p(o,s),s&2&&W(r,1)):(r=eu(o),r.c(),W(r,1),r.m(t.parentNode,t)):r&&(We(),j(r,1,1,()=>{r=null}),je())},i(o){i||(W(l),W(r),i=!0)},o(o){j(l),j(r),i=!1},d(o){o&&(O(e),O(t)),l&&l.d(o),r&&r.d(o)}}}function lh(n){let e,t;return e=new al({props:{breadcrumbs:n[0].breadcrumbs,currentIsHeading:n[6],$$slots:{default:[ih]},$$scope:{ctx:n}}}),{c(){be(e.$$.fragment)},m(i,l){he(e,i,l),t=!0},p(i,[l]){const r={};l&1&&(r.breadcrumbs=i[0].breadcrumbs),l&64&&(r.currentIsHeading=i[6]),l&191&&(r.$$scope={dirty:l,ctx:i}),e.$set(r)},i(i){t||(W(e.$$.fragment,i),t=!0)},o(i){j(e.$$.fragment,i),t=!1},d(i){ge(e,i)}}}function rh(n,e,t){let{params:i}=e,{anchorNavItems:l=[]}=e,{recordButtons:r=null}=e,{callbacks:o}=e,{anchorScrollCallback:s=(u,f)=>{}}=e,a,c=(i==null?void 0:i.currentIsHeading)??!0;return window.addEventListener("detail:panels-loaded",u=>{t(1,l=u.detail)}),window.addEventListener("record-mode:changed",u=>{t(0,i.mode=u.detail,i)}),c===!0&&window.addEventListener("breadcrumbs:header-updated",u=>{t(6,c=!!u.detail)}),window.addEventListener("breadcrumbs:items-updated",u=>{t(0,i.breadcrumbs=u.detail,i)}),it(()=>{i.afterOnMount&&i.afterOnMount()}),mn(()=>{i.afterOnDestroy&&i.afterOnDestroy()}),n.$$set=u=>{"params"in u&&t(0,i=u.params),"anchorNavItems"in u&&t(1,l=u.anchorNavItems),"recordButtons"in u&&t(2,r=u.recordButtons),"callbacks"in u&&t(3,o=u.callbacks),"anchorScrollCallback"in u&&t(4,s=u.anchorScrollCallback)},n.$$.update=()=>{n.$$.dirty&1&&t(5,a=i.mode??"detail")},[i,l,r,o,s,a,c]}class oh extends Le{constructor(e){super(),Te(this,e,rh,lh,Se,{params:0,anchorNavItems:1,recordButtons:2,callbacks:3,anchorScrollCallback:4})}}function tu(n){let e,t,i;return{c(){e=E("button"),e.innerHTML='<svg class="icon"><use href="client/img/icons/icons.svg#close"></use></svg>',g(e,"type","button"),g(e,"class","btn btn-default  svelte-1qg1bxb"),g(e,"data-original-title","Reset"),g(e,"aria-expanded","false"),g(e,"data-tippy","true")},m(l,r){M(l,e,r),t||(i=$(e,"click",n[10]),t=!0)},p:De,d(l){l&&O(e),t=!1,i()}}}function nu(n){let e,t,i,l,r,o,s,a,c,u,f,d,p,h,m,v,_,k,S,b,A=F.translate("Advanced Filter")+"",w,T,I,D,C;d=new cs({props:{scope:n[1],searchManager:n[0]}}),h=new os({props:{scope:n[1],searchManager:n[0],hideRowAction:!0}});let N=n[5]&&iu(n);return{c(){e=E("div"),t=E("button"),t.innerHTML='<svg class="icon"><use href="client/img/icons/icons.svg#filter"></use></svg>',i=q(),l=E("div"),r=E("button"),o=E("span"),s=ve(n[6]),a=q(),c=E("span"),u=q(),f=E("div"),be(d.$$.fragment),p=q(),be(h.$$.fragment),m=q(),v=E("ul"),_=E("li"),k=E("label"),S=E("input"),b=q(),w=ve(A),T=q(),N&&N.c(),g(t,"type","button"),g(t,"class","btn btn-default filter svelte-1qg1bxb"),g(t,"data-original-title","Filter"),g(t,"aria-expanded","false"),g(t,"data-tippy","true"),me(t,"has-content",n[6]!==""),g(o,"class","svelte-1qg1bxb"),me(o,"has-content",n[6]!==""),g(c,"class","chevron fas fa-chevron-down svelte-1qg1bxb"),me(c,"has-content",n[6]!==""),g(r,"data-toggle","dropdown"),g(r,"class","btn btn-default filter-switcher svelte-1qg1bxb"),g(S,"type","checkbox"),g(k,"class","svelte-1qg1bxb"),g(_,"class","checkbox"),g(v,"class","advanced-checkbox svelte-1qg1bxb"),g(f,"class","dropdown-menu dropdown-menu-right svelte-1qg1bxb"),g(l,"class","dropdown svelte-1qg1bxb"),g(e,"class","input-group filter-group svelte-1qg1bxb")},m(P,V){M(P,e,V),y(e,t),y(e,i),y(e,l),y(l,r),y(r,o),y(o,s),y(r,a),y(r,c),y(l,u),y(l,f),he(d,f,null),y(f,p),he(h,f,null),y(f,m),y(f,v),y(v,_),y(_,k),y(k,S),S.checked=n[7],y(k,b),y(k,w),y(e,T),N&&N.m(e,null),I=!0,D||(C=[$(t,"click",function(){Tt(n[3])&&n[3].apply(this,arguments)}),$(r,"mousedown",sh),$(S,"change",n[17]),$(S,"change",n[18])],D=!0)},p(P,V){n=P,(!I||V&64)&&me(t,"has-content",n[6]!==""),(!I||V&64)&&Ne(s,n[6]),(!I||V&64)&&me(o,"has-content",n[6]!==""),(!I||V&64)&&me(c,"has-content",n[6]!=="");const R={};V&2&&(R.scope=n[1]),V&1&&(R.searchManager=n[0]),d.$set(R);const H={};V&2&&(H.scope=n[1]),V&1&&(H.searchManager=n[0]),h.$set(H),V&128&&(S.checked=n[7]),n[5]?N?N.p(n,V):(N=iu(n),N.c(),N.m(e,null)):N&&(N.d(1),N=null)},i(P){I||(W(d.$$.fragment,P),W(h.$$.fragment,P),I=!0)},o(P){j(d.$$.fragment,P),j(h.$$.fragment,P),I=!1},d(P){P&&O(e),ge(d),ge(h),N&&N.d(),D=!1,nt(C)}}}function iu(n){let e,t,i;return{c(){e=E("button"),e.innerHTML='<svg class="icon"><use href="client/img/icons/icons.svg#close"></use></svg>',g(e,"type","button"),g(e,"class","btn btn-default  svelte-1qg1bxb"),g(e,"data-original-title","Reset Filter"),g(e,"aria-expanded","false"),g(e,"data-tippy","true")},m(l,r){M(l,e,r),t||(i=$(e,"click",n[12]),t=!0)},p:De,d(l){l&&O(e),t=!1,i()}}}function ah(n){let e,t,i,l,r,o,s,a,c,u,f,d,p=n[8]&&tu(n),h=n[2]&&nu(n);return{c(){e=E("div"),t=E("div"),i=E("div"),l=E("input"),r=q(),o=E("div"),p&&p.c(),s=q(),a=E("button"),a.innerHTML='<svg class="icon"><use href="client/img/icons/icons.svg#search"></use></svg>',c=q(),h&&h.c(),g(l,"type","text"),g(l,"class","form-control text-filter"),g(l,"placeholder",F.translate("Type and press the enter key or click on the search icon to search...","messages")),g(l,"name","textFilter"),g(l,"tabindex","1"),g(a,"type","button"),g(a,"class","btn btn-primary svelte-1qg1bxb"),g(a,"data-original-title","Search"),g(a,"aria-expanded","false"),g(a,"data-tippy","true"),g(o,"class","input-group-btn"),g(i,"class","input-group search svelte-1qg1bxb"),Fe(i,"width","100%"),g(t,"class","form-group  svelte-1qg1bxb"),g(e,"class","row search-row svelte-1qg1bxb")},m(m,v){M(m,e,v),y(e,t),y(t,i),y(i,l),Ri(l,n[4]),y(i,r),y(i,o),p&&p.m(o,null),y(o,s),y(o,a),y(t,c),h&&h.m(t,null),u=!0,f||(d=[$(l,"input",n[14]),$(l,"keypress",n[15]),$(l,"keyup",n[16]),$(a,"click",n[9])],f=!0)},p(m,[v]){v&16&&l.value!==m[4]&&Ri(l,m[4]),m[8]?p?p.p(m,v):(p=tu(m),p.c(),p.m(o,s)):p&&(p.d(1),p=null),m[2]?h?(h.p(m,v),v&4&&W(h,1)):(h=nu(m),h.c(),W(h,1),h.m(t,null)):h&&(We(),j(h,1,1,()=>{h=null}),je())},i(m){u||(W(h),u=!0)},o(m){j(h),u=!1},d(m){m&&O(e),p&&p.d(),h&&h.d(),f=!1,nt(d)}}}const sh=n=>n.preventDefault();function uh(n,e,t){let i,{scope:l}=e,{searchManager:r}=e,{canShowFilter:o}=e,{openFilter:s}=e,{hiddenBoolFilter:a=[]}=e,c=!1,u="",f=r.isQueryBuilderApplied(),d=r.geTextFilter();pt.advancedFilterChecked.set(f);const p=rt.selectedSavedItemIds.subscribe(P=>{_()}),h=pt.selectBoolFilters.subscribe(P=>{_(),w()}),m=pt.advancedFilterChecked.subscribe(P=>{t(7,f=P),_(),w()});function v(){r.update({textFilter:d.trim()}),S()}function _(){setTimeout(()=>{t(5,c=r.isQueryBuilderApplied()||r.getSavedFilters().length>0);let P=r.getBool();for(const V in P)if(P[V]){t(5,c=!0);break}},100)}function k(){t(4,d=""),v()}function S(){r.collection.reset(),Be.notify(F.translate("loading","messages")),t(0,r.collection.where=r.getWhere(),r),r.collection.fetch().then(()=>window.Backbone.trigger("after:search",r.collection))}function b(P=!0){pt.advancedFilterChecked.set(f),r.update({queryBuilderApplied:f?"apply":!1}),P&&S()}function A(){c&&(r.reset(),t(7,f=!1),b(!1),rt.selectedSavedItemIds.set([]),pt.selectBoolFilters.set([]),_(),S(),window.dispatchEvent(new CustomEvent("filter:unset-all")))}function w(){let P=Lt(pt.selectBoolFilters).map(R=>F.translate(R,"boolFilters",l)),V=Lt(rt.savedSearchItems).filter(R=>Lt(rt.selectedSavedItemIds).includes(R.id)).map(R=>R.name);t(6,u=P.concat(V).reverse().join(",").trim())}it(()=>(_(),()=>{m(),p(),h()}));function T(){d=this.value,t(4,d)}const I=P=>{P.key==="Enter"&&v()},D=P=>{P.key==="Enter"&&v()};function C(){f=this.checked,t(7,f)}const N=()=>b();return n.$$set=P=>{"scope"in P&&t(1,l=P.scope),"searchManager"in P&&t(0,r=P.searchManager),"canShowFilter"in P&&t(2,o=P.canShowFilter),"openFilter"in P&&t(3,s=P.openFilter),"hiddenBoolFilter"in P&&t(13,a=P.hiddenBoolFilter)},n.$$.update=()=>{n.$$.dirty&16&&t(8,i=d.trim().length>0)},[r,l,o,s,d,c,u,f,i,v,k,b,A,a,T,I,D,C,N]}class ch extends Le{constructor(e){super(),Te(this,e,uh,ah,Se,{scope:1,searchManager:0,canShowFilter:2,openFilter:3,hiddenBoolFilter:13})}}window.SvelteLanguage=F,window.SvelteUserData=st,window.SvelteNotifier=Be,window.SvelteLayoutManager=Ut,window.SvelteMetadata=ae,window.SvelteModelFactory=Hl,window.SvelteConfig=Eo,window.SvelteStorage=Ce,window.SvelteAcl=Ft,window.SvelteCollectionFactory=Do,window.driver=Su,window.tippy=ti,Xe.ApiRequestComponent=ep,Xe.BaseHeader=al,Xe.DetailHeader=oh,Xe.Favorites=gp,Xe.JobManagerIcon=Lf,Xe.LayoutComponent=Md,Xe.ListHeader=Im,Xe.ListSearch=ch,Xe.Navigation=dp,Xe.RightSideView=$p,Xe.TreePanel=Op,Xe.UpdatePanel=Bf,Object.defineProperty(Xe,Symbol.toStringTag,{value:"Module"})});
