(function(De,Fe){typeof exports=="object"&&typeof module<"u"?Fe(exports):typeof define=="function"&&define.amd?define(["exports"],Fe):(De=typeof globalThis<"u"?globalThis:De||self,Fe(De.Svelte={}))})(this,function(De){"use strict";var qa=Object.defineProperty;var Ga=(De,Fe,ct)=>Fe in De?qa(De,Fe,{enumerable:!0,configurable:!0,writable:!0,value:ct}):De[Fe]=ct;var di=(De,Fe,ct)=>Ga(De,typeof Fe!="symbol"?Fe+"":Fe,ct);let Fe={};function ct(t={}){Fe={animate:!0,allowClose:!0,overlayOpacity:.7,smoothScroll:!1,disableActiveInteraction:!1,showProgress:!1,stagePadding:10,stageRadius:5,popoverOffset:10,showButtons:["next","previous","close"],disableButtons:[],overlayColor:"#000",...t}}function B(t){return t?Fe[t]:Fe}function rn(t,e,n,i){return(t/=i/2)<1?n/2*t*t+e:-n/2*(--t*(t-2)-1)+e}function ci(t){const e='a[href]:not([disabled]), button:not([disabled]), textarea:not([disabled]), input[type="text"]:not([disabled]), input[type="radio"]:not([disabled]), input[type="checkbox"]:not([disabled]), select:not([disabled])';return t.flatMap(n=>{const i=n.matches(e),l=Array.from(n.querySelectorAll(e));return[...i?[n]:[],...l]}).filter(n=>getComputedStyle(n).pointerEvents!=="none"&&bo(n))}function fi(t){if(!t||go(t))return;const e=B("smoothScroll");t.scrollIntoView({behavior:!e||mo(t)?"auto":"smooth",inline:"center",block:"center"})}function mo(t){if(!t||!t.parentElement)return;const e=t.parentElement;return e.scrollHeight>e.clientHeight}function go(t){const e=t.getBoundingClientRect();return e.top>=0&&e.left>=0&&e.bottom<=(window.innerHeight||document.documentElement.clientHeight)&&e.right<=(window.innerWidth||document.documentElement.clientWidth)}function bo(t){return!!(t.offsetWidth||t.offsetHeight||t.getClientRects().length)}let an={};function Ce(t,e){an[t]=e}function H(t){return t?an[t]:an}function pi(){an={}}let sn={};function un(t,e){sn[t]=e}function _t(t){var e;(e=sn[t])==null||e.call(sn)}function vo(){sn={}}function _o(t,e,n,i){let l=H("__activeStagePosition");const o=l||n.getBoundingClientRect(),r=i.getBoundingClientRect(),s=rn(t,o.x,r.x-o.x,e),a=rn(t,o.y,r.y-o.y,e),u=rn(t,o.width,r.width-o.width,e),d=rn(t,o.height,r.height-o.height,e);l={x:s,y:a,width:u,height:d},mi(l),Ce("__activeStagePosition",l)}function hi(t){if(!t)return;const e=t.getBoundingClientRect(),n={x:e.x,y:e.y,width:e.width,height:e.height};Ce("__activeStagePosition",n),mi(n)}function wo(){const t=H("__activeStagePosition"),e=H("__overlaySvg");if(!t)return;if(!e){console.warn("No stage svg found.");return}const n=window.innerWidth,i=window.innerHeight;e.setAttribute("viewBox",`0 0 ${n} ${i}`)}function yo(t){const e=Eo(t);document.body.appendChild(e),_i(e,n=>{n.target.tagName==="path"&&_t("overlayClick")}),Ce("__overlaySvg",e)}function mi(t){const e=H("__overlaySvg");if(!e){yo(t);return}const n=e.firstElementChild;if((n==null?void 0:n.tagName)!=="path")throw new Error("no path element found in stage svg");n.setAttribute("d",gi(t))}function Eo(t){const e=window.innerWidth,n=window.innerHeight,i=document.createElementNS("http://www.w3.org/2000/svg","svg");i.classList.add("driver-overlay","driver-overlay-animated"),i.setAttribute("viewBox",`0 0 ${e} ${n}`),i.setAttribute("xmlSpace","preserve"),i.setAttribute("xmlnsXlink","http://www.w3.org/1999/xlink"),i.setAttribute("version","1.1"),i.setAttribute("preserveAspectRatio","xMinYMin slice"),i.style.fillRule="evenodd",i.style.clipRule="evenodd",i.style.strokeLinejoin="round",i.style.strokeMiterlimit="2",i.style.zIndex="10000",i.style.position="fixed",i.style.top="0",i.style.left="0",i.style.width="100%",i.style.height="100%";const l=document.createElementNS("http://www.w3.org/2000/svg","path");return l.setAttribute("d",gi(t)),l.style.fill=B("overlayColor")||"rgb(0,0,0)",l.style.opacity=`${B("overlayOpacity")}`,l.style.pointerEvents="auto",l.style.cursor="auto",i.appendChild(l),i}function gi(t){const e=window.innerWidth,n=window.innerHeight,i=B("stagePadding")||0,l=B("stageRadius")||0,o=t.width+i*2,r=t.height+i*2,s=Math.min(l,o/2,r/2),a=Math.floor(Math.max(s,0)),u=t.x-i+a,d=t.y-i,c=o-a*2,f=r-a*2;return`M${e},0L0,0L0,${n}L${e},${n}L${e},0Z
    M${u},${d} h${c} a${a},${a} 0 0 1 ${a},${a} v${f} a${a},${a} 0 0 1 -${a},${a} h-${c} a${a},${a} 0 0 1 -${a},-${a} v-${f} a${a},${a} 0 0 1 ${a},-${a} z`}function ko(){const t=H("__overlaySvg");t&&t.remove()}function So(){const t=document.getElementById("driver-dummy-element");if(t)return t;let e=document.createElement("div");return e.id="driver-dummy-element",e.style.width="0",e.style.height="0",e.style.pointerEvents="none",e.style.opacity="0",e.style.position="fixed",e.style.top="50%",e.style.left="50%",document.body.appendChild(e),e}function bi(t){const{element:e}=t;let n=typeof e=="string"?document.querySelector(e):e;n||(n=So()),Co(n,t)}function Do(){const t=H("__activeElement"),e=H("__activeStep");t&&(hi(t),wo(),Si(t,e))}function Co(t,e){const n=Date.now(),i=H("__activeStep"),l=H("__activeElement")||t,o=!l||l===t,r=t.id==="driver-dummy-element",s=l.id==="driver-dummy-element",a=B("animate"),u=e.onHighlightStarted||B("onHighlightStarted"),d=(e==null?void 0:e.onHighlighted)||B("onHighlighted"),c=(i==null?void 0:i.onDeselected)||B("onDeselected"),f=B(),m=H();!o&&c&&c(s?void 0:l,i,{config:f,state:m}),u&&u(r?void 0:t,e,{config:f,state:m});const h=!o&&a;let b=!1;Ao(),Ce("previousStep",i),Ce("previousElement",l),Ce("activeStep",e),Ce("activeElement",t);const p=()=>{if(H("__transitionCallback")!==p)return;const v=Date.now()-n,S=400-v<=400/2;e.popover&&S&&!b&&h&&(wi(t,e),b=!0),B("animate")&&v<400?_o(v,400,l,t):(hi(t),d&&d(r?void 0:t,e,{config:B(),state:H()}),Ce("__transitionCallback",void 0),Ce("__previousStep",i),Ce("__previousElement",l),Ce("__activeStep",e),Ce("__activeElement",t)),window.requestAnimationFrame(p)};Ce("__transitionCallback",p),window.requestAnimationFrame(p),fi(t),!h&&e.popover&&wi(t,e),l.classList.remove("driver-active-element","driver-no-interaction"),l.removeAttribute("aria-haspopup"),l.removeAttribute("aria-expanded"),l.removeAttribute("aria-controls"),B("disableActiveInteraction")&&t.classList.add("driver-no-interaction"),t.classList.add("driver-active-element"),t.setAttribute("aria-haspopup","dialog"),t.setAttribute("aria-expanded","true"),t.setAttribute("aria-controls","driver-popover-content")}function Lo(){var t;(t=document.getElementById("driver-dummy-element"))==null||t.remove(),document.querySelectorAll(".driver-active-element").forEach(e=>{e.classList.remove("driver-active-element","driver-no-interaction"),e.removeAttribute("aria-haspopup"),e.removeAttribute("aria-expanded"),e.removeAttribute("aria-controls")})}function jt(){const t=H("__resizeTimeout");t&&window.cancelAnimationFrame(t),Ce("__resizeTimeout",window.requestAnimationFrame(Do))}function Po(t){var e;if(!H("isInitialized")||!(t.key==="Tab"||t.keyCode===9))return;const n=H("__activeElement"),i=(e=H("popover"))==null?void 0:e.wrapper,l=ci([...i?[i]:[],...n?[n]:[]]),o=l[0],r=l[l.length-1];if(t.preventDefault(),t.shiftKey){const s=l[l.indexOf(document.activeElement)-1]||r;s==null||s.focus()}else{const s=l[l.indexOf(document.activeElement)+1]||o;s==null||s.focus()}}function vi(t){var e;((e=B("allowKeyboardControl"))==null||e)&&(t.key==="Escape"?_t("escapePress"):t.key==="ArrowRight"?_t("arrowRightPress"):t.key==="ArrowLeft"&&_t("arrowLeftPress"))}function _i(t,e,n){const i=(l,o)=>{const r=l.target;t.contains(r)&&((!n||n(r))&&(l.preventDefault(),l.stopPropagation(),l.stopImmediatePropagation()),o==null||o(l))};document.addEventListener("pointerdown",i,!0),document.addEventListener("mousedown",i,!0),document.addEventListener("pointerup",i,!0),document.addEventListener("mouseup",i,!0),document.addEventListener("click",l=>{i(l,e)},!0)}function Io(){window.addEventListener("keyup",vi,!1),window.addEventListener("keydown",Po,!1),window.addEventListener("resize",jt),window.addEventListener("scroll",jt)}function To(){window.removeEventListener("keyup",vi),window.removeEventListener("resize",jt),window.removeEventListener("scroll",jt)}function Ao(){const t=H("popover");t&&(t.wrapper.style.display="none")}function wi(t,e){var n,i;let l=H("popover");l&&document.body.removeChild(l.wrapper),l=Oo(),document.body.appendChild(l.wrapper);const{title:o,description:r,showButtons:s,disableButtons:a,showProgress:u,nextBtnText:d=B("nextBtnText")||"Next &rarr;",prevBtnText:c=B("prevBtnText")||"&larr; Previous",progressText:f=B("progressText")||"{current} of {total}"}=e.popover||{};l.nextButton.innerHTML=d,l.previousButton.innerHTML=c,l.progress.innerHTML=f,o?(l.title.innerHTML=o,l.title.style.display="block"):l.title.style.display="none",r?(l.description.innerHTML=r,l.description.style.display="block"):l.description.style.display="none";const m=s||B("showButtons"),h=u||B("showProgress")||!1,b=(m==null?void 0:m.includes("next"))||(m==null?void 0:m.includes("previous"))||h;l.closeButton.style.display=m.includes("close")?"block":"none",b?(l.footer.style.display="flex",l.progress.style.display=h?"block":"none",l.nextButton.style.display=m.includes("next")?"block":"none",l.previousButton.style.display=m.includes("previous")?"block":"none"):l.footer.style.display="none";const p=a||B("disableButtons")||[];p!=null&&p.includes("next")&&(l.nextButton.disabled=!0,l.nextButton.classList.add("driver-popover-btn-disabled")),p!=null&&p.includes("previous")&&(l.previousButton.disabled=!0,l.previousButton.classList.add("driver-popover-btn-disabled")),p!=null&&p.includes("close")&&(l.closeButton.disabled=!0,l.closeButton.classList.add("driver-popover-btn-disabled"));const v=l.wrapper;v.style.display="block",v.style.left="",v.style.top="",v.style.bottom="",v.style.right="",v.id="driver-popover-content",v.setAttribute("role","dialog"),v.setAttribute("aria-labelledby","driver-popover-title"),v.setAttribute("aria-describedby","driver-popover-description");const S=l.arrow;S.className="driver-popover-arrow";const k=((n=e.popover)==null?void 0:n.popoverClass)||B("popoverClass")||"";v.className=`driver-popover ${k}`.trim(),_i(l.wrapper,w=>{var I,y,W;const Y=w.target,F=((I=e.popover)==null?void 0:I.onNextClick)||B("onNextClick"),Q=((y=e.popover)==null?void 0:y.onPrevClick)||B("onPrevClick"),Z=((W=e.popover)==null?void 0:W.onCloseClick)||B("onCloseClick");if(Y.classList.contains("driver-popover-next-btn"))return F?F(t,e,{config:B(),state:H()}):_t("nextClick");if(Y.classList.contains("driver-popover-prev-btn"))return Q?Q(t,e,{config:B(),state:H()}):_t("prevClick");if(Y.classList.contains("driver-popover-close-btn"))return Z?Z(t,e,{config:B(),state:H()}):_t("closeClick")},w=>!(l!=null&&l.description.contains(w))&&!(l!=null&&l.title.contains(w))&&typeof w.className=="string"&&w.className.includes("driver-popover")),Ce("popover",l);const C=((i=e.popover)==null?void 0:i.onPopoverRender)||B("onPopoverRender");C&&C(l,{config:B(),state:H()}),Si(t,e),fi(v);const E=t.classList.contains("driver-dummy-element"),L=ci([v,...E?[]:[t]]);L.length>0&&L[0].focus()}function yi(){const t=H("popover");if(!(t!=null&&t.wrapper))return;const e=t.wrapper.getBoundingClientRect(),n=B("stagePadding")||0,i=B("popoverOffset")||0;return{width:e.width+n+i,height:e.height+n+i,realWidth:e.width,realHeight:e.height}}function Ei(t,e){const{elementDimensions:n,popoverDimensions:i,popoverPadding:l,popoverArrowDimensions:o}=e;return t==="start"?Math.max(Math.min(n.top-l,window.innerHeight-i.realHeight-o.width),o.width):t==="end"?Math.max(Math.min(n.top-(i==null?void 0:i.realHeight)+n.height+l,window.innerHeight-(i==null?void 0:i.realHeight)-o.width),o.width):t==="center"?Math.max(Math.min(n.top+n.height/2-(i==null?void 0:i.realHeight)/2,window.innerHeight-(i==null?void 0:i.realHeight)-o.width),o.width):0}function ki(t,e){const{elementDimensions:n,popoverDimensions:i,popoverPadding:l,popoverArrowDimensions:o}=e;return t==="start"?Math.max(Math.min(n.left-l,window.innerWidth-i.realWidth-o.width),o.width):t==="end"?Math.max(Math.min(n.left-(i==null?void 0:i.realWidth)+n.width+l,window.innerWidth-(i==null?void 0:i.realWidth)-o.width),o.width):t==="center"?Math.max(Math.min(n.left+n.width/2-(i==null?void 0:i.realWidth)/2,window.innerWidth-(i==null?void 0:i.realWidth)-o.width),o.width):0}function Si(t,e){const n=H("popover");if(!n)return;const{align:i="start",side:l="left"}=(e==null?void 0:e.popover)||{},o=i,r=t.id==="driver-dummy-element"?"over":l,s=B("stagePadding")||0,a=yi(),u=n.arrow.getBoundingClientRect(),d=t.getBoundingClientRect(),c=d.top-a.height;let f=c>=0;const m=window.innerHeight-(d.bottom+a.height);let h=m>=0;const b=d.left-a.width;let p=b>=0;const v=window.innerWidth-(d.right+a.width);let S=v>=0;const k=!f&&!h&&!p&&!S;let C=r;if(r==="top"&&f?S=p=h=!1:r==="bottom"&&h?S=p=f=!1:r==="left"&&p?S=f=h=!1:r==="right"&&S&&(p=f=h=!1),r==="over"){const E=window.innerWidth/2-a.realWidth/2,L=window.innerHeight/2-a.realHeight/2;n.wrapper.style.left=`${E}px`,n.wrapper.style.right="auto",n.wrapper.style.top=`${L}px`,n.wrapper.style.bottom="auto"}else if(k){const E=window.innerWidth/2-(a==null?void 0:a.realWidth)/2,L=10;n.wrapper.style.left=`${E}px`,n.wrapper.style.right="auto",n.wrapper.style.bottom=`${L}px`,n.wrapper.style.top="auto"}else if(p){const E=Math.min(b,window.innerWidth-(a==null?void 0:a.realWidth)-u.width),L=Ei(o,{elementDimensions:d,popoverDimensions:a,popoverPadding:s,popoverArrowDimensions:u});n.wrapper.style.left=`${E}px`,n.wrapper.style.top=`${L}px`,n.wrapper.style.bottom="auto",n.wrapper.style.right="auto",C="left"}else if(S){const E=Math.min(v,window.innerWidth-(a==null?void 0:a.realWidth)-u.width),L=Ei(o,{elementDimensions:d,popoverDimensions:a,popoverPadding:s,popoverArrowDimensions:u});n.wrapper.style.right=`${E}px`,n.wrapper.style.top=`${L}px`,n.wrapper.style.bottom="auto",n.wrapper.style.left="auto",C="right"}else if(f){const E=Math.min(c,window.innerHeight-a.realHeight-u.width);let L=ki(o,{elementDimensions:d,popoverDimensions:a,popoverPadding:s,popoverArrowDimensions:u});n.wrapper.style.top=`${E}px`,n.wrapper.style.left=`${L}px`,n.wrapper.style.bottom="auto",n.wrapper.style.right="auto",C="top"}else if(h){const E=Math.min(m,window.innerHeight-(a==null?void 0:a.realHeight)-u.width);let L=ki(o,{elementDimensions:d,popoverDimensions:a,popoverPadding:s,popoverArrowDimensions:u});n.wrapper.style.left=`${L}px`,n.wrapper.style.bottom=`${E}px`,n.wrapper.style.top="auto",n.wrapper.style.right="auto",C="bottom"}k?n.arrow.classList.add("driver-popover-arrow-none"):No(o,C,t)}function No(t,e,n){const i=H("popover");if(!i)return;const l=n.getBoundingClientRect(),o=yi(),r=i.arrow,s=o.width,a=window.innerWidth,u=l.width,d=l.left,c=o.height,f=window.innerHeight,m=l.top,h=l.height;r.className="driver-popover-arrow";let b=e,p=t;e==="top"?(d+u<=0?(b="right",p="end"):d+u-s<=0&&(b="top",p="start"),d>=a?(b="left",p="end"):d+s>=a&&(b="top",p="end")):e==="bottom"?(d+u<=0?(b="right",p="start"):d+u-s<=0&&(b="bottom",p="start"),d>=a?(b="left",p="start"):d+s>=a&&(b="bottom",p="end")):e==="left"?(m+h<=0?(b="bottom",p="end"):m+h-c<=0&&(b="left",p="start"),m>=f?(b="top",p="end"):m+c>=f&&(b="left",p="end")):e==="right"&&(m+h<=0?(b="bottom",p="start"):m+h-c<=0&&(b="right",p="start"),m>=f?(b="top",p="start"):m+c>=f&&(b="right",p="end")),b?(r.classList.add(`driver-popover-arrow-side-${b}`),r.classList.add(`driver-popover-arrow-align-${p}`)):r.classList.add("driver-popover-arrow-none")}function Oo(){const t=document.createElement("div");t.classList.add("driver-popover");const e=document.createElement("div");e.classList.add("driver-popover-arrow");const n=document.createElement("header");n.id="driver-popover-title",n.classList.add("driver-popover-title"),n.style.display="none",n.innerText="Popover Title";const i=document.createElement("div");i.id="driver-popover-description",i.classList.add("driver-popover-description"),i.style.display="none",i.innerText="Popover description is here";const l=document.createElement("button");l.type="button",l.classList.add("driver-popover-close-btn"),l.setAttribute("aria-label","Close"),l.innerHTML="&times;";const o=document.createElement("footer");o.classList.add("driver-popover-footer");const r=document.createElement("span");r.classList.add("driver-popover-progress-text"),r.innerText="";const s=document.createElement("span");s.classList.add("driver-popover-navigation-btns");const a=document.createElement("button");a.type="button",a.classList.add("driver-popover-prev-btn"),a.innerHTML="&larr; Previous";const u=document.createElement("button");return u.type="button",u.classList.add("driver-popover-next-btn"),u.innerHTML="Next &rarr;",s.appendChild(a),s.appendChild(u),o.appendChild(r),o.appendChild(s),t.appendChild(l),t.appendChild(e),t.appendChild(n),t.appendChild(i),t.appendChild(o),{wrapper:t,arrow:e,title:n,description:i,footer:o,previousButton:a,nextButton:u,closeButton:l,footerButtons:s,progress:r}}function Mo(){var t;const e=H("popover");e&&((t=e.wrapper.parentElement)==null||t.removeChild(e.wrapper))}function Fo(t={}){ct(t);function e(){B("allowClose")&&u()}function n(){const d=H("activeIndex"),c=B("steps")||[];if(typeof d>"u")return;const f=d+1;c[f]?a(f):u()}function i(){const d=H("activeIndex"),c=B("steps")||[];if(typeof d>"u")return;const f=d-1;c[f]?a(f):u()}function l(d){(B("steps")||[])[d]?a(d):u()}function o(){var d;if(H("__transitionCallback"))return;const c=H("activeIndex"),f=H("__activeStep"),m=H("__activeElement");if(typeof c>"u"||typeof f>"u"||typeof H("activeIndex")>"u")return;const h=((d=f.popover)==null?void 0:d.onPrevClick)||B("onPrevClick");if(h)return h(m,f,{config:B(),state:H()});i()}function r(){var d;if(H("__transitionCallback"))return;const c=H("activeIndex"),f=H("__activeStep"),m=H("__activeElement");if(typeof c>"u"||typeof f>"u")return;const h=((d=f.popover)==null?void 0:d.onNextClick)||B("onNextClick");if(h)return h(m,f,{config:B(),state:H()});n()}function s(){H("isInitialized")||(Ce("isInitialized",!0),document.body.classList.add("driver-active",B("animate")?"driver-fade":"driver-simple"),Io(),un("overlayClick",e),un("escapePress",e),un("arrowLeftPress",o),un("arrowRightPress",r))}function a(d=0){var c,f,m,h,b,p,v,S;const k=B("steps");if(!k){console.error("No steps to drive through"),u();return}if(!k[d]){u();return}Ce("__activeOnDestroyed",document.activeElement),Ce("activeIndex",d);const C=k[d],E=k[d+1],L=k[d-1],w=((c=C.popover)==null?void 0:c.doneBtnText)||B("doneBtnText")||"Done",I=B("allowClose"),y=typeof((f=C.popover)==null?void 0:f.showProgress)<"u"?(m=C.popover)==null?void 0:m.showProgress:B("showProgress"),W=(((h=C.popover)==null?void 0:h.progressText)||B("progressText")||"{{current}} of {{total}}").replace("{{current}}",`${d+1}`).replace("{{total}}",`${k.length}`),Y=((b=C.popover)==null?void 0:b.showButtons)||B("showButtons"),F=["next","previous",...I?["close"]:[]].filter(z=>!(Y!=null&&Y.length)||Y.includes(z)),Q=((p=C.popover)==null?void 0:p.onNextClick)||B("onNextClick"),Z=((v=C.popover)==null?void 0:v.onPrevClick)||B("onPrevClick"),A=((S=C.popover)==null?void 0:S.onCloseClick)||B("onCloseClick");bi({...C,popover:{showButtons:F,nextBtnText:E?void 0:w,disableButtons:[...L?[]:["previous"]],showProgress:y,progressText:W,onNextClick:Q||(()=>{E?a(d+1):u()}),onPrevClick:Z||(()=>{a(d-1)}),onCloseClick:A||(()=>{u()}),...(C==null?void 0:C.popover)||{}}})}function u(d=!0){const c=H("__activeElement"),f=H("__activeStep"),m=H("__activeOnDestroyed"),h=B("onDestroyStarted");if(d&&h){const v=!c||(c==null?void 0:c.id)==="driver-dummy-element";h(v?void 0:c,f,{config:B(),state:H()});return}const b=(f==null?void 0:f.onDeselected)||B("onDeselected"),p=B("onDestroyed");if(document.body.classList.remove("driver-active","driver-fade","driver-simple"),To(),Mo(),Lo(),ko(),vo(),pi(),c&&f){const v=c.id==="driver-dummy-element";b&&b(v?void 0:c,f,{config:B(),state:H()}),p&&p(v?void 0:c,f,{config:B(),state:H()})}m&&m.focus()}return{isActive:()=>H("isInitialized")||!1,refresh:jt,drive:(d=0)=>{s(),a(d)},setConfig:ct,setSteps:d=>{pi(),ct({...B(),steps:d})},getConfig:B,getState:H,getActiveIndex:()=>H("activeIndex"),isFirstStep:()=>H("activeIndex")===0,isLastStep:()=>{const d=B("steps")||[],c=H("activeIndex");return c!==void 0&&c===d.length-1},getActiveStep:()=>H("activeStep"),getActiveElement:()=>H("activeElement"),getPreviousElement:()=>H("previousElement"),getPreviousStep:()=>H("previousStep"),moveNext:n,movePrevious:i,moveTo:l,hasNextStep:()=>{const d=B("steps")||[],c=H("activeIndex");return c!==void 0&&d[c+1]},hasPreviousStep:()=>{const d=B("steps")||[],c=H("activeIndex");return c!==void 0&&d[c-1]},highlight:d=>{s(),bi({...d,popover:d.popover?{showButtons:[],showProgress:!1,progressText:"",...d.popover}:void 0})},destroy:()=>{u(!1)}}}function _e(){}const Di=t=>t;function Wt(t,e){for(const n in e)t[n]=e[n];return t}function Ci(t){return t()}function Li(){return Object.create(null)}function Ye(t){t.forEach(Ci)}function dn(t){return typeof t=="function"}function we(t,e){return t!=t?e==e:t!==e||t&&typeof t=="object"||typeof t=="function"}let cn;function Pi(t,e){return t===e?!0:(cn||(cn=document.createElement("a")),cn.href=e,t===cn.href)}function Ro(t){return Object.keys(t).length===0}function Ii(t,e,n,i){if(t){const l=Ti(t,e,n,i);return t[0](l)}}function Ti(t,e,n,i){return t[1]&&i?Wt(n.ctx.slice(),t[1](i(e))):n.ctx}function Ai(t,e,n,i){if(t[2]&&i){const l=t[2](i(n));if(e.dirty===void 0)return l;if(typeof l=="object"){const o=[],r=Math.max(e.dirty.length,l.length);for(let s=0;s<r;s+=1)o[s]=e.dirty[s]|l[s];return o}return e.dirty|l}return e.dirty}function Ni(t,e,n,i,l,o){if(l){const r=Ti(e,n,i,o);t.p(r,l)}}function Oi(t){if(t.ctx.length>32){const e=[],n=t.ctx.length/32;for(let i=0;i<n;i++)e[i]=-1;return e}return-1}const Mi=typeof window<"u";let Bo=Mi?()=>window.performance.now():()=>Date.now(),Fn=Mi?t=>requestAnimationFrame(t):_e;const kt=new Set;function Fi(t){kt.forEach(e=>{e.c(t)||(kt.delete(e),e.f())}),kt.size!==0&&Fn(Fi)}function Ho(t){let e;return kt.size===0&&Fn(Fi),{promise:new Promise(n=>{kt.add(e={c:t,f:n})}),abort(){kt.delete(e)}}}function _(t,e){t.appendChild(e)}function Ri(t){if(!t)return document;const e=t.getRootNode?t.getRootNode():t.ownerDocument;return e&&e.host?e:t.ownerDocument}function jo(t){const e=D("style");return e.textContent="/* empty */",Wo(Ri(t),e),e.sheet}function Wo(t,e){return _(t.head||t,e),e.sheet}function G(t,e,n){t.insertBefore(e,n||null)}function j(t){t.parentNode&&t.parentNode.removeChild(t)}function qt(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}function D(t){return document.createElement(t)}function pe(t){return document.createTextNode(t)}function R(){return pe(" ")}function Rn(){return pe("")}function le(t,e,n,i){return t.addEventListener(e,n,i),()=>t.removeEventListener(e,n,i)}function ft(t){return function(e){return e.preventDefault(),t.call(this,e)}}function Bn(t){return function(e){return e.stopPropagation(),t.call(this,e)}}function g(t,e,n){n==null?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}const qo=["width","height"];function pt(t,e){const n=Object.getOwnPropertyDescriptors(t.__proto__);for(const i in e)e[i]==null?t.removeAttribute(i):i==="style"?t.style.cssText=e[i]:i==="__value"?t.value=t[i]=e[i]:n[i]&&n[i].set&&qo.indexOf(i)===-1?t[i]=e[i]:g(t,i,e[i])}function Go(t){return Array.from(t.childNodes)}function Be(t,e){e=""+e,t.data!==e&&(t.data=e)}function ue(t,e,n,i){n==null?t.style.removeProperty(e):t.style.setProperty(e,n,"")}function me(t,e,n){t.classList.toggle(e,!!n)}function Bi(t,e,{bubbles:n=!1,cancelable:i=!1}={}){return new CustomEvent(t,{detail:e,bubbles:n,cancelable:i})}const fn=new Map;let pn=0;function zo(t){let e=5381,n=t.length;for(;n--;)e=(e<<5)-e^t.charCodeAt(n);return e>>>0}function Xo(t,e){const n={stylesheet:jo(e),rules:{}};return fn.set(t,n),n}function Hi(t,e,n,i,l,o,r,s=0){const a=16.666/i;let u=`{
`;for(let p=0;p<=1;p+=a){const v=e+(n-e)*o(p);u+=p*100+`%{${r(v,1-v)}}
`}const d=u+`100% {${r(n,1-n)}}
}`,c=`__svelte_${zo(d)}_${s}`,f=Ri(t),{stylesheet:m,rules:h}=fn.get(f)||Xo(f,t);h[c]||(h[c]=!0,m.insertRule(`@keyframes ${c} ${d}`,m.cssRules.length));const b=t.style.animation||"";return t.style.animation=`${b?`${b}, `:""}${c} ${i}ms linear ${l}ms 1 both`,pn+=1,c}function Yo(t,e){const n=(t.style.animation||"").split(", "),i=n.filter(e?o=>o.indexOf(e)<0:o=>o.indexOf("__svelte")===-1),l=n.length-i.length;l&&(t.style.animation=i.join(", "),pn-=l,pn||xo())}function xo(){Fn(()=>{pn||(fn.forEach(t=>{const{ownerNode:e}=t.stylesheet;e&&j(e)}),fn.clear())})}let Gt;function zt(t){Gt=t}function hn(){if(!Gt)throw new Error("Function called outside component initialization");return Gt}function St(t){hn().$$.on_mount.push(t)}function Uo(t){hn().$$.after_update.push(t)}function Hn(t){hn().$$.on_destroy.push(t)}function ji(){const t=hn();return(e,n,{cancelable:i=!1}={})=>{const l=t.$$.callbacks[e];if(l){const o=Bi(e,n,{cancelable:i});return l.slice().forEach(r=>{r.call(t,o)}),!o.defaultPrevented}return!0}}const Dt=[],Le=[];let Ct=[];const Wi=[],qi=Promise.resolve();let jn=!1;function Gi(){jn||(jn=!0,qi.then(zi))}function Lt(){return Gi(),qi}function Xt(t){Ct.push(t)}const Wn=new Set;let Pt=0;function zi(){if(Pt!==0)return;const t=Gt;do{try{for(;Pt<Dt.length;){const e=Dt[Pt];Pt++,zt(e),Vo(e.$$)}}catch(e){throw Dt.length=0,Pt=0,e}for(zt(null),Dt.length=0,Pt=0;Le.length;)Le.pop()();for(let e=0;e<Ct.length;e+=1){const n=Ct[e];Wn.has(n)||(Wn.add(n),n())}Ct.length=0}while(Dt.length);for(;Wi.length;)Wi.pop()();jn=!1,Wn.clear(),zt(t)}function Vo(t){if(t.fragment!==null){t.update(),Ye(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(Xt)}}function Jo(t){const e=[],n=[];Ct.forEach(i=>t.indexOf(i)===-1?e.push(i):n.push(i)),n.forEach(i=>i()),Ct=e}let Yt;function Ko(){return Yt||(Yt=Promise.resolve(),Yt.then(()=>{Yt=null})),Yt}function qn(t,e,n){t.dispatchEvent(Bi(`${e?"intro":"outro"}${n}`))}const mn=new Set;let ot;function Xi(){ot={r:0,c:[],p:ot}}function Yi(){ot.r||Ye(ot.c),ot=ot.p}function Se(t,e){t&&t.i&&(mn.delete(t),t.i(e))}function Pe(t,e,n,i){if(t&&t.o){if(mn.has(t))return;mn.add(t),ot.c.push(()=>{mn.delete(t),i&&(n&&t.d(1),i())}),t.o(e)}else i&&i()}const Qo={duration:0};function xi(t,e,n,i){let o=e(t,n,{direction:"both"}),r=i?0:1,s=null,a=null,u=null,d;function c(){u&&Yo(t,u)}function f(h,b){const p=h.b-r;return b*=Math.abs(p),{a:r,b:h.b,d:p,duration:b,start:h.start,end:h.start+b,group:h.group}}function m(h){const{delay:b=0,duration:p=300,easing:v=Di,tick:S=_e,css:k}=o||Qo,C={start:Bo()+b,b:h};h||(C.group=ot,ot.r+=1),"inert"in t&&(h?d!==void 0&&(t.inert=d):(d=t.inert,t.inert=!0)),s||a?a=C:(k&&(c(),u=Hi(t,r,h,p,b,v,k)),h&&S(0,1),s=f(C,p),Xt(()=>qn(t,h,"start")),Ho(E=>{if(a&&E>a.start&&(s=f(a,p),a=null,qn(t,s.b,"start"),k&&(c(),u=Hi(t,r,s.b,s.duration,0,v,o.css))),s){if(E>=s.end)S(r=s.b,1-r),qn(t,s.b,"end"),a||(s.b?c():--s.group.r||Ye(s.group.c)),s=null;else if(E>=s.start){const L=E-s.start;r=s.a+s.d*v(L/s.duration),S(r,1-r)}}return!!(s||a)}))}return{run(h){dn(o)?Ko().then(()=>{o=o({direction:h?"in":"out"}),m(h)}):m(h)},end(){c(),s=a=null}}}function ge(t){return(t==null?void 0:t.length)!==void 0?t:Array.from(t)}function It(t,e){t.d(1),e.delete(t.key)}function Tt(t,e,n,i,l,o,r,s,a,u,d,c){let f=t.length,m=o.length,h=f;const b={};for(;h--;)b[t[h].key]=h;const p=[],v=new Map,S=new Map,k=[];for(h=m;h--;){const w=c(l,o,h),I=n(w);let y=r.get(I);y?k.push(()=>y.p(w,e)):(y=u(I,w),y.c()),v.set(I,p[h]=y),I in b&&S.set(I,Math.abs(h-b[I]))}const C=new Set,E=new Set;function L(w){Se(w,1),w.m(s,d),r.set(w.key,w),d=w.first,m--}for(;f&&m;){const w=p[m-1],I=t[f-1],y=w.key,W=I.key;w===I?(d=w.first,f--,m--):v.has(W)?!r.has(y)||C.has(y)?L(w):E.has(W)?f--:S.get(y)>S.get(W)?(E.add(y),L(w)):(C.add(W),f--):(a(I,r),f--)}for(;f--;){const w=t[f];v.has(w.key)||a(w,r)}for(;m;)L(p[m-1]);return Ye(k),p}function gn(t,e){const n={},i={},l={$$scope:1};let o=t.length;for(;o--;){const r=t[o],s=e[o];if(s){for(const a in r)a in s||(i[a]=1);for(const a in s)l[a]||(n[a]=s[a],l[a]=1);t[o]=s}else for(const a in r)l[a]=1}for(const r in i)r in n||(n[r]=void 0);return n}function Ke(t){t&&t.c()}function xe(t,e,n){const{fragment:i,after_update:l}=t.$$;i&&i.m(e,n),Xt(()=>{const o=t.$$.on_mount.map(Ci).filter(dn);t.$$.on_destroy?t.$$.on_destroy.push(...o):Ye(o),t.$$.on_mount=[]}),l.forEach(Xt)}function Ue(t,e){const n=t.$$;n.fragment!==null&&(Jo(n.after_update),Ye(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function Zo(t,e){t.$$.dirty[0]===-1&&(Dt.push(t),Gi(),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function Ie(t,e,n,i,l,o,r=null,s=[-1]){const a=Gt;zt(t);const u=t.$$={fragment:null,ctx:[],props:o,update:_e,not_equal:l,bound:Li(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(a?a.$$.context:[])),callbacks:Li(),dirty:s,skip_bound:!1,root:e.target||a.$$.root};r&&r(u.root);let d=!1;if(u.ctx=n?n(t,e.props||{},(c,f,...m)=>{const h=m.length?m[0]:f;return u.ctx&&l(u.ctx[c],u.ctx[c]=h)&&(!u.skip_bound&&u.bound[c]&&u.bound[c](h),d&&Zo(t,c)),f}):[],u.update(),d=!0,Ye(u.before_update),u.fragment=i?i(u.ctx):!1,e.target){if(e.hydrate){const c=Go(e.target);u.fragment&&u.fragment.l(c),c.forEach(j)}else u.fragment&&u.fragment.c();e.intro&&Se(t.$$.fragment),xe(t,e.target,e.anchor),zi()}zt(a)}class Te{constructor(){di(this,"$$");di(this,"$$set")}$destroy(){Ue(this,1),this.$destroy=_e}$on(e,n){if(!dn(n))return _e;const i=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return i.push(n),()=>{const l=i.indexOf(n);l!==-1&&i.splice(l,1)}}$set(e){this.$$set&&!Ro(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}const $o="4",At=[];function ht(t,e=_e){let n;const i=new Set;function l(s){if(we(t,s)&&(t=s,n)){const a=!At.length;for(const u of i)u[1](),At.push(u,t);if(a){for(let u=0;u<At.length;u+=2)At[u][0](At[u+1]);At.length=0}}}function o(s){l(s(t))}function r(s,a=_e){const u=[s,a];return i.add(u),i.size===1&&(n=e(l,o)||_e),s(t),()=>{i.delete(u),i.size===0&&n&&(n(),n=null)}}return{set:l,update:o,subscribe:r}}const Gn=ht({}),O={setTranslations(t){Gn.set(t)},has(t,e,n){let i=!1;return Gn.subscribe(l=>{if(n in l&&e in l[n]&&t in l[n][e]){i=!0;return}})(),i},get(t,e,n){let i=n;return Gn.subscribe(l=>{if(t in l&&e in l[t]&&n in l[t][e]){i=l[t][e][n];return}if(t in l&&e in l[t]&&n in l[t][e]){i=l[t][e][n];return}if(t=="Global"){i=n;return}i=null})(),i},translate(t,e=null,n=null){n=n||"Global",e=e||"labels";let i=O.get(n,e,t);return i===null&&n!="Global"&&(i=O.get("Global",e,t)),i},translateOption(t,e,n=null){let i=O.translate(e,"options",n);return i===null?"":typeof i=="object"?i[t]:t}},Ui=ht({}),zn={set(t){Ui.set(t)},get(){let t=null;return Ui.subscribe(e=>{e&&(t=e)})(),t}},Xn=ht(),He={setNotifier(t){Xn.set(t)},notify(t,e=null,n=2e3){Xn.subscribe(i=>{i&&i.notify(t,e,2e3)})()},confirm(t=null,e=null,n){Xn.subscribe(i=>{if(i){let l=null,o=null,r=null;typeof t=="string"||t instanceof String?(o=t,r=O.translate("Yes")):(t=t||{},o=t.message,r=t.confirmText,l=t.confirmStyle||null),i.confirm(o,{confirmText:r,cancelText:O.translate("Cancel"),confirmStyle:l},e,n)}})()}},bn=ht(),tt={setLayoutManager(t){bn.set(t)},resetToDefault(t,e,n,i,l){let o=null;return bn.subscribe(r=>{r&&(o=r.resetToDefault(t,e,n,i,l))})(),o},get:function(t,e,n,i,l,o){let r=null;return bn.subscribe(s=>{s&&(r=s.get(t,e,n,i,l,o))})(),r},set:function(t,e,n,i,l,o){let r=null;return bn.subscribe(s=>{s&&(r=s.set(t,e,n,i,l,o))})(),r}},Vi=ht(),ce={setMetadata(t){Vi.set(t)},get(t){let e=null;return Vi.subscribe(n=>{n&&(e=n.get(t))})(),e}},Ji=ht(),xt={setModelFactory(t){Ji.set(t)},create(t,e){Ji.subscribe(n=>{n&&n.create(t,e)})()}},Ki=ht(),Qi={setConfig(t){Ki.set(t)},get(t){let e=null;return Ki.subscribe(n=>{n&&(e=n.get(t))})(),e}},Ut=ht(),Ae={setStorage(t){Ut.set(t)},get(t,e){let n=null;return Ut.subscribe(i=>{i&&(n=i.get(t,e))})(),n},has(t,e){let n=null;return Ut.subscribe(i=>{i&&(n=i.has(t,e))})(),n},clear(t,e){Ut.subscribe(n=>{n&&n.clear(t,e)})()},set(t,e,n){Ut.subscribe(i=>{i&&i.set(t,e,n)})()}};typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add($o);function Zi(t){let e,n,i,l,o,r,s,a,u,d,c,f,m,h,b;function p(k,C){return k[2]?tr:er}let v=p(t),S=v(t);return{c(){e=D("div"),n=D("div"),i=D("div"),l=D("span"),l.textContent=`${O.translate("jobManager")}`,o=R(),r=D("span"),s=D("a"),s.innerHTML='<span aria-hidden="true">×</span>',a=R(),S.c(),u=R(),d=D("a"),d.textContent=`${O.translate("View List")}`,c=R(),f=D("div"),m=D("div"),m.textContent=`${O.translate("Loading...")}`,g(l,"class","panel-heading-title"),g(s,"href","/"),g(s,"class","close svelte-1p6ppx8"),g(d,"href","#Job"),g(d,"title",O.translate("View List")),g(d,"class","qp-view-list svelte-1p6ppx8"),g(r,"class","pull-right"),g(i,"class","panel-heading clearfix"),g(m,"class","list-container"),g(f,"class","panel-body"),g(n,"class","panel panel-default"),g(e,"class","queue-panel-container")},m(k,C){G(k,e,C),_(e,n),_(n,i),_(i,l),_(i,o),_(i,r),_(r,s),_(r,a),S.m(r,null),_(r,u),_(r,d),_(n,c),_(n,f),_(f,m),t[9](e),h||(b=le(s,"click",t[6]),h=!0)},p(k,C){v===(v=p(k))&&S?S.p(k,C):(S.d(1),S=v(k),S&&(S.c(),S.m(r,u)))},d(k){k&&j(e),S.d(),t[9](null),h=!1,b()}}}function er(t){let e,n,i;return{c(){e=D("a"),e.textContent=`${O.translate("Pause")}`,g(e,"href","/"),g(e,"title",O.translate("Pause")),g(e,"class","qm-button")},m(l,o){G(l,e,o),n||(i=le(e,"click",t[8]),n=!0)},p:_e,d(l){l&&j(e),n=!1,i()}}}function tr(t){let e,n,i;return{c(){e=D("a"),e.textContent=`${O.translate("Start")}`,g(e,"href","/"),g(e,"title",O.translate("Start")),g(e,"class","qm-button")},m(l,o){G(l,e,o),n||(i=le(e,"click",t[7]),n=!0)},p:_e,d(l){l&&j(e),n=!1,i()}}}function nr(t){let e,n=t[0]&&Zi(t);return{c(){n&&n.c(),e=Rn()},m(i,l){n&&n.m(i,l),G(i,e,l)},p(i,[l]){i[0]?n?n.p(i,l):(n=Zi(i),n.c(),n.m(e.parentNode,e)):n&&(n.d(1),n=null)},i:_e,o:_e,d(i){i&&j(e),n&&n.d(i)}}}function ir(t,e,n){let{isOpen:i=!1}=e,{close:l}=e,{icon:o}=e,r=!1;window.addEventListener("publicDataFetched",h=>{n(2,r=!!h.detail.qmPaused)});let s;function a(h){s&&!s.contains(h.target)&&o&&!o.contains(h.target)&&i===!0&&l()}St(()=>{document.addEventListener("click",a)}),Hn(()=>{document.removeEventListener("click",a)});async function u(h){let b=zn.get();if(b)try{const p=await fetch("/api/v1/App/action/QueueManagerUpdate",{method:"POST",headers:{"Content-Type":"application/json","Authorization-Token":btoa(b.user.userName+":"+b.token)},body:JSON.stringify({pause:h})});if(!p.ok)throw new Error("Network response was not ok");await p.json(),He.notify("Done","success")}catch(p){console.error("Error:",p)}}const d=h=>{h.preventDefault(),l()},c=h=>{h.preventDefault(),u(!1)},f=h=>{h.preventDefault(),u(!0)};function m(h){Le[h?"unshift":"push"](()=>{s=h,n(3,s)})}return t.$$set=h=>{"isOpen"in h&&n(0,i=h.isOpen),"close"in h&&n(1,l=h.close),"icon"in h&&n(5,o=h.icon)},[i,l,r,s,u,o,d,c,f,m]}class lr extends Te{constructor(e){super(),Ie(this,e,ir,nr,we,{isOpen:0,close:1,icon:5})}}function $i(t){let e;return{c(){e=D("span"),g(e,"class","fas fa-pause-circle pause-icon")},m(n,i){G(n,e,i)},d(n){n&&j(e)}}}function or(t){let e,n,i,l,o,r,s,a,u=t[2]&&$i();return o=new lr({props:{icon:t[0],isOpen:t[1],close:t[4]}}),{c(){e=D("a"),n=D("span"),i=R(),u&&u.c(),l=R(),Ke(o.$$.fragment),g(n,"class","fas fa-tasks"),g(e,"href","/"),g(e,"class","notifications-button")},m(d,c){G(d,e,c),_(e,n),_(e,i),u&&u.m(e,null),t[6](e),G(d,l,c),xe(o,d,c),r=!0,s||(a=le(e,"click",t[7]),s=!0)},p(d,[c]){d[2]?u||(u=$i(),u.c(),u.m(e,null)):u&&(u.d(1),u=null);const f={};c&1&&(f.icon=d[0]),c&2&&(f.isOpen=d[1]),o.$set(f)},i(d){r||(Se(o.$$.fragment,d),r=!0)},o(d){Pe(o.$$.fragment,d),r=!1},d(d){d&&(j(e),j(l)),u&&u.d(),t[6](null),Ue(o,d),s=!1,a()}}}function rr(t,e,n){let{renderTable:i=()=>{}}=e,l,o=!1,r=!1;window.addEventListener("publicDataFetched",c=>{n(2,r=!!c.detail.qmPaused)});function s(){o||(n(1,o=!0),i())}function a(){n(1,o=!1),window.dispatchEvent(new Event("jobManagerPanelClosed"))}function u(c){Le[c?"unshift":"push"](()=>{l=c,n(0,l)})}const d=c=>{c.preventDefault(),s()};return t.$$set=c=>{"renderTable"in c&&n(5,i=c.renderTable)},[l,o,r,s,a,i,u,d]}class ar extends Te{constructor(e){super(),Ie(this,e,rr,or,we,{renderTable:5})}}function sr(t){let e,n=`${t[0]}px`,i=`${t[0]}px`,l=`${t[1]}px`;return{c(){e=D("div"),g(e,"class","loading-icon spinner svelte-yw8t7l"),ue(e,"width",n),ue(e,"height",i),ue(e,"border-width",l)},m(o,r){G(o,e,r)},p(o,[r]){r&1&&n!==(n=`${o[0]}px`)&&ue(e,"width",n),r&1&&i!==(i=`${o[0]}px`)&&ue(e,"height",i),r&2&&l!==(l=`${o[1]}px`)&&ue(e,"border-width",l)},i:_e,o:_e,d(o){o&&j(e)}}}function ur(t,e,n){let{size:i=40}=e,{thickness:l=4}=e;return t.$$set=o=>{"size"in o&&n(0,i=o.size),"thickness"in o&&n(1,l=o.thickness)},[i,l]}class dr extends Te{constructor(e){super(),Ie(this,e,ur,sr,we,{size:0,thickness:1})}}function el(t){let e,n;return{c(){e=D("img"),Pi(e.src,n=t[1])||g(e,"src",n),g(e,"class","logo"),g(e,"alt",t[0])},m(i,l){G(i,e,l)},p(i,l){l&2&&!Pi(e.src,n=i[1])&&g(e,"src",n),l&1&&g(e,"alt",i[0])},d(i){i&&j(e)}}}function tl(t){let e,n,i;return{c(){e=D("a"),n=D("i"),i=pe("Recovery Instructions"),g(n,"class","fa fa-history svelte-1qmezxs"),g(e,"href",t[2]),g(e,"target","_blank"),g(e,"class","btn btn-default svelte-1qmezxs"),g(e,"role","button"),ue(e,"float","right")},m(l,o){G(l,e,o),_(e,n),_(e,i)},p(l,o){o&4&&g(e,"href",l[2])},d(l){l&&j(e)}}}function nl(t){let e,n,i,l,o,r;return{c(){e=D("hr"),n=R(),i=D("pre"),l=pe(t[3]),g(i,"class","logs-container svelte-1qmezxs")},m(s,a){G(s,e,a),G(s,n,a),G(s,i,a),_(i,l),t[11](i),o||(r=le(i,"scroll",t[8]),o=!0)},p(s,a){a&8&&Be(l,s[3])},d(s){s&&(j(e),j(n),j(i)),t[11](null),o=!1,r()}}}function cr(t){let e,n,i,l,o,r,s,a,u,d,c,f,m,h,b,p,v,S,k=t[4]?"Hide":"Show",C,E,L,w,I,y,W,Y,F=t[1]&&el(t);d=new dr({props:{size:"40",thickness:"5"}});let Q=t[2]&&tl(t),Z=t[4]&&t[3]&&nl(t);return{c(){e=D("div"),n=D("div"),i=D("div"),F&&F.c(),l=R(),o=D("div"),r=D("div"),s=D("h3"),s.textContent="System is updating...",a=R(),u=D("section"),Ke(d.$$.fragment),c=R(),f=D("h5"),m=pe(t[5]),h=R(),b=D("section"),p=D("div"),v=D("button"),S=D("i"),C=pe(k),E=pe(" logs"),w=R(),Q&&Q.c(),I=R(),Z&&Z.c(),g(i,"class","logo-container"),g(n,"class","panel-heading"),g(f,"class","svelte-1qmezxs"),g(u,"class","progress-section svelte-1qmezxs"),g(S,"class","fa fa-list svelte-1qmezxs"),g(v,"class","btn btn-default svelte-1qmezxs"),v.disabled=L=!t[3],g(p,"class","buttons"),g(b,"class","logs-section"),g(r,"class","form-group"),g(o,"class","panel-body"),g(e,"id","login"),g(e,"class","panel panel-default panel-updating")},m(A,z){G(A,e,z),_(e,n),_(n,i),F&&F.m(i,null),_(e,l),_(e,o),_(o,r),_(r,s),_(r,a),_(r,u),xe(d,u,null),_(u,c),_(u,f),_(f,m),_(r,h),_(r,b),_(b,p),_(p,v),_(v,S),_(v,C),_(v,E),_(p,w),Q&&Q.m(p,null),_(b,I),Z&&Z.m(b,null),y=!0,W||(Y=le(v,"click",t[7]),W=!0)},p(A,[z]){A[1]?F?F.p(A,z):(F=el(A),F.c(),F.m(i,null)):F&&(F.d(1),F=null),(!y||z&32)&&Be(m,A[5]),(!y||z&16)&&k!==(k=A[4]?"Hide":"Show")&&Be(C,k),(!y||z&8&&L!==(L=!A[3]))&&(v.disabled=L),A[2]?Q?Q.p(A,z):(Q=tl(A),Q.c(),Q.m(p,null)):Q&&(Q.d(1),Q=null),A[4]&&A[3]?Z?Z.p(A,z):(Z=nl(A),Z.c(),Z.m(b,null)):Z&&(Z.d(1),Z=null)},i(A){y||(Se(d.$$.fragment,A),y=!0)},o(A){Pe(d.$$.fragment,A),y=!1},d(A){A&&j(e),F&&F.d(),Ue(d),Q&&Q.d(),Z&&Z.d(),W=!1,Y()}}}function fr(t){return t.replace(/^\d{2,4}.\d{2}.\d{2,4} \d{2}:\d{2}:\d{2}/g,"").replace(/^[\-\|\s]+/,"")}function pr(t,e,n){let{applicationName:i="AtroCore"}=e,{logoPath:l=null}=e,{logFilePath:o}=e,{restoreLink:r=null}=e,s=!1,a=!1,u=0,d=!0,c="",f,m;Uo(()=>{m&&d&&m.scrollTo(0,m.scrollHeight)});function h(){n(4,s=!s),s||(d=!0)}function b(v){const S=v.currentTarget;d=S.scrollHeight-S.scrollTop===S.clientHeight}setInterval(async()=>{try{const v=await fetch(o,{cache:"no-store"});u+=1,v.ok?(n(3,c=(await v.text()).trim()),c.search("composer")>=0&&n(10,a=!0),u>65&&!a&&n(3,c="Something wrong. Please, reboot the server.")):a?setTimeout(()=>{location.reload()},2e3):u>65&&n(3,c="Something wrong. Please, reboot the server.")}catch(v){console.error("Error: ",v)}},1e3);function p(v){Le[v?"unshift":"push"](()=>{m=v,n(6,m)})}return t.$$set=v=>{"applicationName"in v&&n(0,i=v.applicationName),"logoPath"in v&&n(1,l=v.logoPath),"logFilePath"in v&&n(9,o=v.logFilePath),"restoreLink"in v&&n(2,r=v.restoreLink)},t.$$.update=()=>{if(t.$$.dirty&1032)if(c){const v=c.trim().split(`
`);n(5,f=fr(v.pop()))}else a?n(5,f=""):n(5,f="Starting...")},[i,l,r,c,s,f,m,h,b,o,a,p]}class hr extends Te{constructor(e){super(),Ie(this,e,pr,cr,we,{applicationName:0,logoPath:1,logFilePath:9,restoreLink:2})}}function il(t,e,n){const i=t.slice();return i[19]=e[n],i}function ll(t){let e,n=t[19].label+"",i,l,o,r,s,a;function u(){return t[12](t[19])}return{c(){e=D("button"),i=pe(n),l=R(),g(e,"data-action",o=t[19].name),e.disabled=t[1],g(e,"type","button"),g(e,"class",r=`btn action btn-${t[19].style??"default"}`)},m(d,c){G(d,e,c),_(e,i),_(e,l),s||(a=le(e,"click",u),s=!0)},p(d,c){t=d,c&1&&n!==(n=t[19].label+"")&&Be(i,n),c&1&&o!==(o=t[19].name)&&g(e,"data-action",o),c&2&&(e.disabled=t[1]),c&1&&r!==(r=`btn action btn-${t[19].style??"default"}`)&&g(e,"class",r)},d(d){d&&j(e),s=!1,a()}}}function mr(t){let e,n,i,l=ge(t[0]),o=[];for(let a=0;a<l.length;a+=1)o[a]=ll(il(t,l,a));const r=t[11].default,s=Ii(r,t,t[10],null);return{c(){e=D("div");for(let a=0;a<o.length;a+=1)o[a].c();n=R(),s&&s.c(),g(e,"class","button-container"),ue(e,"padding-top","10px")},m(a,u){G(a,e,u);for(let d=0;d<o.length;d+=1)o[d]&&o[d].m(e,null);t[13](e),G(a,n,u),s&&s.m(a,u),i=!0},p(a,[u]){if(u&11){l=ge(a[0]);let d;for(d=0;d<l.length;d+=1){const c=il(a,l,d);o[d]?o[d].p(c,u):(o[d]=ll(c),o[d].c(),o[d].m(e,null))}for(;d<o.length;d+=1)o[d].d(1);o.length=l.length}s&&s.p&&(!i||u&1024)&&Ni(s,r,a,a[10],i?Ai(r,a[10],u,null):Oi(a[10]),null)},i(a){i||(Se(s,a),i=!0)},o(a){Pe(s,a),i=!1},d(a){a&&(j(e),j(n)),qt(o,a),t[13](null),s&&s.d(a)}}}function gr(t,e,n){let{$$slots:i={},$$scope:l}=e,{params:o}=e,{fetch:r}=e,s,{loadLayout:a=()=>{tt.get(scope,type,layoutProfileId,E=>{n(9,s=E.layout)},!1)}}=e,{validate:u=()=>!0}=e,d=!1,c=[],f;o.layoutProfiles,St(async()=>{var L;m(),await Lt();const E=document.querySelector("#layout-buttons");f&&E&&o.inModal&&((L=E.closest(".modal-body"))==null||L.classList.add("modal-layout-manager"),E.appendChild(f))});function m(){He.notify("Loading..."),a(E=>{n(9,s=E),He.notify(!1),o.afterRender&&o.afterRender()})}function h(){n(1,d=!0);const E=r();if(!u(E)){n(1,d=!1);return}if(He.notify("Saving..."),o.inModal&&!o.getActiveLayoutProfileId()){b(!0);return}tt.set(o.scope,o.type,o.relatedScope,o.layoutProfileId,E,()=>{He.notify("Saved","success",2e3),b(!1),n(1,d=!1),o.inModal||a()})}function b(E){o.onUpdate&&o.onUpdate(E)}function p(){a()}function v(){He.confirm("Are you sure you want to reset this layout?",()=>{var E;tt.resetToDefault(o.scope,o.type,o.relatedScope,(E=s.storedProfile)==null?void 0:E.id,()=>{b(!0),p()})})}function S(E){switch(E.name){case"save":h();break;case"cancel":p();break;case"reset":v();break;case"fullEdit":window.open(`#Admin/layouts/scope=${o.scope}&type=${o.type}${o.relatedScope?"&relatedScope="+o.relatedScope:""}${o.layoutProfileId?"&layoutProfileId="+o.layoutProfileId:""}`,"_blank");break}}const k=E=>S(E);function C(E){Le[E?"unshift":"push"](()=>{f=E,n(2,f)})}return t.$$set=E=>{"params"in E&&n(4,o=E.params),"fetch"in E&&n(5,r=E.fetch),"loadLayout"in E&&n(6,a=E.loadLayout),"validate"in E&&n(7,u=E.validate),"$$scope"in E&&n(10,l=E.$$scope)},t.$$.update=()=>{if(t.$$.dirty&529){if(n(0,c=[{name:"cancel",label:O.translate("Cancel","labels")}]),o.inModal){let E=zn.get();E&&E.user&&E.user.isAdmin&&c.push({name:"fullEdit",label:O.translate("Full Edit","labels","LayoutManager")})}(!o.inModal||s!=null&&s.canEdit)&&c.unshift({name:"save",label:O.translate("Save","labels"),style:"primary"}),s&&s.storedProfile&&s.storedProfile.id===o.layoutProfileId&&s.canEdit&&c.push({name:"reset",label:O.translate("reset","labels","LayoutManager")})}},[c,d,f,S,o,r,a,u,h,s,l,i,k,C]}let ol=class extends Te{constructor(e){super(),Ie(this,e,gr,mr,we,{params:4,fetch:5,loadLayout:6,validate:7,save:8})}get save(){return this.$$.ctx[8]}};/**!
 * Sortable 1.15.6
 * @author	RubaXa   <trash@rubaxa.org>
 * @author	owenm    <owen23355@gmail.com>
 * @license MIT
 */function rl(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(l){return Object.getOwnPropertyDescriptor(t,l).enumerable})),n.push.apply(n,i)}return n}function nt(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?rl(Object(n),!0).forEach(function(i){br(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):rl(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function vn(t){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?vn=function(e){return typeof e}:vn=function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},vn(t)}function br(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function rt(){return rt=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},rt.apply(this,arguments)}function vr(t,e){if(t==null)return{};var n={},i=Object.keys(t),l,o;for(o=0;o<i.length;o++)l=i[o],!(e.indexOf(l)>=0)&&(n[l]=t[l]);return n}function _r(t,e){if(t==null)return{};var n=vr(t,e),i,l;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(l=0;l<o.length;l++)i=o[l],!(e.indexOf(i)>=0)&&Object.prototype.propertyIsEnumerable.call(t,i)&&(n[i]=t[i])}return n}var wr="1.15.6";function at(t){if(typeof window<"u"&&window.navigator)return!!navigator.userAgent.match(t)}var st=at(/(?:Trident.*rv[ :]?11\.|msie|iemobile|Windows Phone)/i),Vt=at(/Edge/i),al=at(/firefox/i),Jt=at(/safari/i)&&!at(/chrome/i)&&!at(/android/i),Yn=at(/iP(ad|od|hone)/i),sl=at(/chrome/i)&&at(/android/i),ul={capture:!1,passive:!1};function te(t,e,n){t.addEventListener(e,n,!st&&ul)}function ee(t,e,n){t.removeEventListener(e,n,!st&&ul)}function _n(t,e){if(e){if(e[0]===">"&&(e=e.substring(1)),t)try{if(t.matches)return t.matches(e);if(t.msMatchesSelector)return t.msMatchesSelector(e);if(t.webkitMatchesSelector)return t.webkitMatchesSelector(e)}catch{return!1}return!1}}function dl(t){return t.host&&t!==document&&t.host.nodeType?t.host:t.parentNode}function Qe(t,e,n,i){if(t){n=n||document;do{if(e!=null&&(e[0]===">"?t.parentNode===n&&_n(t,e):_n(t,e))||i&&t===n)return t;if(t===n)break}while(t=dl(t))}return null}var cl=/\s+/g;function Ge(t,e,n){if(t&&e)if(t.classList)t.classList[n?"add":"remove"](e);else{var i=(" "+t.className+" ").replace(cl," ").replace(" "+e+" "," ");t.className=(i+(n?" "+e:"")).replace(cl," ")}}function x(t,e,n){var i=t&&t.style;if(i){if(n===void 0)return document.defaultView&&document.defaultView.getComputedStyle?n=document.defaultView.getComputedStyle(t,""):t.currentStyle&&(n=t.currentStyle),e===void 0?n:n[e];!(e in i)&&e.indexOf("webkit")===-1&&(e="-webkit-"+e),i[e]=n+(typeof n=="string"?"":"px")}}function Nt(t,e){var n="";if(typeof t=="string")n=t;else do{var i=x(t,"transform");i&&i!=="none"&&(n=i+" "+n)}while(!e&&(t=t.parentNode));var l=window.DOMMatrix||window.WebKitCSSMatrix||window.CSSMatrix||window.MSCSSMatrix;return l&&new l(n)}function fl(t,e,n){if(t){var i=t.getElementsByTagName(e),l=0,o=i.length;if(n)for(;l<o;l++)n(i[l],l);return i}return[]}function it(){var t=document.scrollingElement;return t||document.documentElement}function ye(t,e,n,i,l){if(!(!t.getBoundingClientRect&&t!==window)){var o,r,s,a,u,d,c;if(t!==window&&t.parentNode&&t!==it()?(o=t.getBoundingClientRect(),r=o.top,s=o.left,a=o.bottom,u=o.right,d=o.height,c=o.width):(r=0,s=0,a=window.innerHeight,u=window.innerWidth,d=window.innerHeight,c=window.innerWidth),(e||n)&&t!==window&&(l=l||t.parentNode,!st))do if(l&&l.getBoundingClientRect&&(x(l,"transform")!=="none"||n&&x(l,"position")!=="static")){var f=l.getBoundingClientRect();r-=f.top+parseInt(x(l,"border-top-width")),s-=f.left+parseInt(x(l,"border-left-width")),a=r+o.height,u=s+o.width;break}while(l=l.parentNode);if(i&&t!==window){var m=Nt(l||t),h=m&&m.a,b=m&&m.d;m&&(r/=b,s/=h,c/=h,d/=b,a=r+d,u=s+c)}return{top:r,left:s,bottom:a,right:u,width:c,height:d}}}function pl(t,e,n){for(var i=mt(t,!0),l=ye(t)[e];i;){var o=ye(i)[n],r=void 0;if(r=l>=o,!r)return i;if(i===it())break;i=mt(i,!1)}return!1}function Ot(t,e,n,i){for(var l=0,o=0,r=t.children;o<r.length;){if(r[o].style.display!=="none"&&r[o]!==X.ghost&&(i||r[o]!==X.dragged)&&Qe(r[o],n.draggable,t,!1)){if(l===e)return r[o];l++}o++}return null}function xn(t,e){for(var n=t.lastElementChild;n&&(n===X.ghost||x(n,"display")==="none"||e&&!_n(n,e));)n=n.previousElementSibling;return n||null}function Ve(t,e){var n=0;if(!t||!t.parentNode)return-1;for(;t=t.previousElementSibling;)t.nodeName.toUpperCase()!=="TEMPLATE"&&t!==X.clone&&(!e||_n(t,e))&&n++;return n}function hl(t){var e=0,n=0,i=it();if(t)do{var l=Nt(t),o=l.a,r=l.d;e+=t.scrollLeft*o,n+=t.scrollTop*r}while(t!==i&&(t=t.parentNode));return[e,n]}function yr(t,e){for(var n in t)if(t.hasOwnProperty(n)){for(var i in e)if(e.hasOwnProperty(i)&&e[i]===t[n][i])return Number(n)}return-1}function mt(t,e){if(!t||!t.getBoundingClientRect)return it();var n=t,i=!1;do if(n.clientWidth<n.scrollWidth||n.clientHeight<n.scrollHeight){var l=x(n);if(n.clientWidth<n.scrollWidth&&(l.overflowX=="auto"||l.overflowX=="scroll")||n.clientHeight<n.scrollHeight&&(l.overflowY=="auto"||l.overflowY=="scroll")){if(!n.getBoundingClientRect||n===document.body)return it();if(i||e)return n;i=!0}}while(n=n.parentNode);return it()}function Er(t,e){if(t&&e)for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t}function Un(t,e){return Math.round(t.top)===Math.round(e.top)&&Math.round(t.left)===Math.round(e.left)&&Math.round(t.height)===Math.round(e.height)&&Math.round(t.width)===Math.round(e.width)}var Kt;function ml(t,e){return function(){if(!Kt){var n=arguments,i=this;n.length===1?t.call(i,n[0]):t.apply(i,n),Kt=setTimeout(function(){Kt=void 0},e)}}}function kr(){clearTimeout(Kt),Kt=void 0}function gl(t,e,n){t.scrollLeft+=e,t.scrollTop+=n}function bl(t){var e=window.Polymer,n=window.jQuery||window.Zepto;return e&&e.dom?e.dom(t).cloneNode(!0):n?n(t).clone(!0)[0]:t.cloneNode(!0)}function vl(t,e,n){var i={};return Array.from(t.children).forEach(function(l){var o,r,s,a;if(!(!Qe(l,e.draggable,t,!1)||l.animated||l===n)){var u=ye(l);i.left=Math.min((o=i.left)!==null&&o!==void 0?o:1/0,u.left),i.top=Math.min((r=i.top)!==null&&r!==void 0?r:1/0,u.top),i.right=Math.max((s=i.right)!==null&&s!==void 0?s:-1/0,u.right),i.bottom=Math.max((a=i.bottom)!==null&&a!==void 0?a:-1/0,u.bottom)}}),i.width=i.right-i.left,i.height=i.bottom-i.top,i.x=i.left,i.y=i.top,i}var je="Sortable"+new Date().getTime();function Sr(){var t=[],e;return{captureAnimationState:function(){if(t=[],!!this.options.animation){var i=[].slice.call(this.el.children);i.forEach(function(l){if(!(x(l,"display")==="none"||l===X.ghost)){t.push({target:l,rect:ye(l)});var o=nt({},t[t.length-1].rect);if(l.thisAnimationDuration){var r=Nt(l,!0);r&&(o.top-=r.f,o.left-=r.e)}l.fromRect=o}})}},addAnimationState:function(i){t.push(i)},removeAnimationState:function(i){t.splice(yr(t,{target:i}),1)},animateAll:function(i){var l=this;if(!this.options.animation){clearTimeout(e),typeof i=="function"&&i();return}var o=!1,r=0;t.forEach(function(s){var a=0,u=s.target,d=u.fromRect,c=ye(u),f=u.prevFromRect,m=u.prevToRect,h=s.rect,b=Nt(u,!0);b&&(c.top-=b.f,c.left-=b.e),u.toRect=c,u.thisAnimationDuration&&Un(f,c)&&!Un(d,c)&&(h.top-c.top)/(h.left-c.left)===(d.top-c.top)/(d.left-c.left)&&(a=Cr(h,f,m,l.options)),Un(c,d)||(u.prevFromRect=d,u.prevToRect=c,a||(a=l.options.animation),l.animate(u,h,c,a)),a&&(o=!0,r=Math.max(r,a),clearTimeout(u.animationResetTimer),u.animationResetTimer=setTimeout(function(){u.animationTime=0,u.prevFromRect=null,u.fromRect=null,u.prevToRect=null,u.thisAnimationDuration=null},a),u.thisAnimationDuration=a)}),clearTimeout(e),o?e=setTimeout(function(){typeof i=="function"&&i()},r):typeof i=="function"&&i(),t=[]},animate:function(i,l,o,r){if(r){x(i,"transition",""),x(i,"transform","");var s=Nt(this.el),a=s&&s.a,u=s&&s.d,d=(l.left-o.left)/(a||1),c=(l.top-o.top)/(u||1);i.animatingX=!!d,i.animatingY=!!c,x(i,"transform","translate3d("+d+"px,"+c+"px,0)"),this.forRepaintDummy=Dr(i),x(i,"transition","transform "+r+"ms"+(this.options.easing?" "+this.options.easing:"")),x(i,"transform","translate3d(0,0,0)"),typeof i.animated=="number"&&clearTimeout(i.animated),i.animated=setTimeout(function(){x(i,"transition",""),x(i,"transform",""),i.animated=!1,i.animatingX=!1,i.animatingY=!1},r)}}}}function Dr(t){return t.offsetWidth}function Cr(t,e,n,i){return Math.sqrt(Math.pow(e.top-t.top,2)+Math.pow(e.left-t.left,2))/Math.sqrt(Math.pow(e.top-n.top,2)+Math.pow(e.left-n.left,2))*i.animation}var Mt=[],Vn={initializeByDefault:!0},Qt={mount:function(e){for(var n in Vn)Vn.hasOwnProperty(n)&&!(n in e)&&(e[n]=Vn[n]);Mt.forEach(function(i){if(i.pluginName===e.pluginName)throw"Sortable: Cannot mount plugin ".concat(e.pluginName," more than once")}),Mt.push(e)},pluginEvent:function(e,n,i){var l=this;this.eventCanceled=!1,i.cancel=function(){l.eventCanceled=!0};var o=e+"Global";Mt.forEach(function(r){n[r.pluginName]&&(n[r.pluginName][o]&&n[r.pluginName][o](nt({sortable:n},i)),n.options[r.pluginName]&&n[r.pluginName][e]&&n[r.pluginName][e](nt({sortable:n},i)))})},initializePlugins:function(e,n,i,l){Mt.forEach(function(s){var a=s.pluginName;if(!(!e.options[a]&&!s.initializeByDefault)){var u=new s(e,n,e.options);u.sortable=e,u.options=e.options,e[a]=u,rt(i,u.defaults)}});for(var o in e.options)if(e.options.hasOwnProperty(o)){var r=this.modifyOption(e,o,e.options[o]);typeof r<"u"&&(e.options[o]=r)}},getEventProperties:function(e,n){var i={};return Mt.forEach(function(l){typeof l.eventProperties=="function"&&rt(i,l.eventProperties.call(n[l.pluginName],e))}),i},modifyOption:function(e,n,i){var l;return Mt.forEach(function(o){e[o.pluginName]&&o.optionListeners&&typeof o.optionListeners[n]=="function"&&(l=o.optionListeners[n].call(e[o.pluginName],i))}),l}};function Lr(t){var e=t.sortable,n=t.rootEl,i=t.name,l=t.targetEl,o=t.cloneEl,r=t.toEl,s=t.fromEl,a=t.oldIndex,u=t.newIndex,d=t.oldDraggableIndex,c=t.newDraggableIndex,f=t.originalEvent,m=t.putSortable,h=t.extraEventProperties;if(e=e||n&&n[je],!!e){var b,p=e.options,v="on"+i.charAt(0).toUpperCase()+i.substr(1);window.CustomEvent&&!st&&!Vt?b=new CustomEvent(i,{bubbles:!0,cancelable:!0}):(b=document.createEvent("Event"),b.initEvent(i,!0,!0)),b.to=r||n,b.from=s||n,b.item=l||n,b.clone=o,b.oldIndex=a,b.newIndex=u,b.oldDraggableIndex=d,b.newDraggableIndex=c,b.originalEvent=f,b.pullMode=m?m.lastPutMode:void 0;var S=nt(nt({},h),Qt.getEventProperties(i,e));for(var k in S)b[k]=S[k];n&&n.dispatchEvent(b),p[v]&&p[v].call(e,b)}}var Pr=["evt"],We=function(e,n){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},l=i.evt,o=_r(i,Pr);Qt.pluginEvent.bind(X)(e,n,nt({dragEl:T,parentEl:be,ghostEl:V,rootEl:fe,nextEl:wt,lastDownEl:wn,cloneEl:he,cloneHidden:gt,dragStarted:$t,putSortable:Ne,activeSortable:X.active,originalEvent:l,oldIndex:Ft,oldDraggableIndex:Zt,newIndex:ze,newDraggableIndex:bt,hideGhostForTarget:Dl,unhideGhostForTarget:Cl,cloneNowHidden:function(){gt=!0},cloneNowShown:function(){gt=!1},dispatchSortableEvent:function(s){Re({sortable:n,name:s,originalEvent:l})}},o))};function Re(t){Lr(nt({putSortable:Ne,cloneEl:he,targetEl:T,rootEl:fe,oldIndex:Ft,oldDraggableIndex:Zt,newIndex:ze,newDraggableIndex:bt},t))}var T,be,V,fe,wt,wn,he,gt,Ft,ze,Zt,bt,yn,Ne,Rt=!1,En=!1,kn=[],yt,Ze,Jn,Kn,_l,wl,$t,Bt,en,tn=!1,Sn=!1,Dn,Oe,Qn=[],Zn=!1,Cn=[],Ln=typeof document<"u",Pn=Yn,yl=Vt||st?"cssFloat":"float",Ir=Ln&&!sl&&!Yn&&"draggable"in document.createElement("div"),El=function(){if(Ln){if(st)return!1;var t=document.createElement("x");return t.style.cssText="pointer-events:auto",t.style.pointerEvents==="auto"}}(),kl=function(e,n){var i=x(e),l=parseInt(i.width)-parseInt(i.paddingLeft)-parseInt(i.paddingRight)-parseInt(i.borderLeftWidth)-parseInt(i.borderRightWidth),o=Ot(e,0,n),r=Ot(e,1,n),s=o&&x(o),a=r&&x(r),u=s&&parseInt(s.marginLeft)+parseInt(s.marginRight)+ye(o).width,d=a&&parseInt(a.marginLeft)+parseInt(a.marginRight)+ye(r).width;if(i.display==="flex")return i.flexDirection==="column"||i.flexDirection==="column-reverse"?"vertical":"horizontal";if(i.display==="grid")return i.gridTemplateColumns.split(" ").length<=1?"vertical":"horizontal";if(o&&s.float&&s.float!=="none"){var c=s.float==="left"?"left":"right";return r&&(a.clear==="both"||a.clear===c)?"vertical":"horizontal"}return o&&(s.display==="block"||s.display==="flex"||s.display==="table"||s.display==="grid"||u>=l&&i[yl]==="none"||r&&i[yl]==="none"&&u+d>l)?"vertical":"horizontal"},Tr=function(e,n,i){var l=i?e.left:e.top,o=i?e.right:e.bottom,r=i?e.width:e.height,s=i?n.left:n.top,a=i?n.right:n.bottom,u=i?n.width:n.height;return l===s||o===a||l+r/2===s+u/2},Ar=function(e,n){var i;return kn.some(function(l){var o=l[je].options.emptyInsertThreshold;if(!(!o||xn(l))){var r=ye(l),s=e>=r.left-o&&e<=r.right+o,a=n>=r.top-o&&n<=r.bottom+o;if(s&&a)return i=l}}),i},Sl=function(e){function n(o,r){return function(s,a,u,d){var c=s.options.group.name&&a.options.group.name&&s.options.group.name===a.options.group.name;if(o==null&&(r||c))return!0;if(o==null||o===!1)return!1;if(r&&o==="clone")return o;if(typeof o=="function")return n(o(s,a,u,d),r)(s,a,u,d);var f=(r?s:a).options.group.name;return o===!0||typeof o=="string"&&o===f||o.join&&o.indexOf(f)>-1}}var i={},l=e.group;(!l||vn(l)!="object")&&(l={name:l}),i.name=l.name,i.checkPull=n(l.pull,!0),i.checkPut=n(l.put),i.revertClone=l.revertClone,e.group=i},Dl=function(){!El&&V&&x(V,"display","none")},Cl=function(){!El&&V&&x(V,"display","")};Ln&&!sl&&document.addEventListener("click",function(t){if(En)return t.preventDefault(),t.stopPropagation&&t.stopPropagation(),t.stopImmediatePropagation&&t.stopImmediatePropagation(),En=!1,!1},!0);var Et=function(e){if(T){e=e.touches?e.touches[0]:e;var n=Ar(e.clientX,e.clientY);if(n){var i={};for(var l in e)e.hasOwnProperty(l)&&(i[l]=e[l]);i.target=i.rootEl=n,i.preventDefault=void 0,i.stopPropagation=void 0,n[je]._onDragOver(i)}}},Nr=function(e){T&&T.parentNode[je]._isOutsideThisEl(e.target)};function X(t,e){if(!(t&&t.nodeType&&t.nodeType===1))throw"Sortable: `el` must be an HTMLElement, not ".concat({}.toString.call(t));this.el=t,this.options=e=rt({},e),t[je]=this;var n={group:null,sort:!0,disabled:!1,store:null,handle:null,draggable:/^[uo]l$/i.test(t.nodeName)?">li":">*",swapThreshold:1,invertSwap:!1,invertedSwapThreshold:null,removeCloneOnHide:!0,direction:function(){return kl(t,this.options)},ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",dragClass:"sortable-drag",ignore:"a, img",filter:null,preventOnFilter:!0,animation:0,easing:null,setData:function(r,s){r.setData("Text",s.textContent)},dropBubble:!1,dragoverBubble:!1,dataIdAttr:"data-id",delay:0,delayOnTouchOnly:!1,touchStartThreshold:(Number.parseInt?Number:window).parseInt(window.devicePixelRatio,10)||1,forceFallback:!1,fallbackClass:"sortable-fallback",fallbackOnBody:!1,fallbackTolerance:0,fallbackOffset:{x:0,y:0},supportPointer:X.supportPointer!==!1&&"PointerEvent"in window&&(!Jt||Yn),emptyInsertThreshold:5};Qt.initializePlugins(this,t,n);for(var i in n)!(i in e)&&(e[i]=n[i]);Sl(e);for(var l in this)l.charAt(0)==="_"&&typeof this[l]=="function"&&(this[l]=this[l].bind(this));this.nativeDraggable=e.forceFallback?!1:Ir,this.nativeDraggable&&(this.options.touchStartThreshold=1),e.supportPointer?te(t,"pointerdown",this._onTapStart):(te(t,"mousedown",this._onTapStart),te(t,"touchstart",this._onTapStart)),this.nativeDraggable&&(te(t,"dragover",this),te(t,"dragenter",this)),kn.push(this.el),e.store&&e.store.get&&this.sort(e.store.get(this)||[]),rt(this,Sr())}X.prototype={constructor:X,_isOutsideThisEl:function(e){!this.el.contains(e)&&e!==this.el&&(Bt=null)},_getDirection:function(e,n){return typeof this.options.direction=="function"?this.options.direction.call(this,e,n,T):this.options.direction},_onTapStart:function(e){if(e.cancelable){var n=this,i=this.el,l=this.options,o=l.preventOnFilter,r=e.type,s=e.touches&&e.touches[0]||e.pointerType&&e.pointerType==="touch"&&e,a=(s||e).target,u=e.target.shadowRoot&&(e.path&&e.path[0]||e.composedPath&&e.composedPath()[0])||a,d=l.filter;if(Wr(i),!T&&!(/mousedown|pointerdown/.test(r)&&e.button!==0||l.disabled)&&!u.isContentEditable&&!(!this.nativeDraggable&&Jt&&a&&a.tagName.toUpperCase()==="SELECT")&&(a=Qe(a,l.draggable,i,!1),!(a&&a.animated)&&wn!==a)){if(Ft=Ve(a),Zt=Ve(a,l.draggable),typeof d=="function"){if(d.call(this,e,a,this)){Re({sortable:n,rootEl:u,name:"filter",targetEl:a,toEl:i,fromEl:i}),We("filter",n,{evt:e}),o&&e.preventDefault();return}}else if(d&&(d=d.split(",").some(function(c){if(c=Qe(u,c.trim(),i,!1),c)return Re({sortable:n,rootEl:c,name:"filter",targetEl:a,fromEl:i,toEl:i}),We("filter",n,{evt:e}),!0}),d)){o&&e.preventDefault();return}l.handle&&!Qe(u,l.handle,i,!1)||this._prepareDragStart(e,s,a)}}},_prepareDragStart:function(e,n,i){var l=this,o=l.el,r=l.options,s=o.ownerDocument,a;if(i&&!T&&i.parentNode===o){var u=ye(i);if(fe=o,T=i,be=T.parentNode,wt=T.nextSibling,wn=i,yn=r.group,X.dragged=T,yt={target:T,clientX:(n||e).clientX,clientY:(n||e).clientY},_l=yt.clientX-u.left,wl=yt.clientY-u.top,this._lastX=(n||e).clientX,this._lastY=(n||e).clientY,T.style["will-change"]="all",a=function(){if(We("delayEnded",l,{evt:e}),X.eventCanceled){l._onDrop();return}l._disableDelayedDragEvents(),!al&&l.nativeDraggable&&(T.draggable=!0),l._triggerDragStart(e,n),Re({sortable:l,name:"choose",originalEvent:e}),Ge(T,r.chosenClass,!0)},r.ignore.split(",").forEach(function(d){fl(T,d.trim(),$n)}),te(s,"dragover",Et),te(s,"mousemove",Et),te(s,"touchmove",Et),r.supportPointer?(te(s,"pointerup",l._onDrop),!this.nativeDraggable&&te(s,"pointercancel",l._onDrop)):(te(s,"mouseup",l._onDrop),te(s,"touchend",l._onDrop),te(s,"touchcancel",l._onDrop)),al&&this.nativeDraggable&&(this.options.touchStartThreshold=4,T.draggable=!0),We("delayStart",this,{evt:e}),r.delay&&(!r.delayOnTouchOnly||n)&&(!this.nativeDraggable||!(Vt||st))){if(X.eventCanceled){this._onDrop();return}r.supportPointer?(te(s,"pointerup",l._disableDelayedDrag),te(s,"pointercancel",l._disableDelayedDrag)):(te(s,"mouseup",l._disableDelayedDrag),te(s,"touchend",l._disableDelayedDrag),te(s,"touchcancel",l._disableDelayedDrag)),te(s,"mousemove",l._delayedDragTouchMoveHandler),te(s,"touchmove",l._delayedDragTouchMoveHandler),r.supportPointer&&te(s,"pointermove",l._delayedDragTouchMoveHandler),l._dragStartTimer=setTimeout(a,r.delay)}else a()}},_delayedDragTouchMoveHandler:function(e){var n=e.touches?e.touches[0]:e;Math.max(Math.abs(n.clientX-this._lastX),Math.abs(n.clientY-this._lastY))>=Math.floor(this.options.touchStartThreshold/(this.nativeDraggable&&window.devicePixelRatio||1))&&this._disableDelayedDrag()},_disableDelayedDrag:function(){T&&$n(T),clearTimeout(this._dragStartTimer),this._disableDelayedDragEvents()},_disableDelayedDragEvents:function(){var e=this.el.ownerDocument;ee(e,"mouseup",this._disableDelayedDrag),ee(e,"touchend",this._disableDelayedDrag),ee(e,"touchcancel",this._disableDelayedDrag),ee(e,"pointerup",this._disableDelayedDrag),ee(e,"pointercancel",this._disableDelayedDrag),ee(e,"mousemove",this._delayedDragTouchMoveHandler),ee(e,"touchmove",this._delayedDragTouchMoveHandler),ee(e,"pointermove",this._delayedDragTouchMoveHandler)},_triggerDragStart:function(e,n){n=n||e.pointerType=="touch"&&e,!this.nativeDraggable||n?this.options.supportPointer?te(document,"pointermove",this._onTouchMove):n?te(document,"touchmove",this._onTouchMove):te(document,"mousemove",this._onTouchMove):(te(T,"dragend",this),te(fe,"dragstart",this._onDragStart));try{document.selection?Tn(function(){document.selection.empty()}):window.getSelection().removeAllRanges()}catch{}},_dragStarted:function(e,n){if(Rt=!1,fe&&T){We("dragStarted",this,{evt:n}),this.nativeDraggable&&te(document,"dragover",Nr);var i=this.options;!e&&Ge(T,i.dragClass,!1),Ge(T,i.ghostClass,!0),X.active=this,e&&this._appendGhost(),Re({sortable:this,name:"start",originalEvent:n})}else this._nulling()},_emulateDragOver:function(){if(Ze){this._lastX=Ze.clientX,this._lastY=Ze.clientY,Dl();for(var e=document.elementFromPoint(Ze.clientX,Ze.clientY),n=e;e&&e.shadowRoot&&(e=e.shadowRoot.elementFromPoint(Ze.clientX,Ze.clientY),e!==n);)n=e;if(T.parentNode[je]._isOutsideThisEl(e),n)do{if(n[je]){var i=void 0;if(i=n[je]._onDragOver({clientX:Ze.clientX,clientY:Ze.clientY,target:e,rootEl:n}),i&&!this.options.dragoverBubble)break}e=n}while(n=dl(n));Cl()}},_onTouchMove:function(e){if(yt){var n=this.options,i=n.fallbackTolerance,l=n.fallbackOffset,o=e.touches?e.touches[0]:e,r=V&&Nt(V,!0),s=V&&r&&r.a,a=V&&r&&r.d,u=Pn&&Oe&&hl(Oe),d=(o.clientX-yt.clientX+l.x)/(s||1)+(u?u[0]-Qn[0]:0)/(s||1),c=(o.clientY-yt.clientY+l.y)/(a||1)+(u?u[1]-Qn[1]:0)/(a||1);if(!X.active&&!Rt){if(i&&Math.max(Math.abs(o.clientX-this._lastX),Math.abs(o.clientY-this._lastY))<i)return;this._onDragStart(e,!0)}if(V){r?(r.e+=d-(Jn||0),r.f+=c-(Kn||0)):r={a:1,b:0,c:0,d:1,e:d,f:c};var f="matrix(".concat(r.a,",").concat(r.b,",").concat(r.c,",").concat(r.d,",").concat(r.e,",").concat(r.f,")");x(V,"webkitTransform",f),x(V,"mozTransform",f),x(V,"msTransform",f),x(V,"transform",f),Jn=d,Kn=c,Ze=o}e.cancelable&&e.preventDefault()}},_appendGhost:function(){if(!V){var e=this.options.fallbackOnBody?document.body:fe,n=ye(T,!0,Pn,!0,e),i=this.options;if(Pn){for(Oe=e;x(Oe,"position")==="static"&&x(Oe,"transform")==="none"&&Oe!==document;)Oe=Oe.parentNode;Oe!==document.body&&Oe!==document.documentElement?(Oe===document&&(Oe=it()),n.top+=Oe.scrollTop,n.left+=Oe.scrollLeft):Oe=it(),Qn=hl(Oe)}V=T.cloneNode(!0),Ge(V,i.ghostClass,!1),Ge(V,i.fallbackClass,!0),Ge(V,i.dragClass,!0),x(V,"transition",""),x(V,"transform",""),x(V,"box-sizing","border-box"),x(V,"margin",0),x(V,"top",n.top),x(V,"left",n.left),x(V,"width",n.width),x(V,"height",n.height),x(V,"opacity","0.8"),x(V,"position",Pn?"absolute":"fixed"),x(V,"zIndex","100000"),x(V,"pointerEvents","none"),X.ghost=V,e.appendChild(V),x(V,"transform-origin",_l/parseInt(V.style.width)*100+"% "+wl/parseInt(V.style.height)*100+"%")}},_onDragStart:function(e,n){var i=this,l=e.dataTransfer,o=i.options;if(We("dragStart",this,{evt:e}),X.eventCanceled){this._onDrop();return}We("setupClone",this),X.eventCanceled||(he=bl(T),he.removeAttribute("id"),he.draggable=!1,he.style["will-change"]="",this._hideClone(),Ge(he,this.options.chosenClass,!1),X.clone=he),i.cloneId=Tn(function(){We("clone",i),!X.eventCanceled&&(i.options.removeCloneOnHide||fe.insertBefore(he,T),i._hideClone(),Re({sortable:i,name:"clone"}))}),!n&&Ge(T,o.dragClass,!0),n?(En=!0,i._loopId=setInterval(i._emulateDragOver,50)):(ee(document,"mouseup",i._onDrop),ee(document,"touchend",i._onDrop),ee(document,"touchcancel",i._onDrop),l&&(l.effectAllowed="move",o.setData&&o.setData.call(i,l,T)),te(document,"drop",i),x(T,"transform","translateZ(0)")),Rt=!0,i._dragStartId=Tn(i._dragStarted.bind(i,n,e)),te(document,"selectstart",i),$t=!0,window.getSelection().removeAllRanges(),Jt&&x(document.body,"user-select","none")},_onDragOver:function(e){var n=this.el,i=e.target,l,o,r,s=this.options,a=s.group,u=X.active,d=yn===a,c=s.sort,f=Ne||u,m,h=this,b=!1;if(Zn)return;function p(Je,ut){We(Je,h,nt({evt:e,isOwner:d,axis:m?"vertical":"horizontal",revert:r,dragRect:l,targetRect:o,canSort:c,fromSortable:f,target:i,completed:S,onMove:function($e,dt){return In(fe,n,T,l,$e,ye($e),e,dt)},changed:k},ut))}function v(){p("dragOverAnimationCapture"),h.captureAnimationState(),h!==f&&f.captureAnimationState()}function S(Je){return p("dragOverCompleted",{insertion:Je}),Je&&(d?u._hideClone():u._showClone(h),h!==f&&(Ge(T,Ne?Ne.options.ghostClass:u.options.ghostClass,!1),Ge(T,s.ghostClass,!0)),Ne!==h&&h!==X.active?Ne=h:h===X.active&&Ne&&(Ne=null),f===h&&(h._ignoreWhileAnimating=i),h.animateAll(function(){p("dragOverAnimationComplete"),h._ignoreWhileAnimating=null}),h!==f&&(f.animateAll(),f._ignoreWhileAnimating=null)),(i===T&&!T.animated||i===n&&!i.animated)&&(Bt=null),!s.dragoverBubble&&!e.rootEl&&i!==document&&(T.parentNode[je]._isOutsideThisEl(e.target),!Je&&Et(e)),!s.dragoverBubble&&e.stopPropagation&&e.stopPropagation(),b=!0}function k(){ze=Ve(T),bt=Ve(T,s.draggable),Re({sortable:h,name:"change",toEl:n,newIndex:ze,newDraggableIndex:bt,originalEvent:e})}if(e.preventDefault!==void 0&&e.cancelable&&e.preventDefault(),i=Qe(i,s.draggable,n,!0),p("dragOver"),X.eventCanceled)return b;if(T.contains(e.target)||i.animated&&i.animatingX&&i.animatingY||h._ignoreWhileAnimating===i)return S(!1);if(En=!1,u&&!s.disabled&&(d?c||(r=be!==fe):Ne===this||(this.lastPutMode=yn.checkPull(this,u,T,e))&&a.checkPut(this,u,T,e))){if(m=this._getDirection(e,i)==="vertical",l=ye(T),p("dragOverValid"),X.eventCanceled)return b;if(r)return be=fe,v(),this._hideClone(),p("revert"),X.eventCanceled||(wt?fe.insertBefore(T,wt):fe.appendChild(T)),S(!0);var C=xn(n,s.draggable);if(!C||Rr(e,m,this)&&!C.animated){if(C===T)return S(!1);if(C&&n===e.target&&(i=C),i&&(o=ye(i)),In(fe,n,T,l,i,o,e,!!i)!==!1)return v(),C&&C.nextSibling?n.insertBefore(T,C.nextSibling):n.appendChild(T),be=n,k(),S(!0)}else if(C&&Fr(e,m,this)){var E=Ot(n,0,s,!0);if(E===T)return S(!1);if(i=E,o=ye(i),In(fe,n,T,l,i,o,e,!1)!==!1)return v(),n.insertBefore(T,E),be=n,k(),S(!0)}else if(i.parentNode===n){o=ye(i);var L=0,w,I=T.parentNode!==n,y=!Tr(T.animated&&T.toRect||l,i.animated&&i.toRect||o,m),W=m?"top":"left",Y=pl(i,"top","top")||pl(T,"top","top"),F=Y?Y.scrollTop:void 0;Bt!==i&&(w=o[W],tn=!1,Sn=!y&&s.invertSwap||I),L=Br(e,i,o,m,y?1:s.swapThreshold,s.invertedSwapThreshold==null?s.swapThreshold:s.invertedSwapThreshold,Sn,Bt===i);var Q;if(L!==0){var Z=Ve(T);do Z-=L,Q=be.children[Z];while(Q&&(x(Q,"display")==="none"||Q===V))}if(L===0||Q===i)return S(!1);Bt=i,en=L;var A=i.nextElementSibling,z=!1;z=L===1;var ve=In(fe,n,T,l,i,o,e,z);if(ve!==!1)return(ve===1||ve===-1)&&(z=ve===1),Zn=!0,setTimeout(Mr,30),v(),z&&!A?n.appendChild(T):i.parentNode.insertBefore(T,z?A:i),Y&&gl(Y,0,F-Y.scrollTop),be=T.parentNode,w!==void 0&&!Sn&&(Dn=Math.abs(w-ye(i)[W])),k(),S(!0)}if(n.contains(T))return S(!1)}return!1},_ignoreWhileAnimating:null,_offMoveEvents:function(){ee(document,"mousemove",this._onTouchMove),ee(document,"touchmove",this._onTouchMove),ee(document,"pointermove",this._onTouchMove),ee(document,"dragover",Et),ee(document,"mousemove",Et),ee(document,"touchmove",Et)},_offUpEvents:function(){var e=this.el.ownerDocument;ee(e,"mouseup",this._onDrop),ee(e,"touchend",this._onDrop),ee(e,"pointerup",this._onDrop),ee(e,"pointercancel",this._onDrop),ee(e,"touchcancel",this._onDrop),ee(document,"selectstart",this)},_onDrop:function(e){var n=this.el,i=this.options;if(ze=Ve(T),bt=Ve(T,i.draggable),We("drop",this,{evt:e}),be=T&&T.parentNode,ze=Ve(T),bt=Ve(T,i.draggable),X.eventCanceled){this._nulling();return}Rt=!1,Sn=!1,tn=!1,clearInterval(this._loopId),clearTimeout(this._dragStartTimer),ei(this.cloneId),ei(this._dragStartId),this.nativeDraggable&&(ee(document,"drop",this),ee(n,"dragstart",this._onDragStart)),this._offMoveEvents(),this._offUpEvents(),Jt&&x(document.body,"user-select",""),x(T,"transform",""),e&&($t&&(e.cancelable&&e.preventDefault(),!i.dropBubble&&e.stopPropagation()),V&&V.parentNode&&V.parentNode.removeChild(V),(fe===be||Ne&&Ne.lastPutMode!=="clone")&&he&&he.parentNode&&he.parentNode.removeChild(he),T&&(this.nativeDraggable&&ee(T,"dragend",this),$n(T),T.style["will-change"]="",$t&&!Rt&&Ge(T,Ne?Ne.options.ghostClass:this.options.ghostClass,!1),Ge(T,this.options.chosenClass,!1),Re({sortable:this,name:"unchoose",toEl:be,newIndex:null,newDraggableIndex:null,originalEvent:e}),fe!==be?(ze>=0&&(Re({rootEl:be,name:"add",toEl:be,fromEl:fe,originalEvent:e}),Re({sortable:this,name:"remove",toEl:be,originalEvent:e}),Re({rootEl:be,name:"sort",toEl:be,fromEl:fe,originalEvent:e}),Re({sortable:this,name:"sort",toEl:be,originalEvent:e})),Ne&&Ne.save()):ze!==Ft&&ze>=0&&(Re({sortable:this,name:"update",toEl:be,originalEvent:e}),Re({sortable:this,name:"sort",toEl:be,originalEvent:e})),X.active&&((ze==null||ze===-1)&&(ze=Ft,bt=Zt),Re({sortable:this,name:"end",toEl:be,originalEvent:e}),this.save()))),this._nulling()},_nulling:function(){We("nulling",this),fe=T=be=V=wt=he=wn=gt=yt=Ze=$t=ze=bt=Ft=Zt=Bt=en=Ne=yn=X.dragged=X.ghost=X.clone=X.active=null,Cn.forEach(function(e){e.checked=!0}),Cn.length=Jn=Kn=0},handleEvent:function(e){switch(e.type){case"drop":case"dragend":this._onDrop(e);break;case"dragenter":case"dragover":T&&(this._onDragOver(e),Or(e));break;case"selectstart":e.preventDefault();break}},toArray:function(){for(var e=[],n,i=this.el.children,l=0,o=i.length,r=this.options;l<o;l++)n=i[l],Qe(n,r.draggable,this.el,!1)&&e.push(n.getAttribute(r.dataIdAttr)||jr(n));return e},sort:function(e,n){var i={},l=this.el;this.toArray().forEach(function(o,r){var s=l.children[r];Qe(s,this.options.draggable,l,!1)&&(i[o]=s)},this),n&&this.captureAnimationState(),e.forEach(function(o){i[o]&&(l.removeChild(i[o]),l.appendChild(i[o]))}),n&&this.animateAll()},save:function(){var e=this.options.store;e&&e.set&&e.set(this)},closest:function(e,n){return Qe(e,n||this.options.draggable,this.el,!1)},option:function(e,n){var i=this.options;if(n===void 0)return i[e];var l=Qt.modifyOption(this,e,n);typeof l<"u"?i[e]=l:i[e]=n,e==="group"&&Sl(i)},destroy:function(){We("destroy",this);var e=this.el;e[je]=null,ee(e,"mousedown",this._onTapStart),ee(e,"touchstart",this._onTapStart),ee(e,"pointerdown",this._onTapStart),this.nativeDraggable&&(ee(e,"dragover",this),ee(e,"dragenter",this)),Array.prototype.forEach.call(e.querySelectorAll("[draggable]"),function(n){n.removeAttribute("draggable")}),this._onDrop(),this._disableDelayedDragEvents(),kn.splice(kn.indexOf(this.el),1),this.el=e=null},_hideClone:function(){if(!gt){if(We("hideClone",this),X.eventCanceled)return;x(he,"display","none"),this.options.removeCloneOnHide&&he.parentNode&&he.parentNode.removeChild(he),gt=!0}},_showClone:function(e){if(e.lastPutMode!=="clone"){this._hideClone();return}if(gt){if(We("showClone",this),X.eventCanceled)return;T.parentNode==fe&&!this.options.group.revertClone?fe.insertBefore(he,T):wt?fe.insertBefore(he,wt):fe.appendChild(he),this.options.group.revertClone&&this.animate(T,he),x(he,"display",""),gt=!1}}};function Or(t){t.dataTransfer&&(t.dataTransfer.dropEffect="move"),t.cancelable&&t.preventDefault()}function In(t,e,n,i,l,o,r,s){var a,u=t[je],d=u.options.onMove,c;return window.CustomEvent&&!st&&!Vt?a=new CustomEvent("move",{bubbles:!0,cancelable:!0}):(a=document.createEvent("Event"),a.initEvent("move",!0,!0)),a.to=e,a.from=t,a.dragged=n,a.draggedRect=i,a.related=l||e,a.relatedRect=o||ye(e),a.willInsertAfter=s,a.originalEvent=r,t.dispatchEvent(a),d&&(c=d.call(u,a,r)),c}function $n(t){t.draggable=!1}function Mr(){Zn=!1}function Fr(t,e,n){var i=ye(Ot(n.el,0,n.options,!0)),l=vl(n.el,n.options,V),o=10;return e?t.clientX<l.left-o||t.clientY<i.top&&t.clientX<i.right:t.clientY<l.top-o||t.clientY<i.bottom&&t.clientX<i.left}function Rr(t,e,n){var i=ye(xn(n.el,n.options.draggable)),l=vl(n.el,n.options,V),o=10;return e?t.clientX>l.right+o||t.clientY>i.bottom&&t.clientX>i.left:t.clientY>l.bottom+o||t.clientX>i.right&&t.clientY>i.top}function Br(t,e,n,i,l,o,r,s){var a=i?t.clientY:t.clientX,u=i?n.height:n.width,d=i?n.top:n.left,c=i?n.bottom:n.right,f=!1;if(!r){if(s&&Dn<u*l){if(!tn&&(en===1?a>d+u*o/2:a<c-u*o/2)&&(tn=!0),tn)f=!0;else if(en===1?a<d+Dn:a>c-Dn)return-en}else if(a>d+u*(1-l)/2&&a<c-u*(1-l)/2)return Hr(e)}return f=f||r,f&&(a<d+u*o/2||a>c-u*o/2)?a>d+u/2?1:-1:0}function Hr(t){return Ve(T)<Ve(t)?1:-1}function jr(t){for(var e=t.tagName+t.className+t.src+t.href+t.textContent,n=e.length,i=0;n--;)i+=e.charCodeAt(n);return i.toString(36)}function Wr(t){Cn.length=0;for(var e=t.getElementsByTagName("input"),n=e.length;n--;){var i=e[n];i.checked&&Cn.push(i)}}function Tn(t){return setTimeout(t,0)}function ei(t){return clearTimeout(t)}Ln&&te(document,"touchmove",function(t){(X.active||Rt)&&t.cancelable&&t.preventDefault()}),X.utils={on:te,off:ee,css:x,find:fl,is:function(e,n){return!!Qe(e,n,e,!1)},extend:Er,throttle:ml,closest:Qe,toggleClass:Ge,clone:bl,index:Ve,nextTick:Tn,cancelNextTick:ei,detectDirection:kl,getChild:Ot,expando:je},X.get=function(t){return t[je]},X.mount=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];e[0].constructor===Array&&(e=e[0]),e.forEach(function(i){if(!i.prototype||!i.prototype.constructor)throw"Sortable: Mounted plugin must be a constructor function, not ".concat({}.toString.call(i));i.utils&&(X.utils=nt(nt({},X.utils),i.utils)),Qt.mount(i)})},X.create=function(t,e){return new X(t,e)},X.version=wr;var Ee=[],nn,ti,ni=!1,ii,li,An,ln;function qr(){function t(){this.defaults={scroll:!0,forceAutoScrollFallback:!1,scrollSensitivity:30,scrollSpeed:10,bubbleScroll:!0};for(var e in this)e.charAt(0)==="_"&&typeof this[e]=="function"&&(this[e]=this[e].bind(this))}return t.prototype={dragStarted:function(n){var i=n.originalEvent;this.sortable.nativeDraggable?te(document,"dragover",this._handleAutoScroll):this.options.supportPointer?te(document,"pointermove",this._handleFallbackAutoScroll):i.touches?te(document,"touchmove",this._handleFallbackAutoScroll):te(document,"mousemove",this._handleFallbackAutoScroll)},dragOverCompleted:function(n){var i=n.originalEvent;!this.options.dragOverBubble&&!i.rootEl&&this._handleAutoScroll(i)},drop:function(){this.sortable.nativeDraggable?ee(document,"dragover",this._handleAutoScroll):(ee(document,"pointermove",this._handleFallbackAutoScroll),ee(document,"touchmove",this._handleFallbackAutoScroll),ee(document,"mousemove",this._handleFallbackAutoScroll)),Ll(),Nn(),kr()},nulling:function(){An=ti=nn=ni=ln=ii=li=null,Ee.length=0},_handleFallbackAutoScroll:function(n){this._handleAutoScroll(n,!0)},_handleAutoScroll:function(n,i){var l=this,o=(n.touches?n.touches[0]:n).clientX,r=(n.touches?n.touches[0]:n).clientY,s=document.elementFromPoint(o,r);if(An=n,i||this.options.forceAutoScrollFallback||Vt||st||Jt){oi(n,this.options,s,i);var a=mt(s,!0);ni&&(!ln||o!==ii||r!==li)&&(ln&&Ll(),ln=setInterval(function(){var u=mt(document.elementFromPoint(o,r),!0);u!==a&&(a=u,Nn()),oi(n,l.options,u,i)},10),ii=o,li=r)}else{if(!this.options.bubbleScroll||mt(s,!0)===it()){Nn();return}oi(n,this.options,mt(s,!1),!1)}}},rt(t,{pluginName:"scroll",initializeByDefault:!0})}function Nn(){Ee.forEach(function(t){clearInterval(t.pid)}),Ee=[]}function Ll(){clearInterval(ln)}var oi=ml(function(t,e,n,i){if(e.scroll){var l=(t.touches?t.touches[0]:t).clientX,o=(t.touches?t.touches[0]:t).clientY,r=e.scrollSensitivity,s=e.scrollSpeed,a=it(),u=!1,d;ti!==n&&(ti=n,Nn(),nn=e.scroll,d=e.scrollFn,nn===!0&&(nn=mt(n,!0)));var c=0,f=nn;do{var m=f,h=ye(m),b=h.top,p=h.bottom,v=h.left,S=h.right,k=h.width,C=h.height,E=void 0,L=void 0,w=m.scrollWidth,I=m.scrollHeight,y=x(m),W=m.scrollLeft,Y=m.scrollTop;m===a?(E=k<w&&(y.overflowX==="auto"||y.overflowX==="scroll"||y.overflowX==="visible"),L=C<I&&(y.overflowY==="auto"||y.overflowY==="scroll"||y.overflowY==="visible")):(E=k<w&&(y.overflowX==="auto"||y.overflowX==="scroll"),L=C<I&&(y.overflowY==="auto"||y.overflowY==="scroll"));var F=E&&(Math.abs(S-l)<=r&&W+k<w)-(Math.abs(v-l)<=r&&!!W),Q=L&&(Math.abs(p-o)<=r&&Y+C<I)-(Math.abs(b-o)<=r&&!!Y);if(!Ee[c])for(var Z=0;Z<=c;Z++)Ee[Z]||(Ee[Z]={});(Ee[c].vx!=F||Ee[c].vy!=Q||Ee[c].el!==m)&&(Ee[c].el=m,Ee[c].vx=F,Ee[c].vy=Q,clearInterval(Ee[c].pid),(F!=0||Q!=0)&&(u=!0,Ee[c].pid=setInterval((function(){i&&this.layer===0&&X.active._onTouchMove(An);var A=Ee[this.layer].vy?Ee[this.layer].vy*s:0,z=Ee[this.layer].vx?Ee[this.layer].vx*s:0;typeof d=="function"&&d.call(X.dragged.parentNode[je],z,A,t,An,Ee[this.layer].el)!=="continue"||gl(Ee[this.layer].el,z,A)}).bind({layer:c}),24))),c++}while(e.bubbleScroll&&f!==a&&(f=mt(f,!1)));ni=u}},30),Pl=function(e){var n=e.originalEvent,i=e.putSortable,l=e.dragEl,o=e.activeSortable,r=e.dispatchSortableEvent,s=e.hideGhostForTarget,a=e.unhideGhostForTarget;if(n){var u=i||o;s();var d=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:n,c=document.elementFromPoint(d.clientX,d.clientY);a(),u&&!u.el.contains(c)&&(r("spill"),this.onSpill({dragEl:l,putSortable:i}))}};function ri(){}ri.prototype={startIndex:null,dragStart:function(e){var n=e.oldDraggableIndex;this.startIndex=n},onSpill:function(e){var n=e.dragEl,i=e.putSortable;this.sortable.captureAnimationState(),i&&i.captureAnimationState();var l=Ot(this.sortable.el,this.startIndex,this.options);l?this.sortable.el.insertBefore(n,l):this.sortable.el.appendChild(n),this.sortable.animateAll(),i&&i.animateAll()},drop:Pl},rt(ri,{pluginName:"revertOnSpill"});function ai(){}ai.prototype={onSpill:function(e){var n=e.dragEl,i=e.putSortable,l=i||this.sortable;l.captureAnimationState(),n.parentNode&&n.parentNode.removeChild(n),l.animateAll()},drop:Pl},rt(ai,{pluginName:"removeOnSpill"}),X.mount(new qr),X.mount(ai,ri);function Il(t,e,n){const i=t.slice();return i[16]=e[n],i}function Tl(t,e,n){const i=t.slice();return i[19]=e[n],i}function Al(t){let e,n,i,l;function o(){return t[10](t[19])}return{c(){e=D("div"),n=D("a"),n.innerHTML='<i class="fas fa-pencil-alt fa-sm"></i>',g(n,"href","javascript:"),g(n,"data-action","editField"),g(n,"class","edit-field svelte-1d0iatn"),g(e,"class","right svelte-1d0iatn")},m(r,s){G(r,e,s),_(e,n),i||(l=le(n,"click",o),i=!0)},p(r,s){t=r},d(r){r&&j(e),i=!1,l()}}}function Nl(t,e){let n,i,l,o=e[19].label+"",r,s,a,u=e[2].editable&&Al(e),d=[e[9](e[19])],c={};for(let f=0;f<d.length;f+=1)c=Wt(c,d[f]);return{key:t,first:null,c(){n=D("li"),i=D("div"),l=D("label"),r=pe(o),s=R(),u&&u.c(),a=R(),g(l,"class","svelte-1d0iatn"),g(i,"class","left svelte-1d0iatn"),pt(n,c),me(n,"svelte-1d0iatn",!0),this.first=n},m(f,m){G(f,n,m),_(n,i),_(i,l),_(l,r),_(n,s),u&&u.m(n,null),_(n,a)},p(f,m){e=f,m&1&&o!==(o=e[19].label+"")&&Be(r,o),e[2].editable?u?u.p(e,m):(u=Al(e),u.c(),u.m(n,a)):u&&(u.d(1),u=null),pt(n,c=gn(d,[m&1&&e[9](e[19])])),me(n,"svelte-1d0iatn",!0)},d(f){f&&j(n),u&&u.d()}}}function Ol(t,e){let n,i,l,o=e[16].label+"",r,s,a=[e[9](e[16])],u={};for(let d=0;d<a.length;d+=1)u=Wt(u,a[d]);return{key:t,first:null,c(){n=D("li"),i=D("div"),l=D("label"),r=pe(o),s=R(),g(l,"class","svelte-1d0iatn"),g(i,"class","left svelte-1d0iatn"),pt(n,u),me(n,"svelte-1d0iatn",!0),this.first=n},m(d,c){G(d,n,c),_(n,i),_(i,l),_(l,r),_(n,s)},p(d,c){e=d,c&2&&o!==(o=e[16].label+"")&&Be(r,o),pt(n,u=gn(a,[c&2&&e[9](e[16])])),me(n,"svelte-1d0iatn",!0)},d(d){d&&j(n)}}}function Gr(t){let e,n,i,l,o,r,s=[],a=new Map,u,d,c,f,m,h,b,p,v=[],S=new Map,k=ge(t[0].sort(Fl));const C=w=>w[19].name;for(let w=0;w<k.length;w+=1){let I=Tl(t,k,w),y=C(I);a.set(y,s[w]=Nl(y,I))}let E=ge(t[1]);const L=w=>w[16].name;for(let w=0;w<E.length;w+=1){let I=Il(t,E,w),y=L(I);S.set(y,v[w]=Ol(y,I))}return{c(){e=D("div"),n=D("div"),i=D("div"),l=D("header"),l.textContent=`${O.translate("Selected","labels","Admin")}`,o=R(),r=D("ul");for(let w=0;w<s.length;w+=1)s[w].c();u=R(),d=D("div"),c=R(),f=D("div"),m=D("div"),h=D("header"),h.textContent=`${O.translate("Available","labels","Admin")}`,b=R(),p=D("ul");for(let w=0;w<v.length;w+=1)v[w].c();g(l,"class","svelte-1d0iatn"),g(r,"class","enabled connected svelte-1d0iatn"),g(i,"class","well svelte-1d0iatn"),g(n,"class","col-sm-5"),g(d,"class","col-sm-2"),g(h,"class","svelte-1d0iatn"),g(p,"class","disabled connected svelte-1d0iatn"),g(m,"class","well svelte-1d0iatn"),g(f,"class","col-sm-5"),g(e,"id","layout"),g(e,"class","row")},m(w,I){G(w,e,I),_(e,n),_(n,i),_(i,l),_(i,o),_(i,r);for(let y=0;y<s.length;y+=1)s[y]&&s[y].m(r,null);_(e,u),_(e,d),_(e,c),_(e,f),_(f,m),_(m,h),_(m,b),_(m,p);for(let y=0;y<v.length;y+=1)v[y]&&v[y].m(p,null);t[11](e)},p(w,I){I&645&&(k=ge(w[0].sort(Fl)),s=Tt(s,I,C,1,w,k,a,r,It,Nl,null,Tl)),I&514&&(E=ge(w[1]),v=Tt(v,I,L,1,w,E,S,p,It,Ol,null,Il))},d(w){w&&j(e);for(let I=0;I<s.length;I+=1)s[I].d();for(let I=0;I<v.length;I+=1)v[I].d();t[11](null)}}}function zr(t){let e,n,i={params:t[2],validate:t[8],fetch:t[4],loadLayout:t[3],$$slots:{default:[Gr]},$$scope:{ctx:t}};return e=new ol({props:i}),t[12](e),{c(){Ke(e.$$.fragment)},m(l,o){xe(e,l,o),n=!0},p(l,[o]){const r={};o&4&&(r.params=l[2]),o&16&&(r.fetch=l[4]),o&8&&(r.loadLayout=l[3]),o&4194343&&(r.$$scope={dirty:o,ctx:l}),e.$set(r)},i(l){n||(Se(e.$$.fragment,l),n=!0)},o(l){Pe(e.$$.fragment,l),n=!1},d(l){t[12](null),Ue(e,l)}}}function Xr(t){return t.toLowerCase()}function Ml(t,e){return t[e]}const Fl=(t,e)=>t.sortOrder-e.sortOrder;function Yr(t,e,n){let i,l,o,{params:r}=e,{enabledFields:s=[]}=e,{disabledFields:a=[]}=e,{loadLayout:u}=e,d;St(()=>{c()}),Hn(()=>{l&&l.destroy(),o&&o.destroy()});function c(){const k={group:"fields",draggable:"li",animation:150};l=X.create(i.querySelector("ul.enabled"),{...k,onEnd(C){if(C.to.closest(".connected").classList.contains("enabled")){const[E]=s.splice(C.oldIndex,1);s.splice(C.newIndex,0,E)}else{const E=s[C.oldIndex];s.splice(C.oldIndex,1),a.splice(C.newIndex,0,E),n(1,a=[...a])}n(0,s=[...s])}}),o=X.create(i.querySelector("ul.disabled"),{...k,onEnd(C){if(C.to.closest(".connected").classList.contains("disabled")){const[E]=a.splice(C.oldIndex,1);a.splice(C.newIndex,0,E)}else{const E=a[C.oldIndex];a.splice(C.oldIndex,1),s.splice(C.newIndex,0,E),n(0,s=[...s])}n(1,a=[...a])}})}function f(k){r.openEditDialog(k,r.scope,r.dataAttributeList,r.dataAttributesDefs,C=>{n(0,s=s.map(E=>{if(E.name===k.name)for(let L in C)E[L]=C[L];return E}))})}let{fetch:m=()=>s}=e;function h(k){return k.length===0?(He.notify("Layout cannot be empty","error"),!1):!0}function b(k){const C={};return r.dataAttributeList.forEach(E=>{Ml(k,E)!=null&&(C[`data-${Xr(E)}`]=Ml(k,E))}),C}const p=k=>f(k);function v(k){Le[k?"unshift":"push"](()=>{i=k,n(5,i)})}function S(k){Le[k?"unshift":"push"](()=>{d=k,n(6,d)})}return t.$$set=k=>{"params"in k&&n(2,r=k.params),"enabledFields"in k&&n(0,s=k.enabledFields),"disabledFields"in k&&n(1,a=k.disabledFields),"loadLayout"in k&&n(3,u=k.loadLayout),"fetch"in k&&n(4,m=k.fetch)},[s,a,r,u,m,i,d,f,h,b,p,v,S]}let si=class extends Te{constructor(e){super(),Ie(this,e,Yr,zr,we,{params:2,enabledFields:0,disabledFields:1,loadLayout:3,fetch:4})}};function xr(t){let e,n,i={params:t[0],enabledFields:t[2],disabledFields:t[3],editable:Ur,loadLayout:t[4]};return e=new si({props:i}),t[5](e),{c(){Ke(e.$$.fragment)},m(l,o){xe(e,l,o),n=!0},p(l,[o]){const r={};o&1&&(r.params=l[0]),o&4&&(r.enabledFields=l[2]),o&8&&(r.disabledFields=l[3]),e.$set(r)},i(l){n||(Se(e.$$.fragment,l),n=!0)},o(l){Pe(e.$$.fragment,l),n=!1},d(l){t[5](null),Ue(e,l)}}}let Ur=!0;function Vr(t,e,n){let{params:i}=e;i.dataAttributeList||(i.dataAttributeList=["id","name","width","widthPx","link","notSortable","align","view","customLabel","editable"]),i.dataAttributesDefs||(i.dataAttributesDefs={link:{type:"bool"},width:{type:"float"},notSortable:{type:"bool"},align:{type:"enum",options:["left","right"]},view:{type:"varchar",readOnly:!0},customLabel:{type:"varchar",readOnly:!0},widthPx:{type:"float"},name:{type:"varchar",readOnly:!0},editable:{type:"bool"}});let l,o=[],r=[];const s=[],a=[];function u(p){xt.create(i.scope,v=>{tt.get(i.scope,i.type,i.relatedScope,i.layoutProfileId,S=>{p&&(f(v,S.layout),p(S))},!1)})}function d(p){return p==="_self"?O.translate(i.scope,"scopeNamesPlural","Global"):p==="_bookmark"?O.translate("Bookmark","scopeNamesPlural","Global"):O.translate(p,"fields",i.scope)}function c(){const p=[];return i.type==="leftSidebar"&&(ce.get(["scopes",i.scope,"bookmarkDisabled"])||p.push("_bookmark"),ce.get(["scopes",i.scope,"type"])==="Hierarchy"&&!ce.get(["scopes",i.scope,"disableHierarchy"])&&p.push("_self")),p}function f(p,v){let S=Object.keys(p.defs.fields).filter(L=>m(p.getFieldParam(L,"type"))&&h(p,L));S.push(...c()),S=S.sort((L,w)=>d(L).localeCompare(d(w)));const k=[],C=[],E=[];n(2,o=v.map(L=>{const w=d(L.name);return C.includes(w)&&E.push(w),C.push(w),k.push(L.name),{...L,label:L.label||w}})),n(3,r=S.filter(L=>!k.includes(L)).map(L=>{const w=d(L);C.includes(w)&&E.push(w),C.push(w);const I={name:L,label:w},y=ce.get(["entityDefs",i.scope,"fields",L,"type"]);return y&&ce.get(["fields",y,"notSortable"])&&(I.notSortable=!0),I})),[o,r].forEach(L=>{L.forEach(w=>{E.includes(w.label)&&(w.label+=` (${w.name})`)})})}function m(p){return i.fieldTypes?i.fieldTypes.includes(p):!0}function h(p,v){if(s.includes(v)||a.includes(p.getFieldParam(v,"type")))return!1;const S=["disabled",`layout${Espo.utils.upperCaseFirst(i.type)}Disabled`];i.reelType&&S.push(`layout${Espo.utils.upperCaseFirst(i.reelType)}Disabled`);for(let k of S)if(p.getFieldParam(v,k))return!1;return!0}function b(p){Le[p?"unshift":"push"](()=>{l=p,n(1,l)})}return t.$$set=p=>{"params"in p&&n(0,i=p.params)},[i,l,o,r,u,b]}class ui extends Te{constructor(e){super(),Ie(this,e,Vr,xr,we,{params:0})}}function Jr(t){let e,n,i={params:t[0],enabledFields:t[2],disabledFields:t[3],loadLayout:t[5],fetch:t[4]};return e=new si({props:i}),t[7](e),{c(){Ke(e.$$.fragment)},m(l,o){xe(e,l,o),n=!0},p(l,[o]){const r={};o&1&&(r.params=l[0]),o&4&&(r.enabledFields=l[2]),o&8&&(r.disabledFields=l[3]),e.$set(r)},i(l){n||(Se(e.$$.fragment,l),n=!0)},o(l){Pe(e.$$.fragment,l),n=!1},d(l){t[7](null),Ue(e,l)}}}function Kr(t,e,n){let{params:i}=e,{viewType:l="detail"}=e;i.dataAttributeList||(i.dataAttributeList=["id","name","style","sticked"]),i.dataAttributesDefs||(i.dataAttributesDefs={style:{type:"enum",options:["default","success","danger","primary","info","warning"],translation:"LayoutManager.options.style"},sticked:{type:"bool"},name:{readOnly:!0}});let o,r=[],s=[],a=()=>{let f={};return r.forEach(m=>{f[m.name]=m}),s.forEach(m=>{f[m.name]={...m,disabled:!0}}),f};function u(f){tt.get(i.scope,i.type,null,i.layoutProfileId,m=>{f&&(d(m.layout),f(m))},!1)}function d(f){let m=[],h={},b={};ce.get(["clientDefs",i.scope,"defaultSidePanel",l])!==!1&&!ce.get(["clientDefs",i.scope,"defaultSidePanelDisabled"])&&(m.push("default"),h.default="Default"),(ce.get(["clientDefs",i.scope,"sidePanels",l])||[]).forEach(p=>{p.name&&(m.push(p.name),p.label&&(h[p.name]=p.label),b[p.name]=p)}),n(3,s=[]),f=f||{},n(2,r=[]),m.forEach((p,v)=>{let S=!1,k=f[p]||{};k.disabled&&(S=!0);let C;if(h[p]?C=O.translate(h[p],"labels",i.scope):C=O.translate(p,"panels",i.scope),S)s.push({name:p,label:C});else{let E={name:p,label:C};E.name in b&&i.dataAttributeList.forEach(L=>{if(L==="name")return;let w=b[E.name]||{};L in w&&(E[L]=w[L])});for(let L in k)E[L]=k[L];E.index="index"in k?k.index:v,r.push(E)}}),r.sort((p,v)=>p.index-v.index)}function c(f){Le[f?"unshift":"push"](()=>{o=f,n(1,o)})}return t.$$set=f=>{"params"in f&&n(0,i=f.params),"viewType"in f&&n(6,l=f.viewType)},[i,o,r,s,a,u,l,c]}class Qr extends Te{constructor(e){super(),Ie(this,e,Kr,Jr,we,{params:0,viewType:6})}}function Zr(t){let e,n;return e=new si({props:{params:t[0],enabledFields:t[1],disabledFields:t[2],loadLayout:t[3]}}),{c(){Ke(e.$$.fragment)},m(i,l){xe(e,i,l),n=!0},p(i,[l]){const o={};l&1&&(o.params=i[0]),l&2&&(o.enabledFields=i[1]),l&4&&(o.disabledFields=i[2]),e.$set(o)},i(i){n||(Se(e.$$.fragment,i),n=!0)},o(i){Pe(e.$$.fragment,i),n=!1},d(i){Ue(e,i)}}}function $r(t,e){return!t.getLinkParam(e,"disabled")&&!t.getLinkParam(e,"layoutRelationshipsDisabled")}function ea(t,e,n){let{params:i}=e;i.dataAttributeList||(i.dataAttributeList=["id","name","style","hiddenPerDefault"]),i.dataAttributesDefs||(i.dataAttributesDefs={style:{type:"enum",options:["default","success","danger","primary","info","warning"],translation:"LayoutManager.options.style"},hiddenPerDefault:{type:"bool"},name:{readOnly:!0}});let l=[],o=[];function r(a){xt.create(i.scope,function(u){tt.get(i.scope,i.type,null,i.layoutProfileId,d=>{a&&(s(u,d.layout),a(d))},!1)})}function s(a,u){let d=[];for(let m in a.defs.links)["belongsTo","hasMany","hasChildren"].includes(a.defs.links[m].type)&&$r(a,m)&&d.push(m);const c=ce.get(["clientDefs",i.scope,"bottomPanels","detail"])||[];for(let m of c)m.layoutRelationshipsDisabled||d.push(m.name);d.sort(function(m,h){let b,p,v=c.find(k=>k.name===m),S=c.find(k=>k.name===h);return m in a.defs.links?b=O.translate(m,"links",i.scope):v&&(b=O.translate(v.label,"labels",i.scope)),h in a.defs.links?p=O.translate(h,"links",i.scope):S&&(p=O.translate(S.label,"labels",i.scope)),b.localeCompare(p)});let f=[];n(1,l=[]),n(2,o=[]);for(let m in u){let h=u[m],b,p=c.find(v=>v.name===h.name);typeof h=="string"||h instanceof String?b={name:h,label:p?O.translate(p.label,"labels",i.scope):O.translate(h,"links",i.scope)}:(b=h,b.label=p?O.translate(p.label,"labels",i.scope):O.translate(b.name,"links",i.scope)),i.dataAttributeList.forEach(v=>{if(v==="name"||v in b)return;let S=ce.get(["clientDefs",i.scope,"relationshipPanels",b.name,v]);S!==null&&(b[v]=S)}),l.push(b),f.push(b.name)}for(let m of d)if(!f.includes(m)){let h=c.find(b=>b.name===m);o.push({name:m,label:h?O.translate(h.label,"labels",i.scope):O.translate(m,"links",i.scope)})}}return t.$$set=a=>{"params"in a&&n(0,i=a.params)},[i,l,o,r]}class ta extends Te{constructor(e){super(),Ie(this,e,ea,Zr,we,{params:0})}}function Rl(t,e,n){const i=t.slice();return i[39]=e[n],i}function Bl(t,e,n){const i=t.slice();return i[42]=e[n],i}function Hl(t,e,n){const i=t.slice();return i[45]=e[n],i}function jl(t,e,n){const i=t.slice();return i[48]=e[n],i[50]=n,i}function na(t){let e,n,i,l,o;function r(){return t[20](t[42],t[45],t[50])}function s(...a){return t[21](t[42],t[45],t[50],...a)}return{c(){e=D("li"),n=D("a"),n.innerHTML='<i class="fas fa-minus"></i>',i=R(),g(n,"href","#"),g(n,"data-action","minusCell"),g(n,"class","remove-field svelte-1wub2tj"),g(e,"class","empty cell svelte-1wub2tj")},m(a,u){G(a,e,u),_(e,n),_(e,i),l||(o=[le(n,"click",ft(r)),le(e,"dragover",ft(aa)),le(e,"drop",s)],l=!0)},p(a,u){t=a},d(a){a&&j(e),l=!1,Ye(o)}}}function ia(t){let e,n=t[48].label+"",i,l,o,r,s,a,u,d,c,f,m;function h(){return t[18](t[42],t[45],t[50])}function b(...p){return t[19](t[48],...p)}return{c(){e=D("li"),i=pe(n),l=R(),o=D("a"),o.innerHTML='<i class="fas fa-times"></i>',r=R(),g(o,"href","#"),g(o,"data-action","removeField"),g(o,"class","remove-field svelte-1wub2tj"),g(e,"class","cell svelte-1wub2tj"),g(e,"draggable","true"),g(e,"data-id",s=t[48].id),g(e,"data-name",a=t[48].name),g(e,"data-full-width",u=t[48].fullWidth?"true":void 0),g(e,"data-custom-label",d=t[48].customLabel?t[48].customLabel:void 0),g(e,"data-no-label",c=t[48].noLabel)},m(p,v){G(p,e,v),_(e,i),_(e,l),_(e,o),_(e,r),f||(m=[le(o,"click",ft(h)),le(e,"dragstart",Bn(b))],f=!0)},p(p,v){t=p,v[0]&2&&n!==(n=t[48].label+"")&&Be(i,n),v[0]&2&&s!==(s=t[48].id)&&g(e,"data-id",s),v[0]&2&&a!==(a=t[48].name)&&g(e,"data-name",a),v[0]&2&&u!==(u=t[48].fullWidth?"true":void 0)&&g(e,"data-full-width",u),v[0]&2&&d!==(d=t[48].customLabel?t[48].customLabel:void 0)&&g(e,"data-custom-label",d),v[0]&2&&c!==(c=t[48].noLabel)&&g(e,"data-no-label",c)},d(p){p&&j(e),f=!1,Ye(m)}}}function Wl(t){let e;function n(o,r){return o[48]?ia:na}let i=n(t),l=i(t);return{c(){l.c(),e=Rn()},m(o,r){l.m(o,r),G(o,e,r)},p(o,r){i===(i=n(o))&&l?l.p(o,r):(l.d(1),l=i(o),l&&(l.c(),l.m(e.parentNode,e)))},d(o){o&&j(e),l.d(o)}}}function ql(t,e){let n,i,l,o,r,s,a,u,d;function c(){return e[17](e[42],e[45])}let f=ge(e[45].cells),m=[];for(let h=0;h<f.length;h+=1)m[h]=Wl(jl(e,f,h));return{key:t,first:null,c(){n=D("li"),i=D("div"),l=D("a"),l.innerHTML='<i class="fas fa-times"></i>',o=R(),r=D("ul");for(let h=0;h<m.length;h+=1)m[h].c();s=R(),g(l,"href","#"),g(l,"data-action","removeRow"),g(l,"class","remove-row pull-right svelte-1wub2tj"),g(i,"class","svelte-1wub2tj"),g(r,"class","cells svelte-1wub2tj"),g(n,"class","row svelte-1wub2tj"),g(n,"data-number",a=e[45].number),this.first=n},m(h,b){G(h,n,b),_(n,i),_(i,l),_(n,o),_(n,r);for(let p=0;p<m.length;p+=1)m[p]&&m[p].m(r,null);_(n,s),u||(d=[le(l,"click",ft(c)),le(r,"mousedown",Bn(sa))],u=!0)},p(h,b){if(e=h,b[0]&5634){f=ge(e[45].cells);let p;for(p=0;p<f.length;p+=1){const v=jl(e,f,p);m[p]?m[p].p(v,b):(m[p]=Wl(v),m[p].c(),m[p].m(r,null))}for(;p<m.length;p+=1)m[p].d(1);m.length=f.length}b[0]&2&&a!==(a=e[45].number)&&g(n,"data-number",a)},d(h){h&&j(n),qt(m,h),u=!1,Ye(d)}}}function Gl(t,e){let n,i,l,o=(e[42].customLabel||e[42].label||"")+"",r,s,a,u,d,c,f,m,h,b,p,v=[],S=new Map,k,C,E,L,w,I,y;function W(){return e[15](e[42])}function Y(){return e[16](e[42])}let F=ge(e[42].rows);const Q=A=>A[45].number;for(let A=0;A<F.length;A+=1){let z=Hl(e,F,A),ve=Q(z);S.set(ve,v[A]=ql(ve,z))}function Z(){return e[22](e[42])}return{key:t,first:null,c(){n=D("li"),i=D("header"),l=D("label"),r=pe(o),a=pe(` \r
                                `),u=D("a"),u.innerHTML='<i class="fas fa-pencil-alt fa-sm"></i>',d=R(),c=D("a"),f=D("i"),b=R(),p=D("ul");for(let A=0;A<v.length;A+=1)v[A].c();k=R(),C=D("div"),E=D("a"),E.innerHTML='<i class="fas fa-plus"></i>',L=R(),g(l,"data-is-custom",s=e[42].customLabel?"true":void 0),g(l,"class","svelte-1wub2tj"),g(u,"href","#"),g(u,"data-action","edit-panel-label"),g(u,"class","edit-panel-label svelte-1wub2tj"),g(f,"class","fas fa-times"),g(c,"href","#"),ue(c,"float","right"),g(c,"data-action","removePanel"),g(c,"class","remove-panel svelte-1wub2tj"),g(c,"data-number",m=e[42].number),g(i,"data-name",h=e[42].name),g(i,"class","svelte-1wub2tj"),g(p,"class","rows svelte-1wub2tj"),g(E,"href","#"),g(E,"data-action","addRow"),g(E,"class","svelte-1wub2tj"),g(C,"class","svelte-1wub2tj"),g(n,"data-number",w=e[42].number),g(n,"class","panel-layout svelte-1wub2tj"),this.first=n},m(A,z){G(A,n,z),_(n,i),_(i,l),_(l,r),_(i,a),_(i,u),_(i,d),_(i,c),_(c,f),_(n,b),_(n,p);for(let ve=0;ve<v.length;ve+=1)v[ve]&&v[ve].m(p,null);_(n,k),_(n,C),_(C,E),_(n,L),I||(y=[le(u,"click",ft(W)),le(c,"click",ft(Y)),le(p,"mousedown",Bn(ua)),le(E,"click",ft(Z))],I=!0)},p(A,z){e=A,z[0]&2&&o!==(o=(e[42].customLabel||e[42].label||"")+"")&&Be(r,o),z[0]&2&&s!==(s=e[42].customLabel?"true":void 0)&&g(l,"data-is-custom",s),z[0]&2&&m!==(m=e[42].number)&&g(c,"data-number",m),z[0]&2&&h!==(h=e[42].name)&&g(i,"data-name",h),z[0]&5890&&(F=ge(e[42].rows),v=Tt(v,z,Q,1,e,F,S,p,It,ql,null,Hl)),z[0]&2&&w!==(w=e[42].number)&&g(n,"data-number",w)},d(A){A&&j(n);for(let z=0;z<v.length;z+=1)v[z].d();I=!1,Ye(y)}}}function zl(t){let e,n=t[39].label+"",i,l,o,r,s;function a(...u){return t[23](t[39],...u)}return{c(){e=D("li"),i=pe(n),l=R(),g(e,"class","cell svelte-1wub2tj"),g(e,"data-name",o=t[39].name)},m(u,d){G(u,e,d),_(e,i),_(e,l),r||(s=le(e,"dragstart",a),r=!0)},p(u,d){t=u,d[0]&4&&n!==(n=t[39].label+"")&&Be(i,n),d[0]&4&&o!==(o=t[39].name)&&g(e,"data-name",o)},d(u){u&&j(e),r=!1,s()}}}function la(t){let e,n,i,l,o,r,s,a,u=[],d=new Map,c,f,m,h,b,p,v,S,k=ge(t[1]);const C=w=>w[42].number;for(let w=0;w<k.length;w+=1){let I=Bl(t,k,w),y=C(I);d.set(y,u[w]=Gl(y,I))}let E=ge(t[2]),L=[];for(let w=0;w<E.length;w+=1)L[w]=zl(Rl(t,E,w));return{c(){e=D("div"),n=D("div"),i=D("div"),l=D("header"),l.textContent=`${O.translate("Layout","LayoutManager")}`,o=R(),r=D("a"),r.textContent=`${O.translate("Add Panel","Admin")}`,s=R(),a=D("ul");for(let w=0;w<u.length;w+=1)u[w].c();c=R(),f=D("div"),m=D("div"),h=D("header"),h.textContent=`${O.translate("Available Fields","Admin")}`,b=R(),p=D("ul");for(let w=0;w<L.length;w+=1)L[w].c();g(l,"class","svelte-1wub2tj"),g(r,"href","#"),g(r,"class","svelte-1wub2tj"),g(a,"class","panels svelte-1wub2tj"),g(i,"class","well svelte-1wub2tj"),g(n,"class","col-md-8 svelte-1wub2tj"),g(h,"class","svelte-1wub2tj"),g(p,"class","disabled cells clearfix svelte-1wub2tj"),g(m,"class","well available-fields svelte-1wub2tj"),g(f,"class","col-md-4 svelte-1wub2tj"),g(e,"id","layout"),g(e,"class","row svelte-1wub2tj")},m(w,I){G(w,e,I),_(e,n),_(n,i),_(i,l),_(i,o),_(i,r),_(i,s),_(i,a);for(let y=0;y<u.length;y+=1)u[y]&&u[y].m(a,null);_(e,c),_(e,f),_(f,m),_(m,h),_(m,b),_(m,p);for(let y=0;y<L.length;y+=1)L[y]&&L[y].m(p,null);v||(S=le(r,"click",ft(t[5])),v=!0)},p(w,I){if(I[0]&8130&&(k=ge(w[1]),u=Tt(u,I,C,1,w,k,d,a,It,Gl,null,Bl)),I[0]&4){E=ge(w[2]);let y;for(y=0;y<E.length;y+=1){const W=Rl(w,E,y);L[y]?L[y].p(W,I):(L[y]=zl(W),L[y].c(),L[y].m(p,null))}for(;y<L.length;y+=1)L[y].d(1);L.length=E.length}},d(w){w&&j(e);for(let I=0;I<u.length;I+=1)u[I].d();qt(L,w),v=!1,S()}}}function oa(t){let e,n;return e=new ol({props:{params:t[0],validate:t[13],fetch:t[4],loadLayout:t[3],$$slots:{default:[la]},$$scope:{ctx:t}}}),{c(){Ke(e.$$.fragment)},m(i,l){xe(e,i,l),n=!0},p(i,l){const o={};l[0]&1&&(o.params=i[0]),l[0]&6|l[1]&1048576&&(o.$$scope={dirty:l,ctx:i}),e.$set(o)},i(i){n||(Se(e.$$.fragment,i),n=!0)},o(i){Pe(e.$$.fragment,i),n=!1},d(i){Ue(e,i)}}}function ra(t,e){return e.some(n=>n.name===t)}const aa=t=>t.dataTransfer.dropEffect="move",sa=()=>{},ua=()=>{};function da(t,e,n){let{params:i}=e,{columnCount:l=2}=e,o=["id","label","style"],r={label:{type:"varchar"},style:{type:"enum",options:["default","success","danger","primary","info","warning"],translation:"LayoutManager.options.style"},dynamicLogicVisible:{type:"base",view:"views/admin/field-manager/fields/dynamic-logic-conditions"}},s=["modifiedAt","createdAt","modifiedBy","createdBy","assignedUser","ownerUser","teams"],a=[],u=[],d=-1,c=-1,f;ji();function m(M){let N,q;const U=[];U.push(new Promise(J=>{xt.create(i.scope,ae=>{tt.get(i.scope,i.type,i.relatedScope,i.layoutProfileId,oe=>{N=oe,q=ae,J()},!1)})})),i.type==="detail"&&U.push(new Promise(J=>{tt.get(i.scope,"sidePanelsDetail",null,i.layoutProfileId,ae=>{f=ae.layout,J()},!1)})),Promise.all(U).then(()=>{M&&(h(q,N.layout),S(),Lt().then(()=>{C()}),M(N))})}function h(M,N){let q=[];const U=[];for(const oe in M.defs.fields)b(M,oe)&&(U.push(O.translate(oe,"fields",i.scope)),q.push(oe));const J=U.filter((oe,Me)=>U.indexOf(oe)!==Me);let ae=[];n(2,u=[]),n(1,a=N),N.forEach((oe,Me)=>{oe.rows.forEach((de,Xe)=>{de&&de.forEach((qe,et)=>{if(et==l||!qe)return;let lt=O.translate(qe.name,"fields",i.scope);J.includes(lt)&&(lt+=` (${qe.name})`),ae.push({name:qe.name,label:lt}),n(1,a[Me].rows[Xe][et].label=lt,a)})})}),q.sort((oe,Me)=>O.translate(oe,"fields",i.scope).localeCompare(O.translate(Me,"fields",i.scope)));for(const oe in q)if(!ra(q[oe],ae)){const Me=q[oe];let de=O.translate(Me,"fields",i.scope);J.includes(de)&&(de+=` (${Me})`),u.push({name:Me,label:de})}}function b(M,N){if(p()&&s.includes(N))return!1;const q=["disabled",`layout${Espo.utils.upperCaseFirst(i.type)}Disabled`];i.reelType&&q.push(`layout${Espo.utils.upperCaseFirst(i.reelType)}Disabled`);for(let U of q)if(M.getFieldParam(N,U))return!1;return!0}function p(){if(ce.get(["clientDefs",i.scope,"defaultSidePanelDisabled"]))return!1;if(f){for(const M in f)if(M==="default"&&f[M].disabled)return!1}return!0}function v(){return a.map(M=>({...M,rows:M.rows.map(N=>N.cells)}))}function S(){d=-1,c=-1,n(1,a=a.map((M,N)=>(M.number=N,d=N,M.rows=M.rows.map(q=>({number:c++,cells:q})),M)))}function k(M){X.create(M,{animation:150,group:"rows",draggable:"li.row",onEnd(N){const q=parseInt(N.to.closest(".panel-layout").getAttribute("data-number")),U=parseInt(N.from.closest(".panel-layout").getAttribute("data-number"));if(U===q)n(1,a=a.map(J=>{if(J.number===q){const[ae]=J.rows.splice(N.oldIndex,1);J.rows.splice(N.newIndex,0,ae)}return J}));else{const ae=a.find(oe=>oe.number===U).rows[N.oldIndex];n(1,a=a.map(oe=>(oe.number===U&&oe.rows.splice(N.oldIndex,1),oe.number===q&&oe.rows.splice(N.newIndex,0,ae),oe)))}}})}function C(){const M=document.querySelector("ul.panels");M&&X.create(M,{animation:150,group:"panels",draggable:"li.panel-layout",onEnd(N){const q=Array.from(N.to.children);n(1,a=q.map(U=>{const J=parseInt(U.getAttribute("data-number"));return a.find(ae=>ae.number===J)}))}}),document.querySelectorAll("ul.rows").forEach(N=>{k(N)}),document.querySelectorAll("ul.cells.disabled").forEach(N=>{X.create(N,{animation:150,group:"cells",draggable:"li.cell"})})}function E(){d++;const M={label:"New panel",rows:[{number:c++,cells:[!1,!1]}],number:d,name:`panel${d}`,isCustomLabel:!0};n(1,a=[...a,M]),Lt().then(()=>{const N=document.querySelector(`.panel-layout[data-number="${M.number}"] > .rows`);k(N)})}function L(M){const N=a.find(U=>U.number===M);n(1,a=a.filter(U=>U!==N));let q=[];N.rows.forEach(U=>{U.cells.forEach(J=>{J&&q.push(J)})}),n(2,u=[...u,...q])}function w(M){n(1,a=a.map(N=>(N.number===M&&(N.rows=[...N.rows,{number:c++,cells:Array(l).fill(!1)}]),N)))}function I(M,N){n(1,a=a.map(q=>{if(q.number===M){const U=q.rows.find(J=>J.number===N);q.rows=q.rows.filter(J=>J!=U),n(2,u=[...u,...U.cells.filter(J=>!!J)])}return q}))}function y(M,N,q){n(1,a=a.map(U=>(U.number===M&&(U.rows=U.rows.map((J,ae)=>{if(J.number===N){const oe=J.cells[q];oe&&n(2,u=[...u,oe]),J.cells[q]=!1}return J})),U)))}function W(M,N,q,U){const J=M.dataTransfer.getData("name");let ae=u.find(de=>de.name===J),oe=null,Me=null;if(ae)n(2,u=u.filter(de=>de!==ae));else{if(a.forEach(de=>{de.rows.forEach((Xe,qe)=>{Xe.cells.forEach(et=>{et&&et.name===J&&(ae=et,oe=Xe.number,Me=de.number)})})}),!ae)return;n(1,a=a.map((de,Xe)=>(Me===de.number&&(de.rows=de.rows.map((qe,et)=>(qe.number===oe&&(qe.cells=qe.cells.map((lt,co)=>lt&&lt.name===J?!1:lt)),qe))),de)))}n(1,a=a.map(de=>(N===de.number&&(de.rows=de.rows.map(Xe=>(q===Xe.number&&(Xe.cells=Xe.cells.map((qe,et)=>et===U?(ae.fullWidth&&Xe.cells.length>1&&delete ae.fullWidth,ae):qe)),Xe))),de)))}function Y(M){i.onEditPanel(M,o,r,N=>{n(1,a=a.map(q=>(q.number===M.number&&o.forEach(U=>{M[U]=N[U]}),q)))})}function F(M,N,q){n(1,a=a.map(U=>(M===U.number&&(U.rows=U.rows.map(J=>{if(N===J.number){const ae=J.cells.filter((oe,Me)=>Me!==q);ae.length===1&&ae[0]&&(ae[0].fullWidth=!0),J.cells=ae}return J})),U)))}function Q(M){let N=0;return M.forEach(q=>{q.rows.forEach(U=>{U.forEach(J=>{J&&N++})})}),N===0?(He.notify("Layout cannot be empty.","error"),!1):!0}const Z=M=>Y(M),A=M=>L(M.number),z=(M,N)=>I(M.number,N.number),ve=(M,N,q)=>y(M.number,N.number,q),Je=(M,N)=>{N.dataTransfer.setData("name",M.name)},ut=(M,N,q)=>F(M.number,N.number,q),vt=(M,N,q,U)=>W(U,M.number,N.number,q),$e=M=>w(M.number),dt=(M,N)=>{N.dataTransfer.setData("name",M.name)};return t.$$set=M=>{"params"in M&&n(0,i=M.params),"columnCount"in M&&n(14,l=M.columnCount)},[i,a,u,m,v,E,L,w,I,y,W,Y,F,Q,l,Z,A,z,ve,Je,ut,vt,$e,dt]}class ca extends Te{constructor(e){super(),Ie(this,e,da,oa,we,{params:0,columnCount:14},null,[-1,-1])}}function fa(t){let e,n;return e=new t[1]({props:{params:t[0],viewType:t[2]}}),{c(){Ke(e.$$.fragment)},m(i,l){xe(e,i,l),n=!0},p(i,[l]){const o={};l&1&&(o.params=i[0]),l&4&&(o.viewType=i[2]),e.$set(o)},i(i){n||(Se(e.$$.fragment,i),n=!0)},o(i){Pe(e.$$.fragment,i),n=!1},d(i){Ue(e,i)}}}function pa(t,e,n){let{params:i}=e,l,o;const r=ce.get(["clientDefs",i.scope,"additionalLayouts",i.type])||i.type;switch(r&&(i.reelType=r),t.$$set=s=>{"params"in s&&n(0,i=s.params)},r){case"list":n(1,l=ui);break;case"leftSidebar":n(1,l=ui),n(0,i.fieldTypes=["link","linkMultiple"],i);break;case"kanban":n(1,l=ui),n(0,i.dataAttributeList=["id","name","link","align","view","isLarge","cssStyle"],i),n(0,i.dataAttributesDefs={link:{type:"bool"},isLarge:{type:"bool"},width:{type:"float"},cssStyle:{type:"varchar"},align:{type:"enum",options:["left","right"]},view:{type:"varchar",readOnly:!0},name:{type:"varchar",readOnly:!0}},i);break;case"relationships":n(1,l=ta);break;case"detail":n(1,l=ca);break;case"sidePanelsDetail":n(2,o="detail"),n(1,l=Qr);break}return[i,l,o]}class ha extends Te{constructor(e){super(),Ie(this,e,pa,fa,we,{params:0})}}function ma(t){let e,n,i,l,o,r=O.translate("apiRequest","labels","Admin")+"",s,a,u,d,c,f,m,h,b,p,v,S,k,C,E,L,w,I,y,W,Y,F,Q=O.translate("response","fields","Admin")+"",Z,A,z=O.translate("status","labels","Admin")+"",ve,Je,ut,vt,$e,dt,M;return{c(){e=D("div"),n=D("h3"),i=D("div"),l=D("div"),o=D("a"),o.textContent=`${O.translate("Administration")}`,s=pe(r),a=R(),u=D("div"),u.textContent=`${O.translate("apiRequest","labels","Admin")}`,d=R(),c=D("button"),c.textContent=`${O.translate("execute","labels","Admin")}`,f=R(),m=D("div"),h=D("div"),b=D("div"),p=D("div"),v=D("label"),v.textContent=`${O.translate("Type","fields","Admin")}`,S=R(),k=D("div"),C=R(),E=D("div"),L=D("div"),w=D("label"),w.textContent=`${O.translate("request","fields","Admin")}`,I=R(),y=D("div"),W=R(),Y=D("div"),F=D("label"),Z=pe(Q),A=D("span"),ve=pe(z),Je=pe(": "),ut=D("span"),vt=R(),$e=D("div"),g(o,"href","#Admin"),g(l,"class","breadcrumbs-wrapper"),g(i,"class","header-breadcrumbs fixed-header-breadcrumbs"),g(u,"class","header-title"),ue(c,"margin","10px 7px 10px 5px"),g(c,"class","btn btn-primary action"),g(c,"data-action","execute"),g(c,"type","button"),g(e,"class","page-header"),g(v,"class","control-label"),g(v,"data-name","type"),g(k,"class","field"),g(k,"data-name","type"),g(p,"class","col-xs-12 cell form-group"),g(b,"class","row"),g(h,"class","col-sm-3"),g(m,"class","row"),g(w,"class","control-label"),g(w,"data-name","request"),g(y,"class","field"),g(y,"data-name","request"),g(L,"class","col-sm-12 col-md-6 cell form-group"),g(A,"class","pull-right status hidden"),ue(F,"width","100%"),g(F,"class","control-label"),g(F,"data-name","response"),g($e,"class","field"),g($e,"data-name","response"),g(Y,"class","col-sm-12 col-md-6 cell form-group"),g(E,"class","row")},m(N,q){G(N,e,q),_(e,n),_(n,i),_(i,l),_(l,o),_(l,s),_(n,a),_(n,u),_(e,d),_(e,c),G(N,f,q),G(N,m,q),_(m,h),_(h,b),_(b,p),_(p,v),_(p,S),_(p,k),G(N,C,q),G(N,E,q),_(E,L),_(L,w),_(L,I),_(L,y),_(E,W),_(E,Y),_(Y,F),_(F,Z),_(F,A),_(A,ve),_(A,Je),_(A,ut),_(Y,vt),_(Y,$e),dt||(M=le(c,"click",function(){dn(t[0](t[1]))&&t[0](t[1]).apply(this,arguments)}),dt=!0)},p(N,[q]){t=N},i:_e,o:_e,d(N){N&&(j(e),j(f),j(m),j(C),j(E)),dt=!1,M()}}}function ga(t,e,n){let{afterOnMount:i=()=>null}=e,{sendRequest:l=()=>null}=e,o=null;return St(()=>{xt.create("",function(r){n(1,o=r),i(o)})}),t.$$set=r=>{"afterOnMount"in r&&n(2,i=r.afterOnMount),"sendRequest"in r&&n(0,l=r.sendRequest)},[l,o,i]}class ba extends Te{constructor(e){super(),Ie(this,e,ga,ma,we,{afterOnMount:2,sendRequest:0})}}function Xl(t,e,n){const i=t.slice();return i[12]=e[n],i}function Yl(t){let e,n=t[12].label+"",i,l,o,r,s,a,u;function d(){return t[10](t[12])}return{c(){e=D("button"),i=pe(n),l=R(),g(e,"data-action",o=t[12].name),e.disabled=t[1],g(e,"type","button"),g(e,"style",r=t[12].cssStyle),g(e,"class",s=`btn action btn-${t[12].style??"default"}`)},m(c,f){G(c,e,f),_(e,i),_(e,l),a||(u=le(e,"click",d),a=!0)},p(c,f){t=c,f&1&&n!==(n=t[12].label+"")&&Be(i,n),f&1&&o!==(o=t[12].name)&&g(e,"data-action",o),f&2&&(e.disabled=t[1]),f&1&&r!==(r=t[12].cssStyle)&&g(e,"style",r),f&1&&s!==(s=`btn action btn-${t[12].style??"default"}`)&&g(e,"class",s)},d(c){c&&j(e),a=!1,u()}}}function va(t){let e,n,i,l=ge(t[0]),o=[];for(let a=0;a<l.length;a+=1)o[a]=Yl(Xl(t,l,a));const r=t[9].default,s=Ii(r,t,t[8],null);return{c(){e=D("div");for(let a=0;a<o.length;a+=1)o[a].c();n=R(),s&&s.c(),g(e,"class","button-container"),ue(e,"padding-top","10px")},m(a,u){G(a,e,u);for(let d=0;d<o.length;d+=1)o[d]&&o[d].m(e,null);t[11](e),G(a,n,u),s&&s.m(a,u),i=!0},p(a,[u]){if(u&11){l=ge(a[0]);let d;for(d=0;d<l.length;d+=1){const c=Xl(a,l,d);o[d]?o[d].p(c,u):(o[d]=Yl(c),o[d].c(),o[d].m(e,null))}for(;d<o.length;d+=1)o[d].d(1);o.length=l.length}s&&s.p&&(!i||u&256)&&Ni(s,r,a,a[8],i?Ai(r,a[8],u,null):Oi(a[8]),null)},i(a){i||(Se(s,a),i=!0)},o(a){Pe(s,a),i=!1},d(a){a&&(j(e),j(n)),qt(o,a),t[11](null),s&&s.d(a)}}}function _a(t,e,n){let{$$slots:i={},$$scope:l}=e,{params:o}=e,{fetch:r}=e,{validate:s=()=>!0}=e,a=!1,{buttonList:u=[{name:"save",label:O.translate("Save","labels"),style:"primary"},{name:"cancel",label:O.translate("Cancel","labels")}]}=e,d;function c(){n(1,a=!0);const b=r();s(b)&&o.onSaved(b),n(1,a=!1)}function f(b){if(b.action){b.action();return}switch(b.name){case"save":c();break}}const m=b=>f(b);function h(b){Le[b?"unshift":"push"](()=>{d=b,n(2,d)})}return t.$$set=b=>{"params"in b&&n(4,o=b.params),"fetch"in b&&n(5,r=b.fetch),"validate"in b&&n(6,s=b.validate),"buttonList"in b&&n(0,u=b.buttonList),"$$scope"in b&&n(8,l=b.$$scope)},[u,a,d,f,o,r,s,c,l,i,m,h]}class wa extends Te{constructor(e){super(),Ie(this,e,_a,va,we,{params:4,fetch:5,validate:6,buttonList:0,save:7})}get save(){return this.$$.ctx[7]}}function xl(t,e,n){const i=t.slice();return i[22]=e[n],i}function Ul(t,e,n){const i=t.slice();return i[22]=e[n],i}function Vl(t){let e,n,i;function l(){return t[14](t[22])}return{c(){e=D("a"),e.innerHTML='<i class="fas fa-pencil-alt fa-sm svelte-k36s4n"></i>',g(e,"href","javascript:"),g(e,"data-action","editField"),g(e,"class","edit-field svelte-k36s4n")},m(o,r){G(o,e,r),n||(i=le(e,"click",l),n=!0)},p(o,r){t=o},d(o){o&&j(e),n=!1,i()}}}function Jl(t){let e,n,i;function l(){return t[15](t[22])}return{c(){e=D("a"),e.innerHTML='<i class="fas fa-times"></i>',g(e,"href","javascript:"),g(e,"data-action","removeField"),g(e,"class","remove-field svelte-k36s4n")},m(o,r){G(o,e,r),n||(i=le(e,"click",l),n=!0)},p(o,r){t=o},d(o){o&&j(e),n=!1,i()}}}function Kl(t,e){let n,i,l,o=e[22].label+"",r,s,a,u,d,c,f,m=e[22].canEdit&&Vl(e),h=e[22].canRemove&&Jl(e),b=[On(e[22]),{class:f=(e[22].isGroup?"group":"")+" "+(e[22].groupEnd?"end":"")+" "+(e[1][e[22].name]&&!e[22].isGroup?"in-group":"")}],p={};for(let v=0;v<b.length;v+=1)p=Wt(p,b[v]);return{key:t,first:null,c(){n=D("li"),i=D("div"),l=D("label"),r=pe(o),a=R(),u=D("div"),m&&m.c(),d=R(),h&&h.c(),c=R(),g(l,"title",s=e[22].label),g(l,"class","svelte-k36s4n"),g(i,"class","left svelte-k36s4n"),g(u,"class","right svelte-k36s4n"),pt(n,p),me(n,"svelte-k36s4n",!0),this.first=n},m(v,S){G(v,n,S),_(n,i),_(i,l),_(l,r),_(n,a),_(n,u),m&&m.m(u,null),_(u,d),h&&h.m(u,null),_(n,c)},p(v,S){e=v,S&1&&o!==(o=e[22].label+"")&&Be(r,o),S&1&&s!==(s=e[22].label)&&g(l,"title",s),e[22].canEdit?m?m.p(e,S):(m=Vl(e),m.c(),m.m(u,d)):m&&(m.d(1),m=null),e[22].canRemove?h?h.p(e,S):(h=Jl(e),h.c(),h.m(u,null)):h&&(h.d(1),h=null),pt(n,p=gn(b,[S&1&&On(e[22]),S&3&&f!==(f=(e[22].isGroup?"group":"")+" "+(e[22].groupEnd?"end":"")+" "+(e[1][e[22].name]&&!e[22].isGroup?"in-group":""))&&{class:f}])),me(n,"svelte-k36s4n",!0)},d(v){v&&j(n),m&&m.d(),h&&h.d()}}}function Ql(t,e){let n,i,l,o=e[22].label+"",r,s,a,u=[On(e[22])],d={};for(let c=0;c<u.length;c+=1)d=Wt(d,u[c]);return{key:t,first:null,c(){n=D("li"),i=D("div"),l=D("label"),r=pe(o),a=R(),g(l,"title",s=e[22].label),g(l,"class","svelte-k36s4n"),g(i,"class","left svelte-k36s4n"),pt(n,d),me(n,"svelte-k36s4n",!0),this.first=n},m(c,f){G(c,n,f),_(n,i),_(i,l),_(l,r),_(n,a)},p(c,f){e=c,f&8&&o!==(o=e[22].label+"")&&Be(r,o),f&8&&s!==(s=e[22].label)&&g(l,"title",s),pt(n,d=gn(u,[f&8&&On(e[22])])),me(n,"svelte-k36s4n",!0)},d(c){c&&j(n)}}}function ya(t){let e,n,i,l,o,r,s=[],a=new Map,u,d,c,f,m,h,b,p,v=[],S=new Map,k=ge(t[0].sort($l));const C=w=>w[22].name;for(let w=0;w<k.length;w+=1){let I=Ul(t,k,w),y=C(I);a.set(y,s[w]=Kl(y,I))}let E=ge(t[3]);const L=w=>w[22].name;for(let w=0;w<E.length;w+=1){let I=xl(t,E,w),y=L(I);S.set(y,v[w]=Ql(y,I))}return{c(){e=D("div"),n=D("div"),i=D("div"),l=D("header"),l.textContent=`${O.translate("Selected","labels","Admin")}`,o=R(),r=D("ul");for(let w=0;w<s.length;w+=1)s[w].c();u=R(),d=D("div"),c=R(),f=D("div"),m=D("div"),h=D("header"),h.textContent=`${O.translate("Available","labels","Admin")}`,b=R(),p=D("ul");for(let w=0;w<v.length;w+=1)v[w].c();g(l,"class","svelte-k36s4n"),g(r,"class","enabled connected svelte-k36s4n"),g(i,"class","well svelte-k36s4n"),g(n,"class","col-sm-5"),g(d,"class","col-sm-2"),g(h,"class","svelte-k36s4n"),g(p,"class","disabled connected svelte-k36s4n"),g(m,"class","well svelte-k36s4n"),g(f,"class","col-sm-5"),g(e,"id","layout"),g(e,"class","row")},m(w,I){G(w,e,I),_(e,n),_(n,i),_(i,l),_(i,o),_(i,r);for(let y=0;y<s.length;y+=1)s[y]&&s[y].m(r,null);_(e,u),_(e,d),_(e,c),_(e,f),_(f,m),_(m,h),_(m,b),_(m,p);for(let y=0;y<v.length;y+=1)v[y]&&v[y].m(p,null);t[16](e)},p(w,I){I&2115&&(k=ge(w[0].sort($l)),s=Tt(s,I,C,1,w,k,a,r,It,Kl,null,Ul)),I&8&&(E=ge(w[3]),v=Tt(v,I,L,1,w,E,S,p,It,Ql,null,xl))},d(w){w&&j(e);for(let I=0;I<s.length;I+=1)s[I].d();for(let I=0;I<v.length;I+=1)v[I].d();t[16](null)}}}function Ea(t){let e,n,i={params:t[2],validate:t[8],fetch:t[7],loadData:t[5],buttonList:t[4],$$slots:{default:[ya]},$$scope:{ctx:t}};return e=new wa({props:i}),t[17](e),{c(){Ke(e.$$.fragment)},m(l,o){xe(e,l,o),n=!0},p(l,[o]){const r={};o&4&&(r.params=l[2]),o&256&&(r.validate=l[8]),o&128&&(r.fetch=l[7]),o&32&&(r.loadData=l[5]),o&16&&(r.buttonList=l[4]),o&134218315&&(r.$$scope={dirty:o,ctx:l}),e.$set(r)},i(l){n||(Se(e.$$.fragment,l),n=!0)},o(l){Pe(e.$$.fragment,l),n=!1},d(l){t[17](null),Ue(e,l)}}}function ka(t){return t.toLowerCase()}function Zl(t,e){return t[e]}function On(t){let e={};return["name","id"].forEach(n=>{Zl(t,n)!=null&&(e[`data-${ka(n)}`]=Zl(t,n))}),e}const $l=(t,e)=>t.sortOrder-e.sortOrder;function Sa(t,e,n){let i,l,o,{params:r}=e,{enabledItems:s=[]}=e,{disabledItems:a=[]}=e,{buttonList:u}=e,{loadData:d}=e,{refresh:c=()=>{}}=e,{editItem:f}=e,{getGroupId:m=()=>"id"}=e,{fieldsInGroup:h}=e,b;function p(y){let W=!1,Y={};y.forEach(F=>{if(F.isGroup){W=F.name!=="";return}W&&(Y[F.name]=!0)}),n(1,h=Y)}St(()=>{v()}),Hn(()=>{l&&l.destroy(),o&&o.destroy()});function v(){const y={group:"fields",draggable:"li",animation:150};l=X.create(i.querySelector("ul.enabled"),{...y,onEnd(W){if(W.to.closest(".connected").classList.contains("enabled")){const[Y]=s.splice(W.oldIndex,1);s.splice(W.newIndex,0,Y);for(let F=W.newIndex;F<s.length;F++)n(0,s[F].sortOrder=(F>0?s[F-1].sortOrder:0)+F,s);p(s),c()}else{const Y=s[W.oldIndex];if(Y.canDisabled===!1){c();return}s.splice(W.oldIndex,1),a.splice(W.newIndex,0,Y),c()}}}),o=X.create(i.querySelector("ul.disabled"),{...y,onEnd(W){if(W.to.closest(".connected").classList.contains("disabled")){const[Y]=a.splice(W.oldIndex,1);a.splice(W.newIndex,0,Y)}else{const Y=a[W.oldIndex];a.splice(W.oldIndex,1),s.splice(W.newIndex,0,Y);for(let F=W.newIndex;F<s.length;F++)n(0,s[F].sortOrder=(F>0?s[F-1].sortOrder:0)+F,s);p(s),c()}}})}let{fetch:S=()=>{let y=[],W=!1,Y=!1;for(let A=0;A<s.length;A++){const z=s[A];if(z.isGroup){W=!z.groupEnd,y.push({id:z.id,name:z.name,color:z.color,iconClass:z.iconClass,items:[]});continue}W?y[y.length-1].items.push(z.name):y.push(z.name)}let F=!1,Q=y.filter(A=>{if(typeof A=="object"){if(A.name!==""&&!A.items.length)return!1;if(A.name!==""&&A.items.length)return F=!0,!0;if(A.name===""&&F)return F=!1,!0;if(A.name===""&&!F)return!1}return!0});Y=Q.length!==y.length,y=Q;let Z=[];for(let A=0;A<y.length;A++){let z=y[A];Z.push(z),typeof z=="object"&&z.name!==""&&(A===y.length-1||!(typeof y[A+1]=="object"&&y[A+1].name===""))&&(Y=!0,Z.push({id:m(),name:"",items:[]}))}return{adjusted:Y,navigation:Z}}}=e;function k(y){s.splice(s.findIndex(W=>W.id===y.id),1),c()}let{validate:C=y=>y.length===0?(He.notify("Menu cannot be empty","error"),!1):!0}=e;const E=y=>f(y),L=y=>k(y);function w(y){Le[y?"unshift":"push"](()=>{i=y,n(9,i)})}function I(y){Le[y?"unshift":"push"](()=>{b=y,n(10,b)})}return t.$$set=y=>{"params"in y&&n(2,r=y.params),"enabledItems"in y&&n(0,s=y.enabledItems),"disabledItems"in y&&n(3,a=y.disabledItems),"buttonList"in y&&n(4,u=y.buttonList),"loadData"in y&&n(5,d=y.loadData),"refresh"in y&&n(12,c=y.refresh),"editItem"in y&&n(6,f=y.editItem),"getGroupId"in y&&n(13,m=y.getGroupId),"fieldsInGroup"in y&&n(1,h=y.fieldsInGroup),"fetch"in y&&n(7,S=y.fetch),"validate"in y&&n(8,C=y.validate)},t.$$.update=()=>{t.$$.dirty&1&&p(s)},[s,h,r,a,u,d,f,S,C,i,b,k,c,m,E,L,w,I]}class eo extends Te{constructor(e){super(),Ie(this,e,Sa,Ea,we,{params:2,enabledItems:0,disabledItems:3,buttonList:4,loadData:5,refresh:12,editItem:6,getGroupId:13,fieldsInGroup:1,fetch:7,validate:8})}}function to(t){let e,n,i={params:t[0],enabledItems:t[2],disabledItems:t[4],buttonList:t[6],fieldsInGroup:t[5],refresh:t[7],editItem:t[8],getGroupId:on};return e=new eo({props:i}),t[9](e),{c(){Ke(e.$$.fragment)},m(l,o){xe(e,l,o),n=!0},p(l,o){const r={};o&1&&(r.params=l[0]),o&4&&(r.enabledItems=l[2]),e.$set(r)},i(l){n||(Se(e.$$.fragment,l),n=!0)},o(l){Pe(e.$$.fragment,l),n=!1},d(l){t[9](null),Ue(e,l)}}}function Da(t){let e,n=t[3],i,l=to(t);return{c(){e=D("div"),l.c()},m(o,r){G(o,e,r),l.m(e,null),i=!0},p(o,[r]){r&8&&we(n,n=o[3])?(Xi(),Pe(l,1,1,_e),Yi(),l=to(o),l.c(),Se(l,1),l.m(e,null)):l.p(o,r)},i(o){i||(Se(l),i=!0)},o(o){Pe(l),i=!1},d(o){o&&j(e),l.d(o)}}}let Ca="_delimiter_";function on(){return Ca+La()}function La(){return Math.floor((1+Math.random())*4294967296).toString(16).substring(1)}function Pa(t,e,n){let{params:i}=e,l,o=[],r=[],s=0,a={},u=[{name:"save",label:O.translate("Save","labels"),style:"primary"},{name:"cancel",label:O.translate("Cancel","labels")},{name:"addGroup",label:O.translate("addGroup","labels"),cssStyle:"margin-left: 30px",action:()=>{i.onEditItem({id:on(),groupEnd:!1},h=>{let b=10;o.length&&(b=o[o.length-1].sortOrder+10);let p={isGroup:!0,canEdit:!0,canRemove:!0,isGroup:!0,canDisabled:!1,name:"",label:"",sortOrder:b,...h};o.push(p),p.name!==""&&o.push({id:on(),isGroup:!0,canEdit:!0,canRemove:!0,isGroup:!0,canDisabled:!1,groupEnd:!0,name:"",label:"",sortOrder:p.sortOrder+1}),d()})}}];function d(){n(3,s++,s)}function c(h){i.onEditItem(h,b=>{let p=o.findIndex(v=>v.id===b.id);n(2,o[p]=b,o),d()})}f();function f(){let h=i.list??[],b=0;for(let p=0;p<h.length;p++){let v=h[p];if(typeof v=="string")ce.get(["scopes",v,"tab"])&&o.push({name:v,label:O.translate(v,"scopeNamesPlural"),sortOrder:b}),b++;else if(typeof v=="object"){o.push({id:v.id??on(),canEdit:!0,canRemove:!0,isGroup:!0,canDisabled:!1,groupEnd:v.name==="",name:v.name,label:v.name,sortOrder:b}),b++;for(const S of v.items)ce.get(["scopes",S,"tab"])&&(o.push({name:S,label:O.translate(S,"scopeNamesPlural"),sortOrder:b}),b++);if(p<h.length-1&&h[p+1].name==="")continue;v.name!==""&&(p===h.length-1||typeof h[p+p]=="string"||v.items.length===0)&&(o.push({id:on(),canEdit:!0,canRemove:!0,canDisabled:!1,isGroup:!0,groupEnd:!0,name:"",label:"",sortOrder:b}),b++)}}Object.entries(ce.get(["scopes"])).forEach(([p,v])=>{v.disabled||v.emHidden||!v.tab||o.find(S=>S.name===p)||r.push({name:p,label:O.translate(p,"scopeNamesPlural")})}),r.sort((p,v)=>p.label.localeCompare(v.label))}function m(h){Le[h?"unshift":"push"](()=>{l=h,n(1,l)})}return t.$$set=h=>{"params"in h&&n(0,i=h.params)},[i,l,o,s,r,a,u,d,c,m]}class Ia extends Te{constructor(e){super(),Ie(this,e,Pa,Da,we,{params:0})}}function no(t){let e,n,i={params:t[0],enabledItems:t[3],disabledItems:t[4],buttonList:t[6],fieldsInGroup:t[5],refresh:t[7],validate:Aa};return e=new eo({props:i}),t[8](e),{c(){Ke(e.$$.fragment)},m(l,o){xe(e,l,o),n=!0},p(l,o){const r={};o&1&&(r.params=l[0]),e.$set(r)},i(l){n||(Se(e.$$.fragment,l),n=!0)},o(l){Pe(e.$$.fragment,l),n=!1},d(l){t[8](null),Ue(e,l)}}}function Ta(t){let e,n=t[2],i,l=no(t);return{c(){e=D("div"),l.c()},m(o,r){G(o,e,r),l.m(e,null),i=!0},p(o,[r]){r&4&&we(n,n=o[2])?(Xi(),Pe(l,1,1,_e),Yi(),l=no(o),l.c(),Se(l,1),l.m(e,null)):l.p(o,r)},i(o){i||(Se(l),i=!0)},o(o){Pe(l),i=!1},d(o){o&&j(e),l.d(o)}}}function Aa(t){return!0}function Na(t,e,n){let{params:i}=e,l,o=[],r=[],s=0,a={},u=[{name:"save",label:O.translate("Save","labels"),style:"primary"},{name:"cancel",label:O.translate("Cancel","labels")}];function d(){n(2,s++,s)}c();function c(){let m=i.list??[],h=0;for(let b=0;b<m.length;b++){let p=m[b];typeof p=="string"&&(ce.get(["scopes",p,"tab"])&&o.push({name:p,label:O.translate(p,"scopeNamesPlural"),sortOrder:h}),h++)}Object.entries(ce.get(["scopes"])).forEach(([b,p])=>{p.disabled||p.emHidden||!p.tab||o.find(v=>v.name===b)||r.push({name:b,label:O.translate(b,"scopeNamesPlural")})}),r.sort((b,p)=>b.label.localeCompare(p.label))}function f(m){Le[m?"unshift":"push"](()=>{l=m,n(1,l)})}return t.$$set=m=>{"params"in m&&n(0,i=m.params)},[i,l,s,o,r,a,u,d,f]}class Oa extends Te{constructor(e){super(),Ie(this,e,Na,Ta,we,{params:0})}}function io(t,{delay:e=0,duration:n=400,easing:i=Di}={}){const l=+getComputedStyle(t).opacity;return{delay:e,duration:n,easing:i,css:o=>`opacity: ${o*l}`}}function lo(t,e,n){const i=t.slice();return i[55]=e[n],i}function Ma(t){let e,n,i,l,o,r,s=ge(t[5]),a=[];for(let d=0;d<s.length;d+=1)a[d]=oo(lo(t,s,d));let u=t[1]&&ro(t);return{c(){e=D("div"),n=D("div");for(let d=0;d<a.length;d+=1)a[d].c();i=R(),l=D("hr"),o=R(),u&&u.c(),r=Rn(),g(n,"class","btn-group"),g(e,"class","panel-group"),ue(e,"margin-bottom","10px"),ue(l,"margin","0 -10px")},m(d,c){G(d,e,c),_(e,n);for(let f=0;f<a.length;f+=1)a[f]&&a[f].m(n,null);G(d,i,c),G(d,l,c),G(d,o,c),u&&u.m(d,c),G(d,r,c)},p(d,c){if(c[0]&2082){s=ge(d[5]);let f;for(f=0;f<s.length;f+=1){const m=lo(d,s,f);a[f]?a[f].p(m,c):(a[f]=oo(m),a[f].c(),a[f].m(n,null))}for(;f<a.length;f+=1)a[f].d(1);a.length=s.length}d[1]?u?u.p(d,c):(u=ro(d),u.c(),u.m(r.parentNode,r)):u&&(u.d(1),u=null)},d(d){d&&(j(e),j(i),j(l),j(o),j(r)),qt(a,d),u&&u.d(d)}}}function oo(t){let e,n=t[55].label+"",i,l,o,r;function s(){return t[30](t[55])}return{c(){e=D("a"),i=pe(n),l=R(),g(e,"href","javascript:"),g(e,"class","btn btn-default tree-item svelte-1tiwkdf"),me(e,"active",t[55].name===t[1].name)},m(a,u){G(a,e,u),_(e,i),_(e,l),o||(r=le(e,"click",s),o=!0)},p(a,u){t=a,u[0]&32&&n!==(n=t[55].label+"")&&Be(i,n),u[0]&34&&me(e,"active",t[55].name===t[1].name)},d(a){a&&j(e),o=!1,r()}}}function ro(t){let e,n,i=t[1].label+"",l,o,r,s,a,u,d,c,f,m,h,b,p,v,S=t[6]&&ao(t);return{c(){e=D("div"),n=D("h5"),l=pe(i),o=R(),r=D("div"),s=D("input"),a=R(),u=D("button"),d=R(),c=D("button"),f=R(),m=D("div"),S&&S.c(),h=R(),b=D("div"),b.innerHTML="",ue(n,"margin","20px 0"),ue(n,"font-weight","bold"),ue(n,"font-size","16px"),g(s,"type","text"),g(s,"class","form-control category-search search-in-tree-input"),g(s,"tabindex","1"),g(s,"placeholder","Type and press Enter..."),g(u,"class","fas fa-times reset-search-in-tree-button"),ue(u,"display","none"),g(c,"class","fas fa-search search-in-tree-button"),g(r,"class","field"),g(r,"data-name","category-search"),ue(m,"min-height","22px"),ue(m,"margin-top","20px"),g(e,"class","panel-group category-search"),g(b,"class","panel-group category-tree")},m(k,C){G(k,e,C),_(e,n),_(n,l),_(e,o),_(e,r),_(r,s),t[31](s),_(r,a),_(r,u),_(r,d),_(r,c),_(e,f),_(e,m),S&&S.m(m,null),G(k,h,C),G(k,b,C),t[33](b),p||(v=[le(s,"keydown",t[32]),le(c,"click",t[12])],p=!0)},p(k,C){C[0]&2&&i!==(i=k[1].label+"")&&Be(l,i),k[6]?S?S.p(k,C):(S=ao(k),S.c(),S.m(m,null)):S&&(S.d(1),S=null)},d(k){k&&(j(e),j(h),j(b)),t[31](null),S&&S.d(),t[33](null),p=!1,Ye(v)}}}function ao(t){let e,n,i;return{c(){e=D("button"),e.innerHTML='<i class="fas fa-times svelte-1tiwkdf"></i> <span>Unset selection</span>',g(e,"class","unset-selection svelte-1tiwkdf")},m(l,o){G(l,e,o),n||(i=le(e,"click",t[10]),n=!0)},p:_e,d(l){l&&j(e),n=!1,i()}}}function so(t){let e,n,i;return{c(){e=D("div"),g(e,"class","category-panel-resizer svelte-1tiwkdf")},m(l,o){G(l,e,o),n||(i=le(e,"mousedown",t[9]),n=!0)},p:_e,d(l){l&&j(e),n=!1,i()}}}function Fa(t){let e,n,i,l,o,r,s,a,u,d,c,f,m,h,b;function p(C,E){if(C[5].length>0)return Ma}let v=p(t),S=v&&v(t),k=!t[0]&&so(t);return{c(){e=D("aside"),n=D("button"),i=D("span"),l=R(),o=D("span"),r=R(),s=D("div"),a=D("div"),u=D("div"),d=R(),S&&S.c(),c=R(),k&&k.c(),g(i,"class","toggle-icon-left fas fa-angle-left"),me(i,"hidden",t[0]),g(o,"class","toggle-icon-right fas fa-angle-right"),me(o,"hidden",!t[0]),g(n,"type","button"),g(n,"class","btn btn-default collapse-panel"),me(n,"collapsed",t[0]),ue(u,"margin-right","20px"),g(u,"class","layout-editor-container"),ue(a,"display","flex"),ue(a,"flex-direction","row-reverse"),ue(a,"align-items","center"),ue(a,"height","35px"),g(s,"class","category-panel"),me(s,"hidden",t[0]),g(e,"class","catalog-tree-panel"),ue(e,"width",t[7]),me(e,"collapsed",t[0]),me(e,"catalog-tree-panel-hidden",t[0])},m(C,E){G(C,e,E),_(e,n),_(n,i),_(n,l),_(n,o),_(e,r),_(e,s),_(s,a),_(a,u),t[29](u),_(s,d),S&&S.m(s,null),_(s,c),k&&k.m(s,null),m=!0,h||(b=le(n,"click",t[8]),h=!0)},p(C,E){(!m||E[0]&1)&&me(i,"hidden",C[0]),(!m||E[0]&1)&&me(o,"hidden",!C[0]),(!m||E[0]&1)&&me(n,"collapsed",C[0]),v===(v=p(C))&&S?S.p(C,E):(S&&S.d(1),S=v&&v(C),S&&(S.c(),S.m(s,c))),C[0]?k&&(k.d(1),k=null):k?k.p(C,E):(k=so(C),k.c(),k.m(s,null)),(!m||E[0]&1)&&me(s,"hidden",C[0]),(!m||E[0]&128)&&ue(e,"width",C[7]),(!m||E[0]&1)&&me(e,"collapsed",C[0]),(!m||E[0]&1)&&me(e,"catalog-tree-panel-hidden",C[0])},i(C){m||(C&&Xt(()=>{m&&(f||(f=xi(e,io,{},!0)),f.run(1))}),m=!0)},o(C){C&&(f||(f=xi(e,io,{},!1)),f.run(0)),m=!1},d(C){C&&j(e),t[29](null),S&&S.d(),k&&k.d(),C&&f&&f.end(),h=!1,b()}}}function Ra(t,e,n){((n||t.tree("getTree")).children||[]).findIndex(o=>e.id===o.id)===-1&&t.tree("appendNode",e,n)}function Ba(t,e,n){((n||t.tree("getTree")).children||[]).findIndex(o=>e.id===o.id)===-1&&t.tree("prependNode",e,n)}function uo(t,e,n){if(!Array.isArray(e)||e.length===0){n();return}const i=e[0];let l=t.find(`.jqtree-title[data-id="${i}"]`);l.length>0&&l.each((o,r)=>{if(r=window.$(r),r.parent().parent().hasClass("jqtree-closed")){result=!0;let a=t.tree("getNodeByHtmlElement",r);t.tree("openNode",a,!1,()=>uo(t,e.slice(1),n))}})}function Ha(t,e,n){let i,{scope:l}=e,{model:o}=e,{collection:r}=e,{callbacks:s}=e,{minWidth:a=220}=e,{maxWidth:u=600}=e,{currentWidth:d=a}=e,{isCollapsed:c=!1}=e,{maxSize:f=Qi.get("recordsPerPageSmall")||20}=e,{renderLayoutEditor:m}=e;ji();let h,b,p,v=!1,S,k,C=[],E,L="",w,I,y;function W(P){r&&P.name===U(E.name)&&Ae.set("treeWhereData",l,P.where),c||A()}function Y(){n(0,c=!c),c?(window.$(".page-header").addClass("collapsed").removeClass("not-collapsed"),window.$("#tree-list-table").addClass("collapsed")):(window.$(".page-header").removeClass("collapsed").addClass("not-collapsed"),window.$("#tree-list-table").removeClass("collapsed")),Ae.set("catalog-tree-panel",l,c?"collapsed":""),c||A()}function F(P){if(!v)return;P.preventDefault();const $=k+(P.pageX-S);$>=a&&$<=u&&n(13,d=$)}function Q(P){v=!0,S=P.pageX,k=d,document.addEventListener("mousemove",F),document.addEventListener("mouseup",Z,{once:!0}),document.body.style.userSelect="none"}function Z(){v&&(v=!1,Ae.set("panelWidth",l,d.toString()),document.removeEventListener("mousemove",F),document.body.style.userSelect="")}function A(){z(),ve()}function z(){let P=window.$(h);P&&P.tree("destroy")}function ve(P=null){let $=window.$(h),K=Ae.get("treeWhereData",w)||[];if(P===null&&L&&ce.get(["scopes",w,"type"])==="Hierarchy"&&!ce.get(["scopes",w,"hierarchyDisabled"])){K.push({type:"textFilter",value:L}),Espo.ajax.getRequest(`${w}/action/TreeData`,{where:K,scope:l,link:E.name}).then(ne=>{ve(ne.tree)});return}let ie={dataUrl:ut(),dataFilter:(function(ne){return N(ne)}).bind(this),selectable:!0,saveState:!1,autoOpen:!1,dragAndDrop:ce.get(["scopes",w,"multiParents"])!==!0&&ce.get(["scopes",w,"dragAndDrop"]),useContextMenu:!1,closedIcon:window.$('<i class="fa fa-angle-right"></i>'),openedIcon:window.$('<i class="fa fa-angle-down"></i>'),onCreateLi:(function(ne,re,se){ne.disabled?re.addClass("disabled"):re.removeClass("disabled");const ke=re.find(".jqtree-title");if(L){let Ht=L.replace(/\*/g,"");if(Ht.length>0){let fo=ke.html(),po=fo.match(new RegExp(Ht,"ig"));if(po){let ho=[];po.forEach(Mn=>{ho.includes(Mn)||(ho.push(Mn),ke.html(fo.replace(new RegExp(Mn,"g"),`<b>${Mn}</b>`)))})}}}P&&[l,"Bookmark"].includes(w)&&o&&o.get("id")===ne.id&&($.tree("addToSelection",ne),re.addClass("jqtree-selected")),ke.attr("data-id",ne.id),ie.dragAndDrop&&!ne.showMoreDirection&&ke.attr("title",O.translate("useDragAndDrop")),ne.showMoreDirection&&(re.addClass("show-more"),re.addClass("show-more-"+ne.showMoreDirection),re.find(".jqtree-title").addClass("more-label"))}).bind(this)};P&&(ie.data=P,ie.autoOpen=!0,ie.dragAndDrop=!1,delete ie.dataUrl,delete ie.dataFilter),$.tree(ie),$.on("tree.load_data",ne=>{He.notify(!1)}),$.on("tree.refresh",ne=>{if(Ae.get("selectedNodeId",l)){const re=Ae.get("selectedNodeId",l),se=Ae.get("selectedNodeRoute",l);vt(re,se)}}),$.on("tree.move",ne=>{ne.preventDefault();const re="parent";let se=ne.move_info,ke={_position:se.position,_target:se.target_node.id};ke[re+"Id"]=null,ke[re+"Name"]=null,se.position==="inside"?(ke[re+"Id"]=se.target_node.id,ke[re+"Name"]=se.target_node.name):se.target_node.parent.id&&(ke[re+"Id"]=se.target_node.parent.id,ke[re+"Name"]=se.target_node.parent.name),Espo.ajax.patchRequest(`${w}/${se.moved_node.id}`,ke).success(Ht=>{se.do_move()})}),$.on("tree.click",ne=>{if(ne.preventDefault(),ne.node.disabled)return!1;const re=window.$(ne.click_event.target);if(re.hasClass("jqtree-title")||re.parent().hasClass("jqtree-title")){let se=ne.node;if(se.showMoreDirection)return Je(se);let ke=[];for(;se.parent.id;)ke.push(se.parent.id),se=se.parent;let Ht={id:ne.node.id,route:""};ke.length>0&&(Ht.route="|"+ke.reverse().join("|")+"|"),s!=null&&s.selectNode&&s.selectNode(Ht)}})}function Je(P){He.notify("Loading..."),Espo.ajax.getRequest(ut(P)).then($=>{if($.list){const K=window.$(h);P.showMoreDirection==="up"?N(JSON.parse(JSON.stringify($)),"up").reverse().forEach(ie=>{Ba(K,ie,P.getParent())}):P.showMoreDirection==="down"&&N(JSON.parse(JSON.stringify($)),"down").forEach(ie=>{Ra(K,ie,P.getParent())}),K.tree("removeNode",P)}})}function ut(P){let $=w+`/action/Tree?isTreePanel=1&scope=${l}&link=${E.name}`;if(P&&P.showMoreDirection){let ie=P.offset,ne=f;if(P.showMoreDirection==="up"){let re=P.offset-ne;ie=P.offset-ne,re<0?(ie=0,ne=ne+re):ie=re}else P.showMoreDirection==="down"&&(ie=ie+1);$+="&offset="+ie+"&maxSize="+ne,P.getParent()&&($+="&node="+P.getParent().id)}else P&&P.id?$+="&node="+P.id+"&offset=0&maxSize="+f:o&&o.id&&[o.urlRoot,"Bookmark"].includes(w)&&($+="&selectedId="+o.id);let K=Ae.get("treeWhereData",w)||[];return L&&(K=[...K,{type:"textFilter",value:L}]),K.length>0&&($+="&",$+=window.$.param({where:K})),$}function vt(P,$){const K=window.$(h);uo(K,$,()=>{let ne=K.tree("getNodeById",P);ne&&(K.tree("addToSelection",ne),n(6,y=P)),K.find(".jqtree-title").each((re,se)=>{se=window.$(se);let ke=se.parent().parent();se.data("id")!==P&&K.tree("getNodeById",se.data("id"))?(K.tree("removeFromSelection",K.tree("getNodeById",se.data("id"))),ke.removeClass("jqtree-selected")):ke.hasClass("jqtree-selected")||ke.addClass("jqtree-selected")})})}function $e(){s!=null&&s.selectNode&&s.selectNode({id:y})}function dt(P){const $=M(),K=$.tree("getNodeById",P);n(6,y=null),K&&$.tree("removeFromSelection",K)}function M(){return window.$(h)}function N(P,$=null){return P.list?(q(P.list,$),P.list):P}function q(P,$){if(!$||$==="up"){let K=JSON.parse(JSON.stringify(P)).shift();K&&K.offset&&K.offset!==0&&P.unshift({id:"show-more-"+K.offset,offset:K.offset,showMoreDirection:"up",name:O.translate("Show more")})}if(!$||$==="down"){let K=JSON.parse(JSON.stringify(P)).pop();K&&K.offset&&K.total-1!==K.offset&&P.push({id:"show-more-"+K.offset,offset:K.offset,showMoreDirection:"down",name:O.translate("Show more")})}P.forEach(K=>{K.children&&q(K.children)})}function U(P){return P==="_self"?l:P==="_bookmark"?"Bookmark":ce.get(["entityDefs",l,"links",P,"entity"])||ce.get(["entityDefs",l,"fields",P,"entity"])}function J(P){E&&E.name===P.name||(n(1,E=P),Ae.set("treeItem",l,P.name),L="",He.notify("Loading..."),Lt().then(()=>{A()}))}function ae(){L=p.value,L?Ae.set("treeSearchValue",w,L):Ae.clear("treeSearchValue",w),He.notify("Loading..."),A()}function oe(){w==="Bookmark"&&A()}function Me(){return I}function de(P){tt.get(l,"leftSidebar",null,null,$=>{I=$,n(5,C=$.layout.map(ie=>{const ne=ce.get(["entityDefs",l,"fields",ie.name,"type"]);let re="";if(ie.name==="_self")re=O.get("Global","scopeNamesPlural",l);else if(ie.name==="_bookmark")re=O.get("Global","scopeNamesPlural","Bookmark");else{if(ne=="link"){const se=U(ie.name);re=O.get("Global","scopeNamesPlural",se)}re||(re=O.get(l,"links",ie.name)||O.get(l,"fields",ie.name)||O.get("Global","fields",ie.name))}return{name:ie.name,label:re}}));const K=Ae.get("treeItem",l);!K||!C.find(ie=>ie.name===K)?(Ae.set("treeItem",l,C[0]),n(1,E=C[0])):n(1,E=C.find(ie=>ie.name===K)),L=Ae.get("treeSearchValue",w)||null,L&&n(4,p.value=L,p),P()})}function Xe(){de(()=>{Lt().then(()=>{A()})})}St(()=>{const P=Ae.get("panelWidth",l);return P&&n(13,d=parseInt(P)||a),(window.innerWidth<=767||Ae.get("catalog-tree-panel",l))&&n(0,c=!0),de(()=>{Lt().then(()=>{c||ve()}),m&&m(b)}),()=>{v&&Z()}});function qe(P){Le[P?"unshift":"push"](()=>{b=P,n(3,b)})}const et=P=>J(P);function lt(P){Le[P?"unshift":"push"](()=>{p=P,n(4,p)})}const co=P=>P.key==="Enter"&&ae();function Wa(P){Le[P?"unshift":"push"](()=>{h=P,n(2,h)})}return t.$$set=P=>{"scope"in P&&n(14,l=P.scope),"model"in P&&n(15,o=P.model),"collection"in P&&n(16,r=P.collection),"callbacks"in P&&n(17,s=P.callbacks),"minWidth"in P&&n(18,a=P.minWidth),"maxWidth"in P&&n(19,u=P.maxWidth),"currentWidth"in P&&n(13,d=P.currentWidth),"isCollapsed"in P&&n(0,c=P.isCollapsed),"maxSize"in P&&n(20,f=P.maxSize),"renderLayoutEditor"in P&&n(21,m=P.renderLayoutEditor)},t.$$.update=()=>{t.$$.dirty[0]&139264&&d&&s!=null&&s.treeWidthChanged&&s.treeWidthChanged(d),t.$$.dirty[0]&8193&&n(7,i=c?"auto":`${d}px`),t.$$.dirty[0]&2&&(w=E?U(E.name):null)},[c,E,h,b,p,C,y,i,Y,Q,$e,J,ae,d,l,o,r,s,a,u,f,m,W,A,vt,dt,oe,Me,Xe,qe,et,lt,co,Wa]}class ja extends Te{constructor(e){super(),Ie(this,e,Ha,Fa,we,{scope:14,model:15,collection:16,callbacks:17,minWidth:18,maxWidth:19,currentWidth:13,isCollapsed:0,maxSize:20,renderLayoutEditor:21,handleCollectionSearch:22,rebuildTree:23,selectTreeNode:24,unSelectTreeNode:25,reloadBookmarks:26,getLayoutData:27,refreshLayout:28},null,[-1,-1])}get handleCollectionSearch(){return this.$$.ctx[22]}get rebuildTree(){return this.$$.ctx[23]}get selectTreeNode(){return this.$$.ctx[24]}get unSelectTreeNode(){return this.$$.ctx[25]}get reloadBookmarks(){return this.$$.ctx[26]}get getLayoutData(){return this.$$.ctx[27]}get refreshLayout(){return this.$$.ctx[28]}}window.SvelteLanguage=O,window.SvelteUserData=zn,window.SvelteNotifier=He,window.SvelteLayoutManager=tt,window.SvelteMetadata=ce,window.SvelteModelFactory=xt,window.SvelteConfig=Qi,window.SvelteStorage=Ae,window.driver=Fo,De.ApiRequestComponent=ba,De.Favorites=Oa,De.JobManagerIcon=ar,De.LayoutComponent=ha,De.Navigation=Ia,De.TreePanel=ja,De.UpdatePanel=hr,Object.defineProperty(De,Symbol.toStringTag,{value:"Module"})});
