(function(Qe,at){typeof exports=="object"&&typeof module<"u"?at(exports):typeof define=="function"&&define.amd?define(["exports"],at):(Qe=typeof globalThis<"u"?globalThis:Qe||self,at(Qe.Svelte={}))})(this,function(Qe){"use strict";var nh=Object.defineProperty;var ih=(Qe,at,on)=>at in Qe?nh(Qe,at,{enumerable:!0,configurable:!0,writable:!0,value:on}):Qe[at]=on;var rn=(Qe,at,on)=>ih(Qe,typeof at!="symbol"?at+"":at,on);let at={},on;function dl(n={}){at={animate:!0,allowClose:!0,overlayClickBehavior:"close",overlayOpacity:.7,smoothScroll:!1,disableActiveInteraction:!1,showProgress:!1,stagePadding:10,stageRadius:5,popoverOffset:10,showButtons:["next","previous","close"],disableButtons:[],overlayColor:"#000",...n}}function te(n){return n?at[n]:at}function xs(n){on=n}function wt(){return on}let ki={};function Ei(n,e){ki[n]=e}function an(n){var e;(e=ki[n])==null||e.call(ki)}function $s(){ki={}}function Si(n,e,t,i){return(n/=i/2)<1?t/2*n*n+e:-t/2*(--n*(n-2)-1)+e}function or(n){const e='a[href]:not([disabled]), button:not([disabled]), textarea:not([disabled]), input[type="text"]:not([disabled]), input[type="radio"]:not([disabled]), input[type="checkbox"]:not([disabled]), select:not([disabled])';return n.flatMap(t=>{const i=t.matches(e),l=Array.from(t.querySelectorAll(e));return[...i?[t]:[],...l]}).filter(t=>getComputedStyle(t).pointerEvents!=="none"&&nu(t))}function ar(n){if(!n||tu(n))return;const e=te("smoothScroll"),t=n.offsetHeight>window.innerHeight;n.scrollIntoView({behavior:!e||eu(n)?"auto":"smooth",inline:"center",block:t?"start":"center"})}function eu(n){if(!n||!n.parentElement)return;const e=n.parentElement;return e.scrollHeight>e.clientHeight}function tu(n){const e=n.getBoundingClientRect();return e.top>=0&&e.left>=0&&e.bottom<=(window.innerHeight||document.documentElement.clientHeight)&&e.right<=(window.innerWidth||document.documentElement.clientWidth)}function nu(n){return!!(n.offsetWidth||n.offsetHeight||n.getClientRects().length)}let Di={};function tt(n,e){Di[n]=e}function ae(n){return n?Di[n]:Di}function sr(){Di={}}function iu(n,e,t,i){let l=ae("__activeStagePosition");const r=l||t.getBoundingClientRect(),o=i.getBoundingClientRect(),s=Si(n,r.x,o.x-r.x,e),a=Si(n,r.y,o.y-r.y,e),f=Si(n,r.width,o.width-r.width,e),u=Si(n,r.height,o.height-r.height,e);l={x:s,y:a,width:f,height:u},fr(l),tt("__activeStagePosition",l)}function ur(n){if(!n)return;const e=n.getBoundingClientRect(),t={x:e.x,y:e.y,width:e.width,height:e.height};tt("__activeStagePosition",t),fr(t)}function lu(){const n=ae("__activeStagePosition"),e=ae("__overlaySvg");if(!n)return;if(!e){console.warn("No stage svg found.");return}const t=window.innerWidth,i=window.innerHeight;e.setAttribute("viewBox",`0 0 ${t} ${i}`)}function ru(n){const e=ou(n);document.body.appendChild(e),mr(e,t=>{t.target.tagName==="path"&&an("overlayClick")}),tt("__overlaySvg",e)}function fr(n){const e=ae("__overlaySvg");if(!e){ru(n);return}const t=e.firstElementChild;if((t==null?void 0:t.tagName)!=="path")throw new Error("no path element found in stage svg");t.setAttribute("d",cr(n))}function ou(n){const e=window.innerWidth,t=window.innerHeight,i=document.createElementNS("http://www.w3.org/2000/svg","svg");i.classList.add("driver-overlay","driver-overlay-animated"),i.setAttribute("viewBox",`0 0 ${e} ${t}`),i.setAttribute("xmlSpace","preserve"),i.setAttribute("xmlnsXlink","http://www.w3.org/1999/xlink"),i.setAttribute("version","1.1"),i.setAttribute("preserveAspectRatio","xMinYMin slice"),i.style.fillRule="evenodd",i.style.clipRule="evenodd",i.style.strokeLinejoin="round",i.style.strokeMiterlimit="2",i.style.zIndex="10000",i.style.position="fixed",i.style.top="0",i.style.left="0",i.style.width="100%",i.style.height="100%";const l=document.createElementNS("http://www.w3.org/2000/svg","path");return l.setAttribute("d",cr(n)),l.style.fill=te("overlayColor")||"rgb(0,0,0)",l.style.opacity=`${te("overlayOpacity")}`,l.style.pointerEvents="auto",l.style.cursor="auto",i.appendChild(l),i}function cr(n){const e=window.innerWidth,t=window.innerHeight,i=te("stagePadding")||0,l=te("stageRadius")||0,r=n.width+i*2,o=n.height+i*2,s=Math.min(l,r/2,o/2),a=Math.floor(Math.max(s,0)),f=n.x-i+a,u=n.y-i,c=r-a*2,d=o-a*2;return`M${e},0L0,0L0,${t}L${e},${t}L${e},0Z
    M${f},${u} h${c} a${a},${a} 0 0 1 ${a},${a} v${d} a${a},${a} 0 0 1 -${a},${a} h-${c} a${a},${a} 0 0 1 -${a},-${a} v-${d} a${a},${a} 0 0 1 ${a},-${a} z`}function au(){const n=ae("__overlaySvg");n&&n.remove()}function su(){const n=document.getElementById("driver-dummy-element");if(n)return n;let e=document.createElement("div");return e.id="driver-dummy-element",e.style.width="0",e.style.height="0",e.style.pointerEvents="none",e.style.opacity="0",e.style.position="fixed",e.style.top="50%",e.style.left="50%",document.body.appendChild(e),e}function dr(n){const{element:e}=n;let t=typeof e=="function"?e():typeof e=="string"?document.querySelector(e):e;t||(t=su()),fu(t,n)}function uu(){const n=ae("__activeElement"),e=ae("__activeStep");n&&(ur(n),lu(),_r(n,e))}function fu(n,e){var t;const i=Date.now(),l=ae("__activeStep"),r=ae("__activeElement")||n,o=!r||r===n,s=n.id==="driver-dummy-element",a=r.id==="driver-dummy-element",f=te("animate"),u=e.onHighlightStarted||te("onHighlightStarted"),c=(e==null?void 0:e.onHighlighted)||te("onHighlighted"),d=(l==null?void 0:l.onDeselected)||te("onDeselected"),p=te(),h=ae();!o&&d&&d(a?void 0:r,l,{config:p,state:h,driver:wt()}),u&&u(s?void 0:n,e,{config:p,state:h,driver:wt()});const m=!o&&f;let g=!1;hu(),tt("previousStep",l),tt("previousElement",r),tt("activeStep",e),tt("activeElement",n);const _=()=>{if(ae("__transitionCallback")!==_)return;const y=Date.now()-i,E=400-y<=400/2;e.popover&&E&&!g&&m&&(hr(n,e),g=!0),te("animate")&&y<400?iu(y,400,r,n):(ur(n),c&&c(s?void 0:n,e,{config:te(),state:ae(),driver:wt()}),tt("__transitionCallback",void 0),tt("__previousStep",l),tt("__previousElement",r),tt("__activeStep",e),tt("__activeElement",n)),window.requestAnimationFrame(_)};tt("__transitionCallback",_),window.requestAnimationFrame(_),ar(n),!m&&e.popover&&hr(n,e),r.classList.remove("driver-active-element","driver-no-interaction"),r.removeAttribute("aria-haspopup"),r.removeAttribute("aria-expanded"),r.removeAttribute("aria-controls"),((t=e.disableActiveInteraction)!=null?t:te("disableActiveInteraction"))&&n.classList.add("driver-no-interaction"),n.classList.add("driver-active-element"),n.setAttribute("aria-haspopup","dialog"),n.setAttribute("aria-expanded","true"),n.setAttribute("aria-controls","driver-popover-content")}function cu(){var n;(n=document.getElementById("driver-dummy-element"))==null||n.remove(),document.querySelectorAll(".driver-active-element").forEach(e=>{e.classList.remove("driver-active-element","driver-no-interaction"),e.removeAttribute("aria-haspopup"),e.removeAttribute("aria-expanded"),e.removeAttribute("aria-controls")})}function Vn(){const n=ae("__resizeTimeout");n&&window.cancelAnimationFrame(n),tt("__resizeTimeout",window.requestAnimationFrame(uu))}function du(n){var e;if(!ae("isInitialized")||!(n.key==="Tab"||n.keyCode===9))return;const t=ae("__activeElement"),i=(e=ae("popover"))==null?void 0:e.wrapper,l=or([...i?[i]:[],...t?[t]:[]]),r=l[0],o=l[l.length-1];if(n.preventDefault(),n.shiftKey){const s=l[l.indexOf(document.activeElement)-1]||o;s==null||s.focus()}else{const s=l[l.indexOf(document.activeElement)+1]||r;s==null||s.focus()}}function pr(n){var e;((e=te("allowKeyboardControl"))==null||e)&&(n.key==="Escape"?an("escapePress"):n.key==="ArrowRight"?an("arrowRightPress"):n.key==="ArrowLeft"&&an("arrowLeftPress"))}function mr(n,e,t){const i=(l,r)=>{const o=l.target;n.contains(o)&&((!t||t(o))&&(l.preventDefault(),l.stopPropagation(),l.stopImmediatePropagation()),r==null||r(l))};document.addEventListener("pointerdown",i,!0),document.addEventListener("mousedown",i,!0),document.addEventListener("pointerup",i,!0),document.addEventListener("mouseup",i,!0),document.addEventListener("click",l=>{i(l,e)},!0)}function pu(){window.addEventListener("keyup",pr,!1),window.addEventListener("keydown",du,!1),window.addEventListener("resize",Vn),window.addEventListener("scroll",Vn)}function mu(){window.removeEventListener("keyup",pr),window.removeEventListener("resize",Vn),window.removeEventListener("scroll",Vn)}function hu(){const n=ae("popover");n&&(n.wrapper.style.display="none")}function hr(n,e){var t,i;let l=ae("popover");l&&document.body.removeChild(l.wrapper),l=vu(),document.body.appendChild(l.wrapper);const{title:r,description:o,showButtons:s,disableButtons:a,showProgress:f,nextBtnText:u=te("nextBtnText")||"Next &rarr;",prevBtnText:c=te("prevBtnText")||"&larr; Previous",progressText:d=te("progressText")||"{current} of {total}"}=e.popover||{};l.nextButton.innerHTML=u,l.previousButton.innerHTML=c,l.progress.innerHTML=d,r?(l.title.innerHTML=r,l.title.style.display="block"):l.title.style.display="none",o?(l.description.innerHTML=o,l.description.style.display="block"):l.description.style.display="none";const p=s||te("showButtons"),h=f||te("showProgress")||!1,m=(p==null?void 0:p.includes("next"))||(p==null?void 0:p.includes("previous"))||h;l.closeButton.style.display=p.includes("close")?"block":"none",m?(l.footer.style.display="flex",l.progress.style.display=h?"block":"none",l.nextButton.style.display=p.includes("next")?"block":"none",l.previousButton.style.display=p.includes("previous")?"block":"none"):l.footer.style.display="none";const g=a||te("disableButtons")||[];g!=null&&g.includes("next")&&(l.nextButton.disabled=!0,l.nextButton.classList.add("driver-popover-btn-disabled")),g!=null&&g.includes("previous")&&(l.previousButton.disabled=!0,l.previousButton.classList.add("driver-popover-btn-disabled")),g!=null&&g.includes("close")&&(l.closeButton.disabled=!0,l.closeButton.classList.add("driver-popover-btn-disabled"));const _=l.wrapper;_.style.display="block",_.style.left="",_.style.top="",_.style.bottom="",_.style.right="",_.id="driver-popover-content",_.setAttribute("role","dialog"),_.setAttribute("aria-labelledby","driver-popover-title"),_.setAttribute("aria-describedby","driver-popover-description");const y=l.arrow;y.className="driver-popover-arrow";const E=((t=e.popover)==null?void 0:t.popoverClass)||te("popoverClass")||"";_.className=`driver-popover ${E}`.trim(),mr(l.wrapper,L=>{var O,D,C;const R=L.target,W=((O=e.popover)==null?void 0:O.onNextClick)||te("onNextClick"),Z=((D=e.popover)==null?void 0:D.onPrevClick)||te("onPrevClick"),q=((C=e.popover)==null?void 0:C.onCloseClick)||te("onCloseClick");if(R.classList.contains("driver-popover-next-btn"))return W?W(n,e,{config:te(),state:ae(),driver:wt()}):an("nextClick");if(R.classList.contains("driver-popover-prev-btn"))return Z?Z(n,e,{config:te(),state:ae(),driver:wt()}):an("prevClick");if(R.classList.contains("driver-popover-close-btn"))return q?q(n,e,{config:te(),state:ae(),driver:wt()}):an("closeClick")},L=>!(l!=null&&l.description.contains(L))&&!(l!=null&&l.title.contains(L))&&typeof L.className=="string"&&L.className.includes("driver-popover")),tt("popover",l);const b=((i=e.popover)==null?void 0:i.onPopoverRender)||te("onPopoverRender");b&&b(l,{config:te(),state:ae(),driver:wt()}),_r(n,e),ar(_);const A=n.classList.contains("driver-dummy-element"),w=or([_,...A?[]:[n]]);w.length>0&&w[0].focus()}function gr(){const n=ae("popover");if(!(n!=null&&n.wrapper))return;const e=n.wrapper.getBoundingClientRect(),t=te("stagePadding")||0,i=te("popoverOffset")||0;return{width:e.width+t+i,height:e.height+t+i,realWidth:e.width,realHeight:e.height}}function vr(n,e){const{elementDimensions:t,popoverDimensions:i,popoverPadding:l,popoverArrowDimensions:r}=e;return n==="start"?Math.max(Math.min(t.top-l,window.innerHeight-i.realHeight-r.width),r.width):n==="end"?Math.max(Math.min(t.top-(i==null?void 0:i.realHeight)+t.height+l,window.innerHeight-(i==null?void 0:i.realHeight)-r.width),r.width):n==="center"?Math.max(Math.min(t.top+t.height/2-(i==null?void 0:i.realHeight)/2,window.innerHeight-(i==null?void 0:i.realHeight)-r.width),r.width):0}function br(n,e){const{elementDimensions:t,popoverDimensions:i,popoverPadding:l,popoverArrowDimensions:r}=e;return n==="start"?Math.max(Math.min(t.left-l,window.innerWidth-i.realWidth-r.width),r.width):n==="end"?Math.max(Math.min(t.left-(i==null?void 0:i.realWidth)+t.width+l,window.innerWidth-(i==null?void 0:i.realWidth)-r.width),r.width):n==="center"?Math.max(Math.min(t.left+t.width/2-(i==null?void 0:i.realWidth)/2,window.innerWidth-(i==null?void 0:i.realWidth)-r.width),r.width):0}function _r(n,e){const t=ae("popover");if(!t)return;const{align:i="start",side:l="left"}=(e==null?void 0:e.popover)||{},r=i,o=n.id==="driver-dummy-element"?"over":l,s=te("stagePadding")||0,a=gr(),f=t.arrow.getBoundingClientRect(),u=n.getBoundingClientRect(),c=u.top-a.height;let d=c>=0;const p=window.innerHeight-(u.bottom+a.height);let h=p>=0;const m=u.left-a.width;let g=m>=0;const _=window.innerWidth-(u.right+a.width);let y=_>=0;const E=!d&&!h&&!g&&!y;let b=o;if(o==="top"&&d?y=g=h=!1:o==="bottom"&&h?y=g=d=!1:o==="left"&&g?y=d=h=!1:o==="right"&&y&&(g=d=h=!1),o==="over"){const A=window.innerWidth/2-a.realWidth/2,w=window.innerHeight/2-a.realHeight/2;t.wrapper.style.left=`${A}px`,t.wrapper.style.right="auto",t.wrapper.style.top=`${w}px`,t.wrapper.style.bottom="auto"}else if(E){const A=window.innerWidth/2-(a==null?void 0:a.realWidth)/2,w=10;t.wrapper.style.left=`${A}px`,t.wrapper.style.right="auto",t.wrapper.style.bottom=`${w}px`,t.wrapper.style.top="auto"}else if(g){const A=Math.min(m,window.innerWidth-(a==null?void 0:a.realWidth)-f.width),w=vr(r,{elementDimensions:u,popoverDimensions:a,popoverPadding:s,popoverArrowDimensions:f});t.wrapper.style.left=`${A}px`,t.wrapper.style.top=`${w}px`,t.wrapper.style.bottom="auto",t.wrapper.style.right="auto",b="left"}else if(y){const A=Math.min(_,window.innerWidth-(a==null?void 0:a.realWidth)-f.width),w=vr(r,{elementDimensions:u,popoverDimensions:a,popoverPadding:s,popoverArrowDimensions:f});t.wrapper.style.right=`${A}px`,t.wrapper.style.top=`${w}px`,t.wrapper.style.bottom="auto",t.wrapper.style.left="auto",b="right"}else if(d){const A=Math.min(c,window.innerHeight-a.realHeight-f.width);let w=br(r,{elementDimensions:u,popoverDimensions:a,popoverPadding:s,popoverArrowDimensions:f});t.wrapper.style.top=`${A}px`,t.wrapper.style.left=`${w}px`,t.wrapper.style.bottom="auto",t.wrapper.style.right="auto",b="top"}else if(h){const A=Math.min(p,window.innerHeight-(a==null?void 0:a.realHeight)-f.width);let w=br(r,{elementDimensions:u,popoverDimensions:a,popoverPadding:s,popoverArrowDimensions:f});t.wrapper.style.left=`${w}px`,t.wrapper.style.bottom=`${A}px`,t.wrapper.style.top="auto",t.wrapper.style.right="auto",b="bottom"}E?t.arrow.classList.add("driver-popover-arrow-none"):gu(r,b,n)}function gu(n,e,t){const i=ae("popover");if(!i)return;const l=t.getBoundingClientRect(),r=gr(),o=i.arrow,s=r.width,a=window.innerWidth,f=l.width,u=l.left,c=r.height,d=window.innerHeight,p=l.top,h=l.height;o.className="driver-popover-arrow";let m=e,g=n;if(e==="top"?(u+f<=0?(m="right",g="end"):u+f-s<=0&&(m="top",g="start"),u>=a?(m="left",g="end"):u+s>=a&&(m="top",g="end")):e==="bottom"?(u+f<=0?(m="right",g="start"):u+f-s<=0&&(m="bottom",g="start"),u>=a?(m="left",g="start"):u+s>=a&&(m="bottom",g="end")):e==="left"?(p+h<=0?(m="bottom",g="end"):p+h-c<=0&&(m="left",g="start"),p>=d?(m="top",g="end"):p+c>=d&&(m="left",g="end")):e==="right"&&(p+h<=0?(m="bottom",g="start"):p+h-c<=0&&(m="right",g="start"),p>=d?(m="top",g="start"):p+c>=d&&(m="right",g="end")),!m)o.classList.add("driver-popover-arrow-none");else{o.classList.add(`driver-popover-arrow-side-${m}`),o.classList.add(`driver-popover-arrow-align-${g}`);const _=t.getBoundingClientRect(),y=o.getBoundingClientRect(),E=te("stagePadding")||0,b=_.left-E<window.innerWidth&&_.right+E>0&&_.top-E<window.innerHeight&&_.bottom+E>0;e==="bottom"&&b&&(y.x>_.x&&y.x+y.width<_.x+_.width?i.wrapper.style.transform="translateY(0)":(o.classList.remove(`driver-popover-arrow-align-${g}`),o.classList.add("driver-popover-arrow-none"),i.wrapper.style.transform=`translateY(-${E/2}px)`))}}function vu(){const n=document.createElement("div");n.classList.add("driver-popover");const e=document.createElement("div");e.classList.add("driver-popover-arrow");const t=document.createElement("header");t.id="driver-popover-title",t.classList.add("driver-popover-title"),t.style.display="none",t.innerText="Popover Title";const i=document.createElement("div");i.id="driver-popover-description",i.classList.add("driver-popover-description"),i.style.display="none",i.innerText="Popover description is here";const l=document.createElement("button");l.type="button",l.classList.add("driver-popover-close-btn"),l.setAttribute("aria-label","Close"),l.innerHTML="&times;";const r=document.createElement("footer");r.classList.add("driver-popover-footer");const o=document.createElement("span");o.classList.add("driver-popover-progress-text"),o.innerText="";const s=document.createElement("span");s.classList.add("driver-popover-navigation-btns");const a=document.createElement("button");a.type="button",a.classList.add("driver-popover-prev-btn"),a.innerHTML="&larr; Previous";const f=document.createElement("button");return f.type="button",f.classList.add("driver-popover-next-btn"),f.innerHTML="Next &rarr;",s.appendChild(a),s.appendChild(f),r.appendChild(o),r.appendChild(s),n.appendChild(l),n.appendChild(e),n.appendChild(t),n.appendChild(i),n.appendChild(r),{wrapper:n,arrow:e,title:t,description:i,footer:r,previousButton:a,nextButton:f,closeButton:l,footerButtons:s,progress:o}}function bu(){var n;const e=ae("popover");e&&((n=e.wrapper.parentElement)==null||n.removeChild(e.wrapper))}function _u(n={}){dl(n);function e(){te("allowClose")&&u()}function t(){const d=te("overlayClickBehavior");if(te("allowClose")&&d==="close"){u();return}d==="nextStep"&&i()}function i(){const d=ae("activeIndex"),p=te("steps")||[];if(typeof d>"u")return;const h=d+1;p[h]?f(h):u()}function l(){const d=ae("activeIndex"),p=te("steps")||[];if(typeof d>"u")return;const h=d-1;p[h]?f(h):u()}function r(d){(te("steps")||[])[d]?f(d):u()}function o(){var d;if(ae("__transitionCallback"))return;const p=ae("activeIndex"),h=ae("__activeStep"),m=ae("__activeElement");if(typeof p>"u"||typeof h>"u"||typeof ae("activeIndex")>"u")return;const g=((d=h.popover)==null?void 0:d.onPrevClick)||te("onPrevClick");if(g)return g(m,h,{config:te(),state:ae(),driver:wt()});l()}function s(){var d;if(ae("__transitionCallback"))return;const p=ae("activeIndex"),h=ae("__activeStep"),m=ae("__activeElement");if(typeof p>"u"||typeof h>"u")return;const g=((d=h.popover)==null?void 0:d.onNextClick)||te("onNextClick");if(g)return g(m,h,{config:te(),state:ae(),driver:wt()});i()}function a(){ae("isInitialized")||(tt("isInitialized",!0),document.body.classList.add("driver-active",te("animate")?"driver-fade":"driver-simple"),pu(),Ei("overlayClick",t),Ei("escapePress",e),Ei("arrowLeftPress",o),Ei("arrowRightPress",s))}function f(d=0){var p,h,m,g,_,y,E,b;const A=te("steps");if(!A){console.error("No steps to drive through"),u();return}if(!A[d]){u();return}tt("__activeOnDestroyed",document.activeElement),tt("activeIndex",d);const w=A[d],L=A[d+1],O=A[d-1],D=((p=w.popover)==null?void 0:p.doneBtnText)||te("doneBtnText")||"Done",C=te("allowClose"),R=typeof((h=w.popover)==null?void 0:h.showProgress)<"u"?(m=w.popover)==null?void 0:m.showProgress:te("showProgress"),W=(((g=w.popover)==null?void 0:g.progressText)||te("progressText")||"{{current}} of {{total}}").replace("{{current}}",`${d+1}`).replace("{{total}}",`${A.length}`),Z=((_=w.popover)==null?void 0:_.showButtons)||te("showButtons"),q=["next","previous",...C?["close"]:[]].filter(le=>!(Z!=null&&Z.length)||Z.includes(le)),H=((y=w.popover)==null?void 0:y.onNextClick)||te("onNextClick"),V=((E=w.popover)==null?void 0:E.onPrevClick)||te("onPrevClick"),ie=((b=w.popover)==null?void 0:b.onCloseClick)||te("onCloseClick");dr({...w,popover:{showButtons:q,nextBtnText:L?void 0:D,disableButtons:[...O?[]:["previous"]],showProgress:R,progressText:W,onNextClick:H||(()=>{L?f(d+1):u()}),onPrevClick:V||(()=>{f(d-1)}),onCloseClick:ie||(()=>{u()}),...(w==null?void 0:w.popover)||{}}})}function u(d=!0){const p=ae("__activeElement"),h=ae("__activeStep"),m=ae("__activeOnDestroyed"),g=te("onDestroyStarted");if(d&&g){const E=!p||(p==null?void 0:p.id)==="driver-dummy-element";g(E?void 0:p,h,{config:te(),state:ae(),driver:wt()});return}const _=(h==null?void 0:h.onDeselected)||te("onDeselected"),y=te("onDestroyed");if(document.body.classList.remove("driver-active","driver-fade","driver-simple"),mu(),bu(),cu(),au(),$s(),sr(),p&&h){const E=p.id==="driver-dummy-element";_&&_(E?void 0:p,h,{config:te(),state:ae(),driver:wt()}),y&&y(E?void 0:p,h,{config:te(),state:ae(),driver:wt()})}m&&m.focus()}const c={isActive:()=>ae("isInitialized")||!1,refresh:Vn,drive:(d=0)=>{a(),f(d)},setConfig:dl,setSteps:d=>{sr(),dl({...te(),steps:d})},getConfig:te,getState:ae,getActiveIndex:()=>ae("activeIndex"),isFirstStep:()=>ae("activeIndex")===0,isLastStep:()=>{const d=te("steps")||[],p=ae("activeIndex");return p!==void 0&&p===d.length-1},getActiveStep:()=>ae("activeStep"),getActiveElement:()=>ae("activeElement"),getPreviousElement:()=>ae("previousElement"),getPreviousStep:()=>ae("previousStep"),moveNext:i,movePrevious:l,moveTo:r,hasNextStep:()=>{const d=te("steps")||[],p=ae("activeIndex");return p!==void 0&&!!d[p+1]},hasPreviousStep:()=>{const d=te("steps")||[],p=ae("activeIndex");return p!==void 0&&!!d[p-1]},highlight:d=>{a(),dr({...d,popover:d.popover?{showButtons:[],showProgress:!1,progressText:"",...d.popover}:void 0})},destroy:()=>{u(!1)}};return xs(c),c}var ct="top",yt="bottom",kt="right",dt="left",pl="auto",Un=[ct,yt,kt,dt],_n="start",Xn="end",wu="clippingParents",wr="viewport",Yn="popper",yu="reference",yr=Un.reduce(function(n,e){return n.concat([e+"-"+_n,e+"-"+Xn])},[]),kr=[].concat(Un,[pl]).reduce(function(n,e){return n.concat([e,e+"-"+_n,e+"-"+Xn])},[]),ku="beforeRead",Eu="read",Su="afterRead",Du="beforeMain",Au="main",Cu="afterMain",Tu="beforeWrite",Lu="write",Ou="afterWrite",Pu=[ku,Eu,Su,Du,Au,Cu,Tu,Lu,Ou];function Tt(n){return n?(n.nodeName||"").toLowerCase():null}function gt(n){if(n==null)return window;if(n.toString()!=="[object Window]"){var e=n.ownerDocument;return e&&e.defaultView||window}return n}function sn(n){var e=gt(n).Element;return n instanceof e||n instanceof Element}function Et(n){var e=gt(n).HTMLElement;return n instanceof e||n instanceof HTMLElement}function ml(n){if(typeof ShadowRoot>"u")return!1;var e=gt(n).ShadowRoot;return n instanceof e||n instanceof ShadowRoot}function Iu(n){var e=n.state;Object.keys(e.elements).forEach(function(t){var i=e.styles[t]||{},l=e.attributes[t]||{},r=e.elements[t];!Et(r)||!Tt(r)||(Object.assign(r.style,i),Object.keys(l).forEach(function(o){var s=l[o];s===!1?r.removeAttribute(o):r.setAttribute(o,s===!0?"":s)}))})}function Nu(n){var e=n.state,t={popper:{position:e.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(e.elements.popper.style,t.popper),e.styles=t,e.elements.arrow&&Object.assign(e.elements.arrow.style,t.arrow),function(){Object.keys(e.elements).forEach(function(i){var l=e.elements[i],r=e.attributes[i]||{},o=Object.keys(e.styles.hasOwnProperty(i)?e.styles[i]:t[i]),s=o.reduce(function(a,f){return a[f]="",a},{});!Et(l)||!Tt(l)||(Object.assign(l.style,s),Object.keys(r).forEach(function(a){l.removeAttribute(a)}))})}}const Er={name:"applyStyles",enabled:!0,phase:"write",fn:Iu,effect:Nu,requires:["computeStyles"]};function Lt(n){return n.split("-")[0]}var un=Math.max,Ai=Math.min,wn=Math.round;function hl(){var n=navigator.userAgentData;return n!=null&&n.brands&&Array.isArray(n.brands)?n.brands.map(function(e){return e.brand+"/"+e.version}).join(" "):navigator.userAgent}function Sr(){return!/^((?!chrome|android).)*safari/i.test(hl())}function yn(n,e,t){e===void 0&&(e=!1),t===void 0&&(t=!1);var i=n.getBoundingClientRect(),l=1,r=1;e&&Et(n)&&(l=n.offsetWidth>0&&wn(i.width)/n.offsetWidth||1,r=n.offsetHeight>0&&wn(i.height)/n.offsetHeight||1);var o=sn(n)?gt(n):window,s=o.visualViewport,a=!Sr()&&t,f=(i.left+(a&&s?s.offsetLeft:0))/l,u=(i.top+(a&&s?s.offsetTop:0))/r,c=i.width/l,d=i.height/r;return{width:c,height:d,top:u,right:f+c,bottom:u+d,left:f,x:f,y:u}}function gl(n){var e=yn(n),t=n.offsetWidth,i=n.offsetHeight;return Math.abs(e.width-t)<=1&&(t=e.width),Math.abs(e.height-i)<=1&&(i=e.height),{x:n.offsetLeft,y:n.offsetTop,width:t,height:i}}function Dr(n,e){var t=e.getRootNode&&e.getRootNode();if(n.contains(e))return!0;if(t&&ml(t)){var i=e;do{if(i&&n.isSameNode(i))return!0;i=i.parentNode||i.host}while(i)}return!1}function Ht(n){return gt(n).getComputedStyle(n)}function Mu(n){return["table","td","th"].indexOf(Tt(n))>=0}function Jt(n){return((sn(n)?n.ownerDocument:n.document)||window.document).documentElement}function Ci(n){return Tt(n)==="html"?n:n.assignedSlot||n.parentNode||(ml(n)?n.host:null)||Jt(n)}function Ar(n){return!Et(n)||Ht(n).position==="fixed"?null:n.offsetParent}function Bu(n){var e=/firefox/i.test(hl()),t=/Trident/i.test(hl());if(t&&Et(n)){var i=Ht(n);if(i.position==="fixed")return null}var l=Ci(n);for(ml(l)&&(l=l.host);Et(l)&&["html","body"].indexOf(Tt(l))<0;){var r=Ht(l);if(r.transform!=="none"||r.perspective!=="none"||r.contain==="paint"||["transform","perspective"].indexOf(r.willChange)!==-1||e&&r.willChange==="filter"||e&&r.filter&&r.filter!=="none")return l;l=l.parentNode}return null}function Qn(n){for(var e=gt(n),t=Ar(n);t&&Mu(t)&&Ht(t).position==="static";)t=Ar(t);return t&&(Tt(t)==="html"||Tt(t)==="body"&&Ht(t).position==="static")?e:t||Bu(n)||e}function vl(n){return["top","bottom"].indexOf(n)>=0?"x":"y"}function Jn(n,e,t){return un(n,Ai(e,t))}function Fu(n,e,t){var i=Jn(n,e,t);return i>t?t:i}function Cr(){return{top:0,right:0,bottom:0,left:0}}function Tr(n){return Object.assign({},Cr(),n)}function Lr(n,e){return e.reduce(function(t,i){return t[i]=n,t},{})}var Ru=function(e,t){return e=typeof e=="function"?e(Object.assign({},t.rects,{placement:t.placement})):e,Tr(typeof e!="number"?e:Lr(e,Un))};function Hu(n){var e,t=n.state,i=n.name,l=n.options,r=t.elements.arrow,o=t.modifiersData.popperOffsets,s=Lt(t.placement),a=vl(s),f=[dt,kt].indexOf(s)>=0,u=f?"height":"width";if(!(!r||!o)){var c=Ru(l.padding,t),d=gl(r),p=a==="y"?ct:dt,h=a==="y"?yt:kt,m=t.rects.reference[u]+t.rects.reference[a]-o[a]-t.rects.popper[u],g=o[a]-t.rects.reference[a],_=Qn(r),y=_?a==="y"?_.clientHeight||0:_.clientWidth||0:0,E=m/2-g/2,b=c[p],A=y-d[u]-c[h],w=y/2-d[u]/2+E,L=Jn(b,w,A),O=a;t.modifiersData[i]=(e={},e[O]=L,e.centerOffset=L-w,e)}}function Wu(n){var e=n.state,t=n.options,i=t.element,l=i===void 0?"[data-popper-arrow]":i;l!=null&&(typeof l=="string"&&(l=e.elements.popper.querySelector(l),!l)||Dr(e.elements.popper,l)&&(e.elements.arrow=l))}const qu={name:"arrow",enabled:!0,phase:"main",fn:Hu,effect:Wu,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function kn(n){return n.split("-")[1]}var ju={top:"auto",right:"auto",bottom:"auto",left:"auto"};function zu(n,e){var t=n.x,i=n.y,l=e.devicePixelRatio||1;return{x:wn(t*l)/l||0,y:wn(i*l)/l||0}}function Or(n){var e,t=n.popper,i=n.popperRect,l=n.placement,r=n.variation,o=n.offsets,s=n.position,a=n.gpuAcceleration,f=n.adaptive,u=n.roundOffsets,c=n.isFixed,d=o.x,p=d===void 0?0:d,h=o.y,m=h===void 0?0:h,g=typeof u=="function"?u({x:p,y:m}):{x:p,y:m};p=g.x,m=g.y;var _=o.hasOwnProperty("x"),y=o.hasOwnProperty("y"),E=dt,b=ct,A=window;if(f){var w=Qn(t),L="clientHeight",O="clientWidth";if(w===gt(t)&&(w=Jt(t),Ht(w).position!=="static"&&s==="absolute"&&(L="scrollHeight",O="scrollWidth")),w=w,l===ct||(l===dt||l===kt)&&r===Xn){b=yt;var D=c&&w===A&&A.visualViewport?A.visualViewport.height:w[L];m-=D-i.height,m*=a?1:-1}if(l===dt||(l===ct||l===yt)&&r===Xn){E=kt;var C=c&&w===A&&A.visualViewport?A.visualViewport.width:w[O];p-=C-i.width,p*=a?1:-1}}var R=Object.assign({position:s},f&&ju),W=u===!0?zu({x:p,y:m},gt(t)):{x:p,y:m};if(p=W.x,m=W.y,a){var Z;return Object.assign({},R,(Z={},Z[b]=y?"0":"",Z[E]=_?"0":"",Z.transform=(A.devicePixelRatio||1)<=1?"translate("+p+"px, "+m+"px)":"translate3d("+p+"px, "+m+"px, 0)",Z))}return Object.assign({},R,(e={},e[b]=y?m+"px":"",e[E]=_?p+"px":"",e.transform="",e))}function Gu(n){var e=n.state,t=n.options,i=t.gpuAcceleration,l=i===void 0?!0:i,r=t.adaptive,o=r===void 0?!0:r,s=t.roundOffsets,a=s===void 0?!0:s,f={placement:Lt(e.placement),variation:kn(e.placement),popper:e.elements.popper,popperRect:e.rects.popper,gpuAcceleration:l,isFixed:e.options.strategy==="fixed"};e.modifiersData.popperOffsets!=null&&(e.styles.popper=Object.assign({},e.styles.popper,Or(Object.assign({},f,{offsets:e.modifiersData.popperOffsets,position:e.options.strategy,adaptive:o,roundOffsets:a})))),e.modifiersData.arrow!=null&&(e.styles.arrow=Object.assign({},e.styles.arrow,Or(Object.assign({},f,{offsets:e.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:a})))),e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-placement":e.placement})}const Vu={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:Gu,data:{}};var Ti={passive:!0};function Uu(n){var e=n.state,t=n.instance,i=n.options,l=i.scroll,r=l===void 0?!0:l,o=i.resize,s=o===void 0?!0:o,a=gt(e.elements.popper),f=[].concat(e.scrollParents.reference,e.scrollParents.popper);return r&&f.forEach(function(u){u.addEventListener("scroll",t.update,Ti)}),s&&a.addEventListener("resize",t.update,Ti),function(){r&&f.forEach(function(u){u.removeEventListener("scroll",t.update,Ti)}),s&&a.removeEventListener("resize",t.update,Ti)}}const Xu={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:Uu,data:{}};var Yu={left:"right",right:"left",bottom:"top",top:"bottom"};function Li(n){return n.replace(/left|right|bottom|top/g,function(e){return Yu[e]})}var Qu={start:"end",end:"start"};function Pr(n){return n.replace(/start|end/g,function(e){return Qu[e]})}function bl(n){var e=gt(n),t=e.pageXOffset,i=e.pageYOffset;return{scrollLeft:t,scrollTop:i}}function _l(n){return yn(Jt(n)).left+bl(n).scrollLeft}function Ju(n,e){var t=gt(n),i=Jt(n),l=t.visualViewport,r=i.clientWidth,o=i.clientHeight,s=0,a=0;if(l){r=l.width,o=l.height;var f=Sr();(f||!f&&e==="fixed")&&(s=l.offsetLeft,a=l.offsetTop)}return{width:r,height:o,x:s+_l(n),y:a}}function Zu(n){var e,t=Jt(n),i=bl(n),l=(e=n.ownerDocument)==null?void 0:e.body,r=un(t.scrollWidth,t.clientWidth,l?l.scrollWidth:0,l?l.clientWidth:0),o=un(t.scrollHeight,t.clientHeight,l?l.scrollHeight:0,l?l.clientHeight:0),s=-i.scrollLeft+_l(n),a=-i.scrollTop;return Ht(l||t).direction==="rtl"&&(s+=un(t.clientWidth,l?l.clientWidth:0)-r),{width:r,height:o,x:s,y:a}}function wl(n){var e=Ht(n),t=e.overflow,i=e.overflowX,l=e.overflowY;return/auto|scroll|overlay|hidden/.test(t+l+i)}function Ir(n){return["html","body","#document"].indexOf(Tt(n))>=0?n.ownerDocument.body:Et(n)&&wl(n)?n:Ir(Ci(n))}function Zn(n,e){var t;e===void 0&&(e=[]);var i=Ir(n),l=i===((t=n.ownerDocument)==null?void 0:t.body),r=gt(i),o=l?[r].concat(r.visualViewport||[],wl(i)?i:[]):i,s=e.concat(o);return l?s:s.concat(Zn(Ci(o)))}function yl(n){return Object.assign({},n,{left:n.x,top:n.y,right:n.x+n.width,bottom:n.y+n.height})}function Ku(n,e){var t=yn(n,!1,e==="fixed");return t.top=t.top+n.clientTop,t.left=t.left+n.clientLeft,t.bottom=t.top+n.clientHeight,t.right=t.left+n.clientWidth,t.width=n.clientWidth,t.height=n.clientHeight,t.x=t.left,t.y=t.top,t}function Nr(n,e,t){return e===wr?yl(Ju(n,t)):sn(e)?Ku(e,t):yl(Zu(Jt(n)))}function xu(n){var e=Zn(Ci(n)),t=["absolute","fixed"].indexOf(Ht(n).position)>=0,i=t&&Et(n)?Qn(n):n;return sn(i)?e.filter(function(l){return sn(l)&&Dr(l,i)&&Tt(l)!=="body"}):[]}function $u(n,e,t,i){var l=e==="clippingParents"?xu(n):[].concat(e),r=[].concat(l,[t]),o=r[0],s=r.reduce(function(a,f){var u=Nr(n,f,i);return a.top=un(u.top,a.top),a.right=Ai(u.right,a.right),a.bottom=Ai(u.bottom,a.bottom),a.left=un(u.left,a.left),a},Nr(n,o,i));return s.width=s.right-s.left,s.height=s.bottom-s.top,s.x=s.left,s.y=s.top,s}function Mr(n){var e=n.reference,t=n.element,i=n.placement,l=i?Lt(i):null,r=i?kn(i):null,o=e.x+e.width/2-t.width/2,s=e.y+e.height/2-t.height/2,a;switch(l){case ct:a={x:o,y:e.y-t.height};break;case yt:a={x:o,y:e.y+e.height};break;case kt:a={x:e.x+e.width,y:s};break;case dt:a={x:e.x-t.width,y:s};break;default:a={x:e.x,y:e.y}}var f=l?vl(l):null;if(f!=null){var u=f==="y"?"height":"width";switch(r){case _n:a[f]=a[f]-(e[u]/2-t[u]/2);break;case Xn:a[f]=a[f]+(e[u]/2-t[u]/2);break}}return a}function Kn(n,e){e===void 0&&(e={});var t=e,i=t.placement,l=i===void 0?n.placement:i,r=t.strategy,o=r===void 0?n.strategy:r,s=t.boundary,a=s===void 0?wu:s,f=t.rootBoundary,u=f===void 0?wr:f,c=t.elementContext,d=c===void 0?Yn:c,p=t.altBoundary,h=p===void 0?!1:p,m=t.padding,g=m===void 0?0:m,_=Tr(typeof g!="number"?g:Lr(g,Un)),y=d===Yn?yu:Yn,E=n.rects.popper,b=n.elements[h?y:d],A=$u(sn(b)?b:b.contextElement||Jt(n.elements.popper),a,u,o),w=yn(n.elements.reference),L=Mr({reference:w,element:E,placement:l}),O=yl(Object.assign({},E,L)),D=d===Yn?O:w,C={top:A.top-D.top+_.top,bottom:D.bottom-A.bottom+_.bottom,left:A.left-D.left+_.left,right:D.right-A.right+_.right},R=n.modifiersData.offset;if(d===Yn&&R){var W=R[l];Object.keys(C).forEach(function(Z){var q=[kt,yt].indexOf(Z)>=0?1:-1,H=[ct,yt].indexOf(Z)>=0?"y":"x";C[Z]+=W[H]*q})}return C}function ef(n,e){e===void 0&&(e={});var t=e,i=t.placement,l=t.boundary,r=t.rootBoundary,o=t.padding,s=t.flipVariations,a=t.allowedAutoPlacements,f=a===void 0?kr:a,u=kn(i),c=u?s?yr:yr.filter(function(h){return kn(h)===u}):Un,d=c.filter(function(h){return f.indexOf(h)>=0});d.length===0&&(d=c);var p=d.reduce(function(h,m){return h[m]=Kn(n,{placement:m,boundary:l,rootBoundary:r,padding:o})[Lt(m)],h},{});return Object.keys(p).sort(function(h,m){return p[h]-p[m]})}function tf(n){if(Lt(n)===pl)return[];var e=Li(n);return[Pr(n),e,Pr(e)]}function nf(n){var e=n.state,t=n.options,i=n.name;if(!e.modifiersData[i]._skip){for(var l=t.mainAxis,r=l===void 0?!0:l,o=t.altAxis,s=o===void 0?!0:o,a=t.fallbackPlacements,f=t.padding,u=t.boundary,c=t.rootBoundary,d=t.altBoundary,p=t.flipVariations,h=p===void 0?!0:p,m=t.allowedAutoPlacements,g=e.options.placement,_=Lt(g),y=_===g,E=a||(y||!h?[Li(g)]:tf(g)),b=[g].concat(E).reduce(function(De,We){return De.concat(Lt(We)===pl?ef(e,{placement:We,boundary:u,rootBoundary:c,padding:f,flipVariations:h,allowedAutoPlacements:m}):We)},[]),A=e.rects.reference,w=e.rects.popper,L=new Map,O=!0,D=b[0],C=0;C<b.length;C++){var R=b[C],W=Lt(R),Z=kn(R)===_n,q=[ct,yt].indexOf(W)>=0,H=q?"width":"height",V=Kn(e,{placement:R,boundary:u,rootBoundary:c,altBoundary:d,padding:f}),ie=q?Z?kt:dt:Z?yt:ct;A[H]>w[H]&&(ie=Li(ie));var le=Li(ie),Ne=[];if(r&&Ne.push(V[W]<=0),s&&Ne.push(V[ie]<=0,V[le]<=0),Ne.every(function(De){return De})){D=R,O=!1;break}L.set(R,Ne)}if(O)for(var Ie=h?3:1,He=function(We){var Y=b.find(function($){var fe=L.get($);if(fe)return fe.slice(0,We).every(function(P){return P})});if(Y)return D=Y,"break"},je=Ie;je>0;je--){var me=He(je);if(me==="break")break}e.placement!==D&&(e.modifiersData[i]._skip=!0,e.placement=D,e.reset=!0)}}const lf={name:"flip",enabled:!0,phase:"main",fn:nf,requiresIfExists:["offset"],data:{_skip:!1}};function Br(n,e,t){return t===void 0&&(t={x:0,y:0}),{top:n.top-e.height-t.y,right:n.right-e.width+t.x,bottom:n.bottom-e.height+t.y,left:n.left-e.width-t.x}}function Fr(n){return[ct,kt,yt,dt].some(function(e){return n[e]>=0})}function rf(n){var e=n.state,t=n.name,i=e.rects.reference,l=e.rects.popper,r=e.modifiersData.preventOverflow,o=Kn(e,{elementContext:"reference"}),s=Kn(e,{altBoundary:!0}),a=Br(o,i),f=Br(s,l,r),u=Fr(a),c=Fr(f);e.modifiersData[t]={referenceClippingOffsets:a,popperEscapeOffsets:f,isReferenceHidden:u,hasPopperEscaped:c},e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-reference-hidden":u,"data-popper-escaped":c})}const of={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:rf};function af(n,e,t){var i=Lt(n),l=[dt,ct].indexOf(i)>=0?-1:1,r=typeof t=="function"?t(Object.assign({},e,{placement:n})):t,o=r[0],s=r[1];return o=o||0,s=(s||0)*l,[dt,kt].indexOf(i)>=0?{x:s,y:o}:{x:o,y:s}}function sf(n){var e=n.state,t=n.options,i=n.name,l=t.offset,r=l===void 0?[0,0]:l,o=kr.reduce(function(u,c){return u[c]=af(c,e.rects,r),u},{}),s=o[e.placement],a=s.x,f=s.y;e.modifiersData.popperOffsets!=null&&(e.modifiersData.popperOffsets.x+=a,e.modifiersData.popperOffsets.y+=f),e.modifiersData[i]=o}const uf={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:sf};function ff(n){var e=n.state,t=n.name;e.modifiersData[t]=Mr({reference:e.rects.reference,element:e.rects.popper,placement:e.placement})}const cf={name:"popperOffsets",enabled:!0,phase:"read",fn:ff,data:{}};function df(n){return n==="x"?"y":"x"}function pf(n){var e=n.state,t=n.options,i=n.name,l=t.mainAxis,r=l===void 0?!0:l,o=t.altAxis,s=o===void 0?!1:o,a=t.boundary,f=t.rootBoundary,u=t.altBoundary,c=t.padding,d=t.tether,p=d===void 0?!0:d,h=t.tetherOffset,m=h===void 0?0:h,g=Kn(e,{boundary:a,rootBoundary:f,padding:c,altBoundary:u}),_=Lt(e.placement),y=kn(e.placement),E=!y,b=vl(_),A=df(b),w=e.modifiersData.popperOffsets,L=e.rects.reference,O=e.rects.popper,D=typeof m=="function"?m(Object.assign({},e.rects,{placement:e.placement})):m,C=typeof D=="number"?{mainAxis:D,altAxis:D}:Object.assign({mainAxis:0,altAxis:0},D),R=e.modifiersData.offset?e.modifiersData.offset[e.placement]:null,W={x:0,y:0};if(w){if(r){var Z,q=b==="y"?ct:dt,H=b==="y"?yt:kt,V=b==="y"?"height":"width",ie=w[b],le=ie+g[q],Ne=ie-g[H],Ie=p?-O[V]/2:0,He=y===_n?L[V]:O[V],je=y===_n?-O[V]:-L[V],me=e.elements.arrow,De=p&&me?gl(me):{width:0,height:0},We=e.modifiersData["arrow#persistent"]?e.modifiersData["arrow#persistent"].padding:Cr(),Y=We[q],$=We[H],fe=Jn(0,L[V],De[V]),P=E?L[V]/2-Ie-fe-Y-C.mainAxis:He-fe-Y-C.mainAxis,M=E?-L[V]/2+Ie+fe+$+C.mainAxis:je+fe+$+C.mainAxis,G=e.elements.arrow&&Qn(e.elements.arrow),J=G?b==="y"?G.clientTop||0:G.clientLeft||0:0,de=(Z=R==null?void 0:R[b])!=null?Z:0,Le=ie+P-de-J,qe=ie+M-de,it=Jn(p?Ai(le,Le):le,ie,p?un(Ne,qe):Ne);w[b]=it,W[b]=it-ie}if(s){var oe,Se=b==="x"?ct:dt,Me=b==="x"?yt:kt,Ze=w[A],lt=A==="y"?"height":"width",Ft=Ze+g[Se],Qt=Ze-g[Me],bn=[ct,dt].indexOf(_)!==-1,Wn=(oe=R==null?void 0:R[A])!=null?oe:0,qn=bn?Ft:Ze-L[lt]-O[lt]-Wn+C.altAxis,jn=bn?Ze+L[lt]+O[lt]-Wn-C.altAxis:Qt,zn=p&&bn?Fu(qn,Ze,jn):Jn(p?qn:Ft,Ze,p?jn:Qt);w[A]=zn,W[A]=zn-Ze}e.modifiersData[i]=W}}const mf={name:"preventOverflow",enabled:!0,phase:"main",fn:pf,requiresIfExists:["offset"]};function hf(n){return{scrollLeft:n.scrollLeft,scrollTop:n.scrollTop}}function gf(n){return n===gt(n)||!Et(n)?bl(n):hf(n)}function vf(n){var e=n.getBoundingClientRect(),t=wn(e.width)/n.offsetWidth||1,i=wn(e.height)/n.offsetHeight||1;return t!==1||i!==1}function bf(n,e,t){t===void 0&&(t=!1);var i=Et(e),l=Et(e)&&vf(e),r=Jt(e),o=yn(n,l,t),s={scrollLeft:0,scrollTop:0},a={x:0,y:0};return(i||!i&&!t)&&((Tt(e)!=="body"||wl(r))&&(s=gf(e)),Et(e)?(a=yn(e,!0),a.x+=e.clientLeft,a.y+=e.clientTop):r&&(a.x=_l(r))),{x:o.left+s.scrollLeft-a.x,y:o.top+s.scrollTop-a.y,width:o.width,height:o.height}}function _f(n){var e=new Map,t=new Set,i=[];n.forEach(function(r){e.set(r.name,r)});function l(r){t.add(r.name);var o=[].concat(r.requires||[],r.requiresIfExists||[]);o.forEach(function(s){if(!t.has(s)){var a=e.get(s);a&&l(a)}}),i.push(r)}return n.forEach(function(r){t.has(r.name)||l(r)}),i}function wf(n){var e=_f(n);return Pu.reduce(function(t,i){return t.concat(e.filter(function(l){return l.phase===i}))},[])}function yf(n){var e;return function(){return e||(e=new Promise(function(t){Promise.resolve().then(function(){e=void 0,t(n())})})),e}}function kf(n){var e=n.reduce(function(t,i){var l=t[i.name];return t[i.name]=l?Object.assign({},l,i,{options:Object.assign({},l.options,i.options),data:Object.assign({},l.data,i.data)}):i,t},{});return Object.keys(e).map(function(t){return e[t]})}var Rr={placement:"bottom",modifiers:[],strategy:"absolute"};function Hr(){for(var n=arguments.length,e=new Array(n),t=0;t<n;t++)e[t]=arguments[t];return!e.some(function(i){return!(i&&typeof i.getBoundingClientRect=="function")})}function Ef(n){n===void 0&&(n={});var e=n,t=e.defaultModifiers,i=t===void 0?[]:t,l=e.defaultOptions,r=l===void 0?Rr:l;return function(s,a,f){f===void 0&&(f=r);var u={placement:"bottom",orderedModifiers:[],options:Object.assign({},Rr,r),modifiersData:{},elements:{reference:s,popper:a},attributes:{},styles:{}},c=[],d=!1,p={state:u,setOptions:function(_){var y=typeof _=="function"?_(u.options):_;m(),u.options=Object.assign({},r,u.options,y),u.scrollParents={reference:sn(s)?Zn(s):s.contextElement?Zn(s.contextElement):[],popper:Zn(a)};var E=wf(kf([].concat(i,u.options.modifiers)));return u.orderedModifiers=E.filter(function(b){return b.enabled}),h(),p.update()},forceUpdate:function(){if(!d){var _=u.elements,y=_.reference,E=_.popper;if(Hr(y,E)){u.rects={reference:bf(y,Qn(E),u.options.strategy==="fixed"),popper:gl(E)},u.reset=!1,u.placement=u.options.placement,u.orderedModifiers.forEach(function(C){return u.modifiersData[C.name]=Object.assign({},C.data)});for(var b=0;b<u.orderedModifiers.length;b++){if(u.reset===!0){u.reset=!1,b=-1;continue}var A=u.orderedModifiers[b],w=A.fn,L=A.options,O=L===void 0?{}:L,D=A.name;typeof w=="function"&&(u=w({state:u,options:O,name:D,instance:p})||u)}}}},update:yf(function(){return new Promise(function(g){p.forceUpdate(),g(u)})}),destroy:function(){m(),d=!0}};if(!Hr(s,a))return p;p.setOptions(f).then(function(g){!d&&f.onFirstUpdate&&f.onFirstUpdate(g)});function h(){u.orderedModifiers.forEach(function(g){var _=g.name,y=g.options,E=y===void 0?{}:y,b=g.effect;if(typeof b=="function"){var A=b({state:u,name:_,instance:p,options:E}),w=function(){};c.push(A||w)}})}function m(){c.forEach(function(g){return g()}),c=[]}return p}}var Sf=[Xu,cf,Vu,Er,uf,lf,mf,qu,of],Df=Ef({defaultModifiers:Sf}),Af="tippy-box",Wr="tippy-content",Cf="tippy-backdrop",qr="tippy-arrow",jr="tippy-svg-arrow",fn={passive:!0,capture:!0},zr=function(){return document.body};function kl(n,e,t){if(Array.isArray(n)){var i=n[e];return i??(Array.isArray(t)?t[e]:t)}return n}function El(n,e){var t={}.toString.call(n);return t.indexOf("[object")===0&&t.indexOf(e+"]")>-1}function Gr(n,e){return typeof n=="function"?n.apply(void 0,e):n}function Vr(n,e){if(e===0)return n;var t;return function(i){clearTimeout(t),t=setTimeout(function(){n(i)},e)}}function Tf(n){return n.split(/\s+/).filter(Boolean)}function En(n){return[].concat(n)}function Ur(n,e){n.indexOf(e)===-1&&n.push(e)}function Lf(n){return n.filter(function(e,t){return n.indexOf(e)===t})}function Of(n){return n.split("-")[0]}function Oi(n){return[].slice.call(n)}function Xr(n){return Object.keys(n).reduce(function(e,t){return n[t]!==void 0&&(e[t]=n[t]),e},{})}function xn(){return document.createElement("div")}function Pi(n){return["Element","Fragment"].some(function(e){return El(n,e)})}function Pf(n){return El(n,"NodeList")}function If(n){return El(n,"MouseEvent")}function Nf(n){return!!(n&&n._tippy&&n._tippy.reference===n)}function Mf(n){return Pi(n)?[n]:Pf(n)?Oi(n):Array.isArray(n)?n:Oi(document.querySelectorAll(n))}function Sl(n,e){n.forEach(function(t){t&&(t.style.transitionDuration=e+"ms")})}function Yr(n,e){n.forEach(function(t){t&&t.setAttribute("data-state",e)})}function Bf(n){var e,t=En(n),i=t[0];return i!=null&&(e=i.ownerDocument)!=null&&e.body?i.ownerDocument:document}function Ff(n,e){var t=e.clientX,i=e.clientY;return n.every(function(l){var r=l.popperRect,o=l.popperState,s=l.props,a=s.interactiveBorder,f=Of(o.placement),u=o.modifiersData.offset;if(!u)return!0;var c=f==="bottom"?u.top.y:0,d=f==="top"?u.bottom.y:0,p=f==="right"?u.left.x:0,h=f==="left"?u.right.x:0,m=r.top-i+c>a,g=i-r.bottom-d>a,_=r.left-t+p>a,y=t-r.right-h>a;return m||g||_||y})}function Dl(n,e,t){var i=e+"EventListener";["transitionend","webkitTransitionEnd"].forEach(function(l){n[i](l,t)})}function Qr(n,e){for(var t=e;t;){var i;if(n.contains(t))return!0;t=t.getRootNode==null||(i=t.getRootNode())==null?void 0:i.host}return!1}var Ot={isTouch:!1},Jr=0;function Rf(){Ot.isTouch||(Ot.isTouch=!0,window.performance&&document.addEventListener("mousemove",Zr))}function Zr(){var n=performance.now();n-Jr<20&&(Ot.isTouch=!1,document.removeEventListener("mousemove",Zr)),Jr=n}function Hf(){var n=document.activeElement;if(Nf(n)){var e=n._tippy;n.blur&&!e.state.isVisible&&n.blur()}}function Wf(){document.addEventListener("touchstart",Rf,fn),window.addEventListener("blur",Hf)}var qf=typeof window<"u"&&typeof document<"u",jf=qf?!!window.msCrypto:!1,zf={animateFill:!1,followCursor:!1,inlinePositioning:!1,sticky:!1},Gf={allowHTML:!1,animation:"fade",arrow:!0,content:"",inertia:!1,maxWidth:350,role:"tooltip",theme:"",zIndex:9999},Dt=Object.assign({appendTo:zr,aria:{content:"auto",expanded:"auto"},delay:0,duration:[300,250],getReferenceClientRect:null,hideOnClick:!0,ignoreAttributes:!1,interactive:!1,interactiveBorder:2,interactiveDebounce:0,moveTransition:"",offset:[0,10],onAfterUpdate:function(){},onBeforeUpdate:function(){},onCreate:function(){},onDestroy:function(){},onHidden:function(){},onHide:function(){},onMount:function(){},onShow:function(){},onShown:function(){},onTrigger:function(){},onUntrigger:function(){},onClickOutside:function(){},placement:"top",plugins:[],popperOptions:{},render:null,showOnCreate:!1,touch:!0,trigger:"mouseenter focus",triggerTarget:null},zf,Gf),Vf=Object.keys(Dt),Uf=function(e){var t=Object.keys(e);t.forEach(function(i){Dt[i]=e[i]})};function Kr(n){var e=n.plugins||[],t=e.reduce(function(i,l){var r=l.name,o=l.defaultValue;if(r){var s;i[r]=n[r]!==void 0?n[r]:(s=Dt[r])!=null?s:o}return i},{});return Object.assign({},n,t)}function Xf(n,e){var t=e?Object.keys(Kr(Object.assign({},Dt,{plugins:e}))):Vf,i=t.reduce(function(l,r){var o=(n.getAttribute("data-tippy-"+r)||"").trim();if(!o)return l;if(r==="content")l[r]=o;else try{l[r]=JSON.parse(o)}catch{l[r]=o}return l},{});return i}function xr(n,e){var t=Object.assign({},e,{content:Gr(e.content,[n])},e.ignoreAttributes?{}:Xf(n,e.plugins));return t.aria=Object.assign({},Dt.aria,t.aria),t.aria={expanded:t.aria.expanded==="auto"?e.interactive:t.aria.expanded,content:t.aria.content==="auto"?e.interactive?null:"describedby":t.aria.content},t}var Yf=function(){return"innerHTML"};function Al(n,e){n[Yf()]=e}function $r(n){var e=xn();return n===!0?e.className=qr:(e.className=jr,Pi(n)?e.appendChild(n):Al(e,n)),e}function eo(n,e){Pi(e.content)?(Al(n,""),n.appendChild(e.content)):typeof e.content!="function"&&(e.allowHTML?Al(n,e.content):n.textContent=e.content)}function Cl(n){var e=n.firstElementChild,t=Oi(e.children);return{box:e,content:t.find(function(i){return i.classList.contains(Wr)}),arrow:t.find(function(i){return i.classList.contains(qr)||i.classList.contains(jr)}),backdrop:t.find(function(i){return i.classList.contains(Cf)})}}function to(n){var e=xn(),t=xn();t.className=Af,t.setAttribute("data-state","hidden"),t.setAttribute("tabindex","-1");var i=xn();i.className=Wr,i.setAttribute("data-state","hidden"),eo(i,n.props),e.appendChild(t),t.appendChild(i),l(n.props,n.props);function l(r,o){var s=Cl(e),a=s.box,f=s.content,u=s.arrow;o.theme?a.setAttribute("data-theme",o.theme):a.removeAttribute("data-theme"),typeof o.animation=="string"?a.setAttribute("data-animation",o.animation):a.removeAttribute("data-animation"),o.inertia?a.setAttribute("data-inertia",""):a.removeAttribute("data-inertia"),a.style.maxWidth=typeof o.maxWidth=="number"?o.maxWidth+"px":o.maxWidth,o.role?a.setAttribute("role",o.role):a.removeAttribute("role"),(r.content!==o.content||r.allowHTML!==o.allowHTML)&&eo(f,n.props),o.arrow?u?r.arrow!==o.arrow&&(a.removeChild(u),a.appendChild($r(o.arrow))):a.appendChild($r(o.arrow)):u&&a.removeChild(u)}return{popper:e,onUpdate:l}}to.$$tippy=!0;var Qf=1,Ii=[],Tl=[];function Jf(n,e){var t=xr(n,Object.assign({},Dt,Kr(Xr(e)))),i,l,r,o=!1,s=!1,a=!1,f=!1,u,c,d,p=[],h=Vr(Le,t.interactiveDebounce),m,g=Qf++,_=null,y=Lf(t.plugins),E={isEnabled:!0,isVisible:!1,isDestroyed:!1,isMounted:!1,isShown:!1},b={id:g,reference:n,popper:xn(),popperInstance:_,props:t,state:E,plugins:y,clearDelayTimeouts:qn,setProps:jn,setContent:zn,show:nr,hide:ir,hideWithInteractivity:lr,enable:bn,disable:Wn,unmount:F,destroy:se};if(!t.render)return b;var A=t.render(b),w=A.popper,L=A.onUpdate;w.setAttribute("data-tippy-root",""),w.id="tippy-"+b.id,b.popper=w,n._tippy=b,w._tippy=b;var O=y.map(function(T){return T.fn(b)}),D=n.hasAttribute("aria-expanded");return G(),Ie(),ie(),le("onCreate",[b]),t.showOnCreate&&Ft(),w.addEventListener("mouseenter",function(){b.props.interactive&&b.state.isVisible&&b.clearDelayTimeouts()}),w.addEventListener("mouseleave",function(){b.props.interactive&&b.props.trigger.indexOf("mouseenter")>=0&&q().addEventListener("mousemove",h)}),b;function C(){var T=b.props.touch;return Array.isArray(T)?T:[T,0]}function R(){return C()[0]==="hold"}function W(){var T;return!!((T=b.props.render)!=null&&T.$$tippy)}function Z(){return m||n}function q(){var T=Z().parentNode;return T?Bf(T):document}function H(){return Cl(w)}function V(T){return b.state.isMounted&&!b.state.isVisible||Ot.isTouch||u&&u.type==="focus"?0:kl(b.props.delay,T?0:1,Dt.delay)}function ie(T){T===void 0&&(T=!1),w.style.pointerEvents=b.props.interactive&&!T?"":"none",w.style.zIndex=""+b.props.zIndex}function le(T,U,Q){if(Q===void 0&&(Q=!0),O.forEach(function(ee){ee[T]&&ee[T].apply(ee,U)}),Q){var x;(x=b.props)[T].apply(x,U)}}function Ne(){var T=b.props.aria;if(T.content){var U="aria-"+T.content,Q=w.id,x=En(b.props.triggerTarget||n);x.forEach(function(ee){var ye=ee.getAttribute(U);if(b.state.isVisible)ee.setAttribute(U,ye?ye+" "+Q:Q);else{var Ke=ye&&ye.replace(Q,"").trim();Ke?ee.setAttribute(U,Ke):ee.removeAttribute(U)}})}}function Ie(){if(!(D||!b.props.aria.expanded)){var T=En(b.props.triggerTarget||n);T.forEach(function(U){b.props.interactive?U.setAttribute("aria-expanded",b.state.isVisible&&U===Z()?"true":"false"):U.removeAttribute("aria-expanded")})}}function He(){q().removeEventListener("mousemove",h),Ii=Ii.filter(function(T){return T!==h})}function je(T){if(!(Ot.isTouch&&(a||T.type==="mousedown"))){var U=T.composedPath&&T.composedPath()[0]||T.target;if(!(b.props.interactive&&Qr(w,U))){if(En(b.props.triggerTarget||n).some(function(Q){return Qr(Q,U)})){if(Ot.isTouch||b.state.isVisible&&b.props.trigger.indexOf("click")>=0)return}else le("onClickOutside",[b,T]);b.props.hideOnClick===!0&&(b.clearDelayTimeouts(),b.hide(),s=!0,setTimeout(function(){s=!1}),b.state.isMounted||Y())}}}function me(){a=!0}function De(){a=!1}function We(){var T=q();T.addEventListener("mousedown",je,!0),T.addEventListener("touchend",je,fn),T.addEventListener("touchstart",De,fn),T.addEventListener("touchmove",me,fn)}function Y(){var T=q();T.removeEventListener("mousedown",je,!0),T.removeEventListener("touchend",je,fn),T.removeEventListener("touchstart",De,fn),T.removeEventListener("touchmove",me,fn)}function $(T,U){P(T,function(){!b.state.isVisible&&w.parentNode&&w.parentNode.contains(w)&&U()})}function fe(T,U){P(T,U)}function P(T,U){var Q=H().box;function x(ee){ee.target===Q&&(Dl(Q,"remove",x),U())}if(T===0)return U();Dl(Q,"remove",c),Dl(Q,"add",x),c=x}function M(T,U,Q){Q===void 0&&(Q=!1);var x=En(b.props.triggerTarget||n);x.forEach(function(ee){ee.addEventListener(T,U,Q),p.push({node:ee,eventType:T,handler:U,options:Q})})}function G(){R()&&(M("touchstart",de,{passive:!0}),M("touchend",qe,{passive:!0})),Tf(b.props.trigger).forEach(function(T){if(T!=="manual")switch(M(T,de),T){case"mouseenter":M("mouseleave",qe);break;case"focus":M(jf?"focusout":"blur",it);break;case"focusin":M("focusout",it);break}})}function J(){p.forEach(function(T){var U=T.node,Q=T.eventType,x=T.handler,ee=T.options;U.removeEventListener(Q,x,ee)}),p=[]}function de(T){var U,Q=!1;if(!(!b.state.isEnabled||oe(T)||s)){var x=((U=u)==null?void 0:U.type)==="focus";u=T,m=T.currentTarget,Ie(),!b.state.isVisible&&If(T)&&Ii.forEach(function(ee){return ee(T)}),T.type==="click"&&(b.props.trigger.indexOf("mouseenter")<0||o)&&b.props.hideOnClick!==!1&&b.state.isVisible?Q=!0:Ft(T),T.type==="click"&&(o=!Q),Q&&!x&&Qt(T)}}function Le(T){var U=T.target,Q=Z().contains(U)||w.contains(U);if(!(T.type==="mousemove"&&Q)){var x=lt().concat(w).map(function(ee){var ye,Ke=ee._tippy,_t=(ye=Ke.popperInstance)==null?void 0:ye.state;return _t?{popperRect:ee.getBoundingClientRect(),popperState:_t,props:t}:null}).filter(Boolean);Ff(x,T)&&(He(),Qt(T))}}function qe(T){var U=oe(T)||b.props.trigger.indexOf("click")>=0&&o;if(!U){if(b.props.interactive){b.hideWithInteractivity(T);return}Qt(T)}}function it(T){b.props.trigger.indexOf("focusin")<0&&T.target!==Z()||b.props.interactive&&T.relatedTarget&&w.contains(T.relatedTarget)||Qt(T)}function oe(T){return Ot.isTouch?R()!==T.type.indexOf("touch")>=0:!1}function Se(){Me();var T=b.props,U=T.popperOptions,Q=T.placement,x=T.offset,ee=T.getReferenceClientRect,ye=T.moveTransition,Ke=W()?Cl(w).arrow:null,_t=ee?{getBoundingClientRect:ee,contextElement:ee.contextElement||Z()}:n,nn={name:"$$tippy",enabled:!0,phase:"beforeWrite",requires:["computeStyles"],fn:function(fl){var Gn=fl.state;if(W()){var th=H(),rr=th.box;["placement","reference-hidden","escaped"].forEach(function(cl){cl==="placement"?rr.setAttribute("data-placement",Gn.placement):Gn.attributes.popper["data-popper-"+cl]?rr.setAttribute("data-"+cl,""):rr.removeAttribute("data-"+cl)}),Gn.attributes.popper={}}}},Rt=[{name:"offset",options:{offset:x}},{name:"preventOverflow",options:{padding:{top:2,bottom:2,left:5,right:5}}},{name:"flip",options:{padding:5}},{name:"computeStyles",options:{adaptive:!ye}},nn];W()&&Ke&&Rt.push({name:"arrow",options:{element:Ke,padding:3}}),Rt.push.apply(Rt,(U==null?void 0:U.modifiers)||[]),b.popperInstance=Df(_t,w,Object.assign({},U,{placement:Q,onFirstUpdate:d,modifiers:Rt}))}function Me(){b.popperInstance&&(b.popperInstance.destroy(),b.popperInstance=null)}function Ze(){var T=b.props.appendTo,U,Q=Z();b.props.interactive&&T===zr||T==="parent"?U=Q.parentNode:U=Gr(T,[Q]),U.contains(w)||U.appendChild(w),b.state.isMounted=!0,Se()}function lt(){return Oi(w.querySelectorAll("[data-tippy-root]"))}function Ft(T){b.clearDelayTimeouts(),T&&le("onTrigger",[b,T]),We();var U=V(!0),Q=C(),x=Q[0],ee=Q[1];Ot.isTouch&&x==="hold"&&ee&&(U=ee),U?i=setTimeout(function(){b.show()},U):b.show()}function Qt(T){if(b.clearDelayTimeouts(),le("onUntrigger",[b,T]),!b.state.isVisible){Y();return}if(!(b.props.trigger.indexOf("mouseenter")>=0&&b.props.trigger.indexOf("click")>=0&&["mouseleave","mousemove"].indexOf(T.type)>=0&&o)){var U=V(!1);U?l=setTimeout(function(){b.state.isVisible&&b.hide()},U):r=requestAnimationFrame(function(){b.hide()})}}function bn(){b.state.isEnabled=!0}function Wn(){b.hide(),b.state.isEnabled=!1}function qn(){clearTimeout(i),clearTimeout(l),cancelAnimationFrame(r)}function jn(T){if(!b.state.isDestroyed){le("onBeforeUpdate",[b,T]),J();var U=b.props,Q=xr(n,Object.assign({},U,Xr(T),{ignoreAttributes:!0}));b.props=Q,G(),U.interactiveDebounce!==Q.interactiveDebounce&&(He(),h=Vr(Le,Q.interactiveDebounce)),U.triggerTarget&&!Q.triggerTarget?En(U.triggerTarget).forEach(function(x){x.removeAttribute("aria-expanded")}):Q.triggerTarget&&n.removeAttribute("aria-expanded"),Ie(),ie(),L&&L(U,Q),b.popperInstance&&(Se(),lt().forEach(function(x){requestAnimationFrame(x._tippy.popperInstance.forceUpdate)})),le("onAfterUpdate",[b,T])}}function zn(T){b.setProps({content:T})}function nr(){var T=b.state.isVisible,U=b.state.isDestroyed,Q=!b.state.isEnabled,x=Ot.isTouch&&!b.props.touch,ee=kl(b.props.duration,0,Dt.duration);if(!(T||U||Q||x)&&!Z().hasAttribute("disabled")&&(le("onShow",[b],!1),b.props.onShow(b)!==!1)){if(b.state.isVisible=!0,W()&&(w.style.visibility="visible"),ie(),We(),b.state.isMounted||(w.style.transition="none"),W()){var ye=H(),Ke=ye.box,_t=ye.content;Sl([Ke,_t],0)}d=function(){var Rt;if(!(!b.state.isVisible||f)){if(f=!0,w.offsetHeight,w.style.transition=b.props.moveTransition,W()&&b.props.animation){var ln=H(),fl=ln.box,Gn=ln.content;Sl([fl,Gn],ee),Yr([fl,Gn],"visible")}Ne(),Ie(),Ur(Tl,b),(Rt=b.popperInstance)==null||Rt.forceUpdate(),le("onMount",[b]),b.props.animation&&W()&&fe(ee,function(){b.state.isShown=!0,le("onShown",[b])})}},Ze()}}function ir(){var T=!b.state.isVisible,U=b.state.isDestroyed,Q=!b.state.isEnabled,x=kl(b.props.duration,1,Dt.duration);if(!(T||U||Q)&&(le("onHide",[b],!1),b.props.onHide(b)!==!1)){if(b.state.isVisible=!1,b.state.isShown=!1,f=!1,o=!1,W()&&(w.style.visibility="hidden"),He(),Y(),ie(!0),W()){var ee=H(),ye=ee.box,Ke=ee.content;b.props.animation&&(Sl([ye,Ke],x),Yr([ye,Ke],"hidden"))}Ne(),Ie(),b.props.animation?W()&&$(x,b.unmount):b.unmount()}}function lr(T){q().addEventListener("mousemove",h),Ur(Ii,h),h(T)}function F(){b.state.isVisible&&b.hide(),b.state.isMounted&&(Me(),lt().forEach(function(T){T._tippy.unmount()}),w.parentNode&&w.parentNode.removeChild(w),Tl=Tl.filter(function(T){return T!==b}),b.state.isMounted=!1,le("onHidden",[b]))}function se(){b.state.isDestroyed||(b.clearDelayTimeouts(),b.unmount(),J(),delete n._tippy,b.state.isDestroyed=!0,le("onDestroy",[b]))}}function $n(n,e){e===void 0&&(e={});var t=Dt.plugins.concat(e.plugins||[]);Wf();var i=Object.assign({},e,{plugins:t}),l=Mf(n),r=l.reduce(function(o,s){var a=s&&Jf(s,i);return a&&o.push(a),o},[]);return Pi(n)?r[0]:r}$n.defaultProps=Dt,$n.setDefaultProps=Uf,$n.currentInput=Ot,Object.assign({},Er,{effect:function(e){var t=e.state,i={popper:{position:t.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};Object.assign(t.elements.popper.style,i.popper),t.styles=i,t.elements.arrow&&Object.assign(t.elements.arrow.style,i.arrow)}}),$n.setDefaultProps({render:to});function Ae(){}const no=n=>n;function ei(n,e){for(const t in e)n[t]=e[t];return n}function io(n){return n()}function lo(){return Object.create(null)}function rt(n){n.forEach(io)}function Pt(n){return typeof n=="function"}function ke(n,e){return n!=n?e==e:n!==e||n&&typeof n=="object"||typeof n=="function"}let Ni;function Mi(n,e){return n===e?!0:(Ni||(Ni=document.createElement("a")),Ni.href=e,n===Ni.href)}function Zf(n){return Object.keys(n).length===0}function Kf(n,...e){if(n==null){for(const i of e)i(void 0);return Ae}const t=n.subscribe(...e);return t.unsubscribe?()=>t.unsubscribe():t}function xf(n){let e;return Kf(n,t=>e=t)(),e}function ti(n,e,t,i){if(n){const l=ro(n,e,t,i);return n[0](l)}}function ro(n,e,t,i){return n[1]&&i?ei(t.ctx.slice(),n[1](i(e))):t.ctx}function ni(n,e,t,i){if(n[2]&&i){const l=n[2](i(t));if(e.dirty===void 0)return l;if(typeof l=="object"){const r=[],o=Math.max(e.dirty.length,l.length);for(let s=0;s<o;s+=1)r[s]=e.dirty[s]|l[s];return r}return e.dirty|l}return e.dirty}function ii(n,e,t,i,l,r){if(l){const o=ro(e,t,i,r);n.p(o,l)}}function li(n){if(n.ctx.length>32){const e=[],t=n.ctx.length/32;for(let i=0;i<t;i++)e[i]=-1;return e}return-1}function pt(n){return n??""}const oo=typeof window<"u";let $f=oo?()=>window.performance.now():()=>Date.now(),Ll=oo?n=>requestAnimationFrame(n):Ae;const Sn=new Set;function ao(n){Sn.forEach(e=>{e.c(n)||(Sn.delete(e),e.f())}),Sn.size!==0&&Ll(ao)}function ec(n){let e;return Sn.size===0&&Ll(ao),{promise:new Promise(t=>{Sn.add(e={c:n,f:t})}),abort(){Sn.delete(e)}}}function k(n,e){n.appendChild(e)}function so(n){if(!n)return document;const e=n.getRootNode?n.getRootNode():n.ownerDocument;return e&&e.host?e:n.ownerDocument}function tc(n){const e=S("style");return e.textContent="/* empty */",nc(so(n),e),e.sheet}function nc(n,e){return k(n.head||n,e),e.sheet}function N(n,e,t){n.insertBefore(e,t||null)}function I(n){n.parentNode&&n.parentNode.removeChild(n)}function et(n,e){for(let t=0;t<n.length;t+=1)n[t]&&n[t].d(e)}function S(n){return document.createElement(n)}function cn(n){return document.createElementNS("http://www.w3.org/2000/svg",n)}function he(n){return document.createTextNode(n)}function z(){return he(" ")}function Ge(){return he("")}function ne(n,e,t,i){return n.addEventListener(e,t,i),()=>n.removeEventListener(e,t,i)}function Zt(n){return function(e){return e.preventDefault(),n.call(this,e)}}function Ol(n){return function(e){return e.stopPropagation(),n.call(this,e)}}function ic(n){return function(e){e.target===this&&n.call(this,e)}}function v(n,e,t){t==null?n.removeAttribute(e):n.getAttribute(e)!==t&&n.setAttribute(e,t)}const lc=["width","height"];function Kt(n,e){const t=Object.getOwnPropertyDescriptors(n.__proto__);for(const i in e)e[i]==null?n.removeAttribute(i):i==="style"?n.style.cssText=e[i]:i==="__value"?n.value=n[i]=e[i]:t[i]&&t[i].set&&lc.indexOf(i)===-1?n[i]=e[i]:v(n,i,e[i])}function rc(n){return Array.from(n.childNodes)}function Be(n,e){e=""+e,n.data!==e&&(n.data=e)}function uo(n,e){n.value=e??""}function Fe(n,e,t,i){t==null?n.style.removeProperty(e):n.style.setProperty(e,t,"")}function fo(n,e,t){for(let i=0;i<n.options.length;i+=1){const l=n.options[i];if(l.__value===e){l.selected=!0;return}}(!t||e!==void 0)&&(n.selectedIndex=-1)}function oc(n){const e=n.querySelector(":checked");return e&&e.__value}function ge(n,e,t){n.classList.toggle(e,!!t)}function co(n,e,{bubbles:t=!1,cancelable:i=!1}={}){return new CustomEvent(n,{detail:e,bubbles:t,cancelable:i})}class Wt{constructor(e=!1){rn(this,"is_svg",!1);rn(this,"e");rn(this,"n");rn(this,"t");rn(this,"a");this.is_svg=e,this.e=this.n=null}c(e){this.h(e)}m(e,t,i=null){this.e||(this.is_svg?this.e=cn(t.nodeName):this.e=S(t.nodeType===11?"TEMPLATE":t.nodeName),this.t=t.tagName!=="TEMPLATE"?t:t.content,this.c(e)),this.i(i)}h(e){this.e.innerHTML=e,this.n=Array.from(this.e.nodeName==="TEMPLATE"?this.e.content.childNodes:this.e.childNodes)}i(e){for(let t=0;t<this.n.length;t+=1)N(this.t,this.n[t],e)}p(e){this.d(),this.h(e),this.i(this.a)}d(){this.n.forEach(I)}}const Bi=new Map;let Fi=0;function ac(n){let e=5381,t=n.length;for(;t--;)e=(e<<5)-e^n.charCodeAt(t);return e>>>0}function sc(n,e){const t={stylesheet:tc(e),rules:{}};return Bi.set(n,t),t}function po(n,e,t,i,l,r,o,s=0){const a=16.666/i;let f=`{
`;for(let g=0;g<=1;g+=a){const _=e+(t-e)*r(g);f+=g*100+`%{${o(_,1-_)}}
`}const u=f+`100% {${o(t,1-t)}}
}`,c=`__svelte_${ac(u)}_${s}`,d=so(n),{stylesheet:p,rules:h}=Bi.get(d)||sc(d,n);h[c]||(h[c]=!0,p.insertRule(`@keyframes ${c} ${u}`,p.cssRules.length));const m=n.style.animation||"";return n.style.animation=`${m?`${m}, `:""}${c} ${i}ms linear ${l}ms 1 both`,Fi+=1,c}function uc(n,e){const t=(n.style.animation||"").split(", "),i=t.filter(e?r=>r.indexOf(e)<0:r=>r.indexOf("__svelte")===-1),l=t.length-i.length;l&&(n.style.animation=i.join(", "),Fi-=l,Fi||fc())}function fc(){Ll(()=>{Fi||(Bi.forEach(n=>{const{ownerNode:e}=n.stylesheet;e&&I(e)}),Bi.clear())})}let ri;function oi(n){ri=n}function Ri(){if(!ri)throw new Error("Function called outside component initialization");return ri}function st(n){Ri().$$.on_mount.push(n)}function cc(n){Ri().$$.after_update.push(n)}function dn(n){Ri().$$.on_destroy.push(n)}function pn(){const n=Ri();return(e,t,{cancelable:i=!1}={})=>{const l=n.$$.callbacks[e];if(l){const r=co(e,t,{cancelable:i});return l.slice().forEach(o=>{o.call(n,r)}),!r.defaultPrevented}return!0}}const Dn=[],ze=[];let An=[];const Pl=[],mo=Promise.resolve();let Il=!1;function ho(){Il||(Il=!0,mo.then(go))}function mn(){return ho(),mo}function Cn(n){An.push(n)}function Tn(n){Pl.push(n)}const Nl=new Set;let Ln=0;function go(){if(Ln!==0)return;const n=ri;do{try{for(;Ln<Dn.length;){const e=Dn[Ln];Ln++,oi(e),dc(e.$$)}}catch(e){throw Dn.length=0,Ln=0,e}for(oi(null),Dn.length=0,Ln=0;ze.length;)ze.pop()();for(let e=0;e<An.length;e+=1){const t=An[e];Nl.has(t)||(Nl.add(t),t())}An.length=0}while(Dn.length);for(;Pl.length;)Pl.pop()();Il=!1,Nl.clear(),oi(n)}function dc(n){if(n.fragment!==null){n.update(),rt(n.before_update);const e=n.dirty;n.dirty=[-1],n.fragment&&n.fragment.p(n.ctx,e),n.after_update.forEach(Cn)}}function pc(n){const e=[],t=[];An.forEach(i=>n.indexOf(i)===-1?e.push(i):t.push(i)),t.forEach(i=>i()),An=e}let ai;function mc(){return ai||(ai=Promise.resolve(),ai.then(()=>{ai=null})),ai}function Ml(n,e,t){n.dispatchEvent(co(`${e?"intro":"outro"}${t}`))}const Hi=new Set;let qt;function Ve(){qt={r:0,c:[],p:qt}}function Ue(){qt.r||rt(qt.c),qt=qt.p}function j(n,e){n&&n.i&&(Hi.delete(n),n.i(e))}function X(n,e,t,i){if(n&&n.o){if(Hi.has(n))return;Hi.add(n),qt.c.push(()=>{Hi.delete(n),i&&(t&&n.d(1),i())}),n.o(e)}else i&&i()}const hc={duration:0};function vo(n,e,t,i){let r=e(n,t,{direction:"both"}),o=i?0:1,s=null,a=null,f=null,u;function c(){f&&uc(n,f)}function d(h,m){const g=h.b-o;return m*=Math.abs(g),{a:o,b:h.b,d:g,duration:m,start:h.start,end:h.start+m,group:h.group}}function p(h){const{delay:m=0,duration:g=300,easing:_=no,tick:y=Ae,css:E}=r||hc,b={start:$f()+m,b:h};h||(b.group=qt,qt.r+=1),"inert"in n&&(h?u!==void 0&&(n.inert=u):(u=n.inert,n.inert=!0)),s||a?a=b:(E&&(c(),f=po(n,o,h,g,m,_,E)),h&&y(0,1),s=d(b,g),Cn(()=>Ml(n,h,"start")),ec(A=>{if(a&&A>a.start&&(s=d(a,g),a=null,Ml(n,s.b,"start"),E&&(c(),f=po(n,o,s.b,s.duration,0,_,r.css))),s){if(A>=s.end)y(o=s.b,1-o),Ml(n,s.b,"end"),a||(s.b?c():--s.group.r||rt(s.group.c)),s=null;else if(A>=s.start){const w=A-s.start;o=s.a+s.d*_(w/s.duration),y(o,1-o)}}return!!(s||a)}))}return{run(h){Pt(r)?mc().then(()=>{r=r({direction:h?"in":"out"}),p(h)}):p(h)},end(){c(),s=a=null}}}function ue(n){return(n==null?void 0:n.length)!==void 0?n:Array.from(n)}function jt(n,e){n.d(1),e.delete(n.key)}function zt(n,e,t,i,l,r,o,s,a,f,u,c){let d=n.length,p=r.length,h=d;const m={};for(;h--;)m[n[h].key]=h;const g=[],_=new Map,y=new Map,E=[];for(h=p;h--;){const L=c(l,r,h),O=t(L);let D=o.get(O);D?E.push(()=>D.p(L,e)):(D=f(O,L),D.c()),_.set(O,g[h]=D),O in m&&y.set(O,Math.abs(h-m[O]))}const b=new Set,A=new Set;function w(L){j(L,1),L.m(s,u),o.set(L.key,L),u=L.first,p--}for(;d&&p;){const L=g[p-1],O=n[d-1],D=L.key,C=O.key;L===O?(u=L.first,d--,p--):_.has(C)?!o.has(D)||b.has(D)?w(L):A.has(C)?d--:y.get(D)>y.get(C)?(A.add(D),w(L)):(b.add(C),d--):(a(O,o),d--)}for(;d--;){const L=n[d];_.has(L.key)||a(L,o)}for(;p;)w(g[p-1]);return rt(E),g}function Wi(n,e){const t={},i={},l={$$scope:1};let r=n.length;for(;r--;){const o=n[r],s=e[r];if(s){for(const a in o)a in s||(i[a]=1);for(const a in s)l[a]||(t[a]=s[a],l[a]=1);n[r]=s}else for(const a in o)l[a]=1}for(const o in i)o in t||(t[o]=void 0);return t}function On(n,e,t){const i=n.$$.props[e];i!==void 0&&(n.$$.bound[i]=t,t(n.$$.ctx[i]))}function _e(n){n&&n.c()}function ve(n,e,t){const{fragment:i,after_update:l}=n.$$;i&&i.m(e,t),Cn(()=>{const r=n.$$.on_mount.map(io).filter(Pt);n.$$.on_destroy?n.$$.on_destroy.push(...r):rt(r),n.$$.on_mount=[]}),l.forEach(Cn)}function be(n,e){const t=n.$$;t.fragment!==null&&(pc(t.after_update),rt(t.on_destroy),t.fragment&&t.fragment.d(e),t.on_destroy=t.fragment=null,t.ctx=[])}function gc(n,e){n.$$.dirty[0]===-1&&(Dn.push(n),ho(),n.$$.dirty.fill(0)),n.$$.dirty[e/31|0]|=1<<e%31}function Ce(n,e,t,i,l,r,o=null,s=[-1]){const a=ri;oi(n);const f=n.$$={fragment:null,ctx:[],props:r,update:Ae,not_equal:l,bound:lo(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(a?a.$$.context:[])),callbacks:lo(),dirty:s,skip_bound:!1,root:e.target||a.$$.root};o&&o(f.root);let u=!1;if(f.ctx=t?t(n,e.props||{},(c,d,...p)=>{const h=p.length?p[0]:d;return f.ctx&&l(f.ctx[c],f.ctx[c]=h)&&(!f.skip_bound&&f.bound[c]&&f.bound[c](h),u&&gc(n,c)),d}):[],f.update(),u=!0,rt(f.before_update),f.fragment=i?i(f.ctx):!1,e.target){if(e.hydrate){const c=rc(e.target);f.fragment&&f.fragment.l(c),c.forEach(I)}else f.fragment&&f.fragment.c();e.intro&&j(n.$$.fragment),ve(n,e.target,e.anchor),go()}oi(a)}class Te{constructor(){rn(this,"$$");rn(this,"$$set")}$destroy(){be(this,1),this.$destroy=Ae}$on(e,t){if(!Pt(t))return Ae;const i=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return i.push(t),()=>{const l=i.indexOf(t);l!==-1&&i.splice(l,1)}}$set(e){this.$$set&&!Zf(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}const vc="4",Pn=[];function It(n,e=Ae){let t;const i=new Set;function l(s){if(ke(n,s)&&(n=s,t)){const a=!Pn.length;for(const f of i)f[1](),Pn.push(f,n);if(a){for(let f=0;f<Pn.length;f+=2)Pn[f][0](Pn[f+1]);Pn.length=0}}}function r(s){l(s(n))}function o(s,a=Ae){const f=[s,a];return i.add(f),i.size===1&&(t=e(l,r)||Ae),s(n),()=>{i.delete(f),i.size===0&&t&&(t(),t=null)}}return{set:l,update:r,subscribe:o}}const qi=It({}),B={getData(){return xf(qi)},setTranslations(n){qi.set(n)},has(n,e,t){let i=!1;return qi.subscribe(l=>{if(t in l&&e in l[t]&&n in l[t][e]){i=!0;return}})(),i},get(n,e,t){let i=t;return qi.subscribe(l=>{if(n in l&&e in l[n]&&t in l[n][e]){i=l[n][e][t];return}if(n in l&&e in l[n]&&t in l[n][e]){i=l[n][e][t];return}if(n=="Global"){i=t;return}i=null})(),i},translate(n,e=null,t=null){t=t||"Global",e=e||"labels";let i=B.get(t,e,n);return i===null&&t!="Global"&&(i=B.get("Global",e,n)),i},translateOption(n,e,t=null){let i=B.translate(e,"options",t);return i===null?"":typeof i=="object"?i[n]:n}},bo=It({}),ut={set(n){bo.set(n)},get(){let n=null;return bo.subscribe(e=>{e&&(n=e)})(),n}},Bl=It(),Re={setNotifier(n){Bl.set(n)},notify(n,e=null,t=2e3){Bl.subscribe(i=>{i&&i.notify(n,e,2e3)})()},confirm(n=null,e=null,t){Bl.subscribe(i=>{if(i){let l=null,r=null,o=null;typeof n=="string"||n instanceof String?(r=n,o=B.translate("Yes")):(n=n||{},r=n.message,o=n.confirmText,l=n.confirmStyle||null),i.confirm(r,{confirmText:o,cancelText:B.translate("Cancel"),confirmStyle:l},e,t)}})()}},ji=It(),Gt={setLayoutManager(n){ji.set(n)},resetToDefault(n,e,t,i,l){let r=null;return ji.subscribe(o=>{o&&(r=o.resetToDefault(n,e,t,i,l))})(),r},get:function(n,e,t,i,l,r){let o=null;return ji.subscribe(s=>{s&&(o=s.get(n,e,t,i,l,r))})(),o},set:function(n,e,t,i,l,r){let o=null;return ji.subscribe(s=>{s&&(o=s.set(n,e,t,i,l,r))})(),o}},_o=It(),re={setMetadata(n){_o.set(n)},get(n){let e=null;return _o.subscribe(t=>{t&&(e=t.get(n))})(),e}},wo=It(),Fl={setModelFactory(n){wo.set(n)},create(n,e){wo.subscribe(t=>{t&&t.create(n,e)})()}},yo=It(),ko={setConfig(n){yo.set(n)},get(n){let e=null;return yo.subscribe(t=>{t&&(e=t.get(n))})(),e}},si=It(),Ee={setStorage(n){si.set(n)},get(n,e){let t=null;return si.subscribe(i=>{i&&(t=i.get(n,e))})(),t},has(n,e){let t=null;return si.subscribe(i=>{i&&(t=i.has(n,e))})(),t},clear(n,e){si.subscribe(t=>{t&&t.clear(n,e)})()},set(n,e,t){si.subscribe(i=>{i&&i.set(n,e,t)})()}},xt=It(),Nt={setAcl(n){xt.set(n)},getUser(){let n=null;return xt.subscribe(e=>{e&&(n=e.getUser())})(),n},checkScope(n,e,t,i){let l=null;return xt.subscribe(r=>{r&&(l=r.checkScope(n,e,t,i))})(),l},checkModel(n,e,t,i){let l=null;return xt.subscribe(r=>{r&&(l=r.checkModel(n,e,t,i))})(),l},checkModelDelete(n,e,t){let i=null;return xt.subscribe(l=>{l&&(i=l.checkModelDelete(n,e,t))})(),i},checkIsOwner(n){let e=null;return xt.subscribe(t=>{t&&(e=t.checkIsOwner(n))})(),e},checkInTeam(n){let e=null;return xt.subscribe(t=>{t&&(e=t.checkInTeam(n))})(),e},check(n,e,t=null){let i=null;return xt.subscribe(l=>{l&&(i=l.check(n,e,t))})(),i}},Eo=It(),So={setCollectionFactory(n){Eo.set(n)},create(n,e){Eo.subscribe(t=>{t&&t.create(n,e)})()}};typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(vc);function Do(n){let e,t,i,l,r,o,s,a,f,u,c,d,p,h,m;function g(E,b){return E[2]?_c:bc}let _=g(n),y=_(n);return{c(){e=S("div"),t=S("div"),i=S("div"),l=S("span"),l.textContent=`${B.translate("jobManager")}`,r=z(),o=S("span"),s=S("a"),s.innerHTML='<span aria-hidden="true">×</span>',a=z(),y.c(),f=z(),u=S("a"),u.textContent=`${B.translate("View List")}`,c=z(),d=S("div"),p=S("div"),p.textContent=`${B.translate("Loading...")}`,v(l,"class","panel-heading-title"),v(s,"href","/"),v(s,"class","close svelte-1p6ppx8"),v(u,"href","#Job"),v(u,"title",B.translate("View List")),v(u,"class","qp-view-list svelte-1p6ppx8"),v(o,"class","pull-right"),v(i,"class","panel-heading clearfix"),v(p,"class","list-container"),v(d,"class","panel-body"),v(t,"class","panel panel-default"),v(e,"class","queue-panel-container")},m(E,b){N(E,e,b),k(e,t),k(t,i),k(i,l),k(i,r),k(i,o),k(o,s),k(o,a),y.m(o,null),k(o,f),k(o,u),k(t,c),k(t,d),k(d,p),n[9](e),h||(m=ne(s,"click",n[6]),h=!0)},p(E,b){_===(_=g(E))&&y?y.p(E,b):(y.d(1),y=_(E),y&&(y.c(),y.m(o,f)))},d(E){E&&I(e),y.d(),n[9](null),h=!1,m()}}}function bc(n){let e,t,i;return{c(){e=S("a"),e.textContent=`${B.translate("Pause")}`,v(e,"href","/"),v(e,"title",B.translate("Pause")),v(e,"class","qm-button")},m(l,r){N(l,e,r),t||(i=ne(e,"click",n[8]),t=!0)},p:Ae,d(l){l&&I(e),t=!1,i()}}}function _c(n){let e,t,i;return{c(){e=S("a"),e.textContent=`${B.translate("Start")}`,v(e,"href","/"),v(e,"title",B.translate("Start")),v(e,"class","qm-button")},m(l,r){N(l,e,r),t||(i=ne(e,"click",n[7]),t=!0)},p:Ae,d(l){l&&I(e),t=!1,i()}}}function wc(n){let e,t=n[0]&&Do(n);return{c(){t&&t.c(),e=Ge()},m(i,l){t&&t.m(i,l),N(i,e,l)},p(i,[l]){i[0]?t?t.p(i,l):(t=Do(i),t.c(),t.m(e.parentNode,e)):t&&(t.d(1),t=null)},i:Ae,o:Ae,d(i){i&&I(e),t&&t.d(i)}}}function yc(n,e,t){let{isOpen:i=!1}=e,{close:l}=e,{icon:r}=e,o=!1;window.addEventListener("publicDataFetched",h=>{t(2,o=!!h.detail.qmPaused)});let s;function a(h){s&&!s.contains(h.target)&&r&&!r.contains(h.target)&&i===!0&&l()}st(()=>{document.addEventListener("click",a)}),dn(()=>{document.removeEventListener("click",a)});async function f(h){let m=ut.get();if(m)try{const g=await fetch("/api/v1/App/action/QueueManagerUpdate",{method:"POST",headers:{"Content-Type":"application/json","Authorization-Token":btoa(m.user.userName+":"+m.token)},body:JSON.stringify({pause:h})});if(!g.ok)throw new Error("Network response was not ok");await g.json(),Re.notify("Done","success")}catch(g){console.error("Error:",g)}}const u=h=>{h.preventDefault(),l()},c=h=>{h.preventDefault(),f(!1)},d=h=>{h.preventDefault(),f(!0)};function p(h){ze[h?"unshift":"push"](()=>{s=h,t(3,s)})}return n.$$set=h=>{"isOpen"in h&&t(0,i=h.isOpen),"close"in h&&t(1,l=h.close),"icon"in h&&t(5,r=h.icon)},[i,l,o,s,f,r,u,c,d,p]}class kc extends Te{constructor(e){super(),Ce(this,e,yc,wc,ke,{isOpen:0,close:1,icon:5})}}function Ao(n){let e;return{c(){e=S("span"),v(e,"class","fas fa-pause-circle pause-icon")},m(t,i){N(t,e,i)},d(t){t&&I(e)}}}function Ec(n){let e,t,i,l,r,o,s,a,f,u=n[2]&&Ao();return o=new kc({props:{icon:n[0],isOpen:n[1],close:n[4]}}),{c(){e=S("a"),t=cn("svg"),i=cn("use"),l=z(),u&&u.c(),r=z(),_e(o.$$.fragment),v(i,"href","client/img/icons/icons.svg#tasks"),v(t,"class","icon"),v(e,"href","/"),v(e,"class","notifications-button"),v(e,"title",B.translate("jobManager"))},m(c,d){N(c,e,d),k(e,t),k(t,i),k(e,l),u&&u.m(e,null),n[6](e),N(c,r,d),ve(o,c,d),s=!0,a||(f=ne(e,"click",n[7]),a=!0)},p(c,[d]){c[2]?u||(u=Ao(),u.c(),u.m(e,null)):u&&(u.d(1),u=null);const p={};d&1&&(p.icon=c[0]),d&2&&(p.isOpen=c[1]),o.$set(p)},i(c){s||(j(o.$$.fragment,c),s=!0)},o(c){X(o.$$.fragment,c),s=!1},d(c){c&&(I(e),I(r)),u&&u.d(),n[6](null),be(o,c),a=!1,f()}}}function Sc(n,e,t){let{renderTable:i=()=>{}}=e,l,r=!1,o=!1;window.addEventListener("publicDataFetched",c=>{t(2,o=!!c.detail.qmPaused)});function s(){r||(t(1,r=!0),i())}function a(){t(1,r=!1),window.dispatchEvent(new Event("jobManagerPanelClosed"))}function f(c){ze[c?"unshift":"push"](()=>{l=c,t(0,l)})}const u=c=>{c.preventDefault(),s()};return n.$$set=c=>{"renderTable"in c&&t(5,i=c.renderTable)},[l,r,o,s,a,i,f,u]}class Dc extends Te{constructor(e){super(),Ce(this,e,Sc,Ec,ke,{renderTable:5})}}function Ac(n){let e,t=`${n[0]}px`,i=`${n[0]}px`,l=`${n[1]}px`;return{c(){e=S("div"),v(e,"class","loading-icon spinner svelte-yw8t7l"),Fe(e,"width",t),Fe(e,"height",i),Fe(e,"border-width",l)},m(r,o){N(r,e,o)},p(r,[o]){o&1&&t!==(t=`${r[0]}px`)&&Fe(e,"width",t),o&1&&i!==(i=`${r[0]}px`)&&Fe(e,"height",i),o&2&&l!==(l=`${r[1]}px`)&&Fe(e,"border-width",l)},i:Ae,o:Ae,d(r){r&&I(e)}}}function Cc(n,e,t){let{size:i=40}=e,{thickness:l=4}=e;return n.$$set=r=>{"size"in r&&t(0,i=r.size),"thickness"in r&&t(1,l=r.thickness)},[i,l]}class Tc extends Te{constructor(e){super(),Ce(this,e,Cc,Ac,ke,{size:0,thickness:1})}}function Co(n){let e,t;return{c(){e=S("img"),Mi(e.src,t=n[1])||v(e,"src",t),v(e,"class","logo"),v(e,"alt",n[0])},m(i,l){N(i,e,l)},p(i,l){l&2&&!Mi(e.src,t=i[1])&&v(e,"src",t),l&1&&v(e,"alt",i[0])},d(i){i&&I(e)}}}function To(n){let e,t,i;return{c(){e=S("a"),t=S("i"),i=he("Recovery Instructions"),v(t,"class","fa fa-history svelte-1qmezxs"),v(e,"href",n[2]),v(e,"target","_blank"),v(e,"class","btn btn-default svelte-1qmezxs"),v(e,"role","button"),Fe(e,"float","right")},m(l,r){N(l,e,r),k(e,t),k(e,i)},p(l,r){r&4&&v(e,"href",l[2])},d(l){l&&I(e)}}}function Lo(n){let e,t,i,l,r,o;return{c(){e=S("hr"),t=z(),i=S("pre"),l=he(n[3]),v(i,"class","logs-container svelte-1qmezxs")},m(s,a){N(s,e,a),N(s,t,a),N(s,i,a),k(i,l),n[11](i),r||(o=ne(i,"scroll",n[8]),r=!0)},p(s,a){a&8&&Be(l,s[3])},d(s){s&&(I(e),I(t),I(i)),n[11](null),r=!1,o()}}}function Lc(n){let e,t,i,l,r,o,s,a,f,u,c,d,p,h,m,g,_,y,E=n[4]?"Hide":"Show",b,A,w,L,O,D,C,R,W=n[1]&&Co(n);u=new Tc({props:{size:"40",thickness:"5"}});let Z=n[2]&&To(n),q=n[4]&&n[3]&&Lo(n);return{c(){e=S("div"),t=S("div"),i=S("div"),W&&W.c(),l=z(),r=S("div"),o=S("div"),s=S("h3"),s.textContent="System is updating...",a=z(),f=S("section"),_e(u.$$.fragment),c=z(),d=S("h5"),p=he(n[5]),h=z(),m=S("section"),g=S("div"),_=S("button"),y=S("i"),b=he(E),A=he(" logs"),L=z(),Z&&Z.c(),O=z(),q&&q.c(),v(i,"class","logo-container"),v(t,"class","panel-heading"),v(d,"class","svelte-1qmezxs"),v(f,"class","progress-section svelte-1qmezxs"),v(y,"class","fa fa-list svelte-1qmezxs"),v(_,"class","btn btn-default svelte-1qmezxs"),_.disabled=w=!n[3],v(g,"class","buttons"),v(m,"class","logs-section"),v(o,"class","form-group"),v(r,"class","panel-body"),v(e,"id","login"),v(e,"class","panel panel-default panel-updating")},m(H,V){N(H,e,V),k(e,t),k(t,i),W&&W.m(i,null),k(e,l),k(e,r),k(r,o),k(o,s),k(o,a),k(o,f),ve(u,f,null),k(f,c),k(f,d),k(d,p),k(o,h),k(o,m),k(m,g),k(g,_),k(_,y),k(_,b),k(_,A),k(g,L),Z&&Z.m(g,null),k(m,O),q&&q.m(m,null),D=!0,C||(R=ne(_,"click",n[7]),C=!0)},p(H,[V]){H[1]?W?W.p(H,V):(W=Co(H),W.c(),W.m(i,null)):W&&(W.d(1),W=null),(!D||V&32)&&Be(p,H[5]),(!D||V&16)&&E!==(E=H[4]?"Hide":"Show")&&Be(b,E),(!D||V&8&&w!==(w=!H[3]))&&(_.disabled=w),H[2]?Z?Z.p(H,V):(Z=To(H),Z.c(),Z.m(g,null)):Z&&(Z.d(1),Z=null),H[4]&&H[3]?q?q.p(H,V):(q=Lo(H),q.c(),q.m(m,null)):q&&(q.d(1),q=null)},i(H){D||(j(u.$$.fragment,H),D=!0)},o(H){X(u.$$.fragment,H),D=!1},d(H){H&&I(e),W&&W.d(),be(u),Z&&Z.d(),q&&q.d(),C=!1,R()}}}function Oc(n){return n.replace(/^\d{2,4}.\d{2}.\d{2,4} \d{2}:\d{2}:\d{2}/g,"").replace(/^[\-\|\s]+/,"")}function Pc(n,e,t){let{applicationName:i="AtroCore"}=e,{logoPath:l=null}=e,{logFilePath:r}=e,{restoreLink:o=null}=e,s=!1,a=!1,f=0,u=!0,c="",d,p;cc(()=>{p&&u&&p.scrollTo(0,p.scrollHeight)});function h(){t(4,s=!s),s||(u=!0)}function m(_){const y=_.currentTarget;u=y.scrollHeight-y.scrollTop===y.clientHeight}setInterval(async()=>{try{const _=await fetch(r,{cache:"no-store"});f+=1,_.ok?(t(3,c=(await _.text()).trim()),c.search("composer")>=0&&t(10,a=!0),f>65&&!a&&t(3,c="Something wrong. Please, reboot the server.")):a?setTimeout(()=>{location.reload()},2e3):f>65&&t(3,c="Something wrong. Please, reboot the server.")}catch(_){console.error("Error: ",_)}},1e3);function g(_){ze[_?"unshift":"push"](()=>{p=_,t(6,p)})}return n.$$set=_=>{"applicationName"in _&&t(0,i=_.applicationName),"logoPath"in _&&t(1,l=_.logoPath),"logFilePath"in _&&t(9,r=_.logFilePath),"restoreLink"in _&&t(2,o=_.restoreLink)},n.$$.update=()=>{if(n.$$.dirty&1032)if(c){const _=c.trim().split(`
`);t(5,d=Oc(_.pop()))}else a?t(5,d=""):t(5,d="Starting...")},[i,l,o,c,s,d,p,h,m,r,a,g]}class Ic extends Te{constructor(e){super(),Ce(this,e,Pc,Lc,ke,{applicationName:0,logoPath:1,logFilePath:9,restoreLink:2})}}function Oo(n,e,t){const i=n.slice();return i[20]=e[t],i}function Po(n){let e,t=n[20].label+"",i,l,r,o,s,a;function f(){return n[12](n[20])}return{c(){e=S("button"),i=he(t),l=z(),v(e,"data-action",r=n[20].name),e.disabled=n[1],v(e,"type","button"),v(e,"class",o=`btn action btn-${n[20].style??"default"}`)},m(u,c){N(u,e,c),k(e,i),k(e,l),s||(a=ne(e,"click",f),s=!0)},p(u,c){n=u,c&1&&t!==(t=n[20].label+"")&&Be(i,t),c&1&&r!==(r=n[20].name)&&v(e,"data-action",r),c&2&&(e.disabled=n[1]),c&1&&o!==(o=`btn action btn-${n[20].style??"default"}`)&&v(e,"class",o)},d(u){u&&I(e),s=!1,a()}}}function Nc(n){let e,t,i,l=ue(n[0]),r=[];for(let a=0;a<l.length;a+=1)r[a]=Po(Oo(n,l,a));const o=n[11].default,s=ti(o,n,n[10],null);return{c(){e=S("div");for(let a=0;a<r.length;a+=1)r[a].c();t=z(),s&&s.c(),v(e,"class","button-container"),Fe(e,"padding-top","10px")},m(a,f){N(a,e,f);for(let u=0;u<r.length;u+=1)r[u]&&r[u].m(e,null);n[13](e),N(a,t,f),s&&s.m(a,f),i=!0},p(a,[f]){if(f&11){l=ue(a[0]);let u;for(u=0;u<l.length;u+=1){const c=Oo(a,l,u);r[u]?r[u].p(c,f):(r[u]=Po(c),r[u].c(),r[u].m(e,null))}for(;u<r.length;u+=1)r[u].d(1);r.length=l.length}s&&s.p&&(!i||f&1024)&&ii(s,o,a,a[10],i?ni(o,a[10],f,null):li(a[10]),null)},i(a){i||(j(s,a),i=!0)},o(a){X(s,a),i=!1},d(a){a&&(I(e),I(t)),et(r,a),n[13](null),s&&s.d(a)}}}function Mc(n,e,t){let{$$slots:i={},$$scope:l}=e;const r=pn();let{params:o}=e,{fetch:s}=e,a,{loadLayout:f=w=>{Gt.get(scope,type,layoutProfileId,w,!1)}}=e,{validate:u=()=>!0}=e,c=!1,d=[],p;o.layoutProfiles,st(async()=>{var L;await h(),await mn(),r("ready");const w=document.querySelector("#layout-buttons");p&&w&&(o.inModal||o.replaceButtons)&&((L=w.closest(".modal-body"))==null||L.classList.add("modal-layout-manager"),w.appendChild(p))});async function h(){return Re.notify("Loading..."),new Promise((w,L)=>{f(O=>{t(9,a=O),Re.notify(!1),w(),o.afterRender&&o.afterRender()})})}function m(){t(1,c=!0);const w=s();if(!u(w)){t(1,c=!1);return}if(Re.notify("Saving..."),o.inModal&&!o.getActiveLayoutProfileId()){g(!0);return}Gt.set(o.scope,o.type,o.relatedScope,o.layoutProfileId,w,()=>{Re.notify("Saved","success",2e3),g(!1),t(1,c=!1),o.inModal||h()})}function g(w){o.onUpdate&&o.onUpdate(w)}function _(){o.inModal||h()}function y(){Re.confirm("Are you sure you want to reset this layout?",()=>{var w;Gt.resetToDefault(o.scope,o.type,o.relatedScope,(w=a.storedProfile)==null?void 0:w.id,()=>{g(!0),_()})})}function E(w){switch(w.name){case"save":m();break;case"cancel":_();break;case"reset":y();break;case"fullEdit":window.open(`#Admin/layouts/scope=${o.scope}&type=${o.type}${o.relatedScope?"&relatedScope="+o.relatedScope:""}${o.layoutProfileId?"&layoutProfileId="+o.layoutProfileId:""}`,"_blank");break}}const b=w=>E(w);function A(w){ze[w?"unshift":"push"](()=>{p=w,t(2,p)})}return n.$$set=w=>{"params"in w&&t(4,o=w.params),"fetch"in w&&t(5,s=w.fetch),"loadLayout"in w&&t(6,f=w.loadLayout),"validate"in w&&t(7,u=w.validate),"$$scope"in w&&t(10,l=w.$$scope)},n.$$.update=()=>{if(n.$$.dirty&529){if(t(0,d=[{name:"cancel",label:B.translate("Cancel","labels")}]),o.inModal){let w=ut.get();w&&w.user&&w.user.isAdmin&&d.unshift({name:"fullEdit",label:B.translate("Full Edit","labels","LayoutManager")})}(!o.inModal||a!=null&&a.canEdit)&&d.unshift({name:"save",label:B.translate("Save","labels"),style:"primary"}),a&&a.storedProfile&&a.storedProfile.id===o.layoutProfileId&&a.canEdit&&d.push({name:"reset",label:B.translate("reset","labels","LayoutManager")})}},[d,c,p,E,o,s,f,u,m,a,l,i,b,A]}let Io=class extends Te{constructor(e){super(),Ce(this,e,Mc,Nc,ke,{params:4,fetch:5,loadLayout:6,validate:7,save:8})}get save(){return this.$$.ctx[8]}};/**!
 * Sortable 1.15.6
 * @author	RubaXa   <trash@rubaxa.org>
 * @author	owenm    <owen23355@gmail.com>
 * @license MIT
 */function No(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);e&&(i=i.filter(function(l){return Object.getOwnPropertyDescriptor(n,l).enumerable})),t.push.apply(t,i)}return t}function Mt(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?No(Object(t),!0).forEach(function(i){Bc(n,i,t[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):No(Object(t)).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(t,i))})}return n}function zi(n){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?zi=function(e){return typeof e}:zi=function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},zi(n)}function Bc(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function Vt(){return Vt=Object.assign||function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n},Vt.apply(this,arguments)}function Fc(n,e){if(n==null)return{};var t={},i=Object.keys(n),l,r;for(r=0;r<i.length;r++)l=i[r],!(e.indexOf(l)>=0)&&(t[l]=n[l]);return t}function Rc(n,e){if(n==null)return{};var t=Fc(n,e),i,l;if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);for(l=0;l<r.length;l++)i=r[l],!(e.indexOf(i)>=0)&&Object.prototype.propertyIsEnumerable.call(n,i)&&(t[i]=n[i])}return t}var Hc="1.15.6";function Ut(n){if(typeof window<"u"&&window.navigator)return!!navigator.userAgent.match(n)}var Xt=Ut(/(?:Trident.*rv[ :]?11\.|msie|iemobile|Windows Phone)/i),ui=Ut(/Edge/i),Mo=Ut(/firefox/i),fi=Ut(/safari/i)&&!Ut(/chrome/i)&&!Ut(/android/i),Rl=Ut(/iP(ad|od|hone)/i),Bo=Ut(/chrome/i)&&Ut(/android/i),Fo={capture:!1,passive:!1};function Pe(n,e,t){n.addEventListener(e,t,!Xt&&Fo)}function Oe(n,e,t){n.removeEventListener(e,t,!Xt&&Fo)}function Gi(n,e){if(e){if(e[0]===">"&&(e=e.substring(1)),n)try{if(n.matches)return n.matches(e);if(n.msMatchesSelector)return n.msMatchesSelector(e);if(n.webkitMatchesSelector)return n.webkitMatchesSelector(e)}catch{return!1}return!1}}function Ro(n){return n.host&&n!==document&&n.host.nodeType?n.host:n.parentNode}function At(n,e,t,i){if(n){t=t||document;do{if(e!=null&&(e[0]===">"?n.parentNode===t&&Gi(n,e):Gi(n,e))||i&&n===t)return n;if(n===t)break}while(n=Ro(n))}return null}var Ho=/\s+/g;function vt(n,e,t){if(n&&e)if(n.classList)n.classList[t?"add":"remove"](e);else{var i=(" "+n.className+" ").replace(Ho," ").replace(" "+e+" "," ");n.className=(i+(t?" "+e:"")).replace(Ho," ")}}function pe(n,e,t){var i=n&&n.style;if(i){if(t===void 0)return document.defaultView&&document.defaultView.getComputedStyle?t=document.defaultView.getComputedStyle(n,""):n.currentStyle&&(t=n.currentStyle),e===void 0?t:t[e];!(e in i)&&e.indexOf("webkit")===-1&&(e="-webkit-"+e),i[e]=t+(typeof t=="string"?"":"px")}}function In(n,e){var t="";if(typeof n=="string")t=n;else do{var i=pe(n,"transform");i&&i!=="none"&&(t=i+" "+t)}while(!e&&(n=n.parentNode));var l=window.DOMMatrix||window.WebKitCSSMatrix||window.CSSMatrix||window.MSCSSMatrix;return l&&new l(t)}function Wo(n,e,t){if(n){var i=n.getElementsByTagName(e),l=0,r=i.length;if(t)for(;l<r;l++)t(i[l],l);return i}return[]}function Bt(){var n=document.scrollingElement;return n||document.documentElement}function xe(n,e,t,i,l){if(!(!n.getBoundingClientRect&&n!==window)){var r,o,s,a,f,u,c;if(n!==window&&n.parentNode&&n!==Bt()?(r=n.getBoundingClientRect(),o=r.top,s=r.left,a=r.bottom,f=r.right,u=r.height,c=r.width):(o=0,s=0,a=window.innerHeight,f=window.innerWidth,u=window.innerHeight,c=window.innerWidth),(e||t)&&n!==window&&(l=l||n.parentNode,!Xt))do if(l&&l.getBoundingClientRect&&(pe(l,"transform")!=="none"||t&&pe(l,"position")!=="static")){var d=l.getBoundingClientRect();o-=d.top+parseInt(pe(l,"border-top-width")),s-=d.left+parseInt(pe(l,"border-left-width")),a=o+r.height,f=s+r.width;break}while(l=l.parentNode);if(i&&n!==window){var p=In(l||n),h=p&&p.a,m=p&&p.d;p&&(o/=m,s/=h,c/=h,u/=m,a=o+u,f=s+c)}return{top:o,left:s,bottom:a,right:f,width:c,height:u}}}function qo(n,e,t){for(var i=$t(n,!0),l=xe(n)[e];i;){var r=xe(i)[t],o=void 0;if(o=l>=r,!o)return i;if(i===Bt())break;i=$t(i,!1)}return!1}function Nn(n,e,t,i){for(var l=0,r=0,o=n.children;r<o.length;){if(o[r].style.display!=="none"&&o[r]!==ce.ghost&&(i||o[r]!==ce.dragged)&&At(o[r],t.draggable,n,!1)){if(l===e)return o[r];l++}r++}return null}function Hl(n,e){for(var t=n.lastElementChild;t&&(t===ce.ghost||pe(t,"display")==="none"||e&&!Gi(t,e));)t=t.previousElementSibling;return t||null}function St(n,e){var t=0;if(!n||!n.parentNode)return-1;for(;n=n.previousElementSibling;)n.nodeName.toUpperCase()!=="TEMPLATE"&&n!==ce.clone&&(!e||Gi(n,e))&&t++;return t}function jo(n){var e=0,t=0,i=Bt();if(n)do{var l=In(n),r=l.a,o=l.d;e+=n.scrollLeft*r,t+=n.scrollTop*o}while(n!==i&&(n=n.parentNode));return[e,t]}function Wc(n,e){for(var t in n)if(n.hasOwnProperty(t)){for(var i in e)if(e.hasOwnProperty(i)&&e[i]===n[t][i])return Number(t)}return-1}function $t(n,e){if(!n||!n.getBoundingClientRect)return Bt();var t=n,i=!1;do if(t.clientWidth<t.scrollWidth||t.clientHeight<t.scrollHeight){var l=pe(t);if(t.clientWidth<t.scrollWidth&&(l.overflowX=="auto"||l.overflowX=="scroll")||t.clientHeight<t.scrollHeight&&(l.overflowY=="auto"||l.overflowY=="scroll")){if(!t.getBoundingClientRect||t===document.body)return Bt();if(i||e)return t;i=!0}}while(t=t.parentNode);return Bt()}function qc(n,e){if(n&&e)for(var t in e)e.hasOwnProperty(t)&&(n[t]=e[t]);return n}function Wl(n,e){return Math.round(n.top)===Math.round(e.top)&&Math.round(n.left)===Math.round(e.left)&&Math.round(n.height)===Math.round(e.height)&&Math.round(n.width)===Math.round(e.width)}var ci;function zo(n,e){return function(){if(!ci){var t=arguments,i=this;t.length===1?n.call(i,t[0]):n.apply(i,t),ci=setTimeout(function(){ci=void 0},e)}}}function jc(){clearTimeout(ci),ci=void 0}function Go(n,e,t){n.scrollLeft+=e,n.scrollTop+=t}function Vo(n){var e=window.Polymer,t=window.jQuery||window.Zepto;return e&&e.dom?e.dom(n).cloneNode(!0):t?t(n).clone(!0)[0]:n.cloneNode(!0)}function Uo(n,e,t){var i={};return Array.from(n.children).forEach(function(l){var r,o,s,a;if(!(!At(l,e.draggable,n,!1)||l.animated||l===t)){var f=xe(l);i.left=Math.min((r=i.left)!==null&&r!==void 0?r:1/0,f.left),i.top=Math.min((o=i.top)!==null&&o!==void 0?o:1/0,f.top),i.right=Math.max((s=i.right)!==null&&s!==void 0?s:-1/0,f.right),i.bottom=Math.max((a=i.bottom)!==null&&a!==void 0?a:-1/0,f.bottom)}}),i.width=i.right-i.left,i.height=i.bottom-i.top,i.x=i.left,i.y=i.top,i}var mt="Sortable"+new Date().getTime();function zc(){var n=[],e;return{captureAnimationState:function(){if(n=[],!!this.options.animation){var i=[].slice.call(this.el.children);i.forEach(function(l){if(!(pe(l,"display")==="none"||l===ce.ghost)){n.push({target:l,rect:xe(l)});var r=Mt({},n[n.length-1].rect);if(l.thisAnimationDuration){var o=In(l,!0);o&&(r.top-=o.f,r.left-=o.e)}l.fromRect=r}})}},addAnimationState:function(i){n.push(i)},removeAnimationState:function(i){n.splice(Wc(n,{target:i}),1)},animateAll:function(i){var l=this;if(!this.options.animation){clearTimeout(e),typeof i=="function"&&i();return}var r=!1,o=0;n.forEach(function(s){var a=0,f=s.target,u=f.fromRect,c=xe(f),d=f.prevFromRect,p=f.prevToRect,h=s.rect,m=In(f,!0);m&&(c.top-=m.f,c.left-=m.e),f.toRect=c,f.thisAnimationDuration&&Wl(d,c)&&!Wl(u,c)&&(h.top-c.top)/(h.left-c.left)===(u.top-c.top)/(u.left-c.left)&&(a=Vc(h,d,p,l.options)),Wl(c,u)||(f.prevFromRect=u,f.prevToRect=c,a||(a=l.options.animation),l.animate(f,h,c,a)),a&&(r=!0,o=Math.max(o,a),clearTimeout(f.animationResetTimer),f.animationResetTimer=setTimeout(function(){f.animationTime=0,f.prevFromRect=null,f.fromRect=null,f.prevToRect=null,f.thisAnimationDuration=null},a),f.thisAnimationDuration=a)}),clearTimeout(e),r?e=setTimeout(function(){typeof i=="function"&&i()},o):typeof i=="function"&&i(),n=[]},animate:function(i,l,r,o){if(o){pe(i,"transition",""),pe(i,"transform","");var s=In(this.el),a=s&&s.a,f=s&&s.d,u=(l.left-r.left)/(a||1),c=(l.top-r.top)/(f||1);i.animatingX=!!u,i.animatingY=!!c,pe(i,"transform","translate3d("+u+"px,"+c+"px,0)"),this.forRepaintDummy=Gc(i),pe(i,"transition","transform "+o+"ms"+(this.options.easing?" "+this.options.easing:"")),pe(i,"transform","translate3d(0,0,0)"),typeof i.animated=="number"&&clearTimeout(i.animated),i.animated=setTimeout(function(){pe(i,"transition",""),pe(i,"transform",""),i.animated=!1,i.animatingX=!1,i.animatingY=!1},o)}}}}function Gc(n){return n.offsetWidth}function Vc(n,e,t,i){return Math.sqrt(Math.pow(e.top-n.top,2)+Math.pow(e.left-n.left,2))/Math.sqrt(Math.pow(e.top-t.top,2)+Math.pow(e.left-t.left,2))*i.animation}var Mn=[],ql={initializeByDefault:!0},di={mount:function(e){for(var t in ql)ql.hasOwnProperty(t)&&!(t in e)&&(e[t]=ql[t]);Mn.forEach(function(i){if(i.pluginName===e.pluginName)throw"Sortable: Cannot mount plugin ".concat(e.pluginName," more than once")}),Mn.push(e)},pluginEvent:function(e,t,i){var l=this;this.eventCanceled=!1,i.cancel=function(){l.eventCanceled=!0};var r=e+"Global";Mn.forEach(function(o){t[o.pluginName]&&(t[o.pluginName][r]&&t[o.pluginName][r](Mt({sortable:t},i)),t.options[o.pluginName]&&t[o.pluginName][e]&&t[o.pluginName][e](Mt({sortable:t},i)))})},initializePlugins:function(e,t,i,l){Mn.forEach(function(s){var a=s.pluginName;if(!(!e.options[a]&&!s.initializeByDefault)){var f=new s(e,t,e.options);f.sortable=e,f.options=e.options,e[a]=f,Vt(i,f.defaults)}});for(var r in e.options)if(e.options.hasOwnProperty(r)){var o=this.modifyOption(e,r,e.options[r]);typeof o<"u"&&(e.options[r]=o)}},getEventProperties:function(e,t){var i={};return Mn.forEach(function(l){typeof l.eventProperties=="function"&&Vt(i,l.eventProperties.call(t[l.pluginName],e))}),i},modifyOption:function(e,t,i){var l;return Mn.forEach(function(r){e[r.pluginName]&&r.optionListeners&&typeof r.optionListeners[t]=="function"&&(l=r.optionListeners[t].call(e[r.pluginName],i))}),l}};function Uc(n){var e=n.sortable,t=n.rootEl,i=n.name,l=n.targetEl,r=n.cloneEl,o=n.toEl,s=n.fromEl,a=n.oldIndex,f=n.newIndex,u=n.oldDraggableIndex,c=n.newDraggableIndex,d=n.originalEvent,p=n.putSortable,h=n.extraEventProperties;if(e=e||t&&t[mt],!!e){var m,g=e.options,_="on"+i.charAt(0).toUpperCase()+i.substr(1);window.CustomEvent&&!Xt&&!ui?m=new CustomEvent(i,{bubbles:!0,cancelable:!0}):(m=document.createEvent("Event"),m.initEvent(i,!0,!0)),m.to=o||t,m.from=s||t,m.item=l||t,m.clone=r,m.oldIndex=a,m.newIndex=f,m.oldDraggableIndex=u,m.newDraggableIndex=c,m.originalEvent=d,m.pullMode=p?p.lastPutMode:void 0;var y=Mt(Mt({},h),di.getEventProperties(i,e));for(var E in y)m[E]=y[E];t&&t.dispatchEvent(m),g[_]&&g[_].call(e,m)}}var Xc=["evt"],ht=function(e,t){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},l=i.evt,r=Rc(i,Xc);di.pluginEvent.bind(ce)(e,t,Mt({dragEl:K,parentEl:Je,ghostEl:we,rootEl:Xe,nextEl:hn,lastDownEl:Vi,cloneEl:Ye,cloneHidden:en,dragStarted:mi,putSortable:nt,activeSortable:ce.active,originalEvent:l,oldIndex:Bn,oldDraggableIndex:pi,newIndex:bt,newDraggableIndex:tn,hideGhostForTarget:xo,unhideGhostForTarget:$o,cloneNowHidden:function(){en=!0},cloneNowShown:function(){en=!1},dispatchSortableEvent:function(s){ft({sortable:t,name:s,originalEvent:l})}},r))};function ft(n){Uc(Mt({putSortable:nt,cloneEl:Ye,targetEl:K,rootEl:Xe,oldIndex:Bn,oldDraggableIndex:pi,newIndex:bt,newDraggableIndex:tn},n))}var K,Je,we,Xe,hn,Vi,Ye,en,Bn,bt,pi,tn,Ui,nt,Fn=!1,Xi=!1,Yi=[],gn,Ct,jl,zl,Xo,Yo,mi,Rn,hi,gi=!1,Qi=!1,Ji,ot,Gl=[],Vl=!1,Zi=[],Ki=typeof document<"u",xi=Rl,Qo=ui||Xt?"cssFloat":"float",Yc=Ki&&!Bo&&!Rl&&"draggable"in document.createElement("div"),Jo=function(){if(Ki){if(Xt)return!1;var n=document.createElement("x");return n.style.cssText="pointer-events:auto",n.style.pointerEvents==="auto"}}(),Zo=function(e,t){var i=pe(e),l=parseInt(i.width)-parseInt(i.paddingLeft)-parseInt(i.paddingRight)-parseInt(i.borderLeftWidth)-parseInt(i.borderRightWidth),r=Nn(e,0,t),o=Nn(e,1,t),s=r&&pe(r),a=o&&pe(o),f=s&&parseInt(s.marginLeft)+parseInt(s.marginRight)+xe(r).width,u=a&&parseInt(a.marginLeft)+parseInt(a.marginRight)+xe(o).width;if(i.display==="flex")return i.flexDirection==="column"||i.flexDirection==="column-reverse"?"vertical":"horizontal";if(i.display==="grid")return i.gridTemplateColumns.split(" ").length<=1?"vertical":"horizontal";if(r&&s.float&&s.float!=="none"){var c=s.float==="left"?"left":"right";return o&&(a.clear==="both"||a.clear===c)?"vertical":"horizontal"}return r&&(s.display==="block"||s.display==="flex"||s.display==="table"||s.display==="grid"||f>=l&&i[Qo]==="none"||o&&i[Qo]==="none"&&f+u>l)?"vertical":"horizontal"},Qc=function(e,t,i){var l=i?e.left:e.top,r=i?e.right:e.bottom,o=i?e.width:e.height,s=i?t.left:t.top,a=i?t.right:t.bottom,f=i?t.width:t.height;return l===s||r===a||l+o/2===s+f/2},Jc=function(e,t){var i;return Yi.some(function(l){var r=l[mt].options.emptyInsertThreshold;if(!(!r||Hl(l))){var o=xe(l),s=e>=o.left-r&&e<=o.right+r,a=t>=o.top-r&&t<=o.bottom+r;if(s&&a)return i=l}}),i},Ko=function(e){function t(r,o){return function(s,a,f,u){var c=s.options.group.name&&a.options.group.name&&s.options.group.name===a.options.group.name;if(r==null&&(o||c))return!0;if(r==null||r===!1)return!1;if(o&&r==="clone")return r;if(typeof r=="function")return t(r(s,a,f,u),o)(s,a,f,u);var d=(o?s:a).options.group.name;return r===!0||typeof r=="string"&&r===d||r.join&&r.indexOf(d)>-1}}var i={},l=e.group;(!l||zi(l)!="object")&&(l={name:l}),i.name=l.name,i.checkPull=t(l.pull,!0),i.checkPut=t(l.put),i.revertClone=l.revertClone,e.group=i},xo=function(){!Jo&&we&&pe(we,"display","none")},$o=function(){!Jo&&we&&pe(we,"display","")};Ki&&!Bo&&document.addEventListener("click",function(n){if(Xi)return n.preventDefault(),n.stopPropagation&&n.stopPropagation(),n.stopImmediatePropagation&&n.stopImmediatePropagation(),Xi=!1,!1},!0);var vn=function(e){if(K){e=e.touches?e.touches[0]:e;var t=Jc(e.clientX,e.clientY);if(t){var i={};for(var l in e)e.hasOwnProperty(l)&&(i[l]=e[l]);i.target=i.rootEl=t,i.preventDefault=void 0,i.stopPropagation=void 0,t[mt]._onDragOver(i)}}},Zc=function(e){K&&K.parentNode[mt]._isOutsideThisEl(e.target)};function ce(n,e){if(!(n&&n.nodeType&&n.nodeType===1))throw"Sortable: `el` must be an HTMLElement, not ".concat({}.toString.call(n));this.el=n,this.options=e=Vt({},e),n[mt]=this;var t={group:null,sort:!0,disabled:!1,store:null,handle:null,draggable:/^[uo]l$/i.test(n.nodeName)?">li":">*",swapThreshold:1,invertSwap:!1,invertedSwapThreshold:null,removeCloneOnHide:!0,direction:function(){return Zo(n,this.options)},ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",dragClass:"sortable-drag",ignore:"a, img",filter:null,preventOnFilter:!0,animation:0,easing:null,setData:function(o,s){o.setData("Text",s.textContent)},dropBubble:!1,dragoverBubble:!1,dataIdAttr:"data-id",delay:0,delayOnTouchOnly:!1,touchStartThreshold:(Number.parseInt?Number:window).parseInt(window.devicePixelRatio,10)||1,forceFallback:!1,fallbackClass:"sortable-fallback",fallbackOnBody:!1,fallbackTolerance:0,fallbackOffset:{x:0,y:0},supportPointer:ce.supportPointer!==!1&&"PointerEvent"in window&&(!fi||Rl),emptyInsertThreshold:5};di.initializePlugins(this,n,t);for(var i in t)!(i in e)&&(e[i]=t[i]);Ko(e);for(var l in this)l.charAt(0)==="_"&&typeof this[l]=="function"&&(this[l]=this[l].bind(this));this.nativeDraggable=e.forceFallback?!1:Yc,this.nativeDraggable&&(this.options.touchStartThreshold=1),e.supportPointer?Pe(n,"pointerdown",this._onTapStart):(Pe(n,"mousedown",this._onTapStart),Pe(n,"touchstart",this._onTapStart)),this.nativeDraggable&&(Pe(n,"dragover",this),Pe(n,"dragenter",this)),Yi.push(this.el),e.store&&e.store.get&&this.sort(e.store.get(this)||[]),Vt(this,zc())}ce.prototype={constructor:ce,_isOutsideThisEl:function(e){!this.el.contains(e)&&e!==this.el&&(Rn=null)},_getDirection:function(e,t){return typeof this.options.direction=="function"?this.options.direction.call(this,e,t,K):this.options.direction},_onTapStart:function(e){if(e.cancelable){var t=this,i=this.el,l=this.options,r=l.preventOnFilter,o=e.type,s=e.touches&&e.touches[0]||e.pointerType&&e.pointerType==="touch"&&e,a=(s||e).target,f=e.target.shadowRoot&&(e.path&&e.path[0]||e.composedPath&&e.composedPath()[0])||a,u=l.filter;if(ld(i),!K&&!(/mousedown|pointerdown/.test(o)&&e.button!==0||l.disabled)&&!f.isContentEditable&&!(!this.nativeDraggable&&fi&&a&&a.tagName.toUpperCase()==="SELECT")&&(a=At(a,l.draggable,i,!1),!(a&&a.animated)&&Vi!==a)){if(Bn=St(a),pi=St(a,l.draggable),typeof u=="function"){if(u.call(this,e,a,this)){ft({sortable:t,rootEl:f,name:"filter",targetEl:a,toEl:i,fromEl:i}),ht("filter",t,{evt:e}),r&&e.preventDefault();return}}else if(u&&(u=u.split(",").some(function(c){if(c=At(f,c.trim(),i,!1),c)return ft({sortable:t,rootEl:c,name:"filter",targetEl:a,fromEl:i,toEl:i}),ht("filter",t,{evt:e}),!0}),u)){r&&e.preventDefault();return}l.handle&&!At(f,l.handle,i,!1)||this._prepareDragStart(e,s,a)}}},_prepareDragStart:function(e,t,i){var l=this,r=l.el,o=l.options,s=r.ownerDocument,a;if(i&&!K&&i.parentNode===r){var f=xe(i);if(Xe=r,K=i,Je=K.parentNode,hn=K.nextSibling,Vi=i,Ui=o.group,ce.dragged=K,gn={target:K,clientX:(t||e).clientX,clientY:(t||e).clientY},Xo=gn.clientX-f.left,Yo=gn.clientY-f.top,this._lastX=(t||e).clientX,this._lastY=(t||e).clientY,K.style["will-change"]="all",a=function(){if(ht("delayEnded",l,{evt:e}),ce.eventCanceled){l._onDrop();return}l._disableDelayedDragEvents(),!Mo&&l.nativeDraggable&&(K.draggable=!0),l._triggerDragStart(e,t),ft({sortable:l,name:"choose",originalEvent:e}),vt(K,o.chosenClass,!0)},o.ignore.split(",").forEach(function(u){Wo(K,u.trim(),Ul)}),Pe(s,"dragover",vn),Pe(s,"mousemove",vn),Pe(s,"touchmove",vn),o.supportPointer?(Pe(s,"pointerup",l._onDrop),!this.nativeDraggable&&Pe(s,"pointercancel",l._onDrop)):(Pe(s,"mouseup",l._onDrop),Pe(s,"touchend",l._onDrop),Pe(s,"touchcancel",l._onDrop)),Mo&&this.nativeDraggable&&(this.options.touchStartThreshold=4,K.draggable=!0),ht("delayStart",this,{evt:e}),o.delay&&(!o.delayOnTouchOnly||t)&&(!this.nativeDraggable||!(ui||Xt))){if(ce.eventCanceled){this._onDrop();return}o.supportPointer?(Pe(s,"pointerup",l._disableDelayedDrag),Pe(s,"pointercancel",l._disableDelayedDrag)):(Pe(s,"mouseup",l._disableDelayedDrag),Pe(s,"touchend",l._disableDelayedDrag),Pe(s,"touchcancel",l._disableDelayedDrag)),Pe(s,"mousemove",l._delayedDragTouchMoveHandler),Pe(s,"touchmove",l._delayedDragTouchMoveHandler),o.supportPointer&&Pe(s,"pointermove",l._delayedDragTouchMoveHandler),l._dragStartTimer=setTimeout(a,o.delay)}else a()}},_delayedDragTouchMoveHandler:function(e){var t=e.touches?e.touches[0]:e;Math.max(Math.abs(t.clientX-this._lastX),Math.abs(t.clientY-this._lastY))>=Math.floor(this.options.touchStartThreshold/(this.nativeDraggable&&window.devicePixelRatio||1))&&this._disableDelayedDrag()},_disableDelayedDrag:function(){K&&Ul(K),clearTimeout(this._dragStartTimer),this._disableDelayedDragEvents()},_disableDelayedDragEvents:function(){var e=this.el.ownerDocument;Oe(e,"mouseup",this._disableDelayedDrag),Oe(e,"touchend",this._disableDelayedDrag),Oe(e,"touchcancel",this._disableDelayedDrag),Oe(e,"pointerup",this._disableDelayedDrag),Oe(e,"pointercancel",this._disableDelayedDrag),Oe(e,"mousemove",this._delayedDragTouchMoveHandler),Oe(e,"touchmove",this._delayedDragTouchMoveHandler),Oe(e,"pointermove",this._delayedDragTouchMoveHandler)},_triggerDragStart:function(e,t){t=t||e.pointerType=="touch"&&e,!this.nativeDraggable||t?this.options.supportPointer?Pe(document,"pointermove",this._onTouchMove):t?Pe(document,"touchmove",this._onTouchMove):Pe(document,"mousemove",this._onTouchMove):(Pe(K,"dragend",this),Pe(Xe,"dragstart",this._onDragStart));try{document.selection?el(function(){document.selection.empty()}):window.getSelection().removeAllRanges()}catch{}},_dragStarted:function(e,t){if(Fn=!1,Xe&&K){ht("dragStarted",this,{evt:t}),this.nativeDraggable&&Pe(document,"dragover",Zc);var i=this.options;!e&&vt(K,i.dragClass,!1),vt(K,i.ghostClass,!0),ce.active=this,e&&this._appendGhost(),ft({sortable:this,name:"start",originalEvent:t})}else this._nulling()},_emulateDragOver:function(){if(Ct){this._lastX=Ct.clientX,this._lastY=Ct.clientY,xo();for(var e=document.elementFromPoint(Ct.clientX,Ct.clientY),t=e;e&&e.shadowRoot&&(e=e.shadowRoot.elementFromPoint(Ct.clientX,Ct.clientY),e!==t);)t=e;if(K.parentNode[mt]._isOutsideThisEl(e),t)do{if(t[mt]){var i=void 0;if(i=t[mt]._onDragOver({clientX:Ct.clientX,clientY:Ct.clientY,target:e,rootEl:t}),i&&!this.options.dragoverBubble)break}e=t}while(t=Ro(t));$o()}},_onTouchMove:function(e){if(gn){var t=this.options,i=t.fallbackTolerance,l=t.fallbackOffset,r=e.touches?e.touches[0]:e,o=we&&In(we,!0),s=we&&o&&o.a,a=we&&o&&o.d,f=xi&&ot&&jo(ot),u=(r.clientX-gn.clientX+l.x)/(s||1)+(f?f[0]-Gl[0]:0)/(s||1),c=(r.clientY-gn.clientY+l.y)/(a||1)+(f?f[1]-Gl[1]:0)/(a||1);if(!ce.active&&!Fn){if(i&&Math.max(Math.abs(r.clientX-this._lastX),Math.abs(r.clientY-this._lastY))<i)return;this._onDragStart(e,!0)}if(we){o?(o.e+=u-(jl||0),o.f+=c-(zl||0)):o={a:1,b:0,c:0,d:1,e:u,f:c};var d="matrix(".concat(o.a,",").concat(o.b,",").concat(o.c,",").concat(o.d,",").concat(o.e,",").concat(o.f,")");pe(we,"webkitTransform",d),pe(we,"mozTransform",d),pe(we,"msTransform",d),pe(we,"transform",d),jl=u,zl=c,Ct=r}e.cancelable&&e.preventDefault()}},_appendGhost:function(){if(!we){var e=this.options.fallbackOnBody?document.body:Xe,t=xe(K,!0,xi,!0,e),i=this.options;if(xi){for(ot=e;pe(ot,"position")==="static"&&pe(ot,"transform")==="none"&&ot!==document;)ot=ot.parentNode;ot!==document.body&&ot!==document.documentElement?(ot===document&&(ot=Bt()),t.top+=ot.scrollTop,t.left+=ot.scrollLeft):ot=Bt(),Gl=jo(ot)}we=K.cloneNode(!0),vt(we,i.ghostClass,!1),vt(we,i.fallbackClass,!0),vt(we,i.dragClass,!0),pe(we,"transition",""),pe(we,"transform",""),pe(we,"box-sizing","border-box"),pe(we,"margin",0),pe(we,"top",t.top),pe(we,"left",t.left),pe(we,"width",t.width),pe(we,"height",t.height),pe(we,"opacity","0.8"),pe(we,"position",xi?"absolute":"fixed"),pe(we,"zIndex","100000"),pe(we,"pointerEvents","none"),ce.ghost=we,e.appendChild(we),pe(we,"transform-origin",Xo/parseInt(we.style.width)*100+"% "+Yo/parseInt(we.style.height)*100+"%")}},_onDragStart:function(e,t){var i=this,l=e.dataTransfer,r=i.options;if(ht("dragStart",this,{evt:e}),ce.eventCanceled){this._onDrop();return}ht("setupClone",this),ce.eventCanceled||(Ye=Vo(K),Ye.removeAttribute("id"),Ye.draggable=!1,Ye.style["will-change"]="",this._hideClone(),vt(Ye,this.options.chosenClass,!1),ce.clone=Ye),i.cloneId=el(function(){ht("clone",i),!ce.eventCanceled&&(i.options.removeCloneOnHide||Xe.insertBefore(Ye,K),i._hideClone(),ft({sortable:i,name:"clone"}))}),!t&&vt(K,r.dragClass,!0),t?(Xi=!0,i._loopId=setInterval(i._emulateDragOver,50)):(Oe(document,"mouseup",i._onDrop),Oe(document,"touchend",i._onDrop),Oe(document,"touchcancel",i._onDrop),l&&(l.effectAllowed="move",r.setData&&r.setData.call(i,l,K)),Pe(document,"drop",i),pe(K,"transform","translateZ(0)")),Fn=!0,i._dragStartId=el(i._dragStarted.bind(i,t,e)),Pe(document,"selectstart",i),mi=!0,window.getSelection().removeAllRanges(),fi&&pe(document.body,"user-select","none")},_onDragOver:function(e){var t=this.el,i=e.target,l,r,o,s=this.options,a=s.group,f=ce.active,u=Ui===a,c=s.sort,d=nt||f,p,h=this,m=!1;if(Vl)return;function g(le,Ne){ht(le,h,Mt({evt:e,isOwner:u,axis:p?"vertical":"horizontal",revert:o,dragRect:l,targetRect:r,canSort:c,fromSortable:d,target:i,completed:y,onMove:function(He,je){return $i(Xe,t,K,l,He,xe(He),e,je)},changed:E},Ne))}function _(){g("dragOverAnimationCapture"),h.captureAnimationState(),h!==d&&d.captureAnimationState()}function y(le){return g("dragOverCompleted",{insertion:le}),le&&(u?f._hideClone():f._showClone(h),h!==d&&(vt(K,nt?nt.options.ghostClass:f.options.ghostClass,!1),vt(K,s.ghostClass,!0)),nt!==h&&h!==ce.active?nt=h:h===ce.active&&nt&&(nt=null),d===h&&(h._ignoreWhileAnimating=i),h.animateAll(function(){g("dragOverAnimationComplete"),h._ignoreWhileAnimating=null}),h!==d&&(d.animateAll(),d._ignoreWhileAnimating=null)),(i===K&&!K.animated||i===t&&!i.animated)&&(Rn=null),!s.dragoverBubble&&!e.rootEl&&i!==document&&(K.parentNode[mt]._isOutsideThisEl(e.target),!le&&vn(e)),!s.dragoverBubble&&e.stopPropagation&&e.stopPropagation(),m=!0}function E(){bt=St(K),tn=St(K,s.draggable),ft({sortable:h,name:"change",toEl:t,newIndex:bt,newDraggableIndex:tn,originalEvent:e})}if(e.preventDefault!==void 0&&e.cancelable&&e.preventDefault(),i=At(i,s.draggable,t,!0),g("dragOver"),ce.eventCanceled)return m;if(K.contains(e.target)||i.animated&&i.animatingX&&i.animatingY||h._ignoreWhileAnimating===i)return y(!1);if(Xi=!1,f&&!s.disabled&&(u?c||(o=Je!==Xe):nt===this||(this.lastPutMode=Ui.checkPull(this,f,K,e))&&a.checkPut(this,f,K,e))){if(p=this._getDirection(e,i)==="vertical",l=xe(K),g("dragOverValid"),ce.eventCanceled)return m;if(o)return Je=Xe,_(),this._hideClone(),g("revert"),ce.eventCanceled||(hn?Xe.insertBefore(K,hn):Xe.appendChild(K)),y(!0);var b=Hl(t,s.draggable);if(!b||ed(e,p,this)&&!b.animated){if(b===K)return y(!1);if(b&&t===e.target&&(i=b),i&&(r=xe(i)),$i(Xe,t,K,l,i,r,e,!!i)!==!1)return _(),b&&b.nextSibling?t.insertBefore(K,b.nextSibling):t.appendChild(K),Je=t,E(),y(!0)}else if(b&&$c(e,p,this)){var A=Nn(t,0,s,!0);if(A===K)return y(!1);if(i=A,r=xe(i),$i(Xe,t,K,l,i,r,e,!1)!==!1)return _(),t.insertBefore(K,A),Je=t,E(),y(!0)}else if(i.parentNode===t){r=xe(i);var w=0,L,O=K.parentNode!==t,D=!Qc(K.animated&&K.toRect||l,i.animated&&i.toRect||r,p),C=p?"top":"left",R=qo(i,"top","top")||qo(K,"top","top"),W=R?R.scrollTop:void 0;Rn!==i&&(L=r[C],gi=!1,Qi=!D&&s.invertSwap||O),w=td(e,i,r,p,D?1:s.swapThreshold,s.invertedSwapThreshold==null?s.swapThreshold:s.invertedSwapThreshold,Qi,Rn===i);var Z;if(w!==0){var q=St(K);do q-=w,Z=Je.children[q];while(Z&&(pe(Z,"display")==="none"||Z===we))}if(w===0||Z===i)return y(!1);Rn=i,hi=w;var H=i.nextElementSibling,V=!1;V=w===1;var ie=$i(Xe,t,K,l,i,r,e,V);if(ie!==!1)return(ie===1||ie===-1)&&(V=ie===1),Vl=!0,setTimeout(xc,30),_(),V&&!H?t.appendChild(K):i.parentNode.insertBefore(K,V?H:i),R&&Go(R,0,W-R.scrollTop),Je=K.parentNode,L!==void 0&&!Qi&&(Ji=Math.abs(L-xe(i)[C])),E(),y(!0)}if(t.contains(K))return y(!1)}return!1},_ignoreWhileAnimating:null,_offMoveEvents:function(){Oe(document,"mousemove",this._onTouchMove),Oe(document,"touchmove",this._onTouchMove),Oe(document,"pointermove",this._onTouchMove),Oe(document,"dragover",vn),Oe(document,"mousemove",vn),Oe(document,"touchmove",vn)},_offUpEvents:function(){var e=this.el.ownerDocument;Oe(e,"mouseup",this._onDrop),Oe(e,"touchend",this._onDrop),Oe(e,"pointerup",this._onDrop),Oe(e,"pointercancel",this._onDrop),Oe(e,"touchcancel",this._onDrop),Oe(document,"selectstart",this)},_onDrop:function(e){var t=this.el,i=this.options;if(bt=St(K),tn=St(K,i.draggable),ht("drop",this,{evt:e}),Je=K&&K.parentNode,bt=St(K),tn=St(K,i.draggable),ce.eventCanceled){this._nulling();return}Fn=!1,Qi=!1,gi=!1,clearInterval(this._loopId),clearTimeout(this._dragStartTimer),Xl(this.cloneId),Xl(this._dragStartId),this.nativeDraggable&&(Oe(document,"drop",this),Oe(t,"dragstart",this._onDragStart)),this._offMoveEvents(),this._offUpEvents(),fi&&pe(document.body,"user-select",""),pe(K,"transform",""),e&&(mi&&(e.cancelable&&e.preventDefault(),!i.dropBubble&&e.stopPropagation()),we&&we.parentNode&&we.parentNode.removeChild(we),(Xe===Je||nt&&nt.lastPutMode!=="clone")&&Ye&&Ye.parentNode&&Ye.parentNode.removeChild(Ye),K&&(this.nativeDraggable&&Oe(K,"dragend",this),Ul(K),K.style["will-change"]="",mi&&!Fn&&vt(K,nt?nt.options.ghostClass:this.options.ghostClass,!1),vt(K,this.options.chosenClass,!1),ft({sortable:this,name:"unchoose",toEl:Je,newIndex:null,newDraggableIndex:null,originalEvent:e}),Xe!==Je?(bt>=0&&(ft({rootEl:Je,name:"add",toEl:Je,fromEl:Xe,originalEvent:e}),ft({sortable:this,name:"remove",toEl:Je,originalEvent:e}),ft({rootEl:Je,name:"sort",toEl:Je,fromEl:Xe,originalEvent:e}),ft({sortable:this,name:"sort",toEl:Je,originalEvent:e})),nt&&nt.save()):bt!==Bn&&bt>=0&&(ft({sortable:this,name:"update",toEl:Je,originalEvent:e}),ft({sortable:this,name:"sort",toEl:Je,originalEvent:e})),ce.active&&((bt==null||bt===-1)&&(bt=Bn,tn=pi),ft({sortable:this,name:"end",toEl:Je,originalEvent:e}),this.save()))),this._nulling()},_nulling:function(){ht("nulling",this),Xe=K=Je=we=hn=Ye=Vi=en=gn=Ct=mi=bt=tn=Bn=pi=Rn=hi=nt=Ui=ce.dragged=ce.ghost=ce.clone=ce.active=null,Zi.forEach(function(e){e.checked=!0}),Zi.length=jl=zl=0},handleEvent:function(e){switch(e.type){case"drop":case"dragend":this._onDrop(e);break;case"dragenter":case"dragover":K&&(this._onDragOver(e),Kc(e));break;case"selectstart":e.preventDefault();break}},toArray:function(){for(var e=[],t,i=this.el.children,l=0,r=i.length,o=this.options;l<r;l++)t=i[l],At(t,o.draggable,this.el,!1)&&e.push(t.getAttribute(o.dataIdAttr)||id(t));return e},sort:function(e,t){var i={},l=this.el;this.toArray().forEach(function(r,o){var s=l.children[o];At(s,this.options.draggable,l,!1)&&(i[r]=s)},this),t&&this.captureAnimationState(),e.forEach(function(r){i[r]&&(l.removeChild(i[r]),l.appendChild(i[r]))}),t&&this.animateAll()},save:function(){var e=this.options.store;e&&e.set&&e.set(this)},closest:function(e,t){return At(e,t||this.options.draggable,this.el,!1)},option:function(e,t){var i=this.options;if(t===void 0)return i[e];var l=di.modifyOption(this,e,t);typeof l<"u"?i[e]=l:i[e]=t,e==="group"&&Ko(i)},destroy:function(){ht("destroy",this);var e=this.el;e[mt]=null,Oe(e,"mousedown",this._onTapStart),Oe(e,"touchstart",this._onTapStart),Oe(e,"pointerdown",this._onTapStart),this.nativeDraggable&&(Oe(e,"dragover",this),Oe(e,"dragenter",this)),Array.prototype.forEach.call(e.querySelectorAll("[draggable]"),function(t){t.removeAttribute("draggable")}),this._onDrop(),this._disableDelayedDragEvents(),Yi.splice(Yi.indexOf(this.el),1),this.el=e=null},_hideClone:function(){if(!en){if(ht("hideClone",this),ce.eventCanceled)return;pe(Ye,"display","none"),this.options.removeCloneOnHide&&Ye.parentNode&&Ye.parentNode.removeChild(Ye),en=!0}},_showClone:function(e){if(e.lastPutMode!=="clone"){this._hideClone();return}if(en){if(ht("showClone",this),ce.eventCanceled)return;K.parentNode==Xe&&!this.options.group.revertClone?Xe.insertBefore(Ye,K):hn?Xe.insertBefore(Ye,hn):Xe.appendChild(Ye),this.options.group.revertClone&&this.animate(K,Ye),pe(Ye,"display",""),en=!1}}};function Kc(n){n.dataTransfer&&(n.dataTransfer.dropEffect="move"),n.cancelable&&n.preventDefault()}function $i(n,e,t,i,l,r,o,s){var a,f=n[mt],u=f.options.onMove,c;return window.CustomEvent&&!Xt&&!ui?a=new CustomEvent("move",{bubbles:!0,cancelable:!0}):(a=document.createEvent("Event"),a.initEvent("move",!0,!0)),a.to=e,a.from=n,a.dragged=t,a.draggedRect=i,a.related=l||e,a.relatedRect=r||xe(e),a.willInsertAfter=s,a.originalEvent=o,n.dispatchEvent(a),u&&(c=u.call(f,a,o)),c}function Ul(n){n.draggable=!1}function xc(){Vl=!1}function $c(n,e,t){var i=xe(Nn(t.el,0,t.options,!0)),l=Uo(t.el,t.options,we),r=10;return e?n.clientX<l.left-r||n.clientY<i.top&&n.clientX<i.right:n.clientY<l.top-r||n.clientY<i.bottom&&n.clientX<i.left}function ed(n,e,t){var i=xe(Hl(t.el,t.options.draggable)),l=Uo(t.el,t.options,we),r=10;return e?n.clientX>l.right+r||n.clientY>i.bottom&&n.clientX>i.left:n.clientY>l.bottom+r||n.clientX>i.right&&n.clientY>i.top}function td(n,e,t,i,l,r,o,s){var a=i?n.clientY:n.clientX,f=i?t.height:t.width,u=i?t.top:t.left,c=i?t.bottom:t.right,d=!1;if(!o){if(s&&Ji<f*l){if(!gi&&(hi===1?a>u+f*r/2:a<c-f*r/2)&&(gi=!0),gi)d=!0;else if(hi===1?a<u+Ji:a>c-Ji)return-hi}else if(a>u+f*(1-l)/2&&a<c-f*(1-l)/2)return nd(e)}return d=d||o,d&&(a<u+f*r/2||a>c-f*r/2)?a>u+f/2?1:-1:0}function nd(n){return St(K)<St(n)?1:-1}function id(n){for(var e=n.tagName+n.className+n.src+n.href+n.textContent,t=e.length,i=0;t--;)i+=e.charCodeAt(t);return i.toString(36)}function ld(n){Zi.length=0;for(var e=n.getElementsByTagName("input"),t=e.length;t--;){var i=e[t];i.checked&&Zi.push(i)}}function el(n){return setTimeout(n,0)}function Xl(n){return clearTimeout(n)}Ki&&Pe(document,"touchmove",function(n){(ce.active||Fn)&&n.cancelable&&n.preventDefault()}),ce.utils={on:Pe,off:Oe,css:pe,find:Wo,is:function(e,t){return!!At(e,t,e,!1)},extend:qc,throttle:zo,closest:At,toggleClass:vt,clone:Vo,index:St,nextTick:el,cancelNextTick:Xl,detectDirection:Zo,getChild:Nn,expando:mt},ce.get=function(n){return n[mt]},ce.mount=function(){for(var n=arguments.length,e=new Array(n),t=0;t<n;t++)e[t]=arguments[t];e[0].constructor===Array&&(e=e[0]),e.forEach(function(i){if(!i.prototype||!i.prototype.constructor)throw"Sortable: Mounted plugin must be a constructor function, not ".concat({}.toString.call(i));i.utils&&(ce.utils=Mt(Mt({},ce.utils),i.utils)),di.mount(i)})},ce.create=function(n,e){return new ce(n,e)},ce.version=Hc;var $e=[],vi,Yl,Ql=!1,Jl,Zl,tl,bi;function rd(){function n(){this.defaults={scroll:!0,forceAutoScrollFallback:!1,scrollSensitivity:30,scrollSpeed:10,bubbleScroll:!0};for(var e in this)e.charAt(0)==="_"&&typeof this[e]=="function"&&(this[e]=this[e].bind(this))}return n.prototype={dragStarted:function(t){var i=t.originalEvent;this.sortable.nativeDraggable?Pe(document,"dragover",this._handleAutoScroll):this.options.supportPointer?Pe(document,"pointermove",this._handleFallbackAutoScroll):i.touches?Pe(document,"touchmove",this._handleFallbackAutoScroll):Pe(document,"mousemove",this._handleFallbackAutoScroll)},dragOverCompleted:function(t){var i=t.originalEvent;!this.options.dragOverBubble&&!i.rootEl&&this._handleAutoScroll(i)},drop:function(){this.sortable.nativeDraggable?Oe(document,"dragover",this._handleAutoScroll):(Oe(document,"pointermove",this._handleFallbackAutoScroll),Oe(document,"touchmove",this._handleFallbackAutoScroll),Oe(document,"mousemove",this._handleFallbackAutoScroll)),ea(),nl(),jc()},nulling:function(){tl=Yl=vi=Ql=bi=Jl=Zl=null,$e.length=0},_handleFallbackAutoScroll:function(t){this._handleAutoScroll(t,!0)},_handleAutoScroll:function(t,i){var l=this,r=(t.touches?t.touches[0]:t).clientX,o=(t.touches?t.touches[0]:t).clientY,s=document.elementFromPoint(r,o);if(tl=t,i||this.options.forceAutoScrollFallback||ui||Xt||fi){Kl(t,this.options,s,i);var a=$t(s,!0);Ql&&(!bi||r!==Jl||o!==Zl)&&(bi&&ea(),bi=setInterval(function(){var f=$t(document.elementFromPoint(r,o),!0);f!==a&&(a=f,nl()),Kl(t,l.options,f,i)},10),Jl=r,Zl=o)}else{if(!this.options.bubbleScroll||$t(s,!0)===Bt()){nl();return}Kl(t,this.options,$t(s,!1),!1)}}},Vt(n,{pluginName:"scroll",initializeByDefault:!0})}function nl(){$e.forEach(function(n){clearInterval(n.pid)}),$e=[]}function ea(){clearInterval(bi)}var Kl=zo(function(n,e,t,i){if(e.scroll){var l=(n.touches?n.touches[0]:n).clientX,r=(n.touches?n.touches[0]:n).clientY,o=e.scrollSensitivity,s=e.scrollSpeed,a=Bt(),f=!1,u;Yl!==t&&(Yl=t,nl(),vi=e.scroll,u=e.scrollFn,vi===!0&&(vi=$t(t,!0)));var c=0,d=vi;do{var p=d,h=xe(p),m=h.top,g=h.bottom,_=h.left,y=h.right,E=h.width,b=h.height,A=void 0,w=void 0,L=p.scrollWidth,O=p.scrollHeight,D=pe(p),C=p.scrollLeft,R=p.scrollTop;p===a?(A=E<L&&(D.overflowX==="auto"||D.overflowX==="scroll"||D.overflowX==="visible"),w=b<O&&(D.overflowY==="auto"||D.overflowY==="scroll"||D.overflowY==="visible")):(A=E<L&&(D.overflowX==="auto"||D.overflowX==="scroll"),w=b<O&&(D.overflowY==="auto"||D.overflowY==="scroll"));var W=A&&(Math.abs(y-l)<=o&&C+E<L)-(Math.abs(_-l)<=o&&!!C),Z=w&&(Math.abs(g-r)<=o&&R+b<O)-(Math.abs(m-r)<=o&&!!R);if(!$e[c])for(var q=0;q<=c;q++)$e[q]||($e[q]={});($e[c].vx!=W||$e[c].vy!=Z||$e[c].el!==p)&&($e[c].el=p,$e[c].vx=W,$e[c].vy=Z,clearInterval($e[c].pid),(W!=0||Z!=0)&&(f=!0,$e[c].pid=setInterval((function(){i&&this.layer===0&&ce.active._onTouchMove(tl);var H=$e[this.layer].vy?$e[this.layer].vy*s:0,V=$e[this.layer].vx?$e[this.layer].vx*s:0;typeof u=="function"&&u.call(ce.dragged.parentNode[mt],V,H,n,tl,$e[this.layer].el)!=="continue"||Go($e[this.layer].el,V,H)}).bind({layer:c}),24))),c++}while(e.bubbleScroll&&d!==a&&(d=$t(d,!1)));Ql=f}},30),ta=function(e){var t=e.originalEvent,i=e.putSortable,l=e.dragEl,r=e.activeSortable,o=e.dispatchSortableEvent,s=e.hideGhostForTarget,a=e.unhideGhostForTarget;if(t){var f=i||r;s();var u=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:t,c=document.elementFromPoint(u.clientX,u.clientY);a(),f&&!f.el.contains(c)&&(o("spill"),this.onSpill({dragEl:l,putSortable:i}))}};function xl(){}xl.prototype={startIndex:null,dragStart:function(e){var t=e.oldDraggableIndex;this.startIndex=t},onSpill:function(e){var t=e.dragEl,i=e.putSortable;this.sortable.captureAnimationState(),i&&i.captureAnimationState();var l=Nn(this.sortable.el,this.startIndex,this.options);l?this.sortable.el.insertBefore(t,l):this.sortable.el.appendChild(t),this.sortable.animateAll(),i&&i.animateAll()},drop:ta},Vt(xl,{pluginName:"revertOnSpill"});function $l(){}$l.prototype={onSpill:function(e){var t=e.dragEl,i=e.putSortable,l=i||this.sortable;l.captureAnimationState(),t.parentNode&&t.parentNode.removeChild(t),l.animateAll()},drop:ta},Vt($l,{pluginName:"removeOnSpill"}),ce.mount(new rd),ce.mount($l,xl);function na(n,e,t){const i=n.slice();return i[16]=e[t],i}function ia(n,e,t){const i=n.slice();return i[19]=e[t],i}function la(n,e,t){const i=n.slice();return i[22]=e[t],i}function ra(n){let e,t,i,l;function r(){return n[11](n[22])}return{c(){e=S("div"),t=S("a"),t.innerHTML='<svg class="icon icon-small"><use href="client/img/icons/icons.svg#pencil-alt"></use></svg>',v(t,"href","javascript:"),v(t,"data-action","editField"),v(t,"class","edit-field svelte-1azk92t"),v(e,"class","right svelte-1azk92t")},m(o,s){N(o,e,s),k(e,t),i||(l=ne(t,"click",r),i=!0)},p(o,s){n=o},d(o){o&&I(e),i=!1,l()}}}function oa(n,e){let t,i,l,r=e[22].label+"",o,s,a,f=e[2].editable&&ra(e),u=[e[10](e[22])],c={};for(let d=0;d<u.length;d+=1)c=ei(c,u[d]);return{key:n,first:null,c(){t=S("li"),i=S("div"),l=S("label"),o=he(r),s=z(),f&&f.c(),a=z(),v(l,"class","svelte-1azk92t"),v(i,"class","left svelte-1azk92t"),Kt(t,c),ge(t,"svelte-1azk92t",!0),this.first=t},m(d,p){N(d,t,p),k(t,i),k(i,l),k(l,o),k(t,s),f&&f.m(t,null),k(t,a)},p(d,p){e=d,p&1&&r!==(r=e[22].label+"")&&Be(o,r),e[2].editable?f?f.p(e,p):(f=ra(e),f.c(),f.m(t,a)):f&&(f.d(1),f=null),Kt(t,c=Wi(u,[p&1&&e[10](e[22])])),ge(t,"svelte-1azk92t",!0)},d(d){d&&I(t),f&&f.d()}}}function aa(n){let e,t=B.translate(n[16].name,"scopeNames")+"",i;return{c(){e=S("span"),i=he(t),v(e,"class","title svelte-1azk92t")},m(l,r){N(l,e,r),k(e,i)},p(l,r){r&2&&t!==(t=B.translate(l[16].name,"scopeNames")+"")&&Be(i,t)},d(l){l&&I(e)}}}function sa(n,e){let t,i,l,r=e[19].label+"",o,s,a=[e[10](e[19])],f={};for(let u=0;u<a.length;u+=1)f=ei(f,a[u]);return{key:n,first:null,c(){t=S("li"),i=S("div"),l=S("label"),o=he(r),s=z(),v(l,"class","svelte-1azk92t"),v(i,"class","left svelte-1azk92t"),Kt(t,f),ge(t,"svelte-1azk92t",!0),this.first=t},m(u,c){N(u,t,c),k(t,i),k(i,l),k(l,o),k(t,s)},p(u,c){e=u,c&2&&r!==(r=e[19].label+"")&&Be(o,r),Kt(t,f=Wi(a,[c&2&&e[10](e[19])])),ge(t,"svelte-1azk92t",!0)},d(u){u&&I(t)}}}function ua(n,e){let t,i,l,r=[],o=new Map,s,a,f=e[1].length>1&&aa(e),u=ue(e[16].fields);const c=d=>d[19].name;for(let d=0;d<u.length;d+=1){let p=ia(e,u,d),h=c(p);o.set(h,r[d]=sa(h,p))}return{key:n,first:null,c(){t=S("div"),f&&f.c(),i=z(),l=S("ul");for(let d=0;d<r.length;d+=1)r[d].c();a=z(),v(l,"class","disabled connected svelte-1azk92t"),v(l,"data-name",s=e[16].name),v(t,"class","svelte-1azk92t"),ge(t,"group",e[1].length>1),this.first=t},m(d,p){N(d,t,p),f&&f.m(t,null),k(t,i),k(t,l);for(let h=0;h<r.length;h+=1)r[h]&&r[h].m(l,null);k(t,a)},p(d,p){e=d,e[1].length>1?f?f.p(e,p):(f=aa(e),f.c(),f.m(t,i)):f&&(f.d(1),f=null),p&1026&&(u=ue(e[16].fields),r=zt(r,p,c,1,e,u,o,l,jt,sa,null,ia)),p&2&&s!==(s=e[16].name)&&v(l,"data-name",s),p&2&&ge(t,"group",e[1].length>1)},d(d){d&&I(t),f&&f.d();for(let p=0;p<r.length;p+=1)r[p].d()}}}function od(n){let e,t,i,l,r,o,s,a=[],f=new Map,u,c,d,p,h,m,g,_,y=[],E=new Map,b=ue(n[0].sort(ca));const A=O=>O[22].name;for(let O=0;O<b.length;O+=1){let D=la(n,b,O),C=A(D);f.set(C,a[O]=oa(C,D))}let w=ue(n[1]);const L=O=>O[16].name;for(let O=0;O<w.length;O+=1){let D=na(n,w,O),C=L(D);E.set(C,y[O]=ua(C,D))}return{c(){e=S("div"),t=S("div"),i=S("div"),l=S("header"),l.textContent=`${B.translate("Selected","labels","Admin")}`,r=z(),o=S("div"),s=S("ul");for(let O=0;O<a.length;O+=1)a[O].c();u=z(),c=S("div"),d=z(),p=S("div"),h=S("div"),m=S("header"),m.textContent=`${B.translate("Available","labels","Admin")}`,g=z(),_=S("div");for(let O=0;O<y.length;O+=1)y[O].c();v(l,"class","svelte-1azk92t"),v(s,"class","enabled connected svelte-1azk92t"),v(o,"class","rows-wrapper svelte-1azk92t"),v(i,"class","well svelte-1azk92t"),v(t,"class","col-sm-5 svelte-1azk92t"),v(c,"class","col-sm-1 svelte-1azk92t"),Fe(c,"width","35px"),v(m,"class","svelte-1azk92t"),v(_,"class","rows-wrapper svelte-1azk92t"),v(h,"class","well svelte-1azk92t"),v(p,"class","col-sm-5 svelte-1azk92t"),v(e,"id","layout"),v(e,"class","row svelte-1azk92t")},m(O,D){N(O,e,D),k(e,t),k(t,i),k(i,l),k(i,r),k(i,o),k(o,s);for(let C=0;C<a.length;C+=1)a[C]&&a[C].m(s,null);k(e,u),k(e,c),k(e,d),k(e,p),k(p,h),k(h,m),k(h,g),k(h,_);for(let C=0;C<y.length;C+=1)y[C]&&y[C].m(_,null);n[12](e)},p(O,D){D&1285&&(b=ue(O[0].sort(ca)),a=zt(a,D,A,1,O,b,f,s,jt,oa,null,la)),D&1026&&(w=ue(O[1]),y=zt(y,D,L,1,O,w,E,_,jt,ua,null,na))},d(O){O&&I(e);for(let D=0;D<a.length;D+=1)a[D].d();for(let D=0;D<y.length;D+=1)y[D].d();n[12](null)}}}function ad(n){let e,t,i={params:n[2],validate:n[9],fetch:n[4],loadLayout:n[3],$$slots:{default:[od]},$$scope:{ctx:n}};return e=new Io({props:i}),n[13](e),e.$on("ready",n[7]),{c(){_e(e.$$.fragment)},m(l,r){ve(e,l,r),t=!0},p(l,[r]){const o={};r&4&&(o.params=l[2]),r&16&&(o.fetch=l[4]),r&8&&(o.loadLayout=l[3]),r&33554471&&(o.$$scope={dirty:r,ctx:l}),e.$set(o)},i(l){t||(j(e.$$.fragment,l),t=!0)},o(l){X(e.$$.fragment,l),t=!1},d(l){n[13](null),be(e,l)}}}function sd(n){return n.toLowerCase()}function fa(n,e){return n[e]}const ca=(n,e)=>n.sortOrder-e.sortOrder;function ud(n,e,t){let i,l,r,{params:o}=e,{selectedFields:s=[]}=e,{availableGroups:a=[]}=e,{loadLayout:f}=e,u;dn(()=>{l&&l.destroy(),r&&r.forEach(E=>E.destroy())});function c(){const E={group:"fields",draggable:"li",animation:150};l=ce.create(i.querySelector("ul.enabled"),{...E,onEnd(b){const A=b.to.closest(".connected");if(A.classList.contains("enabled")){const[w]=s.splice(b.oldIndex,1);s.splice(b.newIndex,0,w)}else{const w=s[b.oldIndex];s.splice(b.oldIndex,1);let L=a.find(O=>!O.prefix);if(a.forEach(O=>{O.prefix&&w.name.startsWith(O.prefix)&&(L=O)}),L.name!==A.attributes["data-name"].value){const O=document.querySelector(`#layout ul.disabled[data-name="${L.name}"]`);O.children.length?O.insertBefore(b.item,O.children[0]):O.appendChild(b.item),L.fields.unshift(w)}else L.fields.splice(b.newIndex,0,w);t(1,a=[...a])}t(0,s=[...s])}}),r=[];for(let b of i.querySelectorAll("ul.disabled")){const A=ce.create(b,{...E,onEnd(w){const L=w.to.closest(".connected");let O=null;if(L.classList.contains("disabled")){if(L!==b){w.oldIndex>=w.from.children.length?w.from.appendChild(w.item):w.from.insertBefore(w.item,w.from.children[w.oldIndex]);return}for(let D of a)if(D.name===L.attributes["data-name"].value){[O]=D.fields.splice(w.oldIndex,1),O&&D.fields.splice(w.newIndex,0,O);break}}else t(1,a=a.map(D=>(D.name===w.from.closest("ul").attributes["data-name"].value&&([O]=D.fields.splice(w.oldIndex,1)),D))),s.splice(w.newIndex,0,O),t(0,s=[...s])}});r.push(A)}}function d(E){o.openEditDialog(E,o.scope,o.dataAttributeList,o.dataAttributesDefs,b=>{t(0,s=s.map(A=>{if(A.name===E.name)for(let w in b)A[w]=b[w];return A}))})}let{fetch:p=()=>s}=e;function h(E){return E.length===0?(Re.notify("Layout cannot be empty","error"),!1):!0}function m(E){const b={};return o.dataAttributeList.forEach(A=>{fa(E,A)!=null&&(b[`data-${sd(A)}`]=fa(E,A))}),b}const g=E=>d(E);function _(E){ze[E?"unshift":"push"](()=>{i=E,t(5,i)})}function y(E){ze[E?"unshift":"push"](()=>{u=E,t(6,u)})}return n.$$set=E=>{"params"in E&&t(2,o=E.params),"selectedFields"in E&&t(0,s=E.selectedFields),"availableGroups"in E&&t(1,a=E.availableGroups),"loadLayout"in E&&t(3,f=E.loadLayout),"fetch"in E&&t(4,p=E.fetch)},[s,a,o,f,p,i,u,c,d,h,m,g,_,y]}let da=class extends Te{constructor(e){super(),Ce(this,e,ud,ad,ke,{params:2,selectedFields:0,availableGroups:1,loadLayout:3,fetch:4})}};const il={upperCaseFirst(n){return n.length?n[0].toUpperCase()+n.slice(1):""}};function fd(n){let e,t,i={params:n[0],selectedFields:n[2],availableGroups:n[3],editable:cd,loadLayout:n[4]};return e=new da({props:i}),n[5](e),{c(){_e(e.$$.fragment)},m(l,r){ve(e,l,r),t=!0},p(l,[r]){const o={};r&1&&(o.params=l[0]),r&4&&(o.selectedFields=l[2]),r&8&&(o.availableGroups=l[3]),e.$set(o)},i(l){t||(j(e.$$.fragment,l),t=!0)},o(l){X(e.$$.fragment,l),t=!1},d(l){n[5](null),be(e,l)}}}let cd=!0;function dd(n,e,t){let{params:i}=e;i.dataAttributeList||(i.dataAttributeList=["id","name","width","widthPx","link","notSortable","align","view","customLabel","editable"]),i.dataAttributesDefs||(i.dataAttributesDefs={link:{type:"bool"},width:{type:"float"},notSortable:{type:"bool"},align:{type:"enum",options:["left","right"]},view:{type:"varchar",readOnly:!0},customLabel:{type:"varchar",readOnly:!0},widthPx:{type:"float"},name:{type:"varchar",readOnly:!0},editable:{type:"bool"}});let l,r=[],o=[];const s=[],a=[];function f(y){Gt.get(i.scope,i.type,i.relatedScope,i.layoutProfileId,E=>{y&&(h(E.layout),y(E))},!1)}function u(y,E){return E==="_self"?B.translate(y,"scopeNamesPlural","Global"):E==="_bookmark"?B.translate("Bookmark","scopeNamesPlural","Global"):E==="_admin"?B.translate("Administration","labels","Global"):B.translate(E,"fields",y)}function c(){var E,b;const y=[];return i.type==="leftSidebar"&&(re.get(["scopes",i.scope,"bookmarkDisabled"])||y.push("_bookmark"),re.get(["scopes",i.scope,"type"])==="Hierarchy"&&!re.get(["scopes",i.scope,"disableHierarchy"])&&y.push("_self"),(b=(E=ut.get())==null?void 0:E.user)!=null&&b.isAdmin&&y.push("_admin")),y}function d(y,E){return re.get(["entityDefs",y,"fields",E,"type"])??""}function p(y,E){const b=E.split("."),A=re.get(["entityDefs",b[0],"links",b[1]])??{};return A.entity===y&&A.relationName?Espo.utils.upperCaseFirst(A.relationName):""}function h(y){const E=[];let b="";if(i.relatedScope&&i.type==="list"&&(b=p(i.scope,i.relatedScope),b)){const O={name:b,scope:b,prefix:b+"__"};let D=Object.keys(re.get(["entityDefs",b,"fields"])||{}).filter(C=>m(d(b,C))&&g(b,C));D=D.filter(C=>!(re.get(["entityDefs",b,"fields",C,"relationField"])??!1)),D=D.sort((C,R)=>u(b,C).localeCompare(u(b,R))).map(C=>O.prefix+C),O.fields=D,E.push(O)}let A=Object.keys(re.get(["entityDefs",i.scope,"fields"])||{}).filter(O=>m(d(i.scope,O))&&g(i.scope,O));A.push(...c()),A=A.sort((O,D)=>u(i.scope,O).localeCompare(u(i.scope,D))),E.unshift({name:i.scope,scope:i.scope,fields:A});const w=[],L=[];for(const O of E)O.fields=O.fields.map(D=>{const C=u(O.scope,O.prefix?D.replace(O.prefix,""):D);O.prefix||(w.includes(C)&&L.push(C),w.push(C));const R={name:D,label:C},W=re.get(["entityDefs",O.scope,"fields",D,"type"]);return W&&re.get(["fields",W,"notSortable"])&&(R.notSortable=!0),R});t(2,r=y),E[0].fields.forEach(O=>{L.includes(O.label)&&(O.label+=` (${O.name})`);const D=r.find(C=>!C.label&&C.name===O.name);D&&(D.label=O.label)}),E[1]&&E[1].fields.forEach(O=>{w.includes(O.label)&&(O.label+=" (Relation)");const D=r.find(C=>!C.label&&C.name===O.name);D&&(D.label=O.label)});for(const O of E)O.fields=O.fields.filter(D=>!r.find(C=>C.name===D.name));t(3,o=E.reverse())}function m(y){return i.fieldTypes?i.fieldTypes.includes(y):!0}function g(y,E){if(s.includes(E)||a.includes(d(y,E)))return!1;const b=["disabled",`layout${il.upperCaseFirst(i.type)}Disabled`];i.reelType&&b.push(`layout${il.upperCaseFirst(i.reelType)}Disabled`);for(let A of b)if(re.get(["entityDefs",y,"fields",E,A]))return!1;return!0}function _(y){ze[y?"unshift":"push"](()=>{l=y,t(1,l)})}return n.$$set=y=>{"params"in y&&t(0,i=y.params)},[i,l,r,o,f,_]}class er extends Te{constructor(e){super(),Ce(this,e,dd,fd,ke,{params:0})}}function pd(n){let e,t;return e=new da({props:{params:n[0],selectedFields:n[1],availableGroups:n[2],loadLayout:n[3]}}),{c(){_e(e.$$.fragment)},m(i,l){ve(e,i,l),t=!0},p(i,[l]){const r={};l&1&&(r.params=i[0]),l&2&&(r.selectedFields=i[1]),l&4&&(r.availableGroups=i[2]),e.$set(r)},i(i){t||(j(e.$$.fragment,i),t=!0)},o(i){X(e.$$.fragment,i),t=!1},d(i){be(e,i)}}}function md(n,e){return!n.getLinkParam(e,"disabled")&&!n.getLinkParam(e,"layoutRelationshipsDisabled")}function hd(n,e,t){let{params:i}=e;i.dataAttributeList||(i.dataAttributeList=["id","name","style","hiddenPerDefault"]),i.dataAttributesDefs||(i.dataAttributesDefs={style:{type:"enum",options:["default","success","danger","primary","info","warning"],translation:"LayoutManager.options.style"},hiddenPerDefault:{type:"bool"},name:{readOnly:!0}});let l=[],r=[];function o(a){Fl.create(i.scope,function(f){Gt.get(i.scope,i.type,null,i.layoutProfileId,u=>{a&&(s(f,u.layout),a(u))},!1)})}function s(a,f){let u=[];for(let h in a.defs.links)["belongsTo","hasMany","hasChildren"].includes(a.defs.links[h].type)&&md(a,h)&&u.push(h);const c=re.get(["clientDefs",i.scope,"bottomPanels","detail"])||[];for(let h of c)h.layoutRelationshipsDisabled||u.push(h.name);u.sort(function(h,m){let g,_,y=c.find(b=>b.name===h),E=c.find(b=>b.name===m);return h in a.defs.links?g=B.translate(h,"links",i.scope):y&&(g=B.translate(y.label,"labels",i.scope)),m in a.defs.links?_=B.translate(m,"links",i.scope):E&&(_=B.translate(E.label,"labels",i.scope)),g.localeCompare(_)});let d=[];t(1,l=[]);const p={name:i.scope,fields:[]};for(let h in f){let m=f[h],g,_=c.find(y=>y.name===m.name);typeof m=="string"||m instanceof String?g={name:m,label:_?B.translate(_.label,"labels",i.scope):B.translate(m,"fields",i.scope)}:(g=m,g.label=_?B.translate(_.label,"labels",i.scope):B.translate(g.name,"fields",i.scope)),i.dataAttributeList.forEach(y=>{if(y==="name"||y in g)return;let E=re.get(["clientDefs",i.scope,"relationshipPanels",g.name,y]);E!==null&&(g[y]=E)}),l.push(g),d.push(g.name)}for(let h of u)if(!d.includes(h)){let m=c.find(g=>g.name===h);p.fields.push({name:h,label:m?B.translate(m.label,"labels",i.scope):B.translate(h,"fields",i.scope)})}t(2,r=[p])}return n.$$set=a=>{"params"in a&&t(0,i=a.params)},[i,l,r,o]}class gd extends Te{constructor(e){super(),Ce(this,e,hd,pd,ke,{params:0})}}function pa(n,e,t){const i=n.slice();return i[43]=e[t],i}function ma(n,e,t){const i=n.slice();return i[46]=e[t],i}function ha(n,e,t){const i=n.slice();return i[49]=e[t],i}function ga(n,e,t){const i=n.slice();return i[52]=e[t],i}function va(n,e,t){const i=n.slice();return i[55]=e[t],i[57]=t,i}function vd(n){let e,t,i,l,r;function o(){return n[20](n[49],n[52],n[57])}function s(...a){return n[21](n[49],n[52],n[57],...a)}return{c(){e=S("li"),t=S("a"),t.innerHTML='<i class="fas fa-minus"></i>',i=z(),v(t,"href","#"),v(t,"data-action","minusCell"),v(t,"class","remove-field svelte-t2y606"),v(e,"class","empty cell svelte-t2y606")},m(a,f){N(a,e,f),k(e,t),k(e,i),l||(r=[ne(t,"click",Zt(o)),ne(e,"dragover",Zt(kd)),ne(e,"drop",s)],l=!0)},p(a,f){n=a},d(a){a&&I(e),l=!1,rt(r)}}}function bd(n){let e,t=n[55].label+"",i,l,r,o,s,a,f,u,c,d,p;function h(){return n[18](n[49],n[52],n[57])}function m(...g){return n[19](n[55],...g)}return{c(){e=S("li"),i=he(t),l=z(),r=S("a"),r.innerHTML='<i class="fas fa-times"></i>',o=z(),v(r,"href","#"),v(r,"data-action","removeField"),v(r,"class","remove-field svelte-t2y606"),v(e,"class","cell svelte-t2y606"),v(e,"draggable","true"),v(e,"data-id",s=n[55].id),v(e,"data-name",a=n[55].name),v(e,"data-full-width",f=n[55].fullWidth?"true":void 0),v(e,"data-custom-label",u=n[55].customLabel?n[55].customLabel:void 0),v(e,"data-no-label",c=n[55].noLabel)},m(g,_){N(g,e,_),k(e,i),k(e,l),k(e,r),k(e,o),d||(p=[ne(r,"click",Zt(h)),ne(e,"dragstart",Ol(m))],d=!0)},p(g,_){n=g,_[0]&2&&t!==(t=n[55].label+"")&&Be(i,t),_[0]&2&&s!==(s=n[55].id)&&v(e,"data-id",s),_[0]&2&&a!==(a=n[55].name)&&v(e,"data-name",a),_[0]&2&&f!==(f=n[55].fullWidth?"true":void 0)&&v(e,"data-full-width",f),_[0]&2&&u!==(u=n[55].customLabel?n[55].customLabel:void 0)&&v(e,"data-custom-label",u),_[0]&2&&c!==(c=n[55].noLabel)&&v(e,"data-no-label",c)},d(g){g&&I(e),d=!1,rt(p)}}}function ba(n){let e;function t(r,o){return r[55]?bd:vd}let i=t(n),l=i(n);return{c(){l.c(),e=Ge()},m(r,o){l.m(r,o),N(r,e,o)},p(r,o){i===(i=t(r))&&l?l.p(r,o):(l.d(1),l=i(r),l&&(l.c(),l.m(e.parentNode,e)))},d(r){r&&I(e),l.d(r)}}}function _a(n,e){let t,i,l,r,o,s,a,f,u;function c(){return e[17](e[49],e[52])}let d=ue(e[52].cells),p=[];for(let h=0;h<d.length;h+=1)p[h]=ba(va(e,d,h));return{key:n,first:null,c(){t=S("li"),i=S("div"),l=S("a"),l.innerHTML='<i class="fas fa-times"></i>',r=z(),o=S("ul");for(let h=0;h<p.length;h+=1)p[h].c();s=z(),v(l,"href","#"),v(l,"data-action","removeRow"),v(l,"class","remove-row pull-right svelte-t2y606"),v(i,"class","svelte-t2y606"),v(o,"class","cells svelte-t2y606"),v(t,"class","row svelte-t2y606"),v(t,"data-number",a=e[52].number),this.first=t},m(h,m){N(h,t,m),k(t,i),k(i,l),k(t,r),k(t,o);for(let g=0;g<p.length;g+=1)p[g]&&p[g].m(o,null);k(t,s),f||(u=[ne(l,"click",Zt(c)),ne(o,"mousedown",Ol(Ed))],f=!0)},p(h,m){if(e=h,m[0]&5634){d=ue(e[52].cells);let g;for(g=0;g<d.length;g+=1){const _=va(e,d,g);p[g]?p[g].p(_,m):(p[g]=ba(_),p[g].c(),p[g].m(o,null))}for(;g<p.length;g+=1)p[g].d(1);p.length=d.length}m[0]&2&&a!==(a=e[52].number)&&v(t,"data-number",a)},d(h){h&&I(t),et(p,h),f=!1,rt(u)}}}function wa(n,e){let t,i,l,r=(e[49].customLabel||e[49].label||"")+"",o,s,a,f,u,c,d,p,h,m,g,_=[],y=new Map,E,b,A,w,L,O,D;function C(){return e[15](e[49])}function R(){return e[16](e[49])}let W=ue(e[49].rows);const Z=H=>H[52].number;for(let H=0;H<W.length;H+=1){let V=ga(e,W,H),ie=Z(V);y.set(ie,_[H]=_a(ie,V))}function q(){return e[22](e[49])}return{key:n,first:null,c(){t=S("li"),i=S("header"),l=S("label"),o=he(r),a=he(` 
                                    `),f=S("a"),f.innerHTML='<svg class="icon icon-small"><use href="client/img/icons/icons.svg#pencil-alt"></use></svg>',u=z(),c=S("a"),d=S("i"),m=z(),g=S("ul");for(let H=0;H<_.length;H+=1)_[H].c();E=z(),b=S("div"),A=S("a"),A.innerHTML='<i class="fas fa-plus"></i>',w=z(),v(l,"data-is-custom",s=e[49].customLabel?"true":void 0),v(l,"class","svelte-t2y606"),v(f,"href","#"),v(f,"data-action","edit-panel-label"),v(f,"class","edit-panel-label svelte-t2y606"),v(d,"class","fas fa-times"),v(c,"href","#"),Fe(c,"float","right"),v(c,"data-action","removePanel"),v(c,"class","remove-panel svelte-t2y606"),v(c,"data-number",p=e[49].number),v(i,"data-name",h=e[49].name),v(i,"class","svelte-t2y606"),v(g,"class","rows svelte-t2y606"),v(A,"href","#"),v(A,"data-action","addRow"),v(A,"class","svelte-t2y606"),v(b,"class","svelte-t2y606"),v(t,"data-number",L=e[49].number),v(t,"class","panel-layout svelte-t2y606"),this.first=t},m(H,V){N(H,t,V),k(t,i),k(i,l),k(l,o),k(i,a),k(i,f),k(i,u),k(i,c),k(c,d),k(t,m),k(t,g);for(let ie=0;ie<_.length;ie+=1)_[ie]&&_[ie].m(g,null);k(t,E),k(t,b),k(b,A),k(t,w),O||(D=[ne(f,"click",Zt(C)),ne(c,"click",Zt(R)),ne(g,"mousedown",Ol(Sd)),ne(A,"click",Zt(q))],O=!0)},p(H,V){e=H,V[0]&2&&r!==(r=(e[49].customLabel||e[49].label||"")+"")&&Be(o,r),V[0]&2&&s!==(s=e[49].customLabel?"true":void 0)&&v(l,"data-is-custom",s),V[0]&2&&p!==(p=e[49].number)&&v(c,"data-number",p),V[0]&2&&h!==(h=e[49].name)&&v(i,"data-name",h),V[0]&5890&&(W=ue(e[49].rows),_=zt(_,V,Z,1,e,W,y,g,jt,_a,null,ga)),V[0]&2&&L!==(L=e[49].number)&&v(t,"data-number",L)},d(H){H&&I(t);for(let V=0;V<_.length;V+=1)_[V].d();O=!1,rt(D)}}}function ya(n){let e,t=B.translate(n[43].name,"scopeNames")+"",i;return{c(){e=S("span"),i=he(t),v(e,"class","title svelte-t2y606")},m(l,r){N(l,e,r),k(e,i)},p(l,r){r[0]&4&&t!==(t=B.translate(l[43].name,"scopeNames")+"")&&Be(i,t)},d(l){l&&I(e)}}}function ka(n,e){let t,i=e[46].label+"",l,r,o,s,a;function f(...u){return e[23](e[46],...u)}return{key:n,first:null,c(){t=S("li"),l=he(i),r=z(),v(t,"class","cell svelte-t2y606"),v(t,"data-name",o=e[46].name),this.first=t},m(u,c){N(u,t,c),k(t,l),k(t,r),s||(a=ne(t,"dragstart",f),s=!0)},p(u,c){e=u,c[0]&4&&i!==(i=e[46].label+"")&&Be(l,i),c[0]&4&&o!==(o=e[46].name)&&v(t,"data-name",o)},d(u){u&&I(t),s=!1,a()}}}function Ea(n,e){let t,i,l,r=[],o=new Map,s,a,f=e[2].length>1&&ya(e),u=ue(e[43].fields);const c=d=>d[46].name;for(let d=0;d<u.length;d+=1){let p=ma(e,u,d),h=c(p);o.set(h,r[d]=ka(h,p))}return{key:n,first:null,c(){t=S("div"),f&&f.c(),i=z(),l=S("ul");for(let d=0;d<r.length;d+=1)r[d].c();a=z(),v(l,"class","disabled cells clearfix svelte-t2y606"),v(l,"data-name",s=e[43].name),v(t,"class","svelte-t2y606"),ge(t,"group",e[2].length>1),this.first=t},m(d,p){N(d,t,p),f&&f.m(t,null),k(t,i),k(t,l);for(let h=0;h<r.length;h+=1)r[h]&&r[h].m(l,null);k(t,a)},p(d,p){e=d,e[2].length>1?f?f.p(e,p):(f=ya(e),f.c(),f.m(t,i)):f&&(f.d(1),f=null),p[0]&4&&(u=ue(e[43].fields),r=zt(r,p,c,1,e,u,o,l,jt,ka,null,ma)),p[0]&4&&s!==(s=e[43].name)&&v(l,"data-name",s),p[0]&4&&ge(t,"group",e[2].length>1)},d(d){d&&I(t),f&&f.d();for(let p=0;p<r.length;p+=1)r[p].d()}}}function _d(n){let e,t,i,l,r,o,s,a,f,u=[],c=new Map,d,p,h,m,g,_,y=[],E=new Map,b,A,w=ue(n[1]);const L=C=>C[49].number;for(let C=0;C<w.length;C+=1){let R=ha(n,w,C),W=L(R);c.set(W,u[C]=wa(W,R))}let O=ue(n[2]);const D=C=>C[43].name;for(let C=0;C<O.length;C+=1){let R=pa(n,O,C),W=D(R);E.set(W,y[C]=Ea(W,R))}return{c(){e=S("div"),t=S("div"),i=S("div"),l=S("header"),l.textContent=`${B.translate("Layout","LayoutManager")}`,r=z(),o=S("a"),o.textContent=`${B.translate("Add Panel","Admin")}`,s=z(),a=S("div"),f=S("ul");for(let C=0;C<u.length;C+=1)u[C].c();d=z(),p=S("div"),h=S("div"),m=S("header"),m.textContent=`${B.translate("Available Fields","Admin")}`,g=z(),_=S("div");for(let C=0;C<y.length;C+=1)y[C].c();v(l,"class","svelte-t2y606"),v(o,"href","#"),v(o,"class","svelte-t2y606"),v(f,"class","panels svelte-t2y606"),v(a,"class","rows-wrapper svelte-t2y606"),v(i,"class","well svelte-t2y606"),v(t,"class","col-md-8 svelte-t2y606"),v(m,"class","svelte-t2y606"),v(_,"class","rows-wrapper svelte-t2y606"),v(h,"class","well available-fields svelte-t2y606"),v(p,"class","col-md-4 svelte-t2y606"),v(e,"id","layout"),v(e,"class","row svelte-t2y606")},m(C,R){N(C,e,R),k(e,t),k(t,i),k(i,l),k(i,r),k(i,o),k(i,s),k(i,a),k(a,f);for(let W=0;W<u.length;W+=1)u[W]&&u[W].m(f,null);k(e,d),k(e,p),k(p,h),k(h,m),k(h,g),k(h,_);for(let W=0;W<y.length;W+=1)y[W]&&y[W].m(_,null);b||(A=ne(o,"click",Zt(n[5])),b=!0)},p(C,R){R[0]&8130&&(w=ue(C[1]),u=zt(u,R,L,1,C,w,c,f,jt,wa,null,ha)),R[0]&4&&(O=ue(C[2]),y=zt(y,R,D,1,C,O,E,_,jt,Ea,null,pa))},d(C){C&&I(e);for(let R=0;R<u.length;R+=1)u[R].d();for(let R=0;R<y.length;R+=1)y[R].d();b=!1,A()}}}function wd(n){let e,t;return e=new Io({props:{params:n[0],validate:n[13],fetch:n[4],loadLayout:n[3],$$slots:{default:[_d]},$$scope:{ctx:n}}}),{c(){_e(e.$$.fragment)},m(i,l){ve(e,i,l),t=!0},p(i,l){const r={};l[0]&1&&(r.params=i[0]),l[0]&6|l[1]&134217728&&(r.$$scope={dirty:l,ctx:i}),e.$set(r)},i(i){t||(j(e.$$.fragment,i),t=!0)},o(i){X(e.$$.fragment,i),t=!1},d(i){be(e,i)}}}function yd(n,e){return e.prefix?n.startsWith(e.prefix):!n.includes("__")}const kd=n=>n.dataTransfer.dropEffect="move",Ed=()=>{},Sd=()=>{};function Dd(n,e,t){let{params:i}=e,{columnCount:l=2}=e,r=["id","label","style"],o={label:{type:"varchar"},style:{type:"enum",options:["default","success","danger","primary","info","warning"],translation:"LayoutManager.options.style"}},s=[],a=[],f=[],u=-1,c=-1,d;pn();function p(P){let M;const G=[];G.push(new Promise(J=>{Gt.get(i.scope,i.type,i.relatedScope,i.layoutProfileId,de=>{M=de,J()},!1)})),i.type==="detail"&&G.push(new Promise(J=>{Gt.get(i.scope,"sidePanelsDetail",null,i.layoutProfileId,de=>{d=de.layout,J()},!1)})),Promise.all(G).then(()=>{P&&(y(M.layout),L(),mn().then(()=>{D()}),P(M))})}function h(P,M){const G=M.split("."),J=re.get(["entityDefs",G[0],"links",G[1]])??{};return J.entity===P&&J.relationName?Espo.utils.upperCaseFirst(J.relationName):""}function m(P,M){return B.translate(M,"fields",P)}function g(P,M){return re.get(["entityDefs",P,"fields",M,"type"])??""}function _(P){return i.fieldTypes?i.fieldTypes.includes(P):!0}function y(P){const M=[];let G="";if(i.relatedScope&&(G=h(i.scope,i.relatedScope),G)){const oe={name:G,scope:G,prefix:G+"__"};let Se=Object.keys(re.get(["entityDefs",G,"fields"])||{}).filter(Me=>_(g(G,Me))&&b(G,Me));Se=Se.filter(Me=>!(re.get(["entityDefs",G,"fields",Me,"relationField"])??!1)),Se=Se.sort((Me,Ze)=>m(G,Me).localeCompare(m(G,Ze))).map(Me=>oe.prefix+Me),oe.fields=Se,M.push(oe)}let J=[];const de=[];for(const oe in re.get(["entityDefs",i.scope,"fields"])||{})b(i.scope,oe)&&(de.push(B.translate(oe,"fields",i.scope)),J.push(oe));M.unshift({name:i.scope,scope:i.scope,fields:J});const Le=[],qe=[];for(const oe of M)oe.fields=oe.fields.map(Se=>{const Me=m(oe.scope,oe.prefix?Se.replace(oe.prefix,""):Se);return oe.prefix||(Le.includes(Me)&&qe.push(Me),Le.push(Me)),{name:Se,label:Me}});t(1,a=P);let it=[];P.forEach((oe,Se)=>{oe.rows.forEach((Me,Ze)=>{Me&&Me.forEach((lt,Ft)=>{Ft==l||!lt||it.push(lt.name)})})}),M[0].fields.forEach(oe=>{qe.includes(oe.label)&&(oe.label+=` (${oe.name})`);const Se=E(oe.name);Se&&(Se.label=oe.label)}),M[1]&&M[1].fields.forEach(oe=>{oe.label+=" (Relation)";const Se=E(oe.name);Se&&(Se.label=oe.label)});for(const oe of M)oe.fields=oe.fields.filter(Se=>!it.find(Me=>Me===Se.name));t(2,f=M.reverse())}function E(P){for(const M of a)for(const G of M.rows)for(const J of G)if(J&&J.name===P)return J;return null}function b(P,M){if(A()&&s.includes(M))return!1;const G=["disabled",`layout${il.upperCaseFirst(i.type)}Disabled`];i.reelType&&G.push(`layout${il.upperCaseFirst(i.reelType)}Disabled`);for(let J of G)if(re.get(["entityDefs",P,"fields",M,J]))return!1;return!0}function A(){if(re.get(["clientDefs",i.scope,"defaultSidePanelDisabled"]))return!1;if(d){for(const P in d)if(P==="default"&&d[P].disabled)return!1}return!0}function w(){return a.map(P=>({...P,rows:P.rows.map(M=>M.cells)}))}function L(){u=-1,c=-1,t(1,a=a.map((P,M)=>(P.number=M,u=M,P.rows=P.rows.map(G=>({number:c++,cells:G})),P)))}function O(P){ce.create(P,{animation:150,group:"rows",draggable:"li.row",onEnd(M){const G=parseInt(M.to.closest(".panel-layout").getAttribute("data-number")),J=parseInt(M.from.closest(".panel-layout").getAttribute("data-number"));if(J===G)t(1,a=a.map(de=>{if(de.number===G){const[Le]=de.rows.splice(M.oldIndex,1);de.rows.splice(M.newIndex,0,Le)}return de}));else{const Le=a.find(qe=>qe.number===J).rows[M.oldIndex];t(1,a=a.map(qe=>(qe.number===J&&qe.rows.splice(M.oldIndex,1),qe.number===G&&qe.rows.splice(M.newIndex,0,Le),qe)))}}})}function D(){const P=document.querySelector("ul.panels");P&&ce.create(P,{animation:150,group:"panels",draggable:"li.panel-layout",onEnd(M){const G=Array.from(M.to.children);t(1,a=G.map(J=>{const de=parseInt(J.getAttribute("data-number"));return a.find(Le=>Le.number===de)}))}}),document.querySelectorAll("ul.rows").forEach(M=>{O(M)}),document.querySelectorAll("ul.cells.disabled").forEach(M=>{ce.create(M,{animation:150,group:"cells",draggable:"li.cell",onEnd(G){const J=G.to.closest(".cells.disabled");if(J&&J!==M){G.oldIndex>=G.from.children.length?G.from.appendChild(G.item):G.from.insertBefore(G.item,G.from.children[G.oldIndex]);return}}})})}function C(){u++;const P={label:"New panel",rows:[{number:c++,cells:[!1,!1]}],number:u,name:`panel${u}`,isCustomLabel:!0};t(1,a=[...a,P]),mn().then(()=>{const M=document.querySelector(`.panel-layout[data-number="${P.number}"] > .rows`);O(M),M.scrollIntoView()})}function R(P){const M=a.find(J=>J.number===P);t(1,a=a.filter(J=>J!==M));let G=[];M.rows.forEach(J=>{J.cells.forEach(de=>{de&&G.push(de)})}),W(G)}function W(P){t(2,f=f.map(M=>(M.fields=[...P.filter(G=>!!G&&yd(G.name,M)),...M.fields],M)))}function Z(P){t(1,a=a.map(M=>(M.number===P&&(M.rows=[...M.rows,{number:c++,cells:Array(l).fill(!1)}]),M)))}function q(P,M){t(1,a=a.map(G=>{if(G.number===P){const J=G.rows.find(de=>de.number===M);G.rows=G.rows.filter(de=>de!=J),W(J.cells.filter(de=>!!de))}return G}))}function H(P,M,G){t(1,a=a.map(J=>(J.number===P&&(J.rows=J.rows.map((de,Le)=>{if(de.number===M){const qe=de.cells[G];qe&&W([qe]),de.cells[G]=!1}return de})),J)))}function V(P,M,G,J){const de=P.dataTransfer.getData("name");let Le=null;for(const oe of f)if(Le=oe.fields.find(Se=>Se.name===de),Le)break;let qe=null,it=null;if(Le)t(2,f=f.map(oe=>(oe.fields=oe.fields.filter(Se=>Se!==Le),oe)));else{if(a.forEach(oe=>{oe.rows.forEach((Se,Me)=>{Se.cells.forEach(Ze=>{Ze&&Ze.name===de&&(Le=Ze,qe=Se.number,it=oe.number)})})}),!Le)return;t(1,a=a.map((oe,Se)=>(it===oe.number&&(oe.rows=oe.rows.map((Me,Ze)=>(Me.number===qe&&(Me.cells=Me.cells.map((lt,Ft)=>lt&&lt.name===de?!1:lt)),Me))),oe)))}t(1,a=a.map(oe=>(M===oe.number&&(oe.rows=oe.rows.map(Se=>(G===Se.number&&(Se.cells=Se.cells.map((Me,Ze)=>Ze===J?(Le.fullWidth&&Se.cells.length>1&&delete Le.fullWidth,Le):Me)),Se))),oe)))}function ie(P){i.onEditPanel(P,r,o,M=>{t(1,a=a.map(G=>(G.number===P.number&&r.forEach(J=>{P[J]=M[J]}),G)))})}function le(P,M,G){t(1,a=a.map(J=>(P===J.number&&(J.rows=J.rows.map(de=>{if(M===de.number){const Le=de.cells.filter((qe,it)=>it!==G);Le.length===1&&Le[0]&&(Le[0].fullWidth=!0),de.cells=Le}return de})),J)))}function Ne(P){let M=0;return P.forEach(G=>{G.rows.forEach(J=>{J.forEach(de=>{de&&M++})})}),M===0?(Re.notify("Layout cannot be empty.","error"),!1):!0}const Ie=P=>ie(P),He=P=>R(P.number),je=(P,M)=>q(P.number,M.number),me=(P,M,G)=>H(P.number,M.number,G),De=(P,M)=>{M.dataTransfer.setData("name",P.name)},We=(P,M,G)=>le(P.number,M.number,G),Y=(P,M,G,J)=>V(J,P.number,M.number,G),$=P=>Z(P.number),fe=(P,M)=>{M.dataTransfer.setData("name",P.name)};return n.$$set=P=>{"params"in P&&t(0,i=P.params),"columnCount"in P&&t(14,l=P.columnCount)},[i,a,f,p,w,C,R,Z,q,H,V,ie,le,Ne,l,Ie,He,je,me,De,We,Y,$,fe]}class Ad extends Te{constructor(e){super(),Ce(this,e,Dd,wd,ke,{params:0,columnCount:14},null,[-1,-1])}}function Cd(n){let e,t;return e=new n[1]({props:{params:n[0],viewType:n[2]}}),{c(){_e(e.$$.fragment)},m(i,l){ve(e,i,l),t=!0},p(i,[l]){const r={};l&1&&(r.params=i[0]),e.$set(r)},i(i){t||(j(e.$$.fragment,i),t=!0)},o(i){X(e.$$.fragment,i),t=!1},d(i){be(e,i)}}}function Td(n,e,t){let{params:i}=e,l,r;const o=re.get(["clientDefs",i.scope,"additionalLayouts",i.type])||i.type;switch(o&&(i.reelType=o),n.$$set=s=>{"params"in s&&t(0,i=s.params)},o){case"list":t(1,l=er);break;case"leftSidebar":t(1,l=er),t(0,i.fieldTypes=["link","linkMultiple"],i);break;case"kanban":t(1,l=er),t(0,i.dataAttributeList=["id","name","link","align","view","isLarge","cssStyle"],i),t(0,i.dataAttributesDefs={link:{type:"bool"},isLarge:{type:"bool"},width:{type:"float"},cssStyle:{type:"varchar"},align:{type:"enum",options:["left","right"]},view:{type:"varchar",readOnly:!0},name:{type:"varchar",readOnly:!0}},i);break;case"relationships":t(1,l=gd);break;case"rightSideView":case"detail":t(1,l=Ad);break}return[i,l,r]}class Ld extends Te{constructor(e){super(),Ce(this,e,Td,Cd,ke,{params:0})}}function Sa(n,e,t){const i=n.slice();return i[2]=e[t],i[4]=t,i}function Od(n){let e,t;function i(o,s){return o[2].html?Md:Nd}let l=i(n),r=l(n);return{c(){e=S("span"),r.c(),v(e,"class",t=pt(n[2].className)+" svelte-14ktdgy")},m(o,s){N(o,e,s),r.m(e,null)},p(o,s){l===(l=i(o))&&r?r.p(o,s):(r.d(1),r=l(o),r&&(r.c(),r.m(e,null))),s&1&&t!==(t=pt(o[2].className)+" svelte-14ktdgy")&&v(e,"class",t)},d(o){o&&I(e),r.d()}}}function Pd(n){let e,t;function i(o,s){return o[2].html?Fd:Bd}let l=i(n),r=l(n);return{c(){e=S("h3"),r.c(),v(e,"class",t=pt(n[2].className)+" svelte-14ktdgy")},m(o,s){N(o,e,s),r.m(e,null)},p(o,s){l===(l=i(o))&&r?r.p(o,s):(r.d(1),r=l(o),r&&(r.c(),r.m(e,null))),s&1&&t!==(t=pt(o[2].className)+" svelte-14ktdgy")&&v(e,"class",t)},d(o){o&&I(e),r.d()}}}function Id(n){let e;function t(r,o){return r[2].url?Hd:Rd}let i=t(n),l=i(n);return{c(){l.c(),e=Ge()},m(r,o){l.m(r,o),N(r,e,o)},p(r,o){i===(i=t(r))&&l?l.p(r,o):(l.d(1),l=i(r),l&&(l.c(),l.m(e.parentNode,e)))},d(r){r&&I(e),l.d(r)}}}function Nd(n){let e=n[2].label+"",t;return{c(){t=he(e)},m(i,l){N(i,t,l)},p(i,l){l&1&&e!==(e=i[2].label+"")&&Be(t,e)},d(i){i&&I(t)}}}function Md(n){let e,t=n[2].html+"",i;return{c(){e=new Wt(!1),i=Ge(),e.a=i},m(l,r){e.m(t,l,r),N(l,i,r)},p(l,r){r&1&&t!==(t=l[2].html+"")&&e.p(t)},d(l){l&&(I(i),e.d())}}}function Bd(n){let e=n[2].label+"",t;return{c(){t=he(e)},m(i,l){N(i,t,l)},p(i,l){l&1&&e!==(e=i[2].label+"")&&Be(t,e)},d(i){i&&I(t)}}}function Fd(n){let e,t=n[2].html+"",i;return{c(){e=new Wt(!1),i=Ge(),e.a=i},m(l,r){e.m(t,l,r),N(l,i,r)},p(l,r){r&1&&t!==(t=l[2].html+"")&&e.p(t)},d(l){l&&(I(i),e.d())}}}function Rd(n){let e,t;function i(o,s){return o[2].html?qd:Wd}let l=i(n),r=l(n);return{c(){e=S("span"),r.c(),v(e,"class",t=pt(n[2].className)+" svelte-14ktdgy")},m(o,s){N(o,e,s),r.m(e,null)},p(o,s){l===(l=i(o))&&r?r.p(o,s):(r.d(1),r=l(o),r&&(r.c(),r.m(e,null))),s&1&&t!==(t=pt(o[2].className)+" svelte-14ktdgy")&&v(e,"class",t)},d(o){o&&I(e),r.d()}}}function Hd(n){let e,t,i;function l(s,a){return s[2].html?zd:jd}let r=l(n),o=r(n);return{c(){e=S("a"),o.c(),v(e,"href",t=n[2].url),v(e,"class",i=pt(n[2].className)+" svelte-14ktdgy")},m(s,a){N(s,e,a),o.m(e,null)},p(s,a){r===(r=l(s))&&o?o.p(s,a):(o.d(1),o=r(s),o&&(o.c(),o.m(e,null))),a&1&&t!==(t=s[2].url)&&v(e,"href",t),a&1&&i!==(i=pt(s[2].className)+" svelte-14ktdgy")&&v(e,"class",i)},d(s){s&&I(e),o.d()}}}function Wd(n){let e=n[2].label+"",t;return{c(){t=he(e)},m(i,l){N(i,t,l)},p(i,l){l&1&&e!==(e=i[2].label+"")&&Be(t,e)},d(i){i&&I(t)}}}function qd(n){let e,t=n[2].html+"",i;return{c(){e=new Wt(!1),i=Ge(),e.a=i},m(l,r){e.m(t,l,r),N(l,i,r)},p(l,r){r&1&&t!==(t=l[2].html+"")&&e.p(t)},d(l){l&&(I(i),e.d())}}}function jd(n){let e=n[2].label+"",t;return{c(){t=he(e)},m(i,l){N(i,t,l)},p(i,l){l&1&&e!==(e=i[2].label+"")&&Be(t,e)},d(i){i&&I(t)}}}function zd(n){let e,t=n[2].html+"",i;return{c(){e=new Wt(!1),i=Ge(),e.a=i},m(l,r){e.m(t,l,r),N(l,i,r)},p(l,r){r&1&&t!==(t=l[2].html+"")&&e.p(t)},d(l){l&&(I(i),e.d())}}}function Da(n){let e,t;function i(o,s){return o[4]!==o[0].length-1?Id:o[1]?Pd:Od}let l=i(n),r=l(n);return{c(){e=S("li"),r.c(),t=z(),v(e,"class","breadcrumbs-item svelte-14ktdgy"),ge(e,"full-width",n[4]===n[0].length-1&&n[1])},m(o,s){N(o,e,s),r.m(e,null),k(e,t)},p(o,s){l===(l=i(o))&&r?r.p(o,s):(r.d(1),r=l(o),r&&(r.c(),r.m(e,t))),s&3&&ge(e,"full-width",o[4]===o[0].length-1&&o[1])},d(o){o&&I(e),r.d()}}}function Gd(n){let e,t=ue(n[0]),i=[];for(let l=0;l<t.length;l+=1)i[l]=Da(Sa(n,t,l));return{c(){e=S("ul");for(let l=0;l<i.length;l+=1)i[l].c();v(e,"class","breadcrumbs-wrapper svelte-14ktdgy")},m(l,r){N(l,e,r);for(let o=0;o<i.length;o+=1)i[o]&&i[o].m(e,null)},p(l,[r]){if(r&3){t=ue(l[0]);let o;for(o=0;o<t.length;o+=1){const s=Sa(l,t,o);i[o]?i[o].p(s,r):(i[o]=Da(s),i[o].c(),i[o].m(e,null))}for(;o<i.length;o+=1)i[o].d(1);i.length=t.length}},i:Ae,o:Ae,d(l){l&&I(e),et(i,l)}}}function Vd(n,e,t){let{items:i=[]}=e,{currentIsHeading:l=!0}=e;return n.$$set=r=>{"items"in r&&t(0,i=r.items),"currentIsHeading"in r&&t(1,l=r.currentIsHeading)},[i,l]}class Ud extends Te{constructor(e){super(),Ce(this,e,Vd,Gd,ke,{items:0,currentIsHeading:1})}}function Aa(n){let e,t,i;return t=new Ud({props:{items:n[0],currentIsHeading:n[1]}}),{c(){e=S("nav"),_e(t.$$.fragment),v(e,"class","header-breadcrumbs")},m(l,r){N(l,e,r),ve(t,e,null),i=!0},p(l,r){const o={};r&1&&(o.items=l[0]),r&2&&(o.currentIsHeading=l[1]),t.$set(o)},i(l){i||(j(t.$$.fragment,l),i=!0)},o(l){X(t.$$.fragment,l),i=!1},d(l){l&&I(e),be(t)}}}function Xd(n){let e,t,i=n[0].length>0&&Aa(n);const l=n[3].default,r=ti(l,n,n[2],null);return{c(){i&&i.c(),e=z(),r&&r.c()},m(o,s){i&&i.m(o,s),N(o,e,s),r&&r.m(o,s),t=!0},p(o,[s]){o[0].length>0?i?(i.p(o,s),s&1&&j(i,1)):(i=Aa(o),i.c(),j(i,1),i.m(e.parentNode,e)):i&&(Ve(),X(i,1,1,()=>{i=null}),Ue()),r&&r.p&&(!t||s&4)&&ii(r,l,o,o[2],t?ni(l,o[2],s,null):li(o[2]),null)},i(o){t||(j(i),j(r,o),t=!0)},o(o){X(i),X(r,o),t=!1},d(o){o&&I(e),i&&i.d(o),r&&r.d(o)}}}function Yd(n,e,t){let{$$slots:i={},$$scope:l}=e,{breadcrumbs:r=[]}=e,{currentIsHeading:o=!0}=e;return n.$$set=s=>{"breadcrumbs"in s&&t(0,r=s.breadcrumbs),"currentIsHeading"in s&&t(1,o=s.currentIsHeading),"$$scope"in s&&t(2,l=s.$$scope)},[r,o,l,i]}class ll extends Te{constructor(e){super(),Ce(this,e,Yd,Xd,ke,{breadcrumbs:0,currentIsHeading:1})}}function Qd(n){let e,t,i,l,r,o,s,a,f,u,c,d,p,h,m,g,_,y,E,b,A,w=B.translate("response","fields","Admin")+"",L,O,D=B.translate("status","labels","Admin")+"",C,R,W,Z,q,H,V,ie;return t=new ll({props:{breadcrumbs:n[2]}}),{c(){e=S("div"),_e(t.$$.fragment),i=z(),l=S("button"),l.textContent=`${B.translate("execute","labels","Admin")}`,r=z(),o=S("div"),s=S("div"),a=S("div"),f=S("div"),u=S("label"),u.textContent=`${B.translate("Type","fields","Admin")}`,c=z(),d=S("div"),p=z(),h=S("div"),m=S("div"),g=S("label"),g.textContent=`${B.translate("request","fields","Admin")}`,_=z(),y=S("div"),E=z(),b=S("div"),A=S("label"),L=he(w),O=S("span"),C=he(D),R=he(": "),W=S("span"),Z=z(),q=S("div"),Fe(l,"margin","10px 7px 0 5px"),v(l,"class","btn btn-primary action"),v(l,"data-action","execute"),v(l,"type","button"),v(e,"class","page-header"),v(u,"class","control-label"),v(u,"data-name","type"),v(d,"class","field"),v(d,"data-name","type"),v(f,"class","col-xs-12 cell form-group"),v(a,"class","row"),v(s,"class","col-sm-3"),v(o,"class","row"),v(g,"class","control-label"),v(g,"data-name","request"),v(y,"class","field"),v(y,"data-name","request"),v(m,"class","col-sm-12 col-md-6 cell form-group"),v(O,"class","pull-right status hidden"),Fe(A,"width","100%"),v(A,"class","control-label"),v(A,"data-name","response"),v(q,"class","field"),v(q,"data-name","response"),v(b,"class","col-sm-12 col-md-6 cell form-group"),v(h,"class","row")},m(le,Ne){N(le,e,Ne),ve(t,e,null),k(e,i),k(e,l),N(le,r,Ne),N(le,o,Ne),k(o,s),k(s,a),k(a,f),k(f,u),k(f,c),k(f,d),N(le,p,Ne),N(le,h,Ne),k(h,m),k(m,g),k(m,_),k(m,y),k(h,E),k(h,b),k(b,A),k(A,L),k(A,O),k(O,C),k(O,R),k(O,W),k(b,Z),k(b,q),H=!0,V||(ie=ne(l,"click",function(){Pt(n[0](n[1]))&&n[0](n[1]).apply(this,arguments)}),V=!0)},p(le,[Ne]){n=le},i(le){H||(j(t.$$.fragment,le),H=!0)},o(le){X(t.$$.fragment,le),H=!1},d(le){le&&(I(e),I(r),I(o),I(p),I(h)),be(t),V=!1,ie()}}}function Jd(n,e,t){let{afterOnMount:i=()=>null}=e,{sendRequest:l=()=>null}=e,r=null;st(()=>{Fl.create("",function(s){t(1,r=s),i(r)})});const o=[{url:"#Admin",label:B.translate("Administration")},{url:"#",label:B.translate("apiRequest","labels","Admin"),className:"header-title"}];return n.$$set=s=>{"afterOnMount"in s&&t(3,i=s.afterOnMount),"sendRequest"in s&&t(0,l=s.sendRequest)},[l,r,o,i]}class Zd extends Te{constructor(e){super(),Ce(this,e,Jd,Qd,ke,{afterOnMount:3,sendRequest:0})}}function Ca(n,e,t){const i=n.slice();return i[12]=e[t],i}function Ta(n){let e,t=n[12].label+"",i,l,r,o,s,a,f;function u(){return n[10](n[12])}return{c(){e=S("button"),i=he(t),l=z(),v(e,"data-action",r=n[12].name),e.disabled=n[1],v(e,"type","button"),v(e,"style",o=n[12].cssStyle),v(e,"class",s=`btn action btn-${n[12].style??"default"}`)},m(c,d){N(c,e,d),k(e,i),k(e,l),a||(f=ne(e,"click",u),a=!0)},p(c,d){n=c,d&1&&t!==(t=n[12].label+"")&&Be(i,t),d&1&&r!==(r=n[12].name)&&v(e,"data-action",r),d&2&&(e.disabled=n[1]),d&1&&o!==(o=n[12].cssStyle)&&v(e,"style",o),d&1&&s!==(s=`btn action btn-${n[12].style??"default"}`)&&v(e,"class",s)},d(c){c&&I(e),a=!1,f()}}}function Kd(n){let e,t,i,l=ue(n[0]),r=[];for(let a=0;a<l.length;a+=1)r[a]=Ta(Ca(n,l,a));const o=n[9].default,s=ti(o,n,n[8],null);return{c(){e=S("div");for(let a=0;a<r.length;a+=1)r[a].c();t=z(),s&&s.c(),v(e,"class","button-container"),Fe(e,"padding-top","10px")},m(a,f){N(a,e,f);for(let u=0;u<r.length;u+=1)r[u]&&r[u].m(e,null);n[11](e),N(a,t,f),s&&s.m(a,f),i=!0},p(a,[f]){if(f&11){l=ue(a[0]);let u;for(u=0;u<l.length;u+=1){const c=Ca(a,l,u);r[u]?r[u].p(c,f):(r[u]=Ta(c),r[u].c(),r[u].m(e,null))}for(;u<r.length;u+=1)r[u].d(1);r.length=l.length}s&&s.p&&(!i||f&256)&&ii(s,o,a,a[8],i?ni(o,a[8],f,null):li(a[8]),null)},i(a){i||(j(s,a),i=!0)},o(a){X(s,a),i=!1},d(a){a&&(I(e),I(t)),et(r,a),n[11](null),s&&s.d(a)}}}function xd(n,e,t){let{$$slots:i={},$$scope:l}=e,{params:r}=e,{fetch:o}=e,{validate:s=()=>!0}=e,a=!1,{buttonList:f=[{name:"save",label:B.translate("Save","labels"),style:"primary"},{name:"cancel",label:B.translate("Cancel","labels")}]}=e,u;function c(){t(1,a=!0);const m=o();s(m)&&r.onSaved(m),t(1,a=!1)}function d(m){if(m.action){m.action();return}switch(m.name){case"save":c();break}}const p=m=>d(m);function h(m){ze[m?"unshift":"push"](()=>{u=m,t(2,u)})}return n.$$set=m=>{"params"in m&&t(4,r=m.params),"fetch"in m&&t(5,o=m.fetch),"validate"in m&&t(6,s=m.validate),"buttonList"in m&&t(0,f=m.buttonList),"$$scope"in m&&t(8,l=m.$$scope)},[f,a,u,d,r,o,s,c,l,i,p,h]}class $d extends Te{constructor(e){super(),Ce(this,e,xd,Kd,ke,{params:4,fetch:5,validate:6,buttonList:0,save:7})}get save(){return this.$$.ctx[7]}}function La(n,e,t){const i=n.slice();return i[22]=e[t],i}function Oa(n,e,t){const i=n.slice();return i[22]=e[t],i}function Pa(n){let e,t,i;function l(){return n[14](n[22])}return{c(){e=S("a"),e.innerHTML='<svg class="icon icon-small"><use href="client/img/icons/icons.svg#pencil-alt"></use></svg>',v(e,"href","javascript:"),v(e,"data-action","editField"),v(e,"class","edit-field svelte-7ge08f")},m(r,o){N(r,e,o),t||(i=ne(e,"click",l),t=!0)},p(r,o){n=r},d(r){r&&I(e),t=!1,i()}}}function Ia(n){let e,t,i;function l(){return n[15](n[22])}return{c(){e=S("a"),e.innerHTML='<svg class="icon icon-small" style="fill: var(--link-color)"><use href="client/img/icons/icons.svg#close"></use></svg>',v(e,"href","javascript:"),v(e,"data-action","removeField"),v(e,"class","remove-field svelte-7ge08f")},m(r,o){N(r,e,o),t||(i=ne(e,"click",l),t=!0)},p(r,o){n=r},d(r){r&&I(e),t=!1,i()}}}function Na(n,e){let t,i,l,r=e[22].label+"",o,s,a,f,u,c,d,p=e[22].canEdit&&Pa(e),h=e[22].canRemove&&Ia(e),m=[rl(e[22]),{class:d=(e[22].isGroup?"group":"")+" "+(e[22].groupEnd?"end":"")+" "+(e[1][e[22].name]&&!e[22].isGroup?"in-group":"")}],g={};for(let _=0;_<m.length;_+=1)g=ei(g,m[_]);return{key:n,first:null,c(){t=S("li"),i=S("div"),l=S("label"),o=he(r),a=z(),f=S("div"),p&&p.c(),u=z(),h&&h.c(),c=z(),v(l,"title",s=e[22].label),v(l,"class","svelte-7ge08f"),v(i,"class","left svelte-7ge08f"),v(f,"class","right svelte-7ge08f"),Kt(t,g),ge(t,"svelte-7ge08f",!0),this.first=t},m(_,y){N(_,t,y),k(t,i),k(i,l),k(l,o),k(t,a),k(t,f),p&&p.m(f,null),k(f,u),h&&h.m(f,null),k(t,c)},p(_,y){e=_,y&1&&r!==(r=e[22].label+"")&&Be(o,r),y&1&&s!==(s=e[22].label)&&v(l,"title",s),e[22].canEdit?p?p.p(e,y):(p=Pa(e),p.c(),p.m(f,u)):p&&(p.d(1),p=null),e[22].canRemove?h?h.p(e,y):(h=Ia(e),h.c(),h.m(f,null)):h&&(h.d(1),h=null),Kt(t,g=Wi(m,[y&1&&rl(e[22]),y&3&&d!==(d=(e[22].isGroup?"group":"")+" "+(e[22].groupEnd?"end":"")+" "+(e[1][e[22].name]&&!e[22].isGroup?"in-group":""))&&{class:d}])),ge(t,"svelte-7ge08f",!0)},d(_){_&&I(t),p&&p.d(),h&&h.d()}}}function Ma(n,e){let t,i,l,r=e[22].label+"",o,s,a,f=[rl(e[22])],u={};for(let c=0;c<f.length;c+=1)u=ei(u,f[c]);return{key:n,first:null,c(){t=S("li"),i=S("div"),l=S("label"),o=he(r),a=z(),v(l,"title",s=e[22].label),v(l,"class","svelte-7ge08f"),v(i,"class","left svelte-7ge08f"),Kt(t,u),ge(t,"svelte-7ge08f",!0),this.first=t},m(c,d){N(c,t,d),k(t,i),k(i,l),k(l,o),k(t,a)},p(c,d){e=c,d&8&&r!==(r=e[22].label+"")&&Be(o,r),d&8&&s!==(s=e[22].label)&&v(l,"title",s),Kt(t,u=Wi(f,[d&8&&rl(e[22])])),ge(t,"svelte-7ge08f",!0)},d(c){c&&I(t)}}}function ep(n){let e,t,i,l,r,o,s,a=[],f=new Map,u,c,d,p,h,m,g,_,y,E=[],b=new Map,A=ue(n[0].sort(Fa));const w=D=>D[22].name;for(let D=0;D<A.length;D+=1){let C=Oa(n,A,D),R=w(C);f.set(R,a[D]=Na(R,C))}let L=ue(n[3]);const O=D=>D[22].name;for(let D=0;D<L.length;D+=1){let C=La(n,L,D),R=O(C);b.set(R,E[D]=Ma(R,C))}return{c(){e=S("div"),t=S("div"),i=S("div"),l=S("header"),l.textContent=`${B.translate("Selected","labels","Admin")}`,r=z(),o=S("div"),s=S("ul");for(let D=0;D<a.length;D+=1)a[D].c();u=z(),c=S("div"),d=z(),p=S("div"),h=S("div"),m=S("header"),m.textContent=`${B.translate("Available","labels","Admin")}`,g=z(),_=S("div"),y=S("ul");for(let D=0;D<E.length;D+=1)E[D].c();v(l,"class","svelte-7ge08f"),v(s,"class","enabled connected svelte-7ge08f"),v(o,"class","rows-wrapper svelte-7ge08f"),v(i,"class","well svelte-7ge08f"),v(t,"class","col-sm-5 svelte-7ge08f"),v(c,"class","col-sm-2 svelte-7ge08f"),v(m,"class","svelte-7ge08f"),v(y,"class","disabled connected svelte-7ge08f"),v(_,"class","rows-wrapper svelte-7ge08f"),v(h,"class","well svelte-7ge08f"),v(p,"class","col-sm-5 svelte-7ge08f"),v(e,"id","layout"),v(e,"class","row svelte-7ge08f")},m(D,C){N(D,e,C),k(e,t),k(t,i),k(i,l),k(i,r),k(i,o),k(o,s);for(let R=0;R<a.length;R+=1)a[R]&&a[R].m(s,null);k(e,u),k(e,c),k(e,d),k(e,p),k(p,h),k(h,m),k(h,g),k(h,_),k(_,y);for(let R=0;R<E.length;R+=1)E[R]&&E[R].m(y,null);n[16](e)},p(D,C){C&2115&&(A=ue(D[0].sort(Fa)),a=zt(a,C,w,1,D,A,f,s,jt,Na,null,Oa)),C&8&&(L=ue(D[3]),E=zt(E,C,O,1,D,L,b,y,jt,Ma,null,La))},d(D){D&&I(e);for(let C=0;C<a.length;C+=1)a[C].d();for(let C=0;C<E.length;C+=1)E[C].d();n[16](null)}}}function tp(n){let e,t,i={params:n[2],validate:n[8],fetch:n[7],loadData:n[5],buttonList:n[4],$$slots:{default:[ep]},$$scope:{ctx:n}};return e=new $d({props:i}),n[17](e),{c(){_e(e.$$.fragment)},m(l,r){ve(e,l,r),t=!0},p(l,[r]){const o={};r&4&&(o.params=l[2]),r&256&&(o.validate=l[8]),r&128&&(o.fetch=l[7]),r&32&&(o.loadData=l[5]),r&16&&(o.buttonList=l[4]),r&134218315&&(o.$$scope={dirty:r,ctx:l}),e.$set(o)},i(l){t||(j(e.$$.fragment,l),t=!0)},o(l){X(e.$$.fragment,l),t=!1},d(l){n[17](null),be(e,l)}}}function np(n){return n.toLowerCase()}function Ba(n,e){return n[e]}function rl(n){let e={};return["name","id"].forEach(t=>{Ba(n,t)!=null&&(e[`data-${np(t)}`]=Ba(n,t))}),e}const Fa=(n,e)=>n.sortOrder-e.sortOrder;function ip(n,e,t){let i,l,r,{params:o}=e,{enabledItems:s=[]}=e,{disabledItems:a=[]}=e,{buttonList:f}=e,{loadData:u}=e,{refresh:c=()=>{}}=e,{editItem:d}=e,{getGroupId:p=()=>"id"}=e,{fieldsInGroup:h}=e,m;function g(D){let C=!1,R={};D.forEach(W=>{if(W.isGroup){C=W.name!=="";return}C&&(R[W.name]=!0)}),t(1,h=R)}st(()=>{_()}),dn(()=>{l&&l.destroy(),r&&r.destroy()});function _(){const D={group:"fields",draggable:"li",animation:150};l=ce.create(i.querySelector("ul.enabled"),{...D,onEnd(C){if(C.to.closest(".connected").classList.contains("enabled")){const[R]=s.splice(C.oldIndex,1);s.splice(C.newIndex,0,R);for(let W=C.newIndex;W<s.length;W++)t(0,s[W].sortOrder=(W>0?s[W-1].sortOrder:0)+W,s);g(s),c()}else{const R=s[C.oldIndex];if(R.canDisabled===!1){c();return}s.splice(C.oldIndex,1),a.splice(C.newIndex,0,R),c()}}}),r=ce.create(i.querySelector("ul.disabled"),{...D,onEnd(C){if(C.to.closest(".connected").classList.contains("disabled")){const[R]=a.splice(C.oldIndex,1);a.splice(C.newIndex,0,R)}else{const R=a[C.oldIndex];a.splice(C.oldIndex,1),s.splice(C.newIndex,0,R);for(let W=C.newIndex;W<s.length;W++)t(0,s[W].sortOrder=(W>0?s[W-1].sortOrder:0)+W,s);g(s),c()}}})}let{fetch:y=()=>{let D=[],C=!1,R=!1;for(let H=0;H<s.length;H++){const V=s[H];if(V.isGroup){C=!V.groupEnd,D.push({id:V.id,name:V.name,color:V.color,iconClass:V.iconClass,items:[]});continue}C?D[D.length-1].items.push(V.name):D.push(V.name)}let W=!1,Z=D.filter(H=>{if(typeof H=="object"){if(H.name!==""&&!H.items.length)return!1;if(H.name!==""&&H.items.length)return W=!0,!0;if(H.name===""&&W)return W=!1,!0;if(H.name===""&&!W)return!1}return!0});R=Z.length!==D.length,D=Z;let q=[];for(let H=0;H<D.length;H++){let V=D[H];q.push(V),typeof V=="object"&&V.name!==""&&(H===D.length-1||!(typeof D[H+1]=="object"&&D[H+1].name===""))&&(R=!0,q.push({id:p(),name:"",items:[]}))}return{adjusted:R,navigation:q}}}=e;function E(D){s.splice(s.findIndex(C=>C.id===D.id),1),c()}let{validate:b=D=>D.length===0?(Re.notify("Menu cannot be empty","error"),!1):!0}=e;const A=D=>d(D),w=D=>E(D);function L(D){ze[D?"unshift":"push"](()=>{i=D,t(9,i)})}function O(D){ze[D?"unshift":"push"](()=>{m=D,t(10,m)})}return n.$$set=D=>{"params"in D&&t(2,o=D.params),"enabledItems"in D&&t(0,s=D.enabledItems),"disabledItems"in D&&t(3,a=D.disabledItems),"buttonList"in D&&t(4,f=D.buttonList),"loadData"in D&&t(5,u=D.loadData),"refresh"in D&&t(12,c=D.refresh),"editItem"in D&&t(6,d=D.editItem),"getGroupId"in D&&t(13,p=D.getGroupId),"fieldsInGroup"in D&&t(1,h=D.fieldsInGroup),"fetch"in D&&t(7,y=D.fetch),"validate"in D&&t(8,b=D.validate)},n.$$.update=()=>{n.$$.dirty&1&&g(s)},[s,h,o,a,f,u,d,y,b,i,m,E,c,p,A,w,L,O]}class Ra extends Te{constructor(e){super(),Ce(this,e,ip,tp,ke,{params:2,enabledItems:0,disabledItems:3,buttonList:4,loadData:5,refresh:12,editItem:6,getGroupId:13,fieldsInGroup:1,fetch:7,validate:8})}}function Ha(n){let e,t,i={params:n[0],enabledItems:n[2],disabledItems:n[4],buttonList:n[6],fieldsInGroup:n[5],refresh:n[7],editItem:n[8],getGroupId:_i};return e=new Ra({props:i}),n[9](e),{c(){_e(e.$$.fragment)},m(l,r){ve(e,l,r),t=!0},p(l,r){const o={};r&1&&(o.params=l[0]),r&4&&(o.enabledItems=l[2]),e.$set(o)},i(l){t||(j(e.$$.fragment,l),t=!0)},o(l){X(e.$$.fragment,l),t=!1},d(l){n[9](null),be(e,l)}}}function lp(n){let e,t=n[3],i,l=Ha(n);return{c(){e=S("div"),l.c()},m(r,o){N(r,e,o),l.m(e,null),i=!0},p(r,[o]){o&8&&ke(t,t=r[3])?(Ve(),X(l,1,1,Ae),Ue(),l=Ha(r),l.c(),j(l,1),l.m(e,null)):l.p(r,o)},i(r){i||(j(l),i=!0)},o(r){X(l),i=!1},d(r){r&&I(e),l.d(r)}}}let rp="_delimiter_";function _i(){return rp+op()}function op(){return Math.floor((1+Math.random())*4294967296).toString(16).substring(1)}function ap(n,e,t){let{params:i}=e,l,r=[],o=[],s=0,a={},f=[{name:"save",label:B.translate("Save","labels"),style:"primary"},{name:"cancel",label:B.translate("Cancel","labels")},{name:"addGroup",label:B.translate("addGroup","labels"),cssStyle:"margin-left: 30px",action:()=>{i.onEditItem({id:_i(),groupEnd:!1},h=>{let m=10;r.length&&(m=r[r.length-1].sortOrder+10);let g={isGroup:!0,canEdit:!0,canRemove:!0,isGroup:!0,canDisabled:!1,name:"",label:"",sortOrder:m,...h};r.push(g),g.name!==""&&r.push({id:_i(),isGroup:!0,canEdit:!0,canRemove:!0,isGroup:!0,canDisabled:!1,groupEnd:!0,name:"",label:"",sortOrder:g.sortOrder+1}),u()})}}];function u(){t(3,s++,s)}function c(h){i.onEditItem(h,m=>{let g=r.findIndex(_=>_.id===m.id);t(2,r[g]=m,r),u()})}d();function d(){let h=i.list??[],m=0;for(let g=0;g<h.length;g++){let _=h[g];if(typeof _=="string")re.get(["scopes",_,"tab"])&&r.push({name:_,label:B.translate(_,"scopeNamesPlural"),sortOrder:m}),m++;else if(typeof _=="object"){r.push({id:_.id??_i(),canEdit:!0,canRemove:!0,isGroup:!0,canDisabled:!1,groupEnd:_.name==="",name:_.name,label:_.name,iconClass:_.iconClass||null,sortOrder:m}),m++;for(const y of _.items)re.get(["scopes",y,"tab"])&&(r.push({name:y,label:B.translate(y,"scopeNamesPlural"),sortOrder:m}),m++);if(g<h.length-1&&h[g+1].name==="")continue;_.name!==""&&(g===h.length-1||typeof h[g+g]=="string"||_.items.length===0)&&(r.push({id:_i(),canEdit:!0,canRemove:!0,canDisabled:!1,isGroup:!0,groupEnd:!0,name:"",label:"",iconClass:_.iconClass||null,sortOrder:m}),m++)}}Object.entries(re.get(["scopes"])).forEach(([g,_])=>{_.disabled||_.emHidden||!_.tab||r.find(y=>y.name===g)||o.push({name:g,label:B.translate(g,"scopeNamesPlural")})}),o.sort((g,_)=>g.label.localeCompare(_.label))}function p(h){ze[h?"unshift":"push"](()=>{l=h,t(1,l)})}return n.$$set=h=>{"params"in h&&t(0,i=h.params)},[i,l,r,s,o,a,f,u,c,p]}class sp extends Te{constructor(e){super(),Ce(this,e,ap,lp,ke,{params:0})}}function Wa(n){let e,t,i={params:n[0],enabledItems:n[3],disabledItems:n[4],buttonList:n[6],fieldsInGroup:n[5],refresh:n[7],validate:fp};return e=new Ra({props:i}),n[8](e),{c(){_e(e.$$.fragment)},m(l,r){ve(e,l,r),t=!0},p(l,r){const o={};r&1&&(o.params=l[0]),e.$set(o)},i(l){t||(j(e.$$.fragment,l),t=!0)},o(l){X(e.$$.fragment,l),t=!1},d(l){n[8](null),be(e,l)}}}function up(n){let e,t=n[2],i,l=Wa(n);return{c(){e=S("div"),l.c()},m(r,o){N(r,e,o),l.m(e,null),i=!0},p(r,[o]){o&4&&ke(t,t=r[2])?(Ve(),X(l,1,1,Ae),Ue(),l=Wa(r),l.c(),j(l,1),l.m(e,null)):l.p(r,o)},i(r){i||(j(l),i=!0)},o(r){X(l),i=!1},d(r){r&&I(e),l.d(r)}}}function fp(n){return!0}function cp(n,e,t){let{params:i}=e,l,r=[],o=[],s=0,a={},f=[{name:"save",label:B.translate("Save","labels"),style:"primary"},{name:"cancel",label:B.translate("Cancel","labels")}];function u(){t(2,s++,s)}c();function c(){let p=i.list??[],h=0;for(let m=0;m<p.length;m++){let g=p[m];typeof g=="string"&&(re.get(["scopes",g,"tab"])&&r.push({name:g,label:B.translate(g,"scopeNamesPlural"),sortOrder:h}),h++)}Object.entries(re.get(["scopes"])).forEach(([m,g])=>{g.disabled||g.emHidden||!g.tab||r.find(_=>_.name===m)||o.push({name:m,label:B.translate(m,"scopeNamesPlural")})}),o.sort((m,g)=>m.label.localeCompare(g.label))}function d(p){ze[p?"unshift":"push"](()=>{l=p,t(1,l)})}return n.$$set=p=>{"params"in p&&t(0,i=p.params)},[i,l,s,r,o,a,f,u,d]}class dp extends Te{constructor(e){super(),Ce(this,e,cp,up,ke,{params:0})}}function qa(n,{delay:e=0,duration:t=400,easing:i=no}={}){const l=+getComputedStyle(n).opacity;return{delay:e,duration:t,easing:i,css:r=>`opacity: ${r*l}`}}function pp(n){let e,t;return{c(){e=S("img"),v(e,"class","preloader svelte-tpjtng"),Mi(e.src,t="client/img/atro-loader.svg")||v(e,"src",t),v(e,"alt","Loading"),Fe(e,"height",`${n[0]}px`)},m(i,l){N(i,e,l)},p(i,[l]){l&1&&Fe(e,"height",`${i[0]}px`)},i:Ae,o:Ae,d(i){i&&I(e)}}}function mp(n,e,t){let{heightPx:i=12}=e;return n.$$set=l=>{"heightPx"in l&&t(0,i=l.heightPx)},[i]}class ol extends Te{constructor(e){super(),Ce(this,e,mp,pp,ke,{heightPx:0})}}const al='<svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960" width="24px" fill="#000"><path d="M560-240 320-480l240-240 56 56-184 184 184 184-56 56Z"/></svg>',sl='<svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960" width="24px" fill="#5f6368"><path d="M504-480 320-664l56-56 240 240-240 240-56-56 184-184Z"/></svg>',ja='<svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960" width="24px" fill="#000"><path d="m640-480 80 80v80H520v240l-40 40-40-40v-240H240v-80l80-80v-280h-40v-80h400v80h-40v280Zm-286 80h252l-46-46v-314H400v314l-46 46Zm126 0Z"/></svg>',za='<svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960" width="24px" fill="#000"><path d="M680-840v80h-40v327l-80-80v-247H400v87l-87-87-33-33v-47h400ZM480-40l-40-40v-240H240v-80l80-80v-46L56-792l56-56 736 736-58 56-264-264h-6v240l-40 40ZM354-400h92l-44-44-2-2-46 46Zm126-193Zm-78 149Z"/></svg>';function Ga(n){let e,t=(n[1]?za:ja)+"",i,l,r;return{c(){e=S("button"),v(e,"class","pin-button svelte-cui6f3"),v(e,"type","button"),v(e,"title",i=B.translate(n[1]?"sidebarUnpin":"sidebarPin"))},m(o,s){N(o,e,s),e.innerHTML=t,l||(r=ne(e,"click",n[6]),l=!0)},p(o,s){s&2&&t!==(t=(o[1]?za:ja)+"")&&(e.innerHTML=t),s&2&&i!==(i=B.translate(o[1]?"sidebarUnpin":"sidebarPin"))&&v(e,"title",i)},d(o){o&&I(e),l=!1,r()}}}function Va(n){let e,t,i=B.translate(n[0]?"sidebarExpand":"sidebarCollapse")+"",l,r;return{c(){e=S("span"),t=he("⟵ "),l=he(i),r=he(" ⟶"),v(e,"class","collapse-text svelte-cui6f3")},m(o,s){N(o,e,s),k(e,t),k(e,l),k(e,r)},p(o,s){s&1&&i!==(i=B.translate(o[0]?"sidebarExpand":"sidebarCollapse")+"")&&Be(l,i)},d(o){o&&I(e)}}}function hp(n){let e,t=(n[0]?al:sl)+"",i;return{c(){e=new Wt(!1),i=Ge(),e.a=i},m(l,r){e.m(t,l,r),N(l,i,r)},p(l,r){r&1&&t!==(t=(l[0]?al:sl)+"")&&e.p(t)},d(l){l&&(I(i),e.d())}}}function gp(n){let e,t=(n[0]?sl:al)+"",i;return{c(){e=new Wt(!1),i=Ge(),e.a=i},m(l,r){e.m(t,l,r),N(l,i,r)},p(l,r){r&1&&t!==(t=(l[0]?sl:al)+"")&&e.p(t)},d(l){l&&(I(i),e.d())}}}function Ua(n){let e,t,i;return{c(){e=S("div"),v(e,"class","sidebar-resizer svelte-cui6f3")},m(l,r){N(l,e,r),t||(i=ne(e,"mousedown",n[8]),t=!0)},p:Ae,d(l){l&&I(e),t=!1,i()}}}function vp(n){let e,t,i,l,r,o,s,a,f,u,c,d,p;const h=n[16].default,m=ti(h,n,n[15],null);let g=!n[5]&&Ga(n),_=n[1]&&!n[5]&&Va(n);function y(w,L){return w[2]==="left"?gp:hp}let E=y(n),b=E(n),A=!n[0]&&Ua(n);return{c(){e=S("aside"),t=S("div"),m&&m.c(),i=z(),l=S("div"),g&&g.c(),r=z(),_&&_.c(),o=z(),s=S("button"),b.c(),a=z(),A&&A.c(),v(t,"class","sidebar-inner svelte-cui6f3"),v(s,"class","collapse-button svelte-cui6f3"),v(s,"type","button"),v(l,"class","collapse-strip svelte-cui6f3"),v(e,"class",f=pt(n[3])+" svelte-cui6f3"),ge(e,"collapsed",n[0]),ge(e,"pinned",n[1]&&!n[5]),Fe(e,"width",n[4])},m(w,L){N(w,e,L),k(e,t),m&&m.m(t,null),k(e,i),k(e,l),g&&g.m(l,null),k(l,r),_&&_.m(l,null),k(l,o),k(l,s),b.m(s,null),k(e,a),A&&A.m(e,null),c=!0,d||(p=[ne(s,"click",n[7]),ne(l,"click",ic(n[7])),ne(e,"mouseenter",n[10]),ne(e,"mouseleave",n[9])],d=!0)},p(w,[L]){m&&m.p&&(!c||L&32768)&&ii(m,h,w,w[15],c?ni(h,w[15],L,null):li(w[15]),null),w[5]?g&&(g.d(1),g=null):g?g.p(w,L):(g=Ga(w),g.c(),g.m(l,r)),w[1]&&!w[5]?_?_.p(w,L):(_=Va(w),_.c(),_.m(l,o)):_&&(_.d(1),_=null),E===(E=y(w))&&b?b.p(w,L):(b.d(1),b=E(w),b&&(b.c(),b.m(s,null))),w[0]?A&&(A.d(1),A=null):A?A.p(w,L):(A=Ua(w),A.c(),A.m(e,null)),(!c||L&8&&f!==(f=pt(w[3])+" svelte-cui6f3"))&&v(e,"class",f),(!c||L&9)&&ge(e,"collapsed",w[0]),(!c||L&42)&&ge(e,"pinned",w[1]&&!w[5]),L&16&&Fe(e,"width",w[4])},i(w){c||(j(m,w),w&&Cn(()=>{c&&(u||(u=vo(e,qa,{},!0)),u.run(1))}),c=!0)},o(w){X(m,w),w&&(u||(u=vo(e,qa,{},!1)),u.run(0)),c=!1},d(w){w&&I(e),m&&m.d(w),g&&g.d(),_&&_.d(),b.d(),A&&A.d(),w&&u&&u.end(),d=!1,rt(p)}}}function bp(n,e,t){let{$$slots:i={},$$scope:l}=e,{className:r=""}=e,{isCollapsed:o=!1}=e,{isPinned:s=!0}=e,{minWidth:a=250}=e,{maxWidth:f=600}=e,{width:u=a}=e,{position:c}=e;const d=pn();let p=!1,h=!1,m,g,_,y,E,b,A=!1;const w=()=>{t(5,A=window.innerWidth<=768)};function L(H){t(1,s=!s),d("sidebar-pin",{isPinned:s})}function O(H){t(0,o=H),d("sidebar-collapse",{isCollapsed:o})}function D(){O(!o)}function C(H){p=!0,m=H.pageX,g=u,document.addEventListener("mousemove",W),document.addEventListener("mouseup",R,{once:!0}),document.body.style.userSelect="none"}function R(){p&&(p=!1,d("sidebar-resize",{width:u}),document.removeEventListener("mousemove",W),document.body.style.userSelect="")}function W(H){if(!p)return;H.preventDefault();const V=c=="left"?H.pageX-m:m-H.pageX,ie=g+V;ie>=a&&ie<=f&&requestAnimationFrame(()=>{t(11,u=ie),d("sidebar-resize",{width:u})})}function Z(){s||(h=!1,y!==null&&clearTimeout(y),y=null,_=setTimeout(()=>{h||O(!0)},500))}function q(){s||(h=!0,_!==null&&clearTimeout(_),_=null,o&&(y=setTimeout(()=>{h&&O(!1)},500)))}return st(()=>{w(),window.addEventListener("resize",w)}),dn(()=>{p&&R(),_!==null&&clearTimeout(_),y!==null&&clearTimeout(y),window.removeEventListener("resize",w)}),n.$$set=H=>{"className"in H&&t(12,r=H.className),"isCollapsed"in H&&t(0,o=H.isCollapsed),"isPinned"in H&&t(1,s=H.isPinned),"minWidth"in H&&t(13,a=H.minWidth),"maxWidth"in H&&t(14,f=H.maxWidth),"width"in H&&t(11,u=H.width),"position"in H&&t(2,c=H.position),"$$scope"in H&&t(15,l=H.$$scope)},n.$$.update=()=>{n.$$.dirty&4108&&(t(3,E="sidebar"),c==="left"?t(3,E+=" sidebar-left"):t(3,E+=" sidebar-right"),r&&t(3,E+=` ${r}`)),n.$$.dirty&2049&&t(4,b=o?"auto":`${u}px`)},[o,s,c,E,b,A,L,D,C,Z,q,u,r,a,f,l,i]}class Xa extends Te{constructor(e){super(),Ce(this,e,bp,vp,ke,{className:12,isCollapsed:0,isPinned:1,minWidth:13,maxWidth:14,width:11,position:2})}}function Ya(n,e,t){const i=n.slice();return i[67]=e[t],i}function Qa(n,e,t){const i=n.slice();return i[70]=e[t],i}function _p(n){let e,t,i,l,r,o,s=ue(n[9]),a=[];for(let u=0;u<s.length;u+=1)a[u]=Za(Qa(n,s,u));let f=n[4]&&Ka(n);return{c(){e=S("div"),t=S("div");for(let u=0;u<a.length;u+=1)a[u].c();i=z(),l=S("span"),r=z(),f&&f.c(),o=Ge(),v(l,"class","btn layout-editor-container svelte-smsth7"),v(t,"class","btn-group"),v(e,"class","panel-group"),Fe(e,"margin-bottom","10px")},m(u,c){N(u,e,c),k(e,t);for(let d=0;d<a.length;d+=1)a[d]&&a[d].m(t,null);k(t,i),k(t,l),n[40](l),N(u,r,c),f&&f.m(u,c),N(u,o,c)},p(u,c){if(c[0]&16912){s=ue(u[9]);let d;for(d=0;d<s.length;d+=1){const p=Qa(u,s,d);a[d]?a[d].p(p,c):(a[d]=Za(p),a[d].c(),a[d].m(t,i))}for(;d<a.length;d+=1)a[d].d(1);a.length=s.length}u[4]?f?f.p(u,c):(f=Ka(u),f.c(),f.m(o.parentNode,o)):f&&(f.d(1),f=null)},i:Ae,o:Ae,d(u){u&&(I(e),I(r),I(o)),et(a,u),n[40](null),f&&f.d(u)}}}function wp(n){let e,t,i;return t=new ol({props:{heightPx:12}}),{c(){e=S("div"),_e(t.$$.fragment),v(e,"class","text-center")},m(l,r){N(l,e,r),ve(t,e,null),i=!0},p:Ae,i(l){i||(j(t.$$.fragment,l),i=!0)},o(l){X(t.$$.fragment,l),i=!1},d(l){l&&I(e),be(t)}}}function Ja(n){let e,t=n[70].label+"",i,l,r;function o(){return n[39](n[70])}return{c(){e=S("a"),i=he(t),v(e,"href","javascript:"),v(e,"class","btn btn-link tree-item svelte-smsth7"),ge(e,"active",n[70].name===n[4].name)},m(s,a){N(s,e,a),k(e,i),l||(r=ne(e,"click",o),l=!0)},p(s,a){n=s,a[0]&512&&t!==(t=n[70].label+"")&&Be(i,t),a[0]&528&&ge(e,"active",n[70].name===n[4].name)},d(s){s&&I(e),l=!1,r()}}}function Za(n){let e,t=n[70].name!==n[4].name&&Ja(n);return{c(){t&&t.c(),e=Ge()},m(i,l){t&&t.m(i,l),N(i,e,l)},p(i,l){i[70].name!==i[4].name?t?t.p(i,l):(t=Ja(i),t.c(),t.m(e.parentNode,e)):t&&(t.d(1),t=null)},d(i){i&&I(e),t&&t.d(i)}}}function Ka(n){let e,t,i=n[4].label+"",l,r,o,s,a,f,u,c,d,p,h,m,g,_,y=n[10]&&xa(n),E=n[4].name!=="_admin"&&$a(n);return{c(){e=S("div"),t=S("h5"),l=he(i),r=z(),o=S("div"),s=S("div"),a=S("input"),f=z(),u=S("div"),y&&y.c(),c=z(),d=S("button"),d.innerHTML='<svg class="icon"><use href="client/img/icons/icons.svg#search"></use></svg>',p=z(),E&&E.c(),h=z(),m=S("div"),m.innerHTML="",v(e,"class","sidebar-header"),v(a,"type","text"),v(a,"tabindex","1"),v(a,"class","form-control category-search svelte-smsth7"),v(a,"placeholder",B.translate("typeToSearch")),ge(a,"search-enabled",!!n[10]),v(d,"class","search-in-tree-button svelte-smsth7"),v(u,"class","button-container svelte-smsth7"),v(s,"class","field svelte-smsth7"),v(s,"data-name","category-search"),v(o,"class","panel-group category-search"),Fe(o,"margin-bottom","20px"),v(m,"class","panel-group category-tree")},m(b,A){N(b,e,A),k(e,t),k(t,l),N(b,r,A),N(b,o,A),k(o,s),k(s,a),n[41](a),k(s,f),k(s,u),y&&y.m(u,null),k(u,c),k(u,d),k(o,p),E&&E.m(o,null),N(b,h,A),N(b,m,A),n[44](m),g||(_=[ne(a,"keydown",n[42]),ne(d,"click",n[16])],g=!0)},p(b,A){A[0]&16&&i!==(i=b[4].label+"")&&Be(l,i),A[0]&1024&&ge(a,"search-enabled",!!b[10]),b[10]?y?y.p(b,A):(y=xa(b),y.c(),y.m(u,c)):y&&(y.d(1),y=null),b[4].name!=="_admin"?E?E.p(b,A):(E=$a(b),E.c(),E.m(o,null)):E&&(E.d(1),E=null)},d(b){b&&(I(e),I(r),I(o),I(h),I(m)),n[41](null),y&&y.d(),E&&E.d(),n[44](null),g=!1,rt(_)}}}function xa(n){let e,t,i;return{c(){e=S("button"),v(e,"class","fas fa-times reset-search-in-tree-button svelte-smsth7")},m(l,r){N(l,e,r),t||(i=ne(e,"click",n[15]),t=!0)},p:Ae,d(l){l&&I(e),t=!1,i()}}}function $a(n){let e,t,i,l,r,o,s,a,f,u,c=ue(n[13]),d=[];for(let p=0;p<c.length;p+=1)d[p]=es(Ya(n,c,p));return{c(){e=S("div"),t=S("div"),i=S("button"),l=S("i"),s=z(),a=S("select");for(let p=0;p<d.length;p+=1)d[p].c();v(l,"class",r=pt("fas "+(n[11]?"fa-sort-amount-up":"fa-sort-amount-down"))+" svelte-smsth7"),v(i,"type","button"),v(i,"class","btn btn-default sort-btn svelte-smsth7"),v(i,"data-tippy","true"),v(i,"title",o=B.translateOption(n[11]?"asc":"desc","sortDirection","Entity")),v(a,"class","form-control svelte-smsth7"),Fe(a,"max-width","300px"),Fe(a,"flex","1"),n[12]===void 0&&Cn(()=>n[43].call(a)),v(t,"class","btn-group"),Fe(t,"display","flex"),Fe(t,"align-items","stretch"),Fe(e,"margin-top","20px"),Fe(e,"display","flex"),Fe(e,"justify-content","space-between"),Fe(e,"flex-wrap","wrap")},m(p,h){N(p,e,h),k(e,t),k(t,i),k(i,l),k(t,s),k(t,a);for(let m=0;m<d.length;m+=1)d[m]&&d[m].m(a,null);fo(a,n[12],!0),f||(u=[ne(i,"click",n[18]),ne(a,"change",n[43]),ne(a,"change",n[17])],f=!0)},p(p,h){if(h[0]&2048&&r!==(r=pt("fas "+(p[11]?"fa-sort-amount-up":"fa-sort-amount-down"))+" svelte-smsth7")&&v(l,"class",r),h[0]&2048&&o!==(o=B.translateOption(p[11]?"asc":"desc","sortDirection","Entity"))&&v(i,"title",o),h[0]&8192){c=ue(p[13]);let m;for(m=0;m<c.length;m+=1){const g=Ya(p,c,m);d[m]?d[m].p(g,h):(d[m]=es(g),d[m].c(),d[m].m(a,null))}for(;m<d.length;m+=1)d[m].d(1);d.length=c.length}h[0]&12288&&fo(a,p[12])},d(p){p&&I(e),et(d,p),f=!1,rt(u)}}}function es(n){let e,t=n[67].label+"",i,l,r;return{c(){e=S("option"),i=he(t),l=z(),e.__value=r=n[67].name,uo(e,e.__value)},m(o,s){N(o,e,s),k(e,i),k(e,l)},p(o,s){s[0]&8192&&t!==(t=o[67].label+"")&&Be(i,t),s[0]&8192&&r!==(r=o[67].name)&&(e.__value=r,uo(e,e.__value))},d(o){o&&I(e)}}}function yp(n){let e,t,i,l;const r=[wp,_p],o=[];function s(a,f){return a[9].length>0?1:-1}return~(t=s(n))&&(i=o[t]=r[t](n)),{c(){e=S("div"),i&&i.c(),v(e,"class","category-panel"),ge(e,"hidden",n[1])},m(a,f){N(a,e,f),~t&&o[t].m(e,null),l=!0},p(a,f){let u=t;t=s(a),t===u?~t&&o[t].p(a,f):(i&&(Ve(),X(o[u],1,1,()=>{o[u]=null}),Ue()),~t?(i=o[t],i?i.p(a,f):(i=o[t]=r[t](a),i.c()),j(i,1),i.m(e,null)):i=null),(!l||f[0]&2)&&ge(e,"hidden",a[1])},i(a){l||(j(i),l=!0)},o(a){X(i),l=!1},d(a){a&&I(e),~t&&o[t].d()}}}function kp(n){let e,t,i,l,r;function o(u){n[45](u)}function s(u){n[46](u)}function a(u){n[47](u)}let f={className:"catalog-tree-panel",position:"left",minWidth:n[2],maxWidth:n[3],$$slots:{default:[yp]},$$scope:{ctx:n}};return n[0]!==void 0&&(f.width=n[0]),n[1]!==void 0&&(f.isCollapsed=n[1]),n[5]!==void 0&&(f.isPinned=n[5]),e=new Xa({props:f}),ze.push(()=>On(e,"width",o)),ze.push(()=>On(e,"isCollapsed",s)),ze.push(()=>On(e,"isPinned",a)),e.$on("sidebar-resize",n[19]),e.$on("sidebar-collapse",n[20]),e.$on("sidebar-pin",n[21]),{c(){_e(e.$$.fragment)},m(u,c){ve(e,u,c),r=!0},p(u,c){const d={};c[0]&4&&(d.minWidth=u[2]),c[0]&8&&(d.maxWidth=u[3]),c[0]&16338|c[2]&2048&&(d.$$scope={dirty:c,ctx:u}),!t&&c[0]&1&&(t=!0,d.width=u[0],Tn(()=>t=!1)),!i&&c[0]&2&&(i=!0,d.isCollapsed=u[1],Tn(()=>i=!1)),!l&&c[0]&32&&(l=!0,d.isPinned=u[5],Tn(()=>l=!1)),e.$set(d)},i(u){r||(j(e.$$.fragment,u),r=!0)},o(u){X(e.$$.fragment,u),r=!1},d(u){be(e,u)}}}function wi(){return window.location.hash.split("/").shift().replace("#","")}function ul(n){n&&n.length&&n.find(".reset-button").remove()}function Ep(n){let e=[];return(n||"").split("|").forEach(t=>{t&&e.push(t)}),e}function Sp(n,e,t){((t||n.tree("getTree")).children||[]).findIndex(r=>e.id===r.id)===-1&&n.tree("appendNode",e,t)}function Dp(n,e,t){((t||n.tree("getTree")).children||[]).findIndex(r=>e.id===r.id)===-1&&n.tree("prependNode",e,t)}function tr(n,e,t){if(!Array.isArray(e)||e.length===0){t();return}const i=e[0];let l=n.find(`.jqtree-title[data-id="${i}"]`);l.length>0&&l.each((r,o)=>{if(o=window.$(o),o.parent().parent().hasClass("jqtree-closed")){let a=n.tree("getNodeByHtmlElement",o);n.tree("openNode",a,!1,()=>tr(n,e.slice(1),t))}else tr(n,e.slice(1),t)})}function Ap(n,e,t){let i,{scope:l}=e,{model:r}=e,{collection:o}=e,{callbacks:s}=e,{minWidth:a=300}=e,{maxWidth:f=600}=e,{currentWidth:u=a}=e,{isCollapsed:c=!1}=e,{mode:d}=e,{maxSize:p=ko.get("recordsPerPageSmall")||20}=e,{renderLayoutEditor:h}=e,{isAdminPage:m=!1}=e,g=!0,_,y,E,b=[],A,w="",L,O,D,C=!0,R=null,W=[];function Z(F){o&&F.name===l&&Ee.set("treeWhereData",l,F.where),c||q()}function q(){H(),ie()}function H(){let F=window.$(_);F&&F.tree("destroy")}function V(){let F=Ee.get("treeWhereData",l)||[];return["_self","_bookmark"].includes(A.name)||(F=[]),F}function ie(F=null){if(!A)return;A.name==="_admin"&&(F=it());let se=window.$(_),T=V();if(F===null&&w&&re.get(["scopes",L,"type"])==="Hierarchy"&&!re.get(["scopes",L,"hierarchyDisabled"])){T.push({type:"textFilter",value:w}),Espo.ajax.getRequest(`${L}/action/TreeData`,{where:T,scope:l,link:A.name,sortBy:R,asc:!!C}).then(Q=>{ie(Q.tree)});return}let U={dataUrl:Ie(),dataFilter:Q=>We(Q),selectable:!0,saveState:!1,autoOpen:!1,dragAndDrop:re.get(["scopes",L,"multiParents"])!==!0&&re.get(["scopes",L,"dragAndDrop"])&&R==="sortOrder",useContextMenu:!1,closedIcon:window.$('<svg class="icon"><use href="client/img/icons/icons.svg#angle-up"></use></svg>'),openedIcon:window.$('<svg class="icon"><use href="client/img/icons/icons.svg#angle-down"></use></svg>'),onCreateLi:(function(Q,x,ee){Q.disabled?x.addClass("disabled"):x.removeClass("disabled");const ye=x.find(".jqtree-title");if(w){let Ke=w.replace(/\*/g,"");if(Ke.length>0){let _t=ye.html(),nn=_t.match(new RegExp(Ke,"ig"));if(nn){let Rt=[];nn.forEach(ln=>{Rt.includes(ln)||(Rt.push(ln),ye.html(_t.replace(new RegExp(ln,"g"),`<b>${ln}</b>`)))})}}}["_self","_bookmark"].includes(A.name)&&r&&r.get("id")===Q.id&&(se.tree("addToSelection",Q),x.addClass("jqtree-selected")),!["_self","_bookmark"].includes(A.name)&&D===Q.id&&(se.tree("addToSelection",Q),x.addClass("jqtree-selected")),A.name==="_admin"&&(re.get(["scopes",wi()])&&Q.id.includes("#"+wi()+"/")&&qe(wi())||Q.id===window.location.hash)&&(se.tree("addToSelection",Q),x.addClass("jqtree-selected")),ye.attr("data-id",Q.id),Q.showMoreDirection?(x.addClass("show-more"),x.addClass("show-more-"+Q.showMoreDirection),x.find(".jqtree-title").addClass("more-label")):ye.attr("title",Q.name)}).bind(this)};F&&(U.data=F,U.autoOpen=!0,U.dragAndDrop=!1,delete U.dataUrl,delete U.dataFilter),se.tree(U),se.on("tree.load_data",Q=>{Re.notify(!1),s!=null&&s.treeLoad&&s.treeLoad(L,U)}),se.on("tree.refresh",Q=>{if(A.name==="_admin"){let x=wi();re.get(["scopes",x])&&(He(x,[]),s!=null&&s.selectNode&&s.selectNode({id:x},!0));return}if(Ee.get("selectedNodeId",l)&&d==="list"){const x=Ee.get("selectedNodeId",l),ee=Ee.get("selectedNodeRoute",l);s!=null&&s.selectNode&&s.selectNode({id:x,route:ee},!0)}d==="detail"&&(r&&["_self","_bookmark"].includes(A.name)?He(r.get("id"),Object.keys(r.get("hierarchyRoute")??[]).reverse()):Ee.get("selectedNodeId",l)&&He(Ee.get("selectedNodeId",l),Ep(Ee.get("selectedNodeRoute",l))))}),se.on("tree.move",Q=>{Q.preventDefault();const x="parent";let ee=Q.move_info,ye={_position:ee.position,_sortAsc:C,_target:ee.target_node.id};ye[x+"Id"]=null,ye[x+"Name"]=null,ee.position==="inside"?(ye[x+"Id"]=ee.target_node.id,ye[x+"Name"]=ee.target_node.name):ee.target_node.parent.id&&(ye[x+"Id"]=ee.target_node.parent.id,ye[x+"Name"]=ee.target_node.parent.name),Espo.ajax.patchRequest(`${L}/${ee.moved_node.id}`,ye).success(Ke=>{ee.do_move()})}),se.on("tree.click",Q=>{if(Q.preventDefault(),A.name==="_admin"&&!Q.node.disabled){window.location.href=Q.node.id;return}if(Q.node.disabled)return!1;const x=window.$(Q.click_event.target);if(x.hasClass("jqtree-title")||x.parent().hasClass("jqtree-title")){let ee=Q.node;if(ee.showMoreDirection)return Ne(ee);ee.element&&le(window.$(ee.element));let ye=[];for(;ee.parent.id;)ye.push(ee.parent.id),ee=ee.parent;let Ke={id:Q.node.id,route:"",click:!0};ye.length>0&&(Ke.route="|"+ye.reverse().join("|")+"|"),s!=null&&s.selectNode&&s.selectNode(Ke)}})}function le(F){if(F&&F.length&&(ul(F),D&&i)){const se=document.createElement("span");se.classList.add("reset-button","fa","fa-times","pull-right"),se.addEventListener("click",()=>{ul(F),je()}),F.append(se)}}function Ne(F){Re.notify("Loading..."),Espo.ajax.getRequest(Ie(F)).then(se=>{if(se.list){const T=window.$(_);F.showMoreDirection==="up"?We(JSON.parse(JSON.stringify(se)),"up").reverse().forEach(U=>{Dp(T,U,F.getParent())}):F.showMoreDirection==="down"&&We(JSON.parse(JSON.stringify(se)),"down").forEach(U=>{Sp(T,U,F.getParent())}),T.tree("removeNode",F)}})}function Ie(F){let se=L+`/action/Tree?isTreePanel=1&scope=${l}&link=${A.name}`;if(R&&(se+=`&sortBy=${R}&asc=${C?"true":"false"}`),F&&F.showMoreDirection){let U=F.offset,Q=p;if(F.showMoreDirection==="up"){let x=F.offset-Q;U=F.offset-Q,x<0?(U=0,Q=Q+x):U=x}else F.showMoreDirection==="down"&&(U=U+1);se+="&offset="+U+"&maxSize="+Q,F.getParent()&&(se+="&node="+F.getParent().id)}else F&&F.id?se+="&node="+F.id+"&offset=0&maxSize="+p:r&&r.id&&[r.urlRoot,"Bookmark"].includes(L)&&(se+="&selectedId="+r.id);let T=V();return w&&(T=[...T,{type:"textFilter",value:w}]),T.length>0&&(se+="&",se+=window.$.param({where:T})),se}function He(F,se){const T=window.$(_);tr(T,se,()=>{let Q=T.tree("getNodeById",F);Q&&(T.tree("addToSelection",Q),D=F),T.find(".jqtree-title").each((x,ee)=>{ee=window.$(ee);let ye=ee.parent().parent();if(ee.data("id")!==F&&T.tree("getNodeById",ee.data("id"))){T.tree("removeFromSelection",T.tree("getNodeById",ee.data("id"))),ye.removeClass("jqtree-selected"),ul(ye);return}else ye.hasClass("jqtree-selected")||ye.addClass("jqtree-selected");ye.hasClass("jqtree-selected")&&le(ye)})})}function je(){s!=null&&s.selectNode&&s.selectNode({id:D})}function me(F){const se=De(),T=se.tree("getNodeById",F);D=null,T&&(T.element&&ul(window.$(T.element)),se.tree("removeFromSelection",T))}function De(){return window.$(_)}function We(F,se=null){return F.list?(Y(F.list,se),F.list):F}function Y(F,se){if(!se||se==="up"){let T=JSON.parse(JSON.stringify(F)).shift();T&&T.offset&&T.offset!==0&&F.unshift({id:"show-more-"+T.offset,offset:T.offset,showMoreDirection:"up",name:B.translate("Show more")})}if(!se||se==="down"){let T=JSON.parse(JSON.stringify(F)).pop();T&&T.offset&&T.total-1!==T.offset&&F.push({id:"show-more-"+T.offset,offset:T.offset,showMoreDirection:"down",name:B.translate("Show more")})}F.forEach(T=>{T.children&&Y(T.children)})}function $(F){return F==="_self"?l:F==="_bookmark"?"Bookmark":re.get(["entityDefs",l,"links",F,"entity"])||re.get(["entityDefs",l,"fields",F,"entity"])}function fe(F){A&&A.name===F.name||(t(10,w=""),t(8,E.value="",E),Ee.clear("treeSearchValue",L),Ee.clear("treeSearchValue","_admin"),d==="list"?D&&(s!=null&&s.selectNode&&s.selectNode({id:D}),D=null):D=null,t(4,A=F),Se(!1),Ee.set("treeItem",l,F.name),Re.notify("Loading..."),mn().then(()=>{q()}))}function P(){t(8,E.value="",E),d==="detail"&&Ee.clear("treeWhereData",l),M()}function M(){t(10,w=E.value),w&&A.name==="_admin"?Ee.set("treeSearchValue","_admin",w):w?Ee.set("treeSearchValue",l,w):(Ee.clear("treeSearchValue",l),Ee.clear("treeSearchValue","_admin")),Re.notify("Loading..."),q()}function G(){L==="Bookmark"&&q()}function J(){return O}function de(F){t(12,R=F.target.value),Ee.set("treeItemSorting",l,{sortBy:R,sortAsc:C}),q()}function Le(F){F.preventDefault(),t(11,C=!C),Ee.set("treeItemSorting",l,{sortBy:R,sortAsc:C}),q()}function qe(F){let se=0;for(const T of it())for(const U of T.children)U.id.includes("#"+F)&&(se+=1);return se==1}function it(){let F=re.get(["app","adminPanel"]),se=Object.keys(F).length,T=[],U=0;return Object.entries(F).forEach(([Q,x])=>{let ee={id:Q,name:B.get("Admin","labels",x.label)??x.label,offset:U,total:se,disabled:!0,load_on_demand:!1,children:[]},ye=0,Ke=x.itemList.length;for(const _t of x.itemList){if(_t.listDisabled)continue;const nn=B.translate(_t.label,"labels","Admin");((w??"").length<3||nn.toLowerCase().includes(w.toLowerCase()))&&(ee.children.push({id:_t.url,name:nn,offset:ye,total:Ke,disabled:!1,load_on_demand:!1}),ye++)}ee.children.length!==0&&(T.push(ee),U++)}),T}function oe(F){m?(t(4,A={name:"_admin",label:B.get("Global","labels","Administration")}),t(9,b=[A]),F()):Gt.get(l,"leftSidebar",null,null,se=>{O=se,t(9,b=se.layout.map(U=>{const Q=re.get(["entityDefs",l,"fields",U.name,"type"]);let x="";if(U.name==="_self")x=B.get("Global","scopeNamesPlural",l);else if(U.name==="_bookmark")x=B.get("Global","scopeNamesPlural","Bookmark");else if(U.name==="_admin")x=B.get("Global","labels","Administration");else{if(Q=="link"){const ee=$(U.name);x=B.get("Global","scopeNamesPlural",ee)}x||(x=B.get(l,"links",U.name)||B.get(l,"fields",U.name)||B.get("Global","fields",U.name))}return{name:U.name,label:x}}));let T=Ee.get("treeItem",l);wi()===l&&(T="_admin"),b.length>0&&(!T||!b.find(U=>U.name===T)?(Ee.set("treeItem",l,b[0].name),t(4,A=b[0])):t(4,A=b.find(U=>U.name===T)),Se(!0)),F()})}function Se(F){var se;if(t(38,L=$(A.name)),L==="Bookmark"&&t(38,L=l),F&&A.name===Ee.get("treeItem",l)){const T=Ee.get("treeItemSorting",l);if(T&&typeof T=="object"&&re.get(["entityDefs",L,"fields",T.sortBy])){t(11,C=T.sortAsc),t(12,R=T.sortBy);return}}re.get(["scopes",L,"type"])==="Hierarchy"&&!re.get(["scopes",L,"hierarchyDisabled"])&&A.name!=="_bookmark"?t(12,R="sortOrder"):t(12,R=re.get(["entityDefs",L,"collection","sortBy"])||"name"),re.get(["entityDefs",L,"fields",R])||t(12,R=(se=W[0])==null?void 0:se.name),t(11,C=!!re.get(["entityDefs",L,"collection","asc"])),Ee.set("treeItemSorting",l,{sortBy:R,sortAsc:C})}function Me(){oe(()=>{mn().then(()=>{q()})})}st(()=>{const F=Ee.get("panelWidth",l);F&&t(0,u=parseInt(F)||a),(window.innerWidth<=767||Ee.get("catalog-tree-panel",l))&&t(1,c=!0),t(5,g=Ee.get("catalog-tree-panel-pin",l)!=="not-pinned"),oe(()=>{var se,T;b.length===0&&(t(1,c=!0),(T=(se=ut.get())==null?void 0:se.user)!=null&&T.isAdmin),mn().then(()=>{A.name==="_admin"?t(10,w=Ee.get("treeSearchValue","_admin")||null):t(10,w=Ee.get("treeSearchValue",l)||null),w&&t(8,E.value=w,E),c||ie(),h&&h(y)})})});function Ze(F){Ee.set("panelWidth",l,u.toString()),s!=null&&s.treeWidthChanged&&s.treeWidthChanged(u)}function lt(F){Ee.set("catalog-tree-panel",l,c?"collapsed":""),c||q()}function Ft(F){Ee.set("catalog-tree-panel-pin",l,g?"pin":"not-pinned")}const Qt=F=>fe(F);function bn(F){ze[F?"unshift":"push"](()=>{y=F,t(7,y)})}function Wn(F){ze[F?"unshift":"push"](()=>{E=F,t(8,E)})}const qn=F=>F.key==="Enter"&&M();function jn(){R=oc(this),t(12,R),t(13,W),t(38,L),t(22,l),t(4,A)}function zn(F){ze[F?"unshift":"push"](()=>{_=F,t(6,_)})}function nr(F){u=F,t(0,u)}function ir(F){c=F,t(1,c)}function lr(F){g=F,t(5,g)}return n.$$set=F=>{"scope"in F&&t(22,l=F.scope),"model"in F&&t(23,r=F.model),"collection"in F&&t(24,o=F.collection),"callbacks"in F&&t(25,s=F.callbacks),"minWidth"in F&&t(2,a=F.minWidth),"maxWidth"in F&&t(3,f=F.maxWidth),"currentWidth"in F&&t(0,u=F.currentWidth),"isCollapsed"in F&&t(1,c=F.isCollapsed),"mode"in F&&t(26,d=F.mode),"maxSize"in F&&t(27,p=F.maxSize),"renderLayoutEditor"in F&&t(28,h=F.renderLayoutEditor),"isAdminPage"in F&&t(29,m=F.isAdminPage)},n.$$.update=()=>{if(n.$$.dirty[0]&16&&t(38,L=A?$(A.name):null),n.$$.dirty[0]&67108880&&(i=A&&(!["_self","_bookmark"].includes(A.name)&&d==="list"||A.name==="_admin")),n.$$.dirty[0]&4194304|n.$$.dirty[1]&128)if(!L)t(13,W=[]);else{const F=L==="Bookmark"?l:L,se=re.get(["entityDefs",F,"fields"]);t(13,W=Object.keys(se).filter(function(T){return["varchar","text","int","float","date","datetime"].includes(se[T].type)&&!se[T].notStorable}).sort(function(T,U){return B.translate(T,"fields",F).localeCompare(B.translate(U,"fields",F))}).map(T=>({name:T,label:B.translate(T,"fields",F)})))}},[u,c,a,f,A,g,_,y,E,b,w,C,R,W,fe,P,M,de,Le,Ze,lt,Ft,l,r,o,s,d,p,h,m,Z,q,He,me,De,G,J,Me,L,Qt,bn,Wn,qn,jn,zn,nr,ir,lr]}class Cp extends Te{constructor(e){super(),Ce(this,e,Ap,kp,ke,{scope:22,model:23,collection:24,callbacks:25,minWidth:2,maxWidth:3,currentWidth:0,isCollapsed:1,mode:26,maxSize:27,renderLayoutEditor:28,isAdminPage:29,handleCollectionSearch:30,rebuildTree:31,selectTreeNode:32,unSelectTreeNode:33,getTreeEl:34,reloadBookmarks:35,getLayoutData:36,refreshLayout:37},null,[-1,-1,-1])}get handleCollectionSearch(){return this.$$.ctx[30]}get rebuildTree(){return this.$$.ctx[31]}get selectTreeNode(){return this.$$.ctx[32]}get unSelectTreeNode(){return this.$$.ctx[33]}get getTreeEl(){return this.$$.ctx[34]}get reloadBookmarks(){return this.$$.ctx[35]}get getLayoutData(){return this.$$.ctx[36]}get refreshLayout(){return this.$$.ctx[37]}}function ts(n,e,t){const i=n.slice();return i[15]=e[t],i}function Tp(n){let e,t,i,l=ue(n[1]),r=[];for(let o=0;o<l.length;o+=1)r[o]=is(ts(n,l,o));return{c(){e=S("h5"),e.textContent=`${B.translate("Saved Filters")}`,t=z(),i=S("ul");for(let o=0;o<r.length;o+=1)r[o].c()},m(o,s){N(o,e,s),N(o,t,s),N(o,i,s);for(let a=0;a<r.length;a+=1)r[a]&&r[a].m(i,null)},p(o,s){if(s&507){l=ue(o[1]);let a;for(a=0;a<l.length;a+=1){const f=ts(o,l,a);r[a]?r[a].p(f,s):(r[a]=is(f),r[a].c(),r[a].m(i,null))}for(;a<r.length;a+=1)r[a].d(1);r.length=l.length}},d(o){o&&(I(e),I(t),I(i)),et(r,o)}}}function Lp(n){let e,t;return{c(){e=S("img"),v(e,"class","preloader svelte-1w2fnjq"),Mi(e.src,t="client/img/atro-loader.svg")||v(e,"src",t),v(e,"alt","loader")},m(i,l){N(i,e,l)},p:Ae,d(i){i&&I(e)}}}function Op(n){var d;let e,t,i,l,r,o=Nt.check("SavedSearch","edit"),s,a=Nt.check("SavedSearch","delete"),f=((d=n[3])==null?void 0:d.id)===n[15].id&&ns(),u=o&&Pp(n),c=a&&Mp(n);return{c(){e=S("div"),f&&f.c(),t=z(),i=S("a"),i.innerHTML='<svg class="icon"><use href="client/img/icons/icons.svg#dots"></use></svg>',l=z(),r=S("ul"),u&&u.c(),s=z(),c&&c.c(),Fe(i,"cursor","pointer"),v(i,"class","dropdown-toggle"),v(i,"data-toggle","dropdown"),v(r,"class","dropdown-menu pull-right"),v(e,"class","list-row-buttons btn-group")},m(p,h){N(p,e,h),f&&f.m(e,null),k(e,t),k(e,i),k(e,l),k(e,r),u&&u.m(r,null),k(r,s),c&&c.m(r,null)},p(p,h){var m;((m=p[3])==null?void 0:m.id)===p[15].id?f||(f=ns(),f.c(),f.m(e,t)):f&&(f.d(1),f=null),o&&u.p(p,h),a&&c.p(p,h)},d(p){p&&I(e),f&&f.d(),u&&u.d(),c&&c.d()}}}function ns(n){let e;return{c(){e=S("span"),e.innerHTML='<svg class="icon"><use href="client/img/icons/icons.svg#edit"></use></svg>',Fe(e,"position","absolute"),Fe(e,"right","15px")},m(t,i){N(t,e,i)},d(t){t&&I(e)}}}function Pp(n){let e,t,i,l,r;function o(u,c){var d;return((d=u[3])==null?void 0:d.id)===u[15].id?Np:Ip}let s=o(n),a=s(n);function f(){return n[12](n[15])}return{c(){a.c(),e=z(),t=S("li"),i=S("a"),i.textContent=`${B.translate("Rename")}`},m(u,c){a.m(u,c),N(u,e,c),N(u,t,c),k(t,i),l||(r=ne(i,"click",f),l=!0)},p(u,c){n=u,s===(s=o(n))&&a?a.p(n,c):(a.d(1),a=s(n),a&&(a.c(),a.m(e.parentNode,e)))},d(u){u&&(I(e),I(t)),a.d(u),l=!1,r()}}}function Ip(n){let e,t,i,l;function r(){return n[11](n[15])}return{c(){e=S("li"),t=S("a"),t.textContent=`${B.translate("Edit")}`},m(o,s){N(o,e,s),k(e,t),i||(l=ne(t,"click",r),i=!0)},p(o,s){n=o},d(o){o&&I(e),i=!1,l()}}}function Np(n){let e,t,i,l;return{c(){e=S("li"),t=S("a"),t.textContent=`${B.translate("Cancel Edit")}`},m(r,o){N(r,e,o),k(e,t),i||(l=ne(t,"click",function(){Pt(n[7])&&n[7].apply(this,arguments)}),i=!0)},p(r,o){n=r},d(r){r&&I(e),i=!1,l()}}}function Mp(n){let e,t,i,l;function r(){return n[13](n[15])}return{c(){e=S("li"),t=S("a"),t.textContent=`${B.translate("Remove")}`},m(o,s){N(o,e,s),k(e,t),i||(l=ne(t,"click",r),i=!0)},p(o,s){n=o},d(o){o&&I(e),i=!1,l()}}}function is(n){let e,t,i,l,r,o,s=n[15].name+"",a,f,u,c,d,p,h=Nt.check("SavedSearch","edit")||Nt.check("SavedSearch","delete"),m,g,_;function y(...b){return n[10](n[15],...b)}let E=h&&Op(n);return{c(){e=S("li"),t=S("label"),i=S("input"),o=z(),a=he(s),f=z(),u=cn("svg"),c=cn("use"),p=z(),E&&E.c(),m=z(),v(i,"type","checkbox"),i.checked=l=n[0].includes(n[15].id),v(i,"name",r=n[15].id),v(c,"href",d=n[15].isPublic?"client/img/icons/icons.svg#group":"client/img/icons/icons.svg#shield"),v(u,"class","icon visibility svelte-1w2fnjq"),ge(t,"active",n[0].includes(n[15].id)),v(e,"class","checkbox")},m(b,A){N(b,e,A),k(e,t),k(t,i),k(t,o),k(t,a),k(t,f),k(t,u),k(u,c),k(e,p),E&&E.m(e,null),k(e,m),g||(_=ne(i,"change",y),g=!0)},p(b,A){n=b,A&3&&l!==(l=n[0].includes(n[15].id))&&(i.checked=l),A&2&&r!==(r=n[15].id)&&v(i,"name",r),A&2&&s!==(s=n[15].name+"")&&Be(a,s),A&2&&d!==(d=n[15].isPublic?"client/img/icons/icons.svg#group":"client/img/icons/icons.svg#shield")&&v(c,"href",d),A&3&&ge(t,"active",n[0].includes(n[15].id)),h&&E.p(n,A)},d(b){b&&I(e),E&&E.d(),g=!1,_()}}}function Bp(n){let e;function t(r,o){if(r[2])return Lp;if(r[1].length>0)return Tp}let i=t(n),l=i&&i(n);return{c(){e=S("div"),l&&l.c(),v(e,"class","checkboxes-filter")},m(r,o){N(r,e,o),l&&l.m(e,null)},p(r,[o]){i===(i=t(r))&&l?l.p(r,o):(l&&l.d(1),l=i&&i(r),l&&(l.c(),l.m(e,null)))},i:Ae,o:Ae,d(r){r&&I(e),l&&l.d()}}}function Fp(n,e,t){let{scope:i}=e,{savedSearchList:l=[]}=e,{loading:r=!0}=e,{editingItem:o=null}=e,{edit:s=y=>{}}=e,{rename:a=y=>{}}=e,{remove:f=y=>{}}=e,{cancel:u=()=>{}}=e,{selectedSavedSearchIds:c=[]}=e,d=pn();function p(y,E){y.target.checked?t(0,c=[...c,E.id]):t(0,c=[...c.filter(A=>A!==E.id)]),d("change",{selectedSavedSearchIds:c})}const h=(y,E)=>p(E,y),m=y=>{s(y)},g=y=>a(y),_=y=>f(y);return n.$$set=y=>{"scope"in y&&t(9,i=y.scope),"savedSearchList"in y&&t(1,l=y.savedSearchList),"loading"in y&&t(2,r=y.loading),"editingItem"in y&&t(3,o=y.editingItem),"edit"in y&&t(4,s=y.edit),"rename"in y&&t(5,a=y.rename),"remove"in y&&t(6,f=y.remove),"cancel"in y&&t(7,u=y.cancel),"selectedSavedSearchIds"in y&&t(0,c=y.selectedSavedSearchIds)},[c,l,r,o,s,a,f,u,p,i,h,m,g,_]}class Rp extends Te{constructor(e){super(),Ce(this,e,Fp,Bp,ke,{scope:9,savedSearchList:1,loading:2,editingItem:3,edit:4,rename:5,remove:6,cancel:7,selectedSavedSearchIds:0})}}function ls(n,e,t){const i=n.slice();return i[41]=e[t],i}function rs(n){let e,t,i,l=ue(n[2]),r=[];for(let o=0;o<l.length;o+=1)r[o]=os(ls(n,l,o));return{c(){e=S("h5"),e.textContent=`${B.translate("General Filters")}`,t=z(),i=S("ul");for(let o=0;o<r.length;o+=1)r[o].c()},m(o,s){N(o,e,s),N(o,t,s),N(o,i,s);for(let a=0;a<r.length;a+=1)r[a]&&r[a].m(i,null)},p(o,s){if(s[0]&4103){l=ue(o[2]);let a;for(a=0;a<l.length;a+=1){const f=ls(o,l,a);r[a]?r[a].p(f,s):(r[a]=os(f),r[a].c(),r[a].m(i,null))}for(;a<r.length;a+=1)r[a].d(1);r.length=l.length}},d(o){o&&(I(e),I(t),I(i)),et(r,o)}}}function os(n){let e,t,i,l,r,o,s=B.translate(n[41],"boolFilters",n[1])+"",a,f,u,c;function d(...p){return n[24](n[41],...p)}return{c(){e=S("li"),t=S("label"),i=S("input"),o=z(),a=he(s),f=z(),v(i,"type","checkbox"),i.checked=l=n[0].getBool()[n[41]],v(i,"name",r=n[41]),ge(t,"active",n[0].getBool()[n[41]]),v(e,"class","checkbox")},m(p,h){N(p,e,h),k(e,t),k(t,i),k(t,o),k(t,a),k(e,f),u||(c=ne(i,"change",d),u=!0)},p(p,h){n=p,h[0]&5&&l!==(l=n[0].getBool()[n[41]])&&(i.checked=l),h[0]&4&&r!==(r=n[41])&&v(i,"name",r),h[0]&6&&s!==(s=B.translate(n[41],"boolFilters",n[1])+"")&&Be(a,s),h[0]&5&&ge(t,"active",n[0].getBool()[n[41]])},d(p){p&&I(e),u=!1,c()}}}function Hp(n){let e,t;return e=new Rp({props:{scope:n[1],savedSearchList:n[5],loading:n[6],editingItem:n[7],selectedSavedSearchIds:n[8].map(ss),rename:n[17],remove:n[18],edit:n[19],cancel:n[20]}}),e.$on("change",n[16]),{c(){_e(e.$$.fragment)},m(i,l){ve(e,i,l),t=!0},p(i,l){const r={};l[0]&2&&(r.scope=i[1]),l[0]&32&&(r.savedSearchList=i[5]),l[0]&64&&(r.loading=i[6]),l[0]&128&&(r.editingItem=i[7]),l[0]&256&&(r.selectedSavedSearchIds=i[8].map(ss)),e.$set(r)},i(i){t||(j(e.$$.fragment,i),t=!0)},o(i){X(e.$$.fragment,i),t=!1},d(i){be(e,i)}}}function Wp(n){let e,t,i,l=B.translate("Save")+"",r,o,s;return{c(){e=S("button"),t=S("span"),t.innerHTML='<svg class="icon"><use href="client/img/icons/icons.svg#save"></use></svg>',i=z(),r=he(l),v(e,"class","filter-item save svelte-1hmatq3")},m(a,f){N(a,e,f),k(e,t),k(e,i),k(e,r),o||(s=ne(e,"click",n[15]),o=!0)},p:Ae,d(a){a&&I(e),o=!1,s()}}}function qp(n){var Ne;let e,t,i,l,r,o=B.translate("Unset All")+"",s,a,f,u,c=Nt.check("SavedSearch","read"),d,p,h,m,g,_,y,E,b,A,w,L=B.translate("Unset")+"",O,D,C=Nt.check("SavedSearch","create"),R,W,Z,q,H,V=((Ne=n[2])==null?void 0:Ne.length)>0&&rs(n),ie=c&&Hp(n),le=C&&Wp(n);return{c(){e=S("div"),t=S("div"),i=S("button"),l=S("span"),l.innerHTML='<svg class="icon"><use href="client/img/icons/icons.svg#close"></use></svg>',r=z(),s=he(o),a=z(),f=S("div"),V&&V.c(),u=z(),ie&&ie.c(),d=z(),p=S("div"),h=S("h5"),m=S("input"),g=z(),_=S("span"),_.textContent=`${B.translate("Advanced Filter")}`,y=z(),E=S("div"),b=S("button"),A=S("span"),A.innerHTML='<svg class="icon"><use href="client/img/icons/icons.svg#close"></use></svg>',w=z(),O=he(L),D=z(),le&&le.c(),R=z(),W=S("div"),v(i,"class","filter-item svelte-1hmatq3"),v(i,"data-action","filter"),ge(i,"disabled",!n[9]),v(f,"class","checkboxes-filter"),v(m,"type","checkbox"),v(m,"class","svelte-1hmatq3"),v(h,"class","svelte-1hmatq3"),v(b,"class","filter-item svelte-1hmatq3"),v(E,"class","row filter-action svelte-1hmatq3"),v(W,"class","query-builder"),v(p,"class","advanced-filters svelte-1hmatq3"),v(e,"class","query-builder-container")},m(Ie,He){N(Ie,e,He),k(e,t),k(t,i),k(i,l),k(i,r),k(i,s),k(e,a),k(e,f),V&&V.m(f,null),k(e,u),ie&&ie.m(e,null),k(e,d),k(e,p),k(p,h),k(h,m),m.checked=n[4],k(h,g),k(h,_),k(p,y),k(p,E),k(E,b),k(b,A),k(b,w),k(b,O),k(E,D),le&&le.m(E,null),k(p,R),k(p,W),n[26](W),Z=!0,q||(H=[ne(i,"click",n[13]),ne(m,"change",n[25]),ne(m,"change",n[14]),ne(_,"click",n[11]),ne(b,"click",n[10])],q=!0)},p(Ie,He){var je;(!Z||He[0]&512)&&ge(i,"disabled",!Ie[9]),((je=Ie[2])==null?void 0:je.length)>0?V?V.p(Ie,He):(V=rs(Ie),V.c(),V.m(f,null)):V&&(V.d(1),V=null),c&&ie.p(Ie,He),He[0]&16&&(m.checked=Ie[4]),C&&le.p(Ie,He)},i(Ie){Z||(j(ie),Z=!0)},o(Ie){X(ie),Z=!1},d(Ie){Ie&&I(e),V&&V.d(),ie&&ie.d(),le&&le.d(),n[26](null),q=!1,rt(H)}}}function yi(n){let e=[".query-builder .rule-container .rule-filter-container",".query-builder .rule-container .rule-operator-container",".query-builder .rule-container .rule-value-container"];for(const i of e){let l=document.querySelectorAll(i);if(!l.length)return;for(const r of l)r.style.display!=="none"&&(n<450?(r.style.display="block",r.style.width="100%"):(r.style.display="inline-block",r.style.width="25%",i.includes("operator")&&(r.style.width="20%")))}let t=document.querySelector(".query-builder .rule-actions");t&&(n>450?(t.style.marginTop="10px",t.style.marginBottom="5px"):(t.style.marginTop="0",t.style.marginBottom="0"))}function jp(n){return n.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}function as(n){let e=[];return n.forEach(t=>{t.rules?as(t.rules).forEach(i=>{e.push(i)}):t.id&&e.push(t.id)}),e}const ss=n=>n.id;function zp(n,e,t){let{scope:i}=e,{searchManager:l}=e,{createView:r}=e,{mandatoryBoolFilter:o=[]}=e,{parentWidth:s}=e,a=[],f,u,c=new l.collection.model,d=!1,p=[],h=!0,m=null,g=null,_=[],y=!1;function E(Y){l.set({...l.get(),...Y})}function b(Y){let $=Y;return Y.forEach((fe,P)=>{fe.rules?Y[P].rules=b(Y[P].rules):fe.id&&(a.find(M=>M.id===fe.id)||($=Y.filter(M=>M.id!==fe.id)))}),$}function A(){const Y=window.$(u),$=l.getQueryBuilder()||[];$.rules&&($.rules=b($.rules)),console.log("filters",a,"rules",$);const fe="emptyAttributeRule";let P={};for(const M of a){let G=M.optgroup??"default";P[G]=P[G]??[],P[G].push(M)}for(const M in P)P[M].sort(function(G,J){return G.label.localeCompare(J.label)});if(C()){let M={id:fe,label:`[${B.translate("addAttribute")}]`,type:"boolean",optgroup:B.translate("Attributes"),operators:["equal"],input:"radio",values:{0:"false"}};P[B.translate("Attributes")]?(P[B.translate("Attributes")]=P[B.translate("Attributes")].filter(G=>G.id!==M.id),P[B.translate("Attributes")].unshift(M)):P[B.translate("Attributes")]=[M]}a=[...P[B.translate("Attributes")]??[],...P.default??[],...P[B.translate("Fields")]??[]],Y.queryBuilder({allow_empty:!0,select_placeholder:B.translate("filterPlaceHolder"),operators:[{type:"contains"},{type:"not_contains"},{type:"equal"},{type:"not_equal"},{type:"less"},{type:"less_or_equal"},{type:"greater"},{type:"greater_or_equal"},{type:"between"},{type:"in"},{type:"not_in"},{type:"is_null"},{type:"is_not_null"},{type:"linked_with",nb_inputs:1,multiple:!0,apply_to:["string"]},{type:"not_linked_with",nb_inputs:1,multiple:!0,apply_to:["string"]},{type:"array_any_of",nb_inputs:1,multiple:!0,apply_to:["string"]},{type:"array_none_of",nb_inputs:1,multiple:!0,apply_to:["string"]},{type:"is_linked",nb_inputs:0,apply_to:["string"]},{type:"is_not_linked",nb_inputs:0,apply_to:["string"]},{type:"query_in",nb_inputs:1,apply_to:["string"]},{type:"query_linked_with",nb_inputs:1,apply_to:["string"]}],rules:$,filters:a,plugins:{sortable:{icon:"fas fa-sort"}}}),c.trigger("afterInitQueryBuilder"),yi(s),Y.on("rulesChanged.queryBuilder",(M,G)=>{t(4,d=!1),setTimeout(()=>{yi(s)},250);try{const J=Y.queryBuilder("getRules");J&&(E({queryBuilder:J}),q(!1))}catch{}c.trigger("rulesChanged",G)}),Y.on("afterUpdateRuleOperator.queryBuilder",(M,G)=>{c.trigger("afterUpdateRuleOperator",G)}),Y.on("afterSetRules.queryBuilder",(M,G)=>{c.trigger("afterInitQueryBuilder")}),Y.on("afterAddGroup.queryBuilder",(M,G)=>{c.trigger("afterAddGroup",G),yi(s)}),Y.on("afterAddRule.queryBuilder",(M,G)=>{setTimeout(()=>{yi(s)},250),c.trigger("afterAddRule",G)})}function w(Y){a=a.filter(P=>P.id.includes("attr"));let $=[];Object.entries(re.get(["entityDefs",i,"fields"])).forEach(([P,M])=>{if(M.filterDisabled)return;const G=jp(M.type),J=re.get(["fields",G,"view"])||`views/fields/${G}`;$.push(new Promise(de=>{r(P,J,{name:P,model:c,defs:{name:P,params:{attribute:null}}},Le=>{let qe=Le.createQueryBuilderFilter();qe&&a.push(qe),de()})}))});const fe=l.getQueryBuilder();fe.rules&&$.push(new Promise(P=>{let M=[];if(as(fe.rules).forEach(G=>{let J=G.split("_");J.length===2&&J[0]==="attr"&&M.push(J[1])}),M.length>0){const G=[{attribute:"id",type:"in",value:M}];let J=ut.get();fetch("/api/v1/Attribute?"+window.$.param({where:G}),{method:"GET",headers:{"Content-Type":"application/json","Authorization-Token":btoa(J.user.userName+":"+J.token)}}).then(de=>de.json().then(Le=>{Le.list.length?Le.list.forEach(qe=>{D(qe,(it,oe)=>{P()})}):P()}))}else P()})),Promise.all($).then(()=>{Y()})}function L(){E({queryBuilder:[]}),window.$(u).queryBuilder("setRules",[])}function O(){l.collection.reset(),Re.notify(B.translate("pleaseWait","messages")),t(0,l.collection.where=l.getWhere(),l),l.collection.fetch().then(()=>window.Backbone.trigger("after:search",l.collection))}function D(Y,$){const fe=window.Espo.Utils.camelCaseToHyphen(Y.type),P=re.get(["fields",fe,"view"])??`views/fields/${fe}`,M=`attr_${Y.id}`;r(M,P,{name:M,model:c,defs:{name:M,params:{attribute:Y}}},G=>{let J=G.createQueryBuilderFilter();J&&(J.label=Y.name,J.optgroup=B.translate("Attributes"),a.map(Le=>Le.id).includes(M)?$(!1,J):(a.push(J),$(!0,J)))})}function C(){return Nt.check("Attribute","read")&&re.get(["scopes",i,"hasAttribute"])||i==="Product"}function R(Y){const $="Attribute",fe=re.get(["clientDefs",$,"modalViews","select"])||"views/modals/select-records";Re.notify("Loading..."),r("dialog",fe,{scope:$,multiple:!1,createButton:!1,massRelateEnabled:!1,allowSelectAllResult:!1},P=>{P.render(),Re.notify(!1),P.dialog.$el.on("hidden.bs.modal",M=>{Y&&Y(!1)}),P.listenTo(P,"cancel, close",()=>{Y&&Y(!1)}),P.once("select",M=>{D(M.attributes,(G,J)=>{Y&&Y(G,J)})})})}function W(Y,$){let fe=Y.target.checked,P=l.getBool();P[$]=fe,E({bool:P}),O(),je()}function Z(){y&&(l.reset(),L(),t(4,d=!1),t(8,_=[]),je(),O())}function q(Y=!0){if(d&&!window.$(u).queryBuilder("validate")){Re.notify(B.translate("youHaveErrorsInFilter","messages"),"error"),t(4,d=!1);return}E({queryBuilderApplied:d?"apply":!1}),Y&&O(),je()}async function H(Y,$=null){const fe=ut.get();if(fe){Re.notify(B.translate("pleaseWait","messages"));try{const P=await fetch($?`/api/v1/SavedSearch/${$}`:"/api/v1/SavedSearch",{method:$?"PUT":"POST",headers:{"Content-Type":"application/json","Authorization-Token":btoa(fe.user.userName+":"+fe.token)},body:JSON.stringify(Y)});if(P.ok)return Re.notify(B.translate("Done"),"success"),await P.json()}catch(P){console.error("Error on saving saveSearch",P)}finally{Re.notify(!1)}}}function V(){if(!window.$(u).queryBuilder("validate")){Re.notify(B.translate("youHaveErrorsInFilter","messages"),"error");return}if(m!==null){H({data:window.$(u).queryBuilder("getRules")},m.id);return}r("savePreset","views/modals/save-filters",{},function($){$.render(),$.listenToOnce($,"save",fe=>{H({entityType:i,name:fe.name,data:l.getQueryBuilder(),isPublic:fe.isPublic}).then(P=>{t(5,p=[...p,P])}),$.close()})})}function ie(Y){E({savedFilters:p.filter($=>Y.detail.selectedSavedSearchIds.includes($.id))}),O(),je()}function le(Y){r("savePreset","views/modals/save-filters",{name:Y.name,isPublic:Y.isPublic},function($){$.render(),$.listenToOnce($,"save",fe=>{H({name:fe.name,isPublic:fe.isPublic},Y.id).then(P=>{t(5,p=p.map(M=>M.id===P.id?P:M))}),$.close()})})}async function Ne(Y){const $=ut.get();if($){Re.notify(B.translate("pleaseWait","messages"));try{(await fetch(`/api/v1/SavedSearch/${Y.id}`,{method:"DELETE",headers:{"Content-Type":"application/json","Authorization-Token":btoa($.user.userName+":"+$.token)}})).ok&&(Re.notify(B.translate("Done"),"success"),t(5,p=p.filter(P=>P.id!==Y.id)))}catch(fe){console.error("Error on deleting saveSearch",fe)}finally{Re.notify(!1)}}}function Ie(Y){w(()=>{const $=window.$(u);try{g=g??l.getQueryBuilder(),$.queryBuilder("setFilters",a),$.queryBuilder("setRules",Y.data),t(7,m=Y)}catch{Re.notify(B.translate("theSavedFilterMightBeCorrupt","messages"),"error"),$.queryBuilder("setRules",l.getQueryBuilder())}})}function He(){window.$(u).queryBuilder("setRules",g??[]),g=null,t(7,m=null)}function je(){t(9,y=l.isQueryBuilderApplied()||l.getSavedFilters().length>0);let Y=l.getBool();for(const $ in Y)if(Y[$]&&f.includes($)){t(9,y=!0);break}}st(()=>{t(2,f=(re.get(["clientDefs",i,"boolFilterList"])||[]).filter(function(P){return typeof P=="string"?!0:(P=P||{},!(P.accessDataList&&!window.Espo.Utils.checkAccessDataList(P.accessDataList,Nt,Nt.getUser())))}).map(function(P){return typeof P=="string"?P:(P=P||{},P.name)}));let Y=re.get(["clientDefs",i,"hiddenBoolFilterList"])||[];t(2,f=f.filter(function(P){return!Y.includes(P)}));const $=new URLSearchParams(window.location.search);if($.has("where")){const P=JSON.parse($.get("where"));P&&(Ee.set("queryBuilderRules",i,P),window.history.replaceState({},document.title,window.location.origin+"#"+i),O())}window.$.fn.queryBuilder.regional.main=B.getData().Global.queryBuilderFilter,window.$.fn.queryBuilder.defaults({lang_code:"main"});let fe=window.$.fn.queryBuilder.constructor.prototype.updateRuleFilter;window.$.fn.queryBuilder.constructor.prototype.updateRuleFilter=function(P,M){P.filter&&P.filter.id==="emptyAttributeRule"?R((G,J)=>{G?(this.setFilters(a),P.filter=J,fe.call(this,P,M)):(P.filter.id==="emptyAttributeRule"&&(P.filter=M),fe.call(this,P,M))}):fe.call(this,P,M)},t(4,d=l.isQueryBuilderApplied()),So.create("SavedSearch",P=>{P.url="SavedSearch",P.where=[{type:"equals",attribute:"entityType",value:i}],P.fetch().then(M=>{t(5,p=M.list),t(8,_=(l.getSavedFilters()||[]).map(G=>p.find(J=>J.id===G.id))),t(8,_=_.filter(G=>G)),E({savedFilters:_}),t(6,h=!1)})}),je(),w(()=>{A()})});const me=(Y,$)=>W($,Y);function De(){d=this.checked,t(4,d)}function We(Y){ze[Y?"unshift":"push"](()=>{u=Y,t(3,u)})}return n.$$set=Y=>{"scope"in Y&&t(1,i=Y.scope),"searchManager"in Y&&t(0,l=Y.searchManager),"createView"in Y&&t(21,r=Y.createView),"mandatoryBoolFilter"in Y&&t(22,o=Y.mandatoryBoolFilter),"parentWidth"in Y&&t(23,s=Y.parentWidth)},n.$$.update=()=>{n.$$.dirty[0]&8388608&&yi(s)},[l,i,f,u,d,p,h,m,_,y,L,O,W,Z,q,V,ie,le,Ne,Ie,He,r,o,s,me,De,We]}class Gp extends Te{constructor(e){super(),Ce(this,e,zp,qp,ke,{scope:1,searchManager:0,createView:21,mandatoryBoolFilter:22,parentWidth:23},null,[-1,-1])}}function us(n,e,t){const i=n.slice();return i[27]=e[t],i}function fs(n){let e,t=n[27].label+"",i,l,r,o;function s(){return n[20](n[27])}return{c(){e=S("a"),i=he(t),l=z(),v(e,"href","javascript:"),v(e,"class","btn btn-link item svelte-1kvkmv5")},m(a,f){N(a,e,f),k(e,i),k(e,l),r||(o=ne(e,"click",s),r=!0)},p(a,f){n=a,f&512&&t!==(t=n[27].label+"")&&Be(i,t)},d(a){a&&I(e),r=!1,o()}}}function cs(n){let e,t=n[27].name!==n[10].name&&fs(n);return{c(){t&&t.c(),e=Ge()},m(i,l){t&&t.m(i,l),N(i,e,l)},p(i,l){i[27].name!==i[10].name?t?t.p(i,l):(t=fs(i),t.c(),t.m(e.parentNode,e)):t&&(t.d(1),t=null)},d(i){i&&I(e),t&&t.d(i)}}}function ds(n){let e,t,i;return t=new Gp({props:{scope:n[2],searchManager:n[5],createView:n[6],parentWidth:n[0]}}),{c(){var l;e=S("div"),_e(t.$$.fragment),v(e,"class","filter"),ge(e,"hidden",((l=n[10])==null?void 0:l.name)!=="filter")},m(l,r){N(l,e,r),ve(t,e,null),i=!0},p(l,r){var s;const o={};r&4&&(o.scope=l[2]),r&32&&(o.searchManager=l[5]),r&64&&(o.createView=l[6]),r&1&&(o.parentWidth=l[0]),t.$set(o),(!i||r&1024)&&ge(e,"hidden",((s=l[10])==null?void 0:s.name)!=="filter")},i(l){i||(j(t.$$.fragment,l),i=!0)},o(l){X(t.$$.fragment,l),i=!1},d(l){l&&I(e),be(t)}}}function Vp(n){var E;let e,t,i,l,r,o=(((E=n[10])==null?void 0:E.label)??"")+"",s,a,f,u,c,d,p,h,m,g=ue(n[9]),_=[];for(let b=0;b<g.length;b+=1)_[b]=cs(us(n,g,b));let y=n[7]&&ds(n);return{c(){var b,A,w;e=S("div"),t=S("div");for(let L=0;L<_.length;L+=1)_[L].c();i=z(),l=S("div"),r=S("h5"),s=he(o),a=z(),f=S("div"),u=z(),y&&y.c(),c=z(),d=S("div"),d.innerHTML='<img class="preloader svelte-1kvkmv5" src="client/img/atro-loader.svg" alt="loader"/>',p=z(),h=S("div"),h.innerHTML='<img class="preloader svelte-1kvkmv5" src="client/img/atro-loader.svg" alt="loader"/>',v(t,"class","btn-group svelte-1kvkmv5"),v(f,"class","layout-editor-container"),ge(f,"hidden",((b=n[10])==null?void 0:b.name)!=="summary"),v(l,"class","sidebar-header"),v(d,"class","summary svelte-1kvkmv5"),ge(d,"hidden",((A=n[10])==null?void 0:A.name)!=="summary"),v(h,"class","activities svelte-1kvkmv5"),ge(h,"hidden",((w=n[10])==null?void 0:w.name)!=="activities"),v(e,"class","content svelte-1kvkmv5")},m(b,A){N(b,e,A),k(e,t);for(let w=0;w<_.length;w+=1)_[w]&&_[w].m(t,null);k(e,i),k(e,l),k(l,r),k(r,s),k(l,a),k(l,f),k(e,u),y&&y.m(e,null),k(e,c),k(e,d),k(e,p),k(e,h),m=!0},p(b,A){var w,L,O,D;if(A&3584){g=ue(b[9]);let C;for(C=0;C<g.length;C+=1){const R=us(b,g,C);_[C]?_[C].p(R,A):(_[C]=cs(R),_[C].c(),_[C].m(t,null))}for(;C<_.length;C+=1)_[C].d(1);_.length=g.length}(!m||A&1024)&&o!==(o=(((w=b[10])==null?void 0:w.label)??"")+"")&&Be(s,o),(!m||A&1024)&&ge(f,"hidden",((L=b[10])==null?void 0:L.name)!=="summary"),b[7]?y?(y.p(b,A),A&128&&j(y,1)):(y=ds(b),y.c(),j(y,1),y.m(e,c)):y&&(Ve(),X(y,1,1,()=>{y=null}),Ue()),(!m||A&1024)&&ge(d,"hidden",((O=b[10])==null?void 0:O.name)!=="summary"),(!m||A&1024)&&ge(h,"hidden",((D=b[10])==null?void 0:D.name)!=="activities")},i(b){m||(j(y),m=!0)},o(b){X(y),m=!1},d(b){b&&I(e),et(_,b),y&&y.d()}}}function Up(n){let e,t,i,l,r;function o(u){n[21](u)}function s(u){n[22](u)}function a(u){n[23](u)}let f={position:"right",className:"right-side-view",minWidth:n[3],maxWidth:n[4],$$slots:{default:[Vp]},$$scope:{ctx:n}};return n[1]!==void 0&&(f.isCollapsed=n[1]),n[8]!==void 0&&(f.isPinned=n[8]),n[0]!==void 0&&(f.width=n[0]),e=new Xa({props:f}),ze.push(()=>On(e,"isCollapsed",o)),ze.push(()=>On(e,"isPinned",s)),ze.push(()=>On(e,"width",a)),e.$on("sidebar-resize",n[12]),e.$on("sidebar-collapse",n[14]),e.$on("sidebar-pin",n[13]),{c(){_e(e.$$.fragment)},m(u,c){ve(e,u,c),r=!0},p(u,[c]){const d={};c&8&&(d.minWidth=u[3]),c&16&&(d.maxWidth=u[4]),c&1073743589&&(d.$$scope={dirty:c,ctx:u}),!t&&c&2&&(t=!0,d.isCollapsed=u[1],Tn(()=>t=!1)),!i&&c&256&&(i=!0,d.isPinned=u[8],Tn(()=>i=!1)),!l&&c&1&&(l=!0,d.width=u[0],Tn(()=>l=!1)),e.$set(d)},i(u){r||(j(e.$$.fragment,u),r=!0)},o(u){X(e.$$.fragment,u),r=!1},d(u){be(e,u)}}}function Xp(n,e,t){let i,{scope:l}=e,{mode:r}=e,{minWidth:o=300}=e,{maxWidth:s=600}=e,{currentWidth:a=o}=e,{loadSummary:f}=e,{loadActivities:u}=e,{isCollapsed:c=!1}=e,{hasStream:d=!1}=e,{searchManager:p}=e,{createView:h}=e,{showFilter:m}=e,g=!0,_,y=[],E;["detail","edit"].includes(r)&&(y.push({name:"summary",label:B.translate("Summary")}),E=y[0]);function b(q){E&&E.name===q.name||(t(10,E=q),E.name==="activities"&&A(),Ee.set("right-side-view-active-item",i,E.name))}function A(){c||(_==null?u(q=>{_=q}):_==null||_.refresh())}function w(q){Ee.set("rightSideView",i,a.toString())}function L(q){Ee.set("right-side-view-pin",i,g?"pin":"not-pinned")}function O(q){Ee.set("right-side-view-collapse",i,c?"collapsed":"expanded"),E.name==="activities"&&A()}function D(){b(y.find(q=>q.name==="filter")),t(1,c=!1)}st(()=>{const q=Ee.get("rightSideView",i);q&&t(0,a=parseInt(q)||o);let H=Ee.get("right-side-view-collapse",i);!H&&!["detail","edit"].includes(r)||window.innerWidth<=768?t(1,c=!0):t(1,c=H==="collapsed"),t(8,g=Ee.get("right-side-view-pin",i)!=="not-pinned"),["detail","edit"].includes(r)&&f(),m&&t(9,y=[...y,{name:"filter",label:B.translate("filter")}]),d&&t(9,y=[...y,{name:"activities",label:B.translate("Activities")}]);let V=Ee.get("right-side-view-active-item",i);V&&y.map(ie=>ie.name).includes(V)&&b(y.find(ie=>ie.name===V)),E||b(y[0])});const C=q=>b(q);function R(q){c=q,t(1,c)}function W(q){g=q,t(8,g)}function Z(q){a=q,t(0,a)}return n.$$set=q=>{"scope"in q&&t(2,l=q.scope),"mode"in q&&t(15,r=q.mode),"minWidth"in q&&t(3,o=q.minWidth),"maxWidth"in q&&t(4,s=q.maxWidth),"currentWidth"in q&&t(0,a=q.currentWidth),"loadSummary"in q&&t(16,f=q.loadSummary),"loadActivities"in q&&t(17,u=q.loadActivities),"isCollapsed"in q&&t(1,c=q.isCollapsed),"hasStream"in q&&t(18,d=q.hasStream),"searchManager"in q&&t(5,p=q.searchManager),"createView"in q&&t(6,h=q.createView),"showFilter"in q&&t(7,m=q.showFilter)},n.$$.update=()=>{n.$$.dirty&32772&&(i=l+r)},[a,c,l,o,s,p,h,m,g,y,E,b,w,L,O,r,f,u,d,D,C,R,W,Z]}class Yp extends Te{constructor(e){super(),Ce(this,e,Xp,Up,ke,{scope:2,mode:15,minWidth:3,maxWidth:4,currentWidth:0,loadSummary:16,loadActivities:17,isCollapsed:1,hasStream:18,searchManager:5,createView:6,showFilter:7,openFilter:19})}get openFilter(){return this.$$.ctx[19]}}function ps(n){let e,t,i,l,r,o,s,a;function f(d,p){return d[0].html?Jp:Qp}let u=f(n),c=u(n);return{c(){e=S("button"),c.c(),v(e,"class",n[1]),v(e,"data-name",t=n[0].name),v(e,"data-action",i=n[0].action||n[0].name),v(e,"data-id",l=n[0].id),v(e,"type","button"),v(e,"title",r=n[0].tooltip),e.disabled=o=n[0].disabled},m(d,p){N(d,e,p),c.m(e,null),s||(a=ne(e,"click",n[2]),s=!0)},p(d,p){u===(u=f(d))&&c?c.p(d,p):(c.d(1),c=u(d),c&&(c.c(),c.m(e,null))),p&2&&v(e,"class",d[1]),p&1&&t!==(t=d[0].name)&&v(e,"data-name",t),p&1&&i!==(i=d[0].action||d[0].name)&&v(e,"data-action",i),p&1&&l!==(l=d[0].id)&&v(e,"data-id",l),p&1&&r!==(r=d[0].tooltip)&&v(e,"title",r),p&1&&o!==(o=d[0].disabled)&&(e.disabled=o)},d(d){d&&I(e),c.d(),s=!1,a()}}}function Qp(n){let e=B.translate(n[0].label)+"",t;return{c(){t=he(e)},m(i,l){N(i,t,l)},p(i,l){l&1&&e!==(e=B.translate(i[0].label)+"")&&Be(t,e)},d(i){i&&I(t)}}}function Jp(n){let e,t=n[0].html+"",i;return{c(){e=new Wt(!1),i=Ge(),e.a=i},m(l,r){e.m(t,l,r),N(l,i,r)},p(l,r){r&1&&t!==(t=l[0].html+"")&&e.p(t)},d(l){l&&(I(i),e.d())}}}function Zp(n){let e,t=!n[0].hidden&&ps(n);return{c(){t&&t.c(),e=Ge()},m(i,l){t&&t.m(i,l),N(i,e,l)},p(i,[l]){i[0].hidden?t&&(t.d(1),t=null):t?t.p(i,l):(t=ps(i),t.c(),t.m(e.parentNode,e))},i:Ae,o:Ae,d(i){i&&I(e),t&&t.d(i)}}}function Kp(n,e,t){const i=pn();let{params:l}=e,{className:r=""}=e;const o=["default","primary","success","warning","danger"];let s;function a(f){const u=f.currentTarget;i("execute",{data:u.dataset,action:u.dataset.action,event:f})}return n.$$set=f=>{"params"in f&&t(0,l=f.params),"className"in f&&t(3,r=f.className)},n.$$.update=()=>{n.$$.dirty&11&&(t(1,s="action btn"),(l.style??"default").split(" ").forEach(f=>{o.includes(f)?t(1,s+=` btn-${f}`):t(1,s+=` ${f}`)}),r&&t(1,s+=` ${r}`))},[l,s,a,r]}class Yt extends Te{constructor(e){super(),Ce(this,e,Kp,Zp,ke,{params:0,className:3})}}function xp(n){let e,t;return e=new Yt({props:{params:n[0],className:"btn-favorite"}}),e.$on("execute",n[1]),{c(){_e(e.$$.fragment)},m(i,l){ve(e,i,l),t=!0},p(i,[l]){const r={};l&1&&(r.params=i[0]),e.$set(r)},i(i){t||(j(e.$$.fragment,i),t=!0)},o(i){X(e.$$.fragment,i),t=!1},d(i){be(e,i)}}}function $p(n,e,t){let{scope:i}=e,{onFavoriteAdd:l}=e,{onFavoriteRemove:r}=e,{active:o=!1}=e,s,a="default";function f(u){o?r(i):l(i)}return n.$$set=u=>{"scope"in u&&t(2,i=u.scope),"onFavoriteAdd"in u&&t(3,l=u.onFavoriteAdd),"onFavoriteRemove"in u&&t(4,r=u.onFavoriteRemove),"active"in u&&t(5,o=u.active)},n.$$.update=()=>{n.$$.dirty&96&&(t(6,a=o?"primary outline":"default"),t(0,s={action:"favorite",html:'<svg class="icon"><use href="client/img/icons/icons.svg#star"></use></svg>',style:a}))},[s,f,i,l,r,o,a]}class em extends Te{constructor(e){super(),Ce(this,e,$p,xp,ke,{scope:2,onFavoriteAdd:3,onFavoriteRemove:4,active:5})}}function tm(n){let e=B.translate(n[0].label)+"",t;return{c(){t=he(e)},m(i,l){N(i,t,l)},p(i,l){l&1&&e!==(e=B.translate(i[0].label)+"")&&Be(t,e)},d(i){i&&I(t)}}}function nm(n){let e,t=n[0].html+"",i;return{c(){e=new Wt(!1),i=Ge(),e.a=i},m(l,r){e.m(t,l,r),N(l,i,r)},p(l,r){r&1&&t!==(t=l[0].html+"")&&e.p(t)},d(l){l&&(I(i),e.d())}}}function im(n){let e,t,i,l,r,o,s;function a(c,d){return c[0].html?nm:tm}let f=a(n),u=f(n);return{c(){e=S("a"),u.c(),v(e,"href","javascript:"),v(e,"role","button"),v(e,"class",t="action "+n[1]),v(e,"data-action",i=n[0].name||n[0].action),v(e,"data-id",l=n[0].id),v(e,"title",r=n[0].tooltip)},m(c,d){N(c,e,d),u.m(e,null),o||(s=ne(e,"click",n[2]),o=!0)},p(c,[d]){f===(f=a(c))&&u?u.p(c,d):(u.d(1),u=f(c),u&&(u.c(),u.m(e,null))),d&2&&t!==(t="action "+c[1])&&v(e,"class",t),d&1&&i!==(i=c[0].name||c[0].action)&&v(e,"data-action",i),d&1&&l!==(l=c[0].id)&&v(e,"data-id",l),d&1&&r!==(r=c[0].tooltip)&&v(e,"title",r)},i:Ae,o:Ae,d(c){c&&I(e),u.d(),o=!1,s()}}}function lm(n,e,t){const i=pn();let{params:l}=e,{className:r=""}=e;function o(s){const a=s.target;i("execute",{data:a.dataset,action:a.dataset.action,event:s})}return n.$$set=s=>{"params"in s&&t(0,l=s.params),"className"in s&&t(1,r=s.className)},[l,r,o]}class ms extends Te{constructor(e){super(),Ce(this,e,lm,im,ke,{params:0,className:1})}}function hs(n,e,t){const i=n.slice();return i[11]=e[t],i}function gs(n,e,t){const i=n.slice();return i[11]=e[t],i}function vs(n,e,t){const i=n.slice();return i[16]=e[t],i}function bs(n){let e,t;return e=new Yt({props:{params:n[16]}}),e.$on("execute",function(){Pt(n[6])&&n[6].apply(this,arguments)}),{c(){_e(e.$$.fragment)},m(i,l){ve(e,i,l),t=!0},p(i,l){n=i;const r={};l&1&&(r.params=n[16]),e.$set(r)},i(i){t||(j(e.$$.fragment,i),t=!0)},o(i){X(e.$$.fragment,i),t=!1},d(i){be(e,i)}}}function rm(n){let e;return{c(){e=S("button"),e.innerHTML='<span class="caret"></span>',v(e,"type","button"),v(e,"class","btn btn-default dropdown-toggle svelte-1ds6xdg"),v(e,"data-toggle","dropdown"),v(e,"aria-haspopup","true")},m(t,i){N(t,e,i)},d(t){t&&I(e)}}}function om(n){let e,t=B.translate("More")+"",i,l,r,o;return{c(){e=S("button"),i=he(t),l=z(),r=cn("svg"),o=cn("use"),v(o,"href","client/img/icons/icons.svg#angle-down"),v(r,"class","icon more-arrow svelte-1ds6xdg"),v(e,"type","button"),v(e,"class","btn btn-default dropdown-toggle more-button svelte-1ds6xdg"),v(e,"data-toggle","dropdown"),v(e,"aria-haspopup","true")},m(s,a){N(s,e,a),k(e,i),k(e,l),k(e,r),k(r,o)},d(s){s&&I(e)}}}function _s(n){let e,t,i,l,r,o,s=ue(n[1]),a=[];for(let m=0;m<s.length;m+=1)a[m]=ws(gs(n,s,m));const f=m=>X(a[m],1,1,()=>{a[m]=null});let u=n[1]&&(n[2]||n[3])&&ys(),c=n[3]&&ks(),d=ue(n[2]),p=[];for(let m=0;m<d.length;m+=1)p[m]=Es(hs(n,d,m));const h=m=>X(p[m],1,1,()=>{p[m]=null});return{c(){e=S("ul");for(let m=0;m<a.length;m+=1)a[m].c();t=z(),u&&u.c(),i=z(),c&&c.c(),l=z();for(let m=0;m<p.length;m+=1)p[m].c();v(e,"class",r=pt(n[7])+" svelte-1ds6xdg")},m(m,g){N(m,e,g);for(let _=0;_<a.length;_+=1)a[_]&&a[_].m(e,null);k(e,t),u&&u.m(e,null),k(e,i),c&&c.m(e,null),k(e,l);for(let _=0;_<p.length;_+=1)p[_]&&p[_].m(e,null);o=!0},p(m,g){if(g&66){s=ue(m[1]);let _;for(_=0;_<s.length;_+=1){const y=gs(m,s,_);a[_]?(a[_].p(y,g),j(a[_],1)):(a[_]=ws(y),a[_].c(),j(a[_],1),a[_].m(e,t))}for(Ve(),_=s.length;_<a.length;_+=1)f(_);Ue()}if(m[1]&&(m[2]||m[3])?u||(u=ys(),u.c(),u.m(e,i)):u&&(u.d(1),u=null),m[3]?c?g&8&&j(c,1):(c=ks(),c.c(),j(c,1),c.m(e,l)):c&&(Ve(),X(c,1,1,()=>{c=null}),Ue()),g&68){d=ue(m[2]);let _;for(_=0;_<d.length;_+=1){const y=hs(m,d,_);p[_]?(p[_].p(y,g),j(p[_],1)):(p[_]=Es(y),p[_].c(),j(p[_],1),p[_].m(e,null))}for(Ve(),_=d.length;_<p.length;_+=1)h(_);Ue()}(!o||g&128&&r!==(r=pt(m[7])+" svelte-1ds6xdg"))&&v(e,"class",r)},i(m){if(!o){for(let g=0;g<s.length;g+=1)j(a[g]);j(c);for(let g=0;g<d.length;g+=1)j(p[g]);o=!0}},o(m){a=a.filter(Boolean);for(let g=0;g<a.length;g+=1)X(a[g]);X(c),p=p.filter(Boolean);for(let g=0;g<p.length;g+=1)X(p[g]);o=!1},d(m){m&&I(e),et(a,m),u&&u.d(),c&&c.d(),et(p,m)}}}function ws(n){let e,t,i;return t=new ms({props:{params:n[11]}}),t.$on("execute",function(){Pt(n[6])&&n[6].apply(this,arguments)}),{c(){e=S("li"),_e(t.$$.fragment)},m(l,r){N(l,e,r),ve(t,e,null),i=!0},p(l,r){n=l;const o={};r&2&&(o.params=n[11]),t.$set(o)},i(l){i||(j(t.$$.fragment,l),i=!0)},o(l){X(t.$$.fragment,l),i=!1},d(l){l&&I(e),be(t)}}}function ys(n){let e;return{c(){e=S("li"),v(e,"class","divider")},m(t,i){N(t,e,i)},d(t){t&&I(e)}}}function ks(n){let e,t,i,l;return i=new ol({props:{heightPx:12}}),{c(){e=S("li"),t=S("a"),_e(i.$$.fragment),v(t,"href","javascript:"),v(e,"class","preloader")},m(r,o){N(r,e,o),k(e,t),ve(i,t,null),l=!0},i(r){l||(j(i.$$.fragment,r),l=!0)},o(r){X(i.$$.fragment,r),l=!1},d(r){r&&I(e),be(i)}}}function Es(n){let e,t,i,l;return t=new ms({props:{params:n[11]}}),t.$on("execute",function(){Pt(n[6])&&n[6].apply(this,arguments)}),{c(){e=S("li"),_e(t.$$.fragment),i=z(),v(e,"class","dynamic-action")},m(r,o){N(r,e,o),ve(t,e,null),k(e,i),l=!0},p(r,o){n=r;const s={};o&4&&(s.params=n[11]),t.$set(s)},i(r){l||(j(t.$$.fragment,r),l=!0)},o(r){X(t.$$.fragment,r),l=!1},d(r){r&&I(e),be(t)}}}function am(n){let e,t,i,l,r,o,s=ue(n[0]),a=[];for(let g=0;g<s.length;g+=1)a[g]=bs(vs(n,s,g));const f=g=>X(a[g],1,1,()=>{a[g]=null});function u(g,_){if(g[4]&&(g[1].length>0||g[2].length>0))return om;if(g[1].length>0||g[2].length>0)return rm}let c=u(n),d=c&&c(n),p=(n[1].length>0||n[2].length>0)&&_s(n);const h=n[10].default,m=ti(h,n,n[9],null);return{c(){e=S("div");for(let g=0;g<a.length;g+=1)a[g].c();t=z(),d&&d.c(),i=z(),p&&p.c(),l=z(),m&&m.c(),v(e,"class",r="btn-group "+n[5]+" svelte-1ds6xdg")},m(g,_){N(g,e,_);for(let y=0;y<a.length;y+=1)a[y]&&a[y].m(e,null);k(e,t),d&&d.m(e,null),k(e,i),p&&p.m(e,null),k(e,l),m&&m.m(e,null),o=!0},p(g,[_]){if(_&65){s=ue(g[0]);let y;for(y=0;y<s.length;y+=1){const E=vs(g,s,y);a[y]?(a[y].p(E,_),j(a[y],1)):(a[y]=bs(E),a[y].c(),j(a[y],1),a[y].m(e,t))}for(Ve(),y=s.length;y<a.length;y+=1)f(y);Ue()}c!==(c=u(g))&&(d&&d.d(1),d=c&&c(g),d&&(d.c(),d.m(e,i))),g[1].length>0||g[2].length>0?p?(p.p(g,_),_&6&&j(p,1)):(p=_s(g),p.c(),j(p,1),p.m(e,l)):p&&(Ve(),X(p,1,1,()=>{p=null}),Ue()),m&&m.p&&(!o||_&512)&&ii(m,h,g,g[9],o?ni(h,g[9],_,null):li(g[9]),null),(!o||_&32&&r!==(r="btn-group "+g[5]+" svelte-1ds6xdg"))&&v(e,"class",r)},i(g){if(!o){for(let _=0;_<s.length;_+=1)j(a[_]);j(p),j(m,g),o=!0}},o(g){a=a.filter(Boolean);for(let _=0;_<a.length;_+=1)X(a[_]);X(p),X(m,g),o=!1},d(g){g&&I(e),et(a,g),d&&d.d(),p&&p.d(),m&&m.d(g)}}}function sm(n,e,t){let{$$slots:i={},$$scope:l}=e,{actions:r=[]}=e,{dropdownActions:o=[]}=e,{dynamicActionsDropdown:s=[]}=e,{loadingActions:a=!1}=e,{hasMoreButton:f=!1}=e,{dropdownPosition:u="left"}=e,{className:c=""}=e,{executeAction:d=()=>{}}=e,p;return n.$$set=h=>{"actions"in h&&t(0,r=h.actions),"dropdownActions"in h&&t(1,o=h.dropdownActions),"dynamicActionsDropdown"in h&&t(2,s=h.dynamicActionsDropdown),"loadingActions"in h&&t(3,a=h.loadingActions),"hasMoreButton"in h&&t(4,f=h.hasMoreButton),"dropdownPosition"in h&&t(8,u=h.dropdownPosition),"className"in h&&t(5,c=h.className),"executeAction"in h&&t(6,d=h.executeAction),"$$scope"in h&&t(9,l=h.$$scope)},n.$$.update=()=>{n.$$.dirty&384&&(t(7,p="dropdown-menu"),u==="right"&&t(7,p+=" dropdown-menu-right"))},[r,o,s,a,f,c,d,p,u,l,i]}class Ss extends Te{constructor(e){super(),Ce(this,e,sm,am,ke,{actions:0,dropdownActions:1,dynamicActionsDropdown:2,loadingActions:3,hasMoreButton:4,dropdownPosition:8,className:5,executeAction:6})}}function Ds(n,e,t){const i=n.slice();return i[7]=e[t],i}function As(n){let e,t=ue(n[1]),i=[];for(let l=0;l<t.length;l+=1)i[l]=Cs(Ds(n,t,l));return{c(){e=S("div");for(let l=0;l<i.length;l+=1)i[l].c();v(e,"class","btn-group view-mode-switch")},m(l,r){N(l,e,r);for(let o=0;o<i.length;o+=1)i[o]&&i[o].m(e,null)},p(l,r){if(r&7){t=ue(l[1]);let o;for(o=0;o<t.length;o+=1){const s=Ds(l,t,o);i[o]?i[o].p(s,r):(i[o]=Cs(s),i[o].c(),i[o].m(e,null))}for(;o<i.length;o+=1)i[o].d(1);i.length=t.length}},d(l){l&&I(e),et(i,l)}}}function Cs(n){let e,t,i=n[7].icon+"",l,r,o,s,a;return{c(){e=S("a"),t=new Wt(!1),l=z(),t.a=l,v(e,"role","button"),v(e,"href",r=n[7].link),v(e,"class","btn action svelte-likomh"),v(e,"data-name",o=n[7].name),v(e,"data-action","List"),ge(e,"btn-default",n[7].name!==n[0]),ge(e,"btn-primary",n[7].name===n[0])},m(f,u){N(f,e,u),t.m(i,e),k(e,l),s||(a=ne(e,"click",n[2]),s=!0)},p(f,u){u&2&&i!==(i=f[7].icon+"")&&t.p(i),u&2&&r!==(r=f[7].link)&&v(e,"href",r),u&2&&o!==(o=f[7].name)&&v(e,"data-name",o),u&3&&ge(e,"btn-default",f[7].name!==f[0]),u&3&&ge(e,"btn-primary",f[7].name===f[0])},d(f){f&&I(e),s=!1,a()}}}function um(n){let e,t=n[1].length>1&&As(n);return{c(){t&&t.c(),e=Ge()},m(i,l){t&&t.m(i,l),N(i,e,l)},p(i,[l]){i[1].length>1?t?t.p(i,l):(t=As(i),t.c(),t.m(e.parentNode,e)):t&&(t.d(1),t=null)},i:Ae,o:Ae,d(i){i&&I(e),t&&t.d(i)}}}function fm(n,e,t){const i=pn(),l={list:'<svg class="icon"><use href="client/img/icons/icons.svg#th-list"></use></svg>',plate:'<svg class="icon"><use href="client/img/icons/icons.svg#plate"></use></svg>',kanban:'<svg class="icon"><use href="client/img/icons/icons.svg#kanban"></use></svg>',tree:'<svg class="icon"><use href="client/img/icons/icons.svg#stream"></use></svg>'};let{modes:r=null}=e,{mode:o="list"}=e,{scope:s}=e,a;function f(u){const c=u.currentTarget;c.dataset.name&&c.dataset.name!==o&&i("view-change",{name:c.dataset.name})}return st(()=>{if(r!==null)return;const u=re.get(["clientDefs",s,"listViewModeList"])||["list"];re.get(["clientDefs",s,"plateViewMode"])&&u.push("plate"),re.get(["clientDefs",s,"kanbanViewMode"])&&u.push("kanban"),t(3,r=u)}),n.$$set=u=>{"modes"in u&&t(3,r=u.modes),"mode"in u&&t(0,o=u.mode),"scope"in u&&t(4,s=u.scope)},n.$$.update=()=>{n.$$.dirty&25&&t(1,a=(r||[o]).filter((u,c,d)=>l[u]&&d.indexOf(u)===c).map(u=>(l[u]||(u="list"),{name:u,link:`#${s}/${u}`,icon:l[u]})))},[o,a,f,r,s]}class cm extends Te{constructor(e){super(),Ce(this,e,fm,um,ke,{modes:3,mode:0,scope:4})}}function Ts(n){let e,t,i;return t=new em({props:{active:n[0],onFavoriteAdd:n[3].onAddFavorite,onFavoriteRemove:n[3].onRemoveFavorite,scope:n[1]}}),{c(){e=S("div"),_e(t.$$.fragment),v(e,"class","entity-buttons svelte-22sfhv")},m(l,r){N(l,e,r),ve(t,e,null),i=!0},p(l,r){const o={};r&1&&(o.active=l[0]),r&8&&(o.onFavoriteAdd=l[3].onAddFavorite),r&8&&(o.onFavoriteRemove=l[3].onRemoveFavorite),r&2&&(o.scope=l[1]),t.$set(o)},i(l){i||(j(t.$$.fragment,l),i=!0)},o(l){X(t.$$.fragment,l),i=!1},d(l){l&&I(e),be(t)}}}function dm(n){let e,t,i,l,r,o,s;t=new Ss({props:{actions:n[5],dropdownActions:n[6],className:"entity-actions",hasMoreButton:!0,dropdownPosition:"right"}});let a=n[7]&&Ts(n);return o=new cm({props:{mode:n[2],scope:n[1]}}),o.$on("view-change",function(){Pt(n[4])&&n[4].apply(this,arguments)}),{c(){e=S("div"),_e(t.$$.fragment),i=z(),l=S("div"),a&&a.c(),r=z(),_e(o.$$.fragment),v(l,"class","right-group svelte-22sfhv"),v(e,"class","buttons-container svelte-22sfhv")},m(f,u){N(f,e,u),ve(t,e,null),k(e,i),k(e,l),a&&a.m(l,null),k(l,r),ve(o,l,null),s=!0},p(f,[u]){n=f;const c={};u&32&&(c.actions=n[5]),u&64&&(c.dropdownActions=n[6]),t.$set(c),n[7]?a?(a.p(n,u),u&128&&j(a,1)):(a=Ts(n),a.c(),j(a,1),a.m(l,r)):a&&(Ve(),X(a,1,1,()=>{a=null}),Ue());const d={};u&4&&(d.mode=n[2]),u&2&&(d.scope=n[1]),o.$set(d)},i(f){s||(j(t.$$.fragment,f),j(a),j(o.$$.fragment,f),s=!0)},o(f){X(t.$$.fragment,f),X(a),X(o.$$.fragment,f),s=!1},d(f){f&&I(e),be(t),a&&a.d(),be(o)}}}function pm(n,e,t){let{scope:i}=e,{viewMode:l}=e,{isFavoriteEntity:r=!1}=e,{entityActions:o}=e,{callbacks:s}=e,{onViewChange:a}=e,f,u,c=[],d=[],p=!1;window.addEventListener("favorites:update",m=>{const g=m.detail||[];t(0,r=g.includes(i))});function h(){const m=new Map,g=new Map;(re.get(["clientDefs",i,"dynamicEntityActions"])||[]).forEach(_=>{s.canRunAction(_.acl.scope,_.acl.action)&&(_.display==="dropdown"&&!g.has(_.id)&&g.set(_.id,{label:_.name,action:"dynamicEntityAction",id:_.id}),_.display==="single"&&!m.has(_.id)&&m.set(_.id,{label:_.name,action:"dynamicEntityAction",id:_.id}))}),t(9,c=Array.from(m.values())),t(10,d=Array.from(g.values()))}return st(()=>{t(7,p=re.get(["scopes",i,"tab"])),h()}),n.$$set=m=>{"scope"in m&&t(1,i=m.scope),"viewMode"in m&&t(2,l=m.viewMode),"isFavoriteEntity"in m&&t(0,r=m.isFavoriteEntity),"entityActions"in m&&t(8,o=m.entityActions),"callbacks"in m&&t(3,s=m.callbacks),"onViewChange"in m&&t(4,a=m.onViewChange)},n.$$.update=()=>{n.$$.dirty&1792&&(t(5,f=[...o.buttons??[],...c]),t(6,u=[...o.dropdownButtons??[],...d]))},[r,i,l,s,a,f,u,p,o,c,d]}class mm extends Te{constructor(e){super(),Ce(this,e,pm,dm,ke,{scope:1,viewMode:2,isFavoriteEntity:0,entityActions:8,callbacks:3,onViewChange:4})}}function Ls(n,e,t){const i=n.slice();return i[6]=e[t],i[8]=t,i}function Os(n){let e,t;return e=new ol({props:{heightPx:10}}),{c(){_e(e.$$.fragment)},m(i,l){ve(e,i,l),t=!0},i(i){t||(j(e.$$.fragment,i),t=!0)},o(i){X(e.$$.fragment,i),t=!1},d(i){be(e,i)}}}function Ps(n){let e,t=ue(n[1]),i=[];for(let l=0;l<t.length;l+=1)i[l]=Is(Ls(n,t,l));return{c(){e=S("ul");for(let l=0;l<i.length;l+=1)i[l].c();v(e,"class","svelte-nuyn3")},m(l,r){N(l,e,r);for(let o=0;o<i.length;o+=1)i[o]&&i[o].m(e,null)},p(l,r){if(r&3){t=ue(l[1]);let o;for(o=0;o<t.length;o+=1){const s=Ls(l,t,o);i[o]?i[o].p(s,r):(i[o]=Is(s),i[o].c(),i[o].m(e,null))}for(;o<i.length;o+=1)i[o].d(1);i.length=t.length}},d(l){l&&I(e),et(i,l)}}}function hm(n){let e,t,i=n[6].label+"",l;return{c(){e=S("li"),t=S("span"),l=he(i),v(e,"class","svelte-nuyn3")},m(r,o){N(r,e,o),k(e,t),k(t,l)},p(r,o){o&2&&i!==(i=r[6].label+"")&&Be(l,i)},d(r){r&&I(e)}}}function gm(n){let e,t,i=n[6].label+"",l;return{c(){e=S("li"),t=S("h3"),l=he(i),v(t,"class","header-title svelte-nuyn3"),v(e,"class","full-width svelte-nuyn3")},m(r,o){N(r,e,o),k(e,t),k(t,l)},p(r,o){o&2&&i!==(i=r[6].label+"")&&Be(l,i)},d(r){r&&I(e)}}}function vm(n){let e,t,i=n[6].label+"",l,r;return{c(){e=S("li"),t=S("a"),l=he(i),v(t,"href",r=n[6].link),v(t,"class","svelte-nuyn3"),v(e,"class","svelte-nuyn3")},m(o,s){N(o,e,s),k(e,t),k(t,l)},p(o,s){s&2&&i!==(i=o[6].label+"")&&Be(l,i),s&2&&r!==(r=o[6].link)&&v(t,"href",r)},d(o){o&&I(e)}}}function Is(n){let e;function t(r,o){return r[8]!==r[1].length-1?vm:r[0]?gm:hm}let i=t(n),l=i(n);return{c(){l.c(),e=Ge()},m(r,o){l.m(r,o),N(r,e,o)},p(r,o){i===(i=t(r))&&l?l.p(r,o):(l.d(1),l=i(r),l&&(l.c(),l.m(e.parentNode,e)))},d(r){r&&I(e),l.d(r)}}}function bm(n){let e,t,i,l=n[2]&&Os(),r=n[1].length>0&&Ps(n);return{c(){e=S("nav"),l&&l.c(),t=z(),r&&r.c(),v(e,"class","entity-history svelte-nuyn3")},m(o,s){N(o,e,s),l&&l.m(e,null),k(e,t),r&&r.m(e,null),i=!0},p(o,[s]){o[2]?l?s&4&&j(l,1):(l=Os(),l.c(),j(l,1),l.m(e,t)):l&&(Ve(),X(l,1,1,()=>{l=null}),Ue()),o[1].length>0?r?r.p(o,s):(r=Ps(o),r.c(),r.m(e,null)):r&&(r.d(1),r=null)},i(o){i||(j(l),i=!0)},o(o){X(l),i=!1},d(o){o&&I(e),l&&l.d(),r&&r.d()}}}function _m(n,e,t){let{scope:i}=e,{currentIsHeading:l=!0}=e,r,o=[],s=!1;async function a(){let f=ut.get();if(!f)return[];t(4,o=[]);try{let u="/api/v1/LastViewed/action/getLastEntities";const c=new URLSearchParams({maxSize:"3",entity:i}).toString();c&&(u+=`?${c}`);const d=await fetch(u,{method:"GET",headers:{"Content-Type":"application/json","Authorization-Token":btoa(f.user.userName+":"+f.token)}});if(!d.ok)throw new Error("Network response was not ok");return await d.json()}catch(u){return console.error("Error:",u),[]}}return st(()=>{t(2,s=!0),a().then(f=>{t(4,o=f)}).catch(f=>{console.error("Error: ",f)}).finally(()=>t(2,s=!1))}),n.$$set=f=>{"scope"in f&&t(3,i=f.scope),"currentIsHeading"in f&&t(0,l=f.currentIsHeading)},n.$$.update=()=>{n.$$.dirty&24&&t(1,r=o.reverse().map(f=>({name:f,label:B.translate(f,"scopeNamesPlural"),link:`#${f}`})).concat({name:i,label:B.translate(i,"scopeNamesPlural"),link:`#${i}`}))},[l,r,s,i,o]}class wm extends Te{constructor(e){super(),Ce(this,e,_m,bm,ke,{scope:3,currentIsHeading:0})}}function ym(n){let e,t,i,l;return e=new mm({props:{viewMode:n[0],scope:n[1].scope,entityActions:n[2],onViewChange:n[5],callbacks:n[3],isFavoriteEntity:n[4]}}),{c(){_e(e.$$.fragment),t=z(),i=S("div"),v(i,"class","search-container")},m(r,o){ve(e,r,o),N(r,t,o),N(r,i,o),l=!0},p(r,o){const s={};o&1&&(s.viewMode=r[0]),o&2&&(s.scope=r[1].scope),o&4&&(s.entityActions=r[2]),o&8&&(s.callbacks=r[3]),o&16&&(s.isFavoriteEntity=r[4]),e.$set(s)},i(r){l||(j(e.$$.fragment,r),l=!0)},o(r){X(e.$$.fragment,r),l=!1},d(r){r&&(I(t),I(i)),be(e,r)}}}function km(n){let e,t,i,l;return e=new wm({props:{scope:n[1].scope}}),i=new ll({props:{$$slots:{default:[ym]},$$scope:{ctx:n}}}),{c(){_e(e.$$.fragment),t=z(),_e(i.$$.fragment)},m(r,o){ve(e,r,o),N(r,t,o),ve(i,r,o),l=!0},p(r,[o]){const s={};o&2&&(s.scope=r[1].scope),e.$set(s);const a={};o&159&&(a.$$scope={dirty:o,ctx:r}),i.$set(a)},i(r){l||(j(e.$$.fragment,r),j(i.$$.fragment,r),l=!0)},o(r){X(e.$$.fragment,r),X(i.$$.fragment,r),l=!1},d(r){r&&I(t),be(e,r),be(i,r)}}}function Em(n,e,t){let{params:i}=e,{entityActions:l}=e,{callbacks:r}=e,{viewMode:o="list"}=e,{isFavoriteEntity:s=!1}=e,{onViewModeChange:a=u=>{}}=e;function f(u){t(0,o=u.detail.name),a(u.detail.name)}return st(()=>{i.afterOnMount&&i.afterOnMount()}),dn(()=>{i.afterOnDestroy&&i.afterOnDestroy()}),n.$$set=u=>{"params"in u&&t(1,i=u.params),"entityActions"in u&&t(2,l=u.entityActions),"callbacks"in u&&t(3,r=u.callbacks),"viewMode"in u&&t(0,o=u.viewMode),"isFavoriteEntity"in u&&t(4,s=u.isFavoriteEntity),"onViewModeChange"in u&&t(6,a=u.onViewModeChange)},[o,i,l,r,s,f,a]}class Sm extends Te{constructor(e){super(),Ce(this,e,Em,km,ke,{params:1,entityActions:2,callbacks:3,viewMode:0,isFavoriteEntity:4,onViewModeChange:6})}}function Ns(n,e,t){const i=n.slice();return i[36]=e[t],i}function Ms(n){let e,t,i,l,r=ue(n[0]),o=[];for(let s=0;s<r.length;s+=1)o[s]=Bs(Ns(n,r,s));return{c(){e=S("div"),t=S("ul");for(let s=0;s<o.length;s+=1)o[s].c();v(t,"class","nav-pills svelte-ud8o6q"),v(e,"class","items-container svelte-ud8o6q"),ge(e,"has-left-scroll",n[5]),ge(e,"has-right-scroll",n[4])},m(s,a){N(s,e,a),k(e,t);for(let f=0;f<o.length;f+=1)o[f]&&o[f].m(t,null);n[20](t),n[21](e),i||(l=[ne(e,"mousedown",n[6]),ne(e,"mousemove",n[7]),ne(e,"mouseup",n[8]),ne(e,"mouseleave",n[8]),ne(e,"touchstart",n[9]),ne(e,"touchmove",n[10]),ne(e,"touchend",n[11],{passive:!0}),ne(e,"wheel",n[12])],i=!0)},p(s,a){if(a[0]&8193){r=ue(s[0]);let f;for(f=0;f<r.length;f+=1){const u=Ns(s,r,f);o[f]?o[f].p(u,a):(o[f]=Bs(u),o[f].c(),o[f].m(t,null))}for(;f<o.length;f+=1)o[f].d(1);o.length=r.length}a[0]&32&&ge(e,"has-left-scroll",s[5]),a[0]&16&&ge(e,"has-right-scroll",s[4])},d(s){s&&I(e),et(o,s),n[20](null),n[21](null),i=!1,rt(l)}}}function Bs(n){let e,t,i=(n[36].title??n[36].name)+"",l,r,o,s;return{c(){e=S("li"),t=S("a"),l=he(i),v(t,"href","javascript:"),v(t,"data-name",r=n[36].name),v(t,"class","svelte-ud8o6q"),v(e,"class","item svelte-ud8o6q")},m(a,f){N(a,e,f),k(e,t),k(t,l),o||(s=ne(t,"click",n[13]),o=!0)},p(a,f){f[0]&1&&i!==(i=(a[36].title??a[36].name)+"")&&Be(l,i),f[0]&1&&r!==(r=a[36].name)&&v(t,"data-name",r)},d(a){a&&I(e),o=!1,s()}}}function Fs(n){let e;return{c(){e=S("div"),v(e,"class","layout-editor-container svelte-ud8o6q")},m(t,i){N(t,e,i)},d(t){t&&I(e)}}}function Dm(n){let e,t,i=n[0]&&Ms(n),l=n[1]&&Fs();return{c(){e=S("div"),i&&i.c(),t=z(),l&&l.c(),v(e,"class","panel-navigation svelte-ud8o6q")},m(r,o){N(r,e,o),i&&i.m(e,null),k(e,t),l&&l.m(e,null)},p(r,o){r[0]?i?i.p(r,o):(i=Ms(r),i.c(),i.m(e,t)):i&&(i.d(1),i=null),r[1]?l||(l=Fs(),l.c(),l.m(e,null)):l&&(l.d(1),l=null)},i:Ae,o:Ae,d(r){r&&I(e),i&&i.d(),l&&l.d()}}}const Rs=5;function Hn(n,e,t){return Math.min(Math.max(n,e),t)}function Am(n,e,t){let i,l,r,{items:o}=e,{scrollCallback:s=(me,De)=>{}}=e,{hasLayoutEditor:a=!1}=e,f,u,c=!1,d=!1,p=0,h=0,m=0,g=0,_=0,y=0,E=null,b=0,A=0,w=0;async function L(){await mn(),t(16,b=f.clientWidth),t(17,A=u.scrollWidth),t(18,w=b-A),w>0&&t(18,w=0),t(15,m=Hn(m,w,0)),t(3,u.style.transform=`translateX(${m}px)`,u),g=m}function O(me){const De=me.offsetLeft,We=me.offsetWidth,Y=-m,$=Y+b;let fe=m;De<Y?fe=-De:De+We>$&&(fe=-(De+We-b)),fe=Hn(fe,w,0),t(15,m=fe),g=m,t(3,u.style.transform=`translateX(${m}px)`,u)}function D(me){c=!0,d=!1,p=me.pageX,h=p,_=performance.now(),V()}function C(me){if(!c)return;const De=me.pageX,We=De-h,Y=performance.now(),$=Y-_;y=We/$,Math.abs(De-p)>Rs&&(d=!0),t(15,m=Hn(g+(De-p),w,0)),t(3,u.style.transform=`translateX(${m}px)`,u),h=De,_=Y}function R(){c&&(c=!1,g=m,H(),setTimeout(()=>d=!1,0))}function W(me){c=!0,d=!1,p=me.touches[0].pageX,h=p,_=performance.now(),V()}function Z(me){if(!c)return;const De=me.touches[0].pageX,We=De-h,Y=performance.now(),$=Y-_;y=We/$,Math.abs(De-p)>Rs&&(d=!0),t(15,m=Hn(g+(De-p),w,0)),t(3,u.style.transform=`translateX(${m}px)`,u),h=De,_=Y}function q(){c&&(c=!1,g=m,H(),setTimeout(()=>d=!1,0))}function H(){function De(){y*=.95,Math.abs(y)>.02?(t(15,m=Hn(m+y*16,w,0)),t(3,u.style.transform=`translateX(${m}px)`,u),E=requestAnimationFrame(De)):V(),g=m}E=requestAnimationFrame(De)}function V(){E!==null&&(cancelAnimationFrame(E),E=null)}function ie(me){me.shiftKey&&(me.preventDefault(),t(15,m=Hn(m-me.deltaY,w,0)),t(3,u.style.transform=`translateX(${m}px)`,u),g=m)}let le,Ne;st(()=>{L(),Ne=new ResizeObserver(()=>{L()}),le=new MutationObserver(()=>{L()}),le.observe(f,{childList:!0,subtree:!0}),Ne.observe(f)}),dn(()=>{le&&le.disconnect(),Ne&&Ne.disconnect()});function Ie(me){if(me.preventDefault(),d){me.stopPropagation();return}const De=me.currentTarget,We=De.closest("li");We&&O(We),De.dataset.name&&s(De.dataset.name,me)}function He(me){ze[me?"unshift":"push"](()=>{u=me,t(3,u)})}function je(me){ze[me?"unshift":"push"](()=>{f=me,t(2,f)})}return n.$$set=me=>{"items"in me&&t(0,o=me.items),"scrollCallback"in me&&t(14,s=me.scrollCallback),"hasLayoutEditor"in me&&t(1,a=me.hasLayoutEditor)},n.$$.update=()=>{n.$$.dirty[0]&196608&&t(19,i=A>b),n.$$.dirty[0]&557056&&t(5,l=i&&m<0),n.$$.dirty[0]&819200&&t(4,r=i&&m>w)},[o,a,f,u,r,l,D,C,R,W,Z,q,ie,Ie,s,m,b,A,w,i,He,je]}class Cm extends Te{constructor(e){super(),Ce(this,e,Am,Dm,ke,{items:0,scrollCallback:14,hasLayoutEditor:1},null,[-1,-1])}}function Tm(n){let e,t;return e=new Yt({props:{params:n[1]}}),e.$on("execute",function(){Pt(n[0])&&n[0].apply(this,arguments)}),{c(){_e(e.$$.fragment)},m(i,l){ve(e,i,l),t=!0},p(i,[l]){n=i;const r={};l&2&&(r.params=n[1]),e.$set(r)},i(i){t||(j(e.$$.fragment,i),t=!0)},o(i){X(e.$$.fragment,i),t=!1},d(i){be(e,i)}}}function Lm(n,e,t){let{filterApplied:i=!1}=e,{onExecute:l}=e,r,o;return n.$$set=s=>{"filterApplied"in s&&t(2,i=s.filterApplied),"onExecute"in s&&t(0,l=s.onExecute)},n.$$.update=()=>{n.$$.dirty&12&&(t(3,r=i?"danger":"default"),t(1,o={action:"openOverviewFilter",html:'<svg class="icon"><use href="client/img/icons/icons.svg#filter"></use></svg>',style:r,tooltip:B.translate("actionOpenFilter")}))},[l,o,i,r]}class Om extends Te{constructor(e){super(),Ce(this,e,Lm,Tm,ke,{filterApplied:2,onExecute:0})}}function Pm(n){let e,t;return e=new Yt({props:{params:n[0]}}),e.$on("execute",n[1]),{c(){_e(e.$$.fragment)},m(i,l){ve(e,i,l),t=!0},p(i,[l]){const r={};l&1&&(r.params=i[0]),e.$set(r)},i(i){t||(j(e.$$.fragment,i),t=!0)},o(i){X(e.$$.fragment,i),t=!1},d(i){be(e,i)}}}function Im(n,e,t){let{entity:i}=e,{id:l}=e,{bookmarkId:r=null}=e,{loading:o=!1}=e,s,a;async function f(){const d=ut.get();if(d){Re.notify(B.translate("Bookmarking")+"..."),t(3,o=!0);try{const p=await fetch("/api/v1/Bookmark",{method:"POST",headers:{"Content-Type":"application/json","Authorization-Token":btoa(d.user.userName+":"+d.token)},body:JSON.stringify({entityType:i,entityId:l})});if(p.ok){const h=await p.json();t(2,r=h.id),Re.notify(B.translate("Done"),"success")}}catch(p){console.error("Error on adding bookmark",p)}finally{t(3,o=!1)}}}async function u(){const d=ut.get();if(!(!d||!r)){Re.notify(B.translate("Unbookmarking")+"..."),t(3,o=!0);try{(await fetch("/api/v1/Bookmark/"+r,{method:"DELETE",headers:{"Authorization-Token":btoa(d.user.userName+":"+d.token),permanently:"true"}})).ok&&(t(2,r=null),Re.notify(B.translate("Done"),"success"))}catch(p){console.error("Error on removing bookmark",p)}finally{t(3,o=!1)}}}function c(d){a.action==="unbookmark"?u():f()}return n.$$set=d=>{"entity"in d&&t(4,i=d.entity),"id"in d&&t(5,l=d.id),"bookmarkId"in d&&t(2,r=d.bookmarkId),"loading"in d&&t(3,o=d.loading)},n.$$.update=()=>{n.$$.dirty&76&&(t(6,s=r?"primary outline":"default"),t(0,a={name:"bookmarking",action:r?"unbookmark":"bookmark",html:'<svg class="icon"><use href="client/img/icons/icons.svg#bookmark"></use></svg>',style:s,disabled:o,tooltip:B.translate(r?"actionUnbookmark":"actionBookmark")}))},[a,c,r,o,i,l,s]}class Nm extends Te{constructor(e){super(),Ce(this,e,Im,Pm,ke,{entity:4,id:5,bookmarkId:2,loading:3})}}function Mm(n){let e,t;return e=new Yt({props:{params:n[0]}}),e.$on("execute",n[1]),{c(){_e(e.$$.fragment)},m(i,l){ve(e,i,l),t=!0},p(i,[l]){const r={};l&1&&(r.params=i[0]),e.$set(r)},i(i){t||(j(e.$$.fragment,i),t=!0)},o(i){X(e.$$.fragment,i),t=!1},d(i){be(e,i)}}}function Bm(n,e,t){let{entity:i}=e,{id:l}=e,{followers:r}=e,{onFollow:o}=e,{onUnfollow:s}=e,a=!1,f,u,c;async function d(){const m=ut.get();if(m)try{t(7,a=!0);const g=await fetch(`/api/v1/${i}/${l}/subscription`,{method:"DELETE",headers:{"Authorization-Token":btoa(m.user.userName+":"+m.token)}});g.ok?(delete r[m.user.id],s()):console.error("Error on unfollowing record",g)}catch(g){console.error("Error on unfollowing record",g)}finally{t(7,a=!1)}}async function p(){const m=ut.get();if(m){try{const g=await fetch(`/api/v1/${i}/${l}/subscription`,{method:"PUT",headers:{"Authorization-Token":btoa(m.user.userName+":"+m.token)}});g.ok?(t(2,r[m.user.id]=m.user.name,r),s()):console.error("Error on following record",g)}catch(g){console.error("Error on following record",g)}finally{t(7,a=!1)}o()}}function h(m){c.action==="unfollow"?d():p()}return n.$$set=m=>{"entity"in m&&t(3,i=m.entity),"id"in m&&t(4,l=m.id),"followers"in m&&t(2,r=m.followers),"onFollow"in m&&t(5,o=m.onFollow),"onUnfollow"in m&&t(6,s=m.onUnfollow)},n.$$.update=()=>{var m;if(n.$$.dirty&900){const g=((m=ut.get())==null?void 0:m.user.id)??null;t(8,f=g?!!r[g]:!1),t(9,u=f?"primary outline":"default"),t(0,c={name:"following",action:f?"unfollow":"follow",html:'<svg class="icon bell"><use href="client/img/icons/icons.svg#bell"></use></svg>',style:u,disabled:a,tooltip:B.translate(f?"actionUnfollow":"actionFollow")})}},[c,h,r,i,l,o,s,a,f,u]}class Fm extends Te{constructor(e){super(),Ce(this,e,Bm,Mm,ke,{entity:3,id:4,followers:2,onFollow:5,onUnfollow:6})}}function Hs(n,e,t){const i=n.slice();return i[6]=e[t],i}function Ws(n){let e,t;return e=new Yt({props:{params:n[6]}}),e.$on("execute",n[1]),{c(){_e(e.$$.fragment)},m(i,l){ve(e,i,l),t=!0},p(i,l){const r={};l&1&&(r.params=i[6]),e.$set(r)},i(i){t||(j(e.$$.fragment,i),t=!0)},o(i){X(e.$$.fragment,i),t=!1},d(i){be(e,i)}}}function Rm(n){let e,t,i=ue(n[0]),l=[];for(let o=0;o<i.length;o+=1)l[o]=Ws(Hs(n,i,o));const r=o=>X(l[o],1,1,()=>{l[o]=null});return{c(){e=S("div");for(let o=0;o<l.length;o+=1)l[o].c();v(e,"class","btn-group")},m(o,s){N(o,e,s);for(let a=0;a<l.length;a+=1)l[a]&&l[a].m(e,null);t=!0},p(o,[s]){if(s&3){i=ue(o[0]);let a;for(a=0;a<i.length;a+=1){const f=Hs(o,i,a);l[a]?(l[a].p(f,s),j(l[a],1)):(l[a]=Ws(f),l[a].c(),j(l[a],1),l[a].m(e,null))}for(Ve(),a=i.length;a<l.length;a+=1)r(a);Ue()}},i(o){if(!t){for(let s=0;s<i.length;s+=1)j(l[s]);t=!0}},o(o){l=l.filter(Boolean);for(let s=0;s<l.length;s+=1)X(l[s]);t=!1},d(o){o&&I(e),et(l,o)}}}function Hm(n,e,t){let{hasPrevious:i=!1}=e,{hasNext:l=!1}=e,{onExecute:r}=e,o=!1,s;function a(f){t(5,o=!0),r(f)}return n.$$set=f=>{"hasPrevious"in f&&t(2,i=f.hasPrevious),"hasNext"in f&&t(3,l=f.hasNext),"onExecute"in f&&t(4,r=f.onExecute)},n.$$.update=()=>{n.$$.dirty&44&&t(0,s=[{name:"navigation",action:"previous",html:'<svg class="icon"><use href="client/img/icons/icons.svg#angle-left"></use></svg>',tooltip:B.translate("Previous Entry"),disabled:!i||o},{name:"navigation",action:"next",html:'<svg class="icon"><use href="client/img/icons/icons.svg#angle-right"></use></svg>',tooltip:B.translate("Next Entry"),disabled:!l||o}])},[s,a,i,l,r,o]}class Wm extends Te{constructor(e){super(),Ce(this,e,Hm,Rm,ke,{hasPrevious:2,hasNext:3,onExecute:4})}}function qs(n,e,t){const i=n.slice();return i[19]=e[t],i}function js(n,e,t){const i=n.slice();return i[22]=e[t],i}function zs(n,e,t){const i=n.slice();return i[22]=e[t],i}function qm(n){let e,t,i=ue(n[9]),l=[];for(let o=0;o<i.length;o+=1)l[o]=Gs(js(n,i,o));const r=o=>X(l[o],1,1,()=>{l[o]=null});return{c(){for(let o=0;o<l.length;o+=1)l[o].c();e=Ge()},m(o,s){for(let a=0;a<l.length;a+=1)l[a]&&l[a].m(o,s);N(o,e,s),t=!0},p(o,s){if(s&8704){i=ue(o[9]);let a;for(a=0;a<i.length;a+=1){const f=js(o,i,a);l[a]?(l[a].p(f,s),j(l[a],1)):(l[a]=Gs(f),l[a].c(),j(l[a],1),l[a].m(e.parentNode,e))}for(Ve(),a=i.length;a<l.length;a+=1)r(a);Ue()}},i(o){if(!t){for(let s=0;s<i.length;s+=1)j(l[s]);t=!0}},o(o){l=l.filter(Boolean);for(let s=0;s<l.length;s+=1)X(l[s]);t=!1},d(o){o&&I(e),et(l,o)}}}function jm(n){let e,t,i,l=ue(n[7]),r=[];for(let a=0;a<l.length;a+=1)r[a]=Vs(zs(n,l,a));const o=a=>X(r[a],1,1,()=>{r[a]=null});let s=n[11]&&Us();return{c(){for(let a=0;a<r.length;a+=1)r[a].c();e=z(),s&&s.c(),t=Ge()},m(a,f){for(let u=0;u<r.length;u+=1)r[u]&&r[u].m(a,f);N(a,e,f),s&&s.m(a,f),N(a,t,f),i=!0},p(a,f){if(f&8320){l=ue(a[7]);let u;for(u=0;u<l.length;u+=1){const c=zs(a,l,u);r[u]?(r[u].p(c,f),j(r[u],1)):(r[u]=Vs(c),r[u].c(),j(r[u],1),r[u].m(e.parentNode,e))}for(Ve(),u=l.length;u<r.length;u+=1)o(u);Ue()}a[11]?s?f&2048&&j(s,1):(s=Us(),s.c(),j(s,1),s.m(t.parentNode,t)):s&&(Ve(),X(s,1,1,()=>{s=null}),Ue())},i(a){if(!i){for(let f=0;f<l.length;f+=1)j(r[f]);j(s),i=!0}},o(a){r=r.filter(Boolean);for(let f=0;f<r.length;f+=1)X(r[f]);X(s),i=!1},d(a){a&&(I(e),I(t)),et(r,a),s&&s.d(a)}}}function Gs(n){let e,t;return e=new Yt({props:{params:n[22],className:"additional-button"}}),e.$on("execute",n[13]),{c(){_e(e.$$.fragment)},m(i,l){ve(e,i,l),t=!0},p(i,l){const r={};l&512&&(r.params=i[22]),e.$set(r)},i(i){t||(j(e.$$.fragment,i),t=!0)},o(i){X(e.$$.fragment,i),t=!1},d(i){be(e,i)}}}function Vs(n){let e,t;return e=new Yt({props:{params:n[22],className:"additional-button dynamic-action"}}),e.$on("execute",n[13]),{c(){_e(e.$$.fragment)},m(i,l){ve(e,i,l),t=!0},p(i,l){const r={};l&128&&(r.params=i[22]),e.$set(r)},i(i){t||(j(e.$$.fragment,i),t=!0)},o(i){X(e.$$.fragment,i),t=!1},d(i){be(e,i)}}}function Us(n){let e,t,i;return t=new ol({props:{heightPx:12}}),{c(){e=S("button"),_e(t.$$.fragment),v(e,"class","btn preloader additional-button svelte-1fwhcnk")},m(l,r){N(l,e,r),ve(t,e,null),i=!0},i(l){i||(j(t.$$.fragment,l),i=!0)},o(l){X(t.$$.fragment,l),i=!1},d(l){l&&I(e),be(t)}}}function zm(n){let e,t,i,l;const r=[jm,qm],o=[];function s(a,f){return a[1]==="detail"?0:a[1]==="edit"?1:-1}return~(e=s(n))&&(t=o[e]=r[e](n)),{c(){t&&t.c(),i=Ge()},m(a,f){~e&&o[e].m(a,f),N(a,i,f),l=!0},p(a,f){let u=e;e=s(a),e===u?~e&&o[e].p(a,f):(t&&(Ve(),X(o[u],1,1,()=>{o[u]=null}),Ue()),~e?(t=o[e],t?t.p(a,f):(t=o[e]=r[e](a),t.c()),j(t,1),t.m(i.parentNode,i)):t=null)},i(a){l||(j(t),l=!0)},o(a){X(t),l=!1},d(a){a&&I(i),~e&&o[e].d(a)}}}function Xs(n){let e,t,i,l,r=ue(n[10]),o=[];for(let a=0;a<r.length;a+=1)o[a]=Js(qs(n,r,a));const s=a=>X(o[a],1,1,()=>{o[a]=null});return{c(){e=S("div"),t=S("div"),i=S("div");for(let a=0;a<o.length;a+=1)o[a].c();v(i,"class","header-items"),v(t,"class","header-buttons svelte-1fwhcnk"),v(e,"class","header-buttons-container")},m(a,f){N(a,e,f),k(e,t),k(t,i);for(let u=0;u<o.length;u+=1)o[u]&&o[u].m(i,null);l=!0},p(a,f){if(f&15389){r=ue(a[10]);let u;for(u=0;u<r.length;u+=1){const c=qs(a,r,u);o[u]?(o[u].p(c,f),j(o[u],1)):(o[u]=Js(c),o[u].c(),j(o[u],1),o[u].m(i,null))}for(Ve(),u=r.length;u<o.length;u+=1)s(u);Ue()}},i(a){if(!l){for(let f=0;f<r.length;f+=1)j(o[f]);l=!0}},o(a){o=o.filter(Boolean);for(let f=0;f<o.length;f+=1)X(o[f]);l=!1},d(a){a&&I(e),et(o,a)}}}function Gm(n){let e,t;return e=new Yt({props:{params:n[19]}}),e.$on("execute",n[13]),{c(){_e(e.$$.fragment)},m(i,l){ve(e,i,l),t=!0},p(i,l){const r={};l&1024&&(r.params=i[19]),e.$set(r)},i(i){t||(j(e.$$.fragment,i),t=!0)},o(i){X(e.$$.fragment,i),t=!1},d(i){be(e,i)}}}function Vm(n){let e,t;return e=new Wm({props:{hasNext:n[0].hasNext,hasPrevious:n[0].hasPrevious,onExecute:n[13]}}),{c(){_e(e.$$.fragment)},m(i,l){ve(e,i,l),t=!0},p(i,l){const r={};l&1&&(r.hasNext=i[0].hasNext),l&1&&(r.hasPrevious=i[0].hasPrevious),e.$set(r)},i(i){t||(j(e.$$.fragment,i),t=!0)},o(i){X(e.$$.fragment,i),t=!1},d(i){be(e,i)}}}function Um(n){let e,t,i=n[4]&&n[0].followers&&Ys(n);return{c(){i&&i.c(),e=Ge()},m(l,r){i&&i.m(l,r),N(l,e,r),t=!0},p(l,r){l[4]&&l[0].followers?i?(i.p(l,r),r&17&&j(i,1)):(i=Ys(l),i.c(),j(i,1),i.m(e.parentNode,e)):i&&(Ve(),X(i,1,1,()=>{i=null}),Ue())},i(l){t||(j(i),t=!0)},o(l){X(i),t=!1},d(l){l&&I(e),i&&i.d(l)}}}function Xm(n){let e,t,i=n[4]&&Qs(n);return{c(){i&&i.c(),e=Ge()},m(l,r){i&&i.m(l,r),N(l,e,r),t=!0},p(l,r){l[4]?i?(i.p(l,r),r&16&&j(i,1)):(i=Qs(l),i.c(),j(i,1),i.m(e.parentNode,e)):i&&(Ve(),X(i,1,1,()=>{i=null}),Ue())},i(l){t||(j(i),t=!0)},o(l){X(i),t=!1},d(l){l&&I(e),i&&i.d(l)}}}function Ym(n){let e,t;return e=new Om({props:{filterApplied:n[0].isOverviewFilterActive??!1,onExecute:n[13]}}),{c(){_e(e.$$.fragment)},m(i,l){ve(e,i,l),t=!0},p(i,l){const r={};l&1&&(r.filterApplied=i[0].isOverviewFilterActive??!1),e.$set(r)},i(i){t||(j(e.$$.fragment,i),t=!0)},o(i){X(e.$$.fragment,i),t=!1},d(i){be(e,i)}}}function Ys(n){let e,t;return e=new Fm({props:{entity:n[3],id:n[4],followers:n[0].followers,onFollow:n[2].onFollow,onUnfollow:n[2].onUnfollow}}),{c(){_e(e.$$.fragment)},m(i,l){ve(e,i,l),t=!0},p(i,l){const r={};l&8&&(r.entity=i[3]),l&16&&(r.id=i[4]),l&1&&(r.followers=i[0].followers),l&4&&(r.onFollow=i[2].onFollow),l&4&&(r.onUnfollow=i[2].onUnfollow),e.$set(r)},i(i){t||(j(e.$$.fragment,i),t=!0)},o(i){X(e.$$.fragment,i),t=!1},d(i){be(e,i)}}}function Qs(n){let e,t;return e=new Nm({props:{entity:n[3],id:n[4],bookmarkId:n[12],loading:n[11]}}),{c(){_e(e.$$.fragment)},m(i,l){ve(e,i,l),t=!0},p(i,l){const r={};l&8&&(r.entity=i[3]),l&16&&(r.id=i[4]),l&4096&&(r.bookmarkId=i[12]),l&2048&&(r.loading=i[11]),e.$set(r)},i(i){t||(j(e.$$.fragment,i),t=!0)},o(i){X(e.$$.fragment,i),t=!1},d(i){be(e,i)}}}function Js(n){let e,t,i,l,r,o;const s=[Ym,Xm,Um,Vm,Gm],a=[];function f(u,c){return c&1024&&(e=null),c&1024&&(t=null),u[19].action==="openOverviewFilter"?0:(e==null&&(e=!!["bookmark","unbookmark"].includes(u[19].action)),e?1:(t==null&&(t=!!["follow","unfollow"].includes(u[19].action)),t?2:u[19].action==="navigation"?3:4))}return i=f(n,-1),l=a[i]=s[i](n),{c(){l.c(),r=Ge()},m(u,c){a[i].m(u,c),N(u,r,c),o=!0},p(u,c){let d=i;i=f(u,c),i===d?a[i].p(u,c):(Ve(),X(a[d],1,1,()=>{a[d]=null}),Ue(),l=a[i],l?l.p(u,c):(l=a[i]=s[i](u),l.c()),j(l,1),l.m(r.parentNode,r))},i(u){o||(j(l),o=!0)},o(u){X(l),o=!1},d(u){u&&I(r),a[i].d(u)}}}function Qm(n){var o;let e,t,i,l;t=new Ss({props:{actions:n[5],dropdownActions:n[6],dynamicActionsDropdown:n[1]!=="edit"?n[8]:[],executeAction:n[13],loadingActions:n[11],hasMoreButton:!0,className:"record-actions",$$slots:{default:[zm]},$$scope:{ctx:n}}});let r=n[1]==="detail"&&((o=n[0])==null?void 0:o.headerButtons)&&Xs(n);return{c(){e=S("div"),_e(t.$$.fragment),i=z(),r&&r.c(),v(e,"class","button-row svelte-1fwhcnk")},m(s,a){N(s,e,a),ve(t,e,null),k(e,i),r&&r.m(e,null),l=!0},p(s,[a]){var u;const f={};a&32&&(f.actions=s[5]),a&64&&(f.dropdownActions=s[6]),a&258&&(f.dynamicActionsDropdown=s[1]!=="edit"?s[8]:[]),a&2048&&(f.loadingActions=s[11]),a&134220418&&(f.$$scope={dirty:a,ctx:s}),t.$set(f),s[1]==="detail"&&((u=s[0])!=null&&u.headerButtons)?r?(r.p(s,a),a&3&&j(r,1)):(r=Xs(s),r.c(),j(r,1),r.m(e,null)):r&&(Ve(),X(r,1,1,()=>{r=null}),Ue())},i(s){l||(j(t.$$.fragment,s),j(r),l=!0)},o(s){X(t.$$.fragment,s),X(r),l=!1},d(s){s&&I(e),be(t),r&&r.d()}}}function Jm(n,e,t){let{mode:i="detail"}=e,{recordButtons:l}=e,{callbacks:r}=e,{permissions:o}=e,{scope:s}=e,{id:a}=e,f=[],u=[],c=[],d=[],p=[],h=[],m=[],g=!1,_=null;window.addEventListener("detail:overview-filters-changed",w=>{const L=w.detail;!L||!l||t(0,l.isOverviewFilterActive=L.isOverviewFilterActive,l)}),window.addEventListener("record:actions-reload",w=>{b()}),window.addEventListener("record:buttons-update",w=>{l?t(0,l=Object.assign(l,w.detail||{})):t(0,l=w.detail||{})}),window.addEventListener("record:followers-updated",w=>{l&&t(0,l.followers=w.detail,l)});async function y(){let w=ut.get();if(!w||!a)return[];try{const L=await fetch(`/api/v1/Action/${s}/${a}/dynamicActions?type=record`,{method:"GET",headers:{"Content-Type":"application/json","Authorization-Token":btoa(w.user.userName+":"+w.token)}});return L.ok?await L.json():[]}catch(L){return console.error(L),[]}}function E(){const w=[];return(re.get(["clientDefs",s,"uiHandler"])||[]).forEach(L=>{L.type==="setValue"&&L.triggerAction==="onButtonClick"&&w.push({action:"uiHandler",id:L.id,label:L.name})}),w}function b(){re.get(["scopes",s,"actionDisabled"])||(t(15,d=[]),t(8,p=[]),t(11,g=!0),y().then(w=>{const L=w.map(D=>({...D,id:D.data.action_id??null})),O=w.filter(D=>["bookmark","unbookmark"].includes(D.action)).pop();O&&t(12,_=O.data.bookmark_id??null),t(15,d=L.filter(D=>D.display==="single")),t(8,p=L.filter(D=>D.display==="dropdown"))}).catch(w=>{console.error(w)}).finally(()=>t(11,g=!1)))}function A(w){l==null||l.executeAction(w.detail.action,w.detail.data,w.detail.event||w)}return st(()=>{b()}),n.$$set=w=>{"mode"in w&&t(1,i=w.mode),"recordButtons"in w&&t(0,l=w.recordButtons),"callbacks"in w&&t(2,r=w.callbacks),"permissions"in w&&t(14,o=w.permissions),"scope"in w&&t(3,s=w.scope),"id"in w&&t(4,a=w.id)},n.$$.update=()=>{var w;n.$$.dirty&32771&&(t(5,f=(i==="edit"?l==null?void 0:l.editButtons:l==null?void 0:l.buttons)??[]),t(7,c=[...(l==null?void 0:l.additionalButtons)??[],...d]),t(6,u=(i==="edit"?l==null?void 0:l.dropdownEditButtons:l==null?void 0:l.dropdownButtons)??[]),t(9,h=i==="edit"?[...(l==null?void 0:l.additionalEditButtons)??[],...E()]:[]),t(10,m=(((w=l==null?void 0:l.headerButtons)==null?void 0:w.buttons)??[]).filter(L=>!L.hidden)))},[l,i,r,s,a,f,u,c,p,h,m,g,_,A,o,d]}class Zm extends Te{constructor(e){super(),Ce(this,e,Jm,Qm,ke,{mode:1,recordButtons:0,callbacks:2,permissions:14,scope:3,id:4})}}function Zs(n){let e,t,i;return t=new Zm({props:{mode:n[5],scope:n[0].scope,id:n[0].id,permissions:n[0].scopePermissions,recordButtons:n[2],callbacks:n[3]}}),{c(){e=S("div"),_e(t.$$.fragment),v(e,"class","detail-button-container")},m(l,r){N(l,e,r),ve(t,e,null),i=!0},p(l,r){const o={};r&32&&(o.mode=l[5]),r&1&&(o.scope=l[0].scope),r&1&&(o.id=l[0].id),r&1&&(o.permissions=l[0].scopePermissions),r&4&&(o.recordButtons=l[2]),r&8&&(o.callbacks=l[3]),t.$set(o)},i(l){i||(j(t.$$.fragment,l),i=!0)},o(l){X(t.$$.fragment,l),i=!1},d(l){l&&I(e),be(t)}}}function Ks(n){var l;let e,t,i;return t=new Cm({props:{items:n[1],scrollCallback:n[4],hasLayoutEditor:((l=n[2])==null?void 0:l.hasLayoutEditor)&&n[0].mode!=="edit"}}),{c(){e=S("div"),_e(t.$$.fragment),v(e,"class","anchor-nav-container")},m(r,o){N(r,e,o),ve(t,e,null),i=!0},p(r,o){var a;const s={};o&2&&(s.items=r[1]),o&16&&(s.scrollCallback=r[4]),o&5&&(s.hasLayoutEditor=((a=r[2])==null?void 0:a.hasLayoutEditor)&&r[0].mode!=="edit"),t.$set(s)},i(r){i||(j(t.$$.fragment,r),i=!0)},o(r){X(t.$$.fragment,r),i=!1},d(r){r&&I(e),be(t)}}}function Km(n){let e,t,i,l=n[2]&&Zs(n),r=n[1].length>1&&Ks(n);return{c(){l&&l.c(),e=z(),r&&r.c(),t=Ge()},m(o,s){l&&l.m(o,s),N(o,e,s),r&&r.m(o,s),N(o,t,s),i=!0},p(o,s){o[2]?l?(l.p(o,s),s&4&&j(l,1)):(l=Zs(o),l.c(),j(l,1),l.m(e.parentNode,e)):l&&(Ve(),X(l,1,1,()=>{l=null}),Ue()),o[1].length>1?r?(r.p(o,s),s&2&&j(r,1)):(r=Ks(o),r.c(),j(r,1),r.m(t.parentNode,t)):r&&(Ve(),X(r,1,1,()=>{r=null}),Ue())},i(o){i||(j(l),j(r),i=!0)},o(o){X(l),X(r),i=!1},d(o){o&&(I(e),I(t)),l&&l.d(o),r&&r.d(o)}}}function xm(n){let e,t;return e=new ll({props:{breadcrumbs:n[0].breadcrumbs,currentIsHeading:n[6],$$slots:{default:[Km]},$$scope:{ctx:n}}}),{c(){_e(e.$$.fragment)},m(i,l){ve(e,i,l),t=!0},p(i,[l]){const r={};l&1&&(r.breadcrumbs=i[0].breadcrumbs),l&64&&(r.currentIsHeading=i[6]),l&191&&(r.$$scope={dirty:l,ctx:i}),e.$set(r)},i(i){t||(j(e.$$.fragment,i),t=!0)},o(i){X(e.$$.fragment,i),t=!1},d(i){be(e,i)}}}function $m(n,e,t){let{params:i}=e,{anchorNavItems:l=[]}=e,{recordButtons:r=null}=e,{callbacks:o}=e,{anchorScrollCallback:s=(u,c)=>{}}=e,a,f=(i==null?void 0:i.currentIsHeading)??!0;return window.addEventListener("detail:panels-loaded",u=>{t(1,l=u.detail)}),window.addEventListener("record-mode:changed",u=>{t(0,i.mode=u.detail,i)}),f===!0&&window.addEventListener("breadcrumbs:header-updated",u=>{t(6,f=!!u.detail)}),window.addEventListener("breadcrumbs:items-updated",u=>{t(0,i.breadcrumbs=u.detail,i)}),st(()=>{i.afterOnMount&&i.afterOnMount()}),dn(()=>{i.afterOnDestroy&&i.afterOnDestroy()}),n.$$set=u=>{"params"in u&&t(0,i=u.params),"anchorNavItems"in u&&t(1,l=u.anchorNavItems),"recordButtons"in u&&t(2,r=u.recordButtons),"callbacks"in u&&t(3,o=u.callbacks),"anchorScrollCallback"in u&&t(4,s=u.anchorScrollCallback)},n.$$.update=()=>{n.$$.dirty&1&&t(5,a=i.mode??"detail")},[i,l,r,o,s,a,f]}class eh extends Te{constructor(e){super(),Ce(this,e,$m,xm,ke,{params:0,anchorNavItems:1,recordButtons:2,callbacks:3,anchorScrollCallback:4})}}window.SvelteLanguage=B,window.SvelteUserData=ut,window.SvelteNotifier=Re,window.SvelteLayoutManager=Gt,window.SvelteMetadata=re,window.SvelteModelFactory=Fl,window.SvelteConfig=ko,window.SvelteStorage=Ee,window.SvelteAcl=Nt,window.SvelteCollectionFactory=So,window.driver=_u,window.tippy=$n,Qe.ApiRequestComponent=Zd,Qe.BaseHeader=ll,Qe.DetailHeader=eh,Qe.Favorites=dp,Qe.JobManagerIcon=Dc,Qe.LayoutComponent=Ld,Qe.ListHeader=Sm,Qe.Navigation=sp,Qe.RightSideView=Yp,Qe.TreePanel=Cp,Qe.UpdatePanel=Ic,Object.defineProperty(Qe,Symbol.toStringTag,{value:"Module"})});
