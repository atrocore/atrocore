(function(We,Ze){typeof exports=="object"&&typeof module<"u"?Ze(exports):typeof define=="function"&&define.amd?define(["exports"],Ze):(We=typeof globalThis<"u"?globalThis:We||self,Ze(We.Svelte={}))})(this,function(We){"use strict";var Dc=Object.defineProperty;var kc=(We,Ze,Ht)=>Ze in We?Dc(We,Ze,{enumerable:!0,configurable:!0,writable:!0,value:Ht}):We[Ze]=Ht;var Nr=(We,Ze,Ht)=>kc(We,typeof Ze!="symbol"?Ze+"":Ze,Ht);let Ze={};function Ht(t={}){Ze={animate:!0,allowClose:!0,overlayOpacity:.7,smoothScroll:!1,disableActiveInteraction:!1,showProgress:!1,stagePadding:10,stageRadius:5,popoverOffset:10,showButtons:["next","previous","close"],disableButtons:[],overlayColor:"#000",...t}}function G(t){return t?Ze[t]:Ze}function Kn(t,e,n,i){return(t/=i/2)<1?n/2*t*t+e:-n/2*(--t*(t-2)-1)+e}function Mr(t){const e='a[href]:not([disabled]), button:not([disabled]), textarea:not([disabled]), input[type="text"]:not([disabled]), input[type="radio"]:not([disabled]), input[type="checkbox"]:not([disabled]), select:not([disabled])';return t.flatMap(n=>{const i=n.matches(e),r=Array.from(n.querySelectorAll(e));return[...i?[n]:[],...r]}).filter(n=>getComputedStyle(n).pointerEvents!=="none"&&El(n))}function Rr(t){if(!t||_l(t))return;const e=G("smoothScroll");t.scrollIntoView({behavior:!e||wl(t)?"auto":"smooth",inline:"center",block:"center"})}function wl(t){if(!t||!t.parentElement)return;const e=t.parentElement;return e.scrollHeight>e.clientHeight}function _l(t){const e=t.getBoundingClientRect();return e.top>=0&&e.left>=0&&e.bottom<=(window.innerHeight||document.documentElement.clientHeight)&&e.right<=(window.innerWidth||document.documentElement.clientWidth)}function El(t){return!!(t.offsetWidth||t.offsetHeight||t.getClientRects().length)}let Qn={};function ze(t,e){Qn[t]=e}function X(t){return t?Qn[t]:Qn}function xr(){Qn={}}let Zn={};function $n(t,e){Zn[t]=e}function Yt(t){var e;(e=Zn[t])==null||e.call(Zn)}function Dl(){Zn={}}function kl(t,e,n,i){let r=X("__activeStagePosition");const o=r||n.getBoundingClientRect(),l=i.getBoundingClientRect(),s=Kn(t,o.x,l.x-o.x,e),a=Kn(t,o.y,l.y-o.y,e),u=Kn(t,o.width,l.width-o.width,e),f=Kn(t,o.height,l.height-o.height,e);r={x:s,y:a,width:u,height:f},Br(r),ze("__activeStagePosition",r)}function Fr(t){if(!t)return;const e=t.getBoundingClientRect(),n={x:e.x,y:e.y,width:e.width,height:e.height};ze("__activeStagePosition",n),Br(n)}function Sl(){const t=X("__activeStagePosition"),e=X("__overlaySvg");if(!t)return;if(!e){console.warn("No stage svg found.");return}const n=window.innerWidth,i=window.innerHeight;e.setAttribute("viewBox",`0 0 ${n} ${i}`)}function Cl(t){const e=Tl(t);document.body.appendChild(e),zr(e,n=>{n.target.tagName==="path"&&Yt("overlayClick")}),ze("__overlaySvg",e)}function Br(t){const e=X("__overlaySvg");if(!e){Cl(t);return}const n=e.firstElementChild;if((n==null?void 0:n.tagName)!=="path")throw new Error("no path element found in stage svg");n.setAttribute("d",Hr(t))}function Tl(t){const e=window.innerWidth,n=window.innerHeight,i=document.createElementNS("http://www.w3.org/2000/svg","svg");i.classList.add("driver-overlay","driver-overlay-animated"),i.setAttribute("viewBox",`0 0 ${e} ${n}`),i.setAttribute("xmlSpace","preserve"),i.setAttribute("xmlnsXlink","http://www.w3.org/1999/xlink"),i.setAttribute("version","1.1"),i.setAttribute("preserveAspectRatio","xMinYMin slice"),i.style.fillRule="evenodd",i.style.clipRule="evenodd",i.style.strokeLinejoin="round",i.style.strokeMiterlimit="2",i.style.zIndex="10000",i.style.position="fixed",i.style.top="0",i.style.left="0",i.style.width="100%",i.style.height="100%";const r=document.createElementNS("http://www.w3.org/2000/svg","path");return r.setAttribute("d",Hr(t)),r.style.fill=G("overlayColor")||"rgb(0,0,0)",r.style.opacity=`${G("overlayOpacity")}`,r.style.pointerEvents="auto",r.style.cursor="auto",i.appendChild(r),i}function Hr(t){const e=window.innerWidth,n=window.innerHeight,i=G("stagePadding")||0,r=G("stageRadius")||0,o=t.width+i*2,l=t.height+i*2,s=Math.min(r,o/2,l/2),a=Math.floor(Math.max(s,0)),u=t.x-i+a,f=t.y-i,c=o-a*2,d=l-a*2;return`M${e},0L0,0L0,${n}L${e},${n}L${e},0Z
    M${u},${f} h${c} a${a},${a} 0 0 1 ${a},${a} v${d} a${a},${a} 0 0 1 -${a},${a} h-${c} a${a},${a} 0 0 1 -${a},-${a} v-${d} a${a},${a} 0 0 1 ${a},-${a} z`}function Ol(){const t=X("__overlaySvg");t&&t.remove()}function Al(){const t=document.getElementById("driver-dummy-element");if(t)return t;let e=document.createElement("div");return e.id="driver-dummy-element",e.style.width="0",e.style.height="0",e.style.pointerEvents="none",e.style.opacity="0",e.style.position="fixed",e.style.top="50%",e.style.left="50%",document.body.appendChild(e),e}function jr(t){const{element:e}=t;let n=typeof e=="string"?document.querySelector(e):e;n||(n=Al()),Pl(n,t)}function Ll(){const t=X("__activeElement"),e=X("__activeStep");t&&(Fr(t),Sl(),Xr(t,e))}function Pl(t,e){const n=Date.now(),i=X("__activeStep"),r=X("__activeElement")||t,o=!r||r===t,l=t.id==="driver-dummy-element",s=r.id==="driver-dummy-element",a=G("animate"),u=e.onHighlightStarted||G("onHighlightStarted"),f=(e==null?void 0:e.onHighlighted)||G("onHighlighted"),c=(i==null?void 0:i.onDeselected)||G("onDeselected"),d=G(),m=X();!o&&c&&c(s?void 0:r,i,{config:d,state:m}),u&&u(l?void 0:t,e,{config:d,state:m});const h=!o&&a;let g=!1;xl(),ze("previousStep",i),ze("previousElement",r),ze("activeStep",e),ze("activeElement",t);const v=()=>{if(X("__transitionCallback")!==v)return;const b=Date.now()-n,_=400-b<=400/2;e.popover&&_&&!g&&h&&(qr(t,e),g=!0),G("animate")&&b<400?kl(b,400,r,t):(Fr(t),f&&f(l?void 0:t,e,{config:G(),state:X()}),ze("__transitionCallback",void 0),ze("__previousStep",i),ze("__previousElement",r),ze("__activeStep",e),ze("__activeElement",t)),window.requestAnimationFrame(v)};ze("__transitionCallback",v),window.requestAnimationFrame(v),Rr(t),!h&&e.popover&&qr(t,e),r.classList.remove("driver-active-element","driver-no-interaction"),r.removeAttribute("aria-haspopup"),r.removeAttribute("aria-expanded"),r.removeAttribute("aria-controls"),G("disableActiveInteraction")&&t.classList.add("driver-no-interaction"),t.classList.add("driver-active-element"),t.setAttribute("aria-haspopup","dialog"),t.setAttribute("aria-expanded","true"),t.setAttribute("aria-controls","driver-popover-content")}function Il(){var t;(t=document.getElementById("driver-dummy-element"))==null||t.remove(),document.querySelectorAll(".driver-active-element").forEach(e=>{e.classList.remove("driver-active-element","driver-no-interaction"),e.removeAttribute("aria-haspopup"),e.removeAttribute("aria-expanded"),e.removeAttribute("aria-controls")})}function En(){const t=X("__resizeTimeout");t&&window.cancelAnimationFrame(t),ze("__resizeTimeout",window.requestAnimationFrame(Ll))}function Nl(t){var e;if(!X("isInitialized")||!(t.key==="Tab"||t.keyCode===9))return;const n=X("__activeElement"),i=(e=X("popover"))==null?void 0:e.wrapper,r=Mr([...i?[i]:[],...n?[n]:[]]),o=r[0],l=r[r.length-1];if(t.preventDefault(),t.shiftKey){const s=r[r.indexOf(document.activeElement)-1]||l;s==null||s.focus()}else{const s=r[r.indexOf(document.activeElement)+1]||o;s==null||s.focus()}}function Wr(t){var e;((e=G("allowKeyboardControl"))==null||e)&&(t.key==="Escape"?Yt("escapePress"):t.key==="ArrowRight"?Yt("arrowRightPress"):t.key==="ArrowLeft"&&Yt("arrowLeftPress"))}function zr(t,e,n){const i=(r,o)=>{const l=r.target;t.contains(l)&&((!n||n(l))&&(r.preventDefault(),r.stopPropagation(),r.stopImmediatePropagation()),o==null||o(r))};document.addEventListener("pointerdown",i,!0),document.addEventListener("mousedown",i,!0),document.addEventListener("pointerup",i,!0),document.addEventListener("mouseup",i,!0),document.addEventListener("click",r=>{i(r,e)},!0)}function Ml(){window.addEventListener("keyup",Wr,!1),window.addEventListener("keydown",Nl,!1),window.addEventListener("resize",En),window.addEventListener("scroll",En)}function Rl(){window.removeEventListener("keyup",Wr),window.removeEventListener("resize",En),window.removeEventListener("scroll",En)}function xl(){const t=X("popover");t&&(t.wrapper.style.display="none")}function qr(t,e){var n,i;let r=X("popover");r&&document.body.removeChild(r.wrapper),r=Bl(),document.body.appendChild(r.wrapper);const{title:o,description:l,showButtons:s,disableButtons:a,showProgress:u,nextBtnText:f=G("nextBtnText")||"Next &rarr;",prevBtnText:c=G("prevBtnText")||"&larr; Previous",progressText:d=G("progressText")||"{current} of {total}"}=e.popover||{};r.nextButton.innerHTML=f,r.previousButton.innerHTML=c,r.progress.innerHTML=d,o?(r.title.innerHTML=o,r.title.style.display="block"):r.title.style.display="none",l?(r.description.innerHTML=l,r.description.style.display="block"):r.description.style.display="none";const m=s||G("showButtons"),h=u||G("showProgress")||!1,g=(m==null?void 0:m.includes("next"))||(m==null?void 0:m.includes("previous"))||h;r.closeButton.style.display=m.includes("close")?"block":"none",g?(r.footer.style.display="flex",r.progress.style.display=h?"block":"none",r.nextButton.style.display=m.includes("next")?"block":"none",r.previousButton.style.display=m.includes("previous")?"block":"none"):r.footer.style.display="none";const v=a||G("disableButtons")||[];v!=null&&v.includes("next")&&(r.nextButton.disabled=!0,r.nextButton.classList.add("driver-popover-btn-disabled")),v!=null&&v.includes("previous")&&(r.previousButton.disabled=!0,r.previousButton.classList.add("driver-popover-btn-disabled")),v!=null&&v.includes("close")&&(r.closeButton.disabled=!0,r.closeButton.classList.add("driver-popover-btn-disabled"));const b=r.wrapper;b.style.display="block",b.style.left="",b.style.top="",b.style.bottom="",b.style.right="",b.id="driver-popover-content",b.setAttribute("role","dialog"),b.setAttribute("aria-labelledby","driver-popover-title"),b.setAttribute("aria-describedby","driver-popover-description");const _=r.arrow;_.className="driver-popover-arrow";const k=((n=e.popover)==null?void 0:n.popoverClass)||G("popoverClass")||"";b.className=`driver-popover ${k}`.trim(),zr(r.wrapper,A=>{var O,w,S;const P=A.target,N=((O=e.popover)==null?void 0:O.onNextClick)||G("onNextClick"),z=((w=e.popover)==null?void 0:w.onPrevClick)||G("onPrevClick"),K=((S=e.popover)==null?void 0:S.onCloseClick)||G("onCloseClick");if(P.classList.contains("driver-popover-next-btn"))return N?N(t,e,{config:G(),state:X()}):Yt("nextClick");if(P.classList.contains("driver-popover-prev-btn"))return z?z(t,e,{config:G(),state:X()}):Yt("prevClick");if(P.classList.contains("driver-popover-close-btn"))return K?K(t,e,{config:G(),state:X()}):Yt("closeClick")},A=>!(r!=null&&r.description.contains(A))&&!(r!=null&&r.title.contains(A))&&typeof A.className=="string"&&A.className.includes("driver-popover")),ze("popover",r);const p=((i=e.popover)==null?void 0:i.onPopoverRender)||G("onPopoverRender");p&&p(r,{config:G(),state:X()}),Xr(t,e),Rr(b);const T=t.classList.contains("driver-dummy-element"),E=Mr([b,...T?[]:[t]]);E.length>0&&E[0].focus()}function Gr(){const t=X("popover");if(!(t!=null&&t.wrapper))return;const e=t.wrapper.getBoundingClientRect(),n=G("stagePadding")||0,i=G("popoverOffset")||0;return{width:e.width+n+i,height:e.height+n+i,realWidth:e.width,realHeight:e.height}}function Vr(t,e){const{elementDimensions:n,popoverDimensions:i,popoverPadding:r,popoverArrowDimensions:o}=e;return t==="start"?Math.max(Math.min(n.top-r,window.innerHeight-i.realHeight-o.width),o.width):t==="end"?Math.max(Math.min(n.top-(i==null?void 0:i.realHeight)+n.height+r,window.innerHeight-(i==null?void 0:i.realHeight)-o.width),o.width):t==="center"?Math.max(Math.min(n.top+n.height/2-(i==null?void 0:i.realHeight)/2,window.innerHeight-(i==null?void 0:i.realHeight)-o.width),o.width):0}function Ur(t,e){const{elementDimensions:n,popoverDimensions:i,popoverPadding:r,popoverArrowDimensions:o}=e;return t==="start"?Math.max(Math.min(n.left-r,window.innerWidth-i.realWidth-o.width),o.width):t==="end"?Math.max(Math.min(n.left-(i==null?void 0:i.realWidth)+n.width+r,window.innerWidth-(i==null?void 0:i.realWidth)-o.width),o.width):t==="center"?Math.max(Math.min(n.left+n.width/2-(i==null?void 0:i.realWidth)/2,window.innerWidth-(i==null?void 0:i.realWidth)-o.width),o.width):0}function Xr(t,e){const n=X("popover");if(!n)return;const{align:i="start",side:r="left"}=(e==null?void 0:e.popover)||{},o=i,l=t.id==="driver-dummy-element"?"over":r,s=G("stagePadding")||0,a=Gr(),u=n.arrow.getBoundingClientRect(),f=t.getBoundingClientRect(),c=f.top-a.height;let d=c>=0;const m=window.innerHeight-(f.bottom+a.height);let h=m>=0;const g=f.left-a.width;let v=g>=0;const b=window.innerWidth-(f.right+a.width);let _=b>=0;const k=!d&&!h&&!v&&!_;let p=l;if(l==="top"&&d?_=v=h=!1:l==="bottom"&&h?_=v=d=!1:l==="left"&&v?_=d=h=!1:l==="right"&&_&&(v=d=h=!1),l==="over"){const T=window.innerWidth/2-a.realWidth/2,E=window.innerHeight/2-a.realHeight/2;n.wrapper.style.left=`${T}px`,n.wrapper.style.right="auto",n.wrapper.style.top=`${E}px`,n.wrapper.style.bottom="auto"}else if(k){const T=window.innerWidth/2-(a==null?void 0:a.realWidth)/2,E=10;n.wrapper.style.left=`${T}px`,n.wrapper.style.right="auto",n.wrapper.style.bottom=`${E}px`,n.wrapper.style.top="auto"}else if(v){const T=Math.min(g,window.innerWidth-(a==null?void 0:a.realWidth)-u.width),E=Vr(o,{elementDimensions:f,popoverDimensions:a,popoverPadding:s,popoverArrowDimensions:u});n.wrapper.style.left=`${T}px`,n.wrapper.style.top=`${E}px`,n.wrapper.style.bottom="auto",n.wrapper.style.right="auto",p="left"}else if(_){const T=Math.min(b,window.innerWidth-(a==null?void 0:a.realWidth)-u.width),E=Vr(o,{elementDimensions:f,popoverDimensions:a,popoverPadding:s,popoverArrowDimensions:u});n.wrapper.style.right=`${T}px`,n.wrapper.style.top=`${E}px`,n.wrapper.style.bottom="auto",n.wrapper.style.left="auto",p="right"}else if(d){const T=Math.min(c,window.innerHeight-a.realHeight-u.width);let E=Ur(o,{elementDimensions:f,popoverDimensions:a,popoverPadding:s,popoverArrowDimensions:u});n.wrapper.style.top=`${T}px`,n.wrapper.style.left=`${E}px`,n.wrapper.style.bottom="auto",n.wrapper.style.right="auto",p="top"}else if(h){const T=Math.min(m,window.innerHeight-(a==null?void 0:a.realHeight)-u.width);let E=Ur(o,{elementDimensions:f,popoverDimensions:a,popoverPadding:s,popoverArrowDimensions:u});n.wrapper.style.left=`${E}px`,n.wrapper.style.bottom=`${T}px`,n.wrapper.style.top="auto",n.wrapper.style.right="auto",p="bottom"}k?n.arrow.classList.add("driver-popover-arrow-none"):Fl(o,p,t)}function Fl(t,e,n){const i=X("popover");if(!i)return;const r=n.getBoundingClientRect(),o=Gr(),l=i.arrow,s=o.width,a=window.innerWidth,u=r.width,f=r.left,c=o.height,d=window.innerHeight,m=r.top,h=r.height;l.className="driver-popover-arrow";let g=e,v=t;e==="top"?(f+u<=0?(g="right",v="end"):f+u-s<=0&&(g="top",v="start"),f>=a?(g="left",v="end"):f+s>=a&&(g="top",v="end")):e==="bottom"?(f+u<=0?(g="right",v="start"):f+u-s<=0&&(g="bottom",v="start"),f>=a?(g="left",v="start"):f+s>=a&&(g="bottom",v="end")):e==="left"?(m+h<=0?(g="bottom",v="end"):m+h-c<=0&&(g="left",v="start"),m>=d?(g="top",v="end"):m+c>=d&&(g="left",v="end")):e==="right"&&(m+h<=0?(g="bottom",v="start"):m+h-c<=0&&(g="right",v="start"),m>=d?(g="top",v="start"):m+c>=d&&(g="right",v="end")),g?(l.classList.add(`driver-popover-arrow-side-${g}`),l.classList.add(`driver-popover-arrow-align-${v}`)):l.classList.add("driver-popover-arrow-none")}function Bl(){const t=document.createElement("div");t.classList.add("driver-popover");const e=document.createElement("div");e.classList.add("driver-popover-arrow");const n=document.createElement("header");n.id="driver-popover-title",n.classList.add("driver-popover-title"),n.style.display="none",n.innerText="Popover Title";const i=document.createElement("div");i.id="driver-popover-description",i.classList.add("driver-popover-description"),i.style.display="none",i.innerText="Popover description is here";const r=document.createElement("button");r.type="button",r.classList.add("driver-popover-close-btn"),r.setAttribute("aria-label","Close"),r.innerHTML="&times;";const o=document.createElement("footer");o.classList.add("driver-popover-footer");const l=document.createElement("span");l.classList.add("driver-popover-progress-text"),l.innerText="";const s=document.createElement("span");s.classList.add("driver-popover-navigation-btns");const a=document.createElement("button");a.type="button",a.classList.add("driver-popover-prev-btn"),a.innerHTML="&larr; Previous";const u=document.createElement("button");return u.type="button",u.classList.add("driver-popover-next-btn"),u.innerHTML="Next &rarr;",s.appendChild(a),s.appendChild(u),o.appendChild(l),o.appendChild(s),t.appendChild(r),t.appendChild(e),t.appendChild(n),t.appendChild(i),t.appendChild(o),{wrapper:t,arrow:e,title:n,description:i,footer:o,previousButton:a,nextButton:u,closeButton:r,footerButtons:s,progress:l}}function Hl(){var t;const e=X("popover");e&&((t=e.wrapper.parentElement)==null||t.removeChild(e.wrapper))}function jl(t={}){Ht(t);function e(){G("allowClose")&&u()}function n(){const f=X("activeIndex"),c=G("steps")||[];if(typeof f>"u")return;const d=f+1;c[d]?a(d):u()}function i(){const f=X("activeIndex"),c=G("steps")||[];if(typeof f>"u")return;const d=f-1;c[d]?a(d):u()}function r(f){(G("steps")||[])[f]?a(f):u()}function o(){var f;if(X("__transitionCallback"))return;const c=X("activeIndex"),d=X("__activeStep"),m=X("__activeElement");if(typeof c>"u"||typeof d>"u"||typeof X("activeIndex")>"u")return;const h=((f=d.popover)==null?void 0:f.onPrevClick)||G("onPrevClick");if(h)return h(m,d,{config:G(),state:X()});i()}function l(){var f;if(X("__transitionCallback"))return;const c=X("activeIndex"),d=X("__activeStep"),m=X("__activeElement");if(typeof c>"u"||typeof d>"u")return;const h=((f=d.popover)==null?void 0:f.onNextClick)||G("onNextClick");if(h)return h(m,d,{config:G(),state:X()});n()}function s(){X("isInitialized")||(ze("isInitialized",!0),document.body.classList.add("driver-active",G("animate")?"driver-fade":"driver-simple"),Ml(),$n("overlayClick",e),$n("escapePress",e),$n("arrowLeftPress",o),$n("arrowRightPress",l))}function a(f=0){var c,d,m,h,g,v,b,_;const k=G("steps");if(!k){console.error("No steps to drive through"),u();return}if(!k[f]){u();return}ze("__activeOnDestroyed",document.activeElement),ze("activeIndex",f);const p=k[f],T=k[f+1],E=k[f-1],A=((c=p.popover)==null?void 0:c.doneBtnText)||G("doneBtnText")||"Done",O=G("allowClose"),w=typeof((d=p.popover)==null?void 0:d.showProgress)<"u"?(m=p.popover)==null?void 0:m.showProgress:G("showProgress"),S=(((h=p.popover)==null?void 0:h.progressText)||G("progressText")||"{{current}} of {{total}}").replace("{{current}}",`${f+1}`).replace("{{total}}",`${k.length}`),P=((g=p.popover)==null?void 0:g.showButtons)||G("showButtons"),N=["next","previous",...O?["close"]:[]].filter(H=>!(P!=null&&P.length)||P.includes(H)),z=((v=p.popover)==null?void 0:v.onNextClick)||G("onNextClick"),K=((b=p.popover)==null?void 0:b.onPrevClick)||G("onPrevClick"),R=((_=p.popover)==null?void 0:_.onCloseClick)||G("onCloseClick");jr({...p,popover:{showButtons:N,nextBtnText:T?void 0:A,disableButtons:[...E?[]:["previous"]],showProgress:w,progressText:S,onNextClick:z||(()=>{T?a(f+1):u()}),onPrevClick:K||(()=>{a(f-1)}),onCloseClick:R||(()=>{u()}),...(p==null?void 0:p.popover)||{}}})}function u(f=!0){const c=X("__activeElement"),d=X("__activeStep"),m=X("__activeOnDestroyed"),h=G("onDestroyStarted");if(f&&h){const b=!c||(c==null?void 0:c.id)==="driver-dummy-element";h(b?void 0:c,d,{config:G(),state:X()});return}const g=(d==null?void 0:d.onDeselected)||G("onDeselected"),v=G("onDestroyed");if(document.body.classList.remove("driver-active","driver-fade","driver-simple"),Rl(),Hl(),Il(),Ol(),Dl(),xr(),c&&d){const b=c.id==="driver-dummy-element";g&&g(b?void 0:c,d,{config:G(),state:X()}),v&&v(b?void 0:c,d,{config:G(),state:X()})}m&&m.focus()}return{isActive:()=>X("isInitialized")||!1,refresh:En,drive:(f=0)=>{s(),a(f)},setConfig:Ht,setSteps:f=>{xr(),Ht({...G(),steps:f})},getConfig:G,getState:X,getActiveIndex:()=>X("activeIndex"),isFirstStep:()=>X("activeIndex")===0,isLastStep:()=>{const f=G("steps")||[],c=X("activeIndex");return c!==void 0&&c===f.length-1},getActiveStep:()=>X("activeStep"),getActiveElement:()=>X("activeElement"),getPreviousElement:()=>X("previousElement"),getPreviousStep:()=>X("previousStep"),moveNext:n,movePrevious:i,moveTo:r,hasNextStep:()=>{const f=G("steps")||[],c=X("activeIndex");return c!==void 0&&f[c+1]},hasPreviousStep:()=>{const f=G("steps")||[],c=X("activeIndex");return c!==void 0&&f[c-1]},highlight:f=>{s(),jr({...f,popover:f.popover?{showButtons:[],showProgress:!1,progressText:"",...f.popover}:void 0})},destroy:()=>{u(!1)}}}var it="top",dt="bottom",pt="right",rt="left",Bi="auto",Dn=[it,dt,pt,rt],nn="start",kn="end",Wl="clippingParents",Yr="viewport",Sn="popper",zl="reference",Jr=Dn.reduce(function(t,e){return t.concat([e+"-"+nn,e+"-"+kn])},[]),Kr=[].concat(Dn,[Bi]).reduce(function(t,e){return t.concat([e,e+"-"+nn,e+"-"+kn])},[]),ql="beforeRead",Gl="read",Vl="afterRead",Ul="beforeMain",Xl="main",Yl="afterMain",Jl="beforeWrite",Kl="write",Ql="afterWrite",Zl=[ql,Gl,Vl,Ul,Xl,Yl,Jl,Kl,Ql];function kt(t){return t?(t.nodeName||"").toLowerCase():null}function st(t){if(t==null)return window;if(t.toString()!=="[object Window]"){var e=t.ownerDocument;return e&&e.defaultView||window}return t}function Jt(t){var e=st(t).Element;return t instanceof e||t instanceof Element}function ht(t){var e=st(t).HTMLElement;return t instanceof e||t instanceof HTMLElement}function Hi(t){if(typeof ShadowRoot>"u")return!1;var e=st(t).ShadowRoot;return t instanceof e||t instanceof ShadowRoot}function $l(t){var e=t.state;Object.keys(e.elements).forEach(function(n){var i=e.styles[n]||{},r=e.attributes[n]||{},o=e.elements[n];!ht(o)||!kt(o)||(Object.assign(o.style,i),Object.keys(r).forEach(function(l){var s=r[l];s===!1?o.removeAttribute(l):o.setAttribute(l,s===!0?"":s)}))})}function es(t){var e=t.state,n={popper:{position:e.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(e.elements.popper.style,n.popper),e.styles=n,e.elements.arrow&&Object.assign(e.elements.arrow.style,n.arrow),function(){Object.keys(e.elements).forEach(function(i){var r=e.elements[i],o=e.attributes[i]||{},l=Object.keys(e.styles.hasOwnProperty(i)?e.styles[i]:n[i]),s=l.reduce(function(a,u){return a[u]="",a},{});!ht(r)||!kt(r)||(Object.assign(r.style,s),Object.keys(o).forEach(function(a){r.removeAttribute(a)}))})}}const Qr={name:"applyStyles",enabled:!0,phase:"write",fn:$l,effect:es,requires:["computeStyles"]};function St(t){return t.split("-")[0]}var Kt=Math.max,ei=Math.min,rn=Math.round;function ji(){var t=navigator.userAgentData;return t!=null&&t.brands&&Array.isArray(t.brands)?t.brands.map(function(e){return e.brand+"/"+e.version}).join(" "):navigator.userAgent}function Zr(){return!/^((?!chrome|android).)*safari/i.test(ji())}function on(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!1);var i=t.getBoundingClientRect(),r=1,o=1;e&&ht(t)&&(r=t.offsetWidth>0&&rn(i.width)/t.offsetWidth||1,o=t.offsetHeight>0&&rn(i.height)/t.offsetHeight||1);var l=Jt(t)?st(t):window,s=l.visualViewport,a=!Zr()&&n,u=(i.left+(a&&s?s.offsetLeft:0))/r,f=(i.top+(a&&s?s.offsetTop:0))/o,c=i.width/r,d=i.height/o;return{width:c,height:d,top:f,right:u+c,bottom:f+d,left:u,x:u,y:f}}function Wi(t){var e=on(t),n=t.offsetWidth,i=t.offsetHeight;return Math.abs(e.width-n)<=1&&(n=e.width),Math.abs(e.height-i)<=1&&(i=e.height),{x:t.offsetLeft,y:t.offsetTop,width:n,height:i}}function $r(t,e){var n=e.getRootNode&&e.getRootNode();if(t.contains(e))return!0;if(n&&Hi(n)){var i=e;do{if(i&&t.isSameNode(i))return!0;i=i.parentNode||i.host}while(i)}return!1}function It(t){return st(t).getComputedStyle(t)}function ts(t){return["table","td","th"].indexOf(kt(t))>=0}function jt(t){return((Jt(t)?t.ownerDocument:t.document)||window.document).documentElement}function ti(t){return kt(t)==="html"?t:t.assignedSlot||t.parentNode||(Hi(t)?t.host:null)||jt(t)}function eo(t){return!ht(t)||It(t).position==="fixed"?null:t.offsetParent}function ns(t){var e=/firefox/i.test(ji()),n=/Trident/i.test(ji());if(n&&ht(t)){var i=It(t);if(i.position==="fixed")return null}var r=ti(t);for(Hi(r)&&(r=r.host);ht(r)&&["html","body"].indexOf(kt(r))<0;){var o=It(r);if(o.transform!=="none"||o.perspective!=="none"||o.contain==="paint"||["transform","perspective"].indexOf(o.willChange)!==-1||e&&o.willChange==="filter"||e&&o.filter&&o.filter!=="none")return r;r=r.parentNode}return null}function Cn(t){for(var e=st(t),n=eo(t);n&&ts(n)&&It(n).position==="static";)n=eo(n);return n&&(kt(n)==="html"||kt(n)==="body"&&It(n).position==="static")?e:n||ns(t)||e}function zi(t){return["top","bottom"].indexOf(t)>=0?"x":"y"}function Tn(t,e,n){return Kt(t,ei(e,n))}function is(t,e,n){var i=Tn(t,e,n);return i>n?n:i}function to(){return{top:0,right:0,bottom:0,left:0}}function no(t){return Object.assign({},to(),t)}function io(t,e){return e.reduce(function(n,i){return n[i]=t,n},{})}var rs=function(e,n){return e=typeof e=="function"?e(Object.assign({},n.rects,{placement:n.placement})):e,no(typeof e!="number"?e:io(e,Dn))};function os(t){var e,n=t.state,i=t.name,r=t.options,o=n.elements.arrow,l=n.modifiersData.popperOffsets,s=St(n.placement),a=zi(s),u=[rt,pt].indexOf(s)>=0,f=u?"height":"width";if(!(!o||!l)){var c=rs(r.padding,n),d=Wi(o),m=a==="y"?it:rt,h=a==="y"?dt:pt,g=n.rects.reference[f]+n.rects.reference[a]-l[a]-n.rects.popper[f],v=l[a]-n.rects.reference[a],b=Cn(o),_=b?a==="y"?b.clientHeight||0:b.clientWidth||0:0,k=g/2-v/2,p=c[m],T=_-d[f]-c[h],E=_/2-d[f]/2+k,A=Tn(p,E,T),O=a;n.modifiersData[i]=(e={},e[O]=A,e.centerOffset=A-E,e)}}function as(t){var e=t.state,n=t.options,i=n.element,r=i===void 0?"[data-popper-arrow]":i;r!=null&&(typeof r=="string"&&(r=e.elements.popper.querySelector(r),!r)||$r(e.elements.popper,r)&&(e.elements.arrow=r))}const ls={name:"arrow",enabled:!0,phase:"main",fn:os,effect:as,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function an(t){return t.split("-")[1]}var ss={top:"auto",right:"auto",bottom:"auto",left:"auto"};function us(t,e){var n=t.x,i=t.y,r=e.devicePixelRatio||1;return{x:rn(n*r)/r||0,y:rn(i*r)/r||0}}function ro(t){var e,n=t.popper,i=t.popperRect,r=t.placement,o=t.variation,l=t.offsets,s=t.position,a=t.gpuAcceleration,u=t.adaptive,f=t.roundOffsets,c=t.isFixed,d=l.x,m=d===void 0?0:d,h=l.y,g=h===void 0?0:h,v=typeof f=="function"?f({x:m,y:g}):{x:m,y:g};m=v.x,g=v.y;var b=l.hasOwnProperty("x"),_=l.hasOwnProperty("y"),k=rt,p=it,T=window;if(u){var E=Cn(n),A="clientHeight",O="clientWidth";if(E===st(n)&&(E=jt(n),It(E).position!=="static"&&s==="absolute"&&(A="scrollHeight",O="scrollWidth")),E=E,r===it||(r===rt||r===pt)&&o===kn){p=dt;var w=c&&E===T&&T.visualViewport?T.visualViewport.height:E[A];g-=w-i.height,g*=a?1:-1}if(r===rt||(r===it||r===dt)&&o===kn){k=pt;var S=c&&E===T&&T.visualViewport?T.visualViewport.width:E[O];m-=S-i.width,m*=a?1:-1}}var P=Object.assign({position:s},u&&ss),N=f===!0?us({x:m,y:g},st(n)):{x:m,y:g};if(m=N.x,g=N.y,a){var z;return Object.assign({},P,(z={},z[p]=_?"0":"",z[k]=b?"0":"",z.transform=(T.devicePixelRatio||1)<=1?"translate("+m+"px, "+g+"px)":"translate3d("+m+"px, "+g+"px, 0)",z))}return Object.assign({},P,(e={},e[p]=_?g+"px":"",e[k]=b?m+"px":"",e.transform="",e))}function fs(t){var e=t.state,n=t.options,i=n.gpuAcceleration,r=i===void 0?!0:i,o=n.adaptive,l=o===void 0?!0:o,s=n.roundOffsets,a=s===void 0?!0:s,u={placement:St(e.placement),variation:an(e.placement),popper:e.elements.popper,popperRect:e.rects.popper,gpuAcceleration:r,isFixed:e.options.strategy==="fixed"};e.modifiersData.popperOffsets!=null&&(e.styles.popper=Object.assign({},e.styles.popper,ro(Object.assign({},u,{offsets:e.modifiersData.popperOffsets,position:e.options.strategy,adaptive:l,roundOffsets:a})))),e.modifiersData.arrow!=null&&(e.styles.arrow=Object.assign({},e.styles.arrow,ro(Object.assign({},u,{offsets:e.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:a})))),e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-placement":e.placement})}const cs={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:fs,data:{}};var ni={passive:!0};function ds(t){var e=t.state,n=t.instance,i=t.options,r=i.scroll,o=r===void 0?!0:r,l=i.resize,s=l===void 0?!0:l,a=st(e.elements.popper),u=[].concat(e.scrollParents.reference,e.scrollParents.popper);return o&&u.forEach(function(f){f.addEventListener("scroll",n.update,ni)}),s&&a.addEventListener("resize",n.update,ni),function(){o&&u.forEach(function(f){f.removeEventListener("scroll",n.update,ni)}),s&&a.removeEventListener("resize",n.update,ni)}}const ps={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:ds,data:{}};var hs={left:"right",right:"left",bottom:"top",top:"bottom"};function ii(t){return t.replace(/left|right|bottom|top/g,function(e){return hs[e]})}var ms={start:"end",end:"start"};function oo(t){return t.replace(/start|end/g,function(e){return ms[e]})}function qi(t){var e=st(t),n=e.pageXOffset,i=e.pageYOffset;return{scrollLeft:n,scrollTop:i}}function Gi(t){return on(jt(t)).left+qi(t).scrollLeft}function vs(t,e){var n=st(t),i=jt(t),r=n.visualViewport,o=i.clientWidth,l=i.clientHeight,s=0,a=0;if(r){o=r.width,l=r.height;var u=Zr();(u||!u&&e==="fixed")&&(s=r.offsetLeft,a=r.offsetTop)}return{width:o,height:l,x:s+Gi(t),y:a}}function gs(t){var e,n=jt(t),i=qi(t),r=(e=t.ownerDocument)==null?void 0:e.body,o=Kt(n.scrollWidth,n.clientWidth,r?r.scrollWidth:0,r?r.clientWidth:0),l=Kt(n.scrollHeight,n.clientHeight,r?r.scrollHeight:0,r?r.clientHeight:0),s=-i.scrollLeft+Gi(t),a=-i.scrollTop;return It(r||n).direction==="rtl"&&(s+=Kt(n.clientWidth,r?r.clientWidth:0)-o),{width:o,height:l,x:s,y:a}}function Vi(t){var e=It(t),n=e.overflow,i=e.overflowX,r=e.overflowY;return/auto|scroll|overlay|hidden/.test(n+r+i)}function ao(t){return["html","body","#document"].indexOf(kt(t))>=0?t.ownerDocument.body:ht(t)&&Vi(t)?t:ao(ti(t))}function On(t,e){var n;e===void 0&&(e=[]);var i=ao(t),r=i===((n=t.ownerDocument)==null?void 0:n.body),o=st(i),l=r?[o].concat(o.visualViewport||[],Vi(i)?i:[]):i,s=e.concat(l);return r?s:s.concat(On(ti(l)))}function Ui(t){return Object.assign({},t,{left:t.x,top:t.y,right:t.x+t.width,bottom:t.y+t.height})}function bs(t,e){var n=on(t,!1,e==="fixed");return n.top=n.top+t.clientTop,n.left=n.left+t.clientLeft,n.bottom=n.top+t.clientHeight,n.right=n.left+t.clientWidth,n.width=t.clientWidth,n.height=t.clientHeight,n.x=n.left,n.y=n.top,n}function lo(t,e,n){return e===Yr?Ui(vs(t,n)):Jt(e)?bs(e,n):Ui(gs(jt(t)))}function ys(t){var e=On(ti(t)),n=["absolute","fixed"].indexOf(It(t).position)>=0,i=n&&ht(t)?Cn(t):t;return Jt(i)?e.filter(function(r){return Jt(r)&&$r(r,i)&&kt(r)!=="body"}):[]}function ws(t,e,n,i){var r=e==="clippingParents"?ys(t):[].concat(e),o=[].concat(r,[n]),l=o[0],s=o.reduce(function(a,u){var f=lo(t,u,i);return a.top=Kt(f.top,a.top),a.right=ei(f.right,a.right),a.bottom=ei(f.bottom,a.bottom),a.left=Kt(f.left,a.left),a},lo(t,l,i));return s.width=s.right-s.left,s.height=s.bottom-s.top,s.x=s.left,s.y=s.top,s}function so(t){var e=t.reference,n=t.element,i=t.placement,r=i?St(i):null,o=i?an(i):null,l=e.x+e.width/2-n.width/2,s=e.y+e.height/2-n.height/2,a;switch(r){case it:a={x:l,y:e.y-n.height};break;case dt:a={x:l,y:e.y+e.height};break;case pt:a={x:e.x+e.width,y:s};break;case rt:a={x:e.x-n.width,y:s};break;default:a={x:e.x,y:e.y}}var u=r?zi(r):null;if(u!=null){var f=u==="y"?"height":"width";switch(o){case nn:a[u]=a[u]-(e[f]/2-n[f]/2);break;case kn:a[u]=a[u]+(e[f]/2-n[f]/2);break}}return a}function An(t,e){e===void 0&&(e={});var n=e,i=n.placement,r=i===void 0?t.placement:i,o=n.strategy,l=o===void 0?t.strategy:o,s=n.boundary,a=s===void 0?Wl:s,u=n.rootBoundary,f=u===void 0?Yr:u,c=n.elementContext,d=c===void 0?Sn:c,m=n.altBoundary,h=m===void 0?!1:m,g=n.padding,v=g===void 0?0:g,b=no(typeof v!="number"?v:io(v,Dn)),_=d===Sn?zl:Sn,k=t.rects.popper,p=t.elements[h?_:d],T=ws(Jt(p)?p:p.contextElement||jt(t.elements.popper),a,f,l),E=on(t.elements.reference),A=so({reference:E,element:k,strategy:"absolute",placement:r}),O=Ui(Object.assign({},k,A)),w=d===Sn?O:E,S={top:T.top-w.top+b.top,bottom:w.bottom-T.bottom+b.bottom,left:T.left-w.left+b.left,right:w.right-T.right+b.right},P=t.modifiersData.offset;if(d===Sn&&P){var N=P[r];Object.keys(S).forEach(function(z){var K=[pt,dt].indexOf(z)>=0?1:-1,R=[it,dt].indexOf(z)>=0?"y":"x";S[z]+=N[R]*K})}return S}function _s(t,e){e===void 0&&(e={});var n=e,i=n.placement,r=n.boundary,o=n.rootBoundary,l=n.padding,s=n.flipVariations,a=n.allowedAutoPlacements,u=a===void 0?Kr:a,f=an(i),c=f?s?Jr:Jr.filter(function(h){return an(h)===f}):Dn,d=c.filter(function(h){return u.indexOf(h)>=0});d.length===0&&(d=c);var m=d.reduce(function(h,g){return h[g]=An(t,{placement:g,boundary:r,rootBoundary:o,padding:l})[St(g)],h},{});return Object.keys(m).sort(function(h,g){return m[h]-m[g]})}function Es(t){if(St(t)===Bi)return[];var e=ii(t);return[oo(t),e,oo(e)]}function Ds(t){var e=t.state,n=t.options,i=t.name;if(!e.modifiersData[i]._skip){for(var r=n.mainAxis,o=r===void 0?!0:r,l=n.altAxis,s=l===void 0?!0:l,a=n.fallbackPlacements,u=n.padding,f=n.boundary,c=n.rootBoundary,d=n.altBoundary,m=n.flipVariations,h=m===void 0?!0:m,g=n.allowedAutoPlacements,v=e.options.placement,b=St(v),_=b===v,k=a||(_||!h?[ii(v)]:Es(v)),p=[v].concat(k).reduce(function(De,Oe){return De.concat(St(Oe)===Bi?_s(e,{placement:Oe,boundary:f,rootBoundary:c,padding:u,flipVariations:h,allowedAutoPlacements:g}):Oe)},[]),T=e.rects.reference,E=e.rects.popper,A=new Map,O=!0,w=p[0],S=0;S<p.length;S++){var P=p[S],N=St(P),z=an(P)===nn,K=[it,dt].indexOf(N)>=0,R=K?"width":"height",H=An(e,{placement:P,boundary:f,rootBoundary:c,altBoundary:d,padding:u}),ae=K?z?pt:rt:z?dt:it;T[R]>E[R]&&(ae=ii(ae));var se=ii(ae),He=[];if(o&&He.push(H[N]<=0),s&&He.push(H[ae]<=0,H[se]<=0),He.every(function(De){return De})){w=P,O=!1;break}A.set(P,He)}if(O)for(var je=h?3:1,Pe=function(Oe){var ct=p.find(function(Lt){var tt=A.get(Lt);if(tt)return tt.slice(0,Oe).every(function(x){return x})});if(ct)return w=ct,"break"},xe=je;xe>0;xe--){var et=Pe(xe);if(et==="break")break}e.placement!==w&&(e.modifiersData[i]._skip=!0,e.placement=w,e.reset=!0)}}const ks={name:"flip",enabled:!0,phase:"main",fn:Ds,requiresIfExists:["offset"],data:{_skip:!1}};function uo(t,e,n){return n===void 0&&(n={x:0,y:0}),{top:t.top-e.height-n.y,right:t.right-e.width+n.x,bottom:t.bottom-e.height+n.y,left:t.left-e.width-n.x}}function fo(t){return[it,pt,dt,rt].some(function(e){return t[e]>=0})}function Ss(t){var e=t.state,n=t.name,i=e.rects.reference,r=e.rects.popper,o=e.modifiersData.preventOverflow,l=An(e,{elementContext:"reference"}),s=An(e,{altBoundary:!0}),a=uo(l,i),u=uo(s,r,o),f=fo(a),c=fo(u);e.modifiersData[n]={referenceClippingOffsets:a,popperEscapeOffsets:u,isReferenceHidden:f,hasPopperEscaped:c},e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-reference-hidden":f,"data-popper-escaped":c})}const Cs={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:Ss};function Ts(t,e,n){var i=St(t),r=[rt,it].indexOf(i)>=0?-1:1,o=typeof n=="function"?n(Object.assign({},e,{placement:t})):n,l=o[0],s=o[1];return l=l||0,s=(s||0)*r,[rt,pt].indexOf(i)>=0?{x:s,y:l}:{x:l,y:s}}function Os(t){var e=t.state,n=t.options,i=t.name,r=n.offset,o=r===void 0?[0,0]:r,l=Kr.reduce(function(f,c){return f[c]=Ts(c,e.rects,o),f},{}),s=l[e.placement],a=s.x,u=s.y;e.modifiersData.popperOffsets!=null&&(e.modifiersData.popperOffsets.x+=a,e.modifiersData.popperOffsets.y+=u),e.modifiersData[i]=l}const As={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:Os};function Ls(t){var e=t.state,n=t.name;e.modifiersData[n]=so({reference:e.rects.reference,element:e.rects.popper,strategy:"absolute",placement:e.placement})}const Ps={name:"popperOffsets",enabled:!0,phase:"read",fn:Ls,data:{}};function Is(t){return t==="x"?"y":"x"}function Ns(t){var e=t.state,n=t.options,i=t.name,r=n.mainAxis,o=r===void 0?!0:r,l=n.altAxis,s=l===void 0?!1:l,a=n.boundary,u=n.rootBoundary,f=n.altBoundary,c=n.padding,d=n.tether,m=d===void 0?!0:d,h=n.tetherOffset,g=h===void 0?0:h,v=An(e,{boundary:a,rootBoundary:u,padding:c,altBoundary:f}),b=St(e.placement),_=an(e.placement),k=!_,p=zi(b),T=Is(p),E=e.modifiersData.popperOffsets,A=e.rects.reference,O=e.rects.popper,w=typeof g=="function"?g(Object.assign({},e.rects,{placement:e.placement})):g,S=typeof w=="number"?{mainAxis:w,altAxis:w}:Object.assign({mainAxis:0,altAxis:0},w),P=e.modifiersData.offset?e.modifiersData.offset[e.placement]:null,N={x:0,y:0};if(E){if(o){var z,K=p==="y"?it:rt,R=p==="y"?dt:pt,H=p==="y"?"height":"width",ae=E[p],se=ae+v[K],He=ae-v[R],je=m?-O[H]/2:0,Pe=_===nn?A[H]:O[H],xe=_===nn?-O[H]:-A[H],et=e.elements.arrow,De=m&&et?Wi(et):{width:0,height:0},Oe=e.modifiersData["arrow#persistent"]?e.modifiersData["arrow#persistent"].padding:to(),ct=Oe[K],Lt=Oe[R],tt=Tn(0,A[H],De[H]),x=k?A[H]/2-je-tt-ct-S.mainAxis:Pe-tt-ct-S.mainAxis,M=k?-A[H]/2+je+tt+Lt+S.mainAxis:xe+tt+Lt+S.mainAxis,j=e.elements.arrow&&Cn(e.elements.arrow),Y=j?p==="y"?j.clientTop||0:j.clientLeft||0:0,Z=(z=P==null?void 0:P[p])!=null?z:0,ve=ae+x-Z-Y,Se=ae+M-Z,Qe=Tn(m?ei(se,ve):se,ae,m?Kt(He,Se):He);E[p]=Qe,N[p]=Qe-ae}if(s){var J,oe=p==="x"?it:rt,pe=p==="x"?dt:pt,Ie=E[T],Ye=T==="y"?"height":"width",Pt=Ie+v[oe],I=Ie-v[pe],te=[it,rt].indexOf(b)!==-1,$=(J=P==null?void 0:P[T])!=null?J:0,ue=te?Pt:Ie-A[Ye]-O[Ye]-$+S.altAxis,re=te?Ie+A[Ye]+O[Ye]-$-S.altAxis:I,fe=m&&te?is(ue,Ie,re):Tn(m?ue:Pt,Ie,m?re:I);E[T]=fe,N[T]=fe-Ie}e.modifiersData[i]=N}}const Ms={name:"preventOverflow",enabled:!0,phase:"main",fn:Ns,requiresIfExists:["offset"]};function Rs(t){return{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}}function xs(t){return t===st(t)||!ht(t)?qi(t):Rs(t)}function Fs(t){var e=t.getBoundingClientRect(),n=rn(e.width)/t.offsetWidth||1,i=rn(e.height)/t.offsetHeight||1;return n!==1||i!==1}function Bs(t,e,n){n===void 0&&(n=!1);var i=ht(e),r=ht(e)&&Fs(e),o=jt(e),l=on(t,r,n),s={scrollLeft:0,scrollTop:0},a={x:0,y:0};return(i||!i&&!n)&&((kt(e)!=="body"||Vi(o))&&(s=xs(e)),ht(e)?(a=on(e,!0),a.x+=e.clientLeft,a.y+=e.clientTop):o&&(a.x=Gi(o))),{x:l.left+s.scrollLeft-a.x,y:l.top+s.scrollTop-a.y,width:l.width,height:l.height}}function Hs(t){var e=new Map,n=new Set,i=[];t.forEach(function(o){e.set(o.name,o)});function r(o){n.add(o.name);var l=[].concat(o.requires||[],o.requiresIfExists||[]);l.forEach(function(s){if(!n.has(s)){var a=e.get(s);a&&r(a)}}),i.push(o)}return t.forEach(function(o){n.has(o.name)||r(o)}),i}function js(t){var e=Hs(t);return Zl.reduce(function(n,i){return n.concat(e.filter(function(r){return r.phase===i}))},[])}function Ws(t){var e;return function(){return e||(e=new Promise(function(n){Promise.resolve().then(function(){e=void 0,n(t())})})),e}}function zs(t){var e=t.reduce(function(n,i){var r=n[i.name];return n[i.name]=r?Object.assign({},r,i,{options:Object.assign({},r.options,i.options),data:Object.assign({},r.data,i.data)}):i,n},{});return Object.keys(e).map(function(n){return e[n]})}var co={placement:"bottom",modifiers:[],strategy:"absolute"};function po(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return!e.some(function(i){return!(i&&typeof i.getBoundingClientRect=="function")})}function qs(t){t===void 0&&(t={});var e=t,n=e.defaultModifiers,i=n===void 0?[]:n,r=e.defaultOptions,o=r===void 0?co:r;return function(s,a,u){u===void 0&&(u=o);var f={placement:"bottom",orderedModifiers:[],options:Object.assign({},co,o),modifiersData:{},elements:{reference:s,popper:a},attributes:{},styles:{}},c=[],d=!1,m={state:f,setOptions:function(b){var _=typeof b=="function"?b(f.options):b;g(),f.options=Object.assign({},o,f.options,_),f.scrollParents={reference:Jt(s)?On(s):s.contextElement?On(s.contextElement):[],popper:On(a)};var k=js(zs([].concat(i,f.options.modifiers)));return f.orderedModifiers=k.filter(function(p){return p.enabled}),h(),m.update()},forceUpdate:function(){if(!d){var b=f.elements,_=b.reference,k=b.popper;if(po(_,k)){f.rects={reference:Bs(_,Cn(k),f.options.strategy==="fixed"),popper:Wi(k)},f.reset=!1,f.placement=f.options.placement,f.orderedModifiers.forEach(function(S){return f.modifiersData[S.name]=Object.assign({},S.data)});for(var p=0;p<f.orderedModifiers.length;p++){if(f.reset===!0){f.reset=!1,p=-1;continue}var T=f.orderedModifiers[p],E=T.fn,A=T.options,O=A===void 0?{}:A,w=T.name;typeof E=="function"&&(f=E({state:f,options:O,name:w,instance:m})||f)}}}},update:Ws(function(){return new Promise(function(v){m.forceUpdate(),v(f)})}),destroy:function(){g(),d=!0}};if(!po(s,a))return m;m.setOptions(u).then(function(v){!d&&u.onFirstUpdate&&u.onFirstUpdate(v)});function h(){f.orderedModifiers.forEach(function(v){var b=v.name,_=v.options,k=_===void 0?{}:_,p=v.effect;if(typeof p=="function"){var T=p({state:f,name:b,instance:m,options:k}),E=function(){};c.push(T||E)}})}function g(){c.forEach(function(v){return v()}),c=[]}return m}}var Gs=[ps,Ps,cs,Qr,As,ks,Ms,ls,Cs],Vs=qs({defaultModifiers:Gs}),Us="tippy-box",ho="tippy-content",Xs="tippy-backdrop",mo="tippy-arrow",vo="tippy-svg-arrow",Qt={passive:!0,capture:!0},go=function(){return document.body};function Xi(t,e,n){if(Array.isArray(t)){var i=t[e];return i??(Array.isArray(n)?n[e]:n)}return t}function Yi(t,e){var n={}.toString.call(t);return n.indexOf("[object")===0&&n.indexOf(e+"]")>-1}function bo(t,e){return typeof t=="function"?t.apply(void 0,e):t}function yo(t,e){if(e===0)return t;var n;return function(i){clearTimeout(n),n=setTimeout(function(){t(i)},e)}}function Ys(t){return t.split(/\s+/).filter(Boolean)}function ln(t){return[].concat(t)}function wo(t,e){t.indexOf(e)===-1&&t.push(e)}function Js(t){return t.filter(function(e,n){return t.indexOf(e)===n})}function Ks(t){return t.split("-")[0]}function ri(t){return[].slice.call(t)}function _o(t){return Object.keys(t).reduce(function(e,n){return t[n]!==void 0&&(e[n]=t[n]),e},{})}function Ln(){return document.createElement("div")}function oi(t){return["Element","Fragment"].some(function(e){return Yi(t,e)})}function Qs(t){return Yi(t,"NodeList")}function Zs(t){return Yi(t,"MouseEvent")}function $s(t){return!!(t&&t._tippy&&t._tippy.reference===t)}function eu(t){return oi(t)?[t]:Qs(t)?ri(t):Array.isArray(t)?t:ri(document.querySelectorAll(t))}function Ji(t,e){t.forEach(function(n){n&&(n.style.transitionDuration=e+"ms")})}function Eo(t,e){t.forEach(function(n){n&&n.setAttribute("data-state",e)})}function tu(t){var e,n=ln(t),i=n[0];return i!=null&&(e=i.ownerDocument)!=null&&e.body?i.ownerDocument:document}function nu(t,e){var n=e.clientX,i=e.clientY;return t.every(function(r){var o=r.popperRect,l=r.popperState,s=r.props,a=s.interactiveBorder,u=Ks(l.placement),f=l.modifiersData.offset;if(!f)return!0;var c=u==="bottom"?f.top.y:0,d=u==="top"?f.bottom.y:0,m=u==="right"?f.left.x:0,h=u==="left"?f.right.x:0,g=o.top-i+c>a,v=i-o.bottom-d>a,b=o.left-n+m>a,_=n-o.right-h>a;return g||v||b||_})}function Ki(t,e,n){var i=e+"EventListener";["transitionend","webkitTransitionEnd"].forEach(function(r){t[i](r,n)})}function Do(t,e){for(var n=e;n;){var i;if(t.contains(n))return!0;n=n.getRootNode==null||(i=n.getRootNode())==null?void 0:i.host}return!1}var Ct={isTouch:!1},ko=0;function iu(){Ct.isTouch||(Ct.isTouch=!0,window.performance&&document.addEventListener("mousemove",So))}function So(){var t=performance.now();t-ko<20&&(Ct.isTouch=!1,document.removeEventListener("mousemove",So)),ko=t}function ru(){var t=document.activeElement;if($s(t)){var e=t._tippy;t.blur&&!e.state.isVisible&&t.blur()}}function ou(){document.addEventListener("touchstart",iu,Qt),window.addEventListener("blur",ru)}var au=typeof window<"u"&&typeof document<"u",lu=au?!!window.msCrypto:!1,su={animateFill:!1,followCursor:!1,inlinePositioning:!1,sticky:!1},uu={allowHTML:!1,animation:"fade",arrow:!0,content:"",inertia:!1,maxWidth:350,role:"tooltip",theme:"",zIndex:9999},wt=Object.assign({appendTo:go,aria:{content:"auto",expanded:"auto"},delay:0,duration:[300,250],getReferenceClientRect:null,hideOnClick:!0,ignoreAttributes:!1,interactive:!1,interactiveBorder:2,interactiveDebounce:0,moveTransition:"",offset:[0,10],onAfterUpdate:function(){},onBeforeUpdate:function(){},onCreate:function(){},onDestroy:function(){},onHidden:function(){},onHide:function(){},onMount:function(){},onShow:function(){},onShown:function(){},onTrigger:function(){},onUntrigger:function(){},onClickOutside:function(){},placement:"top",plugins:[],popperOptions:{},render:null,showOnCreate:!1,touch:!0,trigger:"mouseenter focus",triggerTarget:null},su,uu),fu=Object.keys(wt),cu=function(e){var n=Object.keys(e);n.forEach(function(i){wt[i]=e[i]})};function Co(t){var e=t.plugins||[],n=e.reduce(function(i,r){var o=r.name,l=r.defaultValue;if(o){var s;i[o]=t[o]!==void 0?t[o]:(s=wt[o])!=null?s:l}return i},{});return Object.assign({},t,n)}function du(t,e){var n=e?Object.keys(Co(Object.assign({},wt,{plugins:e}))):fu,i=n.reduce(function(r,o){var l=(t.getAttribute("data-tippy-"+o)||"").trim();if(!l)return r;if(o==="content")r[o]=l;else try{r[o]=JSON.parse(l)}catch{r[o]=l}return r},{});return i}function To(t,e){var n=Object.assign({},e,{content:bo(e.content,[t])},e.ignoreAttributes?{}:du(t,e.plugins));return n.aria=Object.assign({},wt.aria,n.aria),n.aria={expanded:n.aria.expanded==="auto"?e.interactive:n.aria.expanded,content:n.aria.content==="auto"?e.interactive?null:"describedby":n.aria.content},n}var pu=function(){return"innerHTML"};function Qi(t,e){t[pu()]=e}function Oo(t){var e=Ln();return t===!0?e.className=mo:(e.className=vo,oi(t)?e.appendChild(t):Qi(e,t)),e}function Ao(t,e){oi(e.content)?(Qi(t,""),t.appendChild(e.content)):typeof e.content!="function"&&(e.allowHTML?Qi(t,e.content):t.textContent=e.content)}function Zi(t){var e=t.firstElementChild,n=ri(e.children);return{box:e,content:n.find(function(i){return i.classList.contains(ho)}),arrow:n.find(function(i){return i.classList.contains(mo)||i.classList.contains(vo)}),backdrop:n.find(function(i){return i.classList.contains(Xs)})}}function Lo(t){var e=Ln(),n=Ln();n.className=Us,n.setAttribute("data-state","hidden"),n.setAttribute("tabindex","-1");var i=Ln();i.className=ho,i.setAttribute("data-state","hidden"),Ao(i,t.props),e.appendChild(n),n.appendChild(i),r(t.props,t.props);function r(o,l){var s=Zi(e),a=s.box,u=s.content,f=s.arrow;l.theme?a.setAttribute("data-theme",l.theme):a.removeAttribute("data-theme"),typeof l.animation=="string"?a.setAttribute("data-animation",l.animation):a.removeAttribute("data-animation"),l.inertia?a.setAttribute("data-inertia",""):a.removeAttribute("data-inertia"),a.style.maxWidth=typeof l.maxWidth=="number"?l.maxWidth+"px":l.maxWidth,l.role?a.setAttribute("role",l.role):a.removeAttribute("role"),(o.content!==l.content||o.allowHTML!==l.allowHTML)&&Ao(u,t.props),l.arrow?f?o.arrow!==l.arrow&&(a.removeChild(f),a.appendChild(Oo(l.arrow))):a.appendChild(Oo(l.arrow)):f&&a.removeChild(f)}return{popper:e,onUpdate:r}}Lo.$$tippy=!0;var hu=1,ai=[],$i=[];function mu(t,e){var n=To(t,Object.assign({},wt,Co(_o(e)))),i,r,o,l=!1,s=!1,a=!1,u=!1,f,c,d,m=[],h=yo(ve,n.interactiveDebounce),g,v=hu++,b=null,_=Js(n.plugins),k={isEnabled:!0,isVisible:!1,isDestroyed:!1,isMounted:!1,isShown:!1},p={id:v,reference:t,popper:Ln(),popperInstance:b,props:n,state:k,plugins:_,clearDelayTimeouts:ue,setProps:re,setContent:fe,show:ge,hide:Ae,hideWithInteractivity:Xt,enable:te,disable:$,unmount:Mi,destroy:Ri};if(!n.render)return p;var T=n.render(p),E=T.popper,A=T.onUpdate;E.setAttribute("data-tippy-root",""),E.id="tippy-"+p.id,p.popper=E,t._tippy=p,E._tippy=p;var O=_.map(function(L){return L.fn(p)}),w=t.hasAttribute("aria-expanded");return j(),je(),ae(),se("onCreate",[p]),n.showOnCreate&&Pt(),E.addEventListener("mouseenter",function(){p.props.interactive&&p.state.isVisible&&p.clearDelayTimeouts()}),E.addEventListener("mouseleave",function(){p.props.interactive&&p.props.trigger.indexOf("mouseenter")>=0&&K().addEventListener("mousemove",h)}),p;function S(){var L=p.props.touch;return Array.isArray(L)?L:[L,0]}function P(){return S()[0]==="hold"}function N(){var L;return!!((L=p.props.render)!=null&&L.$$tippy)}function z(){return g||t}function K(){var L=z().parentNode;return L?tu(L):document}function R(){return Zi(E)}function H(L){return p.state.isMounted&&!p.state.isVisible||Ct.isTouch||f&&f.type==="focus"?0:Xi(p.props.delay,L?0:1,wt.delay)}function ae(L){L===void 0&&(L=!1),E.style.pointerEvents=p.props.interactive&&!L?"":"none",E.style.zIndex=""+p.props.zIndex}function se(L,q,ne){if(ne===void 0&&(ne=!0),O.forEach(function(he){he[L]&&he[L].apply(he,q)}),ne){var ye;(ye=p.props)[L].apply(ye,q)}}function He(){var L=p.props.aria;if(L.content){var q="aria-"+L.content,ne=E.id,ye=ln(p.props.triggerTarget||t);ye.forEach(function(he){var nt=he.getAttribute(q);if(p.state.isVisible)he.setAttribute(q,nt?nt+" "+ne:ne);else{var yt=nt&&nt.replace(ne,"").trim();yt?he.setAttribute(q,yt):he.removeAttribute(q)}})}}function je(){if(!(w||!p.props.aria.expanded)){var L=ln(p.props.triggerTarget||t);L.forEach(function(q){p.props.interactive?q.setAttribute("aria-expanded",p.state.isVisible&&q===z()?"true":"false"):q.removeAttribute("aria-expanded")})}}function Pe(){K().removeEventListener("mousemove",h),ai=ai.filter(function(L){return L!==h})}function xe(L){if(!(Ct.isTouch&&(a||L.type==="mousedown"))){var q=L.composedPath&&L.composedPath()[0]||L.target;if(!(p.props.interactive&&Do(E,q))){if(ln(p.props.triggerTarget||t).some(function(ne){return Do(ne,q)})){if(Ct.isTouch||p.state.isVisible&&p.props.trigger.indexOf("click")>=0)return}else se("onClickOutside",[p,L]);p.props.hideOnClick===!0&&(p.clearDelayTimeouts(),p.hide(),s=!0,setTimeout(function(){s=!1}),p.state.isMounted||ct())}}}function et(){a=!0}function De(){a=!1}function Oe(){var L=K();L.addEventListener("mousedown",xe,!0),L.addEventListener("touchend",xe,Qt),L.addEventListener("touchstart",De,Qt),L.addEventListener("touchmove",et,Qt)}function ct(){var L=K();L.removeEventListener("mousedown",xe,!0),L.removeEventListener("touchend",xe,Qt),L.removeEventListener("touchstart",De,Qt),L.removeEventListener("touchmove",et,Qt)}function Lt(L,q){x(L,function(){!p.state.isVisible&&E.parentNode&&E.parentNode.contains(E)&&q()})}function tt(L,q){x(L,q)}function x(L,q){var ne=R().box;function ye(he){he.target===ne&&(Ki(ne,"remove",ye),q())}if(L===0)return q();Ki(ne,"remove",c),Ki(ne,"add",ye),c=ye}function M(L,q,ne){ne===void 0&&(ne=!1);var ye=ln(p.props.triggerTarget||t);ye.forEach(function(he){he.addEventListener(L,q,ne),m.push({node:he,eventType:L,handler:q,options:ne})})}function j(){P()&&(M("touchstart",Z,{passive:!0}),M("touchend",Se,{passive:!0})),Ys(p.props.trigger).forEach(function(L){if(L!=="manual")switch(M(L,Z),L){case"mouseenter":M("mouseleave",Se);break;case"focus":M(lu?"focusout":"blur",Qe);break;case"focusin":M("focusout",Qe);break}})}function Y(){m.forEach(function(L){var q=L.node,ne=L.eventType,ye=L.handler,he=L.options;q.removeEventListener(ne,ye,he)}),m=[]}function Z(L){var q,ne=!1;if(!(!p.state.isEnabled||J(L)||s)){var ye=((q=f)==null?void 0:q.type)==="focus";f=L,g=L.currentTarget,je(),!p.state.isVisible&&Zs(L)&&ai.forEach(function(he){return he(L)}),L.type==="click"&&(p.props.trigger.indexOf("mouseenter")<0||l)&&p.props.hideOnClick!==!1&&p.state.isVisible?ne=!0:Pt(L),L.type==="click"&&(l=!ne),ne&&!ye&&I(L)}}function ve(L){var q=L.target,ne=z().contains(q)||E.contains(q);if(!(L.type==="mousemove"&&ne)){var ye=Ye().concat(E).map(function(he){var nt,yt=he._tippy,wn=(nt=yt.popperInstance)==null?void 0:nt.state;return wn?{popperRect:he.getBoundingClientRect(),popperState:wn,props:n}:null}).filter(Boolean);nu(ye,L)&&(Pe(),I(L))}}function Se(L){var q=J(L)||p.props.trigger.indexOf("click")>=0&&l;if(!q){if(p.props.interactive){p.hideWithInteractivity(L);return}I(L)}}function Qe(L){p.props.trigger.indexOf("focusin")<0&&L.target!==z()||p.props.interactive&&L.relatedTarget&&E.contains(L.relatedTarget)||I(L)}function J(L){return Ct.isTouch?P()!==L.type.indexOf("touch")>=0:!1}function oe(){pe();var L=p.props,q=L.popperOptions,ne=L.placement,ye=L.offset,he=L.getReferenceClientRect,nt=L.moveTransition,yt=N()?Zi(E).arrow:null,wn=he?{getBoundingClientRect:he,contextElement:he.contextElement||z()}:t,yl={name:"$$tippy",enabled:!0,phase:"beforeWrite",requires:["computeStyles"],fn:function(xi){var _n=xi.state;if(N()){var Ec=R(),Ir=Ec.box;["placement","reference-hidden","escaped"].forEach(function(Fi){Fi==="placement"?Ir.setAttribute("data-placement",_n.placement):_n.attributes.popper["data-popper-"+Fi]?Ir.setAttribute("data-"+Fi,""):Ir.removeAttribute("data-"+Fi)}),_n.attributes.popper={}}}},tn=[{name:"offset",options:{offset:ye}},{name:"preventOverflow",options:{padding:{top:2,bottom:2,left:5,right:5}}},{name:"flip",options:{padding:5}},{name:"computeStyles",options:{adaptive:!nt}},yl];N()&&yt&&tn.push({name:"arrow",options:{element:yt,padding:3}}),tn.push.apply(tn,(q==null?void 0:q.modifiers)||[]),p.popperInstance=Vs(wn,E,Object.assign({},q,{placement:ne,onFirstUpdate:d,modifiers:tn}))}function pe(){p.popperInstance&&(p.popperInstance.destroy(),p.popperInstance=null)}function Ie(){var L=p.props.appendTo,q,ne=z();p.props.interactive&&L===go||L==="parent"?q=ne.parentNode:q=bo(L,[ne]),q.contains(E)||q.appendChild(E),p.state.isMounted=!0,oe()}function Ye(){return ri(E.querySelectorAll("[data-tippy-root]"))}function Pt(L){p.clearDelayTimeouts(),L&&se("onTrigger",[p,L]),Oe();var q=H(!0),ne=S(),ye=ne[0],he=ne[1];Ct.isTouch&&ye==="hold"&&he&&(q=he),q?i=setTimeout(function(){p.show()},q):p.show()}function I(L){if(p.clearDelayTimeouts(),se("onUntrigger",[p,L]),!p.state.isVisible){ct();return}if(!(p.props.trigger.indexOf("mouseenter")>=0&&p.props.trigger.indexOf("click")>=0&&["mouseleave","mousemove"].indexOf(L.type)>=0&&l)){var q=H(!1);q?r=setTimeout(function(){p.state.isVisible&&p.hide()},q):o=requestAnimationFrame(function(){p.hide()})}}function te(){p.state.isEnabled=!0}function $(){p.hide(),p.state.isEnabled=!1}function ue(){clearTimeout(i),clearTimeout(r),cancelAnimationFrame(o)}function re(L){if(!p.state.isDestroyed){se("onBeforeUpdate",[p,L]),Y();var q=p.props,ne=To(t,Object.assign({},q,_o(L),{ignoreAttributes:!0}));p.props=ne,j(),q.interactiveDebounce!==ne.interactiveDebounce&&(Pe(),h=yo(ve,ne.interactiveDebounce)),q.triggerTarget&&!ne.triggerTarget?ln(q.triggerTarget).forEach(function(ye){ye.removeAttribute("aria-expanded")}):ne.triggerTarget&&t.removeAttribute("aria-expanded"),je(),ae(),A&&A(q,ne),p.popperInstance&&(oe(),Ye().forEach(function(ye){requestAnimationFrame(ye._tippy.popperInstance.forceUpdate)})),se("onAfterUpdate",[p,L])}}function fe(L){p.setProps({content:L})}function ge(){var L=p.state.isVisible,q=p.state.isDestroyed,ne=!p.state.isEnabled,ye=Ct.isTouch&&!p.props.touch,he=Xi(p.props.duration,0,wt.duration);if(!(L||q||ne||ye)&&!z().hasAttribute("disabled")&&(se("onShow",[p],!1),p.props.onShow(p)!==!1)){if(p.state.isVisible=!0,N()&&(E.style.visibility="visible"),ae(),Oe(),p.state.isMounted||(E.style.transition="none"),N()){var nt=R(),yt=nt.box,wn=nt.content;Ji([yt,wn],0)}d=function(){var tn;if(!(!p.state.isVisible||u)){if(u=!0,E.offsetHeight,E.style.transition=p.props.moveTransition,N()&&p.props.animation){var Pr=R(),xi=Pr.box,_n=Pr.content;Ji([xi,_n],he),Eo([xi,_n],"visible")}He(),je(),wo($i,p),(tn=p.popperInstance)==null||tn.forceUpdate(),se("onMount",[p]),p.props.animation&&N()&&tt(he,function(){p.state.isShown=!0,se("onShown",[p])})}},Ie()}}function Ae(){var L=!p.state.isVisible,q=p.state.isDestroyed,ne=!p.state.isEnabled,ye=Xi(p.props.duration,1,wt.duration);if(!(L||q||ne)&&(se("onHide",[p],!1),p.props.onHide(p)!==!1)){if(p.state.isVisible=!1,p.state.isShown=!1,u=!1,l=!1,N()&&(E.style.visibility="hidden"),Pe(),ct(),ae(!0),N()){var he=R(),nt=he.box,yt=he.content;p.props.animation&&(Ji([nt,yt],ye),Eo([nt,yt],"hidden"))}He(),je(),p.props.animation?N()&&Lt(ye,p.unmount):p.unmount()}}function Xt(L){K().addEventListener("mousemove",h),wo(ai,h),h(L)}function Mi(){p.state.isVisible&&p.hide(),p.state.isMounted&&(pe(),Ye().forEach(function(L){L._tippy.unmount()}),E.parentNode&&E.parentNode.removeChild(E),$i=$i.filter(function(L){return L!==p}),p.state.isMounted=!1,se("onHidden",[p]))}function Ri(){p.state.isDestroyed||(p.clearDelayTimeouts(),p.unmount(),Y(),delete t._tippy,p.state.isDestroyed=!0,se("onDestroy",[p]))}}function Pn(t,e){e===void 0&&(e={});var n=wt.plugins.concat(e.plugins||[]);ou();var i=Object.assign({},e,{plugins:n}),r=eu(t),o=r.reduce(function(l,s){var a=s&&mu(s,i);return a&&l.push(a),l},[]);return oi(t)?o[0]:o}Pn.defaultProps=wt,Pn.setDefaultProps=cu,Pn.currentInput=Ct,Object.assign({},Qr,{effect:function(e){var n=e.state,i={popper:{position:n.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};Object.assign(n.elements.popper.style,i.popper),n.styles=i,n.elements.arrow&&Object.assign(n.elements.arrow.style,i.arrow)}}),Pn.setDefaultProps({render:Lo});function Fe(){}const Po=t=>t;function In(t,e){for(const n in e)t[n]=e[n];return t}function Io(t){return t()}function No(){return Object.create(null)}function mt(t){t.forEach(Io)}function li(t){return typeof t=="function"}function Ne(t,e){return t!=t?e==e:t!==e||t&&typeof t=="object"||typeof t=="function"}let si;function Mo(t,e){return t===e?!0:(si||(si=document.createElement("a")),si.href=e,t===si.href)}function vu(t){return Object.keys(t).length===0}function Ro(t,e,n,i){if(t){const r=xo(t,e,n,i);return t[0](r)}}function xo(t,e,n,i){return t[1]&&i?In(n.ctx.slice(),t[1](i(e))):n.ctx}function Fo(t,e,n,i){if(t[2]&&i){const r=t[2](i(n));if(e.dirty===void 0)return r;if(typeof r=="object"){const o=[],l=Math.max(e.dirty.length,r.length);for(let s=0;s<l;s+=1)o[s]=e.dirty[s]|r[s];return o}return e.dirty|r}return e.dirty}function Bo(t,e,n,i,r,o){if(r){const l=xo(e,n,i,o);t.p(l,r)}}function Ho(t){if(t.ctx.length>32){const e=[],n=t.ctx.length/32;for(let i=0;i<n;i++)e[i]=-1;return e}return-1}const jo=typeof window<"u";let gu=jo?()=>window.performance.now():()=>Date.now(),er=jo?t=>requestAnimationFrame(t):Fe;const sn=new Set;function Wo(t){sn.forEach(e=>{e.c(t)||(sn.delete(e),e.f())}),sn.size!==0&&er(Wo)}function bu(t){let e;return sn.size===0&&er(Wo),{promise:new Promise(n=>{sn.add(e={c:t,f:n})}),abort(){sn.delete(e)}}}function D(t,e){t.appendChild(e)}function zo(t){if(!t)return document;const e=t.getRootNode?t.getRootNode():t.ownerDocument;return e&&e.host?e:t.ownerDocument}function yu(t){const e=C("style");return e.textContent="/* empty */",wu(zo(t),e),e.sheet}function wu(t,e){return D(t.head||t,e),e.sheet}function U(t,e,n){t.insertBefore(e,n||null)}function V(t){t.parentNode&&t.parentNode.removeChild(t)}function ui(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}function C(t){return document.createElement(t)}function _e(t){return document.createTextNode(t)}function W(){return _e(" ")}function tr(){return _e("")}function me(t,e,n,i){return t.addEventListener(e,n,i),()=>t.removeEventListener(e,n,i)}function Wt(t){return function(e){return e.preventDefault(),t.call(this,e)}}function nr(t){return function(e){return e.stopPropagation(),t.call(this,e)}}function y(t,e,n){n==null?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}const _u=["width","height"];function zt(t,e){const n=Object.getOwnPropertyDescriptors(t.__proto__);for(const i in e)e[i]==null?t.removeAttribute(i):i==="style"?t.style.cssText=e[i]:i==="__value"?t.value=t[i]=e[i]:n[i]&&n[i].set&&_u.indexOf(i)===-1?t[i]=e[i]:y(t,i,e[i])}function Eu(t){return Array.from(t.childNodes)}function Je(t,e){e=""+e,t.data!==e&&(t.data=e)}function we(t,e,n,i){n==null?t.style.removeProperty(e):t.style.setProperty(e,n,"")}function be(t,e,n){t.classList.toggle(e,!!n)}function qo(t,e,{bubbles:n=!1,cancelable:i=!1}={}){return new CustomEvent(t,{detail:e,bubbles:n,cancelable:i})}const fi=new Map;let ci=0;function Du(t){let e=5381,n=t.length;for(;n--;)e=(e<<5)-e^t.charCodeAt(n);return e>>>0}function ku(t,e){const n={stylesheet:yu(e),rules:{}};return fi.set(t,n),n}function Go(t,e,n,i,r,o,l,s=0){const a=16.666/i;let u=`{
`;for(let v=0;v<=1;v+=a){const b=e+(n-e)*o(v);u+=v*100+`%{${l(b,1-b)}}
`}const f=u+`100% {${l(n,1-n)}}
}`,c=`__svelte_${Du(f)}_${s}`,d=zo(t),{stylesheet:m,rules:h}=fi.get(d)||ku(d,t);h[c]||(h[c]=!0,m.insertRule(`@keyframes ${c} ${f}`,m.cssRules.length));const g=t.style.animation||"";return t.style.animation=`${g?`${g}, `:""}${c} ${i}ms linear ${r}ms 1 both`,ci+=1,c}function Su(t,e){const n=(t.style.animation||"").split(", "),i=n.filter(e?o=>o.indexOf(e)<0:o=>o.indexOf("__svelte")===-1),r=n.length-i.length;r&&(t.style.animation=i.join(", "),ci-=r,ci||Cu())}function Cu(){er(()=>{ci||(fi.forEach(t=>{const{ownerNode:e}=t.stylesheet;e&&V(e)}),fi.clear())})}let Nn;function Mn(t){Nn=t}function di(){if(!Nn)throw new Error("Function called outside component initialization");return Nn}function Rn(t){di().$$.on_mount.push(t)}function Tu(t){di().$$.after_update.push(t)}function ir(t){di().$$.on_destroy.push(t)}function rr(){const t=di();return(e,n,{cancelable:i=!1}={})=>{const r=t.$$.callbacks[e];if(r){const o=qo(e,n,{cancelable:i});return r.slice().forEach(l=>{l.call(t,o)}),!o.defaultPrevented}return!0}}const un=[],qe=[];let fn=[];const Vo=[],Uo=Promise.resolve();let or=!1;function Xo(){or||(or=!0,Uo.then(Yo))}function cn(){return Xo(),Uo}function xn(t){fn.push(t)}const ar=new Set;let dn=0;function Yo(){if(dn!==0)return;const t=Nn;do{try{for(;dn<un.length;){const e=un[dn];dn++,Mn(e),Ou(e.$$)}}catch(e){throw un.length=0,dn=0,e}for(Mn(null),un.length=0,dn=0;qe.length;)qe.pop()();for(let e=0;e<fn.length;e+=1){const n=fn[e];ar.has(n)||(ar.add(n),n())}fn.length=0}while(un.length);for(;Vo.length;)Vo.pop()();or=!1,ar.clear(),Mn(t)}function Ou(t){if(t.fragment!==null){t.update(),mt(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(xn)}}function Au(t){const e=[],n=[];fn.forEach(i=>t.indexOf(i)===-1?e.push(i):n.push(i)),n.forEach(i=>i()),fn=e}let Fn;function Lu(){return Fn||(Fn=Promise.resolve(),Fn.then(()=>{Fn=null})),Fn}function lr(t,e,n){t.dispatchEvent(qo(`${e?"intro":"outro"}${n}`))}const pi=new Set;let Nt;function Jo(){Nt={r:0,c:[],p:Nt}}function Ko(){Nt.r||mt(Nt.c),Nt=Nt.p}function Be(t,e){t&&t.i&&(pi.delete(t),t.i(e))}function Ge(t,e,n,i){if(t&&t.o){if(pi.has(t))return;pi.add(t),Nt.c.push(()=>{pi.delete(t),i&&(n&&t.d(1),i())}),t.o(e)}else i&&i()}const Pu={duration:0};function Qo(t,e,n,i){let o=e(t,n,{direction:"both"}),l=i?0:1,s=null,a=null,u=null,f;function c(){u&&Su(t,u)}function d(h,g){const v=h.b-l;return g*=Math.abs(v),{a:l,b:h.b,d:v,duration:g,start:h.start,end:h.start+g,group:h.group}}function m(h){const{delay:g=0,duration:v=300,easing:b=Po,tick:_=Fe,css:k}=o||Pu,p={start:gu()+g,b:h};h||(p.group=Nt,Nt.r+=1),"inert"in t&&(h?f!==void 0&&(t.inert=f):(f=t.inert,t.inert=!0)),s||a?a=p:(k&&(c(),u=Go(t,l,h,v,g,b,k)),h&&_(0,1),s=d(p,v),xn(()=>lr(t,h,"start")),bu(T=>{if(a&&T>a.start&&(s=d(a,v),a=null,lr(t,s.b,"start"),k&&(c(),u=Go(t,l,s.b,s.duration,0,b,o.css))),s){if(T>=s.end)_(l=s.b,1-l),lr(t,s.b,"end"),a||(s.b?c():--s.group.r||mt(s.group.c)),s=null;else if(T>=s.start){const E=T-s.start;l=s.a+s.d*b(E/s.duration),_(l,1-l)}}return!!(s||a)}))}return{run(h){li(o)?Lu().then(()=>{o=o({direction:h?"in":"out"}),m(h)}):m(h)},end(){c(),s=a=null}}}function Ee(t){return(t==null?void 0:t.length)!==void 0?t:Array.from(t)}function Mt(t,e){t.d(1),e.delete(t.key)}function Rt(t,e,n,i,r,o,l,s,a,u,f,c){let d=t.length,m=o.length,h=d;const g={};for(;h--;)g[t[h].key]=h;const v=[],b=new Map,_=new Map,k=[];for(h=m;h--;){const A=c(r,o,h),O=n(A);let w=l.get(O);w?k.push(()=>w.p(A,e)):(w=u(O,A),w.c()),b.set(O,v[h]=w),O in g&&_.set(O,Math.abs(h-g[O]))}const p=new Set,T=new Set;function E(A){Be(A,1),A.m(s,f),l.set(A.key,A),f=A.first,m--}for(;d&&m;){const A=v[m-1],O=t[d-1],w=A.key,S=O.key;A===O?(f=A.first,d--,m--):b.has(S)?!l.has(w)||p.has(w)?E(A):T.has(S)?d--:_.get(w)>_.get(S)?(T.add(w),E(A)):(p.add(S),d--):(a(O,l),d--)}for(;d--;){const A=t[d];b.has(A.key)||a(A,l)}for(;m;)E(v[m-1]);return mt(k),v}function hi(t,e){const n={},i={},r={$$scope:1};let o=t.length;for(;o--;){const l=t[o],s=e[o];if(s){for(const a in l)a in s||(i[a]=1);for(const a in s)r[a]||(n[a]=s[a],r[a]=1);t[o]=s}else for(const a in l)r[a]=1}for(const l in i)l in n||(n[l]=void 0);return n}function _t(t){t&&t.c()}function vt(t,e,n){const{fragment:i,after_update:r}=t.$$;i&&i.m(e,n),xn(()=>{const o=t.$$.on_mount.map(Io).filter(li);t.$$.on_destroy?t.$$.on_destroy.push(...o):mt(o),t.$$.on_mount=[]}),r.forEach(xn)}function gt(t,e){const n=t.$$;n.fragment!==null&&(Au(n.after_update),mt(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function Iu(t,e){t.$$.dirty[0]===-1&&(un.push(t),Xo(),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function Ve(t,e,n,i,r,o,l=null,s=[-1]){const a=Nn;Mn(t);const u=t.$$={fragment:null,ctx:[],props:o,update:Fe,not_equal:r,bound:No(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(a?a.$$.context:[])),callbacks:No(),dirty:s,skip_bound:!1,root:e.target||a.$$.root};l&&l(u.root);let f=!1;if(u.ctx=n?n(t,e.props||{},(c,d,...m)=>{const h=m.length?m[0]:d;return u.ctx&&r(u.ctx[c],u.ctx[c]=h)&&(!u.skip_bound&&u.bound[c]&&u.bound[c](h),f&&Iu(t,c)),d}):[],u.update(),f=!0,mt(u.before_update),u.fragment=i?i(u.ctx):!1,e.target){if(e.hydrate){const c=Eu(e.target);u.fragment&&u.fragment.l(c),c.forEach(V)}else u.fragment&&u.fragment.c();e.intro&&Be(t.$$.fragment),vt(t,e.target,e.anchor),Yo()}Mn(a)}class Ue{constructor(){Nr(this,"$$");Nr(this,"$$set")}$destroy(){gt(this,1),this.$destroy=Fe}$on(e,n){if(!li(n))return Fe;const i=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return i.push(n),()=>{const r=i.indexOf(n);r!==-1&&i.splice(r,1)}}$set(e){this.$$set&&!vu(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}const Nu="4",pn=[];function qt(t,e=Fe){let n;const i=new Set;function r(s){if(Ne(t,s)&&(t=s,n)){const a=!pn.length;for(const u of i)u[1](),pn.push(u,t);if(a){for(let u=0;u<pn.length;u+=2)pn[u][0](pn[u+1]);pn.length=0}}}function o(s){r(s(t))}function l(s,a=Fe){const u=[s,a];return i.add(u),i.size===1&&(n=e(r,o)||Fe),s(t),()=>{i.delete(u),i.size===0&&n&&(n(),n=null)}}return{set:r,update:o,subscribe:l}}const sr=qt({}),B={setTranslations(t){sr.set(t)},has(t,e,n){let i=!1;return sr.subscribe(r=>{if(n in r&&e in r[n]&&t in r[n][e]){i=!0;return}})(),i},get(t,e,n){let i=n;return sr.subscribe(r=>{if(t in r&&e in r[t]&&n in r[t][e]){i=r[t][e][n];return}if(t in r&&e in r[t]&&n in r[t][e]){i=r[t][e][n];return}if(t=="Global"){i=n;return}i=null})(),i},translate(t,e=null,n=null){n=n||"Global",e=e||"labels";let i=B.get(n,e,t);return i===null&&n!="Global"&&(i=B.get("Global",e,t)),i},translateOption(t,e,n=null){let i=B.translate(e,"options",n);return i===null?"":typeof i=="object"?i[t]:t}},Zo=qt({}),mi={set(t){Zo.set(t)},get(){let t=null;return Zo.subscribe(e=>{e&&(t=e)})(),t}},ur=qt(),ot={setNotifier(t){ur.set(t)},notify(t,e=null,n=2e3){ur.subscribe(i=>{i&&i.notify(t,e,2e3)})()},confirm(t=null,e=null,n){ur.subscribe(i=>{if(i){let r=null,o=null,l=null;typeof t=="string"||t instanceof String?(o=t,l=B.translate("Yes")):(t=t||{},o=t.message,l=t.confirmText,r=t.confirmStyle||null),i.confirm(o,{confirmText:l,cancelText:B.translate("Cancel"),confirmStyle:r},e,n)}})()}},vi=qt(),Tt={setLayoutManager(t){vi.set(t)},resetToDefault(t,e,n,i,r){let o=null;return vi.subscribe(l=>{l&&(o=l.resetToDefault(t,e,n,i,r))})(),o},get:function(t,e,n,i,r,o){let l=null;return vi.subscribe(s=>{s&&(l=s.get(t,e,n,i,r,o))})(),l},set:function(t,e,n,i,r,o){let l=null;return vi.subscribe(s=>{s&&(l=s.set(t,e,n,i,r,o))})(),l}},$o=qt(),le={setMetadata(t){$o.set(t)},get(t){let e=null;return $o.subscribe(n=>{n&&(e=n.get(t))})(),e}},ea=qt(),fr={setModelFactory(t){ea.set(t)},create(t,e){ea.subscribe(n=>{n&&n.create(t,e)})()}},ta=qt(),na={setConfig(t){ta.set(t)},get(t){let e=null;return ta.subscribe(n=>{n&&(e=n.get(t))})(),e}},Bn=qt(),Le={setStorage(t){Bn.set(t)},get(t,e){let n=null;return Bn.subscribe(i=>{i&&(n=i.get(t,e))})(),n},has(t,e){let n=null;return Bn.subscribe(i=>{i&&(n=i.has(t,e))})(),n},clear(t,e){Bn.subscribe(n=>{n&&n.clear(t,e)})()},set(t,e,n){Bn.subscribe(i=>{i&&i.set(t,e,n)})()}};typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(Nu);function ia(t){let e,n,i,r,o,l,s,a,u,f,c,d,m,h,g;function v(k,p){return k[2]?Ru:Mu}let b=v(t),_=b(t);return{c(){e=C("div"),n=C("div"),i=C("div"),r=C("span"),r.textContent=`${B.translate("jobManager")}`,o=W(),l=C("span"),s=C("a"),s.innerHTML='<span aria-hidden="true"></span>',a=W(),_.c(),u=W(),f=C("a"),f.textContent=`${B.translate("View List")}`,c=W(),d=C("div"),m=C("div"),m.textContent=`${B.translate("Loading...")}`,y(r,"class","panel-heading-title"),y(s,"href","/"),y(s,"class","close svelte-1p6ppx8"),y(f,"href","#Job"),y(f,"title",B.translate("View List")),y(f,"class","qp-view-list svelte-1p6ppx8"),y(l,"class","pull-right"),y(i,"class","panel-heading clearfix"),y(m,"class","list-container"),y(d,"class","panel-body"),y(n,"class","panel panel-default"),y(e,"class","queue-panel-container")},m(k,p){U(k,e,p),D(e,n),D(n,i),D(i,r),D(i,o),D(i,l),D(l,s),D(l,a),_.m(l,null),D(l,u),D(l,f),D(n,c),D(n,d),D(d,m),t[9](e),h||(g=me(s,"click",t[6]),h=!0)},p(k,p){b===(b=v(k))&&_?_.p(k,p):(_.d(1),_=b(k),_&&(_.c(),_.m(l,u)))},d(k){k&&V(e),_.d(),t[9](null),h=!1,g()}}}function Mu(t){let e,n,i;return{c(){e=C("a"),e.textContent=`${B.translate("Pause")}`,y(e,"href","/"),y(e,"title",B.translate("Pause")),y(e,"class","qm-button")},m(r,o){U(r,e,o),n||(i=me(e,"click",t[8]),n=!0)},p:Fe,d(r){r&&V(e),n=!1,i()}}}function Ru(t){let e,n,i;return{c(){e=C("a"),e.textContent=`${B.translate("Start")}`,y(e,"href","/"),y(e,"title",B.translate("Start")),y(e,"class","qm-button")},m(r,o){U(r,e,o),n||(i=me(e,"click",t[7]),n=!0)},p:Fe,d(r){r&&V(e),n=!1,i()}}}function xu(t){let e,n=t[0]&&ia(t);return{c(){n&&n.c(),e=tr()},m(i,r){n&&n.m(i,r),U(i,e,r)},p(i,[r]){i[0]?n?n.p(i,r):(n=ia(i),n.c(),n.m(e.parentNode,e)):n&&(n.d(1),n=null)},i:Fe,o:Fe,d(i){i&&V(e),n&&n.d(i)}}}function Fu(t,e,n){let{isOpen:i=!1}=e,{close:r}=e,{icon:o}=e,l=!1;window.addEventListener("publicDataFetched",h=>{n(2,l=!!h.detail.qmPaused)});let s;function a(h){s&&!s.contains(h.target)&&o&&!o.contains(h.target)&&i===!0&&r()}Rn(()=>{document.addEventListener("click",a)}),ir(()=>{document.removeEventListener("click",a)});async function u(h){let g=mi.get();if(g)try{const v=await fetch("/api/v1/App/action/QueueManagerUpdate",{method:"POST",headers:{"Content-Type":"application/json","Authorization-Token":btoa(g.user.userName+":"+g.token)},body:JSON.stringify({pause:h})});if(!v.ok)throw new Error("Network response was not ok");await v.json(),ot.notify("Done","success")}catch(v){console.error("Error:",v)}}const f=h=>{h.preventDefault(),r()},c=h=>{h.preventDefault(),u(!1)},d=h=>{h.preventDefault(),u(!0)};function m(h){qe[h?"unshift":"push"](()=>{s=h,n(3,s)})}return t.$$set=h=>{"isOpen"in h&&n(0,i=h.isOpen),"close"in h&&n(1,r=h.close),"icon"in h&&n(5,o=h.icon)},[i,r,l,s,u,o,f,c,d,m]}class Bu extends Ue{constructor(e){super(),Ve(this,e,Fu,xu,Ne,{isOpen:0,close:1,icon:5})}}function ra(t){let e;return{c(){e=C("span"),y(e,"class","fas fa-pause-circle pause-icon")},m(n,i){U(n,e,i)},d(n){n&&V(e)}}}function Hu(t){let e,n,i,r,o,l,s,a,u=t[2]&&ra();return o=new Bu({props:{icon:t[0],isOpen:t[1],close:t[4]}}),{c(){e=C("a"),n=C("span"),i=W(),u&&u.c(),r=W(),_t(o.$$.fragment),y(n,"class","fas fa-tasks"),y(e,"href","/"),y(e,"class","notifications-button"),y(e,"title",B.translate("jobManager"))},m(f,c){U(f,e,c),D(e,n),D(e,i),u&&u.m(e,null),t[6](e),U(f,r,c),vt(o,f,c),l=!0,s||(a=me(e,"click",t[7]),s=!0)},p(f,[c]){f[2]?u||(u=ra(),u.c(),u.m(e,null)):u&&(u.d(1),u=null);const d={};c&1&&(d.icon=f[0]),c&2&&(d.isOpen=f[1]),o.$set(d)},i(f){l||(Be(o.$$.fragment,f),l=!0)},o(f){Ge(o.$$.fragment,f),l=!1},d(f){f&&(V(e),V(r)),u&&u.d(),t[6](null),gt(o,f),s=!1,a()}}}function ju(t,e,n){let{renderTable:i=()=>{}}=e,r,o=!1,l=!1;window.addEventListener("publicDataFetched",c=>{n(2,l=!!c.detail.qmPaused)});function s(){o||(n(1,o=!0),i())}function a(){n(1,o=!1),window.dispatchEvent(new Event("jobManagerPanelClosed"))}function u(c){qe[c?"unshift":"push"](()=>{r=c,n(0,r)})}const f=c=>{c.preventDefault(),s()};return t.$$set=c=>{"renderTable"in c&&n(5,i=c.renderTable)},[r,o,l,s,a,i,u,f]}class Wu extends Ue{constructor(e){super(),Ve(this,e,ju,Hu,Ne,{renderTable:5})}}function zu(t){let e,n=`${t[0]}px`,i=`${t[0]}px`,r=`${t[1]}px`;return{c(){e=C("div"),y(e,"class","loading-icon spinner svelte-yw8t7l"),we(e,"width",n),we(e,"height",i),we(e,"border-width",r)},m(o,l){U(o,e,l)},p(o,[l]){l&1&&n!==(n=`${o[0]}px`)&&we(e,"width",n),l&1&&i!==(i=`${o[0]}px`)&&we(e,"height",i),l&2&&r!==(r=`${o[1]}px`)&&we(e,"border-width",r)},i:Fe,o:Fe,d(o){o&&V(e)}}}function qu(t,e,n){let{size:i=40}=e,{thickness:r=4}=e;return t.$$set=o=>{"size"in o&&n(0,i=o.size),"thickness"in o&&n(1,r=o.thickness)},[i,r]}class Gu extends Ue{constructor(e){super(),Ve(this,e,qu,zu,Ne,{size:0,thickness:1})}}function oa(t){let e,n;return{c(){e=C("img"),Mo(e.src,n=t[1])||y(e,"src",n),y(e,"class","logo"),y(e,"alt",t[0])},m(i,r){U(i,e,r)},p(i,r){r&2&&!Mo(e.src,n=i[1])&&y(e,"src",n),r&1&&y(e,"alt",i[0])},d(i){i&&V(e)}}}function aa(t){let e,n,i;return{c(){e=C("a"),n=C("i"),i=_e("Recovery Instructions"),y(n,"class","fa fa-history svelte-1qmezxs"),y(e,"href",t[2]),y(e,"target","_blank"),y(e,"class","btn btn-default svelte-1qmezxs"),y(e,"role","button"),we(e,"float","right")},m(r,o){U(r,e,o),D(e,n),D(e,i)},p(r,o){o&4&&y(e,"href",r[2])},d(r){r&&V(e)}}}function la(t){let e,n,i,r,o,l;return{c(){e=C("hr"),n=W(),i=C("pre"),r=_e(t[3]),y(i,"class","logs-container svelte-1qmezxs")},m(s,a){U(s,e,a),U(s,n,a),U(s,i,a),D(i,r),t[11](i),o||(l=me(i,"scroll",t[8]),o=!0)},p(s,a){a&8&&Je(r,s[3])},d(s){s&&(V(e),V(n),V(i)),t[11](null),o=!1,l()}}}function Vu(t){let e,n,i,r,o,l,s,a,u,f,c,d,m,h,g,v,b,_,k=t[4]?"Hide":"Show",p,T,E,A,O,w,S,P,N=t[1]&&oa(t);f=new Gu({props:{size:"40",thickness:"5"}});let z=t[2]&&aa(t),K=t[4]&&t[3]&&la(t);return{c(){e=C("div"),n=C("div"),i=C("div"),N&&N.c(),r=W(),o=C("div"),l=C("div"),s=C("h3"),s.textContent="System is updating...",a=W(),u=C("section"),_t(f.$$.fragment),c=W(),d=C("h5"),m=_e(t[5]),h=W(),g=C("section"),v=C("div"),b=C("button"),_=C("i"),p=_e(k),T=_e(" logs"),A=W(),z&&z.c(),O=W(),K&&K.c(),y(i,"class","logo-container"),y(n,"class","panel-heading"),y(d,"class","svelte-1qmezxs"),y(u,"class","progress-section svelte-1qmezxs"),y(_,"class","fa fa-list svelte-1qmezxs"),y(b,"class","btn btn-default svelte-1qmezxs"),b.disabled=E=!t[3],y(v,"class","buttons"),y(g,"class","logs-section"),y(l,"class","form-group"),y(o,"class","panel-body"),y(e,"id","login"),y(e,"class","panel panel-default panel-updating")},m(R,H){U(R,e,H),D(e,n),D(n,i),N&&N.m(i,null),D(e,r),D(e,o),D(o,l),D(l,s),D(l,a),D(l,u),vt(f,u,null),D(u,c),D(u,d),D(d,m),D(l,h),D(l,g),D(g,v),D(v,b),D(b,_),D(b,p),D(b,T),D(v,A),z&&z.m(v,null),D(g,O),K&&K.m(g,null),w=!0,S||(P=me(b,"click",t[7]),S=!0)},p(R,[H]){R[1]?N?N.p(R,H):(N=oa(R),N.c(),N.m(i,null)):N&&(N.d(1),N=null),(!w||H&32)&&Je(m,R[5]),(!w||H&16)&&k!==(k=R[4]?"Hide":"Show")&&Je(p,k),(!w||H&8&&E!==(E=!R[3]))&&(b.disabled=E),R[2]?z?z.p(R,H):(z=aa(R),z.c(),z.m(v,null)):z&&(z.d(1),z=null),R[4]&&R[3]?K?K.p(R,H):(K=la(R),K.c(),K.m(g,null)):K&&(K.d(1),K=null)},i(R){w||(Be(f.$$.fragment,R),w=!0)},o(R){Ge(f.$$.fragment,R),w=!1},d(R){R&&V(e),N&&N.d(),gt(f),z&&z.d(),K&&K.d(),S=!1,P()}}}function Uu(t){return t.replace(/^\d{2,4}.\d{2}.\d{2,4} \d{2}:\d{2}:\d{2}/g,"").replace(/^[\-\|\s]+/,"")}function Xu(t,e,n){let{applicationName:i="AtroCore"}=e,{logoPath:r=null}=e,{logFilePath:o}=e,{restoreLink:l=null}=e,s=!1,a=!1,u=0,f=!0,c="",d,m;Tu(()=>{m&&f&&m.scrollTo(0,m.scrollHeight)});function h(){n(4,s=!s),s||(f=!0)}function g(b){const _=b.currentTarget;f=_.scrollHeight-_.scrollTop===_.clientHeight}setInterval(async()=>{try{const b=await fetch(o,{cache:"no-store"});u+=1,b.ok?(n(3,c=(await b.text()).trim()),c.search("composer")>=0&&n(10,a=!0),u>65&&!a&&n(3,c="Something wrong. Please, reboot the server.")):a?setTimeout(()=>{location.reload()},2e3):u>65&&n(3,c="Something wrong. Please, reboot the server.")}catch(b){console.error("Error: ",b)}},1e3);function v(b){qe[b?"unshift":"push"](()=>{m=b,n(6,m)})}return t.$$set=b=>{"applicationName"in b&&n(0,i=b.applicationName),"logoPath"in b&&n(1,r=b.logoPath),"logFilePath"in b&&n(9,o=b.logFilePath),"restoreLink"in b&&n(2,l=b.restoreLink)},t.$$.update=()=>{if(t.$$.dirty&1032)if(c){const b=c.trim().split(`
`);n(5,d=Uu(b.pop()))}else a?n(5,d=""):n(5,d="Starting...")},[i,r,l,c,s,d,m,h,g,o,a,v]}class Yu extends Ue{constructor(e){super(),Ve(this,e,Xu,Vu,Ne,{applicationName:0,logoPath:1,logFilePath:9,restoreLink:2})}}function sa(t,e,n){const i=t.slice();return i[20]=e[n],i}function ua(t){let e,n=t[20].label+"",i,r,o,l,s,a;function u(){return t[12](t[20])}return{c(){e=C("button"),i=_e(n),r=W(),y(e,"data-action",o=t[20].name),e.disabled=t[1],y(e,"type","button"),y(e,"class",l=`btn action btn-${t[20].style??"default"}`)},m(f,c){U(f,e,c),D(e,i),D(e,r),s||(a=me(e,"click",u),s=!0)},p(f,c){t=f,c&1&&n!==(n=t[20].label+"")&&Je(i,n),c&1&&o!==(o=t[20].name)&&y(e,"data-action",o),c&2&&(e.disabled=t[1]),c&1&&l!==(l=`btn action btn-${t[20].style??"default"}`)&&y(e,"class",l)},d(f){f&&V(e),s=!1,a()}}}function Ju(t){let e,n,i,r=Ee(t[0]),o=[];for(let a=0;a<r.length;a+=1)o[a]=ua(sa(t,r,a));const l=t[11].default,s=Ro(l,t,t[10],null);return{c(){e=C("div");for(let a=0;a<o.length;a+=1)o[a].c();n=W(),s&&s.c(),y(e,"class","button-container"),we(e,"padding-top","10px")},m(a,u){U(a,e,u);for(let f=0;f<o.length;f+=1)o[f]&&o[f].m(e,null);t[13](e),U(a,n,u),s&&s.m(a,u),i=!0},p(a,[u]){if(u&11){r=Ee(a[0]);let f;for(f=0;f<r.length;f+=1){const c=sa(a,r,f);o[f]?o[f].p(c,u):(o[f]=ua(c),o[f].c(),o[f].m(e,null))}for(;f<o.length;f+=1)o[f].d(1);o.length=r.length}s&&s.p&&(!i||u&1024)&&Bo(s,l,a,a[10],i?Fo(l,a[10],u,null):Ho(a[10]),null)},i(a){i||(Be(s,a),i=!0)},o(a){Ge(s,a),i=!1},d(a){a&&(V(e),V(n)),ui(o,a),t[13](null),s&&s.d(a)}}}function Ku(t,e,n){let{$$slots:i={},$$scope:r}=e;const o=rr();let{params:l}=e,{fetch:s}=e,a,{loadLayout:u=()=>{Tt.get(scope,type,layoutProfileId,E=>{n(9,a=E.layout)},!1)}}=e,{validate:f=()=>!0}=e,c=!1,d=[],m;l.layoutProfiles,Rn(async()=>{var A;await h(),await cn(),o("ready");const E=document.querySelector("#layout-buttons");m&&E&&(l.inModal||l.replaceButtons)&&((A=E.closest(".modal-body"))==null||A.classList.add("modal-layout-manager"),E.appendChild(m))});async function h(){return ot.notify("Loading..."),new Promise((E,A)=>{u(O=>{n(9,a=O),ot.notify(!1),E(),l.afterRender&&l.afterRender()})})}function g(){n(1,c=!0);const E=s();if(!f(E)){n(1,c=!1);return}if(ot.notify("Saving..."),l.inModal&&!l.getActiveLayoutProfileId()){v(!0);return}Tt.set(l.scope,l.type,l.relatedScope,l.layoutProfileId,E,()=>{ot.notify("Saved","success",2e3),v(!1),n(1,c=!1),l.inModal||u()})}function v(E){l.onUpdate&&l.onUpdate(E)}function b(){u()}function _(){ot.confirm("Are you sure you want to reset this layout?",()=>{var E;Tt.resetToDefault(l.scope,l.type,l.relatedScope,(E=a.storedProfile)==null?void 0:E.id,()=>{v(!0),b()})})}function k(E){switch(E.name){case"save":g();break;case"cancel":b();break;case"reset":_();break;case"fullEdit":window.open(`#Admin/layouts/scope=${l.scope}&type=${l.type}${l.relatedScope?"&relatedScope="+l.relatedScope:""}${l.layoutProfileId?"&layoutProfileId="+l.layoutProfileId:""}`,"_blank");break}}const p=E=>k(E);function T(E){qe[E?"unshift":"push"](()=>{m=E,n(2,m)})}return t.$$set=E=>{"params"in E&&n(4,l=E.params),"fetch"in E&&n(5,s=E.fetch),"loadLayout"in E&&n(6,u=E.loadLayout),"validate"in E&&n(7,f=E.validate),"$$scope"in E&&n(10,r=E.$$scope)},t.$$.update=()=>{if(t.$$.dirty&529){if(n(0,d=[{name:"cancel",label:B.translate("Cancel","labels")}]),l.inModal){let E=mi.get();E&&E.user&&E.user.isAdmin&&d.unshift({name:"fullEdit",label:B.translate("Full Edit","labels","LayoutManager")})}(!l.inModal||a!=null&&a.canEdit)&&d.unshift({name:"save",label:B.translate("Save","labels"),style:"primary"}),a&&a.storedProfile&&a.storedProfile.id===l.layoutProfileId&&a.canEdit&&d.push({name:"reset",label:B.translate("reset","labels","LayoutManager")})}},[d,c,m,k,l,s,u,f,g,a,r,i,p,T]}let fa=class extends Ue{constructor(e){super(),Ve(this,e,Ku,Ju,Ne,{params:4,fetch:5,loadLayout:6,validate:7,save:8})}get save(){return this.$$.ctx[8]}};/**!
 * Sortable 1.15.6
 * @author	RubaXa   <trash@rubaxa.org>
 * @author	owenm    <owen23355@gmail.com>
 * @license MIT
 */function ca(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),n.push.apply(n,i)}return n}function Ot(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?ca(Object(n),!0).forEach(function(i){Qu(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ca(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function gi(t){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?gi=function(e){return typeof e}:gi=function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},gi(t)}function Qu(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function xt(){return xt=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},xt.apply(this,arguments)}function Zu(t,e){if(t==null)return{};var n={},i=Object.keys(t),r,o;for(o=0;o<i.length;o++)r=i[o],!(e.indexOf(r)>=0)&&(n[r]=t[r]);return n}function $u(t,e){if(t==null)return{};var n=Zu(t,e),i,r;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(r=0;r<o.length;r++)i=o[r],!(e.indexOf(i)>=0)&&Object.prototype.propertyIsEnumerable.call(t,i)&&(n[i]=t[i])}return n}var ef="1.15.6";function Ft(t){if(typeof window<"u"&&window.navigator)return!!navigator.userAgent.match(t)}var Bt=Ft(/(?:Trident.*rv[ :]?11\.|msie|iemobile|Windows Phone)/i),Hn=Ft(/Edge/i),da=Ft(/firefox/i),jn=Ft(/safari/i)&&!Ft(/chrome/i)&&!Ft(/android/i),cr=Ft(/iP(ad|od|hone)/i),pa=Ft(/chrome/i)&&Ft(/android/i),ha={capture:!1,passive:!1};function de(t,e,n){t.addEventListener(e,n,!Bt&&ha)}function ce(t,e,n){t.removeEventListener(e,n,!Bt&&ha)}function bi(t,e){if(e){if(e[0]===">"&&(e=e.substring(1)),t)try{if(t.matches)return t.matches(e);if(t.msMatchesSelector)return t.msMatchesSelector(e);if(t.webkitMatchesSelector)return t.webkitMatchesSelector(e)}catch{return!1}return!1}}function ma(t){return t.host&&t!==document&&t.host.nodeType?t.host:t.parentNode}function Et(t,e,n,i){if(t){n=n||document;do{if(e!=null&&(e[0]===">"?t.parentNode===n&&bi(t,e):bi(t,e))||i&&t===n)return t;if(t===n)break}while(t=ma(t))}return null}var va=/\s+/g;function ut(t,e,n){if(t&&e)if(t.classList)t.classList[n?"add":"remove"](e);else{var i=(" "+t.className+" ").replace(va," ").replace(" "+e+" "," ");t.className=(i+(n?" "+e:"")).replace(va," ")}}function ee(t,e,n){var i=t&&t.style;if(i){if(n===void 0)return document.defaultView&&document.defaultView.getComputedStyle?n=document.defaultView.getComputedStyle(t,""):t.currentStyle&&(n=t.currentStyle),e===void 0?n:n[e];!(e in i)&&e.indexOf("webkit")===-1&&(e="-webkit-"+e),i[e]=n+(typeof n=="string"?"":"px")}}function hn(t,e){var n="";if(typeof t=="string")n=t;else do{var i=ee(t,"transform");i&&i!=="none"&&(n=i+" "+n)}while(!e&&(t=t.parentNode));var r=window.DOMMatrix||window.WebKitCSSMatrix||window.CSSMatrix||window.MSCSSMatrix;return r&&new r(n)}function ga(t,e,n){if(t){var i=t.getElementsByTagName(e),r=0,o=i.length;if(n)for(;r<o;r++)n(i[r],r);return i}return[]}function At(){var t=document.scrollingElement;return t||document.documentElement}function Me(t,e,n,i,r){if(!(!t.getBoundingClientRect&&t!==window)){var o,l,s,a,u,f,c;if(t!==window&&t.parentNode&&t!==At()?(o=t.getBoundingClientRect(),l=o.top,s=o.left,a=o.bottom,u=o.right,f=o.height,c=o.width):(l=0,s=0,a=window.innerHeight,u=window.innerWidth,f=window.innerHeight,c=window.innerWidth),(e||n)&&t!==window&&(r=r||t.parentNode,!Bt))do if(r&&r.getBoundingClientRect&&(ee(r,"transform")!=="none"||n&&ee(r,"position")!=="static")){var d=r.getBoundingClientRect();l-=d.top+parseInt(ee(r,"border-top-width")),s-=d.left+parseInt(ee(r,"border-left-width")),a=l+o.height,u=s+o.width;break}while(r=r.parentNode);if(i&&t!==window){var m=hn(r||t),h=m&&m.a,g=m&&m.d;m&&(l/=g,s/=h,c/=h,f/=g,a=l+f,u=s+c)}return{top:l,left:s,bottom:a,right:u,width:c,height:f}}}function ba(t,e,n){for(var i=Gt(t,!0),r=Me(t)[e];i;){var o=Me(i)[n],l=void 0;if(l=r>=o,!l)return i;if(i===At())break;i=Gt(i,!1)}return!1}function mn(t,e,n,i){for(var r=0,o=0,l=t.children;o<l.length;){if(l[o].style.display!=="none"&&l[o]!==Q.ghost&&(i||l[o]!==Q.dragged)&&Et(l[o],n.draggable,t,!1)){if(r===e)return l[o];r++}o++}return null}function dr(t,e){for(var n=t.lastElementChild;n&&(n===Q.ghost||ee(n,"display")==="none"||e&&!bi(n,e));)n=n.previousElementSibling;return n||null}function bt(t,e){var n=0;if(!t||!t.parentNode)return-1;for(;t=t.previousElementSibling;)t.nodeName.toUpperCase()!=="TEMPLATE"&&t!==Q.clone&&(!e||bi(t,e))&&n++;return n}function ya(t){var e=0,n=0,i=At();if(t)do{var r=hn(t),o=r.a,l=r.d;e+=t.scrollLeft*o,n+=t.scrollTop*l}while(t!==i&&(t=t.parentNode));return[e,n]}function tf(t,e){for(var n in t)if(t.hasOwnProperty(n)){for(var i in e)if(e.hasOwnProperty(i)&&e[i]===t[n][i])return Number(n)}return-1}function Gt(t,e){if(!t||!t.getBoundingClientRect)return At();var n=t,i=!1;do if(n.clientWidth<n.scrollWidth||n.clientHeight<n.scrollHeight){var r=ee(n);if(n.clientWidth<n.scrollWidth&&(r.overflowX=="auto"||r.overflowX=="scroll")||n.clientHeight<n.scrollHeight&&(r.overflowY=="auto"||r.overflowY=="scroll")){if(!n.getBoundingClientRect||n===document.body)return At();if(i||e)return n;i=!0}}while(n=n.parentNode);return At()}function nf(t,e){if(t&&e)for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t}function pr(t,e){return Math.round(t.top)===Math.round(e.top)&&Math.round(t.left)===Math.round(e.left)&&Math.round(t.height)===Math.round(e.height)&&Math.round(t.width)===Math.round(e.width)}var Wn;function wa(t,e){return function(){if(!Wn){var n=arguments,i=this;n.length===1?t.call(i,n[0]):t.apply(i,n),Wn=setTimeout(function(){Wn=void 0},e)}}}function rf(){clearTimeout(Wn),Wn=void 0}function _a(t,e,n){t.scrollLeft+=e,t.scrollTop+=n}function Ea(t){var e=window.Polymer,n=window.jQuery||window.Zepto;return e&&e.dom?e.dom(t).cloneNode(!0):n?n(t).clone(!0)[0]:t.cloneNode(!0)}function Da(t,e,n){var i={};return Array.from(t.children).forEach(function(r){var o,l,s,a;if(!(!Et(r,e.draggable,t,!1)||r.animated||r===n)){var u=Me(r);i.left=Math.min((o=i.left)!==null&&o!==void 0?o:1/0,u.left),i.top=Math.min((l=i.top)!==null&&l!==void 0?l:1/0,u.top),i.right=Math.max((s=i.right)!==null&&s!==void 0?s:-1/0,u.right),i.bottom=Math.max((a=i.bottom)!==null&&a!==void 0?a:-1/0,u.bottom)}}),i.width=i.right-i.left,i.height=i.bottom-i.top,i.x=i.left,i.y=i.top,i}var at="Sortable"+new Date().getTime();function of(){var t=[],e;return{captureAnimationState:function(){if(t=[],!!this.options.animation){var i=[].slice.call(this.el.children);i.forEach(function(r){if(!(ee(r,"display")==="none"||r===Q.ghost)){t.push({target:r,rect:Me(r)});var o=Ot({},t[t.length-1].rect);if(r.thisAnimationDuration){var l=hn(r,!0);l&&(o.top-=l.f,o.left-=l.e)}r.fromRect=o}})}},addAnimationState:function(i){t.push(i)},removeAnimationState:function(i){t.splice(tf(t,{target:i}),1)},animateAll:function(i){var r=this;if(!this.options.animation){clearTimeout(e),typeof i=="function"&&i();return}var o=!1,l=0;t.forEach(function(s){var a=0,u=s.target,f=u.fromRect,c=Me(u),d=u.prevFromRect,m=u.prevToRect,h=s.rect,g=hn(u,!0);g&&(c.top-=g.f,c.left-=g.e),u.toRect=c,u.thisAnimationDuration&&pr(d,c)&&!pr(f,c)&&(h.top-c.top)/(h.left-c.left)===(f.top-c.top)/(f.left-c.left)&&(a=lf(h,d,m,r.options)),pr(c,f)||(u.prevFromRect=f,u.prevToRect=c,a||(a=r.options.animation),r.animate(u,h,c,a)),a&&(o=!0,l=Math.max(l,a),clearTimeout(u.animationResetTimer),u.animationResetTimer=setTimeout(function(){u.animationTime=0,u.prevFromRect=null,u.fromRect=null,u.prevToRect=null,u.thisAnimationDuration=null},a),u.thisAnimationDuration=a)}),clearTimeout(e),o?e=setTimeout(function(){typeof i=="function"&&i()},l):typeof i=="function"&&i(),t=[]},animate:function(i,r,o,l){if(l){ee(i,"transition",""),ee(i,"transform","");var s=hn(this.el),a=s&&s.a,u=s&&s.d,f=(r.left-o.left)/(a||1),c=(r.top-o.top)/(u||1);i.animatingX=!!f,i.animatingY=!!c,ee(i,"transform","translate3d("+f+"px,"+c+"px,0)"),this.forRepaintDummy=af(i),ee(i,"transition","transform "+l+"ms"+(this.options.easing?" "+this.options.easing:"")),ee(i,"transform","translate3d(0,0,0)"),typeof i.animated=="number"&&clearTimeout(i.animated),i.animated=setTimeout(function(){ee(i,"transition",""),ee(i,"transform",""),i.animated=!1,i.animatingX=!1,i.animatingY=!1},l)}}}}function af(t){return t.offsetWidth}function lf(t,e,n,i){return Math.sqrt(Math.pow(e.top-t.top,2)+Math.pow(e.left-t.left,2))/Math.sqrt(Math.pow(e.top-n.top,2)+Math.pow(e.left-n.left,2))*i.animation}var vn=[],hr={initializeByDefault:!0},zn={mount:function(e){for(var n in hr)hr.hasOwnProperty(n)&&!(n in e)&&(e[n]=hr[n]);vn.forEach(function(i){if(i.pluginName===e.pluginName)throw"Sortable: Cannot mount plugin ".concat(e.pluginName," more than once")}),vn.push(e)},pluginEvent:function(e,n,i){var r=this;this.eventCanceled=!1,i.cancel=function(){r.eventCanceled=!0};var o=e+"Global";vn.forEach(function(l){n[l.pluginName]&&(n[l.pluginName][o]&&n[l.pluginName][o](Ot({sortable:n},i)),n.options[l.pluginName]&&n[l.pluginName][e]&&n[l.pluginName][e](Ot({sortable:n},i)))})},initializePlugins:function(e,n,i,r){vn.forEach(function(s){var a=s.pluginName;if(!(!e.options[a]&&!s.initializeByDefault)){var u=new s(e,n,e.options);u.sortable=e,u.options=e.options,e[a]=u,xt(i,u.defaults)}});for(var o in e.options)if(e.options.hasOwnProperty(o)){var l=this.modifyOption(e,o,e.options[o]);typeof l<"u"&&(e.options[o]=l)}},getEventProperties:function(e,n){var i={};return vn.forEach(function(r){typeof r.eventProperties=="function"&&xt(i,r.eventProperties.call(n[r.pluginName],e))}),i},modifyOption:function(e,n,i){var r;return vn.forEach(function(o){e[o.pluginName]&&o.optionListeners&&typeof o.optionListeners[n]=="function"&&(r=o.optionListeners[n].call(e[o.pluginName],i))}),r}};function sf(t){var e=t.sortable,n=t.rootEl,i=t.name,r=t.targetEl,o=t.cloneEl,l=t.toEl,s=t.fromEl,a=t.oldIndex,u=t.newIndex,f=t.oldDraggableIndex,c=t.newDraggableIndex,d=t.originalEvent,m=t.putSortable,h=t.extraEventProperties;if(e=e||n&&n[at],!!e){var g,v=e.options,b="on"+i.charAt(0).toUpperCase()+i.substr(1);window.CustomEvent&&!Bt&&!Hn?g=new CustomEvent(i,{bubbles:!0,cancelable:!0}):(g=document.createEvent("Event"),g.initEvent(i,!0,!0)),g.to=l||n,g.from=s||n,g.item=r||n,g.clone=o,g.oldIndex=a,g.newIndex=u,g.oldDraggableIndex=f,g.newDraggableIndex=c,g.originalEvent=d,g.pullMode=m?m.lastPutMode:void 0;var _=Ot(Ot({},h),zn.getEventProperties(i,e));for(var k in _)g[k]=_[k];n&&n.dispatchEvent(g),v[b]&&v[b].call(e,g)}}var uf=["evt"],lt=function(e,n){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},r=i.evt,o=$u(i,uf);zn.pluginEvent.bind(Q)(e,n,Ot({dragEl:F,parentEl:Te,ghostEl:ie,rootEl:ke,nextEl:Zt,lastDownEl:yi,cloneEl:Ce,cloneHidden:Vt,dragStarted:Gn,putSortable:Xe,activeSortable:Q.active,originalEvent:r,oldIndex:gn,oldDraggableIndex:qn,newIndex:ft,newDraggableIndex:Ut,hideGhostForTarget:La,unhideGhostForTarget:Pa,cloneNowHidden:function(){Vt=!0},cloneNowShown:function(){Vt=!1},dispatchSortableEvent:function(s){$e({sortable:n,name:s,originalEvent:r})}},o))};function $e(t){sf(Ot({putSortable:Xe,cloneEl:Ce,targetEl:F,rootEl:ke,oldIndex:gn,oldDraggableIndex:qn,newIndex:ft,newDraggableIndex:Ut},t))}var F,Te,ie,ke,Zt,yi,Ce,Vt,gn,ft,qn,Ut,wi,Xe,bn=!1,_i=!1,Ei=[],$t,Dt,mr,vr,ka,Sa,Gn,yn,Vn,Un=!1,Di=!1,ki,Ke,gr=[],br=!1,Si=[],Ci=typeof document<"u",Ti=cr,Ca=Hn||Bt?"cssFloat":"float",ff=Ci&&!pa&&!cr&&"draggable"in document.createElement("div"),Ta=function(){if(Ci){if(Bt)return!1;var t=document.createElement("x");return t.style.cssText="pointer-events:auto",t.style.pointerEvents==="auto"}}(),Oa=function(e,n){var i=ee(e),r=parseInt(i.width)-parseInt(i.paddingLeft)-parseInt(i.paddingRight)-parseInt(i.borderLeftWidth)-parseInt(i.borderRightWidth),o=mn(e,0,n),l=mn(e,1,n),s=o&&ee(o),a=l&&ee(l),u=s&&parseInt(s.marginLeft)+parseInt(s.marginRight)+Me(o).width,f=a&&parseInt(a.marginLeft)+parseInt(a.marginRight)+Me(l).width;if(i.display==="flex")return i.flexDirection==="column"||i.flexDirection==="column-reverse"?"vertical":"horizontal";if(i.display==="grid")return i.gridTemplateColumns.split(" ").length<=1?"vertical":"horizontal";if(o&&s.float&&s.float!=="none"){var c=s.float==="left"?"left":"right";return l&&(a.clear==="both"||a.clear===c)?"vertical":"horizontal"}return o&&(s.display==="block"||s.display==="flex"||s.display==="table"||s.display==="grid"||u>=r&&i[Ca]==="none"||l&&i[Ca]==="none"&&u+f>r)?"vertical":"horizontal"},cf=function(e,n,i){var r=i?e.left:e.top,o=i?e.right:e.bottom,l=i?e.width:e.height,s=i?n.left:n.top,a=i?n.right:n.bottom,u=i?n.width:n.height;return r===s||o===a||r+l/2===s+u/2},df=function(e,n){var i;return Ei.some(function(r){var o=r[at].options.emptyInsertThreshold;if(!(!o||dr(r))){var l=Me(r),s=e>=l.left-o&&e<=l.right+o,a=n>=l.top-o&&n<=l.bottom+o;if(s&&a)return i=r}}),i},Aa=function(e){function n(o,l){return function(s,a,u,f){var c=s.options.group.name&&a.options.group.name&&s.options.group.name===a.options.group.name;if(o==null&&(l||c))return!0;if(o==null||o===!1)return!1;if(l&&o==="clone")return o;if(typeof o=="function")return n(o(s,a,u,f),l)(s,a,u,f);var d=(l?s:a).options.group.name;return o===!0||typeof o=="string"&&o===d||o.join&&o.indexOf(d)>-1}}var i={},r=e.group;(!r||gi(r)!="object")&&(r={name:r}),i.name=r.name,i.checkPull=n(r.pull,!0),i.checkPut=n(r.put),i.revertClone=r.revertClone,e.group=i},La=function(){!Ta&&ie&&ee(ie,"display","none")},Pa=function(){!Ta&&ie&&ee(ie,"display","")};Ci&&!pa&&document.addEventListener("click",function(t){if(_i)return t.preventDefault(),t.stopPropagation&&t.stopPropagation(),t.stopImmediatePropagation&&t.stopImmediatePropagation(),_i=!1,!1},!0);var en=function(e){if(F){e=e.touches?e.touches[0]:e;var n=df(e.clientX,e.clientY);if(n){var i={};for(var r in e)e.hasOwnProperty(r)&&(i[r]=e[r]);i.target=i.rootEl=n,i.preventDefault=void 0,i.stopPropagation=void 0,n[at]._onDragOver(i)}}},pf=function(e){F&&F.parentNode[at]._isOutsideThisEl(e.target)};function Q(t,e){if(!(t&&t.nodeType&&t.nodeType===1))throw"Sortable: `el` must be an HTMLElement, not ".concat({}.toString.call(t));this.el=t,this.options=e=xt({},e),t[at]=this;var n={group:null,sort:!0,disabled:!1,store:null,handle:null,draggable:/^[uo]l$/i.test(t.nodeName)?">li":">*",swapThreshold:1,invertSwap:!1,invertedSwapThreshold:null,removeCloneOnHide:!0,direction:function(){return Oa(t,this.options)},ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",dragClass:"sortable-drag",ignore:"a, img",filter:null,preventOnFilter:!0,animation:0,easing:null,setData:function(l,s){l.setData("Text",s.textContent)},dropBubble:!1,dragoverBubble:!1,dataIdAttr:"data-id",delay:0,delayOnTouchOnly:!1,touchStartThreshold:(Number.parseInt?Number:window).parseInt(window.devicePixelRatio,10)||1,forceFallback:!1,fallbackClass:"sortable-fallback",fallbackOnBody:!1,fallbackTolerance:0,fallbackOffset:{x:0,y:0},supportPointer:Q.supportPointer!==!1&&"PointerEvent"in window&&(!jn||cr),emptyInsertThreshold:5};zn.initializePlugins(this,t,n);for(var i in n)!(i in e)&&(e[i]=n[i]);Aa(e);for(var r in this)r.charAt(0)==="_"&&typeof this[r]=="function"&&(this[r]=this[r].bind(this));this.nativeDraggable=e.forceFallback?!1:ff,this.nativeDraggable&&(this.options.touchStartThreshold=1),e.supportPointer?de(t,"pointerdown",this._onTapStart):(de(t,"mousedown",this._onTapStart),de(t,"touchstart",this._onTapStart)),this.nativeDraggable&&(de(t,"dragover",this),de(t,"dragenter",this)),Ei.push(this.el),e.store&&e.store.get&&this.sort(e.store.get(this)||[]),xt(this,of())}Q.prototype={constructor:Q,_isOutsideThisEl:function(e){!this.el.contains(e)&&e!==this.el&&(yn=null)},_getDirection:function(e,n){return typeof this.options.direction=="function"?this.options.direction.call(this,e,n,F):this.options.direction},_onTapStart:function(e){if(e.cancelable){var n=this,i=this.el,r=this.options,o=r.preventOnFilter,l=e.type,s=e.touches&&e.touches[0]||e.pointerType&&e.pointerType==="touch"&&e,a=(s||e).target,u=e.target.shadowRoot&&(e.path&&e.path[0]||e.composedPath&&e.composedPath()[0])||a,f=r.filter;if(_f(i),!F&&!(/mousedown|pointerdown/.test(l)&&e.button!==0||r.disabled)&&!u.isContentEditable&&!(!this.nativeDraggable&&jn&&a&&a.tagName.toUpperCase()==="SELECT")&&(a=Et(a,r.draggable,i,!1),!(a&&a.animated)&&yi!==a)){if(gn=bt(a),qn=bt(a,r.draggable),typeof f=="function"){if(f.call(this,e,a,this)){$e({sortable:n,rootEl:u,name:"filter",targetEl:a,toEl:i,fromEl:i}),lt("filter",n,{evt:e}),o&&e.preventDefault();return}}else if(f&&(f=f.split(",").some(function(c){if(c=Et(u,c.trim(),i,!1),c)return $e({sortable:n,rootEl:c,name:"filter",targetEl:a,fromEl:i,toEl:i}),lt("filter",n,{evt:e}),!0}),f)){o&&e.preventDefault();return}r.handle&&!Et(u,r.handle,i,!1)||this._prepareDragStart(e,s,a)}}},_prepareDragStart:function(e,n,i){var r=this,o=r.el,l=r.options,s=o.ownerDocument,a;if(i&&!F&&i.parentNode===o){var u=Me(i);if(ke=o,F=i,Te=F.parentNode,Zt=F.nextSibling,yi=i,wi=l.group,Q.dragged=F,$t={target:F,clientX:(n||e).clientX,clientY:(n||e).clientY},ka=$t.clientX-u.left,Sa=$t.clientY-u.top,this._lastX=(n||e).clientX,this._lastY=(n||e).clientY,F.style["will-change"]="all",a=function(){if(lt("delayEnded",r,{evt:e}),Q.eventCanceled){r._onDrop();return}r._disableDelayedDragEvents(),!da&&r.nativeDraggable&&(F.draggable=!0),r._triggerDragStart(e,n),$e({sortable:r,name:"choose",originalEvent:e}),ut(F,l.chosenClass,!0)},l.ignore.split(",").forEach(function(f){ga(F,f.trim(),yr)}),de(s,"dragover",en),de(s,"mousemove",en),de(s,"touchmove",en),l.supportPointer?(de(s,"pointerup",r._onDrop),!this.nativeDraggable&&de(s,"pointercancel",r._onDrop)):(de(s,"mouseup",r._onDrop),de(s,"touchend",r._onDrop),de(s,"touchcancel",r._onDrop)),da&&this.nativeDraggable&&(this.options.touchStartThreshold=4,F.draggable=!0),lt("delayStart",this,{evt:e}),l.delay&&(!l.delayOnTouchOnly||n)&&(!this.nativeDraggable||!(Hn||Bt))){if(Q.eventCanceled){this._onDrop();return}l.supportPointer?(de(s,"pointerup",r._disableDelayedDrag),de(s,"pointercancel",r._disableDelayedDrag)):(de(s,"mouseup",r._disableDelayedDrag),de(s,"touchend",r._disableDelayedDrag),de(s,"touchcancel",r._disableDelayedDrag)),de(s,"mousemove",r._delayedDragTouchMoveHandler),de(s,"touchmove",r._delayedDragTouchMoveHandler),l.supportPointer&&de(s,"pointermove",r._delayedDragTouchMoveHandler),r._dragStartTimer=setTimeout(a,l.delay)}else a()}},_delayedDragTouchMoveHandler:function(e){var n=e.touches?e.touches[0]:e;Math.max(Math.abs(n.clientX-this._lastX),Math.abs(n.clientY-this._lastY))>=Math.floor(this.options.touchStartThreshold/(this.nativeDraggable&&window.devicePixelRatio||1))&&this._disableDelayedDrag()},_disableDelayedDrag:function(){F&&yr(F),clearTimeout(this._dragStartTimer),this._disableDelayedDragEvents()},_disableDelayedDragEvents:function(){var e=this.el.ownerDocument;ce(e,"mouseup",this._disableDelayedDrag),ce(e,"touchend",this._disableDelayedDrag),ce(e,"touchcancel",this._disableDelayedDrag),ce(e,"pointerup",this._disableDelayedDrag),ce(e,"pointercancel",this._disableDelayedDrag),ce(e,"mousemove",this._delayedDragTouchMoveHandler),ce(e,"touchmove",this._delayedDragTouchMoveHandler),ce(e,"pointermove",this._delayedDragTouchMoveHandler)},_triggerDragStart:function(e,n){n=n||e.pointerType=="touch"&&e,!this.nativeDraggable||n?this.options.supportPointer?de(document,"pointermove",this._onTouchMove):n?de(document,"touchmove",this._onTouchMove):de(document,"mousemove",this._onTouchMove):(de(F,"dragend",this),de(ke,"dragstart",this._onDragStart));try{document.selection?Ai(function(){document.selection.empty()}):window.getSelection().removeAllRanges()}catch{}},_dragStarted:function(e,n){if(bn=!1,ke&&F){lt("dragStarted",this,{evt:n}),this.nativeDraggable&&de(document,"dragover",pf);var i=this.options;!e&&ut(F,i.dragClass,!1),ut(F,i.ghostClass,!0),Q.active=this,e&&this._appendGhost(),$e({sortable:this,name:"start",originalEvent:n})}else this._nulling()},_emulateDragOver:function(){if(Dt){this._lastX=Dt.clientX,this._lastY=Dt.clientY,La();for(var e=document.elementFromPoint(Dt.clientX,Dt.clientY),n=e;e&&e.shadowRoot&&(e=e.shadowRoot.elementFromPoint(Dt.clientX,Dt.clientY),e!==n);)n=e;if(F.parentNode[at]._isOutsideThisEl(e),n)do{if(n[at]){var i=void 0;if(i=n[at]._onDragOver({clientX:Dt.clientX,clientY:Dt.clientY,target:e,rootEl:n}),i&&!this.options.dragoverBubble)break}e=n}while(n=ma(n));Pa()}},_onTouchMove:function(e){if($t){var n=this.options,i=n.fallbackTolerance,r=n.fallbackOffset,o=e.touches?e.touches[0]:e,l=ie&&hn(ie,!0),s=ie&&l&&l.a,a=ie&&l&&l.d,u=Ti&&Ke&&ya(Ke),f=(o.clientX-$t.clientX+r.x)/(s||1)+(u?u[0]-gr[0]:0)/(s||1),c=(o.clientY-$t.clientY+r.y)/(a||1)+(u?u[1]-gr[1]:0)/(a||1);if(!Q.active&&!bn){if(i&&Math.max(Math.abs(o.clientX-this._lastX),Math.abs(o.clientY-this._lastY))<i)return;this._onDragStart(e,!0)}if(ie){l?(l.e+=f-(mr||0),l.f+=c-(vr||0)):l={a:1,b:0,c:0,d:1,e:f,f:c};var d="matrix(".concat(l.a,",").concat(l.b,",").concat(l.c,",").concat(l.d,",").concat(l.e,",").concat(l.f,")");ee(ie,"webkitTransform",d),ee(ie,"mozTransform",d),ee(ie,"msTransform",d),ee(ie,"transform",d),mr=f,vr=c,Dt=o}e.cancelable&&e.preventDefault()}},_appendGhost:function(){if(!ie){var e=this.options.fallbackOnBody?document.body:ke,n=Me(F,!0,Ti,!0,e),i=this.options;if(Ti){for(Ke=e;ee(Ke,"position")==="static"&&ee(Ke,"transform")==="none"&&Ke!==document;)Ke=Ke.parentNode;Ke!==document.body&&Ke!==document.documentElement?(Ke===document&&(Ke=At()),n.top+=Ke.scrollTop,n.left+=Ke.scrollLeft):Ke=At(),gr=ya(Ke)}ie=F.cloneNode(!0),ut(ie,i.ghostClass,!1),ut(ie,i.fallbackClass,!0),ut(ie,i.dragClass,!0),ee(ie,"transition",""),ee(ie,"transform",""),ee(ie,"box-sizing","border-box"),ee(ie,"margin",0),ee(ie,"top",n.top),ee(ie,"left",n.left),ee(ie,"width",n.width),ee(ie,"height",n.height),ee(ie,"opacity","0.8"),ee(ie,"position",Ti?"absolute":"fixed"),ee(ie,"zIndex","100000"),ee(ie,"pointerEvents","none"),Q.ghost=ie,e.appendChild(ie),ee(ie,"transform-origin",ka/parseInt(ie.style.width)*100+"% "+Sa/parseInt(ie.style.height)*100+"%")}},_onDragStart:function(e,n){var i=this,r=e.dataTransfer,o=i.options;if(lt("dragStart",this,{evt:e}),Q.eventCanceled){this._onDrop();return}lt("setupClone",this),Q.eventCanceled||(Ce=Ea(F),Ce.removeAttribute("id"),Ce.draggable=!1,Ce.style["will-change"]="",this._hideClone(),ut(Ce,this.options.chosenClass,!1),Q.clone=Ce),i.cloneId=Ai(function(){lt("clone",i),!Q.eventCanceled&&(i.options.removeCloneOnHide||ke.insertBefore(Ce,F),i._hideClone(),$e({sortable:i,name:"clone"}))}),!n&&ut(F,o.dragClass,!0),n?(_i=!0,i._loopId=setInterval(i._emulateDragOver,50)):(ce(document,"mouseup",i._onDrop),ce(document,"touchend",i._onDrop),ce(document,"touchcancel",i._onDrop),r&&(r.effectAllowed="move",o.setData&&o.setData.call(i,r,F)),de(document,"drop",i),ee(F,"transform","translateZ(0)")),bn=!0,i._dragStartId=Ai(i._dragStarted.bind(i,n,e)),de(document,"selectstart",i),Gn=!0,window.getSelection().removeAllRanges(),jn&&ee(document.body,"user-select","none")},_onDragOver:function(e){var n=this.el,i=e.target,r,o,l,s=this.options,a=s.group,u=Q.active,f=wi===a,c=s.sort,d=Xe||u,m,h=this,g=!1;if(br)return;function v(se,He){lt(se,h,Ot({evt:e,isOwner:f,axis:m?"vertical":"horizontal",revert:l,dragRect:r,targetRect:o,canSort:c,fromSortable:d,target:i,completed:_,onMove:function(Pe,xe){return Oi(ke,n,F,r,Pe,Me(Pe),e,xe)},changed:k},He))}function b(){v("dragOverAnimationCapture"),h.captureAnimationState(),h!==d&&d.captureAnimationState()}function _(se){return v("dragOverCompleted",{insertion:se}),se&&(f?u._hideClone():u._showClone(h),h!==d&&(ut(F,Xe?Xe.options.ghostClass:u.options.ghostClass,!1),ut(F,s.ghostClass,!0)),Xe!==h&&h!==Q.active?Xe=h:h===Q.active&&Xe&&(Xe=null),d===h&&(h._ignoreWhileAnimating=i),h.animateAll(function(){v("dragOverAnimationComplete"),h._ignoreWhileAnimating=null}),h!==d&&(d.animateAll(),d._ignoreWhileAnimating=null)),(i===F&&!F.animated||i===n&&!i.animated)&&(yn=null),!s.dragoverBubble&&!e.rootEl&&i!==document&&(F.parentNode[at]._isOutsideThisEl(e.target),!se&&en(e)),!s.dragoverBubble&&e.stopPropagation&&e.stopPropagation(),g=!0}function k(){ft=bt(F),Ut=bt(F,s.draggable),$e({sortable:h,name:"change",toEl:n,newIndex:ft,newDraggableIndex:Ut,originalEvent:e})}if(e.preventDefault!==void 0&&e.cancelable&&e.preventDefault(),i=Et(i,s.draggable,n,!0),v("dragOver"),Q.eventCanceled)return g;if(F.contains(e.target)||i.animated&&i.animatingX&&i.animatingY||h._ignoreWhileAnimating===i)return _(!1);if(_i=!1,u&&!s.disabled&&(f?c||(l=Te!==ke):Xe===this||(this.lastPutMode=wi.checkPull(this,u,F,e))&&a.checkPut(this,u,F,e))){if(m=this._getDirection(e,i)==="vertical",r=Me(F),v("dragOverValid"),Q.eventCanceled)return g;if(l)return Te=ke,b(),this._hideClone(),v("revert"),Q.eventCanceled||(Zt?ke.insertBefore(F,Zt):ke.appendChild(F)),_(!0);var p=dr(n,s.draggable);if(!p||gf(e,m,this)&&!p.animated){if(p===F)return _(!1);if(p&&n===e.target&&(i=p),i&&(o=Me(i)),Oi(ke,n,F,r,i,o,e,!!i)!==!1)return b(),p&&p.nextSibling?n.insertBefore(F,p.nextSibling):n.appendChild(F),Te=n,k(),_(!0)}else if(p&&vf(e,m,this)){var T=mn(n,0,s,!0);if(T===F)return _(!1);if(i=T,o=Me(i),Oi(ke,n,F,r,i,o,e,!1)!==!1)return b(),n.insertBefore(F,T),Te=n,k(),_(!0)}else if(i.parentNode===n){o=Me(i);var E=0,A,O=F.parentNode!==n,w=!cf(F.animated&&F.toRect||r,i.animated&&i.toRect||o,m),S=m?"top":"left",P=ba(i,"top","top")||ba(F,"top","top"),N=P?P.scrollTop:void 0;yn!==i&&(A=o[S],Un=!1,Di=!w&&s.invertSwap||O),E=bf(e,i,o,m,w?1:s.swapThreshold,s.invertedSwapThreshold==null?s.swapThreshold:s.invertedSwapThreshold,Di,yn===i);var z;if(E!==0){var K=bt(F);do K-=E,z=Te.children[K];while(z&&(ee(z,"display")==="none"||z===ie))}if(E===0||z===i)return _(!1);yn=i,Vn=E;var R=i.nextElementSibling,H=!1;H=E===1;var ae=Oi(ke,n,F,r,i,o,e,H);if(ae!==!1)return(ae===1||ae===-1)&&(H=ae===1),br=!0,setTimeout(mf,30),b(),H&&!R?n.appendChild(F):i.parentNode.insertBefore(F,H?R:i),P&&_a(P,0,N-P.scrollTop),Te=F.parentNode,A!==void 0&&!Di&&(ki=Math.abs(A-Me(i)[S])),k(),_(!0)}if(n.contains(F))return _(!1)}return!1},_ignoreWhileAnimating:null,_offMoveEvents:function(){ce(document,"mousemove",this._onTouchMove),ce(document,"touchmove",this._onTouchMove),ce(document,"pointermove",this._onTouchMove),ce(document,"dragover",en),ce(document,"mousemove",en),ce(document,"touchmove",en)},_offUpEvents:function(){var e=this.el.ownerDocument;ce(e,"mouseup",this._onDrop),ce(e,"touchend",this._onDrop),ce(e,"pointerup",this._onDrop),ce(e,"pointercancel",this._onDrop),ce(e,"touchcancel",this._onDrop),ce(document,"selectstart",this)},_onDrop:function(e){var n=this.el,i=this.options;if(ft=bt(F),Ut=bt(F,i.draggable),lt("drop",this,{evt:e}),Te=F&&F.parentNode,ft=bt(F),Ut=bt(F,i.draggable),Q.eventCanceled){this._nulling();return}bn=!1,Di=!1,Un=!1,clearInterval(this._loopId),clearTimeout(this._dragStartTimer),wr(this.cloneId),wr(this._dragStartId),this.nativeDraggable&&(ce(document,"drop",this),ce(n,"dragstart",this._onDragStart)),this._offMoveEvents(),this._offUpEvents(),jn&&ee(document.body,"user-select",""),ee(F,"transform",""),e&&(Gn&&(e.cancelable&&e.preventDefault(),!i.dropBubble&&e.stopPropagation()),ie&&ie.parentNode&&ie.parentNode.removeChild(ie),(ke===Te||Xe&&Xe.lastPutMode!=="clone")&&Ce&&Ce.parentNode&&Ce.parentNode.removeChild(Ce),F&&(this.nativeDraggable&&ce(F,"dragend",this),yr(F),F.style["will-change"]="",Gn&&!bn&&ut(F,Xe?Xe.options.ghostClass:this.options.ghostClass,!1),ut(F,this.options.chosenClass,!1),$e({sortable:this,name:"unchoose",toEl:Te,newIndex:null,newDraggableIndex:null,originalEvent:e}),ke!==Te?(ft>=0&&($e({rootEl:Te,name:"add",toEl:Te,fromEl:ke,originalEvent:e}),$e({sortable:this,name:"remove",toEl:Te,originalEvent:e}),$e({rootEl:Te,name:"sort",toEl:Te,fromEl:ke,originalEvent:e}),$e({sortable:this,name:"sort",toEl:Te,originalEvent:e})),Xe&&Xe.save()):ft!==gn&&ft>=0&&($e({sortable:this,name:"update",toEl:Te,originalEvent:e}),$e({sortable:this,name:"sort",toEl:Te,originalEvent:e})),Q.active&&((ft==null||ft===-1)&&(ft=gn,Ut=qn),$e({sortable:this,name:"end",toEl:Te,originalEvent:e}),this.save()))),this._nulling()},_nulling:function(){lt("nulling",this),ke=F=Te=ie=Zt=Ce=yi=Vt=$t=Dt=Gn=ft=Ut=gn=qn=yn=Vn=Xe=wi=Q.dragged=Q.ghost=Q.clone=Q.active=null,Si.forEach(function(e){e.checked=!0}),Si.length=mr=vr=0},handleEvent:function(e){switch(e.type){case"drop":case"dragend":this._onDrop(e);break;case"dragenter":case"dragover":F&&(this._onDragOver(e),hf(e));break;case"selectstart":e.preventDefault();break}},toArray:function(){for(var e=[],n,i=this.el.children,r=0,o=i.length,l=this.options;r<o;r++)n=i[r],Et(n,l.draggable,this.el,!1)&&e.push(n.getAttribute(l.dataIdAttr)||wf(n));return e},sort:function(e,n){var i={},r=this.el;this.toArray().forEach(function(o,l){var s=r.children[l];Et(s,this.options.draggable,r,!1)&&(i[o]=s)},this),n&&this.captureAnimationState(),e.forEach(function(o){i[o]&&(r.removeChild(i[o]),r.appendChild(i[o]))}),n&&this.animateAll()},save:function(){var e=this.options.store;e&&e.set&&e.set(this)},closest:function(e,n){return Et(e,n||this.options.draggable,this.el,!1)},option:function(e,n){var i=this.options;if(n===void 0)return i[e];var r=zn.modifyOption(this,e,n);typeof r<"u"?i[e]=r:i[e]=n,e==="group"&&Aa(i)},destroy:function(){lt("destroy",this);var e=this.el;e[at]=null,ce(e,"mousedown",this._onTapStart),ce(e,"touchstart",this._onTapStart),ce(e,"pointerdown",this._onTapStart),this.nativeDraggable&&(ce(e,"dragover",this),ce(e,"dragenter",this)),Array.prototype.forEach.call(e.querySelectorAll("[draggable]"),function(n){n.removeAttribute("draggable")}),this._onDrop(),this._disableDelayedDragEvents(),Ei.splice(Ei.indexOf(this.el),1),this.el=e=null},_hideClone:function(){if(!Vt){if(lt("hideClone",this),Q.eventCanceled)return;ee(Ce,"display","none"),this.options.removeCloneOnHide&&Ce.parentNode&&Ce.parentNode.removeChild(Ce),Vt=!0}},_showClone:function(e){if(e.lastPutMode!=="clone"){this._hideClone();return}if(Vt){if(lt("showClone",this),Q.eventCanceled)return;F.parentNode==ke&&!this.options.group.revertClone?ke.insertBefore(Ce,F):Zt?ke.insertBefore(Ce,Zt):ke.appendChild(Ce),this.options.group.revertClone&&this.animate(F,Ce),ee(Ce,"display",""),Vt=!1}}};function hf(t){t.dataTransfer&&(t.dataTransfer.dropEffect="move"),t.cancelable&&t.preventDefault()}function Oi(t,e,n,i,r,o,l,s){var a,u=t[at],f=u.options.onMove,c;return window.CustomEvent&&!Bt&&!Hn?a=new CustomEvent("move",{bubbles:!0,cancelable:!0}):(a=document.createEvent("Event"),a.initEvent("move",!0,!0)),a.to=e,a.from=t,a.dragged=n,a.draggedRect=i,a.related=r||e,a.relatedRect=o||Me(e),a.willInsertAfter=s,a.originalEvent=l,t.dispatchEvent(a),f&&(c=f.call(u,a,l)),c}function yr(t){t.draggable=!1}function mf(){br=!1}function vf(t,e,n){var i=Me(mn(n.el,0,n.options,!0)),r=Da(n.el,n.options,ie),o=10;return e?t.clientX<r.left-o||t.clientY<i.top&&t.clientX<i.right:t.clientY<r.top-o||t.clientY<i.bottom&&t.clientX<i.left}function gf(t,e,n){var i=Me(dr(n.el,n.options.draggable)),r=Da(n.el,n.options,ie),o=10;return e?t.clientX>r.right+o||t.clientY>i.bottom&&t.clientX>i.left:t.clientY>r.bottom+o||t.clientX>i.right&&t.clientY>i.top}function bf(t,e,n,i,r,o,l,s){var a=i?t.clientY:t.clientX,u=i?n.height:n.width,f=i?n.top:n.left,c=i?n.bottom:n.right,d=!1;if(!l){if(s&&ki<u*r){if(!Un&&(Vn===1?a>f+u*o/2:a<c-u*o/2)&&(Un=!0),Un)d=!0;else if(Vn===1?a<f+ki:a>c-ki)return-Vn}else if(a>f+u*(1-r)/2&&a<c-u*(1-r)/2)return yf(e)}return d=d||l,d&&(a<f+u*o/2||a>c-u*o/2)?a>f+u/2?1:-1:0}function yf(t){return bt(F)<bt(t)?1:-1}function wf(t){for(var e=t.tagName+t.className+t.src+t.href+t.textContent,n=e.length,i=0;n--;)i+=e.charCodeAt(n);return i.toString(36)}function _f(t){Si.length=0;for(var e=t.getElementsByTagName("input"),n=e.length;n--;){var i=e[n];i.checked&&Si.push(i)}}function Ai(t){return setTimeout(t,0)}function wr(t){return clearTimeout(t)}Ci&&de(document,"touchmove",function(t){(Q.active||bn)&&t.cancelable&&t.preventDefault()}),Q.utils={on:de,off:ce,css:ee,find:ga,is:function(e,n){return!!Et(e,n,e,!1)},extend:nf,throttle:wa,closest:Et,toggleClass:ut,clone:Ea,index:bt,nextTick:Ai,cancelNextTick:wr,detectDirection:Oa,getChild:mn,expando:at},Q.get=function(t){return t[at]},Q.mount=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];e[0].constructor===Array&&(e=e[0]),e.forEach(function(i){if(!i.prototype||!i.prototype.constructor)throw"Sortable: Mounted plugin must be a constructor function, not ".concat({}.toString.call(i));i.utils&&(Q.utils=Ot(Ot({},Q.utils),i.utils)),zn.mount(i)})},Q.create=function(t,e){return new Q(t,e)},Q.version=ef;var Re=[],Xn,_r,Er=!1,Dr,kr,Li,Yn;function Ef(){function t(){this.defaults={scroll:!0,forceAutoScrollFallback:!1,scrollSensitivity:30,scrollSpeed:10,bubbleScroll:!0};for(var e in this)e.charAt(0)==="_"&&typeof this[e]=="function"&&(this[e]=this[e].bind(this))}return t.prototype={dragStarted:function(n){var i=n.originalEvent;this.sortable.nativeDraggable?de(document,"dragover",this._handleAutoScroll):this.options.supportPointer?de(document,"pointermove",this._handleFallbackAutoScroll):i.touches?de(document,"touchmove",this._handleFallbackAutoScroll):de(document,"mousemove",this._handleFallbackAutoScroll)},dragOverCompleted:function(n){var i=n.originalEvent;!this.options.dragOverBubble&&!i.rootEl&&this._handleAutoScroll(i)},drop:function(){this.sortable.nativeDraggable?ce(document,"dragover",this._handleAutoScroll):(ce(document,"pointermove",this._handleFallbackAutoScroll),ce(document,"touchmove",this._handleFallbackAutoScroll),ce(document,"mousemove",this._handleFallbackAutoScroll)),Ia(),Pi(),rf()},nulling:function(){Li=_r=Xn=Er=Yn=Dr=kr=null,Re.length=0},_handleFallbackAutoScroll:function(n){this._handleAutoScroll(n,!0)},_handleAutoScroll:function(n,i){var r=this,o=(n.touches?n.touches[0]:n).clientX,l=(n.touches?n.touches[0]:n).clientY,s=document.elementFromPoint(o,l);if(Li=n,i||this.options.forceAutoScrollFallback||Hn||Bt||jn){Sr(n,this.options,s,i);var a=Gt(s,!0);Er&&(!Yn||o!==Dr||l!==kr)&&(Yn&&Ia(),Yn=setInterval(function(){var u=Gt(document.elementFromPoint(o,l),!0);u!==a&&(a=u,Pi()),Sr(n,r.options,u,i)},10),Dr=o,kr=l)}else{if(!this.options.bubbleScroll||Gt(s,!0)===At()){Pi();return}Sr(n,this.options,Gt(s,!1),!1)}}},xt(t,{pluginName:"scroll",initializeByDefault:!0})}function Pi(){Re.forEach(function(t){clearInterval(t.pid)}),Re=[]}function Ia(){clearInterval(Yn)}var Sr=wa(function(t,e,n,i){if(e.scroll){var r=(t.touches?t.touches[0]:t).clientX,o=(t.touches?t.touches[0]:t).clientY,l=e.scrollSensitivity,s=e.scrollSpeed,a=At(),u=!1,f;_r!==n&&(_r=n,Pi(),Xn=e.scroll,f=e.scrollFn,Xn===!0&&(Xn=Gt(n,!0)));var c=0,d=Xn;do{var m=d,h=Me(m),g=h.top,v=h.bottom,b=h.left,_=h.right,k=h.width,p=h.height,T=void 0,E=void 0,A=m.scrollWidth,O=m.scrollHeight,w=ee(m),S=m.scrollLeft,P=m.scrollTop;m===a?(T=k<A&&(w.overflowX==="auto"||w.overflowX==="scroll"||w.overflowX==="visible"),E=p<O&&(w.overflowY==="auto"||w.overflowY==="scroll"||w.overflowY==="visible")):(T=k<A&&(w.overflowX==="auto"||w.overflowX==="scroll"),E=p<O&&(w.overflowY==="auto"||w.overflowY==="scroll"));var N=T&&(Math.abs(_-r)<=l&&S+k<A)-(Math.abs(b-r)<=l&&!!S),z=E&&(Math.abs(v-o)<=l&&P+p<O)-(Math.abs(g-o)<=l&&!!P);if(!Re[c])for(var K=0;K<=c;K++)Re[K]||(Re[K]={});(Re[c].vx!=N||Re[c].vy!=z||Re[c].el!==m)&&(Re[c].el=m,Re[c].vx=N,Re[c].vy=z,clearInterval(Re[c].pid),(N!=0||z!=0)&&(u=!0,Re[c].pid=setInterval((function(){i&&this.layer===0&&Q.active._onTouchMove(Li);var R=Re[this.layer].vy?Re[this.layer].vy*s:0,H=Re[this.layer].vx?Re[this.layer].vx*s:0;typeof f=="function"&&f.call(Q.dragged.parentNode[at],H,R,t,Li,Re[this.layer].el)!=="continue"||_a(Re[this.layer].el,H,R)}).bind({layer:c}),24))),c++}while(e.bubbleScroll&&d!==a&&(d=Gt(d,!1)));Er=u}},30),Na=function(e){var n=e.originalEvent,i=e.putSortable,r=e.dragEl,o=e.activeSortable,l=e.dispatchSortableEvent,s=e.hideGhostForTarget,a=e.unhideGhostForTarget;if(n){var u=i||o;s();var f=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:n,c=document.elementFromPoint(f.clientX,f.clientY);a(),u&&!u.el.contains(c)&&(l("spill"),this.onSpill({dragEl:r,putSortable:i}))}};function Cr(){}Cr.prototype={startIndex:null,dragStart:function(e){var n=e.oldDraggableIndex;this.startIndex=n},onSpill:function(e){var n=e.dragEl,i=e.putSortable;this.sortable.captureAnimationState(),i&&i.captureAnimationState();var r=mn(this.sortable.el,this.startIndex,this.options);r?this.sortable.el.insertBefore(n,r):this.sortable.el.appendChild(n),this.sortable.animateAll(),i&&i.animateAll()},drop:Na},xt(Cr,{pluginName:"revertOnSpill"});function Tr(){}Tr.prototype={onSpill:function(e){var n=e.dragEl,i=e.putSortable,r=i||this.sortable;r.captureAnimationState(),n.parentNode&&n.parentNode.removeChild(n),r.animateAll()},drop:Na},xt(Tr,{pluginName:"removeOnSpill"}),Q.mount(new Ef),Q.mount(Tr,Cr);function Ma(t,e,n){const i=t.slice();return i[16]=e[n],i}function Ra(t,e,n){const i=t.slice();return i[19]=e[n],i}function xa(t,e,n){const i=t.slice();return i[22]=e[n],i}function Fa(t){let e,n,i,r;function o(){return t[11](t[22])}return{c(){e=C("div"),n=C("a"),n.innerHTML='<i class="fas fa-pencil-alt fa-sm"></i>',y(n,"href","javascript:"),y(n,"data-action","editField"),y(n,"class","edit-field svelte-1azk92t"),y(e,"class","right svelte-1azk92t")},m(l,s){U(l,e,s),D(e,n),i||(r=me(n,"click",o),i=!0)},p(l,s){t=l},d(l){l&&V(e),i=!1,r()}}}function Ba(t,e){let n,i,r,o=e[22].label+"",l,s,a,u=e[2].editable&&Fa(e),f=[e[10](e[22])],c={};for(let d=0;d<f.length;d+=1)c=In(c,f[d]);return{key:t,first:null,c(){n=C("li"),i=C("div"),r=C("label"),l=_e(o),s=W(),u&&u.c(),a=W(),y(r,"class","svelte-1azk92t"),y(i,"class","left svelte-1azk92t"),zt(n,c),be(n,"svelte-1azk92t",!0),this.first=n},m(d,m){U(d,n,m),D(n,i),D(i,r),D(r,l),D(n,s),u&&u.m(n,null),D(n,a)},p(d,m){e=d,m&1&&o!==(o=e[22].label+"")&&Je(l,o),e[2].editable?u?u.p(e,m):(u=Fa(e),u.c(),u.m(n,a)):u&&(u.d(1),u=null),zt(n,c=hi(f,[m&1&&e[10](e[22])])),be(n,"svelte-1azk92t",!0)},d(d){d&&V(n),u&&u.d()}}}function Ha(t){let e,n=B.translate(t[16].name,"scopeNames")+"",i;return{c(){e=C("span"),i=_e(n),y(e,"class","title svelte-1azk92t")},m(r,o){U(r,e,o),D(e,i)},p(r,o){o&2&&n!==(n=B.translate(r[16].name,"scopeNames")+"")&&Je(i,n)},d(r){r&&V(e)}}}function ja(t,e){let n,i,r,o=e[19].label+"",l,s,a=[e[10](e[19])],u={};for(let f=0;f<a.length;f+=1)u=In(u,a[f]);return{key:t,first:null,c(){n=C("li"),i=C("div"),r=C("label"),l=_e(o),s=W(),y(r,"class","svelte-1azk92t"),y(i,"class","left svelte-1azk92t"),zt(n,u),be(n,"svelte-1azk92t",!0),this.first=n},m(f,c){U(f,n,c),D(n,i),D(i,r),D(r,l),D(n,s)},p(f,c){e=f,c&2&&o!==(o=e[19].label+"")&&Je(l,o),zt(n,u=hi(a,[c&2&&e[10](e[19])])),be(n,"svelte-1azk92t",!0)},d(f){f&&V(n)}}}function Wa(t,e){let n,i,r,o=[],l=new Map,s,a,u=e[1].length>1&&Ha(e),f=Ee(e[16].fields);const c=d=>d[19].name;for(let d=0;d<f.length;d+=1){let m=Ra(e,f,d),h=c(m);l.set(h,o[d]=ja(h,m))}return{key:t,first:null,c(){n=C("div"),u&&u.c(),i=W(),r=C("ul");for(let d=0;d<o.length;d+=1)o[d].c();a=W(),y(r,"class","disabled connected svelte-1azk92t"),y(r,"data-name",s=e[16].name),y(n,"class","svelte-1azk92t"),be(n,"group",e[1].length>1),this.first=n},m(d,m){U(d,n,m),u&&u.m(n,null),D(n,i),D(n,r);for(let h=0;h<o.length;h+=1)o[h]&&o[h].m(r,null);D(n,a)},p(d,m){e=d,e[1].length>1?u?u.p(e,m):(u=Ha(e),u.c(),u.m(n,i)):u&&(u.d(1),u=null),m&1026&&(f=Ee(e[16].fields),o=Rt(o,m,c,1,e,f,l,r,Mt,ja,null,Ra)),m&2&&s!==(s=e[16].name)&&y(r,"data-name",s),m&2&&be(n,"group",e[1].length>1)},d(d){d&&V(n),u&&u.d();for(let m=0;m<o.length;m+=1)o[m].d()}}}function Df(t){let e,n,i,r,o,l,s,a=[],u=new Map,f,c,d,m,h,g,v,b,_=[],k=new Map,p=Ee(t[0].sort(qa));const T=O=>O[22].name;for(let O=0;O<p.length;O+=1){let w=xa(t,p,O),S=T(w);u.set(S,a[O]=Ba(S,w))}let E=Ee(t[1]);const A=O=>O[16].name;for(let O=0;O<E.length;O+=1){let w=Ma(t,E,O),S=A(w);k.set(S,_[O]=Wa(S,w))}return{c(){e=C("div"),n=C("div"),i=C("div"),r=C("header"),r.textContent=`${B.translate("Selected","labels","Admin")}`,o=W(),l=C("div"),s=C("ul");for(let O=0;O<a.length;O+=1)a[O].c();f=W(),c=C("div"),d=W(),m=C("div"),h=C("div"),g=C("header"),g.textContent=`${B.translate("Available","labels","Admin")}`,v=W(),b=C("div");for(let O=0;O<_.length;O+=1)_[O].c();y(r,"class","svelte-1azk92t"),y(s,"class","enabled connected svelte-1azk92t"),y(l,"class","rows-wrapper svelte-1azk92t"),y(i,"class","well svelte-1azk92t"),y(n,"class","col-sm-5 svelte-1azk92t"),y(c,"class","col-sm-1 svelte-1azk92t"),we(c,"width","35px"),y(g,"class","svelte-1azk92t"),y(b,"class","rows-wrapper svelte-1azk92t"),y(h,"class","well svelte-1azk92t"),y(m,"class","col-sm-5 svelte-1azk92t"),y(e,"id","layout"),y(e,"class","row svelte-1azk92t")},m(O,w){U(O,e,w),D(e,n),D(n,i),D(i,r),D(i,o),D(i,l),D(l,s);for(let S=0;S<a.length;S+=1)a[S]&&a[S].m(s,null);D(e,f),D(e,c),D(e,d),D(e,m),D(m,h),D(h,g),D(h,v),D(h,b);for(let S=0;S<_.length;S+=1)_[S]&&_[S].m(b,null);t[12](e)},p(O,w){w&1285&&(p=Ee(O[0].sort(qa)),a=Rt(a,w,T,1,O,p,u,s,Mt,Ba,null,xa)),w&1026&&(E=Ee(O[1]),_=Rt(_,w,A,1,O,E,k,b,Mt,Wa,null,Ma))},d(O){O&&V(e);for(let w=0;w<a.length;w+=1)a[w].d();for(let w=0;w<_.length;w+=1)_[w].d();t[12](null)}}}function kf(t){let e,n,i={params:t[2],validate:t[9],fetch:t[4],loadLayout:t[3],$$slots:{default:[Df]},$$scope:{ctx:t}};return e=new fa({props:i}),t[13](e),e.$on("ready",t[7]),{c(){_t(e.$$.fragment)},m(r,o){vt(e,r,o),n=!0},p(r,[o]){const l={};o&4&&(l.params=r[2]),o&16&&(l.fetch=r[4]),o&8&&(l.loadLayout=r[3]),o&33554471&&(l.$$scope={dirty:o,ctx:r}),e.$set(l)},i(r){n||(Be(e.$$.fragment,r),n=!0)},o(r){Ge(e.$$.fragment,r),n=!1},d(r){t[13](null),gt(e,r)}}}function Sf(t){return t.toLowerCase()}function za(t,e){return t[e]}const qa=(t,e)=>t.sortOrder-e.sortOrder;function Cf(t,e,n){let i,r,o,{params:l}=e,{selectedFields:s=[]}=e,{availableGroups:a=[]}=e,{loadLayout:u}=e,f;ir(()=>{r&&r.destroy(),o&&o.forEach(k=>k.destroy())});function c(){const k={group:"fields",draggable:"li",animation:150};r=Q.create(i.querySelector("ul.enabled"),{...k,onEnd(p){const T=p.to.closest(".connected");if(T.classList.contains("enabled")){const[E]=s.splice(p.oldIndex,1);s.splice(p.newIndex,0,E)}else{const E=s[p.oldIndex];s.splice(p.oldIndex,1),n(1,a=a.map(A=>(A.name===T.attributes["data-name"].value&&A.fields.splice(p.newIndex,0,E),A)))}n(0,s=[...s])}}),o=[];for(let p of i.querySelectorAll("ul.disabled")){const T=Q.create(p,{...k,onEnd(E){const A=E.to.closest(".connected");let O=null;if(A.classList.contains("disabled")){for(let w of a)if(w.name===p.attributes["data-name"].value){[O]=w.fields.splice(E.oldIndex,1);break}if(O){for(let w of a)if(w.name===A.attributes["data-name"].value){w.fields.splice(E.newIndex,0,O);break}}}else n(1,a=a.map(w=>(w.name===E.from.closest("ul").attributes["data-name"].value&&([O]=w.fields.splice(E.oldIndex,1)),w))),s.splice(E.newIndex,0,O),n(0,s=[...s])}});o.push(T)}}function d(k){l.openEditDialog(k,l.scope,l.dataAttributeList,l.dataAttributesDefs,p=>{n(0,s=s.map(T=>{if(T.name===k.name)for(let E in p)T[E]=p[E];return T}))})}let{fetch:m=()=>s}=e;function h(k){return k.length===0?(ot.notify("Layout cannot be empty","error"),!1):!0}function g(k){const p={};return l.dataAttributeList.forEach(T=>{za(k,T)!=null&&(p[`data-${Sf(T)}`]=za(k,T))}),p}const v=k=>d(k);function b(k){qe[k?"unshift":"push"](()=>{i=k,n(5,i)})}function _(k){qe[k?"unshift":"push"](()=>{f=k,n(6,f)})}return t.$$set=k=>{"params"in k&&n(2,l=k.params),"selectedFields"in k&&n(0,s=k.selectedFields),"availableGroups"in k&&n(1,a=k.availableGroups),"loadLayout"in k&&n(3,u=k.loadLayout),"fetch"in k&&n(4,m=k.fetch)},[s,a,l,u,m,i,f,c,d,h,g,v,b,_]}let Or=class extends Ue{constructor(e){super(),Ve(this,e,Cf,kf,Ne,{params:2,selectedFields:0,availableGroups:1,loadLayout:3,fetch:4})}};const Ii={upperCaseFirst(t){return t.length?t[0].toUpperCase()+t.slice(1):""}};function Tf(t){let e,n,i={params:t[0],selectedFields:t[2],availableGroups:t[3],editable:Of,loadLayout:t[4]};return e=new Or({props:i}),t[5](e),{c(){_t(e.$$.fragment)},m(r,o){vt(e,r,o),n=!0},p(r,[o]){const l={};o&1&&(l.params=r[0]),o&4&&(l.selectedFields=r[2]),o&8&&(l.availableGroups=r[3]),e.$set(l)},i(r){n||(Be(e.$$.fragment,r),n=!0)},o(r){Ge(e.$$.fragment,r),n=!1},d(r){t[5](null),gt(e,r)}}}let Of=!0;function Af(t,e,n){let{params:i}=e;i.dataAttributeList||(i.dataAttributeList=["id","name","width","widthPx","link","notSortable","align","view","customLabel","editable"]),i.dataAttributesDefs||(i.dataAttributesDefs={link:{type:"bool"},width:{type:"float"},notSortable:{type:"bool"},align:{type:"enum",options:["left","right"]},view:{type:"varchar",readOnly:!0},customLabel:{type:"varchar",readOnly:!0},widthPx:{type:"float"},name:{type:"varchar",readOnly:!0},editable:{type:"bool"}});let r,o=[],l=[];const s=[],a=[];function u(_){Tt.get(i.scope,i.type,i.relatedScope,i.layoutProfileId,k=>{_&&(h(k.layout),_(k))},!1)}function f(_,k){return k==="_self"?B.translate(_,"scopeNamesPlural","Global"):k==="_bookmark"?B.translate("Bookmark","scopeNamesPlural","Global"):B.translate(k,"fields",_)}function c(){const _=[];return i.type==="leftSidebar"&&(le.get(["scopes",i.scope,"bookmarkDisabled"])||_.push("_bookmark"),le.get(["scopes",i.scope,"type"])==="Hierarchy"&&!le.get(["scopes",i.scope,"disableHierarchy"])&&_.push("_self")),_}function d(_,k){return le.get(["entityDefs",_,"fields",k,"type"])??""}function m(_,k){var T;const p=le.get(["entityDefs",_,"links"])??{};for(const E of Object.keys(p))if(((T=p[E])==null?void 0:T.entity)===k&&p[E].relationName)return Espo.utils.upperCaseFirst(p[E].relationName);return""}function h(_){const k=[];let p="";if(i.relatedScope&&i.type==="list"&&(p=m(i.scope,i.relatedScope),p)){const O={name:p,scope:p,prefix:p+"__"};let w=Object.keys(le.get(["entityDefs",p,"fields"])||{}).filter(S=>g(d(p,S))&&v(p,S));w=w.filter(S=>!(le.get(["entityDefs",p,"fields",S,"relationField"])??!1)),w=w.sort((S,P)=>f(p,S).localeCompare(f(p,P))).map(S=>O.prefix+S),O.fields=w,k.push(O)}let T=Object.keys(le.get(["entityDefs",i.scope,"fields"])||{}).filter(O=>g(d(i.scope,O))&&v(i.scope,O));T.push(...c()),T=T.sort((O,w)=>f(i.scope,O).localeCompare(f(i.scope,w))),k.unshift({name:i.scope,scope:i.scope,fields:T});const E=[],A=[];for(const O of k)O.fields=O.fields.map(w=>{const S=f(O.scope,O.prefix?w.replace(O.prefix,""):w);O.prefix||(E.includes(S)&&A.push(S),E.push(S));const P={name:w,label:S},N=le.get(["entityDefs",O.scope,"fields",w,"type"]);return N&&le.get(["fields",N,"notSortable"])&&(P.notSortable=!0),P});n(2,o=_),k[0].fields.forEach(O=>{A.includes(O.label)&&(O.label+=` (${O.name})`);const w=o.find(S=>!S.label&&S.name===O.name);w&&(w.label=O.label)}),k[1]&&k[1].fields.forEach(O=>{E.includes(O.label)&&(O.label+=" (Relation)");const w=o.find(S=>!S.label&&S.name===O.name);w&&(w.label=O.label)});for(const O of k)O.fields=O.fields.filter(w=>!o.find(S=>S.name===w.name));n(3,l=k.reverse())}function g(_){return i.fieldTypes?i.fieldTypes.includes(_):!0}function v(_,k){if(s.includes(k)||a.includes(d(_,k)))return!1;const p=["disabled",`layout${Ii.upperCaseFirst(i.type)}Disabled`];i.reelType&&p.push(`layout${Ii.upperCaseFirst(i.reelType)}Disabled`);for(let T of p)if(le.get(["entityDefs",_,"fields",k,T]))return!1;return!0}function b(_){qe[_?"unshift":"push"](()=>{r=_,n(1,r)})}return t.$$set=_=>{"params"in _&&n(0,i=_.params)},[i,r,o,l,u,b]}class Ar extends Ue{constructor(e){super(),Ve(this,e,Af,Tf,Ne,{params:0})}}function Lf(t){let e,n,i={params:t[0],selectedFields:t[2],availableGroups:t[3],loadLayout:t[5],fetch:t[4]};return e=new Or({props:i}),t[7](e),{c(){_t(e.$$.fragment)},m(r,o){vt(e,r,o),n=!0},p(r,[o]){const l={};o&1&&(l.params=r[0]),o&4&&(l.selectedFields=r[2]),o&8&&(l.availableGroups=r[3]),e.$set(l)},i(r){n||(Be(e.$$.fragment,r),n=!0)},o(r){Ge(e.$$.fragment,r),n=!1},d(r){t[7](null),gt(e,r)}}}function Pf(t,e,n){let{params:i}=e,{viewType:r="detail"}=e;i.dataAttributeList||(i.dataAttributeList=["id","name","style","sticked"]),i.dataAttributesDefs||(i.dataAttributesDefs={style:{type:"enum",options:["default","success","danger","primary","info","warning"],translation:"LayoutManager.options.style"},sticked:{type:"bool"},name:{readOnly:!0}});let o,l=[],s=[],a=()=>{let d={};return l.forEach(m=>{d[m.name]=m}),s[0].fields.forEach(m=>{d[m.name]={...m,disabled:!0}}),d};function u(d){Tt.get(i.scope,i.type,null,i.layoutProfileId,m=>{d&&(f(m.layout),d(m))},!1)}function f(d){let m=[],h={},g={};le.get(["clientDefs",i.scope,"defaultSidePanel",r])!==!1&&!le.get(["clientDefs",i.scope,"defaultSidePanelDisabled"])&&(m.push("default"),h.default="Default"),(le.get(["clientDefs",i.scope,"sidePanels",r])||[]).forEach(b=>{b.name&&(m.push(b.name),b.label&&(h[b.name]=b.label),g[b.name]=b)});const v={name:i.scope,fields:[]};d=d||{},n(2,l=[]),m.forEach((b,_)=>{let k=!1,p=d[b]||{};p.disabled&&(k=!0);let T;if(h[b]?T=B.translate(h[b],"labels",i.scope):T=B.translate(b,"panels",i.scope),k)v.fields.push({name:b,label:T});else{let E={name:b,label:T};E.name in g&&i.dataAttributeList.forEach(A=>{if(A==="name")return;let O=g[E.name]||{};A in O&&(E[A]=O[A])});for(let A in p)E[A]=p[A];E.index="index"in p?p.index:_,l.push(E)}}),l.sort((b,_)=>b.index-_.index),n(3,s=[v])}function c(d){qe[d?"unshift":"push"](()=>{o=d,n(1,o)})}return t.$$set=d=>{"params"in d&&n(0,i=d.params),"viewType"in d&&n(6,r=d.viewType)},[i,o,l,s,a,u,r,c]}class If extends Ue{constructor(e){super(),Ve(this,e,Pf,Lf,Ne,{params:0,viewType:6})}}function Nf(t){let e,n;return e=new Or({props:{params:t[0],selectedFields:t[1],availableGroups:t[2],loadLayout:t[3]}}),{c(){_t(e.$$.fragment)},m(i,r){vt(e,i,r),n=!0},p(i,[r]){const o={};r&1&&(o.params=i[0]),r&2&&(o.selectedFields=i[1]),r&4&&(o.availableGroups=i[2]),e.$set(o)},i(i){n||(Be(e.$$.fragment,i),n=!0)},o(i){Ge(e.$$.fragment,i),n=!1},d(i){gt(e,i)}}}function Mf(t,e){return!t.getLinkParam(e,"disabled")&&!t.getLinkParam(e,"layoutRelationshipsDisabled")}function Rf(t,e,n){let{params:i}=e;i.dataAttributeList||(i.dataAttributeList=["id","name","style","hiddenPerDefault"]),i.dataAttributesDefs||(i.dataAttributesDefs={style:{type:"enum",options:["default","success","danger","primary","info","warning"],translation:"LayoutManager.options.style"},hiddenPerDefault:{type:"bool"},name:{readOnly:!0}});let r=[],o=[];function l(a){fr.create(i.scope,function(u){Tt.get(i.scope,i.type,null,i.layoutProfileId,f=>{a&&(s(u,f.layout),a(f))},!1)})}function s(a,u){let f=[];for(let h in a.defs.links)["belongsTo","hasMany","hasChildren"].includes(a.defs.links[h].type)&&Mf(a,h)&&f.push(h);const c=le.get(["clientDefs",i.scope,"bottomPanels","detail"])||[];for(let h of c)h.layoutRelationshipsDisabled||f.push(h.name);f.sort(function(h,g){let v,b,_=c.find(p=>p.name===h),k=c.find(p=>p.name===g);return h in a.defs.links?v=B.translate(h,"links",i.scope):_&&(v=B.translate(_.label,"labels",i.scope)),g in a.defs.links?b=B.translate(g,"links",i.scope):k&&(b=B.translate(k.label,"labels",i.scope)),v.localeCompare(b)});let d=[];n(1,r=[]);const m={name:i.scope,fields:[]};for(let h in u){let g=u[h],v,b=c.find(_=>_.name===g.name);typeof g=="string"||g instanceof String?v={name:g,label:b?B.translate(b.label,"labels",i.scope):B.translate(g,"links",i.scope)}:(v=g,v.label=b?B.translate(b.label,"labels",i.scope):B.translate(v.name,"links",i.scope)),i.dataAttributeList.forEach(_=>{if(_==="name"||_ in v)return;let k=le.get(["clientDefs",i.scope,"relationshipPanels",v.name,_]);k!==null&&(v[_]=k)}),r.push(v),d.push(v.name)}for(let h of f)if(!d.includes(h)){let g=c.find(v=>v.name===h);m.fields.push({name:h,label:g?B.translate(g.label,"labels",i.scope):B.translate(h,"fields",i.scope)||B.translate(h,"links",i.scope)})}n(2,o=[m])}return t.$$set=a=>{"params"in a&&n(0,i=a.params)},[i,r,o,l]}class xf extends Ue{constructor(e){super(),Ve(this,e,Rf,Nf,Ne,{params:0})}}function Ga(t,e,n){const i=t.slice();return i[43]=e[n],i}function Va(t,e,n){const i=t.slice();return i[46]=e[n],i}function Ua(t,e,n){const i=t.slice();return i[49]=e[n],i}function Xa(t,e,n){const i=t.slice();return i[52]=e[n],i}function Ya(t,e,n){const i=t.slice();return i[55]=e[n],i[57]=n,i}function Ff(t){let e,n,i,r,o;function l(){return t[20](t[49],t[52],t[57])}function s(...a){return t[21](t[49],t[52],t[57],...a)}return{c(){e=C("li"),n=C("a"),n.innerHTML='<i class="fas fa-minus"></i>',i=W(),y(n,"href","#"),y(n,"data-action","minusCell"),y(n,"class","remove-field svelte-t2y606"),y(e,"class","empty cell svelte-t2y606")},m(a,u){U(a,e,u),D(e,n),D(e,i),r||(o=[me(n,"click",Wt(l)),me(e,"dragover",Wt(zf)),me(e,"drop",s)],r=!0)},p(a,u){t=a},d(a){a&&V(e),r=!1,mt(o)}}}function Bf(t){let e,n=t[55].label+"",i,r,o,l,s,a,u,f,c,d,m;function h(){return t[18](t[49],t[52],t[57])}function g(...v){return t[19](t[55],...v)}return{c(){e=C("li"),i=_e(n),r=W(),o=C("a"),o.innerHTML='<i class="fas fa-times"></i>',l=W(),y(o,"href","#"),y(o,"data-action","removeField"),y(o,"class","remove-field svelte-t2y606"),y(e,"class","cell svelte-t2y606"),y(e,"draggable","true"),y(e,"data-id",s=t[55].id),y(e,"data-name",a=t[55].name),y(e,"data-full-width",u=t[55].fullWidth?"true":void 0),y(e,"data-custom-label",f=t[55].customLabel?t[55].customLabel:void 0),y(e,"data-no-label",c=t[55].noLabel)},m(v,b){U(v,e,b),D(e,i),D(e,r),D(e,o),D(e,l),d||(m=[me(o,"click",Wt(h)),me(e,"dragstart",nr(g))],d=!0)},p(v,b){t=v,b[0]&2&&n!==(n=t[55].label+"")&&Je(i,n),b[0]&2&&s!==(s=t[55].id)&&y(e,"data-id",s),b[0]&2&&a!==(a=t[55].name)&&y(e,"data-name",a),b[0]&2&&u!==(u=t[55].fullWidth?"true":void 0)&&y(e,"data-full-width",u),b[0]&2&&f!==(f=t[55].customLabel?t[55].customLabel:void 0)&&y(e,"data-custom-label",f),b[0]&2&&c!==(c=t[55].noLabel)&&y(e,"data-no-label",c)},d(v){v&&V(e),d=!1,mt(m)}}}function Ja(t){let e;function n(o,l){return o[55]?Bf:Ff}let i=n(t),r=i(t);return{c(){r.c(),e=tr()},m(o,l){r.m(o,l),U(o,e,l)},p(o,l){i===(i=n(o))&&r?r.p(o,l):(r.d(1),r=i(o),r&&(r.c(),r.m(e.parentNode,e)))},d(o){o&&V(e),r.d(o)}}}function Ka(t,e){let n,i,r,o,l,s,a,u,f;function c(){return e[17](e[49],e[52])}let d=Ee(e[52].cells),m=[];for(let h=0;h<d.length;h+=1)m[h]=Ja(Ya(e,d,h));return{key:t,first:null,c(){n=C("li"),i=C("div"),r=C("a"),r.innerHTML='<i class="fas fa-times"></i>',o=W(),l=C("ul");for(let h=0;h<m.length;h+=1)m[h].c();s=W(),y(r,"href","#"),y(r,"data-action","removeRow"),y(r,"class","remove-row pull-right svelte-t2y606"),y(i,"class","svelte-t2y606"),y(l,"class","cells svelte-t2y606"),y(n,"class","row svelte-t2y606"),y(n,"data-number",a=e[52].number),this.first=n},m(h,g){U(h,n,g),D(n,i),D(i,r),D(n,o),D(n,l);for(let v=0;v<m.length;v+=1)m[v]&&m[v].m(l,null);D(n,s),u||(f=[me(r,"click",Wt(c)),me(l,"mousedown",nr(qf))],u=!0)},p(h,g){if(e=h,g[0]&5634){d=Ee(e[52].cells);let v;for(v=0;v<d.length;v+=1){const b=Ya(e,d,v);m[v]?m[v].p(b,g):(m[v]=Ja(b),m[v].c(),m[v].m(l,null))}for(;v<m.length;v+=1)m[v].d(1);m.length=d.length}g[0]&2&&a!==(a=e[52].number)&&y(n,"data-number",a)},d(h){h&&V(n),ui(m,h),u=!1,mt(f)}}}function Qa(t,e){let n,i,r,o=(e[49].customLabel||e[49].label||"")+"",l,s,a,u,f,c,d,m,h,g,v,b=[],_=new Map,k,p,T,E,A,O,w;function S(){return e[15](e[49])}function P(){return e[16](e[49])}let N=Ee(e[49].rows);const z=R=>R[52].number;for(let R=0;R<N.length;R+=1){let H=Xa(e,N,R),ae=z(H);_.set(ae,b[R]=Ka(ae,H))}function K(){return e[22](e[49])}return{key:t,first:null,c(){n=C("li"),i=C("header"),r=C("label"),l=_e(o),a=_e(`\r
                                    `),u=C("a"),u.innerHTML='<i class="fas fa-pencil-alt fa-sm"></i>',f=W(),c=C("a"),d=C("i"),g=W(),v=C("ul");for(let R=0;R<b.length;R+=1)b[R].c();k=W(),p=C("div"),T=C("a"),T.innerHTML='<i class="fas fa-plus"></i>',E=W(),y(r,"data-is-custom",s=e[49].customLabel?"true":void 0),y(r,"class","svelte-t2y606"),y(u,"href","#"),y(u,"data-action","edit-panel-label"),y(u,"class","edit-panel-label svelte-t2y606"),y(d,"class","fas fa-times"),y(c,"href","#"),we(c,"float","right"),y(c,"data-action","removePanel"),y(c,"class","remove-panel svelte-t2y606"),y(c,"data-number",m=e[49].number),y(i,"data-name",h=e[49].name),y(i,"class","svelte-t2y606"),y(v,"class","rows svelte-t2y606"),y(T,"href","#"),y(T,"data-action","addRow"),y(T,"class","svelte-t2y606"),y(p,"class","svelte-t2y606"),y(n,"data-number",A=e[49].number),y(n,"class","panel-layout svelte-t2y606"),this.first=n},m(R,H){U(R,n,H),D(n,i),D(i,r),D(r,l),D(i,a),D(i,u),D(i,f),D(i,c),D(c,d),D(n,g),D(n,v);for(let ae=0;ae<b.length;ae+=1)b[ae]&&b[ae].m(v,null);D(n,k),D(n,p),D(p,T),D(n,E),O||(w=[me(u,"click",Wt(S)),me(c,"click",Wt(P)),me(v,"mousedown",nr(Gf)),me(T,"click",Wt(K))],O=!0)},p(R,H){e=R,H[0]&2&&o!==(o=(e[49].customLabel||e[49].label||"")+"")&&Je(l,o),H[0]&2&&s!==(s=e[49].customLabel?"true":void 0)&&y(r,"data-is-custom",s),H[0]&2&&m!==(m=e[49].number)&&y(c,"data-number",m),H[0]&2&&h!==(h=e[49].name)&&y(i,"data-name",h),H[0]&5890&&(N=Ee(e[49].rows),b=Rt(b,H,z,1,e,N,_,v,Mt,Ka,null,Xa)),H[0]&2&&A!==(A=e[49].number)&&y(n,"data-number",A)},d(R){R&&V(n);for(let H=0;H<b.length;H+=1)b[H].d();O=!1,mt(w)}}}function Za(t){let e,n=B.translate(t[43].name,"scopeNames")+"",i;return{c(){e=C("span"),i=_e(n),y(e,"class","title svelte-t2y606")},m(r,o){U(r,e,o),D(e,i)},p(r,o){o[0]&4&&n!==(n=B.translate(r[43].name,"scopeNames")+"")&&Je(i,n)},d(r){r&&V(e)}}}function $a(t,e){let n,i=e[46].label+"",r,o,l,s,a;function u(...f){return e[23](e[46],...f)}return{key:t,first:null,c(){n=C("li"),r=_e(i),o=W(),y(n,"class","cell svelte-t2y606"),y(n,"data-name",l=e[46].name),this.first=n},m(f,c){U(f,n,c),D(n,r),D(n,o),s||(a=me(n,"dragstart",u),s=!0)},p(f,c){e=f,c[0]&4&&i!==(i=e[46].label+"")&&Je(r,i),c[0]&4&&l!==(l=e[46].name)&&y(n,"data-name",l)},d(f){f&&V(n),s=!1,a()}}}function el(t,e){let n,i,r,o=[],l=new Map,s,a,u=e[2].length>1&&Za(e),f=Ee(e[43].fields);const c=d=>d[46].name;for(let d=0;d<f.length;d+=1){let m=Va(e,f,d),h=c(m);l.set(h,o[d]=$a(h,m))}return{key:t,first:null,c(){n=C("div"),u&&u.c(),i=W(),r=C("ul");for(let d=0;d<o.length;d+=1)o[d].c();a=W(),y(r,"class","disabled cells clearfix svelte-t2y606"),y(r,"data-name",s=e[43].name),y(n,"class","svelte-t2y606"),be(n,"group",e[2].length>1),this.first=n},m(d,m){U(d,n,m),u&&u.m(n,null),D(n,i),D(n,r);for(let h=0;h<o.length;h+=1)o[h]&&o[h].m(r,null);D(n,a)},p(d,m){e=d,e[2].length>1?u?u.p(e,m):(u=Za(e),u.c(),u.m(n,i)):u&&(u.d(1),u=null),m[0]&4&&(f=Ee(e[43].fields),o=Rt(o,m,c,1,e,f,l,r,Mt,$a,null,Va)),m[0]&4&&s!==(s=e[43].name)&&y(r,"data-name",s),m[0]&4&&be(n,"group",e[2].length>1)},d(d){d&&V(n),u&&u.d();for(let m=0;m<o.length;m+=1)o[m].d()}}}function Hf(t){let e,n,i,r,o,l,s,a,u,f=[],c=new Map,d,m,h,g,v,b,_=[],k=new Map,p,T,E=Ee(t[1]);const A=S=>S[49].number;for(let S=0;S<E.length;S+=1){let P=Ua(t,E,S),N=A(P);c.set(N,f[S]=Qa(N,P))}let O=Ee(t[2]);const w=S=>S[43].name;for(let S=0;S<O.length;S+=1){let P=Ga(t,O,S),N=w(P);k.set(N,_[S]=el(N,P))}return{c(){e=C("div"),n=C("div"),i=C("div"),r=C("header"),r.textContent=`${B.translate("Layout","LayoutManager")}`,o=W(),l=C("a"),l.textContent=`${B.translate("Add Panel","Admin")}`,s=W(),a=C("div"),u=C("ul");for(let S=0;S<f.length;S+=1)f[S].c();d=W(),m=C("div"),h=C("div"),g=C("header"),g.textContent=`${B.translate("Available Fields","Admin")}`,v=W(),b=C("div");for(let S=0;S<_.length;S+=1)_[S].c();y(r,"class","svelte-t2y606"),y(l,"href","#"),y(l,"class","svelte-t2y606"),y(u,"class","panels svelte-t2y606"),y(a,"class","rows-wrapper svelte-t2y606"),y(i,"class","well svelte-t2y606"),y(n,"class","col-md-8 svelte-t2y606"),y(g,"class","svelte-t2y606"),y(b,"class","rows-wrapper svelte-t2y606"),y(h,"class","well available-fields svelte-t2y606"),y(m,"class","col-md-4 svelte-t2y606"),y(e,"id","layout"),y(e,"class","row svelte-t2y606")},m(S,P){U(S,e,P),D(e,n),D(n,i),D(i,r),D(i,o),D(i,l),D(i,s),D(i,a),D(a,u);for(let N=0;N<f.length;N+=1)f[N]&&f[N].m(u,null);D(e,d),D(e,m),D(m,h),D(h,g),D(h,v),D(h,b);for(let N=0;N<_.length;N+=1)_[N]&&_[N].m(b,null);p||(T=me(l,"click",Wt(t[5])),p=!0)},p(S,P){P[0]&8130&&(E=Ee(S[1]),f=Rt(f,P,A,1,S,E,c,u,Mt,Qa,null,Ua)),P[0]&4&&(O=Ee(S[2]),_=Rt(_,P,w,1,S,O,k,b,Mt,el,null,Ga))},d(S){S&&V(e);for(let P=0;P<f.length;P+=1)f[P].d();for(let P=0;P<_.length;P+=1)_[P].d();p=!1,T()}}}function jf(t){let e,n;return e=new fa({props:{params:t[0],validate:t[13],fetch:t[4],loadLayout:t[3],$$slots:{default:[Hf]},$$scope:{ctx:t}}}),{c(){_t(e.$$.fragment)},m(i,r){vt(e,i,r),n=!0},p(i,r){const o={};r[0]&1&&(o.params=i[0]),r[0]&6|r[1]&134217728&&(o.$$scope={dirty:r,ctx:i}),e.$set(o)},i(i){n||(Be(e.$$.fragment,i),n=!0)},o(i){Ge(e.$$.fragment,i),n=!1},d(i){gt(e,i)}}}function Wf(t,e){return e.prefix?t.startsWith(e.prefix):!t.includes("__")}const zf=t=>t.dataTransfer.dropEffect="move",qf=()=>{},Gf=()=>{};function Vf(t,e,n){let{params:i}=e,{columnCount:r=2}=e,o=["id","label","style"],l={label:{type:"varchar"},style:{type:"enum",options:["default","success","danger","primary","info","warning"],translation:"LayoutManager.options.style"},dynamicLogicVisible:{type:"base",view:"views/admin/field-manager/fields/dynamic-logic-conditions"}},s=[],a=[],u=[],f=-1,c=-1,d;rr();function m(x){let M;const j=[];j.push(new Promise(Y=>{Tt.get(i.scope,i.type,i.relatedScope,i.layoutProfileId,Z=>{M=Z,Y()},!1)})),i.type==="detail"&&j.push(new Promise(Y=>{Tt.get(i.scope,"sidePanelsDetail",null,i.layoutProfileId,Z=>{d=Z.layout,Y()},!1)})),Promise.all(j).then(()=>{x&&(_(M.layout),A(),cn().then(()=>{w()}),x(M))})}function h(x,M){var Y;const j=le.get(["entityDefs",x,"links"])??{};for(const Z of Object.keys(j))if(((Y=j[Z])==null?void 0:Y.entity)===M&&j[Z].relationName)return Espo.utils.upperCaseFirst(j[Z].relationName);return""}function g(x,M){return B.translate(M,"fields",x)}function v(x,M){return le.get(["entityDefs",x,"fields",M,"type"])??""}function b(x){return i.fieldTypes?i.fieldTypes.includes(x):!0}function _(x){const M=[];let j="";if(i.relatedScope&&(j=h(i.scope,i.relatedScope),j)){const J={name:j,scope:j,prefix:j+"__"};let oe=Object.keys(le.get(["entityDefs",j,"fields"])||{}).filter(pe=>b(v(j,pe))&&p(j,pe));oe=oe.filter(pe=>!(le.get(["entityDefs",j,"fields",pe,"relationField"])??!1)),oe=oe.sort((pe,Ie)=>g(j,pe).localeCompare(g(j,Ie))).map(pe=>J.prefix+pe),J.fields=oe,M.push(J)}let Y=[];const Z=[];for(const J in le.get(["entityDefs",i.scope,"fields"])||{})p(i.scope,J)&&(Z.push(B.translate(J,"fields",i.scope)),Y.push(J));M.unshift({name:i.scope,scope:i.scope,fields:Y});const ve=[],Se=[];for(const J of M)J.fields=J.fields.map(oe=>{const pe=g(J.scope,J.prefix?oe.replace(J.prefix,""):oe);return J.prefix||(ve.includes(pe)&&Se.push(pe),ve.push(pe)),{name:oe,label:pe}});n(1,a=x);let Qe=[];x.forEach((J,oe)=>{J.rows.forEach((pe,Ie)=>{pe&&pe.forEach((Ye,Pt)=>{Pt==r||!Ye||Qe.push(Ye.name)})})}),M[0].fields.forEach(J=>{Se.includes(J.label)&&(J.label+=` (${J.name})`);const oe=k(J.name);oe&&(oe.label=J.label)}),M[1]&&M[1].fields.forEach(J=>{J.label+=" (Relation)";const oe=k(J.name);oe&&(oe.label=J.label)});for(const J of M)J.fields=J.fields.filter(oe=>!Qe.find(pe=>pe===oe.name));n(2,u=M.reverse())}function k(x){for(const M of a)for(const j of M.rows)for(const Y of j)if(Y&&Y.name===x)return Y;return null}function p(x,M){if(T()&&s.includes(M))return!1;const j=["disabled",`layout${Ii.upperCaseFirst(i.type)}Disabled`];i.reelType&&j.push(`layout${Ii.upperCaseFirst(i.reelType)}Disabled`);for(let Y of j)if(le.get(["entityDefs",x,"fields",M,Y]))return!1;return!0}function T(){if(le.get(["clientDefs",i.scope,"defaultSidePanelDisabled"]))return!1;if(d){for(const x in d)if(x==="default"&&d[x].disabled)return!1}return!0}function E(){return a.map(x=>({...x,rows:x.rows.map(M=>M.cells)}))}function A(){f=-1,c=-1,n(1,a=a.map((x,M)=>(x.number=M,f=M,x.rows=x.rows.map(j=>({number:c++,cells:j})),x)))}function O(x){Q.create(x,{animation:150,group:"rows",draggable:"li.row",onEnd(M){const j=parseInt(M.to.closest(".panel-layout").getAttribute("data-number")),Y=parseInt(M.from.closest(".panel-layout").getAttribute("data-number"));if(Y===j)n(1,a=a.map(Z=>{if(Z.number===j){const[ve]=Z.rows.splice(M.oldIndex,1);Z.rows.splice(M.newIndex,0,ve)}return Z}));else{const ve=a.find(Se=>Se.number===Y).rows[M.oldIndex];n(1,a=a.map(Se=>(Se.number===Y&&Se.rows.splice(M.oldIndex,1),Se.number===j&&Se.rows.splice(M.newIndex,0,ve),Se)))}}})}function w(){const x=document.querySelector("ul.panels");x&&Q.create(x,{animation:150,group:"panels",draggable:"li.panel-layout",onEnd(M){const j=Array.from(M.to.children);n(1,a=j.map(Y=>{const Z=parseInt(Y.getAttribute("data-number"));return a.find(ve=>ve.number===Z)}))}}),document.querySelectorAll("ul.rows").forEach(M=>{O(M)}),document.querySelectorAll("ul.cells.disabled").forEach(M=>{Q.create(M,{animation:150,group:"cells",draggable:"li.cell"})})}function S(){f++;const x={label:"New panel",rows:[{number:c++,cells:[!1,!1]}],number:f,name:`panel${f}`,isCustomLabel:!0};n(1,a=[...a,x]),cn().then(()=>{const M=document.querySelector(`.panel-layout[data-number="${x.number}"] > .rows`);O(M),M.scrollIntoView()})}function P(x){const M=a.find(Y=>Y.number===x);n(1,a=a.filter(Y=>Y!==M));let j=[];M.rows.forEach(Y=>{Y.cells.forEach(Z=>{Z&&j.push(Z)})}),N(j)}function N(x){n(2,u=u.map(M=>(M.fields=[...x.filter(j=>!!j&&Wf(j.name,M)),...M.fields],M)))}function z(x){n(1,a=a.map(M=>(M.number===x&&(M.rows=[...M.rows,{number:c++,cells:Array(r).fill(!1)}]),M)))}function K(x,M){n(1,a=a.map(j=>{if(j.number===x){const Y=j.rows.find(Z=>Z.number===M);j.rows=j.rows.filter(Z=>Z!=Y),N(Y.cells.filter(Z=>!!Z))}return j}))}function R(x,M,j){n(1,a=a.map(Y=>(Y.number===x&&(Y.rows=Y.rows.map((Z,ve)=>{if(Z.number===M){const Se=Z.cells[j];Se&&N([Se]),Z.cells[j]=!1}return Z})),Y)))}function H(x,M,j,Y){const Z=x.dataTransfer.getData("name");let ve=null;for(const J of u)if(ve=J.fields.find(oe=>oe.name===Z),ve)break;let Se=null,Qe=null;if(ve)n(2,u=u.map(J=>(J.fields=J.fields.filter(oe=>oe!==ve),J)));else{if(a.forEach(J=>{J.rows.forEach((oe,pe)=>{oe.cells.forEach(Ie=>{Ie&&Ie.name===Z&&(ve=Ie,Se=oe.number,Qe=J.number)})})}),!ve)return;n(1,a=a.map((J,oe)=>(Qe===J.number&&(J.rows=J.rows.map((pe,Ie)=>(pe.number===Se&&(pe.cells=pe.cells.map((Ye,Pt)=>Ye&&Ye.name===Z?!1:Ye)),pe))),J)))}n(1,a=a.map(J=>(M===J.number&&(J.rows=J.rows.map(oe=>(j===oe.number&&(oe.cells=oe.cells.map((pe,Ie)=>Ie===Y?(ve.fullWidth&&oe.cells.length>1&&delete ve.fullWidth,ve):pe)),oe))),J)))}function ae(x){i.onEditPanel(x,o,l,M=>{n(1,a=a.map(j=>(j.number===x.number&&o.forEach(Y=>{x[Y]=M[Y]}),j)))})}function se(x,M,j){n(1,a=a.map(Y=>(x===Y.number&&(Y.rows=Y.rows.map(Z=>{if(M===Z.number){const ve=Z.cells.filter((Se,Qe)=>Qe!==j);ve.length===1&&ve[0]&&(ve[0].fullWidth=!0),Z.cells=ve}return Z})),Y)))}function He(x){let M=0;return x.forEach(j=>{j.rows.forEach(Y=>{Y.forEach(Z=>{Z&&M++})})}),M===0?(ot.notify("Layout cannot be empty.","error"),!1):!0}const je=x=>ae(x),Pe=x=>P(x.number),xe=(x,M)=>K(x.number,M.number),et=(x,M,j)=>R(x.number,M.number,j),De=(x,M)=>{M.dataTransfer.setData("name",x.name)},Oe=(x,M,j)=>se(x.number,M.number,j),ct=(x,M,j,Y)=>H(Y,x.number,M.number,j),Lt=x=>z(x.number),tt=(x,M)=>{M.dataTransfer.setData("name",x.name)};return t.$$set=x=>{"params"in x&&n(0,i=x.params),"columnCount"in x&&n(14,r=x.columnCount)},[i,a,u,m,E,S,P,z,K,R,H,ae,se,He,r,je,Pe,xe,et,De,Oe,ct,Lt,tt]}class Uf extends Ue{constructor(e){super(),Ve(this,e,Vf,jf,Ne,{params:0,columnCount:14},null,[-1,-1])}}function Xf(t){let e,n;return e=new t[1]({props:{params:t[0],viewType:t[2]}}),{c(){_t(e.$$.fragment)},m(i,r){vt(e,i,r),n=!0},p(i,[r]){const o={};r&1&&(o.params=i[0]),r&4&&(o.viewType=i[2]),e.$set(o)},i(i){n||(Be(e.$$.fragment,i),n=!0)},o(i){Ge(e.$$.fragment,i),n=!1},d(i){gt(e,i)}}}function Yf(t,e,n){let{params:i}=e,r,o;const l=le.get(["clientDefs",i.scope,"additionalLayouts",i.type])||i.type;switch(l&&(i.reelType=l),t.$$set=s=>{"params"in s&&n(0,i=s.params)},l){case"list":n(1,r=Ar);break;case"leftSidebar":n(1,r=Ar),n(0,i.fieldTypes=["link","linkMultiple"],i);break;case"kanban":n(1,r=Ar),n(0,i.dataAttributeList=["id","name","link","align","view","isLarge","cssStyle"],i),n(0,i.dataAttributesDefs={link:{type:"bool"},isLarge:{type:"bool"},width:{type:"float"},cssStyle:{type:"varchar"},align:{type:"enum",options:["left","right"]},view:{type:"varchar",readOnly:!0},name:{type:"varchar",readOnly:!0}},i);break;case"relationships":n(1,r=xf);break;case"detail":n(1,r=Uf);break;case"sidePanelsDetail":n(2,o="detail"),n(1,r=If);break}return[i,r,o]}class Jf extends Ue{constructor(e){super(),Ve(this,e,Yf,Xf,Ne,{params:0})}}function Kf(t){let e,n,i,r,o,l=B.translate("apiRequest","labels","Admin")+"",s,a,u,f,c,d,m,h,g,v,b,_,k,p,T,E,A,O,w,S,P,N,z=B.translate("response","fields","Admin")+"",K,R,H=B.translate("status","labels","Admin")+"",ae,se,He,je,Pe,xe,et;return{c(){e=C("div"),n=C("h3"),i=C("div"),r=C("div"),o=C("a"),o.textContent=`${B.translate("Administration")}`,s=_e(l),a=W(),u=C("div"),u.textContent=`${B.translate("apiRequest","labels","Admin")}`,f=W(),c=C("button"),c.textContent=`${B.translate("execute","labels","Admin")}`,d=W(),m=C("div"),h=C("div"),g=C("div"),v=C("div"),b=C("label"),b.textContent=`${B.translate("Type","fields","Admin")}`,_=W(),k=C("div"),p=W(),T=C("div"),E=C("div"),A=C("label"),A.textContent=`${B.translate("request","fields","Admin")}`,O=W(),w=C("div"),S=W(),P=C("div"),N=C("label"),K=_e(z),R=C("span"),ae=_e(H),se=_e(": "),He=C("span"),je=W(),Pe=C("div"),y(o,"href","#Admin"),y(r,"class","breadcrumbs-wrapper"),y(i,"class","header-breadcrumbs fixed-header-breadcrumbs"),y(u,"class","header-title"),we(c,"margin","10px 7px 10px 5px"),y(c,"class","btn btn-primary action"),y(c,"data-action","execute"),y(c,"type","button"),y(e,"class","page-header"),y(b,"class","control-label"),y(b,"data-name","type"),y(k,"class","field"),y(k,"data-name","type"),y(v,"class","col-xs-12 cell form-group"),y(g,"class","row"),y(h,"class","col-sm-3"),y(m,"class","row"),y(A,"class","control-label"),y(A,"data-name","request"),y(w,"class","field"),y(w,"data-name","request"),y(E,"class","col-sm-12 col-md-6 cell form-group"),y(R,"class","pull-right status hidden"),we(N,"width","100%"),y(N,"class","control-label"),y(N,"data-name","response"),y(Pe,"class","field"),y(Pe,"data-name","response"),y(P,"class","col-sm-12 col-md-6 cell form-group"),y(T,"class","row")},m(De,Oe){U(De,e,Oe),D(e,n),D(n,i),D(i,r),D(r,o),D(r,s),D(n,a),D(n,u),D(e,f),D(e,c),U(De,d,Oe),U(De,m,Oe),D(m,h),D(h,g),D(g,v),D(v,b),D(v,_),D(v,k),U(De,p,Oe),U(De,T,Oe),D(T,E),D(E,A),D(E,O),D(E,w),D(T,S),D(T,P),D(P,N),D(N,K),D(N,R),D(R,ae),D(R,se),D(R,He),D(P,je),D(P,Pe),xe||(et=me(c,"click",function(){li(t[0](t[1]))&&t[0](t[1]).apply(this,arguments)}),xe=!0)},p(De,[Oe]){t=De},i:Fe,o:Fe,d(De){De&&(V(e),V(d),V(m),V(p),V(T)),xe=!1,et()}}}function Qf(t,e,n){let{afterOnMount:i=()=>null}=e,{sendRequest:r=()=>null}=e,o=null;return Rn(()=>{fr.create("",function(l){n(1,o=l),i(o)})}),t.$$set=l=>{"afterOnMount"in l&&n(2,i=l.afterOnMount),"sendRequest"in l&&n(0,r=l.sendRequest)},[r,o,i]}class Zf extends Ue{constructor(e){super(),Ve(this,e,Qf,Kf,Ne,{afterOnMount:2,sendRequest:0})}}function tl(t,e,n){const i=t.slice();return i[12]=e[n],i}function nl(t){let e,n=t[12].label+"",i,r,o,l,s,a,u;function f(){return t[10](t[12])}return{c(){e=C("button"),i=_e(n),r=W(),y(e,"data-action",o=t[12].name),e.disabled=t[1],y(e,"type","button"),y(e,"style",l=t[12].cssStyle),y(e,"class",s=`btn action btn-${t[12].style??"default"}`)},m(c,d){U(c,e,d),D(e,i),D(e,r),a||(u=me(e,"click",f),a=!0)},p(c,d){t=c,d&1&&n!==(n=t[12].label+"")&&Je(i,n),d&1&&o!==(o=t[12].name)&&y(e,"data-action",o),d&2&&(e.disabled=t[1]),d&1&&l!==(l=t[12].cssStyle)&&y(e,"style",l),d&1&&s!==(s=`btn action btn-${t[12].style??"default"}`)&&y(e,"class",s)},d(c){c&&V(e),a=!1,u()}}}function $f(t){let e,n,i,r=Ee(t[0]),o=[];for(let a=0;a<r.length;a+=1)o[a]=nl(tl(t,r,a));const l=t[9].default,s=Ro(l,t,t[8],null);return{c(){e=C("div");for(let a=0;a<o.length;a+=1)o[a].c();n=W(),s&&s.c(),y(e,"class","button-container"),we(e,"padding-top","10px")},m(a,u){U(a,e,u);for(let f=0;f<o.length;f+=1)o[f]&&o[f].m(e,null);t[11](e),U(a,n,u),s&&s.m(a,u),i=!0},p(a,[u]){if(u&11){r=Ee(a[0]);let f;for(f=0;f<r.length;f+=1){const c=tl(a,r,f);o[f]?o[f].p(c,u):(o[f]=nl(c),o[f].c(),o[f].m(e,null))}for(;f<o.length;f+=1)o[f].d(1);o.length=r.length}s&&s.p&&(!i||u&256)&&Bo(s,l,a,a[8],i?Fo(l,a[8],u,null):Ho(a[8]),null)},i(a){i||(Be(s,a),i=!0)},o(a){Ge(s,a),i=!1},d(a){a&&(V(e),V(n)),ui(o,a),t[11](null),s&&s.d(a)}}}function ec(t,e,n){let{$$slots:i={},$$scope:r}=e,{params:o}=e,{fetch:l}=e,{validate:s=()=>!0}=e,a=!1,{buttonList:u=[{name:"save",label:B.translate("Save","labels"),style:"primary"},{name:"cancel",label:B.translate("Cancel","labels")}]}=e,f;function c(){n(1,a=!0);const g=l();s(g)&&o.onSaved(g),n(1,a=!1)}function d(g){if(g.action){g.action();return}switch(g.name){case"save":c();break}}const m=g=>d(g);function h(g){qe[g?"unshift":"push"](()=>{f=g,n(2,f)})}return t.$$set=g=>{"params"in g&&n(4,o=g.params),"fetch"in g&&n(5,l=g.fetch),"validate"in g&&n(6,s=g.validate),"buttonList"in g&&n(0,u=g.buttonList),"$$scope"in g&&n(8,r=g.$$scope)},[u,a,f,d,o,l,s,c,r,i,m,h]}class tc extends Ue{constructor(e){super(),Ve(this,e,ec,$f,Ne,{params:4,fetch:5,validate:6,buttonList:0,save:7})}get save(){return this.$$.ctx[7]}}function il(t,e,n){const i=t.slice();return i[22]=e[n],i}function rl(t,e,n){const i=t.slice();return i[22]=e[n],i}function ol(t){let e,n,i;function r(){return t[14](t[22])}return{c(){e=C("a"),e.innerHTML='<i class="fas fa-pencil-alt fa-sm svelte-7ge08f"></i>',y(e,"href","javascript:"),y(e,"data-action","editField"),y(e,"class","edit-field svelte-7ge08f")},m(o,l){U(o,e,l),n||(i=me(e,"click",r),n=!0)},p(o,l){t=o},d(o){o&&V(e),n=!1,i()}}}function al(t){let e,n,i;function r(){return t[15](t[22])}return{c(){e=C("a"),e.innerHTML='<i class="fas fa-times"></i>',y(e,"href","javascript:"),y(e,"data-action","removeField"),y(e,"class","remove-field svelte-7ge08f")},m(o,l){U(o,e,l),n||(i=me(e,"click",r),n=!0)},p(o,l){t=o},d(o){o&&V(e),n=!1,i()}}}function ll(t,e){let n,i,r,o=e[22].label+"",l,s,a,u,f,c,d,m=e[22].canEdit&&ol(e),h=e[22].canRemove&&al(e),g=[Ni(e[22]),{class:d=(e[22].isGroup?"group":"")+" "+(e[22].groupEnd?"end":"")+" "+(e[1][e[22].name]&&!e[22].isGroup?"in-group":"")}],v={};for(let b=0;b<g.length;b+=1)v=In(v,g[b]);return{key:t,first:null,c(){n=C("li"),i=C("div"),r=C("label"),l=_e(o),a=W(),u=C("div"),m&&m.c(),f=W(),h&&h.c(),c=W(),y(r,"title",s=e[22].label),y(r,"class","svelte-7ge08f"),y(i,"class","left svelte-7ge08f"),y(u,"class","right svelte-7ge08f"),zt(n,v),be(n,"svelte-7ge08f",!0),this.first=n},m(b,_){U(b,n,_),D(n,i),D(i,r),D(r,l),D(n,a),D(n,u),m&&m.m(u,null),D(u,f),h&&h.m(u,null),D(n,c)},p(b,_){e=b,_&1&&o!==(o=e[22].label+"")&&Je(l,o),_&1&&s!==(s=e[22].label)&&y(r,"title",s),e[22].canEdit?m?m.p(e,_):(m=ol(e),m.c(),m.m(u,f)):m&&(m.d(1),m=null),e[22].canRemove?h?h.p(e,_):(h=al(e),h.c(),h.m(u,null)):h&&(h.d(1),h=null),zt(n,v=hi(g,[_&1&&Ni(e[22]),_&3&&d!==(d=(e[22].isGroup?"group":"")+" "+(e[22].groupEnd?"end":"")+" "+(e[1][e[22].name]&&!e[22].isGroup?"in-group":""))&&{class:d}])),be(n,"svelte-7ge08f",!0)},d(b){b&&V(n),m&&m.d(),h&&h.d()}}}function sl(t,e){let n,i,r,o=e[22].label+"",l,s,a,u=[Ni(e[22])],f={};for(let c=0;c<u.length;c+=1)f=In(f,u[c]);return{key:t,first:null,c(){n=C("li"),i=C("div"),r=C("label"),l=_e(o),a=W(),y(r,"title",s=e[22].label),y(r,"class","svelte-7ge08f"),y(i,"class","left svelte-7ge08f"),zt(n,f),be(n,"svelte-7ge08f",!0),this.first=n},m(c,d){U(c,n,d),D(n,i),D(i,r),D(r,l),D(n,a)},p(c,d){e=c,d&8&&o!==(o=e[22].label+"")&&Je(l,o),d&8&&s!==(s=e[22].label)&&y(r,"title",s),zt(n,f=hi(u,[d&8&&Ni(e[22])])),be(n,"svelte-7ge08f",!0)},d(c){c&&V(n)}}}function nc(t){let e,n,i,r,o,l,s,a=[],u=new Map,f,c,d,m,h,g,v,b,_,k=[],p=new Map,T=Ee(t[0].sort(fl));const E=w=>w[22].name;for(let w=0;w<T.length;w+=1){let S=rl(t,T,w),P=E(S);u.set(P,a[w]=ll(P,S))}let A=Ee(t[3]);const O=w=>w[22].name;for(let w=0;w<A.length;w+=1){let S=il(t,A,w),P=O(S);p.set(P,k[w]=sl(P,S))}return{c(){e=C("div"),n=C("div"),i=C("div"),r=C("header"),r.textContent=`${B.translate("Selected","labels","Admin")}`,o=W(),l=C("div"),s=C("ul");for(let w=0;w<a.length;w+=1)a[w].c();f=W(),c=C("div"),d=W(),m=C("div"),h=C("div"),g=C("header"),g.textContent=`${B.translate("Available","labels","Admin")}`,v=W(),b=C("div"),_=C("ul");for(let w=0;w<k.length;w+=1)k[w].c();y(r,"class","svelte-7ge08f"),y(s,"class","enabled connected svelte-7ge08f"),y(l,"class","rows-wrapper svelte-7ge08f"),y(i,"class","well svelte-7ge08f"),y(n,"class","col-sm-5 svelte-7ge08f"),y(c,"class","col-sm-2 svelte-7ge08f"),y(g,"class","svelte-7ge08f"),y(_,"class","disabled connected svelte-7ge08f"),y(b,"class","rows-wrapper svelte-7ge08f"),y(h,"class","well svelte-7ge08f"),y(m,"class","col-sm-5 svelte-7ge08f"),y(e,"id","layout"),y(e,"class","row svelte-7ge08f")},m(w,S){U(w,e,S),D(e,n),D(n,i),D(i,r),D(i,o),D(i,l),D(l,s);for(let P=0;P<a.length;P+=1)a[P]&&a[P].m(s,null);D(e,f),D(e,c),D(e,d),D(e,m),D(m,h),D(h,g),D(h,v),D(h,b),D(b,_);for(let P=0;P<k.length;P+=1)k[P]&&k[P].m(_,null);t[16](e)},p(w,S){S&2115&&(T=Ee(w[0].sort(fl)),a=Rt(a,S,E,1,w,T,u,s,Mt,ll,null,rl)),S&8&&(A=Ee(w[3]),k=Rt(k,S,O,1,w,A,p,_,Mt,sl,null,il))},d(w){w&&V(e);for(let S=0;S<a.length;S+=1)a[S].d();for(let S=0;S<k.length;S+=1)k[S].d();t[16](null)}}}function ic(t){let e,n,i={params:t[2],validate:t[8],fetch:t[7],loadData:t[5],buttonList:t[4],$$slots:{default:[nc]},$$scope:{ctx:t}};return e=new tc({props:i}),t[17](e),{c(){_t(e.$$.fragment)},m(r,o){vt(e,r,o),n=!0},p(r,[o]){const l={};o&4&&(l.params=r[2]),o&256&&(l.validate=r[8]),o&128&&(l.fetch=r[7]),o&32&&(l.loadData=r[5]),o&16&&(l.buttonList=r[4]),o&134218315&&(l.$$scope={dirty:o,ctx:r}),e.$set(l)},i(r){n||(Be(e.$$.fragment,r),n=!0)},o(r){Ge(e.$$.fragment,r),n=!1},d(r){t[17](null),gt(e,r)}}}function rc(t){return t.toLowerCase()}function ul(t,e){return t[e]}function Ni(t){let e={};return["name","id"].forEach(n=>{ul(t,n)!=null&&(e[`data-${rc(n)}`]=ul(t,n))}),e}const fl=(t,e)=>t.sortOrder-e.sortOrder;function oc(t,e,n){let i,r,o,{params:l}=e,{enabledItems:s=[]}=e,{disabledItems:a=[]}=e,{buttonList:u}=e,{loadData:f}=e,{refresh:c=()=>{}}=e,{editItem:d}=e,{getGroupId:m=()=>"id"}=e,{fieldsInGroup:h}=e,g;function v(w){let S=!1,P={};w.forEach(N=>{if(N.isGroup){S=N.name!=="";return}S&&(P[N.name]=!0)}),n(1,h=P)}Rn(()=>{b()}),ir(()=>{r&&r.destroy(),o&&o.destroy()});function b(){const w={group:"fields",draggable:"li",animation:150};r=Q.create(i.querySelector("ul.enabled"),{...w,onEnd(S){if(S.to.closest(".connected").classList.contains("enabled")){const[P]=s.splice(S.oldIndex,1);s.splice(S.newIndex,0,P);for(let N=S.newIndex;N<s.length;N++)n(0,s[N].sortOrder=(N>0?s[N-1].sortOrder:0)+N,s);v(s),c()}else{const P=s[S.oldIndex];if(P.canDisabled===!1){c();return}s.splice(S.oldIndex,1),a.splice(S.newIndex,0,P),c()}}}),o=Q.create(i.querySelector("ul.disabled"),{...w,onEnd(S){if(S.to.closest(".connected").classList.contains("disabled")){const[P]=a.splice(S.oldIndex,1);a.splice(S.newIndex,0,P)}else{const P=a[S.oldIndex];a.splice(S.oldIndex,1),s.splice(S.newIndex,0,P);for(let N=S.newIndex;N<s.length;N++)n(0,s[N].sortOrder=(N>0?s[N-1].sortOrder:0)+N,s);v(s),c()}}})}let{fetch:_=()=>{let w=[],S=!1,P=!1;for(let R=0;R<s.length;R++){const H=s[R];if(H.isGroup){S=!H.groupEnd,w.push({id:H.id,name:H.name,color:H.color,iconClass:H.iconClass,items:[]});continue}S?w[w.length-1].items.push(H.name):w.push(H.name)}let N=!1,z=w.filter(R=>{if(typeof R=="object"){if(R.name!==""&&!R.items.length)return!1;if(R.name!==""&&R.items.length)return N=!0,!0;if(R.name===""&&N)return N=!1,!0;if(R.name===""&&!N)return!1}return!0});P=z.length!==w.length,w=z;let K=[];for(let R=0;R<w.length;R++){let H=w[R];K.push(H),typeof H=="object"&&H.name!==""&&(R===w.length-1||!(typeof w[R+1]=="object"&&w[R+1].name===""))&&(P=!0,K.push({id:m(),name:"",items:[]}))}return{adjusted:P,navigation:K}}}=e;function k(w){s.splice(s.findIndex(S=>S.id===w.id),1),c()}let{validate:p=w=>w.length===0?(ot.notify("Menu cannot be empty","error"),!1):!0}=e;const T=w=>d(w),E=w=>k(w);function A(w){qe[w?"unshift":"push"](()=>{i=w,n(9,i)})}function O(w){qe[w?"unshift":"push"](()=>{g=w,n(10,g)})}return t.$$set=w=>{"params"in w&&n(2,l=w.params),"enabledItems"in w&&n(0,s=w.enabledItems),"disabledItems"in w&&n(3,a=w.disabledItems),"buttonList"in w&&n(4,u=w.buttonList),"loadData"in w&&n(5,f=w.loadData),"refresh"in w&&n(12,c=w.refresh),"editItem"in w&&n(6,d=w.editItem),"getGroupId"in w&&n(13,m=w.getGroupId),"fieldsInGroup"in w&&n(1,h=w.fieldsInGroup),"fetch"in w&&n(7,_=w.fetch),"validate"in w&&n(8,p=w.validate)},t.$$.update=()=>{t.$$.dirty&1&&v(s)},[s,h,l,a,u,f,d,_,p,i,g,k,c,m,T,E,A,O]}class cl extends Ue{constructor(e){super(),Ve(this,e,oc,ic,Ne,{params:2,enabledItems:0,disabledItems:3,buttonList:4,loadData:5,refresh:12,editItem:6,getGroupId:13,fieldsInGroup:1,fetch:7,validate:8})}}function dl(t){let e,n,i={params:t[0],enabledItems:t[2],disabledItems:t[4],buttonList:t[6],fieldsInGroup:t[5],refresh:t[7],editItem:t[8],getGroupId:Jn};return e=new cl({props:i}),t[9](e),{c(){_t(e.$$.fragment)},m(r,o){vt(e,r,o),n=!0},p(r,o){const l={};o&1&&(l.params=r[0]),o&4&&(l.enabledItems=r[2]),e.$set(l)},i(r){n||(Be(e.$$.fragment,r),n=!0)},o(r){Ge(e.$$.fragment,r),n=!1},d(r){t[9](null),gt(e,r)}}}function ac(t){let e,n=t[3],i,r=dl(t);return{c(){e=C("div"),r.c()},m(o,l){U(o,e,l),r.m(e,null),i=!0},p(o,[l]){l&8&&Ne(n,n=o[3])?(Jo(),Ge(r,1,1,Fe),Ko(),r=dl(o),r.c(),Be(r,1),r.m(e,null)):r.p(o,l)},i(o){i||(Be(r),i=!0)},o(o){Ge(r),i=!1},d(o){o&&V(e),r.d(o)}}}let lc="_delimiter_";function Jn(){return lc+sc()}function sc(){return Math.floor((1+Math.random())*4294967296).toString(16).substring(1)}function uc(t,e,n){let{params:i}=e,r,o=[],l=[],s=0,a={},u=[{name:"save",label:B.translate("Save","labels"),style:"primary"},{name:"cancel",label:B.translate("Cancel","labels")},{name:"addGroup",label:B.translate("addGroup","labels"),cssStyle:"margin-left: 30px",action:()=>{i.onEditItem({id:Jn(),groupEnd:!1},h=>{let g=10;o.length&&(g=o[o.length-1].sortOrder+10);let v={isGroup:!0,canEdit:!0,canRemove:!0,isGroup:!0,canDisabled:!1,name:"",label:"",sortOrder:g,...h};o.push(v),v.name!==""&&o.push({id:Jn(),isGroup:!0,canEdit:!0,canRemove:!0,isGroup:!0,canDisabled:!1,groupEnd:!0,name:"",label:"",sortOrder:v.sortOrder+1}),f()})}}];function f(){n(3,s++,s)}function c(h){i.onEditItem(h,g=>{let v=o.findIndex(b=>b.id===g.id);n(2,o[v]=g,o),f()})}d();function d(){let h=i.list??[],g=0;for(let v=0;v<h.length;v++){let b=h[v];if(typeof b=="string")le.get(["scopes",b,"tab"])&&o.push({name:b,label:B.translate(b,"scopeNamesPlural"),sortOrder:g}),g++;else if(typeof b=="object"){o.push({id:b.id??Jn(),canEdit:!0,canRemove:!0,isGroup:!0,canDisabled:!1,groupEnd:b.name==="",name:b.name,label:b.name,iconClass:b.iconClass||null,sortOrder:g}),g++;for(const _ of b.items)le.get(["scopes",_,"tab"])&&(o.push({name:_,label:B.translate(_,"scopeNamesPlural"),sortOrder:g}),g++);if(v<h.length-1&&h[v+1].name==="")continue;b.name!==""&&(v===h.length-1||typeof h[v+v]=="string"||b.items.length===0)&&(o.push({id:Jn(),canEdit:!0,canRemove:!0,canDisabled:!1,isGroup:!0,groupEnd:!0,name:"",label:"",iconClass:b.iconClass||null,sortOrder:g}),g++)}}Object.entries(le.get(["scopes"])).forEach(([v,b])=>{b.disabled||b.emHidden||!b.tab||o.find(_=>_.name===v)||l.push({name:v,label:B.translate(v,"scopeNamesPlural")})}),l.sort((v,b)=>v.label.localeCompare(b.label))}function m(h){qe[h?"unshift":"push"](()=>{r=h,n(1,r)})}return t.$$set=h=>{"params"in h&&n(0,i=h.params)},[i,r,o,s,l,a,u,f,c,m]}class fc extends Ue{constructor(e){super(),Ve(this,e,uc,ac,Ne,{params:0})}}function pl(t){let e,n,i={params:t[0],enabledItems:t[3],disabledItems:t[4],buttonList:t[6],fieldsInGroup:t[5],refresh:t[7],validate:dc};return e=new cl({props:i}),t[8](e),{c(){_t(e.$$.fragment)},m(r,o){vt(e,r,o),n=!0},p(r,o){const l={};o&1&&(l.params=r[0]),e.$set(l)},i(r){n||(Be(e.$$.fragment,r),n=!0)},o(r){Ge(e.$$.fragment,r),n=!1},d(r){t[8](null),gt(e,r)}}}function cc(t){let e,n=t[2],i,r=pl(t);return{c(){e=C("div"),r.c()},m(o,l){U(o,e,l),r.m(e,null),i=!0},p(o,[l]){l&4&&Ne(n,n=o[2])?(Jo(),Ge(r,1,1,Fe),Ko(),r=pl(o),r.c(),Be(r,1),r.m(e,null)):r.p(o,l)},i(o){i||(Be(r),i=!0)},o(o){Ge(r),i=!1},d(o){o&&V(e),r.d(o)}}}function dc(t){return!0}function pc(t,e,n){let{params:i}=e,r,o=[],l=[],s=0,a={},u=[{name:"save",label:B.translate("Save","labels"),style:"primary"},{name:"cancel",label:B.translate("Cancel","labels")}];function f(){n(2,s++,s)}c();function c(){let m=i.list??[],h=0;for(let g=0;g<m.length;g++){let v=m[g];typeof v=="string"&&(le.get(["scopes",v,"tab"])&&o.push({name:v,label:B.translate(v,"scopeNamesPlural"),sortOrder:h}),h++)}Object.entries(le.get(["scopes"])).forEach(([g,v])=>{v.disabled||v.emHidden||!v.tab||o.find(b=>b.name===g)||l.push({name:g,label:B.translate(g,"scopeNamesPlural")})}),l.sort((g,v)=>g.label.localeCompare(v.label))}function d(m){qe[m?"unshift":"push"](()=>{r=m,n(1,r)})}return t.$$set=m=>{"params"in m&&n(0,i=m.params)},[i,r,s,o,l,a,u,f,d]}class hc extends Ue{constructor(e){super(),Ve(this,e,pc,cc,Ne,{params:0})}}function hl(t,{delay:e=0,duration:n=400,easing:i=Po}={}){const r=+getComputedStyle(t).opacity;return{delay:e,duration:n,easing:i,css:o=>`opacity: ${o*r}`}}function ml(t,e,n){const i=t.slice();return i[58]=e[n],i}function mc(t){let e,n,i,r,o,l,s=Ee(t[5]),a=[];for(let f=0;f<s.length;f+=1)a[f]=vl(ml(t,s,f));let u=t[1]&&gl(t);return{c(){e=C("div"),n=C("div");for(let f=0;f<a.length;f+=1)a[f].c();i=W(),r=C("hr"),o=W(),u&&u.c(),l=tr(),y(n,"class","btn-group"),y(e,"class","panel-group"),we(e,"margin-bottom","10px"),we(e,"margin-top","-10px"),we(r,"margin","0 -10px")},m(f,c){U(f,e,c),D(e,n);for(let d=0;d<a.length;d+=1)a[d]&&a[d].m(n,null);U(f,i,c),U(f,r,c),U(f,o,c),u&&u.m(f,c),U(f,l,c)},p(f,c){if(c[0]&16418){s=Ee(f[5]);let d;for(d=0;d<s.length;d+=1){const m=ml(f,s,d);a[d]?a[d].p(m,c):(a[d]=vl(m),a[d].c(),a[d].m(n,null))}for(;d<a.length;d+=1)a[d].d(1);a.length=s.length}f[1]?u?u.p(f,c):(u=gl(f),u.c(),u.m(l.parentNode,l)):u&&(u.d(1),u=null)},d(f){f&&(V(e),V(i),V(r),V(o),V(l)),ui(a,f),u&&u.d(f)}}}function vl(t){let e,n=t[58].label+"",i,r,o,l;function s(){return t[35](t[58])}return{c(){e=C("a"),i=_e(n),r=W(),y(e,"href","javascript:"),y(e,"class","btn btn-link tree-item svelte-csuwvv"),be(e,"active",t[58].name===t[1].name)},m(a,u){U(a,e,u),D(e,i),D(e,r),o||(l=me(e,"click",s),o=!0)},p(a,u){t=a,u[0]&32&&n!==(n=t[58].label+"")&&Je(i,n),u[0]&34&&be(e,"active",t[58].name===t[1].name)},d(a){a&&V(e),o=!1,l()}}}function gl(t){let e,n,i=t[1].label+"",r,o,l,s,a,u,f,c,d,m,h,g,v,b,_,k,p;return{c(){e=C("div"),n=C("h5"),r=_e(i),o=W(),l=C("div"),s=C("input"),a=W(),u=C("button"),f=W(),c=C("button"),d=W(),m=C("div"),h=C("button"),g=_e("Unset selection"),b=W(),_=C("div"),_.innerHTML="",we(n,"margin","20px 0"),we(n,"font-weight","bold"),we(n,"font-size","16px"),y(s,"type","text"),y(s,"class","form-control category-search search-in-tree-input"),y(s,"tabindex","1"),y(s,"placeholder","Type and press Enter..."),y(u,"class","fas fa-times reset-search-in-tree-button"),be(u,"hidden",!t[6]),y(c,"class","fas fa-search search-in-tree-button"),y(l,"class","field"),y(l,"data-name","category-search"),y(h,"type","button"),h.disabled=v=!t[7]||!t[9],y(h,"class","btn btn-default"),we(m,"margin-top","20px"),y(e,"class","panel-group category-search"),we(e,"margin-bottom","20px"),y(_,"class","panel-group category-tree")},m(T,E){U(T,e,E),D(e,n),D(n,r),D(e,o),D(e,l),D(l,s),t[36](s),D(l,a),D(l,u),D(l,f),D(l,c),D(e,d),D(e,m),D(m,h),D(h,g),U(T,b,E),U(T,_,E),t[38](_),k||(p=[me(s,"keydown",t[37]),me(u,"click",t[15]),me(c,"click",t[16]),me(h,"click",t[13])],k=!0)},p(T,E){E[0]&2&&i!==(i=T[1].label+"")&&Je(r,i),E[0]&64&&be(u,"hidden",!T[6]),E[0]&640&&v!==(v=!T[7]||!T[9])&&(h.disabled=v)},d(T){T&&(V(e),V(b),V(_)),t[36](null),t[38](null),k=!1,mt(p)}}}function bl(t){let e,n,i;return{c(){e=C("div"),y(e,"class","category-panel-resizer svelte-csuwvv")},m(r,o){U(r,e,o),n||(i=me(e,"mousedown",t[12]),n=!0)},p:Fe,d(r){r&&V(e),n=!1,i()}}}function vc(t){let e,n,i,r,o,l,s,a,u,f,c,d,m,h,g;function v(p,T){if(p[5].length>0)return mc}let b=v(t),_=b&&b(t),k=!t[0]&&bl(t);return{c(){e=C("aside"),n=C("button"),i=C("span"),r=W(),o=C("span"),l=W(),s=C("div"),a=C("div"),u=C("div"),f=W(),_&&_.c(),c=W(),k&&k.c(),y(i,"class","toggle-icon-left fas fa-angle-left"),be(i,"hidden",t[0]),y(o,"class","toggle-icon-right fas fa-angle-right"),be(o,"hidden",!t[0]),y(n,"type","button"),y(n,"class","btn btn-link collapse-panel"),be(n,"collapsed",t[0]),we(u,"margin-right","20px"),y(u,"class","layout-editor-container"),we(a,"display","flex"),we(a,"flex-direction","row-reverse"),we(a,"align-items","center"),we(a,"height","35px"),y(s,"class","category-panel"),be(s,"hidden",t[0]),y(e,"class","catalog-tree-panel"),we(e,"width",t[10]),be(e,"collapsed",t[0]),be(e,"catalog-tree-panel-hidden",t[0]),be(e,"hidden",t[8])},m(p,T){U(p,e,T),D(e,n),D(n,i),D(n,r),D(n,o),D(e,l),D(e,s),D(s,a),D(a,u),t[34](u),D(s,f),_&&_.m(s,null),D(s,c),k&&k.m(s,null),m=!0,h||(g=me(n,"click",t[11]),h=!0)},p(p,T){(!m||T[0]&1)&&be(i,"hidden",p[0]),(!m||T[0]&1)&&be(o,"hidden",!p[0]),(!m||T[0]&1)&&be(n,"collapsed",p[0]),b===(b=v(p))&&_?_.p(p,T):(_&&_.d(1),_=b&&b(p),_&&(_.c(),_.m(s,c))),p[0]?k&&(k.d(1),k=null):k?k.p(p,T):(k=bl(p),k.c(),k.m(s,null)),(!m||T[0]&1)&&be(s,"hidden",p[0]),(!m||T[0]&1024)&&we(e,"width",p[10]),(!m||T[0]&1)&&be(e,"collapsed",p[0]),(!m||T[0]&1)&&be(e,"catalog-tree-panel-hidden",p[0]),(!m||T[0]&256)&&be(e,"hidden",p[8])},i(p){m||(p&&xn(()=>{m&&(d||(d=Qo(e,hl,{},!0)),d.run(1))}),m=!0)},o(p){p&&(d||(d=Qo(e,hl,{},!1)),d.run(0)),m=!1},d(p){p&&V(e),t[34](null),_&&_.d(),k&&k.d(),p&&d&&d.end(),h=!1,g()}}}function gc(t){let e=[];return(t||"").split("|").forEach(n=>{n&&e.push(n)}),e}function bc(t,e,n){((n||t.tree("getTree")).children||[]).findIndex(o=>e.id===o.id)===-1&&t.tree("appendNode",e,n)}function yc(t,e,n){((n||t.tree("getTree")).children||[]).findIndex(o=>e.id===o.id)===-1&&t.tree("prependNode",e,n)}function Lr(t,e,n){if(!Array.isArray(e)||e.length===0){n();return}const i=e[0];let r=t.find(`.jqtree-title[data-id="${i}"]`);r.length>0&&r.each((o,l)=>{if(l=window.$(l),l.parent().parent().hasClass("jqtree-closed")){let a=t.tree("getNodeByHtmlElement",l);t.tree("openNode",a,!1,()=>Lr(t,e.slice(1),n))}else Lr(t,e.slice(1),n)})}function wc(t,e,n){let i,r,{scope:o}=e,{model:l}=e,{collection:s}=e,{callbacks:a}=e,{minWidth:u=220}=e,{maxWidth:f=600}=e,{currentWidth:c=u}=e,{isCollapsed:d=!1}=e,{mode:m}=e,{maxSize:h=na.get("recordsPerPageSmall")||20}=e,{renderLayoutEditor:g}=e;rr();let v,b,_,k=!1,p,T,E=[],A,O="",w,S,P,N=!1;function z(I){s&&I.name===o&&Le.set("treeWhereData",o,I.where),d||se()}function K(){n(0,d=!d),d?(window.$(".page-header").addClass("collapsed").removeClass("not-collapsed"),window.$("#tree-list-table").addClass("collapsed")):(window.$(".page-header").removeClass("collapsed").addClass("not-collapsed"),window.$("#tree-list-table").removeClass("collapsed")),Le.set("catalog-tree-panel",o,d?"collapsed":""),d||se()}function R(I){if(!k)return;I.preventDefault();const te=T+(I.pageX-p);te>=u&&te<=f&&n(17,c=te)}function H(I){k=!0,p=I.pageX,T=c,document.addEventListener("mousemove",R),document.addEventListener("mouseup",ae,{once:!0}),document.body.style.userSelect="none"}function ae(){k&&(k=!1,Le.set("panelWidth",o,c.toString()),document.removeEventListener("mousemove",R),document.body.style.userSelect="")}function se(){He(),Pe()}function He(){let I=window.$(v);I&&I.tree("destroy")}function je(){let I=Le.get("treeWhereData",o)||[];return["_self","_bookmark"].includes(A.name)||(I=[]),I}function Pe(I=null){if(!A)return;let te=window.$(v),$=je();if(I===null&&O&&le.get(["scopes",w,"type"])==="Hierarchy"&&!le.get(["scopes",w,"hierarchyDisabled"])){$.push({type:"textFilter",value:O}),Espo.ajax.getRequest(`${w}/action/TreeData`,{where:$,scope:o,link:A.name}).then(re=>{Pe(re.tree)});return}let ue={dataUrl:et(),dataFilter:(function(re){return tt(re)}).bind(this),selectable:!0,saveState:!1,autoOpen:!1,dragAndDrop:le.get(["scopes",w,"multiParents"])!==!0&&le.get(["scopes",w,"dragAndDrop"]),useContextMenu:!1,closedIcon:window.$('<i class="fa fa-angle-right"></i>'),openedIcon:window.$('<i class="fa fa-angle-down"></i>'),onCreateLi:(function(re,fe,ge){re.disabled?fe.addClass("disabled"):fe.removeClass("disabled");const Ae=fe.find(".jqtree-title");if(O){let Xt=O.replace(/\*/g,"");if(Xt.length>0){let Mi=Ae.html(),Ri=Mi.match(new RegExp(Xt,"ig"));if(Ri){let L=[];Ri.forEach(q=>{L.includes(q)||(L.push(q),Ae.html(Mi.replace(new RegExp(q,"g"),`<b>${q}</b>`)))})}}}["_self","_bookmark"].includes(A.name)&&l&&l.get("id")===re.id&&(te.tree("addToSelection",re),fe.addClass("jqtree-selected")),!["_self","_bookmark"].includes(A.name)&&P===re.id&&(te.tree("addToSelection",re),fe.addClass("jqtree-selected")),Ae.attr("data-id",re.id),ue.dragAndDrop&&!re.showMoreDirection&&Ae.attr("title",B.translate("useDragAndDrop")),re.showMoreDirection&&(fe.addClass("show-more"),fe.addClass("show-more-"+re.showMoreDirection),fe.find(".jqtree-title").addClass("more-label"))}).bind(this)};I&&(ue.data=I,ue.autoOpen=!0,ue.dragAndDrop=!1,delete ue.dataUrl,delete ue.dataFilter),te.tree(ue),te.on("tree.load_data",re=>{ot.notify(!1)}),te.on("tree.refresh",re=>{if(Le.get("selectedNodeId",o)&&m==="list"){const fe=Le.get("selectedNodeId",o),ge=Le.get("selectedNodeRoute",o);a!=null&&a.selectNode&&a.selectNode({id:fe,route:ge},!0)}m==="detail"&&(l&&["_self","_bookmark"].includes(A.name)?De(l.get("id"),Object.keys(l.get("hierarchyRoute")??[]).reverse()):Le.get("selectedNodeId",o)&&De(Le.get("selectedNodeId",o),gc(Le.get("selectedNodeRoute",o))))}),te.on("tree.move",re=>{re.preventDefault();const fe="parent";let ge=re.move_info,Ae={_position:ge.position,_target:ge.target_node.id};Ae[fe+"Id"]=null,Ae[fe+"Name"]=null,ge.position==="inside"?(Ae[fe+"Id"]=ge.target_node.id,Ae[fe+"Name"]=ge.target_node.name):ge.target_node.parent.id&&(Ae[fe+"Id"]=ge.target_node.parent.id,Ae[fe+"Name"]=ge.target_node.parent.name),Espo.ajax.patchRequest(`${w}/${ge.moved_node.id}`,Ae).success(Xt=>{ge.do_move()})}),te.on("tree.click",re=>{if(re.preventDefault(),re.node.disabled)return!1;const fe=window.$(re.click_event.target);if(fe.hasClass("jqtree-title")||fe.parent().hasClass("jqtree-title")){let ge=re.node;if(ge.showMoreDirection)return xe(ge);let Ae=[];for(;ge.parent.id;)Ae.push(ge.parent.id),ge=ge.parent;let Xt={id:re.node.id,route:"",click:!0};Ae.length>0&&(Xt.route="|"+Ae.reverse().join("|")+"|"),a!=null&&a.selectNode&&a.selectNode(Xt)}})}function xe(I){ot.notify("Loading..."),Espo.ajax.getRequest(et(I)).then(te=>{if(te.list){const $=window.$(v);I.showMoreDirection==="up"?tt(JSON.parse(JSON.stringify(te)),"up").reverse().forEach(ue=>{yc($,ue,I.getParent())}):I.showMoreDirection==="down"&&tt(JSON.parse(JSON.stringify(te)),"down").forEach(ue=>{bc($,ue,I.getParent())}),$.tree("removeNode",I)}})}function et(I){let te=w+`/action/Tree?isTreePanel=1&scope=${o}&link=${A.name}`;if(I&&I.showMoreDirection){let ue=I.offset,re=h;if(I.showMoreDirection==="up"){let fe=I.offset-re;ue=I.offset-re,fe<0?(ue=0,re=re+fe):ue=fe}else I.showMoreDirection==="down"&&(ue=ue+1);te+="&offset="+ue+"&maxSize="+re,I.getParent()&&(te+="&node="+I.getParent().id)}else I&&I.id?te+="&node="+I.id+"&offset=0&maxSize="+h:l&&l.id&&[l.urlRoot,"Bookmark"].includes(w)&&(te+="&selectedId="+l.id);let $=je();return O&&($=[...$,{type:"textFilter",value:O}]),$.length>0&&(te+="&",te+=window.$.param({where:$})),te}function De(I,te){const $=window.$(v);Lr($,te,()=>{let re=$.tree("getNodeById",I);re&&($.tree("addToSelection",re),n(7,P=I)),$.find(".jqtree-title").each((fe,ge)=>{ge=window.$(ge);let Ae=ge.parent().parent();ge.data("id")!==I&&$.tree("getNodeById",ge.data("id"))?($.tree("removeFromSelection",$.tree("getNodeById",ge.data("id"))),Ae.removeClass("jqtree-selected")):Ae.hasClass("jqtree-selected")||Ae.addClass("jqtree-selected")})})}function Oe(){a!=null&&a.selectNode&&a.selectNode({id:P})}function ct(I){const te=Lt(),$=te.tree("getNodeById",I);n(7,P=null),$&&te.tree("removeFromSelection",$)}function Lt(){return window.$(v)}function tt(I,te=null){return I.list?(x(I.list,te),I.list):I}function x(I,te){if(!te||te==="up"){let $=JSON.parse(JSON.stringify(I)).shift();$&&$.offset&&$.offset!==0&&I.unshift({id:"show-more-"+$.offset,offset:$.offset,showMoreDirection:"up",name:B.translate("Show more")})}if(!te||te==="down"){let $=JSON.parse(JSON.stringify(I)).pop();$&&$.offset&&$.total-1!==$.offset&&I.push({id:"show-more-"+$.offset,offset:$.offset,showMoreDirection:"down",name:B.translate("Show more")})}I.forEach($=>{$.children&&x($.children)})}function M(I){return I==="_self"?o:I==="_bookmark"?"Bookmark":le.get(["entityDefs",o,"links",I,"entity"])||le.get(["entityDefs",o,"fields",I,"entity"])}function j(I){A&&A.name===I.name||(n(6,O=""),n(4,_.value="",_),Le.clear("treeSearchValue",w),m==="list"?P&&(a!=null&&a.selectNode&&a.selectNode({id:P}),n(7,P=null)):n(7,P=null),n(1,A=I),Le.set("treeItem",o,I.name),ot.notify("Loading..."),cn().then(()=>{se()}))}function Y(){n(4,_.value="",_),m==="detail"&&Le.clear("treeWhereData",o),Z()}function Z(){n(6,O=_.value),O?Le.set("treeSearchValue",o,O):Le.clear("treeSearchValue",o),ot.notify("Loading..."),se()}function ve(){w==="Bookmark"&&se()}function Se(){return S}function Qe(I){Tt.get(o,"leftSidebar",null,null,te=>{S=te,n(5,E=te.layout.map(ue=>{const re=le.get(["entityDefs",o,"fields",ue.name,"type"]);let fe="";if(ue.name==="_self")fe=B.get("Global","scopeNamesPlural",o);else if(ue.name==="_bookmark")fe=B.get("Global","scopeNamesPlural","Bookmark");else{if(re=="link"){const ge=M(ue.name);fe=B.get("Global","scopeNamesPlural",ge)}fe||(fe=B.get(o,"links",ue.name)||B.get(o,"fields",ue.name)||B.get("Global","fields",ue.name))}return{name:ue.name,label:fe}}));const $=Le.get("treeItem",o);E.length>0&&(!$||!E.find(ue=>ue.name===$)?(Le.set("treeItem",o,E[0].name),n(1,A=E[0])):n(1,A=E.find(ue=>ue.name===$))),I()})}function J(){Qe(()=>{cn().then(()=>{se()})})}Rn(()=>{const I=Le.get("panelWidth",o);return I&&n(17,c=parseInt(I)||u),(window.innerWidth<=767||Le.get("catalog-tree-panel",o))&&n(0,d=!0),Qe(()=>{var te,$;E.length===0&&(n(0,d=!0),($=(te=mi.get())==null?void 0:te.user)!=null&&$.isAdmin||n(8,N=!0)),cn().then(()=>{n(6,O=Le.get("treeSearchValue",o)||null),O&&n(4,_.value=O,_),d||Pe()}),g&&g(b)}),()=>{k&&ae()}});function oe(I){qe[I?"unshift":"push"](()=>{b=I,n(3,b)})}const pe=I=>j(I);function Ie(I){qe[I?"unshift":"push"](()=>{_=I,n(4,_)})}const Ye=I=>I.key==="Enter"&&Z();function Pt(I){qe[I?"unshift":"push"](()=>{v=I,n(2,v)})}return t.$$set=I=>{"scope"in I&&n(18,o=I.scope),"model"in I&&n(19,l=I.model),"collection"in I&&n(20,s=I.collection),"callbacks"in I&&n(21,a=I.callbacks),"minWidth"in I&&n(22,u=I.minWidth),"maxWidth"in I&&n(23,f=I.maxWidth),"currentWidth"in I&&n(17,c=I.currentWidth),"isCollapsed"in I&&n(0,d=I.isCollapsed),"mode"in I&&n(24,m=I.mode),"maxSize"in I&&n(25,h=I.maxSize),"renderLayoutEditor"in I&&n(26,g=I.renderLayoutEditor)},t.$$.update=()=>{t.$$.dirty[0]&2228224&&c&&a!=null&&a.treeWidthChanged&&a.treeWidthChanged(c),t.$$.dirty[0]&131073&&n(10,i=d?"auto":`${c}px`),t.$$.dirty[0]&2&&(w=A?M(A.name):null),t.$$.dirty[0]&16777218&&n(9,r=A&&!["_self","_bookmark"].includes(A.name)&&m==="list")},[d,A,v,b,_,E,O,P,N,r,i,K,H,Oe,j,Y,Z,c,o,l,s,a,u,f,m,h,g,z,se,De,ct,ve,Se,J,oe,pe,Ie,Ye,Pt]}class _c extends Ue{constructor(e){super(),Ve(this,e,wc,vc,Ne,{scope:18,model:19,collection:20,callbacks:21,minWidth:22,maxWidth:23,currentWidth:17,isCollapsed:0,mode:24,maxSize:25,renderLayoutEditor:26,handleCollectionSearch:27,rebuildTree:28,selectTreeNode:29,unSelectTreeNode:30,reloadBookmarks:31,getLayoutData:32,refreshLayout:33},null,[-1,-1])}get handleCollectionSearch(){return this.$$.ctx[27]}get rebuildTree(){return this.$$.ctx[28]}get selectTreeNode(){return this.$$.ctx[29]}get unSelectTreeNode(){return this.$$.ctx[30]}get reloadBookmarks(){return this.$$.ctx[31]}get getLayoutData(){return this.$$.ctx[32]}get refreshLayout(){return this.$$.ctx[33]}}window.SvelteLanguage=B,window.SvelteUserData=mi,window.SvelteNotifier=ot,window.SvelteLayoutManager=Tt,window.SvelteMetadata=le,window.SvelteModelFactory=fr,window.SvelteConfig=na,window.SvelteStorage=Le,window.driver=jl,window.tippy=Pn,We.ApiRequestComponent=Zf,We.Favorites=hc,We.JobManagerIcon=Wu,We.LayoutComponent=Jf,We.Navigation=fc,We.TreePanel=_c,We.UpdatePanel=Yu,Object.defineProperty(We,Symbol.toStringTag,{value:"Module"})});
