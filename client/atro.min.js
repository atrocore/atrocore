(function(z,g){typeof exports=="object"&&typeof module<"u"?g(exports):typeof define=="function"&&define.amd?define(["exports"],g):(z=typeof globalThis<"u"?globalThis:z||self,g(z.Svelte={}))})(this,function(z){"use strict";var st=Object.defineProperty;var rt=(z,g,j)=>g in z?st(z,g,{enumerable:!0,configurable:!0,writable:!0,value:j}):z[g]=j;var ue=(z,g,j)=>rt(z,typeof g!="symbol"?g+"":g,j);function g(){}function j(t){return t()}function ce(){return Object.create(null)}function K(t){t.forEach(j)}function de(t){return typeof t=="function"}function V(t,e){return t!=t?e==e:t!==e||t&&typeof t=="object"||typeof t=="function"}let W;function he(t,e){return t===e?!0:(W||(W=document.createElement("a")),W.href=e,t===W.href)}function Ce(t){return Object.keys(t).length===0}function d(t,e){t.appendChild(e)}function q(t,e,n){t.insertBefore(e,n||null)}function S(t){t.parentNode&&t.parentNode.removeChild(t)}function p(t){return document.createElement(t)}function H(t){return document.createTextNode(t)}function C(){return H(" ")}function Ne(){return H("")}function A(t,e,n,i){return t.addEventListener(e,n,i),()=>t.removeEventListener(e,n,i)}function o(t,e,n){n==null?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function De(t){return Array.from(t.childNodes)}function $(t,e){e=""+e,t.data!==e&&(t.data=e)}function I(t,e,n,i){n==null?t.style.removeProperty(e):t.style.setProperty(e,n,"")}let x;function R(t){x=t}function ee(){if(!x)throw new Error("Function called outside component initialization");return x}function je(t){ee().$$.on_mount.push(t)}function He(t){ee().$$.after_update.push(t)}function Ie(t){ee().$$.on_destroy.push(t)}const F=[],J=[];let Q=[];const pe=[],Me=Promise.resolve();let te=!1;function Ae(){te||(te=!0,Me.then(_e))}function ne(t){Q.push(t)}const ie=new Set;let U=0;function _e(){if(U!==0)return;const t=x;do{try{for(;U<F.length;){const e=F[U];U++,R(e),Fe(e.$$)}}catch(e){throw F.length=0,U=0,e}for(R(null),F.length=0,U=0;J.length;)J.pop()();for(let e=0;e<Q.length;e+=1){const n=Q[e];ie.has(n)||(ie.add(n),n())}Q.length=0}while(F.length);for(;pe.length;)pe.pop()();te=!1,ie.clear(),R(t)}function Fe(t){if(t.fragment!==null){t.update(),K(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(ne)}}function Qe(t){const e=[],n=[];Q.forEach(i=>t.indexOf(i)===-1?e.push(i):n.push(i)),n.forEach(i=>i()),Q=e}const X=new Set;let Ue;function le(t,e){t&&t.i&&(X.delete(t),t.i(e))}function me(t,e,n,i){if(t&&t.o){if(X.has(t))return;X.add(t),Ue.c.push(()=>{X.delete(t)}),t.o(e)}}function ge(t){t&&t.c()}function se(t,e,n){const{fragment:i,after_update:l}=t.$$;i&&i.m(e,n),ne(()=>{const r=t.$$.on_mount.map(j).filter(de);t.$$.on_destroy?t.$$.on_destroy.push(...r):K(r),t.$$.on_mount=[]}),l.forEach(ne)}function re(t,e){const n=t.$$;n.fragment!==null&&(Qe(n.after_update),K(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function Ge(t,e){t.$$.dirty[0]===-1&&(F.push(t),Ae(),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function Y(t,e,n,i,l,r,f=null,a=[-1]){const _=x;R(t);const s=t.$$={fragment:null,ctx:[],props:r,update:g,not_equal:l,bound:ce(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(_?_.$$.context:[])),callbacks:ce(),dirty:a,skip_bound:!1,root:e.target||_.$$.root};f&&f(s.root);let c=!1;if(s.ctx=n?n(t,e.props||{},(u,b,...w)=>{const h=w.length?w[0]:b;return s.ctx&&l(s.ctx[u],s.ctx[u]=h)&&(!s.skip_bound&&s.bound[u]&&s.bound[u](h),c&&Ge(t,u)),b}):[],s.update(),c=!0,K(s.before_update),s.fragment=i?i(s.ctx):!1,e.target){if(e.hydrate){const u=De(e.target);s.fragment&&s.fragment.l(u),u.forEach(S)}else s.fragment&&s.fragment.c();e.intro&&le(t.$$.fragment),se(t,e.target,e.anchor),_e()}R(_)}class Z{constructor(){ue(this,"$$");ue(this,"$$set")}$destroy(){re(this,1),this.$destroy=g}$on(e,n){if(!de(n))return g;const i=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return i.push(n),()=>{const l=i.indexOf(n);l!==-1&&i.splice(l,1)}}$set(e){this.$$set&&!Ce(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}const Be="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(Be);const G=[];function oe(t,e=g){let n;const i=new Set;function l(a){if(V(t,a)&&(t=a,n)){const _=!G.length;for(const s of i)s[1](),G.push(s,t);if(_){for(let s=0;s<G.length;s+=2)G[s][0](G[s+1]);G.length=0}}}function r(a){l(a(t))}function f(a,_=g){const s=[a,_];return i.add(s),i.size===1&&(n=e(l,r)||g),a(t),()=>{i.delete(s),i.size===0&&n&&(n(),n=null)}}return{set:l,update:r,subscribe:f}}const fe=oe({}),N={setTranslations(t){fe.set(t)},has(t,e,n){let i=!1;return fe.subscribe(l=>{if(n in l&&e in l[n]&&t in l[n][e]){i=!0;return}})(),i},get(t,e,n){let i=n;return fe.subscribe(l=>{if(t in l&&e in l[t]&&n in l[t][e]){i=l[t][e][n];return}if(t in l&&e in l[t]&&n in l[t][e]){i=l[t][e][n];return}if(t=="Global"){i=n;return}i=null})(),i},translate(t,e=null,n=null){n=n||"Global",e=e||"labels";let i=N.get(n,e,t);return i===null&&n!="Global"&&(i=N.get("Global",e,t)),i},translateOption(t,e,n=null){let i=N.translate(e,"options",n);return i===null?"":typeof i=="object"?i[t]:t}},be=oe({}),we={set(t){be.set(t)},get(){let t=null;return be.subscribe(e=>{e&&(t=e)})(),t}},ke=oe(),ye={setNotifier(t){ke.set(t)},notify(t,e=null,n=2e3){ke.subscribe(i=>{i&&i.notify(t,e,2e3)})()}};function ve(t){let e,n,i,l,r,f,a,_,s,c,u,b,w,h,P;function v(L,D){return L[2]?xe:Ve}let m=v(t),y=m(t);return{c(){e=p("div"),n=p("div"),i=p("div"),l=p("span"),l.textContent=`${N.translate("queueManager","labels","QueueItem")}`,r=C(),f=p("span"),a=p("a"),a.innerHTML='<span aria-hidden="true">Ã—</span>',_=C(),y.c(),s=C(),c=p("a"),c.textContent=`${N.translate("View List")}`,u=C(),b=p("div"),w=p("div"),w.textContent=`${N.translate("Loading...")}`,o(l,"class","panel-heading-title"),o(a,"href","/"),o(a,"class","close svelte-1p6ppx8"),o(c,"href","#QueueItem"),o(c,"title",N.translate("View List")),o(c,"class","qp-view-list svelte-1p6ppx8"),o(f,"class","pull-right"),o(i,"class","panel-heading clearfix"),o(w,"class","list-container"),o(b,"class","panel-body"),o(n,"class","panel panel-default"),o(e,"class","queue-panel-container")},m(L,D){q(L,e,D),d(e,n),d(n,i),d(i,l),d(i,r),d(i,f),d(f,a),d(f,_),y.m(f,null),d(f,s),d(f,c),d(n,u),d(n,b),d(b,w),t[9](e),h||(P=A(a,"click",t[6]),h=!0)},p(L,D){m===(m=v(L))&&y?y.p(L,D):(y.d(1),y=m(L),y&&(y.c(),y.m(f,s)))},d(L){L&&S(e),y.d(),t[9](null),h=!1,P()}}}function Ve(t){let e,n,i;return{c(){e=p("a"),e.textContent=`${N.translate("Pause")}`,o(e,"href","/"),o(e,"title",N.translate("Pause")),o(e,"class","qm-button")},m(l,r){q(l,e,r),n||(i=A(e,"click",t[8]),n=!0)},p:g,d(l){l&&S(e),n=!1,i()}}}function xe(t){let e,n,i;return{c(){e=p("a"),e.textContent=`${N.translate("Start")}`,o(e,"href","/"),o(e,"title",N.translate("Start")),o(e,"class","qm-button")},m(l,r){q(l,e,r),n||(i=A(e,"click",t[7]),n=!0)},p:g,d(l){l&&S(e),n=!1,i()}}}function Re(t){let e,n=t[0]&&ve(t);return{c(){n&&n.c(),e=Ne()},m(i,l){n&&n.m(i,l),q(i,e,l)},p(i,[l]){i[0]?n?n.p(i,l):(n=ve(i),n.c(),n.m(e.parentNode,e)):n&&(n.d(1),n=null)},i:g,o:g,d(i){i&&S(e),n&&n.d(i)}}}function Je(t,e,n){let{isOpen:i=!1}=e,{close:l}=e,{icon:r}=e,f=!1;window.addEventListener("publicDataFetched",h=>{n(2,f=!!h.detail.qmPaused)});let a;function _(h){a&&!a.contains(h.target)&&r&&!r.contains(h.target)&&i===!0&&l()}je(()=>{document.addEventListener("click",_)}),Ie(()=>{document.removeEventListener("click",_)});async function s(h){let P=we.get();if(P)try{const v=await fetch("/api/v1/App/action/QueueManagerUpdate",{method:"POST",headers:{"Content-Type":"application/json","Authorization-Token":btoa(P.user.userName+":"+P.token)},body:JSON.stringify({pause:h})});if(!v.ok)throw new Error("Network response was not ok");await v.json(),ye.notify("Done","success")}catch(v){console.error("Error:",v)}}const c=h=>{h.preventDefault(),l()},u=h=>{h.preventDefault(),s(!1)},b=h=>{h.preventDefault(),s(!0)};function w(h){J[h?"unshift":"push"](()=>{a=h,n(3,a)})}return t.$$set=h=>{"isOpen"in h&&n(0,i=h.isOpen),"close"in h&&n(1,l=h.close),"icon"in h&&n(5,r=h.icon)},[i,l,f,a,s,r,c,u,b,w]}class Ke extends Z{constructor(e){super(),Y(this,e,Je,Re,V,{isOpen:0,close:1,icon:5})}}function Pe(t){let e;return{c(){e=p("span"),o(e,"class","fas fa-pause-circle pause-icon")},m(n,i){q(n,e,i)},d(n){n&&S(e)}}}function We(t){let e,n,i,l,r,f,a,_,s=t[2]&&Pe();return r=new Ke({props:{icon:t[0],isOpen:t[1],close:t[4]}}),{c(){e=p("a"),n=p("span"),i=C(),s&&s.c(),l=C(),ge(r.$$.fragment),o(n,"class","fas fa-tasks"),o(e,"href","/"),o(e,"class","notifications-button")},m(c,u){q(c,e,u),d(e,n),d(e,i),s&&s.m(e,null),t[6](e),q(c,l,u),se(r,c,u),f=!0,a||(_=A(e,"click",t[7]),a=!0)},p(c,[u]){c[2]?s||(s=Pe(),s.c(),s.m(e,null)):s&&(s.d(1),s=null);const b={};u&1&&(b.icon=c[0]),u&2&&(b.isOpen=c[1]),r.$set(b)},i(c){f||(le(r.$$.fragment,c),f=!0)},o(c){me(r.$$.fragment,c),f=!1},d(c){c&&(S(e),S(l)),s&&s.d(),t[6](null),re(r,c),a=!1,_()}}}function Xe(t,e,n){let{renderTable:i=()=>{}}=e,l,r=!1,f=!1;window.addEventListener("publicDataFetched",u=>{n(2,f=!!u.detail.qmPaused)});function a(){r||(n(1,r=!0),i())}function _(){n(1,r=!1),window.dispatchEvent(new Event("qmPanelClosed"))}function s(u){J[u?"unshift":"push"](()=>{l=u,n(0,l)})}const c=u=>{u.preventDefault(),a()};return t.$$set=u=>{"renderTable"in u&&n(5,i=u.renderTable)},[l,r,f,a,_,i,s,c]}class Ye extends Z{constructor(e){super(),Y(this,e,Xe,We,V,{renderTable:5})}}function Ze(t){let e,n=`${t[0]}px`,i=`${t[0]}px`,l=`${t[1]}px`;return{c(){e=p("div"),o(e,"class","loading-icon spinner svelte-yw8t7l"),I(e,"width",n),I(e,"height",i),I(e,"border-width",l)},m(r,f){q(r,e,f)},p(r,[f]){f&1&&n!==(n=`${r[0]}px`)&&I(e,"width",n),f&1&&i!==(i=`${r[0]}px`)&&I(e,"height",i),f&2&&l!==(l=`${r[1]}px`)&&I(e,"border-width",l)},i:g,o:g,d(r){r&&S(e)}}}function $e(t,e,n){let{size:i=40}=e,{thickness:l=4}=e;return t.$$set=r=>{"size"in r&&n(0,i=r.size),"thickness"in r&&n(1,l=r.thickness)},[i,l]}class et extends Z{constructor(e){super(),Y(this,e,$e,Ze,V,{size:0,thickness:1})}}function Se(t){let e,n;return{c(){e=p("img"),he(e.src,n=t[1])||o(e,"src",n),o(e,"class","logo"),o(e,"alt",t[0])},m(i,l){q(i,e,l)},p(i,l){l&2&&!he(e.src,n=i[1])&&o(e,"src",n),l&1&&o(e,"alt",i[0])},d(i){i&&S(e)}}}function qe(t){let e,n,i;return{c(){e=p("a"),n=p("i"),i=H("Restore the system"),o(n,"class","fa fa-history svelte-1qmezxs"),o(e,"href",t[2]),o(e,"target","_blank"),o(e,"class","btn btn-default svelte-1qmezxs"),o(e,"role","button"),I(e,"float","right")},m(l,r){q(l,e,r),d(e,n),d(e,i)},p(l,r){r&4&&o(e,"href",l[2])},d(l){l&&S(e)}}}function Le(t){let e,n,i,l,r,f;return{c(){e=p("hr"),n=C(),i=p("pre"),l=H(t[3]),o(i,"class","logs-container svelte-1qmezxs")},m(a,_){q(a,e,_),q(a,n,_),q(a,i,_),d(i,l),t[10](i),r||(f=A(i,"scroll",t[8]),r=!0)},p(a,_){_&8&&$(l,a[3])},d(a){a&&(S(e),S(n),S(i)),t[10](null),r=!1,f()}}}function tt(t){let e,n,i,l,r,f,a,_,s,c,u,b,w,h,P,v,m,y,L=t[4]?"Hide":"Show",D,Ee,Oe,Te,B,ae,ze,E=t[1]&&Se(t);c=new et({props:{size:"40",thickness:"5"}});let O=t[2]&&qe(t),T=t[4]&&Le(t);return{c(){e=p("div"),n=p("div"),i=p("div"),E&&E.c(),l=C(),r=p("div"),f=p("div"),a=p("h3"),a.textContent="System is updating...",_=C(),s=p("section"),ge(c.$$.fragment),u=C(),b=p("h5"),w=H(t[5]),h=C(),P=p("section"),v=p("div"),m=p("button"),y=p("i"),D=H(L),Ee=H(" logs"),Oe=C(),O&&O.c(),Te=C(),T&&T.c(),o(i,"class","logo-container"),o(n,"class","panel-heading"),o(b,"class","svelte-1qmezxs"),o(s,"class","progress-section svelte-1qmezxs"),o(y,"class","fa fa-list svelte-1qmezxs"),o(m,"class","btn btn-default svelte-1qmezxs"),o(v,"class","buttons"),o(P,"class","logs-section"),o(f,"class","form-group"),o(r,"class","panel-body"),o(e,"id","login"),o(e,"class","panel panel-default panel-updating")},m(k,M){q(k,e,M),d(e,n),d(n,i),E&&E.m(i,null),d(e,l),d(e,r),d(r,f),d(f,a),d(f,_),d(f,s),se(c,s,null),d(s,u),d(s,b),d(b,w),d(f,h),d(f,P),d(P,v),d(v,m),d(m,y),d(m,D),d(m,Ee),d(v,Oe),O&&O.m(v,null),d(P,Te),T&&T.m(P,null),B=!0,ae||(ze=A(m,"click",t[7]),ae=!0)},p(k,[M]){k[1]?E?E.p(k,M):(E=Se(k),E.c(),E.m(i,null)):E&&(E.d(1),E=null),(!B||M&32)&&$(w,k[5]),(!B||M&16)&&L!==(L=k[4]?"Hide":"Show")&&$(D,L),k[2]?O?O.p(k,M):(O=qe(k),O.c(),O.m(v,null)):O&&(O.d(1),O=null),k[4]?T?T.p(k,M):(T=Le(k),T.c(),T.m(P,null)):T&&(T.d(1),T=null)},i(k){B||(le(c.$$.fragment,k),B=!0)},o(k){me(c.$$.fragment,k),B=!1},d(k){k&&S(e),E&&E.d(),re(c),O&&O.d(),T&&T.d(),ae=!1,ze()}}}function nt(t){return t.replace(/^\d{2,4}.\d{2}.\d{2,4} \d{2}:\d{2}:\d{2}/g,"").replace(/^[\-\|\s]+/,"")}function it(t,e,n){let{applicationName:i="AtroCore"}=e,{logoPath:l=null}=e,{logFilePath:r}=e,{restoreLink:f=null}=e,a=!1,_=!1,s=0,c=!0,u="",b,w;He(()=>{w&&c&&w.scrollTo(0,w.scrollHeight)});function h(){n(4,a=!a),a||(c=!0)}function P(m){const y=m.currentTarget;c=y.scrollHeight-y.scrollTop===y.clientHeight}setInterval(()=>{fetch(r,{cache:"no-store"}).then(async m=>{s+=1,n(3,u=(await m.text()).trim()),u.search("composer")>=0&&(_=!0),s>65&&!_&&n(3,u="Something wrong. Please, reboot the server.")}).catch(()=>{s+=1,_?location.reload():s>65&&n(3,u="Something wrong. Please, reboot the server.")})},1e3);function v(m){J[m?"unshift":"push"](()=>{w=m,n(6,w)})}return t.$$set=m=>{"applicationName"in m&&n(0,i=m.applicationName),"logoPath"in m&&n(1,l=m.logoPath),"logFilePath"in m&&n(9,r=m.logFilePath),"restoreLink"in m&&n(2,f=m.restoreLink)},t.$$.update=()=>{if(t.$$.dirty&8)if(u){const m=u.trim().split(`
`);n(5,b=nt(m.pop()))}else n(5,b="Starting...")},[i,l,f,u,a,b,w,h,P,r,v]}class lt extends Z{constructor(e){super(),Y(this,e,it,tt,V,{applicationName:0,logoPath:1,logFilePath:9,restoreLink:2})}}window.SvelteLanguage=N,window.SvelteUserData=we,window.SvelteNotifier=ye,z.QueueManagerIcon=Ye,z.UpdatePanel=lt,Object.defineProperty(z,Symbol.toStringTag,{value:"Module"})});
