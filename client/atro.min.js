(function(De,Ne){typeof exports=="object"&&typeof module<"u"?Ne(exports):typeof define=="function"&&define.amd?define(["exports"],Ne):(De=typeof globalThis<"u"?globalThis:De||self,Ne(De.Svelte={}))})(this,function(De){"use strict";var Ra=Object.defineProperty;var Ba=(De,Ne,dt)=>Ne in De?Ra(De,Ne,{enumerable:!0,configurable:!0,writable:!0,value:dt}):De[Ne]=dt;var ui=(De,Ne,dt)=>Ba(De,typeof Ne!="symbol"?Ne+"":Ne,dt);let Ne={};function dt(t={}){Ne={animate:!0,allowClose:!0,overlayOpacity:.7,smoothScroll:!1,disableActiveInteraction:!1,showProgress:!1,stagePadding:10,stageRadius:5,popoverOffset:10,showButtons:["next","previous","close"],disableButtons:[],overlayColor:"#000",...t}}function B(t){return t?Ne[t]:Ne}function ln(t,e,n,i){return(t/=i/2)<1?n/2*t*t+e:-n/2*(--t*(t-2)-1)+e}function di(t){const e='a[href]:not([disabled]), button:not([disabled]), textarea:not([disabled]), input[type="text"]:not([disabled]), input[type="radio"]:not([disabled]), input[type="checkbox"]:not([disabled]), select:not([disabled])';return t.flatMap(n=>{const i=n.matches(e),l=Array.from(n.querySelectorAll(e));return[...i?[n]:[],...l]}).filter(n=>getComputedStyle(n).pointerEvents!=="none"&&po(n))}function ci(t){if(!t||fo(t))return;const e=B("smoothScroll");t.scrollIntoView({behavior:!e||co(t)?"auto":"smooth",inline:"center",block:"center"})}function co(t){if(!t||!t.parentElement)return;const e=t.parentElement;return e.scrollHeight>e.clientHeight}function fo(t){const e=t.getBoundingClientRect();return e.top>=0&&e.left>=0&&e.bottom<=(window.innerHeight||document.documentElement.clientHeight)&&e.right<=(window.innerWidth||document.documentElement.clientWidth)}function po(t){return!!(t.offsetWidth||t.offsetHeight||t.getClientRects().length)}let on={};function Se(t,e){on[t]=e}function H(t){return t?on[t]:on}function fi(){on={}}let rn={};function an(t,e){rn[t]=e}function bt(t){var e;(e=rn[t])==null||e.call(rn)}function ho(){rn={}}function mo(t,e,n,i){let l=H("__activeStagePosition");const o=l||n.getBoundingClientRect(),r=i.getBoundingClientRect(),s=ln(t,o.x,r.x-o.x,e),a=ln(t,o.y,r.y-o.y,e),u=ln(t,o.width,r.width-o.width,e),d=ln(t,o.height,r.height-o.height,e);l={x:s,y:a,width:u,height:d},hi(l),Se("__activeStagePosition",l)}function pi(t){if(!t)return;const e=t.getBoundingClientRect(),n={x:e.x,y:e.y,width:e.width,height:e.height};Se("__activeStagePosition",n),hi(n)}function go(){const t=H("__activeStagePosition"),e=H("__overlaySvg");if(!t)return;if(!e){console.warn("No stage svg found.");return}const n=window.innerWidth,i=window.innerHeight;e.setAttribute("viewBox",`0 0 ${n} ${i}`)}function bo(t){const e=vo(t);document.body.appendChild(e),vi(e,n=>{n.target.tagName==="path"&&bt("overlayClick")}),Se("__overlaySvg",e)}function hi(t){const e=H("__overlaySvg");if(!e){bo(t);return}const n=e.firstElementChild;if((n==null?void 0:n.tagName)!=="path")throw new Error("no path element found in stage svg");n.setAttribute("d",mi(t))}function vo(t){const e=window.innerWidth,n=window.innerHeight,i=document.createElementNS("http://www.w3.org/2000/svg","svg");i.classList.add("driver-overlay","driver-overlay-animated"),i.setAttribute("viewBox",`0 0 ${e} ${n}`),i.setAttribute("xmlSpace","preserve"),i.setAttribute("xmlnsXlink","http://www.w3.org/1999/xlink"),i.setAttribute("version","1.1"),i.setAttribute("preserveAspectRatio","xMinYMin slice"),i.style.fillRule="evenodd",i.style.clipRule="evenodd",i.style.strokeLinejoin="round",i.style.strokeMiterlimit="2",i.style.zIndex="10000",i.style.position="fixed",i.style.top="0",i.style.left="0",i.style.width="100%",i.style.height="100%";const l=document.createElementNS("http://www.w3.org/2000/svg","path");return l.setAttribute("d",mi(t)),l.style.fill=B("overlayColor")||"rgb(0,0,0)",l.style.opacity=`${B("overlayOpacity")}`,l.style.pointerEvents="auto",l.style.cursor="auto",i.appendChild(l),i}function mi(t){const e=window.innerWidth,n=window.innerHeight,i=B("stagePadding")||0,l=B("stageRadius")||0,o=t.width+i*2,r=t.height+i*2,s=Math.min(l,o/2,r/2),a=Math.floor(Math.max(s,0)),u=t.x-i+a,d=t.y-i,c=o-a*2,f=r-a*2;return`M${e},0L0,0L0,${n}L${e},${n}L${e},0Z
    M${u},${d} h${c} a${a},${a} 0 0 1 ${a},${a} v${f} a${a},${a} 0 0 1 -${a},${a} h-${c} a${a},${a} 0 0 1 -${a},-${a} v-${f} a${a},${a} 0 0 1 ${a},-${a} z`}function _o(){const t=H("__overlaySvg");t&&t.remove()}function yo(){const t=document.getElementById("driver-dummy-element");if(t)return t;let e=document.createElement("div");return e.id="driver-dummy-element",e.style.width="0",e.style.height="0",e.style.pointerEvents="none",e.style.opacity="0",e.style.position="fixed",e.style.top="50%",e.style.left="50%",document.body.appendChild(e),e}function gi(t){const{element:e}=t;let n=typeof e=="string"?document.querySelector(e):e;n||(n=yo()),Eo(n,t)}function wo(){const t=H("__activeElement"),e=H("__activeStep");t&&(pi(t),go(),ki(t,e))}function Eo(t,e){const n=Date.now(),i=H("__activeStep"),l=H("__activeElement")||t,o=!l||l===t,r=t.id==="driver-dummy-element",s=l.id==="driver-dummy-element",a=B("animate"),u=e.onHighlightStarted||B("onHighlightStarted"),d=(e==null?void 0:e.onHighlighted)||B("onHighlighted"),c=(i==null?void 0:i.onDeselected)||B("onDeselected"),f=B(),h=H();!o&&c&&c(s?void 0:l,i,{config:f,state:h}),u&&u(r?void 0:t,e,{config:f,state:h});const p=!o&&a;let g=!1;Lo(),Se("previousStep",i),Se("previousElement",l),Se("activeStep",e),Se("activeElement",t);const m=()=>{if(H("__transitionCallback")!==m)return;const v=Date.now()-n,C=400-v<=400/2;e.popover&&C&&!g&&p&&(_i(t,e),g=!0),B("animate")&&v<400?mo(v,400,l,t):(pi(t),d&&d(r?void 0:t,e,{config:B(),state:H()}),Se("__transitionCallback",void 0),Se("__previousStep",i),Se("__previousElement",l),Se("__activeStep",e),Se("__activeElement",t)),window.requestAnimationFrame(m)};Se("__transitionCallback",m),window.requestAnimationFrame(m),ci(t),!p&&e.popover&&_i(t,e),l.classList.remove("driver-active-element","driver-no-interaction"),l.removeAttribute("aria-haspopup"),l.removeAttribute("aria-expanded"),l.removeAttribute("aria-controls"),B("disableActiveInteraction")&&t.classList.add("driver-no-interaction"),t.classList.add("driver-active-element"),t.setAttribute("aria-haspopup","dialog"),t.setAttribute("aria-expanded","true"),t.setAttribute("aria-controls","driver-popover-content")}function ko(){var t;(t=document.getElementById("driver-dummy-element"))==null||t.remove(),document.querySelectorAll(".driver-active-element").forEach(e=>{e.classList.remove("driver-active-element","driver-no-interaction"),e.removeAttribute("aria-haspopup"),e.removeAttribute("aria-expanded"),e.removeAttribute("aria-controls")})}function Bt(){const t=H("__resizeTimeout");t&&window.cancelAnimationFrame(t),Se("__resizeTimeout",window.requestAnimationFrame(wo))}function Do(t){var e;if(!H("isInitialized")||!(t.key==="Tab"||t.keyCode===9))return;const n=H("__activeElement"),i=(e=H("popover"))==null?void 0:e.wrapper,l=di([...i?[i]:[],...n?[n]:[]]),o=l[0],r=l[l.length-1];if(t.preventDefault(),t.shiftKey){const s=l[l.indexOf(document.activeElement)-1]||r;s==null||s.focus()}else{const s=l[l.indexOf(document.activeElement)+1]||o;s==null||s.focus()}}function bi(t){var e;((e=B("allowKeyboardControl"))==null||e)&&(t.key==="Escape"?bt("escapePress"):t.key==="ArrowRight"?bt("arrowRightPress"):t.key==="ArrowLeft"&&bt("arrowLeftPress"))}function vi(t,e,n){const i=(l,o)=>{const r=l.target;t.contains(r)&&((!n||n(r))&&(l.preventDefault(),l.stopPropagation(),l.stopImmediatePropagation()),o==null||o(l))};document.addEventListener("pointerdown",i,!0),document.addEventListener("mousedown",i,!0),document.addEventListener("pointerup",i,!0),document.addEventListener("mouseup",i,!0),document.addEventListener("click",l=>{i(l,e)},!0)}function So(){window.addEventListener("keyup",bi,!1),window.addEventListener("keydown",Do,!1),window.addEventListener("resize",Bt),window.addEventListener("scroll",Bt)}function Co(){window.removeEventListener("keyup",bi),window.removeEventListener("resize",Bt),window.removeEventListener("scroll",Bt)}function Lo(){const t=H("popover");t&&(t.wrapper.style.display="none")}function _i(t,e){var n,i;let l=H("popover");l&&document.body.removeChild(l.wrapper),l=Io(),document.body.appendChild(l.wrapper);const{title:o,description:r,showButtons:s,disableButtons:a,showProgress:u,nextBtnText:d=B("nextBtnText")||"Next &rarr;",prevBtnText:c=B("prevBtnText")||"&larr; Previous",progressText:f=B("progressText")||"{current} of {total}"}=e.popover||{};l.nextButton.innerHTML=d,l.previousButton.innerHTML=c,l.progress.innerHTML=f,o?(l.title.innerHTML=o,l.title.style.display="block"):l.title.style.display="none",r?(l.description.innerHTML=r,l.description.style.display="block"):l.description.style.display="none";const h=s||B("showButtons"),p=u||B("showProgress")||!1,g=(h==null?void 0:h.includes("next"))||(h==null?void 0:h.includes("previous"))||p;l.closeButton.style.display=h.includes("close")?"block":"none",g?(l.footer.style.display="flex",l.progress.style.display=p?"block":"none",l.nextButton.style.display=h.includes("next")?"block":"none",l.previousButton.style.display=h.includes("previous")?"block":"none"):l.footer.style.display="none";const m=a||B("disableButtons")||[];m!=null&&m.includes("next")&&(l.nextButton.disabled=!0,l.nextButton.classList.add("driver-popover-btn-disabled")),m!=null&&m.includes("previous")&&(l.previousButton.disabled=!0,l.previousButton.classList.add("driver-popover-btn-disabled")),m!=null&&m.includes("close")&&(l.closeButton.disabled=!0,l.closeButton.classList.add("driver-popover-btn-disabled"));const v=l.wrapper;v.style.display="block",v.style.left="",v.style.top="",v.style.bottom="",v.style.right="",v.id="driver-popover-content",v.setAttribute("role","dialog"),v.setAttribute("aria-labelledby","driver-popover-title"),v.setAttribute("aria-describedby","driver-popover-description");const C=l.arrow;C.className="driver-popover-arrow";const S=((n=e.popover)==null?void 0:n.popoverClass)||B("popoverClass")||"";v.className=`driver-popover ${S}`.trim(),vi(l.wrapper,w=>{var L,E,W;const Y=w.target,F=((L=e.popover)==null?void 0:L.onNextClick)||B("onNextClick"),K=((E=e.popover)==null?void 0:E.onPrevClick)||B("onPrevClick"),Q=((W=e.popover)==null?void 0:W.onCloseClick)||B("onCloseClick");if(Y.classList.contains("driver-popover-next-btn"))return F?F(t,e,{config:B(),state:H()}):bt("nextClick");if(Y.classList.contains("driver-popover-prev-btn"))return K?K(t,e,{config:B(),state:H()}):bt("prevClick");if(Y.classList.contains("driver-popover-close-btn"))return Q?Q(t,e,{config:B(),state:H()}):bt("closeClick")},w=>!(l!=null&&l.description.contains(w))&&!(l!=null&&l.title.contains(w))&&typeof w.className=="string"&&w.className.includes("driver-popover")),Se("popover",l);const D=((i=e.popover)==null?void 0:i.onPopoverRender)||B("onPopoverRender");D&&D(l,{config:B(),state:H()}),ki(t,e),ci(v);const y=t.classList.contains("driver-dummy-element"),P=di([v,...y?[]:[t]]);P.length>0&&P[0].focus()}function yi(){const t=H("popover");if(!(t!=null&&t.wrapper))return;const e=t.wrapper.getBoundingClientRect(),n=B("stagePadding")||0,i=B("popoverOffset")||0;return{width:e.width+n+i,height:e.height+n+i,realWidth:e.width,realHeight:e.height}}function wi(t,e){const{elementDimensions:n,popoverDimensions:i,popoverPadding:l,popoverArrowDimensions:o}=e;return t==="start"?Math.max(Math.min(n.top-l,window.innerHeight-i.realHeight-o.width),o.width):t==="end"?Math.max(Math.min(n.top-(i==null?void 0:i.realHeight)+n.height+l,window.innerHeight-(i==null?void 0:i.realHeight)-o.width),o.width):t==="center"?Math.max(Math.min(n.top+n.height/2-(i==null?void 0:i.realHeight)/2,window.innerHeight-(i==null?void 0:i.realHeight)-o.width),o.width):0}function Ei(t,e){const{elementDimensions:n,popoverDimensions:i,popoverPadding:l,popoverArrowDimensions:o}=e;return t==="start"?Math.max(Math.min(n.left-l,window.innerWidth-i.realWidth-o.width),o.width):t==="end"?Math.max(Math.min(n.left-(i==null?void 0:i.realWidth)+n.width+l,window.innerWidth-(i==null?void 0:i.realWidth)-o.width),o.width):t==="center"?Math.max(Math.min(n.left+n.width/2-(i==null?void 0:i.realWidth)/2,window.innerWidth-(i==null?void 0:i.realWidth)-o.width),o.width):0}function ki(t,e){const n=H("popover");if(!n)return;const{align:i="start",side:l="left"}=(e==null?void 0:e.popover)||{},o=i,r=t.id==="driver-dummy-element"?"over":l,s=B("stagePadding")||0,a=yi(),u=n.arrow.getBoundingClientRect(),d=t.getBoundingClientRect(),c=d.top-a.height;let f=c>=0;const h=window.innerHeight-(d.bottom+a.height);let p=h>=0;const g=d.left-a.width;let m=g>=0;const v=window.innerWidth-(d.right+a.width);let C=v>=0;const S=!f&&!p&&!m&&!C;let D=r;if(r==="top"&&f?C=m=p=!1:r==="bottom"&&p?C=m=f=!1:r==="left"&&m?C=f=p=!1:r==="right"&&C&&(m=f=p=!1),r==="over"){const y=window.innerWidth/2-a.realWidth/2,P=window.innerHeight/2-a.realHeight/2;n.wrapper.style.left=`${y}px`,n.wrapper.style.right="auto",n.wrapper.style.top=`${P}px`,n.wrapper.style.bottom="auto"}else if(S){const y=window.innerWidth/2-(a==null?void 0:a.realWidth)/2,P=10;n.wrapper.style.left=`${y}px`,n.wrapper.style.right="auto",n.wrapper.style.bottom=`${P}px`,n.wrapper.style.top="auto"}else if(m){const y=Math.min(g,window.innerWidth-(a==null?void 0:a.realWidth)-u.width),P=wi(o,{elementDimensions:d,popoverDimensions:a,popoverPadding:s,popoverArrowDimensions:u});n.wrapper.style.left=`${y}px`,n.wrapper.style.top=`${P}px`,n.wrapper.style.bottom="auto",n.wrapper.style.right="auto",D="left"}else if(C){const y=Math.min(v,window.innerWidth-(a==null?void 0:a.realWidth)-u.width),P=wi(o,{elementDimensions:d,popoverDimensions:a,popoverPadding:s,popoverArrowDimensions:u});n.wrapper.style.right=`${y}px`,n.wrapper.style.top=`${P}px`,n.wrapper.style.bottom="auto",n.wrapper.style.left="auto",D="right"}else if(f){const y=Math.min(c,window.innerHeight-a.realHeight-u.width);let P=Ei(o,{elementDimensions:d,popoverDimensions:a,popoverPadding:s,popoverArrowDimensions:u});n.wrapper.style.top=`${y}px`,n.wrapper.style.left=`${P}px`,n.wrapper.style.bottom="auto",n.wrapper.style.right="auto",D="top"}else if(p){const y=Math.min(h,window.innerHeight-(a==null?void 0:a.realHeight)-u.width);let P=Ei(o,{elementDimensions:d,popoverDimensions:a,popoverPadding:s,popoverArrowDimensions:u});n.wrapper.style.left=`${P}px`,n.wrapper.style.bottom=`${y}px`,n.wrapper.style.top="auto",n.wrapper.style.right="auto",D="bottom"}S?n.arrow.classList.add("driver-popover-arrow-none"):Po(o,D,t)}function Po(t,e,n){const i=H("popover");if(!i)return;const l=n.getBoundingClientRect(),o=yi(),r=i.arrow,s=o.width,a=window.innerWidth,u=l.width,d=l.left,c=o.height,f=window.innerHeight,h=l.top,p=l.height;r.className="driver-popover-arrow";let g=e,m=t;e==="top"?(d+u<=0?(g="right",m="end"):d+u-s<=0&&(g="top",m="start"),d>=a?(g="left",m="end"):d+s>=a&&(g="top",m="end")):e==="bottom"?(d+u<=0?(g="right",m="start"):d+u-s<=0&&(g="bottom",m="start"),d>=a?(g="left",m="start"):d+s>=a&&(g="bottom",m="end")):e==="left"?(h+p<=0?(g="bottom",m="end"):h+p-c<=0&&(g="left",m="start"),h>=f?(g="top",m="end"):h+c>=f&&(g="left",m="end")):e==="right"&&(h+p<=0?(g="bottom",m="start"):h+p-c<=0&&(g="right",m="start"),h>=f?(g="top",m="start"):h+c>=f&&(g="right",m="end")),g?(r.classList.add(`driver-popover-arrow-side-${g}`),r.classList.add(`driver-popover-arrow-align-${m}`)):r.classList.add("driver-popover-arrow-none")}function Io(){const t=document.createElement("div");t.classList.add("driver-popover");const e=document.createElement("div");e.classList.add("driver-popover-arrow");const n=document.createElement("header");n.id="driver-popover-title",n.classList.add("driver-popover-title"),n.style.display="none",n.innerText="Popover Title";const i=document.createElement("div");i.id="driver-popover-description",i.classList.add("driver-popover-description"),i.style.display="none",i.innerText="Popover description is here";const l=document.createElement("button");l.type="button",l.classList.add("driver-popover-close-btn"),l.setAttribute("aria-label","Close"),l.innerHTML="&times;";const o=document.createElement("footer");o.classList.add("driver-popover-footer");const r=document.createElement("span");r.classList.add("driver-popover-progress-text"),r.innerText="";const s=document.createElement("span");s.classList.add("driver-popover-navigation-btns");const a=document.createElement("button");a.type="button",a.classList.add("driver-popover-prev-btn"),a.innerHTML="&larr; Previous";const u=document.createElement("button");return u.type="button",u.classList.add("driver-popover-next-btn"),u.innerHTML="Next &rarr;",s.appendChild(a),s.appendChild(u),o.appendChild(r),o.appendChild(s),t.appendChild(l),t.appendChild(e),t.appendChild(n),t.appendChild(i),t.appendChild(o),{wrapper:t,arrow:e,title:n,description:i,footer:o,previousButton:a,nextButton:u,closeButton:l,footerButtons:s,progress:r}}function To(){var t;const e=H("popover");e&&((t=e.wrapper.parentElement)==null||t.removeChild(e.wrapper))}function Ao(t={}){dt(t);function e(){B("allowClose")&&u()}function n(){const d=H("activeIndex"),c=B("steps")||[];if(typeof d>"u")return;const f=d+1;c[f]?a(f):u()}function i(){const d=H("activeIndex"),c=B("steps")||[];if(typeof d>"u")return;const f=d-1;c[f]?a(f):u()}function l(d){(B("steps")||[])[d]?a(d):u()}function o(){var d;if(H("__transitionCallback"))return;const c=H("activeIndex"),f=H("__activeStep"),h=H("__activeElement");if(typeof c>"u"||typeof f>"u"||typeof H("activeIndex")>"u")return;const p=((d=f.popover)==null?void 0:d.onPrevClick)||B("onPrevClick");if(p)return p(h,f,{config:B(),state:H()});i()}function r(){var d;if(H("__transitionCallback"))return;const c=H("activeIndex"),f=H("__activeStep"),h=H("__activeElement");if(typeof c>"u"||typeof f>"u")return;const p=((d=f.popover)==null?void 0:d.onNextClick)||B("onNextClick");if(p)return p(h,f,{config:B(),state:H()});n()}function s(){H("isInitialized")||(Se("isInitialized",!0),document.body.classList.add("driver-active",B("animate")?"driver-fade":"driver-simple"),So(),an("overlayClick",e),an("escapePress",e),an("arrowLeftPress",o),an("arrowRightPress",r))}function a(d=0){var c,f,h,p,g,m,v,C;const S=B("steps");if(!S){console.error("No steps to drive through"),u();return}if(!S[d]){u();return}Se("__activeOnDestroyed",document.activeElement),Se("activeIndex",d);const D=S[d],y=S[d+1],P=S[d-1],w=((c=D.popover)==null?void 0:c.doneBtnText)||B("doneBtnText")||"Done",L=B("allowClose"),E=typeof((f=D.popover)==null?void 0:f.showProgress)<"u"?(h=D.popover)==null?void 0:h.showProgress:B("showProgress"),W=(((p=D.popover)==null?void 0:p.progressText)||B("progressText")||"{{current}} of {{total}}").replace("{{current}}",`${d+1}`).replace("{{total}}",`${S.length}`),Y=((g=D.popover)==null?void 0:g.showButtons)||B("showButtons"),F=["next","previous",...L?["close"]:[]].filter(q=>!(Y!=null&&Y.length)||Y.includes(q)),K=((m=D.popover)==null?void 0:m.onNextClick)||B("onNextClick"),Q=((v=D.popover)==null?void 0:v.onPrevClick)||B("onPrevClick"),A=((C=D.popover)==null?void 0:C.onCloseClick)||B("onCloseClick");gi({...D,popover:{showButtons:F,nextBtnText:y?void 0:w,disableButtons:[...P?[]:["previous"]],showProgress:E,progressText:W,onNextClick:K||(()=>{y?a(d+1):u()}),onPrevClick:Q||(()=>{a(d-1)}),onCloseClick:A||(()=>{u()}),...(D==null?void 0:D.popover)||{}}})}function u(d=!0){const c=H("__activeElement"),f=H("__activeStep"),h=H("__activeOnDestroyed"),p=B("onDestroyStarted");if(d&&p){const v=!c||(c==null?void 0:c.id)==="driver-dummy-element";p(v?void 0:c,f,{config:B(),state:H()});return}const g=(f==null?void 0:f.onDeselected)||B("onDeselected"),m=B("onDestroyed");if(document.body.classList.remove("driver-active","driver-fade","driver-simple"),Co(),To(),ko(),_o(),ho(),fi(),c&&f){const v=c.id==="driver-dummy-element";g&&g(v?void 0:c,f,{config:B(),state:H()}),m&&m(v?void 0:c,f,{config:B(),state:H()})}h&&h.focus()}return{isActive:()=>H("isInitialized")||!1,refresh:Bt,drive:(d=0)=>{s(),a(d)},setConfig:dt,setSteps:d=>{fi(),dt({...B(),steps:d})},getConfig:B,getState:H,getActiveIndex:()=>H("activeIndex"),isFirstStep:()=>H("activeIndex")===0,isLastStep:()=>{const d=B("steps")||[],c=H("activeIndex");return c!==void 0&&c===d.length-1},getActiveStep:()=>H("activeStep"),getActiveElement:()=>H("activeElement"),getPreviousElement:()=>H("previousElement"),getPreviousStep:()=>H("previousStep"),moveNext:n,movePrevious:i,moveTo:l,hasNextStep:()=>{const d=B("steps")||[],c=H("activeIndex");return c!==void 0&&d[c+1]},hasPreviousStep:()=>{const d=B("steps")||[],c=H("activeIndex");return c!==void 0&&d[c-1]},highlight:d=>{s(),gi({...d,popover:d.popover?{showButtons:[],showProgress:!1,progressText:"",...d.popover}:void 0})},destroy:()=>{u(!1)}}}function Ee(){}const Di=t=>t;function Ht(t,e){for(const n in e)t[n]=e[n];return t}function Si(t){return t()}function Ci(){return Object.create(null)}function Ye(t){t.forEach(Si)}function sn(t){return typeof t=="function"}function ge(t,e){return t!=t?e==e:t!==e||t&&typeof t=="object"||typeof t=="function"}let un;function Li(t,e){return t===e?!0:(un||(un=document.createElement("a")),un.href=e,t===un.href)}function Oo(t){return Object.keys(t).length===0}function Pi(t,e,n,i){if(t){const l=Ii(t,e,n,i);return t[0](l)}}function Ii(t,e,n,i){return t[1]&&i?Ht(n.ctx.slice(),t[1](i(e))):n.ctx}function Ti(t,e,n,i){if(t[2]&&i){const l=t[2](i(n));if(e.dirty===void 0)return l;if(typeof l=="object"){const o=[],r=Math.max(e.dirty.length,l.length);for(let s=0;s<r;s+=1)o[s]=e.dirty[s]|l[s];return o}return e.dirty|l}return e.dirty}function Ai(t,e,n,i,l,o){if(l){const r=Ii(e,n,i,o);t.p(r,l)}}function Oi(t){if(t.ctx.length>32){const e=[],n=t.ctx.length/32;for(let i=0;i<n;i++)e[i]=-1;return e}return-1}const Mi=typeof window<"u";let Mo=Mi?()=>window.performance.now():()=>Date.now(),Mn=Mi?t=>requestAnimationFrame(t):Ee;const wt=new Set;function Ni(t){wt.forEach(e=>{e.c(t)||(wt.delete(e),e.f())}),wt.size!==0&&Mn(Ni)}function No(t){let e;return wt.size===0&&Mn(Ni),{promise:new Promise(n=>{wt.add(e={c:t,f:n})}),abort(){wt.delete(e)}}}function _(t,e){t.appendChild(e)}function Fi(t){if(!t)return document;const e=t.getRootNode?t.getRootNode():t.ownerDocument;return e&&e.host?e:t.ownerDocument}function Fo(t){const e=k("style");return e.textContent="/* empty */",Ro(Fi(t),e),e.sheet}function Ro(t,e){return _(t.head||t,e),e.sheet}function G(t,e,n){t.insertBefore(e,n||null)}function j(t){t.parentNode&&t.parentNode.removeChild(t)}function jt(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}function k(t){return document.createElement(t)}function ce(t){return document.createTextNode(t)}function R(){return ce(" ")}function Nn(){return ce("")}function ne(t,e,n,i){return t.addEventListener(e,n,i),()=>t.removeEventListener(e,n,i)}function ct(t){return function(e){return e.preventDefault(),t.call(this,e)}}function Fn(t){return function(e){return e.stopPropagation(),t.call(this,e)}}function b(t,e,n){n==null?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}const Bo=["width","height"];function ft(t,e){const n=Object.getOwnPropertyDescriptors(t.__proto__);for(const i in e)e[i]==null?t.removeAttribute(i):i==="style"?t.style.cssText=e[i]:i==="__value"?t.value=t[i]=e[i]:n[i]&&n[i].set&&Bo.indexOf(i)===-1?t[i]=e[i]:b(t,i,e[i])}function Ho(t){return Array.from(t.childNodes)}function Re(t,e){e=""+e,t.data!==e&&(t.data=e)}function se(t,e,n,i){n==null?t.style.removeProperty(e):t.style.setProperty(e,n,"")}function be(t,e,n){t.classList.toggle(e,!!n)}function Ri(t,e,{bubbles:n=!1,cancelable:i=!1}={}){return new CustomEvent(t,{detail:e,bubbles:n,cancelable:i})}const dn=new Map;let cn=0;function jo(t){let e=5381,n=t.length;for(;n--;)e=(e<<5)-e^t.charCodeAt(n);return e>>>0}function Wo(t,e){const n={stylesheet:Fo(e),rules:{}};return dn.set(t,n),n}function Bi(t,e,n,i,l,o,r,s=0){const a=16.666/i;let u=`{
`;for(let m=0;m<=1;m+=a){const v=e+(n-e)*o(m);u+=m*100+`%{${r(v,1-v)}}
`}const d=u+`100% {${r(n,1-n)}}
}`,c=`__svelte_${jo(d)}_${s}`,f=Fi(t),{stylesheet:h,rules:p}=dn.get(f)||Wo(f,t);p[c]||(p[c]=!0,h.insertRule(`@keyframes ${c} ${d}`,h.cssRules.length));const g=t.style.animation||"";return t.style.animation=`${g?`${g}, `:""}${c} ${i}ms linear ${l}ms 1 both`,cn+=1,c}function qo(t,e){const n=(t.style.animation||"").split(", "),i=n.filter(e?o=>o.indexOf(e)<0:o=>o.indexOf("__svelte")===-1),l=n.length-i.length;l&&(t.style.animation=i.join(", "),cn-=l,cn||zo())}function zo(){Mn(()=>{cn||(dn.forEach(t=>{const{ownerNode:e}=t.stylesheet;e&&j(e)}),dn.clear())})}let Wt;function qt(t){Wt=t}function fn(){if(!Wt)throw new Error("Function called outside component initialization");return Wt}function Et(t){fn().$$.on_mount.push(t)}function Go(t){fn().$$.after_update.push(t)}function Rn(t){fn().$$.on_destroy.push(t)}function Hi(){const t=fn();return(e,n,{cancelable:i=!1}={})=>{const l=t.$$.callbacks[e];if(l){const o=Ri(e,n,{cancelable:i});return l.slice().forEach(r=>{r.call(t,o)}),!o.defaultPrevented}return!0}}const kt=[],Ce=[];let Dt=[];const ji=[],Wi=Promise.resolve();let Bn=!1;function qi(){Bn||(Bn=!0,Wi.then(zi))}function St(){return qi(),Wi}function zt(t){Dt.push(t)}const Hn=new Set;let Ct=0;function zi(){if(Ct!==0)return;const t=Wt;do{try{for(;Ct<kt.length;){const e=kt[Ct];Ct++,qt(e),Xo(e.$$)}}catch(e){throw kt.length=0,Ct=0,e}for(qt(null),kt.length=0,Ct=0;Ce.length;)Ce.pop()();for(let e=0;e<Dt.length;e+=1){const n=Dt[e];Hn.has(n)||(Hn.add(n),n())}Dt.length=0}while(kt.length);for(;ji.length;)ji.pop()();Bn=!1,Hn.clear(),qt(t)}function Xo(t){if(t.fragment!==null){t.update(),Ye(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(zt)}}function Yo(t){const e=[],n=[];Dt.forEach(i=>t.indexOf(i)===-1?e.push(i):n.push(i)),n.forEach(i=>i()),Dt=e}let Gt;function xo(){return Gt||(Gt=Promise.resolve(),Gt.then(()=>{Gt=null})),Gt}function jn(t,e,n){t.dispatchEvent(Ri(`${e?"intro":"outro"}${n}`))}const pn=new Set;let lt;function Gi(){lt={r:0,c:[],p:lt}}function Xi(){lt.r||Ye(lt.c),lt=lt.p}function ke(t,e){t&&t.i&&(pn.delete(t),t.i(e))}function Le(t,e,n,i){if(t&&t.o){if(pn.has(t))return;pn.add(t),lt.c.push(()=>{pn.delete(t),i&&(n&&t.d(1),i())}),t.o(e)}else i&&i()}const Uo={duration:0};function Yi(t,e,n,i){let o=e(t,n,{direction:"both"}),r=i?0:1,s=null,a=null,u=null,d;function c(){u&&qo(t,u)}function f(p,g){const m=p.b-r;return g*=Math.abs(m),{a:r,b:p.b,d:m,duration:g,start:p.start,end:p.start+g,group:p.group}}function h(p){const{delay:g=0,duration:m=300,easing:v=Di,tick:C=Ee,css:S}=o||Uo,D={start:Mo()+g,b:p};p||(D.group=lt,lt.r+=1),"inert"in t&&(p?d!==void 0&&(t.inert=d):(d=t.inert,t.inert=!0)),s||a?a=D:(S&&(c(),u=Bi(t,r,p,m,g,v,S)),p&&C(0,1),s=f(D,m),zt(()=>jn(t,p,"start")),No(y=>{if(a&&y>a.start&&(s=f(a,m),a=null,jn(t,s.b,"start"),S&&(c(),u=Bi(t,r,s.b,s.duration,0,v,o.css))),s){if(y>=s.end)C(r=s.b,1-r),jn(t,s.b,"end"),a||(s.b?c():--s.group.r||Ye(s.group.c)),s=null;else if(y>=s.start){const P=y-s.start;r=s.a+s.d*v(P/s.duration),C(r,1-r)}}return!!(s||a)}))}return{run(p){sn(o)?xo().then(()=>{o=o({direction:p?"in":"out"}),h(p)}):h(p)},end(){c(),s=a=null}}}function pe(t){return(t==null?void 0:t.length)!==void 0?t:Array.from(t)}function Lt(t,e){t.d(1),e.delete(t.key)}function Pt(t,e,n,i,l,o,r,s,a,u,d,c){let f=t.length,h=o.length,p=f;const g={};for(;p--;)g[t[p].key]=p;const m=[],v=new Map,C=new Map,S=[];for(p=h;p--;){const w=c(l,o,p),L=n(w);let E=r.get(L);E?S.push(()=>E.p(w,e)):(E=u(L,w),E.c()),v.set(L,m[p]=E),L in g&&C.set(L,Math.abs(p-g[L]))}const D=new Set,y=new Set;function P(w){ke(w,1),w.m(s,d),r.set(w.key,w),d=w.first,h--}for(;f&&h;){const w=m[h-1],L=t[f-1],E=w.key,W=L.key;w===L?(d=w.first,f--,h--):v.has(W)?!r.has(E)||D.has(E)?P(w):y.has(W)?f--:C.get(E)>C.get(W)?(y.add(E),P(w)):(D.add(W),f--):(a(L,r),f--)}for(;f--;){const w=t[f];v.has(w.key)||a(w,r)}for(;h;)P(m[h-1]);return Ye(S),m}function hn(t,e){const n={},i={},l={$$scope:1};let o=t.length;for(;o--;){const r=t[o],s=e[o];if(s){for(const a in r)a in s||(i[a]=1);for(const a in s)l[a]||(n[a]=s[a],l[a]=1);t[o]=s}else for(const a in r)l[a]=1}for(const r in i)r in n||(n[r]=void 0);return n}function Qe(t){t&&t.c()}function xe(t,e,n){const{fragment:i,after_update:l}=t.$$;i&&i.m(e,n),zt(()=>{const o=t.$$.on_mount.map(Si).filter(sn);t.$$.on_destroy?t.$$.on_destroy.push(...o):Ye(o),t.$$.on_mount=[]}),l.forEach(zt)}function Ue(t,e){const n=t.$$;n.fragment!==null&&(Yo(n.after_update),Ye(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function Vo(t,e){t.$$.dirty[0]===-1&&(kt.push(t),qi(),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function Pe(t,e,n,i,l,o,r=null,s=[-1]){const a=Wt;qt(t);const u=t.$$={fragment:null,ctx:[],props:o,update:Ee,not_equal:l,bound:Ci(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(a?a.$$.context:[])),callbacks:Ci(),dirty:s,skip_bound:!1,root:e.target||a.$$.root};r&&r(u.root);let d=!1;if(u.ctx=n?n(t,e.props||{},(c,f,...h)=>{const p=h.length?h[0]:f;return u.ctx&&l(u.ctx[c],u.ctx[c]=p)&&(!u.skip_bound&&u.bound[c]&&u.bound[c](p),d&&Vo(t,c)),f}):[],u.update(),d=!0,Ye(u.before_update),u.fragment=i?i(u.ctx):!1,e.target){if(e.hydrate){const c=Ho(e.target);u.fragment&&u.fragment.l(c),c.forEach(j)}else u.fragment&&u.fragment.c();e.intro&&ke(t.$$.fragment),xe(t,e.target,e.anchor),zi()}qt(a)}class Ie{constructor(){ui(this,"$$");ui(this,"$$set")}$destroy(){Ue(this,1),this.$destroy=Ee}$on(e,n){if(!sn(n))return Ee;const i=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return i.push(n),()=>{const l=i.indexOf(n);l!==-1&&i.splice(l,1)}}$set(e){this.$$set&&!Oo(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}const Jo="4",It=[];function pt(t,e=Ee){let n;const i=new Set;function l(s){if(ge(t,s)&&(t=s,n)){const a=!It.length;for(const u of i)u[1](),It.push(u,t);if(a){for(let u=0;u<It.length;u+=2)It[u][0](It[u+1]);It.length=0}}}function o(s){l(s(t))}function r(s,a=Ee){const u=[s,a];return i.add(u),i.size===1&&(n=e(l,o)||Ee),s(t),()=>{i.delete(u),i.size===0&&n&&(n(),n=null)}}return{set:l,update:o,subscribe:r}}const Wn=pt({}),N={setTranslations(t){Wn.set(t)},has(t,e,n){let i=!1;return Wn.subscribe(l=>{if(n in l&&e in l[n]&&t in l[n][e]){i=!0;return}})(),i},get(t,e,n){let i=n;return Wn.subscribe(l=>{if(t in l&&e in l[t]&&n in l[t][e]){i=l[t][e][n];return}if(t in l&&e in l[t]&&n in l[t][e]){i=l[t][e][n];return}if(t=="Global"){i=n;return}i=null})(),i},translate(t,e=null,n=null){n=n||"Global",e=e||"labels";let i=N.get(n,e,t);return i===null&&n!="Global"&&(i=N.get("Global",e,t)),i},translateOption(t,e,n=null){let i=N.translate(e,"options",n);return i===null?"":typeof i=="object"?i[t]:t}},xi=pt({}),qn={set(t){xi.set(t)},get(){let t=null;return xi.subscribe(e=>{e&&(t=e)})(),t}},zn=pt(),Be={setNotifier(t){zn.set(t)},notify(t,e=null,n=2e3){zn.subscribe(i=>{i&&i.notify(t,e,2e3)})()},confirm(t=null,e=null,n){zn.subscribe(i=>{if(i){let l=null,o=null,r=null;typeof t=="string"||t instanceof String?(o=t,r=N.translate("Yes")):(t=t||{},o=t.message,r=t.confirmText,l=t.confirmStyle||null),i.confirm(o,{confirmText:r,cancelText:N.translate("Cancel"),confirmStyle:l},e,n)}})()}},mn=pt(),tt={setLayoutManager(t){mn.set(t)},resetToDefault(t,e,n,i,l){let o=null;return mn.subscribe(r=>{r&&(o=r.resetToDefault(t,e,n,i,l))})(),o},get:function(t,e,n,i,l,o){let r=null;return mn.subscribe(s=>{s&&(r=s.get(t,e,n,i,l,o))})(),r},set:function(t,e,n,i,l,o){let r=null;return mn.subscribe(s=>{s&&(r=s.set(t,e,n,i,l,o))})(),r}},Ui=pt(),ve={setMetadata(t){Ui.set(t)},get(t){let e=null;return Ui.subscribe(n=>{n&&(e=n.get(t))})(),e}},Vi=pt(),Xt={setModelFactory(t){Vi.set(t)},create(t,e){Vi.subscribe(n=>{n&&n.create(t,e)})()}},Ji=pt(),Ki={setConfig(t){Ji.set(t)},get(t){let e=null;return Ji.subscribe(n=>{n&&(e=n.get(t))})(),e}},Yt=pt(),qe={setStorage(t){Yt.set(t)},get(t,e){let n=null;return Yt.subscribe(i=>{i&&(n=i.get(t,e))})(),n},has(t,e){let n=null;return Yt.subscribe(i=>{i&&(n=i.has(t,e))})(),n},clear(t,e){Yt.subscribe(n=>{n&&n.clear(t,e)})()},set(t,e,n){Yt.subscribe(i=>{i&&i.set(t,e,n)})()}};typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(Jo);function Qi(t){let e,n,i,l,o,r,s,a,u,d,c,f,h,p,g;function m(S,D){return S[2]?Qo:Ko}let v=m(t),C=v(t);return{c(){e=k("div"),n=k("div"),i=k("div"),l=k("span"),l.textContent=`${N.translate("jobManager")}`,o=R(),r=k("span"),s=k("a"),s.innerHTML='<span aria-hidden="true">Ã—</span>',a=R(),C.c(),u=R(),d=k("a"),d.textContent=`${N.translate("View List")}`,c=R(),f=k("div"),h=k("div"),h.textContent=`${N.translate("Loading...")}`,b(l,"class","panel-heading-title"),b(s,"href","/"),b(s,"class","close svelte-1p6ppx8"),b(d,"href","#Job"),b(d,"title",N.translate("View List")),b(d,"class","qp-view-list svelte-1p6ppx8"),b(r,"class","pull-right"),b(i,"class","panel-heading clearfix"),b(h,"class","list-container"),b(f,"class","panel-body"),b(n,"class","panel panel-default"),b(e,"class","queue-panel-container")},m(S,D){G(S,e,D),_(e,n),_(n,i),_(i,l),_(i,o),_(i,r),_(r,s),_(r,a),C.m(r,null),_(r,u),_(r,d),_(n,c),_(n,f),_(f,h),t[9](e),p||(g=ne(s,"click",t[6]),p=!0)},p(S,D){v===(v=m(S))&&C?C.p(S,D):(C.d(1),C=v(S),C&&(C.c(),C.m(r,u)))},d(S){S&&j(e),C.d(),t[9](null),p=!1,g()}}}function Ko(t){let e,n,i;return{c(){e=k("a"),e.textContent=`${N.translate("Pause")}`,b(e,"href","/"),b(e,"title",N.translate("Pause")),b(e,"class","qm-button")},m(l,o){G(l,e,o),n||(i=ne(e,"click",t[8]),n=!0)},p:Ee,d(l){l&&j(e),n=!1,i()}}}function Qo(t){let e,n,i;return{c(){e=k("a"),e.textContent=`${N.translate("Start")}`,b(e,"href","/"),b(e,"title",N.translate("Start")),b(e,"class","qm-button")},m(l,o){G(l,e,o),n||(i=ne(e,"click",t[7]),n=!0)},p:Ee,d(l){l&&j(e),n=!1,i()}}}function Zo(t){let e,n=t[0]&&Qi(t);return{c(){n&&n.c(),e=Nn()},m(i,l){n&&n.m(i,l),G(i,e,l)},p(i,[l]){i[0]?n?n.p(i,l):(n=Qi(i),n.c(),n.m(e.parentNode,e)):n&&(n.d(1),n=null)},i:Ee,o:Ee,d(i){i&&j(e),n&&n.d(i)}}}function $o(t,e,n){let{isOpen:i=!1}=e,{close:l}=e,{icon:o}=e,r=!1;window.addEventListener("publicDataFetched",p=>{n(2,r=!!p.detail.qmPaused)});let s;function a(p){s&&!s.contains(p.target)&&o&&!o.contains(p.target)&&i===!0&&l()}Et(()=>{document.addEventListener("click",a)}),Rn(()=>{document.removeEventListener("click",a)});async function u(p){let g=qn.get();if(g)try{const m=await fetch("/api/v1/App/action/QueueManagerUpdate",{method:"POST",headers:{"Content-Type":"application/json","Authorization-Token":btoa(g.user.userName+":"+g.token)},body:JSON.stringify({pause:p})});if(!m.ok)throw new Error("Network response was not ok");await m.json(),Be.notify("Done","success")}catch(m){console.error("Error:",m)}}const d=p=>{p.preventDefault(),l()},c=p=>{p.preventDefault(),u(!1)},f=p=>{p.preventDefault(),u(!0)};function h(p){Ce[p?"unshift":"push"](()=>{s=p,n(3,s)})}return t.$$set=p=>{"isOpen"in p&&n(0,i=p.isOpen),"close"in p&&n(1,l=p.close),"icon"in p&&n(5,o=p.icon)},[i,l,r,s,u,o,d,c,f,h]}class er extends Ie{constructor(e){super(),Pe(this,e,$o,Zo,ge,{isOpen:0,close:1,icon:5})}}function Zi(t){let e;return{c(){e=k("span"),b(e,"class","fas fa-pause-circle pause-icon")},m(n,i){G(n,e,i)},d(n){n&&j(e)}}}function tr(t){let e,n,i,l,o,r,s,a,u=t[2]&&Zi();return o=new er({props:{icon:t[0],isOpen:t[1],close:t[4]}}),{c(){e=k("a"),n=k("span"),i=R(),u&&u.c(),l=R(),Qe(o.$$.fragment),b(n,"class","fas fa-tasks"),b(e,"href","/"),b(e,"class","notifications-button")},m(d,c){G(d,e,c),_(e,n),_(e,i),u&&u.m(e,null),t[6](e),G(d,l,c),xe(o,d,c),r=!0,s||(a=ne(e,"click",t[7]),s=!0)},p(d,[c]){d[2]?u||(u=Zi(),u.c(),u.m(e,null)):u&&(u.d(1),u=null);const f={};c&1&&(f.icon=d[0]),c&2&&(f.isOpen=d[1]),o.$set(f)},i(d){r||(ke(o.$$.fragment,d),r=!0)},o(d){Le(o.$$.fragment,d),r=!1},d(d){d&&(j(e),j(l)),u&&u.d(),t[6](null),Ue(o,d),s=!1,a()}}}function nr(t,e,n){let{renderTable:i=()=>{}}=e,l,o=!1,r=!1;window.addEventListener("publicDataFetched",c=>{n(2,r=!!c.detail.qmPaused)});function s(){o||(n(1,o=!0),i())}function a(){n(1,o=!1),window.dispatchEvent(new Event("jobManagerPanelClosed"))}function u(c){Ce[c?"unshift":"push"](()=>{l=c,n(0,l)})}const d=c=>{c.preventDefault(),s()};return t.$$set=c=>{"renderTable"in c&&n(5,i=c.renderTable)},[l,o,r,s,a,i,u,d]}class ir extends Ie{constructor(e){super(),Pe(this,e,nr,tr,ge,{renderTable:5})}}function lr(t){let e,n=`${t[0]}px`,i=`${t[0]}px`,l=`${t[1]}px`;return{c(){e=k("div"),b(e,"class","loading-icon spinner svelte-yw8t7l"),se(e,"width",n),se(e,"height",i),se(e,"border-width",l)},m(o,r){G(o,e,r)},p(o,[r]){r&1&&n!==(n=`${o[0]}px`)&&se(e,"width",n),r&1&&i!==(i=`${o[0]}px`)&&se(e,"height",i),r&2&&l!==(l=`${o[1]}px`)&&se(e,"border-width",l)},i:Ee,o:Ee,d(o){o&&j(e)}}}function or(t,e,n){let{size:i=40}=e,{thickness:l=4}=e;return t.$$set=o=>{"size"in o&&n(0,i=o.size),"thickness"in o&&n(1,l=o.thickness)},[i,l]}class rr extends Ie{constructor(e){super(),Pe(this,e,or,lr,ge,{size:0,thickness:1})}}function $i(t){let e,n;return{c(){e=k("img"),Li(e.src,n=t[1])||b(e,"src",n),b(e,"class","logo"),b(e,"alt",t[0])},m(i,l){G(i,e,l)},p(i,l){l&2&&!Li(e.src,n=i[1])&&b(e,"src",n),l&1&&b(e,"alt",i[0])},d(i){i&&j(e)}}}function el(t){let e,n,i;return{c(){e=k("a"),n=k("i"),i=ce("Recovery Instructions"),b(n,"class","fa fa-history svelte-1qmezxs"),b(e,"href",t[2]),b(e,"target","_blank"),b(e,"class","btn btn-default svelte-1qmezxs"),b(e,"role","button"),se(e,"float","right")},m(l,o){G(l,e,o),_(e,n),_(e,i)},p(l,o){o&4&&b(e,"href",l[2])},d(l){l&&j(e)}}}function tl(t){let e,n,i,l,o,r;return{c(){e=k("hr"),n=R(),i=k("pre"),l=ce(t[3]),b(i,"class","logs-container svelte-1qmezxs")},m(s,a){G(s,e,a),G(s,n,a),G(s,i,a),_(i,l),t[11](i),o||(r=ne(i,"scroll",t[8]),o=!0)},p(s,a){a&8&&Re(l,s[3])},d(s){s&&(j(e),j(n),j(i)),t[11](null),o=!1,r()}}}function ar(t){let e,n,i,l,o,r,s,a,u,d,c,f,h,p,g,m,v,C,S=t[4]?"Hide":"Show",D,y,P,w,L,E,W,Y,F=t[1]&&$i(t);d=new rr({props:{size:"40",thickness:"5"}});let K=t[2]&&el(t),Q=t[4]&&t[3]&&tl(t);return{c(){e=k("div"),n=k("div"),i=k("div"),F&&F.c(),l=R(),o=k("div"),r=k("div"),s=k("h3"),s.textContent="System is updating...",a=R(),u=k("section"),Qe(d.$$.fragment),c=R(),f=k("h5"),h=ce(t[5]),p=R(),g=k("section"),m=k("div"),v=k("button"),C=k("i"),D=ce(S),y=ce(" logs"),w=R(),K&&K.c(),L=R(),Q&&Q.c(),b(i,"class","logo-container"),b(n,"class","panel-heading"),b(f,"class","svelte-1qmezxs"),b(u,"class","progress-section svelte-1qmezxs"),b(C,"class","fa fa-list svelte-1qmezxs"),b(v,"class","btn btn-default svelte-1qmezxs"),v.disabled=P=!t[3],b(m,"class","buttons"),b(g,"class","logs-section"),b(r,"class","form-group"),b(o,"class","panel-body"),b(e,"id","login"),b(e,"class","panel panel-default panel-updating")},m(A,q){G(A,e,q),_(e,n),_(n,i),F&&F.m(i,null),_(e,l),_(e,o),_(o,r),_(r,s),_(r,a),_(r,u),xe(d,u,null),_(u,c),_(u,f),_(f,h),_(r,p),_(r,g),_(g,m),_(m,v),_(v,C),_(v,D),_(v,y),_(m,w),K&&K.m(m,null),_(g,L),Q&&Q.m(g,null),E=!0,W||(Y=ne(v,"click",t[7]),W=!0)},p(A,[q]){A[1]?F?F.p(A,q):(F=$i(A),F.c(),F.m(i,null)):F&&(F.d(1),F=null),(!E||q&32)&&Re(h,A[5]),(!E||q&16)&&S!==(S=A[4]?"Hide":"Show")&&Re(D,S),(!E||q&8&&P!==(P=!A[3]))&&(v.disabled=P),A[2]?K?K.p(A,q):(K=el(A),K.c(),K.m(m,null)):K&&(K.d(1),K=null),A[4]&&A[3]?Q?Q.p(A,q):(Q=tl(A),Q.c(),Q.m(g,null)):Q&&(Q.d(1),Q=null)},i(A){E||(ke(d.$$.fragment,A),E=!0)},o(A){Le(d.$$.fragment,A),E=!1},d(A){A&&j(e),F&&F.d(),Ue(d),K&&K.d(),Q&&Q.d(),W=!1,Y()}}}function sr(t){return t.replace(/^\d{2,4}.\d{2}.\d{2,4} \d{2}:\d{2}:\d{2}/g,"").replace(/^[\-\|\s]+/,"")}function ur(t,e,n){let{applicationName:i="AtroCore"}=e,{logoPath:l=null}=e,{logFilePath:o}=e,{restoreLink:r=null}=e,s=!1,a=!1,u=0,d=!0,c="",f,h;Go(()=>{h&&d&&h.scrollTo(0,h.scrollHeight)});function p(){n(4,s=!s),s||(d=!0)}function g(v){const C=v.currentTarget;d=C.scrollHeight-C.scrollTop===C.clientHeight}setInterval(async()=>{try{const v=await fetch(o,{cache:"no-store"});u+=1,v.ok?(n(3,c=(await v.text()).trim()),c.search("composer")>=0&&n(10,a=!0),u>65&&!a&&n(3,c="Something wrong. Please, reboot the server.")):a?setTimeout(()=>{location.reload()},2e3):u>65&&n(3,c="Something wrong. Please, reboot the server.")}catch(v){console.error("Error: ",v)}},1e3);function m(v){Ce[v?"unshift":"push"](()=>{h=v,n(6,h)})}return t.$$set=v=>{"applicationName"in v&&n(0,i=v.applicationName),"logoPath"in v&&n(1,l=v.logoPath),"logFilePath"in v&&n(9,o=v.logFilePath),"restoreLink"in v&&n(2,r=v.restoreLink)},t.$$.update=()=>{if(t.$$.dirty&1032)if(c){const v=c.trim().split(`
`);n(5,f=sr(v.pop()))}else a?n(5,f=""):n(5,f="Starting...")},[i,l,r,c,s,f,h,p,g,o,a,m]}class dr extends Ie{constructor(e){super(),Pe(this,e,ur,ar,ge,{applicationName:0,logoPath:1,logFilePath:9,restoreLink:2})}}function nl(t,e,n){const i=t.slice();return i[19]=e[n],i}function il(t){let e,n=t[19].label+"",i,l,o,r,s,a;function u(){return t[12](t[19])}return{c(){e=k("button"),i=ce(n),l=R(),b(e,"data-action",o=t[19].name),e.disabled=t[1],b(e,"type","button"),b(e,"class",r=`btn action btn-${t[19].style??"default"}`)},m(d,c){G(d,e,c),_(e,i),_(e,l),s||(a=ne(e,"click",u),s=!0)},p(d,c){t=d,c&1&&n!==(n=t[19].label+"")&&Re(i,n),c&1&&o!==(o=t[19].name)&&b(e,"data-action",o),c&2&&(e.disabled=t[1]),c&1&&r!==(r=`btn action btn-${t[19].style??"default"}`)&&b(e,"class",r)},d(d){d&&j(e),s=!1,a()}}}function cr(t){let e,n,i,l=pe(t[0]),o=[];for(let a=0;a<l.length;a+=1)o[a]=il(nl(t,l,a));const r=t[11].default,s=Pi(r,t,t[10],null);return{c(){e=k("div");for(let a=0;a<o.length;a+=1)o[a].c();n=R(),s&&s.c(),b(e,"class","button-container"),se(e,"padding-top","10px")},m(a,u){G(a,e,u);for(let d=0;d<o.length;d+=1)o[d]&&o[d].m(e,null);t[13](e),G(a,n,u),s&&s.m(a,u),i=!0},p(a,[u]){if(u&11){l=pe(a[0]);let d;for(d=0;d<l.length;d+=1){const c=nl(a,l,d);o[d]?o[d].p(c,u):(o[d]=il(c),o[d].c(),o[d].m(e,null))}for(;d<o.length;d+=1)o[d].d(1);o.length=l.length}s&&s.p&&(!i||u&1024)&&Ai(s,r,a,a[10],i?Ti(r,a[10],u,null):Oi(a[10]),null)},i(a){i||(ke(s,a),i=!0)},o(a){Le(s,a),i=!1},d(a){a&&(j(e),j(n)),jt(o,a),t[13](null),s&&s.d(a)}}}function fr(t,e,n){let{$$slots:i={},$$scope:l}=e,{params:o}=e,{fetch:r}=e,s,{loadLayout:a=()=>{tt.get(scope,type,layoutProfileId,y=>{n(9,s=y.layout)},!1)}}=e,{validate:u=()=>!0}=e,d=!1,c=[],f;o.layoutProfiles,Et(async()=>{var P;h(),await St();const y=document.querySelector("#layout-buttons");f&&y&&o.inModal&&((P=y.closest(".modal-body"))==null||P.classList.add("modal-layout-manager"),y.appendChild(f))});function h(){Be.notify("Loading..."),a(y=>{n(9,s=y),Be.notify(!1),o.afterRender&&o.afterRender()})}function p(){n(1,d=!0);const y=r();if(!u(y)){n(1,d=!1);return}if(Be.notify("Saving..."),o.inModal&&!o.getActiveLayoutProfileId()){g(!0);return}tt.set(o.scope,o.type,o.relatedScope,o.layoutProfileId,y,()=>{Be.notify("Saved","success",2e3),g(!1),n(1,d=!1),o.inModal||a()})}function g(y){o.onUpdate&&o.onUpdate(y)}function m(){a()}function v(){Be.confirm("Are you sure you want to reset this layout?",()=>{var y;tt.resetToDefault(o.scope,o.type,o.relatedScope,(y=s.storedProfile)==null?void 0:y.id,()=>{g(!0),m()})})}function C(y){switch(y.name){case"save":p();break;case"cancel":m();break;case"reset":v();break;case"fullEdit":window.open(`#Admin/layouts/scope=${o.scope}&type=${o.type}${o.relatedScope?"&relatedScope="+o.relatedScope:""}${o.layoutProfileId?"&layoutProfileId="+o.layoutProfileId:""}`,"_blank");break}}const S=y=>C(y);function D(y){Ce[y?"unshift":"push"](()=>{f=y,n(2,f)})}return t.$$set=y=>{"params"in y&&n(4,o=y.params),"fetch"in y&&n(5,r=y.fetch),"loadLayout"in y&&n(6,a=y.loadLayout),"validate"in y&&n(7,u=y.validate),"$$scope"in y&&n(10,l=y.$$scope)},t.$$.update=()=>{if(t.$$.dirty&529){if(n(0,c=[{name:"cancel",label:N.translate("Cancel","labels")}]),o.inModal){let y=qn.get();y&&y.user&&y.user.isAdmin&&c.push({name:"fullEdit",label:N.translate("Full Edit","labels","LayoutManager")})}(!o.inModal||s!=null&&s.canEdit)&&c.unshift({name:"save",label:N.translate("Save","labels"),style:"primary"}),s&&s.storedProfile&&s.storedProfile.id===o.layoutProfileId&&s.canEdit&&c.push({name:"reset",label:N.translate("reset","labels","LayoutManager")})}},[c,d,f,C,o,r,a,u,p,s,l,i,S,D]}let ll=class extends Ie{constructor(e){super(),Pe(this,e,fr,cr,ge,{params:4,fetch:5,loadLayout:6,validate:7,save:8})}get save(){return this.$$.ctx[8]}};/**!
 * Sortable 1.15.6
 * @author	RubaXa   <trash@rubaxa.org>
 * @author	owenm    <owen23355@gmail.com>
 * @license MIT
 */function ol(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(l){return Object.getOwnPropertyDescriptor(t,l).enumerable})),n.push.apply(n,i)}return n}function nt(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?ol(Object(n),!0).forEach(function(i){pr(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ol(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function gn(t){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?gn=function(e){return typeof e}:gn=function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},gn(t)}function pr(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function ot(){return ot=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},ot.apply(this,arguments)}function hr(t,e){if(t==null)return{};var n={},i=Object.keys(t),l,o;for(o=0;o<i.length;o++)l=i[o],!(e.indexOf(l)>=0)&&(n[l]=t[l]);return n}function mr(t,e){if(t==null)return{};var n=hr(t,e),i,l;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(l=0;l<o.length;l++)i=o[l],!(e.indexOf(i)>=0)&&Object.prototype.propertyIsEnumerable.call(t,i)&&(n[i]=t[i])}return n}var gr="1.15.6";function rt(t){if(typeof window<"u"&&window.navigator)return!!navigator.userAgent.match(t)}var at=rt(/(?:Trident.*rv[ :]?11\.|msie|iemobile|Windows Phone)/i),xt=rt(/Edge/i),rl=rt(/firefox/i),Ut=rt(/safari/i)&&!rt(/chrome/i)&&!rt(/android/i),Gn=rt(/iP(ad|od|hone)/i),al=rt(/chrome/i)&&rt(/android/i),sl={capture:!1,passive:!1};function ee(t,e,n){t.addEventListener(e,n,!at&&sl)}function $(t,e,n){t.removeEventListener(e,n,!at&&sl)}function bn(t,e){if(e){if(e[0]===">"&&(e=e.substring(1)),t)try{if(t.matches)return t.matches(e);if(t.msMatchesSelector)return t.msMatchesSelector(e);if(t.webkitMatchesSelector)return t.webkitMatchesSelector(e)}catch{return!1}return!1}}function ul(t){return t.host&&t!==document&&t.host.nodeType?t.host:t.parentNode}function Ze(t,e,n,i){if(t){n=n||document;do{if(e!=null&&(e[0]===">"?t.parentNode===n&&bn(t,e):bn(t,e))||i&&t===n)return t;if(t===n)break}while(t=ul(t))}return null}var dl=/\s+/g;function ze(t,e,n){if(t&&e)if(t.classList)t.classList[n?"add":"remove"](e);else{var i=(" "+t.className+" ").replace(dl," ").replace(" "+e+" "," ");t.className=(i+(n?" "+e:"")).replace(dl," ")}}function x(t,e,n){var i=t&&t.style;if(i){if(n===void 0)return document.defaultView&&document.defaultView.getComputedStyle?n=document.defaultView.getComputedStyle(t,""):t.currentStyle&&(n=t.currentStyle),e===void 0?n:n[e];!(e in i)&&e.indexOf("webkit")===-1&&(e="-webkit-"+e),i[e]=n+(typeof n=="string"?"":"px")}}function Tt(t,e){var n="";if(typeof t=="string")n=t;else do{var i=x(t,"transform");i&&i!=="none"&&(n=i+" "+n)}while(!e&&(t=t.parentNode));var l=window.DOMMatrix||window.WebKitCSSMatrix||window.CSSMatrix||window.MSCSSMatrix;return l&&new l(n)}function cl(t,e,n){if(t){var i=t.getElementsByTagName(e),l=0,o=i.length;if(n)for(;l<o;l++)n(i[l],l);return i}return[]}function it(){var t=document.scrollingElement;return t||document.documentElement}function _e(t,e,n,i,l){if(!(!t.getBoundingClientRect&&t!==window)){var o,r,s,a,u,d,c;if(t!==window&&t.parentNode&&t!==it()?(o=t.getBoundingClientRect(),r=o.top,s=o.left,a=o.bottom,u=o.right,d=o.height,c=o.width):(r=0,s=0,a=window.innerHeight,u=window.innerWidth,d=window.innerHeight,c=window.innerWidth),(e||n)&&t!==window&&(l=l||t.parentNode,!at))do if(l&&l.getBoundingClientRect&&(x(l,"transform")!=="none"||n&&x(l,"position")!=="static")){var f=l.getBoundingClientRect();r-=f.top+parseInt(x(l,"border-top-width")),s-=f.left+parseInt(x(l,"border-left-width")),a=r+o.height,u=s+o.width;break}while(l=l.parentNode);if(i&&t!==window){var h=Tt(l||t),p=h&&h.a,g=h&&h.d;h&&(r/=g,s/=p,c/=p,d/=g,a=r+d,u=s+c)}return{top:r,left:s,bottom:a,right:u,width:c,height:d}}}function fl(t,e,n){for(var i=ht(t,!0),l=_e(t)[e];i;){var o=_e(i)[n],r=void 0;if(r=l>=o,!r)return i;if(i===it())break;i=ht(i,!1)}return!1}function At(t,e,n,i){for(var l=0,o=0,r=t.children;o<r.length;){if(r[o].style.display!=="none"&&r[o]!==X.ghost&&(i||r[o]!==X.dragged)&&Ze(r[o],n.draggable,t,!1)){if(l===e)return r[o];l++}o++}return null}function Xn(t,e){for(var n=t.lastElementChild;n&&(n===X.ghost||x(n,"display")==="none"||e&&!bn(n,e));)n=n.previousElementSibling;return n||null}function Ve(t,e){var n=0;if(!t||!t.parentNode)return-1;for(;t=t.previousElementSibling;)t.nodeName.toUpperCase()!=="TEMPLATE"&&t!==X.clone&&(!e||bn(t,e))&&n++;return n}function pl(t){var e=0,n=0,i=it();if(t)do{var l=Tt(t),o=l.a,r=l.d;e+=t.scrollLeft*o,n+=t.scrollTop*r}while(t!==i&&(t=t.parentNode));return[e,n]}function br(t,e){for(var n in t)if(t.hasOwnProperty(n)){for(var i in e)if(e.hasOwnProperty(i)&&e[i]===t[n][i])return Number(n)}return-1}function ht(t,e){if(!t||!t.getBoundingClientRect)return it();var n=t,i=!1;do if(n.clientWidth<n.scrollWidth||n.clientHeight<n.scrollHeight){var l=x(n);if(n.clientWidth<n.scrollWidth&&(l.overflowX=="auto"||l.overflowX=="scroll")||n.clientHeight<n.scrollHeight&&(l.overflowY=="auto"||l.overflowY=="scroll")){if(!n.getBoundingClientRect||n===document.body)return it();if(i||e)return n;i=!0}}while(n=n.parentNode);return it()}function vr(t,e){if(t&&e)for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t}function Yn(t,e){return Math.round(t.top)===Math.round(e.top)&&Math.round(t.left)===Math.round(e.left)&&Math.round(t.height)===Math.round(e.height)&&Math.round(t.width)===Math.round(e.width)}var Vt;function hl(t,e){return function(){if(!Vt){var n=arguments,i=this;n.length===1?t.call(i,n[0]):t.apply(i,n),Vt=setTimeout(function(){Vt=void 0},e)}}}function _r(){clearTimeout(Vt),Vt=void 0}function ml(t,e,n){t.scrollLeft+=e,t.scrollTop+=n}function gl(t){var e=window.Polymer,n=window.jQuery||window.Zepto;return e&&e.dom?e.dom(t).cloneNode(!0):n?n(t).clone(!0)[0]:t.cloneNode(!0)}function bl(t,e,n){var i={};return Array.from(t.children).forEach(function(l){var o,r,s,a;if(!(!Ze(l,e.draggable,t,!1)||l.animated||l===n)){var u=_e(l);i.left=Math.min((o=i.left)!==null&&o!==void 0?o:1/0,u.left),i.top=Math.min((r=i.top)!==null&&r!==void 0?r:1/0,u.top),i.right=Math.max((s=i.right)!==null&&s!==void 0?s:-1/0,u.right),i.bottom=Math.max((a=i.bottom)!==null&&a!==void 0?a:-1/0,u.bottom)}}),i.width=i.right-i.left,i.height=i.bottom-i.top,i.x=i.left,i.y=i.top,i}var He="Sortable"+new Date().getTime();function yr(){var t=[],e;return{captureAnimationState:function(){if(t=[],!!this.options.animation){var i=[].slice.call(this.el.children);i.forEach(function(l){if(!(x(l,"display")==="none"||l===X.ghost)){t.push({target:l,rect:_e(l)});var o=nt({},t[t.length-1].rect);if(l.thisAnimationDuration){var r=Tt(l,!0);r&&(o.top-=r.f,o.left-=r.e)}l.fromRect=o}})}},addAnimationState:function(i){t.push(i)},removeAnimationState:function(i){t.splice(br(t,{target:i}),1)},animateAll:function(i){var l=this;if(!this.options.animation){clearTimeout(e),typeof i=="function"&&i();return}var o=!1,r=0;t.forEach(function(s){var a=0,u=s.target,d=u.fromRect,c=_e(u),f=u.prevFromRect,h=u.prevToRect,p=s.rect,g=Tt(u,!0);g&&(c.top-=g.f,c.left-=g.e),u.toRect=c,u.thisAnimationDuration&&Yn(f,c)&&!Yn(d,c)&&(p.top-c.top)/(p.left-c.left)===(d.top-c.top)/(d.left-c.left)&&(a=Er(p,f,h,l.options)),Yn(c,d)||(u.prevFromRect=d,u.prevToRect=c,a||(a=l.options.animation),l.animate(u,p,c,a)),a&&(o=!0,r=Math.max(r,a),clearTimeout(u.animationResetTimer),u.animationResetTimer=setTimeout(function(){u.animationTime=0,u.prevFromRect=null,u.fromRect=null,u.prevToRect=null,u.thisAnimationDuration=null},a),u.thisAnimationDuration=a)}),clearTimeout(e),o?e=setTimeout(function(){typeof i=="function"&&i()},r):typeof i=="function"&&i(),t=[]},animate:function(i,l,o,r){if(r){x(i,"transition",""),x(i,"transform","");var s=Tt(this.el),a=s&&s.a,u=s&&s.d,d=(l.left-o.left)/(a||1),c=(l.top-o.top)/(u||1);i.animatingX=!!d,i.animatingY=!!c,x(i,"transform","translate3d("+d+"px,"+c+"px,0)"),this.forRepaintDummy=wr(i),x(i,"transition","transform "+r+"ms"+(this.options.easing?" "+this.options.easing:"")),x(i,"transform","translate3d(0,0,0)"),typeof i.animated=="number"&&clearTimeout(i.animated),i.animated=setTimeout(function(){x(i,"transition",""),x(i,"transform",""),i.animated=!1,i.animatingX=!1,i.animatingY=!1},r)}}}}function wr(t){return t.offsetWidth}function Er(t,e,n,i){return Math.sqrt(Math.pow(e.top-t.top,2)+Math.pow(e.left-t.left,2))/Math.sqrt(Math.pow(e.top-n.top,2)+Math.pow(e.left-n.left,2))*i.animation}var Ot=[],xn={initializeByDefault:!0},Jt={mount:function(e){for(var n in xn)xn.hasOwnProperty(n)&&!(n in e)&&(e[n]=xn[n]);Ot.forEach(function(i){if(i.pluginName===e.pluginName)throw"Sortable: Cannot mount plugin ".concat(e.pluginName," more than once")}),Ot.push(e)},pluginEvent:function(e,n,i){var l=this;this.eventCanceled=!1,i.cancel=function(){l.eventCanceled=!0};var o=e+"Global";Ot.forEach(function(r){n[r.pluginName]&&(n[r.pluginName][o]&&n[r.pluginName][o](nt({sortable:n},i)),n.options[r.pluginName]&&n[r.pluginName][e]&&n[r.pluginName][e](nt({sortable:n},i)))})},initializePlugins:function(e,n,i,l){Ot.forEach(function(s){var a=s.pluginName;if(!(!e.options[a]&&!s.initializeByDefault)){var u=new s(e,n,e.options);u.sortable=e,u.options=e.options,e[a]=u,ot(i,u.defaults)}});for(var o in e.options)if(e.options.hasOwnProperty(o)){var r=this.modifyOption(e,o,e.options[o]);typeof r<"u"&&(e.options[o]=r)}},getEventProperties:function(e,n){var i={};return Ot.forEach(function(l){typeof l.eventProperties=="function"&&ot(i,l.eventProperties.call(n[l.pluginName],e))}),i},modifyOption:function(e,n,i){var l;return Ot.forEach(function(o){e[o.pluginName]&&o.optionListeners&&typeof o.optionListeners[n]=="function"&&(l=o.optionListeners[n].call(e[o.pluginName],i))}),l}};function kr(t){var e=t.sortable,n=t.rootEl,i=t.name,l=t.targetEl,o=t.cloneEl,r=t.toEl,s=t.fromEl,a=t.oldIndex,u=t.newIndex,d=t.oldDraggableIndex,c=t.newDraggableIndex,f=t.originalEvent,h=t.putSortable,p=t.extraEventProperties;if(e=e||n&&n[He],!!e){var g,m=e.options,v="on"+i.charAt(0).toUpperCase()+i.substr(1);window.CustomEvent&&!at&&!xt?g=new CustomEvent(i,{bubbles:!0,cancelable:!0}):(g=document.createEvent("Event"),g.initEvent(i,!0,!0)),g.to=r||n,g.from=s||n,g.item=l||n,g.clone=o,g.oldIndex=a,g.newIndex=u,g.oldDraggableIndex=d,g.newDraggableIndex=c,g.originalEvent=f,g.pullMode=h?h.lastPutMode:void 0;var C=nt(nt({},p),Jt.getEventProperties(i,e));for(var S in C)g[S]=C[S];n&&n.dispatchEvent(g),m[v]&&m[v].call(e,g)}}var Dr=["evt"],je=function(e,n){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},l=i.evt,o=mr(i,Dr);Jt.pluginEvent.bind(X)(e,n,nt({dragEl:T,parentEl:he,ghostEl:V,rootEl:de,nextEl:vt,lastDownEl:vn,cloneEl:fe,cloneHidden:mt,dragStarted:Qt,putSortable:Te,activeSortable:X.active,originalEvent:l,oldIndex:Mt,oldDraggableIndex:Kt,newIndex:Ge,newDraggableIndex:gt,hideGhostForTarget:Dl,unhideGhostForTarget:Sl,cloneNowHidden:function(){mt=!0},cloneNowShown:function(){mt=!1},dispatchSortableEvent:function(s){Fe({sortable:n,name:s,originalEvent:l})}},o))};function Fe(t){kr(nt({putSortable:Te,cloneEl:fe,targetEl:T,rootEl:de,oldIndex:Mt,oldDraggableIndex:Kt,newIndex:Ge,newDraggableIndex:gt},t))}var T,he,V,de,vt,vn,fe,mt,Mt,Ge,Kt,gt,_n,Te,Nt=!1,yn=!1,wn=[],_t,$e,Un,Vn,vl,_l,Qt,Ft,Zt,$t=!1,En=!1,kn,Ae,Jn=[],Kn=!1,Dn=[],Sn=typeof document<"u",Cn=Gn,yl=xt||at?"cssFloat":"float",Sr=Sn&&!al&&!Gn&&"draggable"in document.createElement("div"),wl=function(){if(Sn){if(at)return!1;var t=document.createElement("x");return t.style.cssText="pointer-events:auto",t.style.pointerEvents==="auto"}}(),El=function(e,n){var i=x(e),l=parseInt(i.width)-parseInt(i.paddingLeft)-parseInt(i.paddingRight)-parseInt(i.borderLeftWidth)-parseInt(i.borderRightWidth),o=At(e,0,n),r=At(e,1,n),s=o&&x(o),a=r&&x(r),u=s&&parseInt(s.marginLeft)+parseInt(s.marginRight)+_e(o).width,d=a&&parseInt(a.marginLeft)+parseInt(a.marginRight)+_e(r).width;if(i.display==="flex")return i.flexDirection==="column"||i.flexDirection==="column-reverse"?"vertical":"horizontal";if(i.display==="grid")return i.gridTemplateColumns.split(" ").length<=1?"vertical":"horizontal";if(o&&s.float&&s.float!=="none"){var c=s.float==="left"?"left":"right";return r&&(a.clear==="both"||a.clear===c)?"vertical":"horizontal"}return o&&(s.display==="block"||s.display==="flex"||s.display==="table"||s.display==="grid"||u>=l&&i[yl]==="none"||r&&i[yl]==="none"&&u+d>l)?"vertical":"horizontal"},Cr=function(e,n,i){var l=i?e.left:e.top,o=i?e.right:e.bottom,r=i?e.width:e.height,s=i?n.left:n.top,a=i?n.right:n.bottom,u=i?n.width:n.height;return l===s||o===a||l+r/2===s+u/2},Lr=function(e,n){var i;return wn.some(function(l){var o=l[He].options.emptyInsertThreshold;if(!(!o||Xn(l))){var r=_e(l),s=e>=r.left-o&&e<=r.right+o,a=n>=r.top-o&&n<=r.bottom+o;if(s&&a)return i=l}}),i},kl=function(e){function n(o,r){return function(s,a,u,d){var c=s.options.group.name&&a.options.group.name&&s.options.group.name===a.options.group.name;if(o==null&&(r||c))return!0;if(o==null||o===!1)return!1;if(r&&o==="clone")return o;if(typeof o=="function")return n(o(s,a,u,d),r)(s,a,u,d);var f=(r?s:a).options.group.name;return o===!0||typeof o=="string"&&o===f||o.join&&o.indexOf(f)>-1}}var i={},l=e.group;(!l||gn(l)!="object")&&(l={name:l}),i.name=l.name,i.checkPull=n(l.pull,!0),i.checkPut=n(l.put),i.revertClone=l.revertClone,e.group=i},Dl=function(){!wl&&V&&x(V,"display","none")},Sl=function(){!wl&&V&&x(V,"display","")};Sn&&!al&&document.addEventListener("click",function(t){if(yn)return t.preventDefault(),t.stopPropagation&&t.stopPropagation(),t.stopImmediatePropagation&&t.stopImmediatePropagation(),yn=!1,!1},!0);var yt=function(e){if(T){e=e.touches?e.touches[0]:e;var n=Lr(e.clientX,e.clientY);if(n){var i={};for(var l in e)e.hasOwnProperty(l)&&(i[l]=e[l]);i.target=i.rootEl=n,i.preventDefault=void 0,i.stopPropagation=void 0,n[He]._onDragOver(i)}}},Pr=function(e){T&&T.parentNode[He]._isOutsideThisEl(e.target)};function X(t,e){if(!(t&&t.nodeType&&t.nodeType===1))throw"Sortable: `el` must be an HTMLElement, not ".concat({}.toString.call(t));this.el=t,this.options=e=ot({},e),t[He]=this;var n={group:null,sort:!0,disabled:!1,store:null,handle:null,draggable:/^[uo]l$/i.test(t.nodeName)?">li":">*",swapThreshold:1,invertSwap:!1,invertedSwapThreshold:null,removeCloneOnHide:!0,direction:function(){return El(t,this.options)},ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",dragClass:"sortable-drag",ignore:"a, img",filter:null,preventOnFilter:!0,animation:0,easing:null,setData:function(r,s){r.setData("Text",s.textContent)},dropBubble:!1,dragoverBubble:!1,dataIdAttr:"data-id",delay:0,delayOnTouchOnly:!1,touchStartThreshold:(Number.parseInt?Number:window).parseInt(window.devicePixelRatio,10)||1,forceFallback:!1,fallbackClass:"sortable-fallback",fallbackOnBody:!1,fallbackTolerance:0,fallbackOffset:{x:0,y:0},supportPointer:X.supportPointer!==!1&&"PointerEvent"in window&&(!Ut||Gn),emptyInsertThreshold:5};Jt.initializePlugins(this,t,n);for(var i in n)!(i in e)&&(e[i]=n[i]);kl(e);for(var l in this)l.charAt(0)==="_"&&typeof this[l]=="function"&&(this[l]=this[l].bind(this));this.nativeDraggable=e.forceFallback?!1:Sr,this.nativeDraggable&&(this.options.touchStartThreshold=1),e.supportPointer?ee(t,"pointerdown",this._onTapStart):(ee(t,"mousedown",this._onTapStart),ee(t,"touchstart",this._onTapStart)),this.nativeDraggable&&(ee(t,"dragover",this),ee(t,"dragenter",this)),wn.push(this.el),e.store&&e.store.get&&this.sort(e.store.get(this)||[]),ot(this,yr())}X.prototype={constructor:X,_isOutsideThisEl:function(e){!this.el.contains(e)&&e!==this.el&&(Ft=null)},_getDirection:function(e,n){return typeof this.options.direction=="function"?this.options.direction.call(this,e,n,T):this.options.direction},_onTapStart:function(e){if(e.cancelable){var n=this,i=this.el,l=this.options,o=l.preventOnFilter,r=e.type,s=e.touches&&e.touches[0]||e.pointerType&&e.pointerType==="touch"&&e,a=(s||e).target,u=e.target.shadowRoot&&(e.path&&e.path[0]||e.composedPath&&e.composedPath()[0])||a,d=l.filter;if(Rr(i),!T&&!(/mousedown|pointerdown/.test(r)&&e.button!==0||l.disabled)&&!u.isContentEditable&&!(!this.nativeDraggable&&Ut&&a&&a.tagName.toUpperCase()==="SELECT")&&(a=Ze(a,l.draggable,i,!1),!(a&&a.animated)&&vn!==a)){if(Mt=Ve(a),Kt=Ve(a,l.draggable),typeof d=="function"){if(d.call(this,e,a,this)){Fe({sortable:n,rootEl:u,name:"filter",targetEl:a,toEl:i,fromEl:i}),je("filter",n,{evt:e}),o&&e.preventDefault();return}}else if(d&&(d=d.split(",").some(function(c){if(c=Ze(u,c.trim(),i,!1),c)return Fe({sortable:n,rootEl:c,name:"filter",targetEl:a,fromEl:i,toEl:i}),je("filter",n,{evt:e}),!0}),d)){o&&e.preventDefault();return}l.handle&&!Ze(u,l.handle,i,!1)||this._prepareDragStart(e,s,a)}}},_prepareDragStart:function(e,n,i){var l=this,o=l.el,r=l.options,s=o.ownerDocument,a;if(i&&!T&&i.parentNode===o){var u=_e(i);if(de=o,T=i,he=T.parentNode,vt=T.nextSibling,vn=i,_n=r.group,X.dragged=T,_t={target:T,clientX:(n||e).clientX,clientY:(n||e).clientY},vl=_t.clientX-u.left,_l=_t.clientY-u.top,this._lastX=(n||e).clientX,this._lastY=(n||e).clientY,T.style["will-change"]="all",a=function(){if(je("delayEnded",l,{evt:e}),X.eventCanceled){l._onDrop();return}l._disableDelayedDragEvents(),!rl&&l.nativeDraggable&&(T.draggable=!0),l._triggerDragStart(e,n),Fe({sortable:l,name:"choose",originalEvent:e}),ze(T,r.chosenClass,!0)},r.ignore.split(",").forEach(function(d){cl(T,d.trim(),Qn)}),ee(s,"dragover",yt),ee(s,"mousemove",yt),ee(s,"touchmove",yt),r.supportPointer?(ee(s,"pointerup",l._onDrop),!this.nativeDraggable&&ee(s,"pointercancel",l._onDrop)):(ee(s,"mouseup",l._onDrop),ee(s,"touchend",l._onDrop),ee(s,"touchcancel",l._onDrop)),rl&&this.nativeDraggable&&(this.options.touchStartThreshold=4,T.draggable=!0),je("delayStart",this,{evt:e}),r.delay&&(!r.delayOnTouchOnly||n)&&(!this.nativeDraggable||!(xt||at))){if(X.eventCanceled){this._onDrop();return}r.supportPointer?(ee(s,"pointerup",l._disableDelayedDrag),ee(s,"pointercancel",l._disableDelayedDrag)):(ee(s,"mouseup",l._disableDelayedDrag),ee(s,"touchend",l._disableDelayedDrag),ee(s,"touchcancel",l._disableDelayedDrag)),ee(s,"mousemove",l._delayedDragTouchMoveHandler),ee(s,"touchmove",l._delayedDragTouchMoveHandler),r.supportPointer&&ee(s,"pointermove",l._delayedDragTouchMoveHandler),l._dragStartTimer=setTimeout(a,r.delay)}else a()}},_delayedDragTouchMoveHandler:function(e){var n=e.touches?e.touches[0]:e;Math.max(Math.abs(n.clientX-this._lastX),Math.abs(n.clientY-this._lastY))>=Math.floor(this.options.touchStartThreshold/(this.nativeDraggable&&window.devicePixelRatio||1))&&this._disableDelayedDrag()},_disableDelayedDrag:function(){T&&Qn(T),clearTimeout(this._dragStartTimer),this._disableDelayedDragEvents()},_disableDelayedDragEvents:function(){var e=this.el.ownerDocument;$(e,"mouseup",this._disableDelayedDrag),$(e,"touchend",this._disableDelayedDrag),$(e,"touchcancel",this._disableDelayedDrag),$(e,"pointerup",this._disableDelayedDrag),$(e,"pointercancel",this._disableDelayedDrag),$(e,"mousemove",this._delayedDragTouchMoveHandler),$(e,"touchmove",this._delayedDragTouchMoveHandler),$(e,"pointermove",this._delayedDragTouchMoveHandler)},_triggerDragStart:function(e,n){n=n||e.pointerType=="touch"&&e,!this.nativeDraggable||n?this.options.supportPointer?ee(document,"pointermove",this._onTouchMove):n?ee(document,"touchmove",this._onTouchMove):ee(document,"mousemove",this._onTouchMove):(ee(T,"dragend",this),ee(de,"dragstart",this._onDragStart));try{document.selection?Pn(function(){document.selection.empty()}):window.getSelection().removeAllRanges()}catch{}},_dragStarted:function(e,n){if(Nt=!1,de&&T){je("dragStarted",this,{evt:n}),this.nativeDraggable&&ee(document,"dragover",Pr);var i=this.options;!e&&ze(T,i.dragClass,!1),ze(T,i.ghostClass,!0),X.active=this,e&&this._appendGhost(),Fe({sortable:this,name:"start",originalEvent:n})}else this._nulling()},_emulateDragOver:function(){if($e){this._lastX=$e.clientX,this._lastY=$e.clientY,Dl();for(var e=document.elementFromPoint($e.clientX,$e.clientY),n=e;e&&e.shadowRoot&&(e=e.shadowRoot.elementFromPoint($e.clientX,$e.clientY),e!==n);)n=e;if(T.parentNode[He]._isOutsideThisEl(e),n)do{if(n[He]){var i=void 0;if(i=n[He]._onDragOver({clientX:$e.clientX,clientY:$e.clientY,target:e,rootEl:n}),i&&!this.options.dragoverBubble)break}e=n}while(n=ul(n));Sl()}},_onTouchMove:function(e){if(_t){var n=this.options,i=n.fallbackTolerance,l=n.fallbackOffset,o=e.touches?e.touches[0]:e,r=V&&Tt(V,!0),s=V&&r&&r.a,a=V&&r&&r.d,u=Cn&&Ae&&pl(Ae),d=(o.clientX-_t.clientX+l.x)/(s||1)+(u?u[0]-Jn[0]:0)/(s||1),c=(o.clientY-_t.clientY+l.y)/(a||1)+(u?u[1]-Jn[1]:0)/(a||1);if(!X.active&&!Nt){if(i&&Math.max(Math.abs(o.clientX-this._lastX),Math.abs(o.clientY-this._lastY))<i)return;this._onDragStart(e,!0)}if(V){r?(r.e+=d-(Un||0),r.f+=c-(Vn||0)):r={a:1,b:0,c:0,d:1,e:d,f:c};var f="matrix(".concat(r.a,",").concat(r.b,",").concat(r.c,",").concat(r.d,",").concat(r.e,",").concat(r.f,")");x(V,"webkitTransform",f),x(V,"mozTransform",f),x(V,"msTransform",f),x(V,"transform",f),Un=d,Vn=c,$e=o}e.cancelable&&e.preventDefault()}},_appendGhost:function(){if(!V){var e=this.options.fallbackOnBody?document.body:de,n=_e(T,!0,Cn,!0,e),i=this.options;if(Cn){for(Ae=e;x(Ae,"position")==="static"&&x(Ae,"transform")==="none"&&Ae!==document;)Ae=Ae.parentNode;Ae!==document.body&&Ae!==document.documentElement?(Ae===document&&(Ae=it()),n.top+=Ae.scrollTop,n.left+=Ae.scrollLeft):Ae=it(),Jn=pl(Ae)}V=T.cloneNode(!0),ze(V,i.ghostClass,!1),ze(V,i.fallbackClass,!0),ze(V,i.dragClass,!0),x(V,"transition",""),x(V,"transform",""),x(V,"box-sizing","border-box"),x(V,"margin",0),x(V,"top",n.top),x(V,"left",n.left),x(V,"width",n.width),x(V,"height",n.height),x(V,"opacity","0.8"),x(V,"position",Cn?"absolute":"fixed"),x(V,"zIndex","100000"),x(V,"pointerEvents","none"),X.ghost=V,e.appendChild(V),x(V,"transform-origin",vl/parseInt(V.style.width)*100+"% "+_l/parseInt(V.style.height)*100+"%")}},_onDragStart:function(e,n){var i=this,l=e.dataTransfer,o=i.options;if(je("dragStart",this,{evt:e}),X.eventCanceled){this._onDrop();return}je("setupClone",this),X.eventCanceled||(fe=gl(T),fe.removeAttribute("id"),fe.draggable=!1,fe.style["will-change"]="",this._hideClone(),ze(fe,this.options.chosenClass,!1),X.clone=fe),i.cloneId=Pn(function(){je("clone",i),!X.eventCanceled&&(i.options.removeCloneOnHide||de.insertBefore(fe,T),i._hideClone(),Fe({sortable:i,name:"clone"}))}),!n&&ze(T,o.dragClass,!0),n?(yn=!0,i._loopId=setInterval(i._emulateDragOver,50)):($(document,"mouseup",i._onDrop),$(document,"touchend",i._onDrop),$(document,"touchcancel",i._onDrop),l&&(l.effectAllowed="move",o.setData&&o.setData.call(i,l,T)),ee(document,"drop",i),x(T,"transform","translateZ(0)")),Nt=!0,i._dragStartId=Pn(i._dragStarted.bind(i,n,e)),ee(document,"selectstart",i),Qt=!0,window.getSelection().removeAllRanges(),Ut&&x(document.body,"user-select","none")},_onDragOver:function(e){var n=this.el,i=e.target,l,o,r,s=this.options,a=s.group,u=X.active,d=_n===a,c=s.sort,f=Te||u,h,p=this,g=!1;if(Kn)return;function m(Je,st){je(Je,p,nt({evt:e,isOwner:d,axis:h?"vertical":"horizontal",revert:r,dragRect:l,targetRect:o,canSort:c,fromSortable:f,target:i,completed:C,onMove:function(Ke,et){return Ln(de,n,T,l,Ke,_e(Ke),e,et)},changed:S},st))}function v(){m("dragOverAnimationCapture"),p.captureAnimationState(),p!==f&&f.captureAnimationState()}function C(Je){return m("dragOverCompleted",{insertion:Je}),Je&&(d?u._hideClone():u._showClone(p),p!==f&&(ze(T,Te?Te.options.ghostClass:u.options.ghostClass,!1),ze(T,s.ghostClass,!0)),Te!==p&&p!==X.active?Te=p:p===X.active&&Te&&(Te=null),f===p&&(p._ignoreWhileAnimating=i),p.animateAll(function(){m("dragOverAnimationComplete"),p._ignoreWhileAnimating=null}),p!==f&&(f.animateAll(),f._ignoreWhileAnimating=null)),(i===T&&!T.animated||i===n&&!i.animated)&&(Ft=null),!s.dragoverBubble&&!e.rootEl&&i!==document&&(T.parentNode[He]._isOutsideThisEl(e.target),!Je&&yt(e)),!s.dragoverBubble&&e.stopPropagation&&e.stopPropagation(),g=!0}function S(){Ge=Ve(T),gt=Ve(T,s.draggable),Fe({sortable:p,name:"change",toEl:n,newIndex:Ge,newDraggableIndex:gt,originalEvent:e})}if(e.preventDefault!==void 0&&e.cancelable&&e.preventDefault(),i=Ze(i,s.draggable,n,!0),m("dragOver"),X.eventCanceled)return g;if(T.contains(e.target)||i.animated&&i.animatingX&&i.animatingY||p._ignoreWhileAnimating===i)return C(!1);if(yn=!1,u&&!s.disabled&&(d?c||(r=he!==de):Te===this||(this.lastPutMode=_n.checkPull(this,u,T,e))&&a.checkPut(this,u,T,e))){if(h=this._getDirection(e,i)==="vertical",l=_e(T),m("dragOverValid"),X.eventCanceled)return g;if(r)return he=de,v(),this._hideClone(),m("revert"),X.eventCanceled||(vt?de.insertBefore(T,vt):de.appendChild(T)),C(!0);var D=Xn(n,s.draggable);if(!D||Or(e,h,this)&&!D.animated){if(D===T)return C(!1);if(D&&n===e.target&&(i=D),i&&(o=_e(i)),Ln(de,n,T,l,i,o,e,!!i)!==!1)return v(),D&&D.nextSibling?n.insertBefore(T,D.nextSibling):n.appendChild(T),he=n,S(),C(!0)}else if(D&&Ar(e,h,this)){var y=At(n,0,s,!0);if(y===T)return C(!1);if(i=y,o=_e(i),Ln(de,n,T,l,i,o,e,!1)!==!1)return v(),n.insertBefore(T,y),he=n,S(),C(!0)}else if(i.parentNode===n){o=_e(i);var P=0,w,L=T.parentNode!==n,E=!Cr(T.animated&&T.toRect||l,i.animated&&i.toRect||o,h),W=h?"top":"left",Y=fl(i,"top","top")||fl(T,"top","top"),F=Y?Y.scrollTop:void 0;Ft!==i&&(w=o[W],$t=!1,En=!E&&s.invertSwap||L),P=Mr(e,i,o,h,E?1:s.swapThreshold,s.invertedSwapThreshold==null?s.swapThreshold:s.invertedSwapThreshold,En,Ft===i);var K;if(P!==0){var Q=Ve(T);do Q-=P,K=he.children[Q];while(K&&(x(K,"display")==="none"||K===V))}if(P===0||K===i)return C(!1);Ft=i,Zt=P;var A=i.nextElementSibling,q=!1;q=P===1;var me=Ln(de,n,T,l,i,o,e,q);if(me!==!1)return(me===1||me===-1)&&(q=me===1),Kn=!0,setTimeout(Tr,30),v(),q&&!A?n.appendChild(T):i.parentNode.insertBefore(T,q?A:i),Y&&ml(Y,0,F-Y.scrollTop),he=T.parentNode,w!==void 0&&!En&&(kn=Math.abs(w-_e(i)[W])),S(),C(!0)}if(n.contains(T))return C(!1)}return!1},_ignoreWhileAnimating:null,_offMoveEvents:function(){$(document,"mousemove",this._onTouchMove),$(document,"touchmove",this._onTouchMove),$(document,"pointermove",this._onTouchMove),$(document,"dragover",yt),$(document,"mousemove",yt),$(document,"touchmove",yt)},_offUpEvents:function(){var e=this.el.ownerDocument;$(e,"mouseup",this._onDrop),$(e,"touchend",this._onDrop),$(e,"pointerup",this._onDrop),$(e,"pointercancel",this._onDrop),$(e,"touchcancel",this._onDrop),$(document,"selectstart",this)},_onDrop:function(e){var n=this.el,i=this.options;if(Ge=Ve(T),gt=Ve(T,i.draggable),je("drop",this,{evt:e}),he=T&&T.parentNode,Ge=Ve(T),gt=Ve(T,i.draggable),X.eventCanceled){this._nulling();return}Nt=!1,En=!1,$t=!1,clearInterval(this._loopId),clearTimeout(this._dragStartTimer),Zn(this.cloneId),Zn(this._dragStartId),this.nativeDraggable&&($(document,"drop",this),$(n,"dragstart",this._onDragStart)),this._offMoveEvents(),this._offUpEvents(),Ut&&x(document.body,"user-select",""),x(T,"transform",""),e&&(Qt&&(e.cancelable&&e.preventDefault(),!i.dropBubble&&e.stopPropagation()),V&&V.parentNode&&V.parentNode.removeChild(V),(de===he||Te&&Te.lastPutMode!=="clone")&&fe&&fe.parentNode&&fe.parentNode.removeChild(fe),T&&(this.nativeDraggable&&$(T,"dragend",this),Qn(T),T.style["will-change"]="",Qt&&!Nt&&ze(T,Te?Te.options.ghostClass:this.options.ghostClass,!1),ze(T,this.options.chosenClass,!1),Fe({sortable:this,name:"unchoose",toEl:he,newIndex:null,newDraggableIndex:null,originalEvent:e}),de!==he?(Ge>=0&&(Fe({rootEl:he,name:"add",toEl:he,fromEl:de,originalEvent:e}),Fe({sortable:this,name:"remove",toEl:he,originalEvent:e}),Fe({rootEl:he,name:"sort",toEl:he,fromEl:de,originalEvent:e}),Fe({sortable:this,name:"sort",toEl:he,originalEvent:e})),Te&&Te.save()):Ge!==Mt&&Ge>=0&&(Fe({sortable:this,name:"update",toEl:he,originalEvent:e}),Fe({sortable:this,name:"sort",toEl:he,originalEvent:e})),X.active&&((Ge==null||Ge===-1)&&(Ge=Mt,gt=Kt),Fe({sortable:this,name:"end",toEl:he,originalEvent:e}),this.save()))),this._nulling()},_nulling:function(){je("nulling",this),de=T=he=V=vt=fe=vn=mt=_t=$e=Qt=Ge=gt=Mt=Kt=Ft=Zt=Te=_n=X.dragged=X.ghost=X.clone=X.active=null,Dn.forEach(function(e){e.checked=!0}),Dn.length=Un=Vn=0},handleEvent:function(e){switch(e.type){case"drop":case"dragend":this._onDrop(e);break;case"dragenter":case"dragover":T&&(this._onDragOver(e),Ir(e));break;case"selectstart":e.preventDefault();break}},toArray:function(){for(var e=[],n,i=this.el.children,l=0,o=i.length,r=this.options;l<o;l++)n=i[l],Ze(n,r.draggable,this.el,!1)&&e.push(n.getAttribute(r.dataIdAttr)||Fr(n));return e},sort:function(e,n){var i={},l=this.el;this.toArray().forEach(function(o,r){var s=l.children[r];Ze(s,this.options.draggable,l,!1)&&(i[o]=s)},this),n&&this.captureAnimationState(),e.forEach(function(o){i[o]&&(l.removeChild(i[o]),l.appendChild(i[o]))}),n&&this.animateAll()},save:function(){var e=this.options.store;e&&e.set&&e.set(this)},closest:function(e,n){return Ze(e,n||this.options.draggable,this.el,!1)},option:function(e,n){var i=this.options;if(n===void 0)return i[e];var l=Jt.modifyOption(this,e,n);typeof l<"u"?i[e]=l:i[e]=n,e==="group"&&kl(i)},destroy:function(){je("destroy",this);var e=this.el;e[He]=null,$(e,"mousedown",this._onTapStart),$(e,"touchstart",this._onTapStart),$(e,"pointerdown",this._onTapStart),this.nativeDraggable&&($(e,"dragover",this),$(e,"dragenter",this)),Array.prototype.forEach.call(e.querySelectorAll("[draggable]"),function(n){n.removeAttribute("draggable")}),this._onDrop(),this._disableDelayedDragEvents(),wn.splice(wn.indexOf(this.el),1),this.el=e=null},_hideClone:function(){if(!mt){if(je("hideClone",this),X.eventCanceled)return;x(fe,"display","none"),this.options.removeCloneOnHide&&fe.parentNode&&fe.parentNode.removeChild(fe),mt=!0}},_showClone:function(e){if(e.lastPutMode!=="clone"){this._hideClone();return}if(mt){if(je("showClone",this),X.eventCanceled)return;T.parentNode==de&&!this.options.group.revertClone?de.insertBefore(fe,T):vt?de.insertBefore(fe,vt):de.appendChild(fe),this.options.group.revertClone&&this.animate(T,fe),x(fe,"display",""),mt=!1}}};function Ir(t){t.dataTransfer&&(t.dataTransfer.dropEffect="move"),t.cancelable&&t.preventDefault()}function Ln(t,e,n,i,l,o,r,s){var a,u=t[He],d=u.options.onMove,c;return window.CustomEvent&&!at&&!xt?a=new CustomEvent("move",{bubbles:!0,cancelable:!0}):(a=document.createEvent("Event"),a.initEvent("move",!0,!0)),a.to=e,a.from=t,a.dragged=n,a.draggedRect=i,a.related=l||e,a.relatedRect=o||_e(e),a.willInsertAfter=s,a.originalEvent=r,t.dispatchEvent(a),d&&(c=d.call(u,a,r)),c}function Qn(t){t.draggable=!1}function Tr(){Kn=!1}function Ar(t,e,n){var i=_e(At(n.el,0,n.options,!0)),l=bl(n.el,n.options,V),o=10;return e?t.clientX<l.left-o||t.clientY<i.top&&t.clientX<i.right:t.clientY<l.top-o||t.clientY<i.bottom&&t.clientX<i.left}function Or(t,e,n){var i=_e(Xn(n.el,n.options.draggable)),l=bl(n.el,n.options,V),o=10;return e?t.clientX>l.right+o||t.clientY>i.bottom&&t.clientX>i.left:t.clientY>l.bottom+o||t.clientX>i.right&&t.clientY>i.top}function Mr(t,e,n,i,l,o,r,s){var a=i?t.clientY:t.clientX,u=i?n.height:n.width,d=i?n.top:n.left,c=i?n.bottom:n.right,f=!1;if(!r){if(s&&kn<u*l){if(!$t&&(Zt===1?a>d+u*o/2:a<c-u*o/2)&&($t=!0),$t)f=!0;else if(Zt===1?a<d+kn:a>c-kn)return-Zt}else if(a>d+u*(1-l)/2&&a<c-u*(1-l)/2)return Nr(e)}return f=f||r,f&&(a<d+u*o/2||a>c-u*o/2)?a>d+u/2?1:-1:0}function Nr(t){return Ve(T)<Ve(t)?1:-1}function Fr(t){for(var e=t.tagName+t.className+t.src+t.href+t.textContent,n=e.length,i=0;n--;)i+=e.charCodeAt(n);return i.toString(36)}function Rr(t){Dn.length=0;for(var e=t.getElementsByTagName("input"),n=e.length;n--;){var i=e[n];i.checked&&Dn.push(i)}}function Pn(t){return setTimeout(t,0)}function Zn(t){return clearTimeout(t)}Sn&&ee(document,"touchmove",function(t){(X.active||Nt)&&t.cancelable&&t.preventDefault()}),X.utils={on:ee,off:$,css:x,find:cl,is:function(e,n){return!!Ze(e,n,e,!1)},extend:vr,throttle:hl,closest:Ze,toggleClass:ze,clone:gl,index:Ve,nextTick:Pn,cancelNextTick:Zn,detectDirection:El,getChild:At,expando:He},X.get=function(t){return t[He]},X.mount=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];e[0].constructor===Array&&(e=e[0]),e.forEach(function(i){if(!i.prototype||!i.prototype.constructor)throw"Sortable: Mounted plugin must be a constructor function, not ".concat({}.toString.call(i));i.utils&&(X.utils=nt(nt({},X.utils),i.utils)),Jt.mount(i)})},X.create=function(t,e){return new X(t,e)},X.version=gr;var ye=[],en,$n,ei=!1,ni,ii,In,tn;function Br(){function t(){this.defaults={scroll:!0,forceAutoScrollFallback:!1,scrollSensitivity:30,scrollSpeed:10,bubbleScroll:!0};for(var e in this)e.charAt(0)==="_"&&typeof this[e]=="function"&&(this[e]=this[e].bind(this))}return t.prototype={dragStarted:function(n){var i=n.originalEvent;this.sortable.nativeDraggable?ee(document,"dragover",this._handleAutoScroll):this.options.supportPointer?ee(document,"pointermove",this._handleFallbackAutoScroll):i.touches?ee(document,"touchmove",this._handleFallbackAutoScroll):ee(document,"mousemove",this._handleFallbackAutoScroll)},dragOverCompleted:function(n){var i=n.originalEvent;!this.options.dragOverBubble&&!i.rootEl&&this._handleAutoScroll(i)},drop:function(){this.sortable.nativeDraggable?$(document,"dragover",this._handleAutoScroll):($(document,"pointermove",this._handleFallbackAutoScroll),$(document,"touchmove",this._handleFallbackAutoScroll),$(document,"mousemove",this._handleFallbackAutoScroll)),Cl(),Tn(),_r()},nulling:function(){In=$n=en=ei=tn=ni=ii=null,ye.length=0},_handleFallbackAutoScroll:function(n){this._handleAutoScroll(n,!0)},_handleAutoScroll:function(n,i){var l=this,o=(n.touches?n.touches[0]:n).clientX,r=(n.touches?n.touches[0]:n).clientY,s=document.elementFromPoint(o,r);if(In=n,i||this.options.forceAutoScrollFallback||xt||at||Ut){li(n,this.options,s,i);var a=ht(s,!0);ei&&(!tn||o!==ni||r!==ii)&&(tn&&Cl(),tn=setInterval(function(){var u=ht(document.elementFromPoint(o,r),!0);u!==a&&(a=u,Tn()),li(n,l.options,u,i)},10),ni=o,ii=r)}else{if(!this.options.bubbleScroll||ht(s,!0)===it()){Tn();return}li(n,this.options,ht(s,!1),!1)}}},ot(t,{pluginName:"scroll",initializeByDefault:!0})}function Tn(){ye.forEach(function(t){clearInterval(t.pid)}),ye=[]}function Cl(){clearInterval(tn)}var li=hl(function(t,e,n,i){if(e.scroll){var l=(t.touches?t.touches[0]:t).clientX,o=(t.touches?t.touches[0]:t).clientY,r=e.scrollSensitivity,s=e.scrollSpeed,a=it(),u=!1,d;$n!==n&&($n=n,Tn(),en=e.scroll,d=e.scrollFn,en===!0&&(en=ht(n,!0)));var c=0,f=en;do{var h=f,p=_e(h),g=p.top,m=p.bottom,v=p.left,C=p.right,S=p.width,D=p.height,y=void 0,P=void 0,w=h.scrollWidth,L=h.scrollHeight,E=x(h),W=h.scrollLeft,Y=h.scrollTop;h===a?(y=S<w&&(E.overflowX==="auto"||E.overflowX==="scroll"||E.overflowX==="visible"),P=D<L&&(E.overflowY==="auto"||E.overflowY==="scroll"||E.overflowY==="visible")):(y=S<w&&(E.overflowX==="auto"||E.overflowX==="scroll"),P=D<L&&(E.overflowY==="auto"||E.overflowY==="scroll"));var F=y&&(Math.abs(C-l)<=r&&W+S<w)-(Math.abs(v-l)<=r&&!!W),K=P&&(Math.abs(m-o)<=r&&Y+D<L)-(Math.abs(g-o)<=r&&!!Y);if(!ye[c])for(var Q=0;Q<=c;Q++)ye[Q]||(ye[Q]={});(ye[c].vx!=F||ye[c].vy!=K||ye[c].el!==h)&&(ye[c].el=h,ye[c].vx=F,ye[c].vy=K,clearInterval(ye[c].pid),(F!=0||K!=0)&&(u=!0,ye[c].pid=setInterval((function(){i&&this.layer===0&&X.active._onTouchMove(In);var A=ye[this.layer].vy?ye[this.layer].vy*s:0,q=ye[this.layer].vx?ye[this.layer].vx*s:0;typeof d=="function"&&d.call(X.dragged.parentNode[He],q,A,t,In,ye[this.layer].el)!=="continue"||ml(ye[this.layer].el,q,A)}).bind({layer:c}),24))),c++}while(e.bubbleScroll&&f!==a&&(f=ht(f,!1)));ei=u}},30),Ll=function(e){var n=e.originalEvent,i=e.putSortable,l=e.dragEl,o=e.activeSortable,r=e.dispatchSortableEvent,s=e.hideGhostForTarget,a=e.unhideGhostForTarget;if(n){var u=i||o;s();var d=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:n,c=document.elementFromPoint(d.clientX,d.clientY);a(),u&&!u.el.contains(c)&&(r("spill"),this.onSpill({dragEl:l,putSortable:i}))}};function oi(){}oi.prototype={startIndex:null,dragStart:function(e){var n=e.oldDraggableIndex;this.startIndex=n},onSpill:function(e){var n=e.dragEl,i=e.putSortable;this.sortable.captureAnimationState(),i&&i.captureAnimationState();var l=At(this.sortable.el,this.startIndex,this.options);l?this.sortable.el.insertBefore(n,l):this.sortable.el.appendChild(n),this.sortable.animateAll(),i&&i.animateAll()},drop:Ll},ot(oi,{pluginName:"revertOnSpill"});function ri(){}ri.prototype={onSpill:function(e){var n=e.dragEl,i=e.putSortable,l=i||this.sortable;l.captureAnimationState(),n.parentNode&&n.parentNode.removeChild(n),l.animateAll()},drop:Ll},ot(ri,{pluginName:"removeOnSpill"}),X.mount(new Br),X.mount(ri,oi);function Pl(t,e,n){const i=t.slice();return i[16]=e[n],i}function Il(t,e,n){const i=t.slice();return i[19]=e[n],i}function Tl(t){let e,n,i,l;function o(){return t[10](t[19])}return{c(){e=k("div"),n=k("a"),n.innerHTML='<i class="fas fa-pencil-alt fa-sm"></i>',b(n,"href","javascript:"),b(n,"data-action","editField"),b(n,"class","edit-field svelte-1d0iatn"),b(e,"class","right svelte-1d0iatn")},m(r,s){G(r,e,s),_(e,n),i||(l=ne(n,"click",o),i=!0)},p(r,s){t=r},d(r){r&&j(e),i=!1,l()}}}function Al(t,e){let n,i,l,o=e[19].label+"",r,s,a,u=e[2].editable&&Tl(e),d=[e[9](e[19])],c={};for(let f=0;f<d.length;f+=1)c=Ht(c,d[f]);return{key:t,first:null,c(){n=k("li"),i=k("div"),l=k("label"),r=ce(o),s=R(),u&&u.c(),a=R(),b(l,"class","svelte-1d0iatn"),b(i,"class","left svelte-1d0iatn"),ft(n,c),be(n,"svelte-1d0iatn",!0),this.first=n},m(f,h){G(f,n,h),_(n,i),_(i,l),_(l,r),_(n,s),u&&u.m(n,null),_(n,a)},p(f,h){e=f,h&1&&o!==(o=e[19].label+"")&&Re(r,o),e[2].editable?u?u.p(e,h):(u=Tl(e),u.c(),u.m(n,a)):u&&(u.d(1),u=null),ft(n,c=hn(d,[h&1&&e[9](e[19])])),be(n,"svelte-1d0iatn",!0)},d(f){f&&j(n),u&&u.d()}}}function Ol(t,e){let n,i,l,o=e[16].label+"",r,s,a=[e[9](e[16])],u={};for(let d=0;d<a.length;d+=1)u=Ht(u,a[d]);return{key:t,first:null,c(){n=k("li"),i=k("div"),l=k("label"),r=ce(o),s=R(),b(l,"class","svelte-1d0iatn"),b(i,"class","left svelte-1d0iatn"),ft(n,u),be(n,"svelte-1d0iatn",!0),this.first=n},m(d,c){G(d,n,c),_(n,i),_(i,l),_(l,r),_(n,s)},p(d,c){e=d,c&2&&o!==(o=e[16].label+"")&&Re(r,o),ft(n,u=hn(a,[c&2&&e[9](e[16])])),be(n,"svelte-1d0iatn",!0)},d(d){d&&j(n)}}}function Hr(t){let e,n,i,l,o,r,s=[],a=new Map,u,d,c,f,h,p,g,m,v=[],C=new Map,S=pe(t[0].sort(Nl));const D=w=>w[19].name;for(let w=0;w<S.length;w+=1){let L=Il(t,S,w),E=D(L);a.set(E,s[w]=Al(E,L))}let y=pe(t[1]);const P=w=>w[16].name;for(let w=0;w<y.length;w+=1){let L=Pl(t,y,w),E=P(L);C.set(E,v[w]=Ol(E,L))}return{c(){e=k("div"),n=k("div"),i=k("div"),l=k("header"),l.textContent=`${N.translate("Selected","labels","Admin")}`,o=R(),r=k("ul");for(let w=0;w<s.length;w+=1)s[w].c();u=R(),d=k("div"),c=R(),f=k("div"),h=k("div"),p=k("header"),p.textContent=`${N.translate("Available","labels","Admin")}`,g=R(),m=k("ul");for(let w=0;w<v.length;w+=1)v[w].c();b(l,"class","svelte-1d0iatn"),b(r,"class","enabled connected svelte-1d0iatn"),b(i,"class","well svelte-1d0iatn"),b(n,"class","col-sm-5"),b(d,"class","col-sm-2"),b(p,"class","svelte-1d0iatn"),b(m,"class","disabled connected svelte-1d0iatn"),b(h,"class","well svelte-1d0iatn"),b(f,"class","col-sm-5"),b(e,"id","layout"),b(e,"class","row")},m(w,L){G(w,e,L),_(e,n),_(n,i),_(i,l),_(i,o),_(i,r);for(let E=0;E<s.length;E+=1)s[E]&&s[E].m(r,null);_(e,u),_(e,d),_(e,c),_(e,f),_(f,h),_(h,p),_(h,g),_(h,m);for(let E=0;E<v.length;E+=1)v[E]&&v[E].m(m,null);t[11](e)},p(w,L){L&645&&(S=pe(w[0].sort(Nl)),s=Pt(s,L,D,1,w,S,a,r,Lt,Al,null,Il)),L&514&&(y=pe(w[1]),v=Pt(v,L,P,1,w,y,C,m,Lt,Ol,null,Pl))},d(w){w&&j(e);for(let L=0;L<s.length;L+=1)s[L].d();for(let L=0;L<v.length;L+=1)v[L].d();t[11](null)}}}function jr(t){let e,n,i={params:t[2],validate:t[8],fetch:t[4],loadLayout:t[3],$$slots:{default:[Hr]},$$scope:{ctx:t}};return e=new ll({props:i}),t[12](e),{c(){Qe(e.$$.fragment)},m(l,o){xe(e,l,o),n=!0},p(l,[o]){const r={};o&4&&(r.params=l[2]),o&16&&(r.fetch=l[4]),o&8&&(r.loadLayout=l[3]),o&4194343&&(r.$$scope={dirty:o,ctx:l}),e.$set(r)},i(l){n||(ke(e.$$.fragment,l),n=!0)},o(l){Le(e.$$.fragment,l),n=!1},d(l){t[12](null),Ue(e,l)}}}function Wr(t){return t.toLowerCase()}function Ml(t,e){return t[e]}const Nl=(t,e)=>t.sortOrder-e.sortOrder;function qr(t,e,n){let i,l,o,{params:r}=e,{enabledFields:s=[]}=e,{disabledFields:a=[]}=e,{loadLayout:u}=e,d;Et(()=>{c()}),Rn(()=>{l&&l.destroy(),o&&o.destroy()});function c(){const S={group:"fields",draggable:"li",animation:150};l=X.create(i.querySelector("ul.enabled"),{...S,onEnd(D){if(D.to.closest(".connected").classList.contains("enabled")){const[y]=s.splice(D.oldIndex,1);s.splice(D.newIndex,0,y)}else{const y=s[D.oldIndex];s.splice(D.oldIndex,1),a.splice(D.newIndex,0,y),n(1,a=[...a])}n(0,s=[...s])}}),o=X.create(i.querySelector("ul.disabled"),{...S,onEnd(D){if(D.to.closest(".connected").classList.contains("disabled")){const[y]=a.splice(D.oldIndex,1);a.splice(D.newIndex,0,y)}else{const y=a[D.oldIndex];a.splice(D.oldIndex,1),s.splice(D.newIndex,0,y),n(0,s=[...s])}n(1,a=[...a])}})}function f(S){r.openEditDialog(S,r.scope,r.dataAttributeList,r.dataAttributesDefs,D=>{n(0,s=s.map(y=>{if(y.name===S.name)for(let P in D)y[P]=D[P];return y}))})}let{fetch:h=()=>s}=e;function p(S){return S.length===0?(Be.notify("Layout cannot be empty","error"),!1):!0}function g(S){const D={};return r.dataAttributeList.forEach(y=>{Ml(S,y)!=null&&(D[`data-${Wr(y)}`]=Ml(S,y))}),D}const m=S=>f(S);function v(S){Ce[S?"unshift":"push"](()=>{i=S,n(5,i)})}function C(S){Ce[S?"unshift":"push"](()=>{d=S,n(6,d)})}return t.$$set=S=>{"params"in S&&n(2,r=S.params),"enabledFields"in S&&n(0,s=S.enabledFields),"disabledFields"in S&&n(1,a=S.disabledFields),"loadLayout"in S&&n(3,u=S.loadLayout),"fetch"in S&&n(4,h=S.fetch)},[s,a,r,u,h,i,d,f,p,g,m,v,C]}let ai=class extends Ie{constructor(e){super(),Pe(this,e,qr,jr,ge,{params:2,enabledFields:0,disabledFields:1,loadLayout:3,fetch:4})}};function zr(t){let e,n,i={params:t[0],enabledFields:t[2],disabledFields:t[3],editable:Gr,loadLayout:t[4]};return e=new ai({props:i}),t[5](e),{c(){Qe(e.$$.fragment)},m(l,o){xe(e,l,o),n=!0},p(l,[o]){const r={};o&1&&(r.params=l[0]),o&4&&(r.enabledFields=l[2]),o&8&&(r.disabledFields=l[3]),e.$set(r)},i(l){n||(ke(e.$$.fragment,l),n=!0)},o(l){Le(e.$$.fragment,l),n=!1},d(l){t[5](null),Ue(e,l)}}}let Gr=!0;function Xr(t,e,n){let{params:i}=e;i.dataAttributeList||(i.dataAttributeList=["id","name","width","widthPx","link","notSortable","align","view","customLabel","editable"]),i.dataAttributesDefs||(i.dataAttributesDefs={link:{type:"bool"},width:{type:"float"},notSortable:{type:"bool"},align:{type:"enum",options:["left","right"]},view:{type:"varchar",readOnly:!0},customLabel:{type:"varchar",readOnly:!0},widthPx:{type:"float"},name:{type:"varchar",readOnly:!0},editable:{type:"bool"}});let l,o=[],r=[];const s=[],a=[];function u(p){Xt.create(i.scope,g=>{tt.get(i.scope,i.type,i.relatedScope,i.layoutProfileId,m=>{p&&(d(g,m.layout),p(m))},!1)})}function d(p,g){const m=Object.keys(p.defs.fields).filter(D=>c(p.getFieldParam(D,"type"))&&f(p,D)).sort((D,y)=>N.translate(D,"fields",i.scope).localeCompare(N.translate(y,"fields",i.scope))),v=[],C=[],S=[];n(2,o=g.map(D=>{const y=N.translate(D.name,"fields",i.scope);return C.includes(y)&&S.push(y),C.push(y),v.push(D.name),{...D,label:D.label||y}})),n(3,r=m.filter(D=>!v.includes(D)).map(D=>{const y=N.translate(D,"fields",i.scope);C.includes(y)&&S.push(y),C.push(y);const P={name:D,label:y},w=ve.get(["entityDefs",i.scope,"fields",D,"type"]);return w&&ve.get(["fields",w,"notSortable"])&&(P.notSortable=!0),P})),[o,r].forEach(D=>{D.forEach(y=>{S.includes(y.label)&&(y.label+=` (${y.name})`)})})}function c(p){return i.fieldTypes?i.fieldTypes.includes(p):!0}function f(p,g){if(s.includes(g)||a.includes(p.getFieldParam(g,"type")))return!1;const m=["disabled",`layout${Espo.utils.upperCaseFirst(i.type)}Disabled`];i.reelType&&m.push(`layout${Espo.utils.upperCaseFirst(i.reelType)}Disabled`);for(let v of m)if(p.getFieldParam(g,v))return!1;return!0}function h(p){Ce[p?"unshift":"push"](()=>{l=p,n(1,l)})}return t.$$set=p=>{"params"in p&&n(0,i=p.params)},[i,l,o,r,u,h]}class si extends Ie{constructor(e){super(),Pe(this,e,Xr,zr,ge,{params:0})}}function Yr(t){let e,n,i={params:t[0],enabledFields:t[2],disabledFields:t[3],loadLayout:t[5],fetch:t[4]};return e=new ai({props:i}),t[7](e),{c(){Qe(e.$$.fragment)},m(l,o){xe(e,l,o),n=!0},p(l,[o]){const r={};o&1&&(r.params=l[0]),o&4&&(r.enabledFields=l[2]),o&8&&(r.disabledFields=l[3]),e.$set(r)},i(l){n||(ke(e.$$.fragment,l),n=!0)},o(l){Le(e.$$.fragment,l),n=!1},d(l){t[7](null),Ue(e,l)}}}function xr(t,e,n){let{params:i}=e,{viewType:l="detail"}=e;i.dataAttributeList||(i.dataAttributeList=["id","name","style","sticked"]),i.dataAttributesDefs||(i.dataAttributesDefs={style:{type:"enum",options:["default","success","danger","primary","info","warning"],translation:"LayoutManager.options.style"},sticked:{type:"bool"},name:{readOnly:!0}});let o,r=[],s=[],a=()=>{let f={};return r.forEach(h=>{f[h.name]=h}),s.forEach(h=>{f[h.name]={...h,disabled:!0}}),f};function u(f){tt.get(i.scope,i.type,null,i.layoutProfileId,h=>{f&&(d(h.layout),f(h))},!1)}function d(f){let h=[],p={},g={};ve.get(["clientDefs",i.scope,"defaultSidePanel",l])!==!1&&!ve.get(["clientDefs",i.scope,"defaultSidePanelDisabled"])&&(h.push("default"),p.default="Default"),(ve.get(["clientDefs",i.scope,"sidePanels",l])||[]).forEach(m=>{m.name&&(h.push(m.name),m.label&&(p[m.name]=m.label),g[m.name]=m)}),n(3,s=[]),f=f||{},n(2,r=[]),h.forEach((m,v)=>{let C=!1,S=f[m]||{};S.disabled&&(C=!0);let D;if(p[m]?D=N.translate(p[m],"labels",i.scope):D=N.translate(m,"panels",i.scope),C)s.push({name:m,label:D});else{let y={name:m,label:D};y.name in g&&i.dataAttributeList.forEach(P=>{if(P==="name")return;let w=g[y.name]||{};P in w&&(y[P]=w[P])});for(let P in S)y[P]=S[P];y.index="index"in S?S.index:v,r.push(y)}}),r.sort((m,v)=>m.index-v.index)}function c(f){Ce[f?"unshift":"push"](()=>{o=f,n(1,o)})}return t.$$set=f=>{"params"in f&&n(0,i=f.params),"viewType"in f&&n(6,l=f.viewType)},[i,o,r,s,a,u,l,c]}class Ur extends Ie{constructor(e){super(),Pe(this,e,xr,Yr,ge,{params:0,viewType:6})}}function Vr(t){let e,n;return e=new ai({props:{params:t[0],enabledFields:t[1],disabledFields:t[2],loadLayout:t[3]}}),{c(){Qe(e.$$.fragment)},m(i,l){xe(e,i,l),n=!0},p(i,[l]){const o={};l&1&&(o.params=i[0]),l&2&&(o.enabledFields=i[1]),l&4&&(o.disabledFields=i[2]),e.$set(o)},i(i){n||(ke(e.$$.fragment,i),n=!0)},o(i){Le(e.$$.fragment,i),n=!1},d(i){Ue(e,i)}}}function Jr(t,e){return!t.getLinkParam(e,"disabled")&&!t.getLinkParam(e,"layoutRelationshipsDisabled")}function Kr(t,e,n){let{params:i}=e;i.dataAttributeList||(i.dataAttributeList=["id","name","style","hiddenPerDefault"]),i.dataAttributesDefs||(i.dataAttributesDefs={style:{type:"enum",options:["default","success","danger","primary","info","warning"],translation:"LayoutManager.options.style"},hiddenPerDefault:{type:"bool"},name:{readOnly:!0}});let l=[],o=[];function r(a){Xt.create(i.scope,function(u){tt.get(i.scope,i.type,null,i.layoutProfileId,d=>{a&&(s(u,d.layout),a(d))},!1)})}function s(a,u){let d=[];for(let h in a.defs.links)["belongsTo","hasMany","hasChildren"].includes(a.defs.links[h].type)&&Jr(a,h)&&d.push(h);const c=ve.get(["clientDefs",i.scope,"bottomPanels","detail"])||[];for(let h of c)h.layoutRelationshipsDisabled||d.push(h.name);d.sort(function(h,p){let g,m,v=c.find(S=>S.name===h),C=c.find(S=>S.name===p);return h in a.defs.links?g=N.translate(h,"links",i.scope):v&&(g=N.translate(v.label,"labels",i.scope)),p in a.defs.links?m=N.translate(p,"links",i.scope):C&&(m=N.translate(C.label,"labels",i.scope)),g.localeCompare(m)});let f=[];n(1,l=[]),n(2,o=[]);for(let h in u){let p=u[h],g,m=c.find(v=>v.name===p.name);typeof p=="string"||p instanceof String?g={name:p,label:m?N.translate(m.label,"labels",i.scope):N.translate(p,"links",i.scope)}:(g=p,g.label=m?N.translate(m.label,"labels",i.scope):N.translate(g.name,"links",i.scope)),i.dataAttributeList.forEach(v=>{if(v==="name"||v in g)return;let C=ve.get(["clientDefs",i.scope,"relationshipPanels",g.name,v]);C!==null&&(g[v]=C)}),l.push(g),f.push(g.name)}for(let h of d)if(!f.includes(h)){let p=c.find(g=>g.name===h);o.push({name:h,label:p?N.translate(p.label,"labels",i.scope):N.translate(h,"links",i.scope)})}}return t.$$set=a=>{"params"in a&&n(0,i=a.params)},[i,l,o,r]}class Qr extends Ie{constructor(e){super(),Pe(this,e,Kr,Vr,ge,{params:0})}}function Fl(t,e,n){const i=t.slice();return i[39]=e[n],i}function Rl(t,e,n){const i=t.slice();return i[42]=e[n],i}function Bl(t,e,n){const i=t.slice();return i[45]=e[n],i}function Hl(t,e,n){const i=t.slice();return i[48]=e[n],i[50]=n,i}function Zr(t){let e,n,i,l,o;function r(){return t[20](t[42],t[45],t[50])}function s(...a){return t[21](t[42],t[45],t[50],...a)}return{c(){e=k("li"),n=k("a"),n.innerHTML='<i class="fas fa-minus"></i>',i=R(),b(n,"href","#"),b(n,"data-action","minusCell"),b(n,"class","remove-field svelte-1wub2tj"),b(e,"class","empty cell svelte-1wub2tj")},m(a,u){G(a,e,u),_(e,n),_(e,i),l||(o=[ne(n,"click",ct(r)),ne(e,"dragover",ct(ia)),ne(e,"drop",s)],l=!0)},p(a,u){t=a},d(a){a&&j(e),l=!1,Ye(o)}}}function $r(t){let e,n=t[48].label+"",i,l,o,r,s,a,u,d,c,f,h;function p(){return t[18](t[42],t[45],t[50])}function g(...m){return t[19](t[48],...m)}return{c(){e=k("li"),i=ce(n),l=R(),o=k("a"),o.innerHTML='<i class="fas fa-times"></i>',r=R(),b(o,"href","#"),b(o,"data-action","removeField"),b(o,"class","remove-field svelte-1wub2tj"),b(e,"class","cell svelte-1wub2tj"),b(e,"draggable","true"),b(e,"data-id",s=t[48].id),b(e,"data-name",a=t[48].name),b(e,"data-full-width",u=t[48].fullWidth?"true":void 0),b(e,"data-custom-label",d=t[48].customLabel?t[48].customLabel:void 0),b(e,"data-no-label",c=t[48].noLabel)},m(m,v){G(m,e,v),_(e,i),_(e,l),_(e,o),_(e,r),f||(h=[ne(o,"click",ct(p)),ne(e,"dragstart",Fn(g))],f=!0)},p(m,v){t=m,v[0]&2&&n!==(n=t[48].label+"")&&Re(i,n),v[0]&2&&s!==(s=t[48].id)&&b(e,"data-id",s),v[0]&2&&a!==(a=t[48].name)&&b(e,"data-name",a),v[0]&2&&u!==(u=t[48].fullWidth?"true":void 0)&&b(e,"data-full-width",u),v[0]&2&&d!==(d=t[48].customLabel?t[48].customLabel:void 0)&&b(e,"data-custom-label",d),v[0]&2&&c!==(c=t[48].noLabel)&&b(e,"data-no-label",c)},d(m){m&&j(e),f=!1,Ye(h)}}}function jl(t){let e;function n(o,r){return o[48]?$r:Zr}let i=n(t),l=i(t);return{c(){l.c(),e=Nn()},m(o,r){l.m(o,r),G(o,e,r)},p(o,r){i===(i=n(o))&&l?l.p(o,r):(l.d(1),l=i(o),l&&(l.c(),l.m(e.parentNode,e)))},d(o){o&&j(e),l.d(o)}}}function Wl(t,e){let n,i,l,o,r,s,a,u,d;function c(){return e[17](e[42],e[45])}let f=pe(e[45].cells),h=[];for(let p=0;p<f.length;p+=1)h[p]=jl(Hl(e,f,p));return{key:t,first:null,c(){n=k("li"),i=k("div"),l=k("a"),l.innerHTML='<i class="fas fa-times"></i>',o=R(),r=k("ul");for(let p=0;p<h.length;p+=1)h[p].c();s=R(),b(l,"href","#"),b(l,"data-action","removeRow"),b(l,"class","remove-row pull-right svelte-1wub2tj"),b(i,"class","svelte-1wub2tj"),b(r,"class","cells svelte-1wub2tj"),b(n,"class","row svelte-1wub2tj"),b(n,"data-number",a=e[45].number),this.first=n},m(p,g){G(p,n,g),_(n,i),_(i,l),_(n,o),_(n,r);for(let m=0;m<h.length;m+=1)h[m]&&h[m].m(r,null);_(n,s),u||(d=[ne(l,"click",ct(c)),ne(r,"mousedown",Fn(la))],u=!0)},p(p,g){if(e=p,g[0]&5634){f=pe(e[45].cells);let m;for(m=0;m<f.length;m+=1){const v=Hl(e,f,m);h[m]?h[m].p(v,g):(h[m]=jl(v),h[m].c(),h[m].m(r,null))}for(;m<h.length;m+=1)h[m].d(1);h.length=f.length}g[0]&2&&a!==(a=e[45].number)&&b(n,"data-number",a)},d(p){p&&j(n),jt(h,p),u=!1,Ye(d)}}}function ql(t,e){let n,i,l,o=(e[42].customLabel||e[42].label||"")+"",r,s,a,u,d,c,f,h,p,g,m,v=[],C=new Map,S,D,y,P,w,L,E;function W(){return e[15](e[42])}function Y(){return e[16](e[42])}let F=pe(e[42].rows);const K=A=>A[45].number;for(let A=0;A<F.length;A+=1){let q=Bl(e,F,A),me=K(q);C.set(me,v[A]=Wl(me,q))}function Q(){return e[22](e[42])}return{key:t,first:null,c(){n=k("li"),i=k("header"),l=k("label"),r=ce(o),a=ce(`Â \r
                                `),u=k("a"),u.innerHTML='<i class="fas fa-pencil-alt fa-sm"></i>',d=R(),c=k("a"),f=k("i"),g=R(),m=k("ul");for(let A=0;A<v.length;A+=1)v[A].c();S=R(),D=k("div"),y=k("a"),y.innerHTML='<i class="fas fa-plus"></i>',P=R(),b(l,"data-is-custom",s=e[42].customLabel?"true":void 0),b(l,"class","svelte-1wub2tj"),b(u,"href","#"),b(u,"data-action","edit-panel-label"),b(u,"class","edit-panel-label svelte-1wub2tj"),b(f,"class","fas fa-times"),b(c,"href","#"),se(c,"float","right"),b(c,"data-action","removePanel"),b(c,"class","remove-panel svelte-1wub2tj"),b(c,"data-number",h=e[42].number),b(i,"data-name",p=e[42].name),b(i,"class","svelte-1wub2tj"),b(m,"class","rows svelte-1wub2tj"),b(y,"href","#"),b(y,"data-action","addRow"),b(y,"class","svelte-1wub2tj"),b(D,"class","svelte-1wub2tj"),b(n,"data-number",w=e[42].number),b(n,"class","panel-layout svelte-1wub2tj"),this.first=n},m(A,q){G(A,n,q),_(n,i),_(i,l),_(l,r),_(i,a),_(i,u),_(i,d),_(i,c),_(c,f),_(n,g),_(n,m);for(let me=0;me<v.length;me+=1)v[me]&&v[me].m(m,null);_(n,S),_(n,D),_(D,y),_(n,P),L||(E=[ne(u,"click",ct(W)),ne(c,"click",ct(Y)),ne(m,"mousedown",Fn(oa)),ne(y,"click",ct(Q))],L=!0)},p(A,q){e=A,q[0]&2&&o!==(o=(e[42].customLabel||e[42].label||"")+"")&&Re(r,o),q[0]&2&&s!==(s=e[42].customLabel?"true":void 0)&&b(l,"data-is-custom",s),q[0]&2&&h!==(h=e[42].number)&&b(c,"data-number",h),q[0]&2&&p!==(p=e[42].name)&&b(i,"data-name",p),q[0]&5890&&(F=pe(e[42].rows),v=Pt(v,q,K,1,e,F,C,m,Lt,Wl,null,Bl)),q[0]&2&&w!==(w=e[42].number)&&b(n,"data-number",w)},d(A){A&&j(n);for(let q=0;q<v.length;q+=1)v[q].d();L=!1,Ye(E)}}}function zl(t){let e,n=t[39].label+"",i,l,o,r,s;function a(...u){return t[23](t[39],...u)}return{c(){e=k("li"),i=ce(n),l=R(),b(e,"class","cell svelte-1wub2tj"),b(e,"data-name",o=t[39].name)},m(u,d){G(u,e,d),_(e,i),_(e,l),r||(s=ne(e,"dragstart",a),r=!0)},p(u,d){t=u,d[0]&4&&n!==(n=t[39].label+"")&&Re(i,n),d[0]&4&&o!==(o=t[39].name)&&b(e,"data-name",o)},d(u){u&&j(e),r=!1,s()}}}function ea(t){let e,n,i,l,o,r,s,a,u=[],d=new Map,c,f,h,p,g,m,v,C,S=pe(t[1]);const D=w=>w[42].number;for(let w=0;w<S.length;w+=1){let L=Rl(t,S,w),E=D(L);d.set(E,u[w]=ql(E,L))}let y=pe(t[2]),P=[];for(let w=0;w<y.length;w+=1)P[w]=zl(Fl(t,y,w));return{c(){e=k("div"),n=k("div"),i=k("div"),l=k("header"),l.textContent=`${N.translate("Layout","LayoutManager")}`,o=R(),r=k("a"),r.textContent=`${N.translate("Add Panel","Admin")}`,s=R(),a=k("ul");for(let w=0;w<u.length;w+=1)u[w].c();c=R(),f=k("div"),h=k("div"),p=k("header"),p.textContent=`${N.translate("Available Fields","Admin")}`,g=R(),m=k("ul");for(let w=0;w<P.length;w+=1)P[w].c();b(l,"class","svelte-1wub2tj"),b(r,"href","#"),b(r,"class","svelte-1wub2tj"),b(a,"class","panels svelte-1wub2tj"),b(i,"class","well svelte-1wub2tj"),b(n,"class","col-md-8 svelte-1wub2tj"),b(p,"class","svelte-1wub2tj"),b(m,"class","disabled cells clearfix svelte-1wub2tj"),b(h,"class","well available-fields svelte-1wub2tj"),b(f,"class","col-md-4 svelte-1wub2tj"),b(e,"id","layout"),b(e,"class","row svelte-1wub2tj")},m(w,L){G(w,e,L),_(e,n),_(n,i),_(i,l),_(i,o),_(i,r),_(i,s),_(i,a);for(let E=0;E<u.length;E+=1)u[E]&&u[E].m(a,null);_(e,c),_(e,f),_(f,h),_(h,p),_(h,g),_(h,m);for(let E=0;E<P.length;E+=1)P[E]&&P[E].m(m,null);v||(C=ne(r,"click",ct(t[5])),v=!0)},p(w,L){if(L[0]&8130&&(S=pe(w[1]),u=Pt(u,L,D,1,w,S,d,a,Lt,ql,null,Rl)),L[0]&4){y=pe(w[2]);let E;for(E=0;E<y.length;E+=1){const W=Fl(w,y,E);P[E]?P[E].p(W,L):(P[E]=zl(W),P[E].c(),P[E].m(m,null))}for(;E<P.length;E+=1)P[E].d(1);P.length=y.length}},d(w){w&&j(e);for(let L=0;L<u.length;L+=1)u[L].d();jt(P,w),v=!1,C()}}}function ta(t){let e,n;return e=new ll({props:{params:t[0],validate:t[13],fetch:t[4],loadLayout:t[3],$$slots:{default:[ea]},$$scope:{ctx:t}}}),{c(){Qe(e.$$.fragment)},m(i,l){xe(e,i,l),n=!0},p(i,l){const o={};l[0]&1&&(o.params=i[0]),l[0]&6|l[1]&1048576&&(o.$$scope={dirty:l,ctx:i}),e.$set(o)},i(i){n||(ke(e.$$.fragment,i),n=!0)},o(i){Le(e.$$.fragment,i),n=!1},d(i){Ue(e,i)}}}function na(t,e){return e.some(n=>n.name===t)}const ia=t=>t.dataTransfer.dropEffect="move",la=()=>{},oa=()=>{};function ra(t,e,n){let{params:i}=e,{columnCount:l=2}=e,o=["id","label","style"],r={label:{type:"varchar"},style:{type:"enum",options:["default","success","danger","primary","info","warning"],translation:"LayoutManager.options.style"},dynamicLogicVisible:{type:"base",view:"views/admin/field-manager/fields/dynamic-logic-conditions"}},s=["modifiedAt","createdAt","modifiedBy","createdBy","assignedUser","ownerUser","teams"],a=[],u=[],d=-1,c=-1,f;Hi();function h(M){let O,z;const U=[];U.push(new Promise(J=>{Xt.create(i.scope,oe=>{tt.get(i.scope,i.type,i.relatedScope,i.layoutProfileId,te=>{O=te,z=oe,J()},!1)})})),i.type==="detail"&&U.push(new Promise(J=>{tt.get(i.scope,"sidePanelsDetail",null,i.layoutProfileId,oe=>{f=oe.layout,J()},!1)})),Promise.all(U).then(()=>{M&&(p(z,O.layout),C(),St().then(()=>{D()}),M(O))})}function p(M,O){let z=[];const U=[];for(const te in M.defs.fields)g(M,te)&&(U.push(N.translate(te,"fields",i.scope)),z.push(te));const J=U.filter((te,Oe)=>U.indexOf(te)!==Oe);let oe=[];n(2,u=[]),n(1,a=O),O.forEach((te,Oe)=>{te.rows.forEach((ue,Xe)=>{ue&&ue.forEach((We,I)=>{if(I==l||!We)return;let Z=N.translate(We.name,"fields",i.scope);J.includes(Z)&&(Z+=` (${We.name})`),oe.push({name:We.name,label:Z}),n(1,a[Oe].rows[Xe][I].label=Z,a)})})}),z.sort((te,Oe)=>N.translate(te,"fields",i.scope).localeCompare(N.translate(Oe,"fields",i.scope)));for(const te in z)if(!na(z[te],oe)){const Oe=z[te];let ue=N.translate(Oe,"fields",i.scope);J.includes(ue)&&(ue+=` (${Oe})`),u.push({name:Oe,label:ue})}}function g(M,O){if(m()&&s.includes(O))return!1;const z=["disabled",`layout${Espo.utils.upperCaseFirst(i.type)}Disabled`];i.reelType&&z.push(`layout${Espo.utils.upperCaseFirst(i.reelType)}Disabled`);for(let U of z)if(M.getFieldParam(O,U))return!1;return!0}function m(){if(ve.get(["clientDefs",i.scope,"defaultSidePanelDisabled"]))return!1;if(f){for(const M in f)if(M==="default"&&f[M].disabled)return!1}return!0}function v(){return a.map(M=>({...M,rows:M.rows.map(O=>O.cells)}))}function C(){d=-1,c=-1,n(1,a=a.map((M,O)=>(M.number=O,d=O,M.rows=M.rows.map(z=>({number:c++,cells:z})),M)))}function S(M){X.create(M,{animation:150,group:"rows",draggable:"li.row",onEnd(O){const z=parseInt(O.to.closest(".panel-layout").getAttribute("data-number")),U=parseInt(O.from.closest(".panel-layout").getAttribute("data-number"));if(U===z)n(1,a=a.map(J=>{if(J.number===z){const[oe]=J.rows.splice(O.oldIndex,1);J.rows.splice(O.newIndex,0,oe)}return J}));else{const oe=a.find(te=>te.number===U).rows[O.oldIndex];n(1,a=a.map(te=>(te.number===U&&te.rows.splice(O.oldIndex,1),te.number===z&&te.rows.splice(O.newIndex,0,oe),te)))}}})}function D(){const M=document.querySelector("ul.panels");M&&X.create(M,{animation:150,group:"panels",draggable:"li.panel-layout",onEnd(O){const z=Array.from(O.to.children);n(1,a=z.map(U=>{const J=parseInt(U.getAttribute("data-number"));return a.find(oe=>oe.number===J)}))}}),document.querySelectorAll("ul.rows").forEach(O=>{S(O)}),document.querySelectorAll("ul.cells.disabled").forEach(O=>{X.create(O,{animation:150,group:"cells",draggable:"li.cell"})})}function y(){d++;const M={label:"New panel",rows:[{number:c++,cells:[!1,!1]}],number:d,name:`panel${d}`,isCustomLabel:!0};n(1,a=[...a,M]),St().then(()=>{const O=document.querySelector(`.panel-layout[data-number="${M.number}"] > .rows`);S(O)})}function P(M){const O=a.find(U=>U.number===M);n(1,a=a.filter(U=>U!==O));let z=[];O.rows.forEach(U=>{U.cells.forEach(J=>{J&&z.push(J)})}),n(2,u=[...u,...z])}function w(M){n(1,a=a.map(O=>(O.number===M&&(O.rows=[...O.rows,{number:c++,cells:Array(l).fill(!1)}]),O)))}function L(M,O){n(1,a=a.map(z=>{if(z.number===M){const U=z.rows.find(J=>J.number===O);z.rows=z.rows.filter(J=>J!=U),n(2,u=[...u,...U.cells.filter(J=>!!J)])}return z}))}function E(M,O,z){n(1,a=a.map(U=>(U.number===M&&(U.rows=U.rows.map((J,oe)=>{if(J.number===O){const te=J.cells[z];te&&n(2,u=[...u,te]),J.cells[z]=!1}return J})),U)))}function W(M,O,z,U){const J=M.dataTransfer.getData("name");let oe=u.find(ue=>ue.name===J),te=null,Oe=null;if(oe)n(2,u=u.filter(ue=>ue!==oe));else{if(a.forEach(ue=>{ue.rows.forEach((Xe,We)=>{Xe.cells.forEach(I=>{I&&I.name===J&&(oe=I,te=Xe.number,Oe=ue.number)})})}),!oe)return;n(1,a=a.map((ue,Xe)=>(Oe===ue.number&&(ue.rows=ue.rows.map((We,I)=>(We.number===te&&(We.cells=We.cells.map((Z,ie)=>Z&&Z.name===J?!1:Z)),We))),ue)))}n(1,a=a.map(ue=>(O===ue.number&&(ue.rows=ue.rows.map(Xe=>(z===Xe.number&&(Xe.cells=Xe.cells.map((We,I)=>I===U?(oe.fullWidth&&Xe.cells.length>1&&delete oe.fullWidth,oe):We)),Xe))),ue)))}function Y(M){i.onEditPanel(M,o,r,O=>{n(1,a=a.map(z=>(z.number===M.number&&o.forEach(U=>{M[U]=O[U]}),z)))})}function F(M,O,z){n(1,a=a.map(U=>(M===U.number&&(U.rows=U.rows.map(J=>{if(O===J.number){const oe=J.cells.filter((te,Oe)=>Oe!==z);oe.length===1&&oe[0]&&(oe[0].fullWidth=!0),J.cells=oe}return J})),U)))}function K(M){let O=0;return M.forEach(z=>{z.rows.forEach(U=>{U.forEach(J=>{J&&O++})})}),O===0?(Be.notify("Layout cannot be empty.","error"),!1):!0}const Q=M=>Y(M),A=M=>P(M.number),q=(M,O)=>L(M.number,O.number),me=(M,O,z)=>E(M.number,O.number,z),Je=(M,O)=>{O.dataTransfer.setData("name",M.name)},st=(M,O,z)=>F(M.number,O.number,z),ut=(M,O,z,U)=>W(U,M.number,O.number,z),Ke=M=>w(M.number),et=(M,O)=>{O.dataTransfer.setData("name",M.name)};return t.$$set=M=>{"params"in M&&n(0,i=M.params),"columnCount"in M&&n(14,l=M.columnCount)},[i,a,u,h,v,y,P,w,L,E,W,Y,F,K,l,Q,A,q,me,Je,st,ut,Ke,et]}class aa extends Ie{constructor(e){super(),Pe(this,e,ra,ta,ge,{params:0,columnCount:14},null,[-1,-1])}}function sa(t){let e,n;return e=new t[1]({props:{params:t[0],viewType:t[2]}}),{c(){Qe(e.$$.fragment)},m(i,l){xe(e,i,l),n=!0},p(i,[l]){const o={};l&1&&(o.params=i[0]),l&4&&(o.viewType=i[2]),e.$set(o)},i(i){n||(ke(e.$$.fragment,i),n=!0)},o(i){Le(e.$$.fragment,i),n=!1},d(i){Ue(e,i)}}}function ua(t,e,n){let{params:i}=e,l,o;const r=ve.get(["clientDefs",i.scope,"additionalLayouts",i.type])||i.type;switch(r&&(i.reelType=r),t.$$set=s=>{"params"in s&&n(0,i=s.params)},r){case"list":n(1,l=si);break;case"leftSidebar":n(1,l=si),n(0,i.fieldTypes=["link","linkMultiple"],i);break;case"kanban":n(1,l=si),n(0,i.dataAttributeList=["id","name","link","align","view","isLarge","cssStyle"],i),n(0,i.dataAttributesDefs={link:{type:"bool"},isLarge:{type:"bool"},width:{type:"float"},cssStyle:{type:"varchar"},align:{type:"enum",options:["left","right"]},view:{type:"varchar",readOnly:!0},name:{type:"varchar",readOnly:!0}},i);break;case"relationships":n(1,l=Qr);break;case"detail":n(1,l=aa);break;case"sidePanelsDetail":n(2,o="detail"),n(1,l=Ur);break}return[i,l,o]}class da extends Ie{constructor(e){super(),Pe(this,e,ua,sa,ge,{params:0})}}function ca(t){let e,n,i,l,o,r=N.translate("apiRequest","labels","Admin")+"",s,a,u,d,c,f,h,p,g,m,v,C,S,D,y,P,w,L,E,W,Y,F,K=N.translate("response","fields","Admin")+"",Q,A,q=N.translate("status","labels","Admin")+"",me,Je,st,ut,Ke,et,M;return{c(){e=k("div"),n=k("h3"),i=k("div"),l=k("div"),o=k("a"),o.textContent=`${N.translate("Administration")}`,s=ce(r),a=R(),u=k("div"),u.textContent=`${N.translate("apiRequest","labels","Admin")}`,d=R(),c=k("button"),c.textContent=`${N.translate("execute","labels","Admin")}`,f=R(),h=k("div"),p=k("div"),g=k("div"),m=k("div"),v=k("label"),v.textContent=`${N.translate("Type","fields","Admin")}`,C=R(),S=k("div"),D=R(),y=k("div"),P=k("div"),w=k("label"),w.textContent=`${N.translate("request","fields","Admin")}`,L=R(),E=k("div"),W=R(),Y=k("div"),F=k("label"),Q=ce(K),A=k("span"),me=ce(q),Je=ce(": "),st=k("span"),ut=R(),Ke=k("div"),b(o,"href","#Admin"),b(l,"class","breadcrumbs-wrapper"),b(i,"class","header-breadcrumbs fixed-header-breadcrumbs"),b(u,"class","header-title"),se(c,"margin","10px 7px 10px 5px"),b(c,"class","btn btn-primary action"),b(c,"data-action","execute"),b(c,"type","button"),b(e,"class","page-header"),b(v,"class","control-label"),b(v,"data-name","type"),b(S,"class","field"),b(S,"data-name","type"),b(m,"class","col-xs-12 cell form-group"),b(g,"class","row"),b(p,"class","col-sm-3"),b(h,"class","row"),b(w,"class","control-label"),b(w,"data-name","request"),b(E,"class","field"),b(E,"data-name","request"),b(P,"class","col-sm-12 col-md-6 cell form-group"),b(A,"class","pull-right status hidden"),se(F,"width","100%"),b(F,"class","control-label"),b(F,"data-name","response"),b(Ke,"class","field"),b(Ke,"data-name","response"),b(Y,"class","col-sm-12 col-md-6 cell form-group"),b(y,"class","row")},m(O,z){G(O,e,z),_(e,n),_(n,i),_(i,l),_(l,o),_(l,s),_(n,a),_(n,u),_(e,d),_(e,c),G(O,f,z),G(O,h,z),_(h,p),_(p,g),_(g,m),_(m,v),_(m,C),_(m,S),G(O,D,z),G(O,y,z),_(y,P),_(P,w),_(P,L),_(P,E),_(y,W),_(y,Y),_(Y,F),_(F,Q),_(F,A),_(A,me),_(A,Je),_(A,st),_(Y,ut),_(Y,Ke),et||(M=ne(c,"click",function(){sn(t[0](t[1]))&&t[0](t[1]).apply(this,arguments)}),et=!0)},p(O,[z]){t=O},i:Ee,o:Ee,d(O){O&&(j(e),j(f),j(h),j(D),j(y)),et=!1,M()}}}function fa(t,e,n){let{afterOnMount:i=()=>null}=e,{sendRequest:l=()=>null}=e,o=null;return Et(()=>{Xt.create("",function(r){n(1,o=r),i(o)})}),t.$$set=r=>{"afterOnMount"in r&&n(2,i=r.afterOnMount),"sendRequest"in r&&n(0,l=r.sendRequest)},[l,o,i]}class pa extends Ie{constructor(e){super(),Pe(this,e,fa,ca,ge,{afterOnMount:2,sendRequest:0})}}function Gl(t,e,n){const i=t.slice();return i[12]=e[n],i}function Xl(t){let e,n=t[12].label+"",i,l,o,r,s,a,u;function d(){return t[10](t[12])}return{c(){e=k("button"),i=ce(n),l=R(),b(e,"data-action",o=t[12].name),e.disabled=t[1],b(e,"type","button"),b(e,"style",r=t[12].cssStyle),b(e,"class",s=`btn action btn-${t[12].style??"default"}`)},m(c,f){G(c,e,f),_(e,i),_(e,l),a||(u=ne(e,"click",d),a=!0)},p(c,f){t=c,f&1&&n!==(n=t[12].label+"")&&Re(i,n),f&1&&o!==(o=t[12].name)&&b(e,"data-action",o),f&2&&(e.disabled=t[1]),f&1&&r!==(r=t[12].cssStyle)&&b(e,"style",r),f&1&&s!==(s=`btn action btn-${t[12].style??"default"}`)&&b(e,"class",s)},d(c){c&&j(e),a=!1,u()}}}function ha(t){let e,n,i,l=pe(t[0]),o=[];for(let a=0;a<l.length;a+=1)o[a]=Xl(Gl(t,l,a));const r=t[9].default,s=Pi(r,t,t[8],null);return{c(){e=k("div");for(let a=0;a<o.length;a+=1)o[a].c();n=R(),s&&s.c(),b(e,"class","button-container"),se(e,"padding-top","10px")},m(a,u){G(a,e,u);for(let d=0;d<o.length;d+=1)o[d]&&o[d].m(e,null);t[11](e),G(a,n,u),s&&s.m(a,u),i=!0},p(a,[u]){if(u&11){l=pe(a[0]);let d;for(d=0;d<l.length;d+=1){const c=Gl(a,l,d);o[d]?o[d].p(c,u):(o[d]=Xl(c),o[d].c(),o[d].m(e,null))}for(;d<o.length;d+=1)o[d].d(1);o.length=l.length}s&&s.p&&(!i||u&256)&&Ai(s,r,a,a[8],i?Ti(r,a[8],u,null):Oi(a[8]),null)},i(a){i||(ke(s,a),i=!0)},o(a){Le(s,a),i=!1},d(a){a&&(j(e),j(n)),jt(o,a),t[11](null),s&&s.d(a)}}}function ma(t,e,n){let{$$slots:i={},$$scope:l}=e,{params:o}=e,{fetch:r}=e,{validate:s=()=>!0}=e,a=!1,{buttonList:u=[{name:"save",label:N.translate("Save","labels"),style:"primary"},{name:"cancel",label:N.translate("Cancel","labels")}]}=e,d;function c(){n(1,a=!0);const g=r();s(g)&&o.onSaved(g),n(1,a=!1)}function f(g){if(g.action){g.action();return}switch(g.name){case"save":c();break}}const h=g=>f(g);function p(g){Ce[g?"unshift":"push"](()=>{d=g,n(2,d)})}return t.$$set=g=>{"params"in g&&n(4,o=g.params),"fetch"in g&&n(5,r=g.fetch),"validate"in g&&n(6,s=g.validate),"buttonList"in g&&n(0,u=g.buttonList),"$$scope"in g&&n(8,l=g.$$scope)},[u,a,d,f,o,r,s,c,l,i,h,p]}class ga extends Ie{constructor(e){super(),Pe(this,e,ma,ha,ge,{params:4,fetch:5,validate:6,buttonList:0,save:7})}get save(){return this.$$.ctx[7]}}function Yl(t,e,n){const i=t.slice();return i[22]=e[n],i}function xl(t,e,n){const i=t.slice();return i[22]=e[n],i}function Ul(t){let e,n,i;function l(){return t[14](t[22])}return{c(){e=k("a"),e.innerHTML='<i class="fas fa-pencil-alt fa-sm svelte-k36s4n"></i>',b(e,"href","javascript:"),b(e,"data-action","editField"),b(e,"class","edit-field svelte-k36s4n")},m(o,r){G(o,e,r),n||(i=ne(e,"click",l),n=!0)},p(o,r){t=o},d(o){o&&j(e),n=!1,i()}}}function Vl(t){let e,n,i;function l(){return t[15](t[22])}return{c(){e=k("a"),e.innerHTML='<i class="fas fa-times"></i>',b(e,"href","javascript:"),b(e,"data-action","removeField"),b(e,"class","remove-field svelte-k36s4n")},m(o,r){G(o,e,r),n||(i=ne(e,"click",l),n=!0)},p(o,r){t=o},d(o){o&&j(e),n=!1,i()}}}function Jl(t,e){let n,i,l,o=e[22].label+"",r,s,a,u,d,c,f,h=e[22].canEdit&&Ul(e),p=e[22].canRemove&&Vl(e),g=[An(e[22]),{class:f=(e[22].isGroup?"group":"")+" "+(e[22].groupEnd?"end":"")+" "+(e[1][e[22].name]&&!e[22].isGroup?"in-group":"")}],m={};for(let v=0;v<g.length;v+=1)m=Ht(m,g[v]);return{key:t,first:null,c(){n=k("li"),i=k("div"),l=k("label"),r=ce(o),a=R(),u=k("div"),h&&h.c(),d=R(),p&&p.c(),c=R(),b(l,"title",s=e[22].label),b(l,"class","svelte-k36s4n"),b(i,"class","left svelte-k36s4n"),b(u,"class","right svelte-k36s4n"),ft(n,m),be(n,"svelte-k36s4n",!0),this.first=n},m(v,C){G(v,n,C),_(n,i),_(i,l),_(l,r),_(n,a),_(n,u),h&&h.m(u,null),_(u,d),p&&p.m(u,null),_(n,c)},p(v,C){e=v,C&1&&o!==(o=e[22].label+"")&&Re(r,o),C&1&&s!==(s=e[22].label)&&b(l,"title",s),e[22].canEdit?h?h.p(e,C):(h=Ul(e),h.c(),h.m(u,d)):h&&(h.d(1),h=null),e[22].canRemove?p?p.p(e,C):(p=Vl(e),p.c(),p.m(u,null)):p&&(p.d(1),p=null),ft(n,m=hn(g,[C&1&&An(e[22]),C&3&&f!==(f=(e[22].isGroup?"group":"")+" "+(e[22].groupEnd?"end":"")+" "+(e[1][e[22].name]&&!e[22].isGroup?"in-group":""))&&{class:f}])),be(n,"svelte-k36s4n",!0)},d(v){v&&j(n),h&&h.d(),p&&p.d()}}}function Kl(t,e){let n,i,l,o=e[22].label+"",r,s,a,u=[An(e[22])],d={};for(let c=0;c<u.length;c+=1)d=Ht(d,u[c]);return{key:t,first:null,c(){n=k("li"),i=k("div"),l=k("label"),r=ce(o),a=R(),b(l,"title",s=e[22].label),b(l,"class","svelte-k36s4n"),b(i,"class","left svelte-k36s4n"),ft(n,d),be(n,"svelte-k36s4n",!0),this.first=n},m(c,f){G(c,n,f),_(n,i),_(i,l),_(l,r),_(n,a)},p(c,f){e=c,f&8&&o!==(o=e[22].label+"")&&Re(r,o),f&8&&s!==(s=e[22].label)&&b(l,"title",s),ft(n,d=hn(u,[f&8&&An(e[22])])),be(n,"svelte-k36s4n",!0)},d(c){c&&j(n)}}}function ba(t){let e,n,i,l,o,r,s=[],a=new Map,u,d,c,f,h,p,g,m,v=[],C=new Map,S=pe(t[0].sort(Zl));const D=w=>w[22].name;for(let w=0;w<S.length;w+=1){let L=xl(t,S,w),E=D(L);a.set(E,s[w]=Jl(E,L))}let y=pe(t[3]);const P=w=>w[22].name;for(let w=0;w<y.length;w+=1){let L=Yl(t,y,w),E=P(L);C.set(E,v[w]=Kl(E,L))}return{c(){e=k("div"),n=k("div"),i=k("div"),l=k("header"),l.textContent=`${N.translate("Selected","labels","Admin")}`,o=R(),r=k("ul");for(let w=0;w<s.length;w+=1)s[w].c();u=R(),d=k("div"),c=R(),f=k("div"),h=k("div"),p=k("header"),p.textContent=`${N.translate("Available","labels","Admin")}`,g=R(),m=k("ul");for(let w=0;w<v.length;w+=1)v[w].c();b(l,"class","svelte-k36s4n"),b(r,"class","enabled connected svelte-k36s4n"),b(i,"class","well svelte-k36s4n"),b(n,"class","col-sm-5"),b(d,"class","col-sm-2"),b(p,"class","svelte-k36s4n"),b(m,"class","disabled connected svelte-k36s4n"),b(h,"class","well svelte-k36s4n"),b(f,"class","col-sm-5"),b(e,"id","layout"),b(e,"class","row")},m(w,L){G(w,e,L),_(e,n),_(n,i),_(i,l),_(i,o),_(i,r);for(let E=0;E<s.length;E+=1)s[E]&&s[E].m(r,null);_(e,u),_(e,d),_(e,c),_(e,f),_(f,h),_(h,p),_(h,g),_(h,m);for(let E=0;E<v.length;E+=1)v[E]&&v[E].m(m,null);t[16](e)},p(w,L){L&2115&&(S=pe(w[0].sort(Zl)),s=Pt(s,L,D,1,w,S,a,r,Lt,Jl,null,xl)),L&8&&(y=pe(w[3]),v=Pt(v,L,P,1,w,y,C,m,Lt,Kl,null,Yl))},d(w){w&&j(e);for(let L=0;L<s.length;L+=1)s[L].d();for(let L=0;L<v.length;L+=1)v[L].d();t[16](null)}}}function va(t){let e,n,i={params:t[2],validate:t[8],fetch:t[7],loadData:t[5],buttonList:t[4],$$slots:{default:[ba]},$$scope:{ctx:t}};return e=new ga({props:i}),t[17](e),{c(){Qe(e.$$.fragment)},m(l,o){xe(e,l,o),n=!0},p(l,[o]){const r={};o&4&&(r.params=l[2]),o&256&&(r.validate=l[8]),o&128&&(r.fetch=l[7]),o&32&&(r.loadData=l[5]),o&16&&(r.buttonList=l[4]),o&134218315&&(r.$$scope={dirty:o,ctx:l}),e.$set(r)},i(l){n||(ke(e.$$.fragment,l),n=!0)},o(l){Le(e.$$.fragment,l),n=!1},d(l){t[17](null),Ue(e,l)}}}function _a(t){return t.toLowerCase()}function Ql(t,e){return t[e]}function An(t){let e={};return["name","id"].forEach(n=>{Ql(t,n)!=null&&(e[`data-${_a(n)}`]=Ql(t,n))}),e}const Zl=(t,e)=>t.sortOrder-e.sortOrder;function ya(t,e,n){let i,l,o,{params:r}=e,{enabledItems:s=[]}=e,{disabledItems:a=[]}=e,{buttonList:u}=e,{loadData:d}=e,{refresh:c=()=>{}}=e,{editItem:f}=e,{getGroupId:h=()=>"id"}=e,{fieldsInGroup:p}=e,g;function m(E){let W=!1,Y={};E.forEach(F=>{if(F.isGroup){W=F.name!=="";return}W&&(Y[F.name]=!0)}),n(1,p=Y)}Et(()=>{v()}),Rn(()=>{l&&l.destroy(),o&&o.destroy()});function v(){const E={group:"fields",draggable:"li",animation:150};l=X.create(i.querySelector("ul.enabled"),{...E,onEnd(W){if(W.to.closest(".connected").classList.contains("enabled")){const[Y]=s.splice(W.oldIndex,1);s.splice(W.newIndex,0,Y);for(let F=W.newIndex;F<s.length;F++)n(0,s[F].sortOrder=(F>0?s[F-1].sortOrder:0)+F,s);m(s),c()}else{const Y=s[W.oldIndex];if(Y.canDisabled===!1){c();return}s.splice(W.oldIndex,1),a.splice(W.newIndex,0,Y),c()}}}),o=X.create(i.querySelector("ul.disabled"),{...E,onEnd(W){if(W.to.closest(".connected").classList.contains("disabled")){const[Y]=a.splice(W.oldIndex,1);a.splice(W.newIndex,0,Y)}else{const Y=a[W.oldIndex];a.splice(W.oldIndex,1),s.splice(W.newIndex,0,Y);for(let F=W.newIndex;F<s.length;F++)n(0,s[F].sortOrder=(F>0?s[F-1].sortOrder:0)+F,s);m(s),c()}}})}let{fetch:C=()=>{let E=[],W=!1,Y=!1;for(let A=0;A<s.length;A++){const q=s[A];if(q.isGroup){W=!q.groupEnd,E.push({id:q.id,name:q.name,color:q.color,iconClass:q.iconClass,items:[]});continue}W?E[E.length-1].items.push(q.name):E.push(q.name)}let F=!1,K=E.filter(A=>{if(typeof A=="object"){if(A.name!==""&&!A.items.length)return!1;if(A.name!==""&&A.items.length)return F=!0,!0;if(A.name===""&&F)return F=!1,!0;if(A.name===""&&!F)return!1}return!0});Y=K.length!==E.length,E=K;let Q=[];for(let A=0;A<E.length;A++){let q=E[A];Q.push(q),typeof q=="object"&&q.name!==""&&(A===E.length-1||!(typeof E[A+1]=="object"&&E[A+1].name===""))&&(Y=!0,Q.push({id:h(),name:"",items:[]}))}return{adjusted:Y,navigation:Q}}}=e;function S(E){s.splice(s.findIndex(W=>W.id===E.id),1),c()}let{validate:D=E=>E.length===0?(Be.notify("Menu cannot be empty","error"),!1):!0}=e;const y=E=>f(E),P=E=>S(E);function w(E){Ce[E?"unshift":"push"](()=>{i=E,n(9,i)})}function L(E){Ce[E?"unshift":"push"](()=>{g=E,n(10,g)})}return t.$$set=E=>{"params"in E&&n(2,r=E.params),"enabledItems"in E&&n(0,s=E.enabledItems),"disabledItems"in E&&n(3,a=E.disabledItems),"buttonList"in E&&n(4,u=E.buttonList),"loadData"in E&&n(5,d=E.loadData),"refresh"in E&&n(12,c=E.refresh),"editItem"in E&&n(6,f=E.editItem),"getGroupId"in E&&n(13,h=E.getGroupId),"fieldsInGroup"in E&&n(1,p=E.fieldsInGroup),"fetch"in E&&n(7,C=E.fetch),"validate"in E&&n(8,D=E.validate)},t.$$.update=()=>{t.$$.dirty&1&&m(s)},[s,p,r,a,u,d,f,C,D,i,g,S,c,h,y,P,w,L]}class $l extends Ie{constructor(e){super(),Pe(this,e,ya,va,ge,{params:2,enabledItems:0,disabledItems:3,buttonList:4,loadData:5,refresh:12,editItem:6,getGroupId:13,fieldsInGroup:1,fetch:7,validate:8})}}function eo(t){let e,n,i={params:t[0],enabledItems:t[2],disabledItems:t[4],buttonList:t[6],fieldsInGroup:t[5],refresh:t[7],editItem:t[8],getGroupId:nn};return e=new $l({props:i}),t[9](e),{c(){Qe(e.$$.fragment)},m(l,o){xe(e,l,o),n=!0},p(l,o){const r={};o&1&&(r.params=l[0]),o&4&&(r.enabledItems=l[2]),e.$set(r)},i(l){n||(ke(e.$$.fragment,l),n=!0)},o(l){Le(e.$$.fragment,l),n=!1},d(l){t[9](null),Ue(e,l)}}}function wa(t){let e,n=t[3],i,l=eo(t);return{c(){e=k("div"),l.c()},m(o,r){G(o,e,r),l.m(e,null),i=!0},p(o,[r]){r&8&&ge(n,n=o[3])?(Gi(),Le(l,1,1,Ee),Xi(),l=eo(o),l.c(),ke(l,1),l.m(e,null)):l.p(o,r)},i(o){i||(ke(l),i=!0)},o(o){Le(l),i=!1},d(o){o&&j(e),l.d(o)}}}let Ea="_delimiter_";function nn(){return Ea+ka()}function ka(){return Math.floor((1+Math.random())*4294967296).toString(16).substring(1)}function Da(t,e,n){let{params:i}=e,l,o=[],r=[],s=0,a={},u=[{name:"save",label:N.translate("Save","labels"),style:"primary"},{name:"cancel",label:N.translate("Cancel","labels")},{name:"addGroup",label:N.translate("addGroup","labels"),cssStyle:"margin-left: 30px",action:()=>{i.onEditItem({id:nn(),groupEnd:!1},p=>{let g=10;o.length&&(g=o[o.length-1].sortOrder+10);let m={isGroup:!0,canEdit:!0,canRemove:!0,isGroup:!0,canDisabled:!1,name:"",label:"",sortOrder:g,...p};o.push(m),m.name!==""&&o.push({id:nn(),isGroup:!0,canEdit:!0,canRemove:!0,isGroup:!0,canDisabled:!1,groupEnd:!0,name:"",label:"",sortOrder:m.sortOrder+1}),d()})}}];function d(){n(3,s++,s)}function c(p){i.onEditItem(p,g=>{let m=o.findIndex(v=>v.id===g.id);n(2,o[m]=g,o),d()})}f();function f(){let p=i.list??[],g=0;for(let m=0;m<p.length;m++){let v=p[m];if(typeof v=="string")ve.get(["scopes",v,"tab"])&&o.push({name:v,label:N.translate(v,"scopeNamesPlural"),sortOrder:g}),g++;else if(typeof v=="object"){o.push({id:v.id??nn(),canEdit:!0,canRemove:!0,isGroup:!0,canDisabled:!1,groupEnd:v.name==="",name:v.name,label:v.name,sortOrder:g}),g++;for(const C of v.items)ve.get(["scopes",C,"tab"])&&(o.push({name:C,label:N.translate(C,"scopeNamesPlural"),sortOrder:g}),g++);if(m<p.length-1&&p[m+1].name==="")continue;v.name!==""&&(m===p.length-1||typeof p[m+m]=="string"||v.items.length===0)&&(o.push({id:nn(),canEdit:!0,canRemove:!0,canDisabled:!1,isGroup:!0,groupEnd:!0,name:"",label:"",sortOrder:g}),g++)}}Object.entries(ve.get(["scopes"])).forEach(([m,v])=>{v.disabled||v.emHidden||!v.tab||o.find(C=>C.name===m)||r.push({name:m,label:N.translate(m,"scopeNamesPlural")})}),r.sort((m,v)=>m.label.localeCompare(v.label))}function h(p){Ce[p?"unshift":"push"](()=>{l=p,n(1,l)})}return t.$$set=p=>{"params"in p&&n(0,i=p.params)},[i,l,o,s,r,a,u,d,c,h]}class Sa extends Ie{constructor(e){super(),Pe(this,e,Da,wa,ge,{params:0})}}function to(t){let e,n,i={params:t[0],enabledItems:t[3],disabledItems:t[4],buttonList:t[6],fieldsInGroup:t[5],refresh:t[7],validate:La};return e=new $l({props:i}),t[8](e),{c(){Qe(e.$$.fragment)},m(l,o){xe(e,l,o),n=!0},p(l,o){const r={};o&1&&(r.params=l[0]),e.$set(r)},i(l){n||(ke(e.$$.fragment,l),n=!0)},o(l){Le(e.$$.fragment,l),n=!1},d(l){t[8](null),Ue(e,l)}}}function Ca(t){let e,n=t[2],i,l=to(t);return{c(){e=k("div"),l.c()},m(o,r){G(o,e,r),l.m(e,null),i=!0},p(o,[r]){r&4&&ge(n,n=o[2])?(Gi(),Le(l,1,1,Ee),Xi(),l=to(o),l.c(),ke(l,1),l.m(e,null)):l.p(o,r)},i(o){i||(ke(l),i=!0)},o(o){Le(l),i=!1},d(o){o&&j(e),l.d(o)}}}function La(t){return!0}function Pa(t,e,n){let{params:i}=e,l,o=[],r=[],s=0,a={},u=[{name:"save",label:N.translate("Save","labels"),style:"primary"},{name:"cancel",label:N.translate("Cancel","labels")}];function d(){n(2,s++,s)}c();function c(){let h=i.list??[],p=0;for(let g=0;g<h.length;g++){let m=h[g];typeof m=="string"&&(ve.get(["scopes",m,"tab"])&&o.push({name:m,label:N.translate(m,"scopeNamesPlural"),sortOrder:p}),p++)}Object.entries(ve.get(["scopes"])).forEach(([g,m])=>{m.disabled||m.emHidden||!m.tab||o.find(v=>v.name===g)||r.push({name:g,label:N.translate(g,"scopeNamesPlural")})}),r.sort((g,m)=>g.label.localeCompare(m.label))}function f(h){Ce[h?"unshift":"push"](()=>{l=h,n(1,l)})}return t.$$set=h=>{"params"in h&&n(0,i=h.params)},[i,l,s,o,r,a,u,d,f]}class Ia extends Ie{constructor(e){super(),Pe(this,e,Pa,Ca,ge,{params:0})}}function no(t,{delay:e=0,duration:n=400,easing:i=Di}={}){const l=+getComputedStyle(t).opacity;return{delay:e,duration:n,easing:i,css:o=>`opacity: ${o*l}`}}function io(t,e,n){const i=t.slice();return i[51]=e[n],i}function Ta(t){let e,n,i,l,o,r,s=pe(t[5]),a=[];for(let d=0;d<s.length;d+=1)a[d]=lo(io(t,s,d));let u=t[1]&&oo(t);return{c(){e=k("div"),n=k("div");for(let d=0;d<a.length;d+=1)a[d].c();i=R(),l=k("hr"),o=R(),u&&u.c(),r=Nn(),b(n,"class","btn-group"),b(e,"class","panel-group"),se(e,"margin-bottom","10px"),se(l,"margin","0 -10px")},m(d,c){G(d,e,c),_(e,n);for(let f=0;f<a.length;f+=1)a[f]&&a[f].m(n,null);G(d,i,c),G(d,l,c),G(d,o,c),u&&u.m(d,c),G(d,r,c)},p(d,c){if(c[0]&546){s=pe(d[5]);let f;for(f=0;f<s.length;f+=1){const h=io(d,s,f);a[f]?a[f].p(h,c):(a[f]=lo(h),a[f].c(),a[f].m(n,null))}for(;f<a.length;f+=1)a[f].d(1);a.length=s.length}d[1]?u?u.p(d,c):(u=oo(d),u.c(),u.m(r.parentNode,r)):u&&(u.d(1),u=null)},d(d){d&&(j(e),j(i),j(l),j(o),j(r)),jt(a,d),u&&u.d(d)}}}function lo(t){let e,n=t[51].label+"",i,l,o,r;function s(){return t[26](t[51])}return{c(){e=k("a"),i=ce(n),l=R(),b(e,"href","javascript:void"),b(e,"class","btn btn-default tree-item svelte-m35trr"),be(e,"active",t[51].name===t[1].name)},m(a,u){G(a,e,u),_(e,i),_(e,l),o||(r=ne(e,"click",s),o=!0)},p(a,u){t=a,u[0]&32&&n!==(n=t[51].label+"")&&Re(i,n),u[0]&34&&be(e,"active",t[51].name===t[1].name)},d(a){a&&j(e),o=!1,r()}}}function oo(t){let e,n,i=t[1].label+"",l,o,r,s,a,u,d,c,f,h,p,g;return{c(){e=k("div"),n=k("h5"),l=ce(i),o=R(),r=k("div"),s=k("input"),a=R(),u=k("button"),d=R(),c=k("button"),f=R(),h=k("div"),h.innerHTML="",se(n,"margin-top","20px"),se(n,"font-weight","bold"),se(n,"font-size","16px"),b(s,"type","text"),b(s,"class","form-control category-search search-in-tree-input"),b(s,"tabindex","1"),b(s,"placeholder","Type and press Enter..."),b(u,"class","fas fa-times reset-search-in-tree-button"),se(u,"display","none"),b(c,"class","fas fa-search search-in-tree-button"),b(r,"class","field"),b(r,"data-name","category-search"),b(e,"class","panel-group category-search"),b(h,"class","panel-group category-tree")},m(m,v){G(m,e,v),_(e,n),_(n,l),_(e,o),_(e,r),_(r,s),t[27](s),_(r,a),_(r,u),_(r,d),_(r,c),G(m,f,v),G(m,h,v),t[29](h),p||(g=[ne(s,"keydown",t[28]),ne(c,"click",t[10])],p=!0)},p(m,v){v[0]&2&&i!==(i=m[1].label+"")&&Re(l,i)},d(m){m&&(j(e),j(f),j(h)),t[27](null),t[29](null),p=!1,Ye(g)}}}function ro(t){let e,n,i;return{c(){e=k("div"),b(e,"class","category-panel-resizer svelte-m35trr")},m(l,o){G(l,e,o),n||(i=ne(e,"mousedown",t[8]),n=!0)},p:Ee,d(l){l&&j(e),n=!1,i()}}}function Aa(t){let e,n,i,l,o,r,s,a,u,d,c,f,h,p,g;function m(D,y){if(D[5].length>0)return Ta}let v=m(t),C=v&&v(t),S=!t[0]&&ro(t);return{c(){e=k("aside"),n=k("button"),i=k("span"),l=R(),o=k("span"),r=R(),s=k("div"),a=k("div"),u=k("div"),d=R(),C&&C.c(),c=R(),S&&S.c(),b(i,"class","toggle-icon-left fas fa-angle-left"),be(i,"hidden",t[0]),b(o,"class","toggle-icon-right fas fa-angle-right"),be(o,"hidden",!t[0]),b(n,"type","button"),b(n,"class","btn btn-default collapse-panel"),be(n,"collapsed",t[0]),se(u,"margin-right","20px"),b(u,"class","layout-editor-container"),se(a,"display","flex"),se(a,"flex-direction","row-reverse"),se(a,"align-items","center"),se(a,"height","35px"),b(s,"class","category-panel"),be(s,"hidden",t[0]),b(e,"class","catalog-tree-panel"),se(e,"width",t[6]),be(e,"collapsed",t[0])},m(D,y){G(D,e,y),_(e,n),_(n,i),_(n,l),_(n,o),_(e,r),_(e,s),_(s,a),_(a,u),t[25](u),_(s,d),C&&C.m(s,null),_(s,c),S&&S.m(s,null),h=!0,p||(g=ne(n,"click",t[7]),p=!0)},p(D,y){(!h||y[0]&1)&&be(i,"hidden",D[0]),(!h||y[0]&1)&&be(o,"hidden",!D[0]),(!h||y[0]&1)&&be(n,"collapsed",D[0]),v===(v=m(D))&&C?C.p(D,y):(C&&C.d(1),C=v&&v(D),C&&(C.c(),C.m(s,c))),D[0]?S&&(S.d(1),S=null):S?S.p(D,y):(S=ro(D),S.c(),S.m(s,null)),(!h||y[0]&1)&&be(s,"hidden",D[0]),(!h||y[0]&64)&&se(e,"width",D[6]),(!h||y[0]&1)&&be(e,"collapsed",D[0])},i(D){h||(D&&zt(()=>{h&&(f||(f=Yi(e,no,{},!0)),f.run(1))}),h=!0)},o(D){D&&(f||(f=Yi(e,no,{},!1)),f.run(0)),h=!1},d(D){D&&j(e),t[25](null),C&&C.d(),S&&S.d(),D&&f&&f.end(),p=!1,g()}}}function Oa(t,e,n){((n||t.tree("getTree")).children||[]).findIndex(o=>e.id===o.id)===-1&&t.tree("appendNode",e,n)}function Ma(t,e,n){((n||t.tree("getTree")).children||[]).findIndex(o=>e.id===o.id)===-1&&t.tree("prependNode",e,n)}function Na(t,e,n){let i,{scope:l}=e,{model:o}=e,{collection:r}=e,{callbacks:s}=e,{minWidth:a=220}=e,{maxWidth:u=600}=e,{currentWidth:d=a}=e,{isCollapsed:c=!1}=e,{maxSize:f=Ki.get("recordsPerPageSmall")||20}=e,{renderLayoutEditor:h}=e;const p=Hi();let g,m,v,C=!1,S,D,y=[],P,w="",L,E;function W(I){r&&I.name===et(P.name)&&qe.set("treeWhereData",l,I.where),c||A()}function Y(){n(0,c=!c),p("collapse-panel",{isCollapsed:c}),qe.set("catalog-tree-panel",l,c?"collapsed":""),c||p("rebuild-tree")}function F(I){if(!C)return;I.preventDefault();const Z=D+(I.pageX-S);Z>=a&&Z<=u&&n(11,d=Z)}function K(I){C=!0,S=I.pageX,D=d,document.addEventListener("mousemove",F),document.addEventListener("mouseup",Q,{once:!0}),document.body.style.userSelect="none"}function Q(){C&&(C=!1,qe.set("panelWidth",l,d.toString()),document.removeEventListener("mousemove",F),document.body.style.userSelect="")}function A(){q(),me()}function q(){let I=window.$(g);I&&I.tree("destroy")}function me(I=null){let Z=window.$(g),ie=qe.get("treeWhereData",L)||[];if(I===null&&w){ie.push({type:"textFilter",value:w}),Espo.ajax.getRequest(`${L}/action/TreeData`,{where:ie,scope:l}).then(le=>{me(le.tree)});return}let re={dataUrl:st(),dataFilter:(function(le){return ut(le)}).bind(this),selectable:!0,saveState:!1,autoOpen:!1,dragAndDrop:ve.get(["scopes",L,"multiParents"])!==!0&&ve.get(["scopes",L,"dragAndDrop"]),useContextMenu:!1,closedIcon:window.$('<i class="fa fa-angle-right"></i>'),openedIcon:window.$('<i class="fa fa-angle-down"></i>'),onCreateLi:(function(le,ae,we){le.disabled?ae.addClass("disabled"):ae.removeClass("disabled");const Me=ae.find(".jqtree-title");if(w){let Rt=w.replace(/\*/g,"");if(Rt.length>0){let ao=Me.html(),so=ao.match(new RegExp(Rt,"ig"));if(so){let uo=[];so.forEach(On=>{uo.includes(On)||(uo.push(On),Me.html(ao.replace(new RegExp(On,"g"),`<b>${On}</b>`)))})}}}I&&[l,"Bookmark"].includes(L)&&o&&o.get("id")===le.id&&(Z.tree("addToSelection",le),ae.addClass("jqtree-selected")),Me.attr("data-id",le.id),re.dragAndDrop&&!le.showMoreDirection&&Me.attr("title",N.translate("useDragAndDrop")),le.showMoreDirection&&(ae.addClass("show-more"),ae.addClass("show-more-"+le.showMoreDirection),ae.find(".jqtree-title").addClass("more-label"))}).bind(this)};I&&(re.data=I,re.autoOpen=!0,re.dragAndDrop=!1,delete re.dataUrl,delete re.dataFilter),Z.tree(re),Z.on("tree.load_data",le=>{Be.notify(!1)}),Z.on("tree.refresh",le=>{}),Z.on("tree.move",le=>{le.preventDefault();const ae="parent";let we=le.move_info,Me={_position:we.position,_target:we.target_node.id};Me[ae+"Id"]=null,Me[ae+"Name"]=null,we.position==="inside"?(Me[ae+"Id"]=we.target_node.id,Me[ae+"Name"]=we.target_node.name):we.target_node.parent.id&&(Me[ae+"Id"]=we.target_node.parent.id,Me[ae+"Name"]=we.target_node.parent.name),Espo.ajax.patchRequest(`${L}/${we.moved_node.id}`,Me).success(Rt=>{we.do_move()})}),Z.on("tree.click",le=>{if(le.preventDefault(),le.node.disabled)return!1;const ae=window.$(le.click_event.target);if(ae.hasClass("jqtree-title")||ae.parent().hasClass("jqtree-title")){let we=le.node;if(we.showMoreDirection)return Je(we);let Me=[];for(;we.parent.id;)Me.push(we.parent.id),we=we.parent;let Rt={id:le.node.id,route:""};Me.length>0&&(Rt.route="|"+Me.reverse().join("|")+"|"),s!=null&&s.selectNode&&s.selectNode(Rt)}})}function Je(I){Be.notify("Loading..."),Espo.ajax.getRequest(st(I)).then(Z=>{if(Z.list){const ie=window.$(g);I.showMoreDirection==="up"?ut(JSON.parse(JSON.stringify(Z)),"up").reverse().forEach(re=>{Ma(ie,re,I.getParent())}):I.showMoreDirection==="down"&&ut(JSON.parse(JSON.stringify(Z)),"down").forEach(re=>{Oa(ie,re,I.getParent())}),ie.tree("removeNode",I)}})}function st(I){let Z=L+`/action/Tree?isTreePanel=1&scope=${l}`;if(I&&I.showMoreDirection){let re=I.offset,le=f;if(I.showMoreDirection==="up"){let ae=I.offset-le;re=I.offset-le,ae<0?(re=0,le=le+ae):re=ae}else I.showMoreDirection==="down"&&(re=re+1);Z+="&offset="+re+"&maxSize="+le,I.getParent()&&(Z+="&node="+I.getParent().id)}else I&&I.id?Z+="&node="+I.id+"&offset=0&maxSize="+f:o&&o.id&&[o.urlRoot,"Bookmark"].includes(L)&&(Z+="&selectedId="+o.id);let ie=qe.get("treeWhereData",L)||[];return ie.length>0&&(Z+="&",Z+=window.$.param({where:ie})),Z}function ut(I,Z=null){return I.list?(Ke(I.list,Z),I.list):I}function Ke(I,Z){if(!Z||Z==="up"){let ie=JSON.parse(JSON.stringify(I)).shift();ie&&ie.offset&&ie.offset!==0&&I.unshift({id:"show-more-"+ie.offset,offset:ie.offset,showMoreDirection:"up",name:N.translate("Show more")})}if(!Z||Z==="down"){let ie=JSON.parse(JSON.stringify(I)).pop();ie&&ie.offset&&ie.total-1!==ie.offset&&I.push({id:"show-more-"+ie.offset,offset:ie.offset,showMoreDirection:"down",name:N.translate("Show more")})}I.forEach(ie=>{ie.children&&Ke(ie.children)})}function et(I){return ve.get(["entityDefs",l,"links",I,"entity"])||ve.get(["entityDefs",l,"fields",I,"entity"])}function M(I){P&&P.name===I.name||(n(1,P=I),w="",Be.notify("Loading..."),St().then(()=>{A()}))}function O(){w=v.value,w?qe.set("treeSearchValue",L,w):qe.clear("treeSearchValue",L),Be.notify("Loading..."),A()}function z(){L==="Bookmark"&&A()}function U(){return E}function J(I){tt.get(l,"leftSidebar",null,null,Z=>{E=Z,n(5,y=Z.layout.map(re=>{const le=ve.get(["entityDefs",l,"fields",re.name,"type"]);let ae="";if(le=="link"){const we=et(re.name);ae=N.get("Global","scopeNamePlural",we)}return ae||(ae=N.get(l,"links",re.name)||N.get(l,"fields",re.name)),{name:re.name,label:ae}}));const ie=qe.get("treeItem",l);!ie||!y.find(re=>re.name===ie)?(qe.set("treeItem",l,y[0]),n(1,P=y[0])):n(1,P=y.find(ti.name===ie)),w=qe.get("treeSearchValue",L)||null,w&&n(4,v.value=w,v),I()})}function oe(){J(()=>{St().then(()=>{me()})})}Et(()=>{const I=qe.get("panelWidth",l);return I&&n(11,d=parseInt(I)||a),(window.innerWidth<=767||qe.get("catalog-tree-panel",l))&&n(0,c=!0),J(()=>{St().then(()=>{me()}),h&&h(m)}),()=>{C&&Q()}});function te(I){Ce[I?"unshift":"push"](()=>{m=I,n(3,m)})}const Oe=I=>M(I);function ue(I){Ce[I?"unshift":"push"](()=>{v=I,n(4,v)})}const Xe=I=>I.key==="Enter"&&O();function We(I){Ce[I?"unshift":"push"](()=>{g=I,n(2,g)})}return t.$$set=I=>{"scope"in I&&n(12,l=I.scope),"model"in I&&n(13,o=I.model),"collection"in I&&n(14,r=I.collection),"callbacks"in I&&n(15,s=I.callbacks),"minWidth"in I&&n(16,a=I.minWidth),"maxWidth"in I&&n(17,u=I.maxWidth),"currentWidth"in I&&n(11,d=I.currentWidth),"isCollapsed"in I&&n(0,c=I.isCollapsed),"maxSize"in I&&n(18,f=I.maxSize),"renderLayoutEditor"in I&&n(19,h=I.renderLayoutEditor)},t.$$.update=()=>{t.$$.dirty[0]&34816&&d&&s!=null&&s.treeWidthChanged&&s.treeWidthChanged(d),t.$$.dirty[0]&2049&&n(6,i=c?"auto":`${d}px`),t.$$.dirty[0]&2&&(L=P?et(P.name):null)},[c,P,g,m,v,y,i,Y,K,M,O,d,l,o,r,s,a,u,f,h,W,A,z,U,oe,te,Oe,ue,Xe,We]}class Fa extends Ie{constructor(e){super(),Pe(this,e,Na,Aa,ge,{scope:12,model:13,collection:14,callbacks:15,minWidth:16,maxWidth:17,currentWidth:11,isCollapsed:0,maxSize:18,renderLayoutEditor:19,handleCollectionSearch:20,rebuildTree:21,reloadBookmarks:22,getLayoutData:23,refreshLayout:24},null,[-1,-1])}get handleCollectionSearch(){return this.$$.ctx[20]}get rebuildTree(){return this.$$.ctx[21]}get reloadBookmarks(){return this.$$.ctx[22]}get getLayoutData(){return this.$$.ctx[23]}get refreshLayout(){return this.$$.ctx[24]}}window.SvelteLanguage=N,window.SvelteUserData=qn,window.SvelteNotifier=Be,window.SvelteLayoutManager=tt,window.SvelteMetadata=ve,window.SvelteModelFactory=Xt,window.SvelteConfig=Ki,window.SvelteStorage=qe,window.driver=Ao,De.ApiRequestComponent=pa,De.Favorites=Ia,De.JobManagerIcon=ir,De.LayoutComponent=da,De.Navigation=Sa,De.TreePanel=Fa,De.UpdatePanel=dr,Object.defineProperty(De,Symbol.toStringTag,{value:"Module"})});
