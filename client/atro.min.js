(function(te,Y){typeof exports=="object"&&typeof module<"u"?Y(exports):typeof define=="function"&&define.amd?define(["exports"],Y):(te=typeof globalThis<"u"?globalThis:te||self,Y(te.Svelte={}))})(this,function(te){"use strict";var No=Object.defineProperty;var Mo=(te,Y,Ee)=>Y in te?No(te,Y,{enumerable:!0,configurable:!0,writable:!0,value:Ee}):te[Y]=Ee;var ln=(te,Y,Ee)=>Mo(te,typeof Y!="symbol"?Y+"":Y,Ee);function Y(){}function Ee(t,e){for(const n in e)t[n]=e[n];return t}function an(t){return t()}function rn(){return Object.create(null)}function st(t){t.forEach(an)}function sn(t){return typeof t=="function"}function se(t,e){return t!=t?e==e:t!==e||t&&typeof t=="object"||typeof t=="function"}let ut;function un(t,e){return t===e?!0:(ut||(ut=document.createElement("a")),ut.href=e,t===ut.href)}function li(t){return Object.keys(t).length===0}function ai(t,e,n,i){if(t){const o=fn(t,e,n,i);return t[0](o)}}function fn(t,e,n,i){return t[1]&&i?Ee(n.ctx.slice(),t[1](i(e))):n.ctx}function ri(t,e,n,i){if(t[2]&&i){const o=t[2](i(n));if(e.dirty===void 0)return o;if(typeof o=="object"){const l=[],a=Math.max(e.dirty.length,o.length);for(let s=0;s<a;s+=1)l[s]=e.dirty[s]|o[s];return l}return e.dirty|o}return e.dirty}function si(t,e,n,i,o,l){if(o){const a=fn(e,n,i,l);t.p(a,o)}}function ui(t){if(t.ctx.length>32){const e=[],n=t.ctx.length/32;for(let i=0;i<n;i++)e[i]=-1;return e}return-1}function w(t,e){t.appendChild(e)}function W(t,e,n){t.insertBefore(e,n||null)}function j(t){t.parentNode&&t.parentNode.removeChild(t)}function At(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}function k(t){return document.createElement(t)}function ce(t){return document.createTextNode(t)}function U(){return ce(" ")}function fi(){return ce("")}function be(t,e,n,i){return t.addEventListener(e,n,i),()=>t.removeEventListener(e,n,i)}function b(t,e,n){n==null?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}const ci=["width","height"];function ft(t,e){const n=Object.getOwnPropertyDescriptors(t.__proto__);for(const i in e)e[i]==null?t.removeAttribute(i):i==="style"?t.style.cssText=e[i]:i==="__value"?t.value=t[i]=e[i]:n[i]&&n[i].set&&ci.indexOf(i)===-1?t[i]=e[i]:b(t,i,e[i])}function di(t){return Array.from(t.childNodes)}function Re(t,e){e=""+e,t.data!==e&&(t.data=e)}function Ce(t,e,n,i){n==null?t.style.removeProperty(e):t.style.setProperty(e,n,"")}function ct(t,e,n){t.classList.toggle(e,!!n)}function hi(t,e,{bubbles:n=!1,cancelable:i=!1}={}){return new CustomEvent(t,{detail:e,bubbles:n,cancelable:i})}let Ke;function Ze(t){Ke=t}function dt(){if(!Ke)throw new Error("Function called outside component initialization");return Ke}function Ft(t){dt().$$.on_mount.push(t)}function cn(t){dt().$$.after_update.push(t)}function dn(t){dt().$$.on_destroy.push(t)}function gi(){const t=dt();return(e,n,{cancelable:i=!1}={})=>{const o=t.$$.callbacks[e];if(o){const l=hi(e,n,{cancelable:i});return o.slice().forEach(a=>{a.call(t,l)}),!l.defaultPrevented}return!0}}const ze=[],de=[];let Xe=[];const hn=[],pi=Promise.resolve();let Nt=!1;function mi(){Nt||(Nt=!0,pi.then(gn))}function Mt(t){Xe.push(t)}const Rt=new Set;let Ye=0;function gn(){if(Ye!==0)return;const t=Ke;do{try{for(;Ye<ze.length;){const e=ze[Ye];Ye++,Ze(e),bi(e.$$)}}catch(e){throw ze.length=0,Ye=0,e}for(Ze(null),ze.length=0,Ye=0;de.length;)de.pop()();for(let e=0;e<Xe.length;e+=1){const n=Xe[e];Rt.has(n)||(Rt.add(n),n())}Xe.length=0}while(ze.length);for(;hn.length;)hn.pop()();Nt=!1,Rt.clear(),Ze(t)}function bi(t){if(t.fragment!==null){t.update(),st(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(Mt)}}function yi(t){const e=[],n=[];Xe.forEach(i=>t.indexOf(i)===-1?e.push(i):n.push(i)),n.forEach(i=>i()),Xe=e}const ht=new Set;let vi;function ye(t,e){t&&t.i&&(ht.delete(t),t.i(e))}function De(t,e,n,i){if(t&&t.o){if(ht.has(t))return;ht.add(t),vi.c.push(()=>{ht.delete(t)}),t.o(e)}}function Be(t){return(t==null?void 0:t.length)!==void 0?t:Array.from(t)}function pn(t,e){const n={},i={},o={$$scope:1};let l=t.length;for(;l--;){const a=t[l],s=e[l];if(s){for(const r in a)r in s||(i[r]=1);for(const r in s)o[r]||(n[r]=s[r],o[r]=1);t[l]=s}else for(const r in a)o[r]=1}for(const a in i)a in n||(n[a]=void 0);return n}function Le(t){t&&t.c()}function Se(t,e,n){const{fragment:i,after_update:o}=t.$$;i&&i.m(e,n),Mt(()=>{const l=t.$$.on_mount.map(an).filter(sn);t.$$.on_destroy?t.$$.on_destroy.push(...l):st(l),t.$$.on_mount=[]}),o.forEach(Mt)}function Pe(t,e){const n=t.$$;n.fragment!==null&&(yi(n.after_update),st(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function _i(t,e){t.$$.dirty[0]===-1&&(ze.push(t),mi(),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function he(t,e,n,i,o,l,a=null,s=[-1]){const r=Ke;Ze(t);const u=t.$$={fragment:null,ctx:[],props:l,update:Y,not_equal:o,bound:rn(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(r?r.$$.context:[])),callbacks:rn(),dirty:s,skip_bound:!1,root:e.target||r.$$.root};a&&a(u.root);let c=!1;if(u.ctx=n?n(t,e.props||{},(f,h,...y)=>{const g=y.length?y[0]:h;return u.ctx&&o(u.ctx[f],u.ctx[f]=g)&&(!u.skip_bound&&u.bound[f]&&u.bound[f](g),c&&_i(t,f)),h}):[],u.update(),c=!0,st(u.before_update),u.fragment=i?i(u.ctx):!1,e.target){if(e.hydrate){const f=di(e.target);u.fragment&&u.fragment.l(f),f.forEach(j)}else u.fragment&&u.fragment.c();e.intro&&ye(t.$$.fragment),Se(t,e.target,e.anchor),gn()}Ze(r)}class ge{constructor(){ln(this,"$$");ln(this,"$$set")}$destroy(){Pe(this,1),this.$destroy=Y}$on(e,n){if(!sn(n))return Y;const i=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return i.push(n),()=>{const o=i.indexOf(n);o!==-1&&i.splice(o,1)}}$set(e){this.$$set&&!li(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}const wi="4",He=[];function qe(t,e=Y){let n;const i=new Set;function o(s){if(se(t,s)&&(t=s,n)){const r=!He.length;for(const u of i)u[1](),He.push(u,t);if(r){for(let u=0;u<He.length;u+=2)He[u][0](He[u+1]);He.length=0}}}function l(s){o(s(t))}function a(s,r=Y){const u=[s,r];return i.add(u),i.size===1&&(n=e(o,l)||Y),s(t),()=>{i.delete(u),i.size===0&&n&&(n(),n=null)}}return{set:o,update:l,subscribe:a}}const zt=qe({}),R={setTranslations(t){zt.set(t)},has(t,e,n){let i=!1;return zt.subscribe(o=>{if(n in o&&e in o[n]&&t in o[n][e]){i=!0;return}})(),i},get(t,e,n){let i=n;return zt.subscribe(o=>{if(t in o&&e in o[t]&&n in o[t][e]){i=o[t][e][n];return}if(t in o&&e in o[t]&&n in o[t][e]){i=o[t][e][n];return}if(t=="Global"){i=n;return}i=null})(),i},translate(t,e=null,n=null){n=n||"Global",e=e||"labels";let i=R.get(n,e,t);return i===null&&n!="Global"&&(i=R.get("Global",e,t)),i},translateOption(t,e,n=null){let i=R.translate(e,"options",n);return i===null?"":typeof i=="object"?i[t]:t}},mn=qe({}),bn={set(t){mn.set(t)},get(){let t=null;return mn.subscribe(e=>{e&&(t=e)})(),t}},Xt=qe(),ae={setNotifier(t){Xt.set(t)},notify(t,e=null,n=2e3){Xt.subscribe(i=>{i&&i.notify(t,e,2e3)})()},confirm(t,e=null,n=null,i){Xt.subscribe(o=>{o&&o.confirm(t,e,n)})()}},gt=qe(),Oe={setLayoutManager(t){gt.set(t)},resetToDefault(t,e,n,i){let o=null;return gt.subscribe(l=>{l&&(o=l.resetToDefault(t,e,n,i))})(),o},get:function(t,e,n,i,o){let l=null;return gt.subscribe(a=>{a&&(l=a.get(t,e,n,i,o))})(),l},set:function(t,e,n,i,o){let l=null;return gt.subscribe(a=>{a&&(l=a.set(t,e,n,i,o))})(),l}},yn=qe(),Ae={setMetadata(t){yn.set(t)},get(t){yn.subscribe(e=>{e&&e.get(t)})()}},vn=qe(),Yt={setModelFactory(t){vn.set(t)},create(t,e){vn.subscribe(n=>{n&&n.create(t,e)})()}};typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(wi);function _n(t){let e,n,i,o,l,a,s,r,u,c,f,h,y,g,v;function P(p,E){return p[2]?Di:Ei}let d=P(t),T=d(t);return{c(){e=k("div"),n=k("div"),i=k("div"),o=k("span"),o.textContent=`${R.translate("queueManager","labels","QueueItem")}`,l=U(),a=k("span"),s=k("a"),s.innerHTML='<span aria-hidden="true">Ã—</span>',r=U(),T.c(),u=U(),c=k("a"),c.textContent=`${R.translate("View List")}`,f=U(),h=k("div"),y=k("div"),y.textContent=`${R.translate("Loading...")}`,b(o,"class","panel-heading-title"),b(s,"href","/"),b(s,"class","close svelte-1p6ppx8"),b(c,"href","#QueueItem"),b(c,"title",R.translate("View List")),b(c,"class","qp-view-list svelte-1p6ppx8"),b(a,"class","pull-right"),b(i,"class","panel-heading clearfix"),b(y,"class","list-container"),b(h,"class","panel-body"),b(n,"class","panel panel-default"),b(e,"class","queue-panel-container")},m(p,E){W(p,e,E),w(e,n),w(n,i),w(i,o),w(i,l),w(i,a),w(a,s),w(a,r),T.m(a,null),w(a,u),w(a,c),w(n,f),w(n,h),w(h,y),t[9](e),g||(v=be(s,"click",t[6]),g=!0)},p(p,E){d===(d=P(p))&&T?T.p(p,E):(T.d(1),T=d(p),T&&(T.c(),T.m(a,u)))},d(p){p&&j(e),T.d(),t[9](null),g=!1,v()}}}function Ei(t){let e,n,i;return{c(){e=k("a"),e.textContent=`${R.translate("Pause")}`,b(e,"href","/"),b(e,"title",R.translate("Pause")),b(e,"class","qm-button")},m(o,l){W(o,e,l),n||(i=be(e,"click",t[8]),n=!0)},p:Y,d(o){o&&j(e),n=!1,i()}}}function Di(t){let e,n,i;return{c(){e=k("a"),e.textContent=`${R.translate("Start")}`,b(e,"href","/"),b(e,"title",R.translate("Start")),b(e,"class","qm-button")},m(o,l){W(o,e,l),n||(i=be(e,"click",t[7]),n=!0)},p:Y,d(o){o&&j(e),n=!1,i()}}}function Si(t){let e,n=t[0]&&_n(t);return{c(){n&&n.c(),e=fi()},m(i,o){n&&n.m(i,o),W(i,e,o)},p(i,[o]){i[0]?n?n.p(i,o):(n=_n(i),n.c(),n.m(e.parentNode,e)):n&&(n.d(1),n=null)},i:Y,o:Y,d(i){i&&j(e),n&&n.d(i)}}}function Pi(t,e,n){let{isOpen:i=!1}=e,{close:o}=e,{icon:l}=e,a=!1;window.addEventListener("publicDataFetched",g=>{n(2,a=!!g.detail.qmPaused)});let s;function r(g){s&&!s.contains(g.target)&&l&&!l.contains(g.target)&&i===!0&&o()}Ft(()=>{document.addEventListener("click",r)}),dn(()=>{document.removeEventListener("click",r)});async function u(g){let v=bn.get();if(v)try{const P=await fetch("/api/v1/App/action/QueueManagerUpdate",{method:"POST",headers:{"Content-Type":"application/json","Authorization-Token":btoa(v.user.userName+":"+v.token)},body:JSON.stringify({pause:g})});if(!P.ok)throw new Error("Network response was not ok");await P.json(),ae.notify("Done","success")}catch(P){console.error("Error:",P)}}const c=g=>{g.preventDefault(),o()},f=g=>{g.preventDefault(),u(!1)},h=g=>{g.preventDefault(),u(!0)};function y(g){de[g?"unshift":"push"](()=>{s=g,n(3,s)})}return t.$$set=g=>{"isOpen"in g&&n(0,i=g.isOpen),"close"in g&&n(1,o=g.close),"icon"in g&&n(5,l=g.icon)},[i,o,a,s,u,l,c,f,h,y]}class Ti extends ge{constructor(e){super(),he(this,e,Pi,Si,se,{isOpen:0,close:1,icon:5})}}function wn(t){let e;return{c(){e=k("span"),b(e,"class","fas fa-pause-circle pause-icon")},m(n,i){W(n,e,i)},d(n){n&&j(e)}}}function ki(t){let e,n,i,o,l,a,s,r,u=t[2]&&wn();return l=new Ti({props:{icon:t[0],isOpen:t[1],close:t[4]}}),{c(){e=k("a"),n=k("span"),i=U(),u&&u.c(),o=U(),Le(l.$$.fragment),b(n,"class","fas fa-tasks"),b(e,"href","/"),b(e,"class","notifications-button")},m(c,f){W(c,e,f),w(e,n),w(e,i),u&&u.m(e,null),t[6](e),W(c,o,f),Se(l,c,f),a=!0,s||(r=be(e,"click",t[7]),s=!0)},p(c,[f]){c[2]?u||(u=wn(),u.c(),u.m(e,null)):u&&(u.d(1),u=null);const h={};f&1&&(h.icon=c[0]),f&2&&(h.isOpen=c[1]),l.$set(h)},i(c){a||(ye(l.$$.fragment,c),a=!0)},o(c){De(l.$$.fragment,c),a=!1},d(c){c&&(j(e),j(o)),u&&u.d(),t[6](null),Pe(l,c),s=!1,r()}}}function Ii(t,e,n){let{renderTable:i=()=>{}}=e,o,l=!1,a=!1;window.addEventListener("publicDataFetched",f=>{n(2,a=!!f.detail.qmPaused)});function s(){l||(n(1,l=!0),i())}function r(){n(1,l=!1),window.dispatchEvent(new Event("qmPanelClosed"))}function u(f){de[f?"unshift":"push"](()=>{o=f,n(0,o)})}const c=f=>{f.preventDefault(),s()};return t.$$set=f=>{"renderTable"in f&&n(5,i=f.renderTable)},[o,l,a,s,r,i,u,c]}class Ci extends ge{constructor(e){super(),he(this,e,Ii,ki,se,{renderTable:5})}}function Li(t){let e,n=`${t[0]}px`,i=`${t[0]}px`,o=`${t[1]}px`;return{c(){e=k("div"),b(e,"class","loading-icon spinner svelte-yw8t7l"),Ce(e,"width",n),Ce(e,"height",i),Ce(e,"border-width",o)},m(l,a){W(l,e,a)},p(l,[a]){a&1&&n!==(n=`${l[0]}px`)&&Ce(e,"width",n),a&1&&i!==(i=`${l[0]}px`)&&Ce(e,"height",i),a&2&&o!==(o=`${l[1]}px`)&&Ce(e,"border-width",o)},i:Y,o:Y,d(l){l&&j(e)}}}function Oi(t,e,n){let{size:i=40}=e,{thickness:o=4}=e;return t.$$set=l=>{"size"in l&&n(0,i=l.size),"thickness"in l&&n(1,o=l.thickness)},[i,o]}class Ai extends ge{constructor(e){super(),he(this,e,Oi,Li,se,{size:0,thickness:1})}}function En(t){let e,n;return{c(){e=k("img"),un(e.src,n=t[1])||b(e,"src",n),b(e,"class","logo"),b(e,"alt",t[0])},m(i,o){W(i,e,o)},p(i,o){o&2&&!un(e.src,n=i[1])&&b(e,"src",n),o&1&&b(e,"alt",i[0])},d(i){i&&j(e)}}}function Dn(t){let e,n,i;return{c(){e=k("a"),n=k("i"),i=ce("Recovery Instructions"),b(n,"class","fa fa-history svelte-1qmezxs"),b(e,"href",t[2]),b(e,"target","_blank"),b(e,"class","btn btn-default svelte-1qmezxs"),b(e,"role","button"),Ce(e,"float","right")},m(o,l){W(o,e,l),w(e,n),w(e,i)},p(o,l){l&4&&b(e,"href",o[2])},d(o){o&&j(e)}}}function Sn(t){let e,n,i,o,l,a;return{c(){e=k("hr"),n=U(),i=k("pre"),o=ce(t[3]),b(i,"class","logs-container svelte-1qmezxs")},m(s,r){W(s,e,r),W(s,n,r),W(s,i,r),w(i,o),t[11](i),l||(a=be(i,"scroll",t[8]),l=!0)},p(s,r){r&8&&Re(o,s[3])},d(s){s&&(j(e),j(n),j(i)),t[11](null),l=!1,a()}}}function Fi(t){let e,n,i,o,l,a,s,r,u,c,f,h,y,g,v,P,d,T,p=t[4]?"Hide":"Show",E,A,_,D,z,S,O,M,B=t[1]&&En(t);c=new Ai({props:{size:"40",thickness:"5"}});let q=t[2]&&Dn(t),V=t[4]&&t[3]&&Sn(t);return{c(){e=k("div"),n=k("div"),i=k("div"),B&&B.c(),o=U(),l=k("div"),a=k("div"),s=k("h3"),s.textContent="System is updating...",r=U(),u=k("section"),Le(c.$$.fragment),f=U(),h=k("h5"),y=ce(t[5]),g=U(),v=k("section"),P=k("div"),d=k("button"),T=k("i"),E=ce(p),A=ce(" logs"),D=U(),q&&q.c(),z=U(),V&&V.c(),b(i,"class","logo-container"),b(n,"class","panel-heading"),b(h,"class","svelte-1qmezxs"),b(u,"class","progress-section svelte-1qmezxs"),b(T,"class","fa fa-list svelte-1qmezxs"),b(d,"class","btn btn-default svelte-1qmezxs"),d.disabled=_=!t[3],b(P,"class","buttons"),b(v,"class","logs-section"),b(a,"class","form-group"),b(l,"class","panel-body"),b(e,"id","login"),b(e,"class","panel panel-default panel-updating")},m(X,x){W(X,e,x),w(e,n),w(n,i),B&&B.m(i,null),w(e,o),w(e,l),w(l,a),w(a,s),w(a,r),w(a,u),Se(c,u,null),w(u,f),w(u,h),w(h,y),w(a,g),w(a,v),w(v,P),w(P,d),w(d,T),w(d,E),w(d,A),w(P,D),q&&q.m(P,null),w(v,z),V&&V.m(v,null),S=!0,O||(M=be(d,"click",t[7]),O=!0)},p(X,[x]){X[1]?B?B.p(X,x):(B=En(X),B.c(),B.m(i,null)):B&&(B.d(1),B=null),(!S||x&32)&&Re(y,X[5]),(!S||x&16)&&p!==(p=X[4]?"Hide":"Show")&&Re(E,p),(!S||x&8&&_!==(_=!X[3]))&&(d.disabled=_),X[2]?q?q.p(X,x):(q=Dn(X),q.c(),q.m(P,null)):q&&(q.d(1),q=null),X[4]&&X[3]?V?V.p(X,x):(V=Sn(X),V.c(),V.m(v,null)):V&&(V.d(1),V=null)},i(X){S||(ye(c.$$.fragment,X),S=!0)},o(X){De(c.$$.fragment,X),S=!1},d(X){X&&j(e),B&&B.d(),Pe(c),q&&q.d(),V&&V.d(),O=!1,M()}}}function Ni(t){return t.replace(/^\d{2,4}.\d{2}.\d{2,4} \d{2}:\d{2}:\d{2}/g,"").replace(/^[\-\|\s]+/,"")}function Mi(t,e,n){let{applicationName:i="AtroCore"}=e,{logoPath:o=null}=e,{logFilePath:l}=e,{restoreLink:a=null}=e,s=!1,r=!1,u=0,c=!0,f="",h,y;cn(()=>{y&&c&&y.scrollTo(0,y.scrollHeight)});function g(){n(4,s=!s),s||(c=!0)}function v(d){const T=d.currentTarget;c=T.scrollHeight-T.scrollTop===T.clientHeight}setInterval(async()=>{try{const d=await fetch(l,{cache:"no-store"});u+=1,d.ok?(n(3,f=(await d.text()).trim()),f.search("composer")>=0&&n(10,r=!0),u>65&&!r&&n(3,f="Something wrong. Please, reboot the server.")):r?setTimeout(()=>{location.reload()},2e3):u>65&&n(3,f="Something wrong. Please, reboot the server.")}catch(d){console.error("Error: ",d)}},1e3);function P(d){de[d?"unshift":"push"](()=>{y=d,n(6,y)})}return t.$$set=d=>{"applicationName"in d&&n(0,i=d.applicationName),"logoPath"in d&&n(1,o=d.logoPath),"logFilePath"in d&&n(9,l=d.logFilePath),"restoreLink"in d&&n(2,a=d.restoreLink)},t.$$.update=()=>{if(t.$$.dirty&1032)if(f){const d=f.trim().split(`
`);n(5,h=Ni(d.pop()))}else r?n(5,h=""):n(5,h="Starting...")},[i,o,a,f,s,h,y,g,v,l,r,P]}class Ri extends ge{constructor(e){super(),he(this,e,Mi,Fi,se,{applicationName:0,logoPath:1,logFilePath:9,restoreLink:2})}}function Pn(t,e,n){const i=t.slice();return i[20]=e[n],i}function Tn(t){let e,n=t[20].label+"",i,o,l,a,s,r,u;function c(){return t[14](t[20])}return{c(){e=k("button"),i=ce(n),o=U(),b(e,"data-action",l=t[20].name),e.disabled=a=t[20].disabled,b(e,"type","button"),b(e,"class",s=`btn action btn-${t[20].style??"default"}`)},m(f,h){W(f,e,h),w(e,i),w(e,o),r||(u=be(e,"click",c),r=!0)},p(f,h){t=f,h&1&&n!==(n=t[20].label+"")&&Re(i,n),h&1&&l!==(l=t[20].name)&&b(e,"data-action",l),h&1&&a!==(a=t[20].disabled)&&(e.disabled=a),h&1&&s!==(s=`btn action btn-${t[20].style??"default"}`)&&b(e,"class",s)},d(f){f&&j(e),r=!1,u()}}}function zi(t){let e,n,i,o=Be(t[0]),l=[];for(let r=0;r<o.length;r+=1)l[r]=Tn(Pn(t,o,r));const a=t[13].default,s=ai(a,t,t[12],null);return{c(){e=k("div");for(let r=0;r<l.length;r+=1)l[r].c();n=U(),s&&s.c(),b(e,"class","button-container")},m(r,u){W(r,e,u);for(let c=0;c<l.length;c+=1)l[c]&&l[c].m(e,null);W(r,n,u),s&&s.m(r,u),i=!0},p(r,[u]){if(u&3){o=Be(r[0]);let c;for(c=0;c<o.length;c+=1){const f=Pn(r,o,c);l[c]?l[c].p(f,u):(l[c]=Tn(f),l[c].c(),l[c].m(e,null))}for(;c<l.length;c+=1)l[c].d(1);l.length=o.length}s&&s.p&&(!i||u&4096)&&si(s,a,r,r[12],i?ri(a,r[12],u,null):ui(r[12]),null)},i(r){i||(ye(s,r),i=!0)},o(r){De(s,r),i=!1},d(r){r&&(j(e),j(n)),At(l,r),s&&s.d(r)}}}function kn(t){return!0}function Xi(t,e,n){let{$$slots:i={},$$scope:o}=e,{scope:l}=e,{type:a}=e,{layoutProfileId:s}=e,{dataAttributeList:r=[]}=e,{layout:u=[]}=e,{fetch:c}=e;function f(_){y("openEditDialog",_)}let{loadLayout:h=()=>{Oe.get(l,a,s,_=>{n(2,u=_)},!1)}}=e;const y=gi();let g=[{name:"save",label:"Save",style:"primary"},{name:"cancel",label:"Cancel"},{name:"resetToDefault",label:"Reset to Default"}];Ft(()=>{h()});function v(){T();const _=c();ae.notify("Saving..."),Oe.set(l,a,s,_,()=>{ae.notify("Saved","success",2e3),p()})}function P(){h()}function d(){ae.confirm("Are you sure you want to reset to default?",()=>{Oe.resetToDefault(l,a,()=>{P()})})}function T(){n(0,g=g.map(_=>({..._,disabled:!0})))}function p(){n(0,g=g.map(_=>({..._,disabled:!1})))}function E(_){switch(_.name){case"save":v();break;case"cancel":P();break;case"resetToDefault":d();break}}const A=_=>E(_);return t.$$set=_=>{"scope"in _&&n(3,l=_.scope),"type"in _&&n(4,a=_.type),"layoutProfileId"in _&&n(5,s=_.layoutProfileId),"dataAttributeList"in _&&n(6,r=_.dataAttributeList),"layout"in _&&n(2,u=_.layout),"fetch"in _&&n(7,c=_.fetch),"loadLayout"in _&&n(10,h=_.loadLayout),"$$scope"in _&&n(12,o=_.$$scope)},[g,E,u,l,a,s,r,c,kn,f,h,v,o,i,A]}class Yi extends ge{constructor(e){super(),he(this,e,Xi,zi,se,{scope:3,type:4,layoutProfileId:5,dataAttributeList:6,layout:2,fetch:7,validate:8,openEditDialog:9,loadLayout:10,save:11})}get validate(){return kn}get openEditDialog(){return this.$$.ctx[9]}get save(){return this.$$.ctx[11]}}/**!
 * Sortable 1.15.2
 * @author	RubaXa   <trash@rubaxa.org>
 * @author	owenm    <owen23355@gmail.com>
 * @license MIT
 */function In(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(o){return Object.getOwnPropertyDescriptor(t,o).enumerable})),n.push.apply(n,i)}return n}function pe(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?In(Object(n),!0).forEach(function(i){Bi(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):In(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function pt(t){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?pt=function(e){return typeof e}:pt=function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},pt(t)}function Bi(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function ve(){return ve=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},ve.apply(this,arguments)}function Hi(t,e){if(t==null)return{};var n={},i=Object.keys(t),o,l;for(l=0;l<i.length;l++)o=i[l],!(e.indexOf(o)>=0)&&(n[o]=t[o]);return n}function qi(t,e){if(t==null)return{};var n=Hi(t,e),i,o;if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(t);for(o=0;o<l.length;o++)i=l[o],!(e.indexOf(i)>=0)&&Object.prototype.propertyIsEnumerable.call(t,i)&&(n[i]=t[i])}return n}var ji="1.15.2";function _e(t){if(typeof window<"u"&&window.navigator)return!!navigator.userAgent.match(t)}var we=_e(/(?:Trident.*rv[ :]?11\.|msie|iemobile|Windows Phone)/i),Je=_e(/Edge/i),Cn=_e(/firefox/i),xe=_e(/safari/i)&&!_e(/chrome/i)&&!_e(/android/i),Ln=_e(/iP(ad|od|hone)/i),On=_e(/chrome/i)&&_e(/android/i),An={capture:!1,passive:!1};function N(t,e,n){t.addEventListener(e,n,!we&&An)}function F(t,e,n){t.removeEventListener(e,n,!we&&An)}function mt(t,e){if(e){if(e[0]===">"&&(e=e.substring(1)),t)try{if(t.matches)return t.matches(e);if(t.msMatchesSelector)return t.msMatchesSelector(e);if(t.webkitMatchesSelector)return t.webkitMatchesSelector(e)}catch{return!1}return!1}}function Gi(t){return t.host&&t!==document&&t.host.nodeType?t.host:t.parentNode}function ue(t,e,n,i){if(t){n=n||document;do{if(e!=null&&(e[0]===">"?t.parentNode===n&&mt(t,e):mt(t,e))||i&&t===n)return t;if(t===n)break}while(t=Gi(t))}return null}var Fn=/\s+/g;function ie(t,e,n){if(t&&e)if(t.classList)t.classList[n?"add":"remove"](e);else{var i=(" "+t.className+" ").replace(Fn," ").replace(" "+e+" "," ");t.className=(i+(n?" "+e:"")).replace(Fn," ")}}function C(t,e,n){var i=t&&t.style;if(i){if(n===void 0)return document.defaultView&&document.defaultView.getComputedStyle?n=document.defaultView.getComputedStyle(t,""):t.currentStyle&&(n=t.currentStyle),e===void 0?n:n[e];!(e in i)&&e.indexOf("webkit")===-1&&(e="-webkit-"+e),i[e]=n+(typeof n=="string"?"":"px")}}function je(t,e){var n="";if(typeof t=="string")n=t;else do{var i=C(t,"transform");i&&i!=="none"&&(n=i+" "+n)}while(!e&&(t=t.parentNode));var o=window.DOMMatrix||window.WebKitCSSMatrix||window.CSSMatrix||window.MSCSSMatrix;return o&&new o(n)}function Nn(t,e,n){if(t){var i=t.getElementsByTagName(e),o=0,l=i.length;if(n)for(;o<l;o++)n(i[o],o);return i}return[]}function me(){var t=document.scrollingElement;return t||document.documentElement}function K(t,e,n,i,o){if(!(!t.getBoundingClientRect&&t!==window)){var l,a,s,r,u,c,f;if(t!==window&&t.parentNode&&t!==me()?(l=t.getBoundingClientRect(),a=l.top,s=l.left,r=l.bottom,u=l.right,c=l.height,f=l.width):(a=0,s=0,r=window.innerHeight,u=window.innerWidth,c=window.innerHeight,f=window.innerWidth),(e||n)&&t!==window&&(o=o||t.parentNode,!we))do if(o&&o.getBoundingClientRect&&(C(o,"transform")!=="none"||n&&C(o,"position")!=="static")){var h=o.getBoundingClientRect();a-=h.top+parseInt(C(o,"border-top-width")),s-=h.left+parseInt(C(o,"border-left-width")),r=a+l.height,u=s+l.width;break}while(o=o.parentNode);if(i&&t!==window){var y=je(o||t),g=y&&y.a,v=y&&y.d;y&&(a/=v,s/=g,f/=g,c/=v,r=a+c,u=s+f)}return{top:a,left:s,bottom:r,right:u,width:f,height:c}}}function Mn(t,e,n){for(var i=Te(t,!0),o=K(t)[e];i;){var l=K(i)[n],a=void 0;if(a=o>=l,!a)return i;if(i===me())break;i=Te(i,!1)}return!1}function Ge(t,e,n,i){for(var o=0,l=0,a=t.children;l<a.length;){if(a[l].style.display!=="none"&&a[l]!==I.ghost&&(i||a[l]!==I.dragged)&&ue(a[l],n.draggable,t,!1)){if(o===e)return a[l];o++}l++}return null}function Bt(t,e){for(var n=t.lastElementChild;n&&(n===I.ghost||C(n,"display")==="none"||e&&!mt(n,e));)n=n.previousElementSibling;return n||null}function re(t,e){var n=0;if(!t||!t.parentNode)return-1;for(;t=t.previousElementSibling;)t.nodeName.toUpperCase()!=="TEMPLATE"&&t!==I.clone&&(!e||mt(t,e))&&n++;return n}function Rn(t){var e=0,n=0,i=me();if(t)do{var o=je(t),l=o.a,a=o.d;e+=t.scrollLeft*l,n+=t.scrollTop*a}while(t!==i&&(t=t.parentNode));return[e,n]}function Wi(t,e){for(var n in t)if(t.hasOwnProperty(n)){for(var i in e)if(e.hasOwnProperty(i)&&e[i]===t[n][i])return Number(n)}return-1}function Te(t,e){if(!t||!t.getBoundingClientRect)return me();var n=t,i=!1;do if(n.clientWidth<n.scrollWidth||n.clientHeight<n.scrollHeight){var o=C(n);if(n.clientWidth<n.scrollWidth&&(o.overflowX=="auto"||o.overflowX=="scroll")||n.clientHeight<n.scrollHeight&&(o.overflowY=="auto"||o.overflowY=="scroll")){if(!n.getBoundingClientRect||n===document.body)return me();if(i||e)return n;i=!0}}while(n=n.parentNode);return me()}function Ui(t,e){if(t&&e)for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t}function Ht(t,e){return Math.round(t.top)===Math.round(e.top)&&Math.round(t.left)===Math.round(e.left)&&Math.round(t.height)===Math.round(e.height)&&Math.round(t.width)===Math.round(e.width)}var $e;function zn(t,e){return function(){if(!$e){var n=arguments,i=this;n.length===1?t.call(i,n[0]):t.apply(i,n),$e=setTimeout(function(){$e=void 0},e)}}}function Qi(){clearTimeout($e),$e=void 0}function Xn(t,e,n){t.scrollLeft+=e,t.scrollTop+=n}function Yn(t){var e=window.Polymer,n=window.jQuery||window.Zepto;return e&&e.dom?e.dom(t).cloneNode(!0):n?n(t).clone(!0)[0]:t.cloneNode(!0)}function Bn(t,e,n){var i={};return Array.from(t.children).forEach(function(o){var l,a,s,r;if(!(!ue(o,e.draggable,t,!1)||o.animated||o===n)){var u=K(o);i.left=Math.min((l=i.left)!==null&&l!==void 0?l:1/0,u.left),i.top=Math.min((a=i.top)!==null&&a!==void 0?a:1/0,u.top),i.right=Math.max((s=i.right)!==null&&s!==void 0?s:-1/0,u.right),i.bottom=Math.max((r=i.bottom)!==null&&r!==void 0?r:-1/0,u.bottom)}}),i.width=i.right-i.left,i.height=i.bottom-i.top,i.x=i.left,i.y=i.top,i}var oe="Sortable"+new Date().getTime();function Vi(){var t=[],e;return{captureAnimationState:function(){if(t=[],!!this.options.animation){var i=[].slice.call(this.el.children);i.forEach(function(o){if(!(C(o,"display")==="none"||o===I.ghost)){t.push({target:o,rect:K(o)});var l=pe({},t[t.length-1].rect);if(o.thisAnimationDuration){var a=je(o,!0);a&&(l.top-=a.f,l.left-=a.e)}o.fromRect=l}})}},addAnimationState:function(i){t.push(i)},removeAnimationState:function(i){t.splice(Wi(t,{target:i}),1)},animateAll:function(i){var o=this;if(!this.options.animation){clearTimeout(e),typeof i=="function"&&i();return}var l=!1,a=0;t.forEach(function(s){var r=0,u=s.target,c=u.fromRect,f=K(u),h=u.prevFromRect,y=u.prevToRect,g=s.rect,v=je(u,!0);v&&(f.top-=v.f,f.left-=v.e),u.toRect=f,u.thisAnimationDuration&&Ht(h,f)&&!Ht(c,f)&&(g.top-f.top)/(g.left-f.left)===(c.top-f.top)/(c.left-f.left)&&(r=Zi(g,h,y,o.options)),Ht(f,c)||(u.prevFromRect=c,u.prevToRect=f,r||(r=o.options.animation),o.animate(u,g,f,r)),r&&(l=!0,a=Math.max(a,r),clearTimeout(u.animationResetTimer),u.animationResetTimer=setTimeout(function(){u.animationTime=0,u.prevFromRect=null,u.fromRect=null,u.prevToRect=null,u.thisAnimationDuration=null},r),u.thisAnimationDuration=r)}),clearTimeout(e),l?e=setTimeout(function(){typeof i=="function"&&i()},a):typeof i=="function"&&i(),t=[]},animate:function(i,o,l,a){if(a){C(i,"transition",""),C(i,"transform","");var s=je(this.el),r=s&&s.a,u=s&&s.d,c=(o.left-l.left)/(r||1),f=(o.top-l.top)/(u||1);i.animatingX=!!c,i.animatingY=!!f,C(i,"transform","translate3d("+c+"px,"+f+"px,0)"),this.forRepaintDummy=Ki(i),C(i,"transition","transform "+a+"ms"+(this.options.easing?" "+this.options.easing:"")),C(i,"transform","translate3d(0,0,0)"),typeof i.animated=="number"&&clearTimeout(i.animated),i.animated=setTimeout(function(){C(i,"transition",""),C(i,"transform",""),i.animated=!1,i.animatingX=!1,i.animatingY=!1},a)}}}}function Ki(t){return t.offsetWidth}function Zi(t,e,n,i){return Math.sqrt(Math.pow(e.top-t.top,2)+Math.pow(e.left-t.left,2))/Math.sqrt(Math.pow(e.top-n.top,2)+Math.pow(e.left-n.left,2))*i.animation}var We=[],qt={initializeByDefault:!0},et={mount:function(e){for(var n in qt)qt.hasOwnProperty(n)&&!(n in e)&&(e[n]=qt[n]);We.forEach(function(i){if(i.pluginName===e.pluginName)throw"Sortable: Cannot mount plugin ".concat(e.pluginName," more than once")}),We.push(e)},pluginEvent:function(e,n,i){var o=this;this.eventCanceled=!1,i.cancel=function(){o.eventCanceled=!0};var l=e+"Global";We.forEach(function(a){n[a.pluginName]&&(n[a.pluginName][l]&&n[a.pluginName][l](pe({sortable:n},i)),n.options[a.pluginName]&&n[a.pluginName][e]&&n[a.pluginName][e](pe({sortable:n},i)))})},initializePlugins:function(e,n,i,o){We.forEach(function(s){var r=s.pluginName;if(!(!e.options[r]&&!s.initializeByDefault)){var u=new s(e,n,e.options);u.sortable=e,u.options=e.options,e[r]=u,ve(i,u.defaults)}});for(var l in e.options)if(e.options.hasOwnProperty(l)){var a=this.modifyOption(e,l,e.options[l]);typeof a<"u"&&(e.options[l]=a)}},getEventProperties:function(e,n){var i={};return We.forEach(function(o){typeof o.eventProperties=="function"&&ve(i,o.eventProperties.call(n[o.pluginName],e))}),i},modifyOption:function(e,n,i){var o;return We.forEach(function(l){e[l.pluginName]&&l.optionListeners&&typeof l.optionListeners[n]=="function"&&(o=l.optionListeners[n].call(e[l.pluginName],i))}),o}};function Ji(t){var e=t.sortable,n=t.rootEl,i=t.name,o=t.targetEl,l=t.cloneEl,a=t.toEl,s=t.fromEl,r=t.oldIndex,u=t.newIndex,c=t.oldDraggableIndex,f=t.newDraggableIndex,h=t.originalEvent,y=t.putSortable,g=t.extraEventProperties;if(e=e||n&&n[oe],!!e){var v,P=e.options,d="on"+i.charAt(0).toUpperCase()+i.substr(1);window.CustomEvent&&!we&&!Je?v=new CustomEvent(i,{bubbles:!0,cancelable:!0}):(v=document.createEvent("Event"),v.initEvent(i,!0,!0)),v.to=a||n,v.from=s||n,v.item=o||n,v.clone=l,v.oldIndex=r,v.newIndex=u,v.oldDraggableIndex=c,v.newDraggableIndex=f,v.originalEvent=h,v.pullMode=y?y.lastPutMode:void 0;var T=pe(pe({},g),et.getEventProperties(i,e));for(var p in T)v[p]=T[p];n&&n.dispatchEvent(v),P[d]&&P[d].call(e,v)}}var xi=["evt"],ne=function(e,n){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},o=i.evt,l=qi(i,xi);et.pluginEvent.bind(I)(e,n,pe({dragEl:m,parentEl:Q,ghostEl:L,rootEl:H,nextEl:Fe,lastDownEl:bt,cloneEl:G,cloneHidden:ke,dragStarted:nt,putSortable:J,activeSortable:I.active,originalEvent:o,oldIndex:Ue,oldDraggableIndex:tt,newIndex:le,newDraggableIndex:Ie,hideGhostForTarget:Qn,unhideGhostForTarget:Vn,cloneNowHidden:function(){ke=!0},cloneNowShown:function(){ke=!1},dispatchSortableEvent:function(s){ee({sortable:n,name:s,originalEvent:o})}},l))};function ee(t){Ji(pe({putSortable:J,cloneEl:G,targetEl:m,rootEl:H,oldIndex:Ue,oldDraggableIndex:tt,newIndex:le,newDraggableIndex:Ie},t))}var m,Q,L,H,Fe,bt,G,ke,Ue,le,tt,Ie,yt,J,Qe=!1,vt=!1,_t=[],Ne,fe,jt,Gt,Hn,qn,nt,Ve,it,ot=!1,wt=!1,Et,$,Wt=[],Ut=!1,Dt=[],St=typeof document<"u",Pt=Ln,jn=Je||we?"cssFloat":"float",$i=St&&!On&&!Ln&&"draggable"in document.createElement("div"),Gn=function(){if(St){if(we)return!1;var t=document.createElement("x");return t.style.cssText="pointer-events:auto",t.style.pointerEvents==="auto"}}(),Wn=function(e,n){var i=C(e),o=parseInt(i.width)-parseInt(i.paddingLeft)-parseInt(i.paddingRight)-parseInt(i.borderLeftWidth)-parseInt(i.borderRightWidth),l=Ge(e,0,n),a=Ge(e,1,n),s=l&&C(l),r=a&&C(a),u=s&&parseInt(s.marginLeft)+parseInt(s.marginRight)+K(l).width,c=r&&parseInt(r.marginLeft)+parseInt(r.marginRight)+K(a).width;if(i.display==="flex")return i.flexDirection==="column"||i.flexDirection==="column-reverse"?"vertical":"horizontal";if(i.display==="grid")return i.gridTemplateColumns.split(" ").length<=1?"vertical":"horizontal";if(l&&s.float&&s.float!=="none"){var f=s.float==="left"?"left":"right";return a&&(r.clear==="both"||r.clear===f)?"vertical":"horizontal"}return l&&(s.display==="block"||s.display==="flex"||s.display==="table"||s.display==="grid"||u>=o&&i[jn]==="none"||a&&i[jn]==="none"&&u+c>o)?"vertical":"horizontal"},eo=function(e,n,i){var o=i?e.left:e.top,l=i?e.right:e.bottom,a=i?e.width:e.height,s=i?n.left:n.top,r=i?n.right:n.bottom,u=i?n.width:n.height;return o===s||l===r||o+a/2===s+u/2},to=function(e,n){var i;return _t.some(function(o){var l=o[oe].options.emptyInsertThreshold;if(!(!l||Bt(o))){var a=K(o),s=e>=a.left-l&&e<=a.right+l,r=n>=a.top-l&&n<=a.bottom+l;if(s&&r)return i=o}}),i},Un=function(e){function n(l,a){return function(s,r,u,c){var f=s.options.group.name&&r.options.group.name&&s.options.group.name===r.options.group.name;if(l==null&&(a||f))return!0;if(l==null||l===!1)return!1;if(a&&l==="clone")return l;if(typeof l=="function")return n(l(s,r,u,c),a)(s,r,u,c);var h=(a?s:r).options.group.name;return l===!0||typeof l=="string"&&l===h||l.join&&l.indexOf(h)>-1}}var i={},o=e.group;(!o||pt(o)!="object")&&(o={name:o}),i.name=o.name,i.checkPull=n(o.pull,!0),i.checkPut=n(o.put),i.revertClone=o.revertClone,e.group=i},Qn=function(){!Gn&&L&&C(L,"display","none")},Vn=function(){!Gn&&L&&C(L,"display","")};St&&!On&&document.addEventListener("click",function(t){if(vt)return t.preventDefault(),t.stopPropagation&&t.stopPropagation(),t.stopImmediatePropagation&&t.stopImmediatePropagation(),vt=!1,!1},!0);var Me=function(e){if(m){e=e.touches?e.touches[0]:e;var n=to(e.clientX,e.clientY);if(n){var i={};for(var o in e)e.hasOwnProperty(o)&&(i[o]=e[o]);i.target=i.rootEl=n,i.preventDefault=void 0,i.stopPropagation=void 0,n[oe]._onDragOver(i)}}},no=function(e){m&&m.parentNode[oe]._isOutsideThisEl(e.target)};function I(t,e){if(!(t&&t.nodeType&&t.nodeType===1))throw"Sortable: `el` must be an HTMLElement, not ".concat({}.toString.call(t));this.el=t,this.options=e=ve({},e),t[oe]=this;var n={group:null,sort:!0,disabled:!1,store:null,handle:null,draggable:/^[uo]l$/i.test(t.nodeName)?">li":">*",swapThreshold:1,invertSwap:!1,invertedSwapThreshold:null,removeCloneOnHide:!0,direction:function(){return Wn(t,this.options)},ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",dragClass:"sortable-drag",ignore:"a, img",filter:null,preventOnFilter:!0,animation:0,easing:null,setData:function(a,s){a.setData("Text",s.textContent)},dropBubble:!1,dragoverBubble:!1,dataIdAttr:"data-id",delay:0,delayOnTouchOnly:!1,touchStartThreshold:(Number.parseInt?Number:window).parseInt(window.devicePixelRatio,10)||1,forceFallback:!1,fallbackClass:"sortable-fallback",fallbackOnBody:!1,fallbackTolerance:0,fallbackOffset:{x:0,y:0},supportPointer:I.supportPointer!==!1&&"PointerEvent"in window&&!xe,emptyInsertThreshold:5};et.initializePlugins(this,t,n);for(var i in n)!(i in e)&&(e[i]=n[i]);Un(e);for(var o in this)o.charAt(0)==="_"&&typeof this[o]=="function"&&(this[o]=this[o].bind(this));this.nativeDraggable=e.forceFallback?!1:$i,this.nativeDraggable&&(this.options.touchStartThreshold=1),e.supportPointer?N(t,"pointerdown",this._onTapStart):(N(t,"mousedown",this._onTapStart),N(t,"touchstart",this._onTapStart)),this.nativeDraggable&&(N(t,"dragover",this),N(t,"dragenter",this)),_t.push(this.el),e.store&&e.store.get&&this.sort(e.store.get(this)||[]),ve(this,Vi())}I.prototype={constructor:I,_isOutsideThisEl:function(e){!this.el.contains(e)&&e!==this.el&&(Ve=null)},_getDirection:function(e,n){return typeof this.options.direction=="function"?this.options.direction.call(this,e,n,m):this.options.direction},_onTapStart:function(e){if(e.cancelable){var n=this,i=this.el,o=this.options,l=o.preventOnFilter,a=e.type,s=e.touches&&e.touches[0]||e.pointerType&&e.pointerType==="touch"&&e,r=(s||e).target,u=e.target.shadowRoot&&(e.path&&e.path[0]||e.composedPath&&e.composedPath()[0])||r,c=o.filter;if(fo(i),!m&&!(/mousedown|pointerdown/.test(a)&&e.button!==0||o.disabled)&&!u.isContentEditable&&!(!this.nativeDraggable&&xe&&r&&r.tagName.toUpperCase()==="SELECT")&&(r=ue(r,o.draggable,i,!1),!(r&&r.animated)&&bt!==r)){if(Ue=re(r),tt=re(r,o.draggable),typeof c=="function"){if(c.call(this,e,r,this)){ee({sortable:n,rootEl:u,name:"filter",targetEl:r,toEl:i,fromEl:i}),ne("filter",n,{evt:e}),l&&e.cancelable&&e.preventDefault();return}}else if(c&&(c=c.split(",").some(function(f){if(f=ue(u,f.trim(),i,!1),f)return ee({sortable:n,rootEl:f,name:"filter",targetEl:r,fromEl:i,toEl:i}),ne("filter",n,{evt:e}),!0}),c)){l&&e.cancelable&&e.preventDefault();return}o.handle&&!ue(u,o.handle,i,!1)||this._prepareDragStart(e,s,r)}}},_prepareDragStart:function(e,n,i){var o=this,l=o.el,a=o.options,s=l.ownerDocument,r;if(i&&!m&&i.parentNode===l){var u=K(i);if(H=l,m=i,Q=m.parentNode,Fe=m.nextSibling,bt=i,yt=a.group,I.dragged=m,Ne={target:m,clientX:(n||e).clientX,clientY:(n||e).clientY},Hn=Ne.clientX-u.left,qn=Ne.clientY-u.top,this._lastX=(n||e).clientX,this._lastY=(n||e).clientY,m.style["will-change"]="all",r=function(){if(ne("delayEnded",o,{evt:e}),I.eventCanceled){o._onDrop();return}o._disableDelayedDragEvents(),!Cn&&o.nativeDraggable&&(m.draggable=!0),o._triggerDragStart(e,n),ee({sortable:o,name:"choose",originalEvent:e}),ie(m,a.chosenClass,!0)},a.ignore.split(",").forEach(function(c){Nn(m,c.trim(),Qt)}),N(s,"dragover",Me),N(s,"mousemove",Me),N(s,"touchmove",Me),N(s,"mouseup",o._onDrop),N(s,"touchend",o._onDrop),N(s,"touchcancel",o._onDrop),Cn&&this.nativeDraggable&&(this.options.touchStartThreshold=4,m.draggable=!0),ne("delayStart",this,{evt:e}),a.delay&&(!a.delayOnTouchOnly||n)&&(!this.nativeDraggable||!(Je||we))){if(I.eventCanceled){this._onDrop();return}N(s,"mouseup",o._disableDelayedDrag),N(s,"touchend",o._disableDelayedDrag),N(s,"touchcancel",o._disableDelayedDrag),N(s,"mousemove",o._delayedDragTouchMoveHandler),N(s,"touchmove",o._delayedDragTouchMoveHandler),a.supportPointer&&N(s,"pointermove",o._delayedDragTouchMoveHandler),o._dragStartTimer=setTimeout(r,a.delay)}else r()}},_delayedDragTouchMoveHandler:function(e){var n=e.touches?e.touches[0]:e;Math.max(Math.abs(n.clientX-this._lastX),Math.abs(n.clientY-this._lastY))>=Math.floor(this.options.touchStartThreshold/(this.nativeDraggable&&window.devicePixelRatio||1))&&this._disableDelayedDrag()},_disableDelayedDrag:function(){m&&Qt(m),clearTimeout(this._dragStartTimer),this._disableDelayedDragEvents()},_disableDelayedDragEvents:function(){var e=this.el.ownerDocument;F(e,"mouseup",this._disableDelayedDrag),F(e,"touchend",this._disableDelayedDrag),F(e,"touchcancel",this._disableDelayedDrag),F(e,"mousemove",this._delayedDragTouchMoveHandler),F(e,"touchmove",this._delayedDragTouchMoveHandler),F(e,"pointermove",this._delayedDragTouchMoveHandler)},_triggerDragStart:function(e,n){n=n||e.pointerType=="touch"&&e,!this.nativeDraggable||n?this.options.supportPointer?N(document,"pointermove",this._onTouchMove):n?N(document,"touchmove",this._onTouchMove):N(document,"mousemove",this._onTouchMove):(N(m,"dragend",this),N(H,"dragstart",this._onDragStart));try{document.selection?kt(function(){document.selection.empty()}):window.getSelection().removeAllRanges()}catch{}},_dragStarted:function(e,n){if(Qe=!1,H&&m){ne("dragStarted",this,{evt:n}),this.nativeDraggable&&N(document,"dragover",no);var i=this.options;!e&&ie(m,i.dragClass,!1),ie(m,i.ghostClass,!0),I.active=this,e&&this._appendGhost(),ee({sortable:this,name:"start",originalEvent:n})}else this._nulling()},_emulateDragOver:function(){if(fe){this._lastX=fe.clientX,this._lastY=fe.clientY,Qn();for(var e=document.elementFromPoint(fe.clientX,fe.clientY),n=e;e&&e.shadowRoot&&(e=e.shadowRoot.elementFromPoint(fe.clientX,fe.clientY),e!==n);)n=e;if(m.parentNode[oe]._isOutsideThisEl(e),n)do{if(n[oe]){var i=void 0;if(i=n[oe]._onDragOver({clientX:fe.clientX,clientY:fe.clientY,target:e,rootEl:n}),i&&!this.options.dragoverBubble)break}e=n}while(n=n.parentNode);Vn()}},_onTouchMove:function(e){if(Ne){var n=this.options,i=n.fallbackTolerance,o=n.fallbackOffset,l=e.touches?e.touches[0]:e,a=L&&je(L,!0),s=L&&a&&a.a,r=L&&a&&a.d,u=Pt&&$&&Rn($),c=(l.clientX-Ne.clientX+o.x)/(s||1)+(u?u[0]-Wt[0]:0)/(s||1),f=(l.clientY-Ne.clientY+o.y)/(r||1)+(u?u[1]-Wt[1]:0)/(r||1);if(!I.active&&!Qe){if(i&&Math.max(Math.abs(l.clientX-this._lastX),Math.abs(l.clientY-this._lastY))<i)return;this._onDragStart(e,!0)}if(L){a?(a.e+=c-(jt||0),a.f+=f-(Gt||0)):a={a:1,b:0,c:0,d:1,e:c,f};var h="matrix(".concat(a.a,",").concat(a.b,",").concat(a.c,",").concat(a.d,",").concat(a.e,",").concat(a.f,")");C(L,"webkitTransform",h),C(L,"mozTransform",h),C(L,"msTransform",h),C(L,"transform",h),jt=c,Gt=f,fe=l}e.cancelable&&e.preventDefault()}},_appendGhost:function(){if(!L){var e=this.options.fallbackOnBody?document.body:H,n=K(m,!0,Pt,!0,e),i=this.options;if(Pt){for($=e;C($,"position")==="static"&&C($,"transform")==="none"&&$!==document;)$=$.parentNode;$!==document.body&&$!==document.documentElement?($===document&&($=me()),n.top+=$.scrollTop,n.left+=$.scrollLeft):$=me(),Wt=Rn($)}L=m.cloneNode(!0),ie(L,i.ghostClass,!1),ie(L,i.fallbackClass,!0),ie(L,i.dragClass,!0),C(L,"transition",""),C(L,"transform",""),C(L,"box-sizing","border-box"),C(L,"margin",0),C(L,"top",n.top),C(L,"left",n.left),C(L,"width",n.width),C(L,"height",n.height),C(L,"opacity","0.8"),C(L,"position",Pt?"absolute":"fixed"),C(L,"zIndex","100000"),C(L,"pointerEvents","none"),I.ghost=L,e.appendChild(L),C(L,"transform-origin",Hn/parseInt(L.style.width)*100+"% "+qn/parseInt(L.style.height)*100+"%")}},_onDragStart:function(e,n){var i=this,o=e.dataTransfer,l=i.options;if(ne("dragStart",this,{evt:e}),I.eventCanceled){this._onDrop();return}ne("setupClone",this),I.eventCanceled||(G=Yn(m),G.removeAttribute("id"),G.draggable=!1,G.style["will-change"]="",this._hideClone(),ie(G,this.options.chosenClass,!1),I.clone=G),i.cloneId=kt(function(){ne("clone",i),!I.eventCanceled&&(i.options.removeCloneOnHide||H.insertBefore(G,m),i._hideClone(),ee({sortable:i,name:"clone"}))}),!n&&ie(m,l.dragClass,!0),n?(vt=!0,i._loopId=setInterval(i._emulateDragOver,50)):(F(document,"mouseup",i._onDrop),F(document,"touchend",i._onDrop),F(document,"touchcancel",i._onDrop),o&&(o.effectAllowed="move",l.setData&&l.setData.call(i,o,m)),N(document,"drop",i),C(m,"transform","translateZ(0)")),Qe=!0,i._dragStartId=kt(i._dragStarted.bind(i,n,e)),N(document,"selectstart",i),nt=!0,xe&&C(document.body,"user-select","none")},_onDragOver:function(e){var n=this.el,i=e.target,o,l,a,s=this.options,r=s.group,u=I.active,c=yt===r,f=s.sort,h=J||u,y,g=this,v=!1;if(Ut)return;function P(rt,Ao){ne(rt,g,pe({evt:e,isOwner:c,axis:y?"vertical":"horizontal",revert:a,dragRect:o,targetRect:l,canSort:f,fromSortable:h,target:i,completed:T,onMove:function(oi,Fo){return Tt(H,n,m,o,oi,K(oi),e,Fo)},changed:p},Ao))}function d(){P("dragOverAnimationCapture"),g.captureAnimationState(),g!==h&&h.captureAnimationState()}function T(rt){return P("dragOverCompleted",{insertion:rt}),rt&&(c?u._hideClone():u._showClone(g),g!==h&&(ie(m,J?J.options.ghostClass:u.options.ghostClass,!1),ie(m,s.ghostClass,!0)),J!==g&&g!==I.active?J=g:g===I.active&&J&&(J=null),h===g&&(g._ignoreWhileAnimating=i),g.animateAll(function(){P("dragOverAnimationComplete"),g._ignoreWhileAnimating=null}),g!==h&&(h.animateAll(),h._ignoreWhileAnimating=null)),(i===m&&!m.animated||i===n&&!i.animated)&&(Ve=null),!s.dragoverBubble&&!e.rootEl&&i!==document&&(m.parentNode[oe]._isOutsideThisEl(e.target),!rt&&Me(e)),!s.dragoverBubble&&e.stopPropagation&&e.stopPropagation(),v=!0}function p(){le=re(m),Ie=re(m,s.draggable),ee({sortable:g,name:"change",toEl:n,newIndex:le,newDraggableIndex:Ie,originalEvent:e})}if(e.preventDefault!==void 0&&e.cancelable&&e.preventDefault(),i=ue(i,s.draggable,n,!0),P("dragOver"),I.eventCanceled)return v;if(m.contains(e.target)||i.animated&&i.animatingX&&i.animatingY||g._ignoreWhileAnimating===i)return T(!1);if(vt=!1,u&&!s.disabled&&(c?f||(a=Q!==H):J===this||(this.lastPutMode=yt.checkPull(this,u,m,e))&&r.checkPut(this,u,m,e))){if(y=this._getDirection(e,i)==="vertical",o=K(m),P("dragOverValid"),I.eventCanceled)return v;if(a)return Q=H,d(),this._hideClone(),P("revert"),I.eventCanceled||(Fe?H.insertBefore(m,Fe):H.appendChild(m)),T(!0);var E=Bt(n,s.draggable);if(!E||ao(e,y,this)&&!E.animated){if(E===m)return T(!1);if(E&&n===e.target&&(i=E),i&&(l=K(i)),Tt(H,n,m,o,i,l,e,!!i)!==!1)return d(),E&&E.nextSibling?n.insertBefore(m,E.nextSibling):n.appendChild(m),Q=n,p(),T(!0)}else if(E&&lo(e,y,this)){var A=Ge(n,0,s,!0);if(A===m)return T(!1);if(i=A,l=K(i),Tt(H,n,m,o,i,l,e,!1)!==!1)return d(),n.insertBefore(m,A),Q=n,p(),T(!0)}else if(i.parentNode===n){l=K(i);var _=0,D,z=m.parentNode!==n,S=!eo(m.animated&&m.toRect||o,i.animated&&i.toRect||l,y),O=y?"top":"left",M=Mn(i,"top","top")||Mn(m,"top","top"),B=M?M.scrollTop:void 0;Ve!==i&&(D=l[O],ot=!1,wt=!S&&s.invertSwap||z),_=ro(e,i,l,y,S?1:s.swapThreshold,s.invertedSwapThreshold==null?s.swapThreshold:s.invertedSwapThreshold,wt,Ve===i);var q;if(_!==0){var V=re(m);do V-=_,q=Q.children[V];while(q&&(C(q,"display")==="none"||q===L))}if(_===0||q===i)return T(!1);Ve=i,it=_;var X=i.nextElementSibling,x=!1;x=_===1;var Ot=Tt(H,n,m,o,i,l,e,x);if(Ot!==!1)return(Ot===1||Ot===-1)&&(x=Ot===1),Ut=!0,setTimeout(oo,30),d(),x&&!X?n.appendChild(m):i.parentNode.insertBefore(m,x?X:i),M&&Xn(M,0,B-M.scrollTop),Q=m.parentNode,D!==void 0&&!wt&&(Et=Math.abs(D-K(i)[O])),p(),T(!0)}if(n.contains(m))return T(!1)}return!1},_ignoreWhileAnimating:null,_offMoveEvents:function(){F(document,"mousemove",this._onTouchMove),F(document,"touchmove",this._onTouchMove),F(document,"pointermove",this._onTouchMove),F(document,"dragover",Me),F(document,"mousemove",Me),F(document,"touchmove",Me)},_offUpEvents:function(){var e=this.el.ownerDocument;F(e,"mouseup",this._onDrop),F(e,"touchend",this._onDrop),F(e,"pointerup",this._onDrop),F(e,"touchcancel",this._onDrop),F(document,"selectstart",this)},_onDrop:function(e){var n=this.el,i=this.options;if(le=re(m),Ie=re(m,i.draggable),ne("drop",this,{evt:e}),Q=m&&m.parentNode,le=re(m),Ie=re(m,i.draggable),I.eventCanceled){this._nulling();return}Qe=!1,wt=!1,ot=!1,clearInterval(this._loopId),clearTimeout(this._dragStartTimer),Vt(this.cloneId),Vt(this._dragStartId),this.nativeDraggable&&(F(document,"drop",this),F(n,"dragstart",this._onDragStart)),this._offMoveEvents(),this._offUpEvents(),xe&&C(document.body,"user-select",""),C(m,"transform",""),e&&(nt&&(e.cancelable&&e.preventDefault(),!i.dropBubble&&e.stopPropagation()),L&&L.parentNode&&L.parentNode.removeChild(L),(H===Q||J&&J.lastPutMode!=="clone")&&G&&G.parentNode&&G.parentNode.removeChild(G),m&&(this.nativeDraggable&&F(m,"dragend",this),Qt(m),m.style["will-change"]="",nt&&!Qe&&ie(m,J?J.options.ghostClass:this.options.ghostClass,!1),ie(m,this.options.chosenClass,!1),ee({sortable:this,name:"unchoose",toEl:Q,newIndex:null,newDraggableIndex:null,originalEvent:e}),H!==Q?(le>=0&&(ee({rootEl:Q,name:"add",toEl:Q,fromEl:H,originalEvent:e}),ee({sortable:this,name:"remove",toEl:Q,originalEvent:e}),ee({rootEl:Q,name:"sort",toEl:Q,fromEl:H,originalEvent:e}),ee({sortable:this,name:"sort",toEl:Q,originalEvent:e})),J&&J.save()):le!==Ue&&le>=0&&(ee({sortable:this,name:"update",toEl:Q,originalEvent:e}),ee({sortable:this,name:"sort",toEl:Q,originalEvent:e})),I.active&&((le==null||le===-1)&&(le=Ue,Ie=tt),ee({sortable:this,name:"end",toEl:Q,originalEvent:e}),this.save()))),this._nulling()},_nulling:function(){ne("nulling",this),H=m=Q=L=Fe=G=bt=ke=Ne=fe=nt=le=Ie=Ue=tt=Ve=it=J=yt=I.dragged=I.ghost=I.clone=I.active=null,Dt.forEach(function(e){e.checked=!0}),Dt.length=jt=Gt=0},handleEvent:function(e){switch(e.type){case"drop":case"dragend":this._onDrop(e);break;case"dragenter":case"dragover":m&&(this._onDragOver(e),io(e));break;case"selectstart":e.preventDefault();break}},toArray:function(){for(var e=[],n,i=this.el.children,o=0,l=i.length,a=this.options;o<l;o++)n=i[o],ue(n,a.draggable,this.el,!1)&&e.push(n.getAttribute(a.dataIdAttr)||uo(n));return e},sort:function(e,n){var i={},o=this.el;this.toArray().forEach(function(l,a){var s=o.children[a];ue(s,this.options.draggable,o,!1)&&(i[l]=s)},this),n&&this.captureAnimationState(),e.forEach(function(l){i[l]&&(o.removeChild(i[l]),o.appendChild(i[l]))}),n&&this.animateAll()},save:function(){var e=this.options.store;e&&e.set&&e.set(this)},closest:function(e,n){return ue(e,n||this.options.draggable,this.el,!1)},option:function(e,n){var i=this.options;if(n===void 0)return i[e];var o=et.modifyOption(this,e,n);typeof o<"u"?i[e]=o:i[e]=n,e==="group"&&Un(i)},destroy:function(){ne("destroy",this);var e=this.el;e[oe]=null,F(e,"mousedown",this._onTapStart),F(e,"touchstart",this._onTapStart),F(e,"pointerdown",this._onTapStart),this.nativeDraggable&&(F(e,"dragover",this),F(e,"dragenter",this)),Array.prototype.forEach.call(e.querySelectorAll("[draggable]"),function(n){n.removeAttribute("draggable")}),this._onDrop(),this._disableDelayedDragEvents(),_t.splice(_t.indexOf(this.el),1),this.el=e=null},_hideClone:function(){if(!ke){if(ne("hideClone",this),I.eventCanceled)return;C(G,"display","none"),this.options.removeCloneOnHide&&G.parentNode&&G.parentNode.removeChild(G),ke=!0}},_showClone:function(e){if(e.lastPutMode!=="clone"){this._hideClone();return}if(ke){if(ne("showClone",this),I.eventCanceled)return;m.parentNode==H&&!this.options.group.revertClone?H.insertBefore(G,m):Fe?H.insertBefore(G,Fe):H.appendChild(G),this.options.group.revertClone&&this.animate(m,G),C(G,"display",""),ke=!1}}};function io(t){t.dataTransfer&&(t.dataTransfer.dropEffect="move"),t.cancelable&&t.preventDefault()}function Tt(t,e,n,i,o,l,a,s){var r,u=t[oe],c=u.options.onMove,f;return window.CustomEvent&&!we&&!Je?r=new CustomEvent("move",{bubbles:!0,cancelable:!0}):(r=document.createEvent("Event"),r.initEvent("move",!0,!0)),r.to=e,r.from=t,r.dragged=n,r.draggedRect=i,r.related=o||e,r.relatedRect=l||K(e),r.willInsertAfter=s,r.originalEvent=a,t.dispatchEvent(r),c&&(f=c.call(u,r,a)),f}function Qt(t){t.draggable=!1}function oo(){Ut=!1}function lo(t,e,n){var i=K(Ge(n.el,0,n.options,!0)),o=Bn(n.el,n.options,L),l=10;return e?t.clientX<o.left-l||t.clientY<i.top&&t.clientX<i.right:t.clientY<o.top-l||t.clientY<i.bottom&&t.clientX<i.left}function ao(t,e,n){var i=K(Bt(n.el,n.options.draggable)),o=Bn(n.el,n.options,L),l=10;return e?t.clientX>o.right+l||t.clientY>i.bottom&&t.clientX>i.left:t.clientY>o.bottom+l||t.clientX>i.right&&t.clientY>i.top}function ro(t,e,n,i,o,l,a,s){var r=i?t.clientY:t.clientX,u=i?n.height:n.width,c=i?n.top:n.left,f=i?n.bottom:n.right,h=!1;if(!a){if(s&&Et<u*o){if(!ot&&(it===1?r>c+u*l/2:r<f-u*l/2)&&(ot=!0),ot)h=!0;else if(it===1?r<c+Et:r>f-Et)return-it}else if(r>c+u*(1-o)/2&&r<f-u*(1-o)/2)return so(e)}return h=h||a,h&&(r<c+u*l/2||r>f-u*l/2)?r>c+u/2?1:-1:0}function so(t){return re(m)<re(t)?1:-1}function uo(t){for(var e=t.tagName+t.className+t.src+t.href+t.textContent,n=e.length,i=0;n--;)i+=e.charCodeAt(n);return i.toString(36)}function fo(t){Dt.length=0;for(var e=t.getElementsByTagName("input"),n=e.length;n--;){var i=e[n];i.checked&&Dt.push(i)}}function kt(t){return setTimeout(t,0)}function Vt(t){return clearTimeout(t)}St&&N(document,"touchmove",function(t){(I.active||Qe)&&t.cancelable&&t.preventDefault()}),I.utils={on:N,off:F,css:C,find:Nn,is:function(e,n){return!!ue(e,n,e,!1)},extend:Ui,throttle:zn,closest:ue,toggleClass:ie,clone:Yn,index:re,nextTick:kt,cancelNextTick:Vt,detectDirection:Wn,getChild:Ge},I.get=function(t){return t[oe]},I.mount=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];e[0].constructor===Array&&(e=e[0]),e.forEach(function(i){if(!i.prototype||!i.prototype.constructor)throw"Sortable: Mounted plugin must be a constructor function, not ".concat({}.toString.call(i));i.utils&&(I.utils=pe(pe({},I.utils),i.utils)),et.mount(i)})},I.create=function(t,e){return new I(t,e)},I.version=ji;var Z=[],lt,Kt,Zt=!1,Jt,xt,It,at;function co(){function t(){this.defaults={scroll:!0,forceAutoScrollFallback:!1,scrollSensitivity:30,scrollSpeed:10,bubbleScroll:!0};for(var e in this)e.charAt(0)==="_"&&typeof this[e]=="function"&&(this[e]=this[e].bind(this))}return t.prototype={dragStarted:function(n){var i=n.originalEvent;this.sortable.nativeDraggable?N(document,"dragover",this._handleAutoScroll):this.options.supportPointer?N(document,"pointermove",this._handleFallbackAutoScroll):i.touches?N(document,"touchmove",this._handleFallbackAutoScroll):N(document,"mousemove",this._handleFallbackAutoScroll)},dragOverCompleted:function(n){var i=n.originalEvent;!this.options.dragOverBubble&&!i.rootEl&&this._handleAutoScroll(i)},drop:function(){this.sortable.nativeDraggable?F(document,"dragover",this._handleAutoScroll):(F(document,"pointermove",this._handleFallbackAutoScroll),F(document,"touchmove",this._handleFallbackAutoScroll),F(document,"mousemove",this._handleFallbackAutoScroll)),Kn(),Ct(),Qi()},nulling:function(){It=Kt=lt=Zt=at=Jt=xt=null,Z.length=0},_handleFallbackAutoScroll:function(n){this._handleAutoScroll(n,!0)},_handleAutoScroll:function(n,i){var o=this,l=(n.touches?n.touches[0]:n).clientX,a=(n.touches?n.touches[0]:n).clientY,s=document.elementFromPoint(l,a);if(It=n,i||this.options.forceAutoScrollFallback||Je||we||xe){$t(n,this.options,s,i);var r=Te(s,!0);Zt&&(!at||l!==Jt||a!==xt)&&(at&&Kn(),at=setInterval(function(){var u=Te(document.elementFromPoint(l,a),!0);u!==r&&(r=u,Ct()),$t(n,o.options,u,i)},10),Jt=l,xt=a)}else{if(!this.options.bubbleScroll||Te(s,!0)===me()){Ct();return}$t(n,this.options,Te(s,!1),!1)}}},ve(t,{pluginName:"scroll",initializeByDefault:!0})}function Ct(){Z.forEach(function(t){clearInterval(t.pid)}),Z=[]}function Kn(){clearInterval(at)}var $t=zn(function(t,e,n,i){if(e.scroll){var o=(t.touches?t.touches[0]:t).clientX,l=(t.touches?t.touches[0]:t).clientY,a=e.scrollSensitivity,s=e.scrollSpeed,r=me(),u=!1,c;Kt!==n&&(Kt=n,Ct(),lt=e.scroll,c=e.scrollFn,lt===!0&&(lt=Te(n,!0)));var f=0,h=lt;do{var y=h,g=K(y),v=g.top,P=g.bottom,d=g.left,T=g.right,p=g.width,E=g.height,A=void 0,_=void 0,D=y.scrollWidth,z=y.scrollHeight,S=C(y),O=y.scrollLeft,M=y.scrollTop;y===r?(A=p<D&&(S.overflowX==="auto"||S.overflowX==="scroll"||S.overflowX==="visible"),_=E<z&&(S.overflowY==="auto"||S.overflowY==="scroll"||S.overflowY==="visible")):(A=p<D&&(S.overflowX==="auto"||S.overflowX==="scroll"),_=E<z&&(S.overflowY==="auto"||S.overflowY==="scroll"));var B=A&&(Math.abs(T-o)<=a&&O+p<D)-(Math.abs(d-o)<=a&&!!O),q=_&&(Math.abs(P-l)<=a&&M+E<z)-(Math.abs(v-l)<=a&&!!M);if(!Z[f])for(var V=0;V<=f;V++)Z[V]||(Z[V]={});(Z[f].vx!=B||Z[f].vy!=q||Z[f].el!==y)&&(Z[f].el=y,Z[f].vx=B,Z[f].vy=q,clearInterval(Z[f].pid),(B!=0||q!=0)&&(u=!0,Z[f].pid=setInterval((function(){i&&this.layer===0&&I.active._onTouchMove(It);var X=Z[this.layer].vy?Z[this.layer].vy*s:0,x=Z[this.layer].vx?Z[this.layer].vx*s:0;typeof c=="function"&&c.call(I.dragged.parentNode[oe],x,X,t,It,Z[this.layer].el)!=="continue"||Xn(Z[this.layer].el,x,X)}).bind({layer:f}),24))),f++}while(e.bubbleScroll&&h!==r&&(h=Te(h,!1)));Zt=u}},30),Zn=function(e){var n=e.originalEvent,i=e.putSortable,o=e.dragEl,l=e.activeSortable,a=e.dispatchSortableEvent,s=e.hideGhostForTarget,r=e.unhideGhostForTarget;if(n){var u=i||l;s();var c=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:n,f=document.elementFromPoint(c.clientX,c.clientY);r(),u&&!u.el.contains(f)&&(a("spill"),this.onSpill({dragEl:o,putSortable:i}))}};function en(){}en.prototype={startIndex:null,dragStart:function(e){var n=e.oldDraggableIndex;this.startIndex=n},onSpill:function(e){var n=e.dragEl,i=e.putSortable;this.sortable.captureAnimationState(),i&&i.captureAnimationState();var o=Ge(this.sortable.el,this.startIndex,this.options);o?this.sortable.el.insertBefore(n,o):this.sortable.el.appendChild(n),this.sortable.animateAll(),i&&i.animateAll()},drop:Zn},ve(en,{pluginName:"revertOnSpill"});function tn(){}tn.prototype={onSpill:function(e){var n=e.dragEl,i=e.putSortable,o=i||this.sortable;o.captureAnimationState(),n.parentNode&&n.parentNode.removeChild(n),o.animateAll()},drop:Zn},ve(tn,{pluginName:"removeOnSpill"}),I.mount(new co),I.mount(tn,en);function Jn(t,e,n){const i=t.slice();return i[20]=e[n],i}function xn(t,e,n){const i=t.slice();return i[23]=e[n],i}function $n(t){let e,n,i,o;return{c(){e=k("div"),n=k("a"),n.innerHTML='<i class="fas fa-pencil-alt fa-sm"></i>',b(n,"href","javascript:"),b(n,"data-action","editField"),b(n,"class","edit-field svelte-z446kl"),b(e,"class","right svelte-z446kl")},m(l,a){W(l,e,a),w(e,n),i||(o=be(n,"click",t[9]),i=!0)},p:Y,d(l){l&&j(e),i=!1,o()}}}function ei(t){let e,n,i,o=t[23].label+"",l,a,s,r=t[6]&&$n(t),u=[t[12](t[23])],c={};for(let f=0;f<u.length;f+=1)c=Ee(c,u[f]);return{c(){e=k("li"),n=k("div"),i=k("label"),l=ce(o),a=U(),r&&r.c(),s=U(),b(i,"class","svelte-z446kl"),b(n,"class","left svelte-z446kl"),ft(e,c),ct(e,"svelte-z446kl",!0)},m(f,h){W(f,e,h),w(e,n),w(n,i),w(i,l),w(e,a),r&&r.m(e,null),w(e,s)},p(f,h){h&16&&o!==(o=f[23].label+"")&&Re(l,o),f[6]?r?r.p(f,h):(r=$n(f),r.c(),r.m(e,s)):r&&(r.d(1),r=null),ft(e,c=pn(u,[h&16&&f[12](f[23])])),ct(e,"svelte-z446kl",!0)},d(f){f&&j(e),r&&r.d()}}}function ti(t){let e,n,i,o;return{c(){e=k("div"),n=k("a"),n.innerHTML='<i class="fas fa-pencil-alt fa-sm"></i>',b(n,"href","javascript:"),b(n,"data-action","editField"),b(n,"class","edit-field svelte-z446kl"),b(e,"class","right svelte-z446kl")},m(l,a){W(l,e,a),w(e,n),i||(o=be(n,"click",t[9]),i=!0)},p:Y,d(l){l&&j(e),i=!1,o()}}}function ni(t){let e,n,i,o=t[20].label+"",l,a,s,r=t[6]&&ti(t),u=[t[12](t[20])],c={};for(let f=0;f<u.length;f+=1)c=Ee(c,u[f]);return{c(){e=k("li"),n=k("div"),i=k("label"),l=ce(o),a=U(),r&&r.c(),s=U(),b(i,"class","svelte-z446kl"),b(n,"class","left svelte-z446kl"),ft(e,c),ct(e,"svelte-z446kl",!0)},m(f,h){W(f,e,h),w(e,n),w(n,i),w(i,l),w(e,a),r&&r.m(e,null),w(e,s)},p(f,h){h&8&&o!==(o=f[20].label+"")&&Re(l,o),f[6]?r?r.p(f,h):(r=ti(f),r.c(),r.m(e,s)):r&&(r.d(1),r=null),ft(e,c=pn(u,[h&8&&f[12](f[20])])),ct(e,"svelte-z446kl",!0)},d(f){f&&j(e),r&&r.d()}}}function ho(t){let e,n,i,o,l,a,s,r,u,c,f,h,y=Be(t[4]),g=[];for(let d=0;d<y.length;d+=1)g[d]=ei(xn(t,y,d));let v=Be(t[3]),P=[];for(let d=0;d<v.length;d+=1)P[d]=ni(Jn(t,v,d));return{c(){e=k("div"),n=k("div"),i=k("div"),o=k("header"),o.textContent=`${R.translate("Enabled","labels","Admin")}`,l=U(),a=k("ul");for(let d=0;d<g.length;d+=1)g[d].c();s=U(),r=k("div"),u=k("div"),c=k("header"),c.textContent=`${R.translate("Disabled","labels","Admin")}`,f=U(),h=k("ul");for(let d=0;d<P.length;d+=1)P[d].c();b(a,"class","enabled connected svelte-z446kl"),b(i,"class","well"),b(n,"class","col-sm-5"),b(h,"class","disabled connected svelte-z446kl"),b(u,"class","well"),b(r,"class","col-sm-5"),b(e,"id","layout"),b(e,"class","row")},m(d,T){W(d,e,T),w(e,n),w(n,i),w(i,o),w(i,l),w(i,a);for(let p=0;p<g.length;p+=1)g[p]&&g[p].m(a,null);w(e,s),w(e,r),w(r,u),w(u,c),w(u,f),w(u,h);for(let p=0;p<P.length;p+=1)P[p]&&P[p].m(h,null);t[15](e)},p(d,T){if(T&4688){y=Be(d[4]);let p;for(p=0;p<y.length;p+=1){const E=xn(d,y,p);g[p]?g[p].p(E,T):(g[p]=ei(E),g[p].c(),g[p].m(a,null))}for(;p<g.length;p+=1)g[p].d(1);g.length=y.length}if(T&4680){v=Be(d[3]);let p;for(p=0;p<v.length;p+=1){const E=Jn(d,v,p);P[p]?P[p].p(E,T):(P[p]=ni(E),P[p].c(),P[p].m(h,null))}for(;p<P.length;p+=1)P[p].d(1);P.length=v.length}},d(d){d&&j(e),At(g,d),At(P,d),t[15](null)}}}function go(t){let e,n,i={scope:t[0],type:t[1],layoutProfileId:t[2],validate:t[11],fetch:t[10],loadLayout:t[5],$$slots:{default:[ho]},$$scope:{ctx:t}};return e=new Yi({props:i}),t[16](e),{c(){Le(e.$$.fragment)},m(o,l){Se(e,o,l),n=!0},p(o,[l]){const a={};l&1&&(a.scope=o[0]),l&2&&(a.type=o[1]),l&4&&(a.layoutProfileId=o[2]),l&32&&(a.loadLayout=o[5]),l&67109080&&(a.$$scope={dirty:l,ctx:o}),e.$set(a)},i(o){n||(ye(e.$$.fragment,o),n=!0)},o(o){De(e.$$.fragment,o),n=!1},d(o){t[16](null),Pe(e,o)}}}function po(t){return t.toLowerCase()}function ii(t,e){return t[e]}function mo(t,e,n){let i,o,l,{scope:a}=e,{type:s}=e,{layoutProfileId:r}=e,{dataAttributeList:u=[]}=e,{enabledFields:c=[]}=e,{disabledFields:f=[]}=e,{rowLayout:h=[]}=e,{loadLayout:y}=e,{editable:g=!1}=e,v;Ft(()=>{P()}),dn(()=>{o&&o.destroy(),l&&l.destroy()}),cn(()=>{console.log("update")});function P(){const D={group:"fields",draggable:"li",animation:150};o=I.create(i.querySelector("ul.enabled"),{...D}),l=I.create(i.querySelector("ul.disabled"),{...D})}function d(D){const S=D.target.closest("li");if(!S)return;const O={};u.forEach(M=>{O[M]=S.dataset[M]||null}),v.openEditDialog(O)}function T(){const D=[];console.log("test");for(let z of i.querySelector("ul.enabled").children){const S={};u.forEach(O=>{const M=z.dataset[O];M&&(S[O]=M)}),D.push(S)}return D}function p(D){return D.length===0?(ae.notify("Layout cannot be empty","error"),!1):!0}function E(D){const z={};return u.forEach(S=>{ii(D,S)!=null&&(z[`data-${po(S)}`]=ii(D,S))}),z}function A(D){de[D?"unshift":"push"](()=>{i=D,n(7,i)})}function _(D){de[D?"unshift":"push"](()=>{v=D,n(8,v)})}return t.$$set=D=>{"scope"in D&&n(0,a=D.scope),"type"in D&&n(1,s=D.type),"layoutProfileId"in D&&n(2,r=D.layoutProfileId),"dataAttributeList"in D&&n(13,u=D.dataAttributeList),"enabledFields"in D&&n(14,c=D.enabledFields),"disabledFields"in D&&n(3,f=D.disabledFields),"rowLayout"in D&&n(4,h=D.rowLayout),"loadLayout"in D&&n(5,y=D.loadLayout),"editable"in D&&n(6,g=D.editable)},[a,s,r,f,h,y,g,i,v,d,T,p,E,u,c,A,_]}class nn extends ge{constructor(e){super(),he(this,e,mo,go,se,{scope:0,type:1,layoutProfileId:2,dataAttributeList:13,enabledFields:14,disabledFields:3,rowLayout:4,loadLayout:5,editable:6})}}function bo(t){let e,n,i={scope:t[0],type:t[1],layoutProfileId:t[2],enabledFields:t[4],disabledFields:t[5],rowLayout:t[6],editable:yo,dataAttributeList:t[7],loadLayout:t[8]};return e=new nn({props:i}),t[11](e),{c(){Le(e.$$.fragment)},m(o,l){Se(e,o,l),n=!0},p(o,[l]){const a={};l&1&&(a.scope=o[0]),l&2&&(a.type=o[1]),l&4&&(a.layoutProfileId=o[2]),l&16&&(a.enabledFields=o[4]),l&32&&(a.disabledFields=o[5]),l&64&&(a.rowLayout=o[6]),e.$set(a)},i(o){n||(ye(e.$$.fragment,o),n=!0)},o(o){De(e.$$.fragment,o),n=!1},d(o){t[11](null),Pe(e,o)}}}let yo=!0;function vo(t){return!0}function _o(t,e,n){let{scope:i}=e,{type:o="list"}=e,{layoutProfileId:l}=e;const a=["id","name","width","widthPx","link","notSortable","align","view","customLabel"];let{layoutDisabledParameter:s="layoutListDisabled"}=e,{afterRender:r}=e,u,c=[],f=[],h=[];const y=[],g=[];function v(){Yt.create(i,p=>{ae.notify("Loading..."),Oe.get(i,o,E=>{P(p,E),ae.notify(!1),r&&r()},!1)})}function P(p,E){const A=Object.keys(p.defs.fields).filter(S=>vo(p.getFieldParam(S,"type"))&&d(p,S)).sort((S,O)=>R.translate(S,"fields",i).localeCompare(R.translate(O,"fields",i))),_=[],D=[],z=[];n(4,c=E.map(S=>{const O=R.translate(S.name,"fields",i);return D.includes(O)&&z.push(O),D.push(O),_.push(S.name),{name:S.name,label:O}})),n(5,f=A.filter(S=>!_.includes(S)).map(S=>{const O=R.translate(S,"fields",i);D.includes(O)&&z.push(O),D.push(O);const M={name:S,label:O},B=Ae.get(["entityDefs",i,"fields",S,"type"]);return B&&Ae.get(["fields",B,"notSortable"])&&(M.notSortable=!0),M})),[c,f].forEach(S=>{S.forEach(O=>{z.includes(O.label)&&(O.label+=` (${O.name})`)})}),n(6,h=E.map(S=>{var O;return{...S,label:((O=c.find(M=>M.name===S.name))==null?void 0:O.label)||R.translate(S.name,"fields",i)}}))}function d(p,E){return y.includes(E)||g.includes(p.getFieldParam(E,"type"))?!1:!p.getFieldParam(E,"disabled")&&!p.getFieldParam(E,s)}function T(p){de[p?"unshift":"push"](()=>{u=p,n(3,u)})}return t.$$set=p=>{"scope"in p&&n(0,i=p.scope),"type"in p&&n(1,o=p.type),"layoutProfileId"in p&&n(2,l=p.layoutProfileId),"layoutDisabledParameter"in p&&n(9,s=p.layoutDisabledParameter),"afterRender"in p&&n(10,r=p.afterRender)},[i,o,l,u,c,f,h,a,v,s,r,T]}class on extends ge{constructor(e){super(),he(this,e,_o,bo,se,{scope:0,type:1,layoutProfileId:2,layoutDisabledParameter:9,afterRender:10})}}function wo(t){let e,n,i={scope:t[0],type:t[1],layoutProfileId:t[2],enabledFields:t[8],disabledFields:t[4],rowLayout:t[5],editable:Eo,dataAttributeList:t[6],dataAttributesDefs:t[7],loadLayout:t[9]};return e=new nn({props:i}),t[12](e),{c(){Le(e.$$.fragment)},m(o,l){Se(e,o,l),n=!0},p(o,[l]){const a={};l&1&&(a.scope=o[0]),l&2&&(a.type=o[1]),l&4&&(a.layoutProfileId=o[2]),l&16&&(a.disabledFields=o[4]),l&32&&(a.rowLayout=o[5]),e.$set(a)},i(o){n||(ye(e.$$.fragment,o),n=!0)},o(o){De(e.$$.fragment,o),n=!1},d(o){t[12](null),Pe(e,o)}}}let Eo=!0;function Do(t,e,n){let{scope:i}=e,{type:o}=e,{layoutProfileId:l}=e,{viewType:a="detail"}=e;const s=["id","name","style","sticked"],r={style:{type:"enum",options:["default","success","danger","primary","info","warning"],translation:"LayoutManager.options.style"},sticked:{type:"bool"},name:{readOnly:!0}};let{afterRender:u}=e,c,f=[],h=[],y=[];function g(){ae.notify("Loading..."),Oe.get(i,o,l,d=>{v(d),ae.notify(!1),u&&u()},!1)}function v(d){let T=[],p={},E={};Ae.get(["clientDefs",i,"defaultSidePanel",a])!==!1&&!Ae.get(["clientDefs",i,"defaultSidePanelDisabled"])&&(T.push("default"),p.default="Default"),(Ae.get(["clientDefs",i,"sidePanels",a])||[]).forEach(A=>{A.name&&(T.push(A.name),A.label&&(p[A.name]=A.label),E[A.name]=A)}),n(4,h=[]),d=d||{},n(5,y=[]),T.forEach((A,_)=>{let D=!1,z=d[A]||{};z.disabled&&(D=!0);let S;if(p[A]?S=R.translate(p[A],"labels",i):S=R.translate(A,"panels",i),D)h.push({name:A,label:S});else{let O={name:A,label:S};O.name in E&&s.forEach(M=>{if(M==="name")return;let B=E[O.name]||{};M in B&&(O[M]=B[M])});for(let M in z)O[M]=z[M];O.index="index"in z?z.index:_,y.push(O)}}),y.sort((A,_)=>A.index-_.index)}function P(d){de[d?"unshift":"push"](()=>{c=d,n(3,c)})}return t.$$set=d=>{"scope"in d&&n(0,i=d.scope),"type"in d&&n(1,o=d.type),"layoutProfileId"in d&&n(2,l=d.layoutProfileId),"viewType"in d&&n(10,a=d.viewType),"afterRender"in d&&n(11,u=d.afterRender)},[i,o,l,c,h,y,s,r,f,g,a,u,P]}class Lt extends ge{constructor(e){super(),he(this,e,Do,wo,se,{scope:0,type:1,layoutProfileId:2,viewType:10,afterRender:11})}}function So(t){let e,n,i={scope:t[0],type:t[1],layoutProfileId:t[2],enabledFields:t[4],disabledFields:t[5],rowLayout:t[6],editable:Po,dataAttributeList:t[7],dataAttributesDefs:t[8],loadLayout:t[9]};return e=new nn({props:i}),t[11](e),{c(){Le(e.$$.fragment)},m(o,l){Se(e,o,l),n=!0},p(o,[l]){const a={};l&1&&(a.scope=o[0]),l&2&&(a.type=o[1]),l&4&&(a.layoutProfileId=o[2]),l&16&&(a.enabledFields=o[4]),l&32&&(a.disabledFields=o[5]),l&64&&(a.rowLayout=o[6]),e.$set(a)},i(o){n||(ye(e.$$.fragment,o),n=!0)},o(o){De(e.$$.fragment,o),n=!1},d(o){t[11](null),Pe(e,o)}}}let Po=!0;function To(t,e){return!t.getLinkParam(e,"disabled")&&!t.getLinkParam(e,"layoutRelationshipsDisabled")}function ko(t,e,n){let{scope:i}=e,{type:o}=e,{layoutProfileId:l}=e;const a=["id","name","style","hiddenPerDefault"],s={style:{type:"enum",options:["default","success","danger","primary","info","warning"],translation:"LayoutManager.options.style"},hiddenPerDefault:{type:"bool"},name:{readOnly:!0}};let{afterRender:r}=e,u,c=[],f=[],h=[],y=[];function g(){ae.notify("Loading..."),Yt.create(i,function(d){Oe.get(i,o,l,T=>{v(d,T),ae.notify(!1),r&&r()},!1)})}function v(d,T){let p=[];for(let E in d.defs.links)["hasMany","hasChildren"].includes(d.defs.links[E].type)&&To(d,E)&&p.push(E);p.sort((E,A)=>R.translate(E,"links","scope").localeCompare(R.translate(A,"links","scope"))),f=[],n(4,c=[]),n(5,h=[]);for(let E in T){let A=T[E],_;typeof A=="string"?_={name:A,label:R.translate(A,"links","scope")}:(_=A,_.label=R.translate(_.name,"links","scope")),a.forEach(D=>{if(D==="name"||D in _)return;let z=Ae.get(["clientDefs","scope","relationshipPanels",_.name,D]);z!==null&&(_[D]=z)}),c.push(_),f.push(_.name)}for(let E of p)f.includes(E)||h.push({name:E,label:R.translate(E,"links","scope")});n(6,y=c);for(let E of y)E.label=R.translate(E.name,"links","scope")}function P(d){de[d?"unshift":"push"](()=>{u=d,n(3,u)})}return t.$$set=d=>{"scope"in d&&n(0,i=d.scope),"type"in d&&n(1,o=d.type),"layoutProfileId"in d&&n(2,l=d.layoutProfileId),"afterRender"in d&&n(10,r=d.afterRender)},[i,o,l,u,c,h,y,a,s,g,r,P]}class Io extends ge{constructor(e){super(),he(this,e,ko,So,se,{scope:0,type:1,layoutProfileId:2,afterRender:10})}}function Co(t){let e,n;return e=new t[4]({props:{type:t[0],scope:t[1],layoutProfileId:t[2],layoutDisabledParameter:t[5],viewType:t[6],afterRender:t[3]}}),{c(){Le(e.$$.fragment)},m(i,o){Se(e,i,o),n=!0},p(i,[o]){const l={};o&1&&(l.type=i[0]),o&2&&(l.scope=i[1]),o&4&&(l.layoutProfileId=i[2]),o&32&&(l.layoutDisabledParameter=i[5]),o&64&&(l.viewType=i[6]),o&8&&(l.afterRender=i[3]),e.$set(l)},i(i){n||(ye(e.$$.fragment,i),n=!0)},o(i){De(e.$$.fragment,i),n=!1},d(i){Pe(e,i)}}}function Lo(t,e,n){let{type:i}=e,{scope:o}=e,{layoutProfileId:l}=e,{afterRender:a}=e,s,r,u;return t.$$set=c=>{"type"in c&&n(0,i=c.type),"scope"in c&&n(1,o=c.scope),"layoutProfileId"in c&&n(2,l=c.layoutProfileId),"afterRender"in c&&n(3,a=c.afterRender)},t.$$.update=()=>{if(t.$$.dirty&1)switch(i){case"list":n(5,r="layoutListDisabled"),n(4,s=on);break;case"listSmall":n(5,r="layoutListSmallDisabled"),n(4,s=on);break;case"kanban":n(4,s=on);break;case"relationships":n(4,s=Io);break;case"detail":case"detailSmall":n(4,s=null);break;case"sidePanelsDetail":n(6,u="detail"),n(4,s=Lt);break;case"sidePanelsDetailSmall":n(6,u="detailSmall"),n(4,s=Lt);break;case"sidePanelsEdit":n(6,u="edit"),n(4,s=Lt);break;case"sidePanelsEditSmall":n(6,u="editSmall"),n(4,s=Lt);break}},[i,o,l,a,s,r,u]}class Oo extends ge{constructor(e){super(),he(this,e,Lo,Co,se,{type:0,scope:1,layoutProfileId:2,afterRender:3})}}window.SvelteLanguage=R,window.SvelteUserData=bn,window.SvelteNotifier=ae,window.SvelteLayoutManager=Oe,window.SvelteMetadata=Ae,window.SvelteModelFactory=Yt,te.LayoutComponent=Oo,te.QueueManagerIcon=Ci,te.UpdatePanel=Ri,Object.defineProperty(te,Symbol.toStringTag,{value:"Module"})});
