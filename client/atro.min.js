(function(Fe,Ze){typeof exports=="object"&&typeof module<"u"?Ze(exports,require("https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@24,400,0,0&icon_names=image")):typeof define=="function"&&define.amd?define(["exports","https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@24,400,0,0&icon_names=image"],Ze):(Fe=typeof globalThis<"u"?globalThis:Fe||self,Ze(Fe.Svelte={}))})(this,function(Fe){"use strict";var Bc=Object.defineProperty;var Fc=(Fe,Ze,Ft)=>Ze in Fe?Bc(Fe,Ze,{enumerable:!0,configurable:!0,writable:!0,value:Ft}):Fe[Ze]=Ft;var Nr=(Fe,Ze,Ft)=>Fc(Fe,typeof Ze!="symbol"?Ze+"":Ze,Ft);let Ze={};function Ft(t={}){Ze={animate:!0,allowClose:!0,overlayOpacity:.7,smoothScroll:!1,disableActiveInteraction:!1,showProgress:!1,stagePadding:10,stageRadius:5,popoverOffset:10,showButtons:["next","previous","close"],disableButtons:[],overlayColor:"#000",...t}}function J(t){return t?Ze[t]:Ze}function $n(t,e,n,i){return(t/=i/2)<1?n/2*t*t+e:-n/2*(--t*(t-2)-1)+e}function Rr(t){const e='a[href]:not([disabled]), button:not([disabled]), textarea:not([disabled]), input[type="text"]:not([disabled]), input[type="radio"]:not([disabled]), input[type="checkbox"]:not([disabled]), select:not([disabled])';return t.flatMap(n=>{const i=n.matches(e),r=Array.from(n.querySelectorAll(e));return[...i?[n]:[],...r]}).filter(n=>getComputedStyle(n).pointerEvents!=="none"&&Il(n))}function Br(t){if(!t||Ll(t))return;const e=J("smoothScroll");t.scrollIntoView({behavior:!e||Al(t)?"auto":"smooth",inline:"center",block:"center"})}function Al(t){if(!t||!t.parentElement)return;const e=t.parentElement;return e.scrollHeight>e.clientHeight}function Ll(t){const e=t.getBoundingClientRect();return e.top>=0&&e.left>=0&&e.bottom<=(window.innerHeight||document.documentElement.clientHeight)&&e.right<=(window.innerWidth||document.documentElement.clientWidth)}function Il(t){return!!(t.offsetWidth||t.offsetHeight||t.getClientRects().length)}let ei={};function He(t,e){ei[t]=e}function Q(t){return t?ei[t]:ei}function Fr(){ei={}}let ti={};function ni(t,e){ti[t]=e}function Vt(t){var e;(e=ti[t])==null||e.call(ti)}function Pl(){ti={}}function Ml(t,e,n,i){let r=Q("__activeStagePosition");const o=r||n.getBoundingClientRect(),l=i.getBoundingClientRect(),s=$n(t,o.x,l.x-o.x,e),a=$n(t,o.y,l.y-o.y,e),u=$n(t,o.width,l.width-o.width,e),f=$n(t,o.height,l.height-o.height,e);r={x:s,y:a,width:u,height:f},Hr(r),He("__activeStagePosition",r)}function xr(t){if(!t)return;const e=t.getBoundingClientRect(),n={x:e.x,y:e.y,width:e.width,height:e.height};He("__activeStagePosition",n),Hr(n)}function Nl(){const t=Q("__activeStagePosition"),e=Q("__overlaySvg");if(!t)return;if(!e){console.warn("No stage svg found.");return}const n=window.innerWidth,i=window.innerHeight;e.setAttribute("viewBox",`0 0 ${n} ${i}`)}function Rl(t){const e=Bl(t);document.body.appendChild(e),qr(e,n=>{n.target.tagName==="path"&&Vt("overlayClick")}),He("__overlaySvg",e)}function Hr(t){const e=Q("__overlaySvg");if(!e){Rl(t);return}const n=e.firstElementChild;if((n==null?void 0:n.tagName)!=="path")throw new Error("no path element found in stage svg");n.setAttribute("d",Wr(t))}function Bl(t){const e=window.innerWidth,n=window.innerHeight,i=document.createElementNS("http://www.w3.org/2000/svg","svg");i.classList.add("driver-overlay","driver-overlay-animated"),i.setAttribute("viewBox",`0 0 ${e} ${n}`),i.setAttribute("xmlSpace","preserve"),i.setAttribute("xmlnsXlink","http://www.w3.org/1999/xlink"),i.setAttribute("version","1.1"),i.setAttribute("preserveAspectRatio","xMinYMin slice"),i.style.fillRule="evenodd",i.style.clipRule="evenodd",i.style.strokeLinejoin="round",i.style.strokeMiterlimit="2",i.style.zIndex="10000",i.style.position="fixed",i.style.top="0",i.style.left="0",i.style.width="100%",i.style.height="100%";const r=document.createElementNS("http://www.w3.org/2000/svg","path");return r.setAttribute("d",Wr(t)),r.style.fill=J("overlayColor")||"rgb(0,0,0)",r.style.opacity=`${J("overlayOpacity")}`,r.style.pointerEvents="auto",r.style.cursor="auto",i.appendChild(r),i}function Wr(t){const e=window.innerWidth,n=window.innerHeight,i=J("stagePadding")||0,r=J("stageRadius")||0,o=t.width+i*2,l=t.height+i*2,s=Math.min(r,o/2,l/2),a=Math.floor(Math.max(s,0)),u=t.x-i+a,f=t.y-i,c=o-a*2,m=l-a*2;return`M${e},0L0,0L0,${n}L${e},${n}L${e},0Z
    M${u},${f} h${c} a${a},${a} 0 0 1 ${a},${a} v${m} a${a},${a} 0 0 1 -${a},${a} h-${c} a${a},${a} 0 0 1 -${a},-${a} v-${m} a${a},${a} 0 0 1 ${a},-${a} z`}function Fl(){const t=Q("__overlaySvg");t&&t.remove()}function xl(){const t=document.getElementById("driver-dummy-element");if(t)return t;let e=document.createElement("div");return e.id="driver-dummy-element",e.style.width="0",e.style.height="0",e.style.pointerEvents="none",e.style.opacity="0",e.style.position="fixed",e.style.top="50%",e.style.left="50%",document.body.appendChild(e),e}function jr(t){const{element:e}=t;let n=typeof e=="string"?document.querySelector(e):e;n||(n=xl()),Wl(n,t)}function Hl(){const t=Q("__activeElement"),e=Q("__activeStep");t&&(xr(t),Nl(),Yr(t,e))}function Wl(t,e){const n=Date.now(),i=Q("__activeStep"),r=Q("__activeElement")||t,o=!r||r===t,l=t.id==="driver-dummy-element",s=r.id==="driver-dummy-element",a=J("animate"),u=e.onHighlightStarted||J("onHighlightStarted"),f=(e==null?void 0:e.onHighlighted)||J("onHighlighted"),c=(i==null?void 0:i.onDeselected)||J("onDeselected"),m=J(),h=Q();!o&&c&&c(s?void 0:r,i,{config:m,state:h}),u&&u(l?void 0:t,e,{config:m,state:h});const d=!o&&a;let v=!1;Vl(),He("previousStep",i),He("previousElement",r),He("activeStep",e),He("activeElement",t);const b=()=>{if(Q("__transitionCallback")!==b)return;const w=Date.now()-n,E=400-w<=400/2;e.popover&&E&&!v&&d&&(Gr(t,e),v=!0),J("animate")&&w<400?Ml(w,400,r,t):(xr(t),f&&f(l?void 0:t,e,{config:J(),state:Q()}),He("__transitionCallback",void 0),He("__previousStep",i),He("__previousElement",r),He("__activeStep",e),He("__activeElement",t)),window.requestAnimationFrame(b)};He("__transitionCallback",b),window.requestAnimationFrame(b),Br(t),!d&&e.popover&&Gr(t,e),r.classList.remove("driver-active-element","driver-no-interaction"),r.removeAttribute("aria-haspopup"),r.removeAttribute("aria-expanded"),r.removeAttribute("aria-controls"),J("disableActiveInteraction")&&t.classList.add("driver-no-interaction"),t.classList.add("driver-active-element"),t.setAttribute("aria-haspopup","dialog"),t.setAttribute("aria-expanded","true"),t.setAttribute("aria-controls","driver-popover-content")}function jl(){var t;(t=document.getElementById("driver-dummy-element"))==null||t.remove(),document.querySelectorAll(".driver-active-element").forEach(e=>{e.classList.remove("driver-active-element","driver-no-interaction"),e.removeAttribute("aria-haspopup"),e.removeAttribute("aria-expanded"),e.removeAttribute("aria-controls")})}function Tn(){const t=Q("__resizeTimeout");t&&window.cancelAnimationFrame(t),He("__resizeTimeout",window.requestAnimationFrame(Hl))}function zl(t){var e;if(!Q("isInitialized")||!(t.key==="Tab"||t.keyCode===9))return;const n=Q("__activeElement"),i=(e=Q("popover"))==null?void 0:e.wrapper,r=Rr([...i?[i]:[],...n?[n]:[]]),o=r[0],l=r[r.length-1];if(t.preventDefault(),t.shiftKey){const s=r[r.indexOf(document.activeElement)-1]||l;s==null||s.focus()}else{const s=r[r.indexOf(document.activeElement)+1]||o;s==null||s.focus()}}function zr(t){var e;((e=J("allowKeyboardControl"))==null||e)&&(t.key==="Escape"?Vt("escapePress"):t.key==="ArrowRight"?Vt("arrowRightPress"):t.key==="ArrowLeft"&&Vt("arrowLeftPress"))}function qr(t,e,n){const i=(r,o)=>{const l=r.target;t.contains(l)&&((!n||n(l))&&(r.preventDefault(),r.stopPropagation(),r.stopImmediatePropagation()),o==null||o(r))};document.addEventListener("pointerdown",i,!0),document.addEventListener("mousedown",i,!0),document.addEventListener("pointerup",i,!0),document.addEventListener("mouseup",i,!0),document.addEventListener("click",r=>{i(r,e)},!0)}function ql(){window.addEventListener("keyup",zr,!1),window.addEventListener("keydown",zl,!1),window.addEventListener("resize",Tn),window.addEventListener("scroll",Tn)}function Gl(){window.removeEventListener("keyup",zr),window.removeEventListener("resize",Tn),window.removeEventListener("scroll",Tn)}function Vl(){const t=Q("popover");t&&(t.wrapper.style.display="none")}function Gr(t,e){var n,i;let r=Q("popover");r&&document.body.removeChild(r.wrapper),r=Xl(),document.body.appendChild(r.wrapper);const{title:o,description:l,showButtons:s,disableButtons:a,showProgress:u,nextBtnText:f=J("nextBtnText")||"Next &rarr;",prevBtnText:c=J("prevBtnText")||"&larr; Previous",progressText:m=J("progressText")||"{current} of {total}"}=e.popover||{};r.nextButton.innerHTML=f,r.previousButton.innerHTML=c,r.progress.innerHTML=m,o?(r.title.innerHTML=o,r.title.style.display="block"):r.title.style.display="none",l?(r.description.innerHTML=l,r.description.style.display="block"):r.description.style.display="none";const h=s||J("showButtons"),d=u||J("showProgress")||!1,v=(h==null?void 0:h.includes("next"))||(h==null?void 0:h.includes("previous"))||d;r.closeButton.style.display=h.includes("close")?"block":"none",v?(r.footer.style.display="flex",r.progress.style.display=d?"block":"none",r.nextButton.style.display=h.includes("next")?"block":"none",r.previousButton.style.display=h.includes("previous")?"block":"none"):r.footer.style.display="none";const b=a||J("disableButtons")||[];b!=null&&b.includes("next")&&(r.nextButton.disabled=!0,r.nextButton.classList.add("driver-popover-btn-disabled")),b!=null&&b.includes("previous")&&(r.previousButton.disabled=!0,r.previousButton.classList.add("driver-popover-btn-disabled")),b!=null&&b.includes("close")&&(r.closeButton.disabled=!0,r.closeButton.classList.add("driver-popover-btn-disabled"));const w=r.wrapper;w.style.display="block",w.style.left="",w.style.top="",w.style.bottom="",w.style.right="",w.id="driver-popover-content",w.setAttribute("role","dialog"),w.setAttribute("aria-labelledby","driver-popover-title"),w.setAttribute("aria-describedby","driver-popover-description");const E=r.arrow;E.className="driver-popover-arrow";const D=((n=e.popover)==null?void 0:n.popoverClass)||J("popoverClass")||"";w.className=`driver-popover ${D}`.trim(),qr(r.wrapper,L=>{var C,y,T;const I=L.target,M=((C=e.popover)==null?void 0:C.onNextClick)||J("onNextClick"),x=((y=e.popover)==null?void 0:y.onPrevClick)||J("onPrevClick"),H=((T=e.popover)==null?void 0:T.onCloseClick)||J("onCloseClick");if(I.classList.contains("driver-popover-next-btn"))return M?M(t,e,{config:J(),state:Q()}):Vt("nextClick");if(I.classList.contains("driver-popover-prev-btn"))return x?x(t,e,{config:J(),state:Q()}):Vt("prevClick");if(I.classList.contains("driver-popover-close-btn"))return H?H(t,e,{config:J(),state:Q()}):Vt("closeClick")},L=>!(r!=null&&r.description.contains(L))&&!(r!=null&&r.title.contains(L))&&typeof L.className=="string"&&L.className.includes("driver-popover")),He("popover",r);const p=((i=e.popover)==null?void 0:i.onPopoverRender)||J("onPopoverRender");p&&p(r,{config:J(),state:Q()}),Yr(t,e),Br(w);const A=t.classList.contains("driver-dummy-element"),k=Rr([w,...A?[]:[t]]);k.length>0&&k[0].focus()}function Vr(){const t=Q("popover");if(!(t!=null&&t.wrapper))return;const e=t.wrapper.getBoundingClientRect(),n=J("stagePadding")||0,i=J("popoverOffset")||0;return{width:e.width+n+i,height:e.height+n+i,realWidth:e.width,realHeight:e.height}}function Ur(t,e){const{elementDimensions:n,popoverDimensions:i,popoverPadding:r,popoverArrowDimensions:o}=e;return t==="start"?Math.max(Math.min(n.top-r,window.innerHeight-i.realHeight-o.width),o.width):t==="end"?Math.max(Math.min(n.top-(i==null?void 0:i.realHeight)+n.height+r,window.innerHeight-(i==null?void 0:i.realHeight)-o.width),o.width):t==="center"?Math.max(Math.min(n.top+n.height/2-(i==null?void 0:i.realHeight)/2,window.innerHeight-(i==null?void 0:i.realHeight)-o.width),o.width):0}function Xr(t,e){const{elementDimensions:n,popoverDimensions:i,popoverPadding:r,popoverArrowDimensions:o}=e;return t==="start"?Math.max(Math.min(n.left-r,window.innerWidth-i.realWidth-o.width),o.width):t==="end"?Math.max(Math.min(n.left-(i==null?void 0:i.realWidth)+n.width+r,window.innerWidth-(i==null?void 0:i.realWidth)-o.width),o.width):t==="center"?Math.max(Math.min(n.left+n.width/2-(i==null?void 0:i.realWidth)/2,window.innerWidth-(i==null?void 0:i.realWidth)-o.width),o.width):0}function Yr(t,e){const n=Q("popover");if(!n)return;const{align:i="start",side:r="left"}=(e==null?void 0:e.popover)||{},o=i,l=t.id==="driver-dummy-element"?"over":r,s=J("stagePadding")||0,a=Vr(),u=n.arrow.getBoundingClientRect(),f=t.getBoundingClientRect(),c=f.top-a.height;let m=c>=0;const h=window.innerHeight-(f.bottom+a.height);let d=h>=0;const v=f.left-a.width;let b=v>=0;const w=window.innerWidth-(f.right+a.width);let E=w>=0;const D=!m&&!d&&!b&&!E;let p=l;if(l==="top"&&m?E=b=d=!1:l==="bottom"&&d?E=b=m=!1:l==="left"&&b?E=m=d=!1:l==="right"&&E&&(b=m=d=!1),l==="over"){const A=window.innerWidth/2-a.realWidth/2,k=window.innerHeight/2-a.realHeight/2;n.wrapper.style.left=`${A}px`,n.wrapper.style.right="auto",n.wrapper.style.top=`${k}px`,n.wrapper.style.bottom="auto"}else if(D){const A=window.innerWidth/2-(a==null?void 0:a.realWidth)/2,k=10;n.wrapper.style.left=`${A}px`,n.wrapper.style.right="auto",n.wrapper.style.bottom=`${k}px`,n.wrapper.style.top="auto"}else if(b){const A=Math.min(v,window.innerWidth-(a==null?void 0:a.realWidth)-u.width),k=Ur(o,{elementDimensions:f,popoverDimensions:a,popoverPadding:s,popoverArrowDimensions:u});n.wrapper.style.left=`${A}px`,n.wrapper.style.top=`${k}px`,n.wrapper.style.bottom="auto",n.wrapper.style.right="auto",p="left"}else if(E){const A=Math.min(w,window.innerWidth-(a==null?void 0:a.realWidth)-u.width),k=Ur(o,{elementDimensions:f,popoverDimensions:a,popoverPadding:s,popoverArrowDimensions:u});n.wrapper.style.right=`${A}px`,n.wrapper.style.top=`${k}px`,n.wrapper.style.bottom="auto",n.wrapper.style.left="auto",p="right"}else if(m){const A=Math.min(c,window.innerHeight-a.realHeight-u.width);let k=Xr(o,{elementDimensions:f,popoverDimensions:a,popoverPadding:s,popoverArrowDimensions:u});n.wrapper.style.top=`${A}px`,n.wrapper.style.left=`${k}px`,n.wrapper.style.bottom="auto",n.wrapper.style.right="auto",p="top"}else if(d){const A=Math.min(h,window.innerHeight-(a==null?void 0:a.realHeight)-u.width);let k=Xr(o,{elementDimensions:f,popoverDimensions:a,popoverPadding:s,popoverArrowDimensions:u});n.wrapper.style.left=`${k}px`,n.wrapper.style.bottom=`${A}px`,n.wrapper.style.top="auto",n.wrapper.style.right="auto",p="bottom"}D?n.arrow.classList.add("driver-popover-arrow-none"):Ul(o,p,t)}function Ul(t,e,n){const i=Q("popover");if(!i)return;const r=n.getBoundingClientRect(),o=Vr(),l=i.arrow,s=o.width,a=window.innerWidth,u=r.width,f=r.left,c=o.height,m=window.innerHeight,h=r.top,d=r.height;l.className="driver-popover-arrow";let v=e,b=t;e==="top"?(f+u<=0?(v="right",b="end"):f+u-s<=0&&(v="top",b="start"),f>=a?(v="left",b="end"):f+s>=a&&(v="top",b="end")):e==="bottom"?(f+u<=0?(v="right",b="start"):f+u-s<=0&&(v="bottom",b="start"),f>=a?(v="left",b="start"):f+s>=a&&(v="bottom",b="end")):e==="left"?(h+d<=0?(v="bottom",b="end"):h+d-c<=0&&(v="left",b="start"),h>=m?(v="top",b="end"):h+c>=m&&(v="left",b="end")):e==="right"&&(h+d<=0?(v="bottom",b="start"):h+d-c<=0&&(v="right",b="start"),h>=m?(v="top",b="start"):h+c>=m&&(v="right",b="end")),v?(l.classList.add(`driver-popover-arrow-side-${v}`),l.classList.add(`driver-popover-arrow-align-${b}`)):l.classList.add("driver-popover-arrow-none")}function Xl(){const t=document.createElement("div");t.classList.add("driver-popover");const e=document.createElement("div");e.classList.add("driver-popover-arrow");const n=document.createElement("header");n.id="driver-popover-title",n.classList.add("driver-popover-title"),n.style.display="none",n.innerText="Popover Title";const i=document.createElement("div");i.id="driver-popover-description",i.classList.add("driver-popover-description"),i.style.display="none",i.innerText="Popover description is here";const r=document.createElement("button");r.type="button",r.classList.add("driver-popover-close-btn"),r.setAttribute("aria-label","Close"),r.innerHTML="&times;";const o=document.createElement("footer");o.classList.add("driver-popover-footer");const l=document.createElement("span");l.classList.add("driver-popover-progress-text"),l.innerText="";const s=document.createElement("span");s.classList.add("driver-popover-navigation-btns");const a=document.createElement("button");a.type="button",a.classList.add("driver-popover-prev-btn"),a.innerHTML="&larr; Previous";const u=document.createElement("button");return u.type="button",u.classList.add("driver-popover-next-btn"),u.innerHTML="Next &rarr;",s.appendChild(a),s.appendChild(u),o.appendChild(l),o.appendChild(s),t.appendChild(r),t.appendChild(e),t.appendChild(n),t.appendChild(i),t.appendChild(o),{wrapper:t,arrow:e,title:n,description:i,footer:o,previousButton:a,nextButton:u,closeButton:r,footerButtons:s,progress:l}}function Yl(){var t;const e=Q("popover");e&&((t=e.wrapper.parentElement)==null||t.removeChild(e.wrapper))}function Jl(t={}){Ft(t);function e(){J("allowClose")&&u()}function n(){const f=Q("activeIndex"),c=J("steps")||[];if(typeof f>"u")return;const m=f+1;c[m]?a(m):u()}function i(){const f=Q("activeIndex"),c=J("steps")||[];if(typeof f>"u")return;const m=f-1;c[m]?a(m):u()}function r(f){(J("steps")||[])[f]?a(f):u()}function o(){var f;if(Q("__transitionCallback"))return;const c=Q("activeIndex"),m=Q("__activeStep"),h=Q("__activeElement");if(typeof c>"u"||typeof m>"u"||typeof Q("activeIndex")>"u")return;const d=((f=m.popover)==null?void 0:f.onPrevClick)||J("onPrevClick");if(d)return d(h,m,{config:J(),state:Q()});i()}function l(){var f;if(Q("__transitionCallback"))return;const c=Q("activeIndex"),m=Q("__activeStep"),h=Q("__activeElement");if(typeof c>"u"||typeof m>"u")return;const d=((f=m.popover)==null?void 0:f.onNextClick)||J("onNextClick");if(d)return d(h,m,{config:J(),state:Q()});n()}function s(){Q("isInitialized")||(He("isInitialized",!0),document.body.classList.add("driver-active",J("animate")?"driver-fade":"driver-simple"),ql(),ni("overlayClick",e),ni("escapePress",e),ni("arrowLeftPress",o),ni("arrowRightPress",l))}function a(f=0){var c,m,h,d,v,b,w,E;const D=J("steps");if(!D){console.error("No steps to drive through"),u();return}if(!D[f]){u();return}He("__activeOnDestroyed",document.activeElement),He("activeIndex",f);const p=D[f],A=D[f+1],k=D[f-1],L=((c=p.popover)==null?void 0:c.doneBtnText)||J("doneBtnText")||"Done",C=J("allowClose"),y=typeof((m=p.popover)==null?void 0:m.showProgress)<"u"?(h=p.popover)==null?void 0:h.showProgress:J("showProgress"),T=(((d=p.popover)==null?void 0:d.progressText)||J("progressText")||"{{current}} of {{total}}").replace("{{current}}",`${f+1}`).replace("{{total}}",`${D.length}`),I=((v=p.popover)==null?void 0:v.showButtons)||J("showButtons"),M=["next","previous",...C?["close"]:[]].filter(W=>!(I!=null&&I.length)||I.includes(W)),x=((b=p.popover)==null?void 0:b.onNextClick)||J("onNextClick"),H=((w=p.popover)==null?void 0:w.onPrevClick)||J("onPrevClick"),P=((E=p.popover)==null?void 0:E.onCloseClick)||J("onCloseClick");jr({...p,popover:{showButtons:M,nextBtnText:A?void 0:L,disableButtons:[...k?[]:["previous"]],showProgress:y,progressText:T,onNextClick:x||(()=>{A?a(f+1):u()}),onPrevClick:H||(()=>{a(f-1)}),onCloseClick:P||(()=>{u()}),...(p==null?void 0:p.popover)||{}}})}function u(f=!0){const c=Q("__activeElement"),m=Q("__activeStep"),h=Q("__activeOnDestroyed"),d=J("onDestroyStarted");if(f&&d){const w=!c||(c==null?void 0:c.id)==="driver-dummy-element";d(w?void 0:c,m,{config:J(),state:Q()});return}const v=(m==null?void 0:m.onDeselected)||J("onDeselected"),b=J("onDestroyed");if(document.body.classList.remove("driver-active","driver-fade","driver-simple"),Gl(),Yl(),jl(),Fl(),Pl(),Fr(),c&&m){const w=c.id==="driver-dummy-element";v&&v(w?void 0:c,m,{config:J(),state:Q()}),b&&b(w?void 0:c,m,{config:J(),state:Q()})}h&&h.focus()}return{isActive:()=>Q("isInitialized")||!1,refresh:Tn,drive:(f=0)=>{s(),a(f)},setConfig:Ft,setSteps:f=>{Fr(),Ft({...J(),steps:f})},getConfig:J,getState:Q,getActiveIndex:()=>Q("activeIndex"),isFirstStep:()=>Q("activeIndex")===0,isLastStep:()=>{const f=J("steps")||[],c=Q("activeIndex");return c!==void 0&&c===f.length-1},getActiveStep:()=>Q("activeStep"),getActiveElement:()=>Q("activeElement"),getPreviousElement:()=>Q("previousElement"),getPreviousStep:()=>Q("previousStep"),moveNext:n,movePrevious:i,moveTo:r,hasNextStep:()=>{const f=J("steps")||[],c=Q("activeIndex");return c!==void 0&&f[c+1]},hasPreviousStep:()=>{const f=J("steps")||[],c=Q("activeIndex");return c!==void 0&&f[c-1]},highlight:f=>{s(),jr({...f,popover:f.popover?{showButtons:[],showProgress:!1,progressText:"",...f.popover}:void 0})},destroy:()=>{u(!1)}}}var $e="top",ft="bottom",ct="right",et="left",Wi="auto",On=[$e,ft,ct,et],tn="start",An="end",Zl="clippingParents",Jr="viewport",Ln="popper",Kl="reference",Zr=On.reduce(function(t,e){return t.concat([e+"-"+tn,e+"-"+An])},[]),Kr=[].concat(On,[Wi]).reduce(function(t,e){return t.concat([e,e+"-"+tn,e+"-"+An])},[]),Ql="beforeRead",$l="read",es="afterRead",ts="beforeMain",ns="main",is="afterMain",rs="beforeWrite",os="write",as="afterWrite",ls=[Ql,$l,es,ts,ns,is,rs,os,as];function _t(t){return t?(t.nodeName||"").toLowerCase():null}function ot(t){if(t==null)return window;if(t.toString()!=="[object Window]"){var e=t.ownerDocument;return e&&e.defaultView||window}return t}function Ut(t){var e=ot(t).Element;return t instanceof e||t instanceof Element}function dt(t){var e=ot(t).HTMLElement;return t instanceof e||t instanceof HTMLElement}function ji(t){if(typeof ShadowRoot>"u")return!1;var e=ot(t).ShadowRoot;return t instanceof e||t instanceof ShadowRoot}function ss(t){var e=t.state;Object.keys(e.elements).forEach(function(n){var i=e.styles[n]||{},r=e.attributes[n]||{},o=e.elements[n];!dt(o)||!_t(o)||(Object.assign(o.style,i),Object.keys(r).forEach(function(l){var s=r[l];s===!1?o.removeAttribute(l):o.setAttribute(l,s===!0?"":s)}))})}function us(t){var e=t.state,n={popper:{position:e.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(e.elements.popper.style,n.popper),e.styles=n,e.elements.arrow&&Object.assign(e.elements.arrow.style,n.arrow),function(){Object.keys(e.elements).forEach(function(i){var r=e.elements[i],o=e.attributes[i]||{},l=Object.keys(e.styles.hasOwnProperty(i)?e.styles[i]:n[i]),s=l.reduce(function(a,u){return a[u]="",a},{});!dt(r)||!_t(r)||(Object.assign(r.style,s),Object.keys(o).forEach(function(a){r.removeAttribute(a)}))})}}const Qr={name:"applyStyles",enabled:!0,phase:"write",fn:ss,effect:us,requires:["computeStyles"]};function Et(t){return t.split("-")[0]}var Xt=Math.max,ii=Math.min,nn=Math.round;function zi(){var t=navigator.userAgentData;return t!=null&&t.brands&&Array.isArray(t.brands)?t.brands.map(function(e){return e.brand+"/"+e.version}).join(" "):navigator.userAgent}function $r(){return!/^((?!chrome|android).)*safari/i.test(zi())}function rn(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!1);var i=t.getBoundingClientRect(),r=1,o=1;e&&dt(t)&&(r=t.offsetWidth>0&&nn(i.width)/t.offsetWidth||1,o=t.offsetHeight>0&&nn(i.height)/t.offsetHeight||1);var l=Ut(t)?ot(t):window,s=l.visualViewport,a=!$r()&&n,u=(i.left+(a&&s?s.offsetLeft:0))/r,f=(i.top+(a&&s?s.offsetTop:0))/o,c=i.width/r,m=i.height/o;return{width:c,height:m,top:f,right:u+c,bottom:f+m,left:u,x:u,y:f}}function qi(t){var e=rn(t),n=t.offsetWidth,i=t.offsetHeight;return Math.abs(e.width-n)<=1&&(n=e.width),Math.abs(e.height-i)<=1&&(i=e.height),{x:t.offsetLeft,y:t.offsetTop,width:n,height:i}}function eo(t,e){var n=e.getRootNode&&e.getRootNode();if(t.contains(e))return!0;if(n&&ji(n)){var i=e;do{if(i&&t.isSameNode(i))return!0;i=i.parentNode||i.host}while(i)}return!1}function Tt(t){return ot(t).getComputedStyle(t)}function fs(t){return["table","td","th"].indexOf(_t(t))>=0}function xt(t){return((Ut(t)?t.ownerDocument:t.document)||window.document).documentElement}function ri(t){return _t(t)==="html"?t:t.assignedSlot||t.parentNode||(ji(t)?t.host:null)||xt(t)}function to(t){return!dt(t)||Tt(t).position==="fixed"?null:t.offsetParent}function cs(t){var e=/firefox/i.test(zi()),n=/Trident/i.test(zi());if(n&&dt(t)){var i=Tt(t);if(i.position==="fixed")return null}var r=ri(t);for(ji(r)&&(r=r.host);dt(r)&&["html","body"].indexOf(_t(r))<0;){var o=Tt(r);if(o.transform!=="none"||o.perspective!=="none"||o.contain==="paint"||["transform","perspective"].indexOf(o.willChange)!==-1||e&&o.willChange==="filter"||e&&o.filter&&o.filter!=="none")return r;r=r.parentNode}return null}function In(t){for(var e=ot(t),n=to(t);n&&fs(n)&&Tt(n).position==="static";)n=to(n);return n&&(_t(n)==="html"||_t(n)==="body"&&Tt(n).position==="static")?e:n||cs(t)||e}function Gi(t){return["top","bottom"].indexOf(t)>=0?"x":"y"}function Pn(t,e,n){return Xt(t,ii(e,n))}function ds(t,e,n){var i=Pn(t,e,n);return i>n?n:i}function no(){return{top:0,right:0,bottom:0,left:0}}function io(t){return Object.assign({},no(),t)}function ro(t,e){return e.reduce(function(n,i){return n[i]=t,n},{})}var ps=function(e,n){return e=typeof e=="function"?e(Object.assign({},n.rects,{placement:n.placement})):e,io(typeof e!="number"?e:ro(e,On))};function ms(t){var e,n=t.state,i=t.name,r=t.options,o=n.elements.arrow,l=n.modifiersData.popperOffsets,s=Et(n.placement),a=Gi(s),u=[et,ct].indexOf(s)>=0,f=u?"height":"width";if(!(!o||!l)){var c=ps(r.padding,n),m=qi(o),h=a==="y"?$e:et,d=a==="y"?ft:ct,v=n.rects.reference[f]+n.rects.reference[a]-l[a]-n.rects.popper[f],b=l[a]-n.rects.reference[a],w=In(o),E=w?a==="y"?w.clientHeight||0:w.clientWidth||0:0,D=v/2-b/2,p=c[h],A=E-m[f]-c[d],k=E/2-m[f]/2+D,L=Pn(p,k,A),C=a;n.modifiersData[i]=(e={},e[C]=L,e.centerOffset=L-k,e)}}function hs(t){var e=t.state,n=t.options,i=n.element,r=i===void 0?"[data-popper-arrow]":i;r!=null&&(typeof r=="string"&&(r=e.elements.popper.querySelector(r),!r)||eo(e.elements.popper,r)&&(e.elements.arrow=r))}const gs={name:"arrow",enabled:!0,phase:"main",fn:ms,effect:hs,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function on(t){return t.split("-")[1]}var vs={top:"auto",right:"auto",bottom:"auto",left:"auto"};function bs(t,e){var n=t.x,i=t.y,r=e.devicePixelRatio||1;return{x:nn(n*r)/r||0,y:nn(i*r)/r||0}}function oo(t){var e,n=t.popper,i=t.popperRect,r=t.placement,o=t.variation,l=t.offsets,s=t.position,a=t.gpuAcceleration,u=t.adaptive,f=t.roundOffsets,c=t.isFixed,m=l.x,h=m===void 0?0:m,d=l.y,v=d===void 0?0:d,b=typeof f=="function"?f({x:h,y:v}):{x:h,y:v};h=b.x,v=b.y;var w=l.hasOwnProperty("x"),E=l.hasOwnProperty("y"),D=et,p=$e,A=window;if(u){var k=In(n),L="clientHeight",C="clientWidth";if(k===ot(n)&&(k=xt(n),Tt(k).position!=="static"&&s==="absolute"&&(L="scrollHeight",C="scrollWidth")),k=k,r===$e||(r===et||r===ct)&&o===An){p=ft;var y=c&&k===A&&A.visualViewport?A.visualViewport.height:k[L];v-=y-i.height,v*=a?1:-1}if(r===et||(r===$e||r===ft)&&o===An){D=ct;var T=c&&k===A&&A.visualViewport?A.visualViewport.width:k[C];h-=T-i.width,h*=a?1:-1}}var I=Object.assign({position:s},u&&vs),M=f===!0?bs({x:h,y:v},ot(n)):{x:h,y:v};if(h=M.x,v=M.y,a){var x;return Object.assign({},I,(x={},x[p]=E?"0":"",x[D]=w?"0":"",x.transform=(A.devicePixelRatio||1)<=1?"translate("+h+"px, "+v+"px)":"translate3d("+h+"px, "+v+"px, 0)",x))}return Object.assign({},I,(e={},e[p]=E?v+"px":"",e[D]=w?h+"px":"",e.transform="",e))}function ys(t){var e=t.state,n=t.options,i=n.gpuAcceleration,r=i===void 0?!0:i,o=n.adaptive,l=o===void 0?!0:o,s=n.roundOffsets,a=s===void 0?!0:s,u={placement:Et(e.placement),variation:on(e.placement),popper:e.elements.popper,popperRect:e.rects.popper,gpuAcceleration:r,isFixed:e.options.strategy==="fixed"};e.modifiersData.popperOffsets!=null&&(e.styles.popper=Object.assign({},e.styles.popper,oo(Object.assign({},u,{offsets:e.modifiersData.popperOffsets,position:e.options.strategy,adaptive:l,roundOffsets:a})))),e.modifiersData.arrow!=null&&(e.styles.arrow=Object.assign({},e.styles.arrow,oo(Object.assign({},u,{offsets:e.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:a})))),e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-placement":e.placement})}const ws={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:ys,data:{}};var oi={passive:!0};function _s(t){var e=t.state,n=t.instance,i=t.options,r=i.scroll,o=r===void 0?!0:r,l=i.resize,s=l===void 0?!0:l,a=ot(e.elements.popper),u=[].concat(e.scrollParents.reference,e.scrollParents.popper);return o&&u.forEach(function(f){f.addEventListener("scroll",n.update,oi)}),s&&a.addEventListener("resize",n.update,oi),function(){o&&u.forEach(function(f){f.removeEventListener("scroll",n.update,oi)}),s&&a.removeEventListener("resize",n.update,oi)}}const Es={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:_s,data:{}};var ks={left:"right",right:"left",bottom:"top",top:"bottom"};function ai(t){return t.replace(/left|right|bottom|top/g,function(e){return ks[e]})}var Ds={start:"end",end:"start"};function ao(t){return t.replace(/start|end/g,function(e){return Ds[e]})}function Vi(t){var e=ot(t),n=e.pageXOffset,i=e.pageYOffset;return{scrollLeft:n,scrollTop:i}}function Ui(t){return rn(xt(t)).left+Vi(t).scrollLeft}function Ss(t,e){var n=ot(t),i=xt(t),r=n.visualViewport,o=i.clientWidth,l=i.clientHeight,s=0,a=0;if(r){o=r.width,l=r.height;var u=$r();(u||!u&&e==="fixed")&&(s=r.offsetLeft,a=r.offsetTop)}return{width:o,height:l,x:s+Ui(t),y:a}}function Cs(t){var e,n=xt(t),i=Vi(t),r=(e=t.ownerDocument)==null?void 0:e.body,o=Xt(n.scrollWidth,n.clientWidth,r?r.scrollWidth:0,r?r.clientWidth:0),l=Xt(n.scrollHeight,n.clientHeight,r?r.scrollHeight:0,r?r.clientHeight:0),s=-i.scrollLeft+Ui(t),a=-i.scrollTop;return Tt(r||n).direction==="rtl"&&(s+=Xt(n.clientWidth,r?r.clientWidth:0)-o),{width:o,height:l,x:s,y:a}}function Xi(t){var e=Tt(t),n=e.overflow,i=e.overflowX,r=e.overflowY;return/auto|scroll|overlay|hidden/.test(n+r+i)}function lo(t){return["html","body","#document"].indexOf(_t(t))>=0?t.ownerDocument.body:dt(t)&&Xi(t)?t:lo(ri(t))}function Mn(t,e){var n;e===void 0&&(e=[]);var i=lo(t),r=i===((n=t.ownerDocument)==null?void 0:n.body),o=ot(i),l=r?[o].concat(o.visualViewport||[],Xi(i)?i:[]):i,s=e.concat(l);return r?s:s.concat(Mn(ri(l)))}function Yi(t){return Object.assign({},t,{left:t.x,top:t.y,right:t.x+t.width,bottom:t.y+t.height})}function Ts(t,e){var n=rn(t,!1,e==="fixed");return n.top=n.top+t.clientTop,n.left=n.left+t.clientLeft,n.bottom=n.top+t.clientHeight,n.right=n.left+t.clientWidth,n.width=t.clientWidth,n.height=t.clientHeight,n.x=n.left,n.y=n.top,n}function so(t,e,n){return e===Jr?Yi(Ss(t,n)):Ut(e)?Ts(e,n):Yi(Cs(xt(t)))}function Os(t){var e=Mn(ri(t)),n=["absolute","fixed"].indexOf(Tt(t).position)>=0,i=n&&dt(t)?In(t):t;return Ut(i)?e.filter(function(r){return Ut(r)&&eo(r,i)&&_t(r)!=="body"}):[]}function As(t,e,n,i){var r=e==="clippingParents"?Os(t):[].concat(e),o=[].concat(r,[n]),l=o[0],s=o.reduce(function(a,u){var f=so(t,u,i);return a.top=Xt(f.top,a.top),a.right=ii(f.right,a.right),a.bottom=ii(f.bottom,a.bottom),a.left=Xt(f.left,a.left),a},so(t,l,i));return s.width=s.right-s.left,s.height=s.bottom-s.top,s.x=s.left,s.y=s.top,s}function uo(t){var e=t.reference,n=t.element,i=t.placement,r=i?Et(i):null,o=i?on(i):null,l=e.x+e.width/2-n.width/2,s=e.y+e.height/2-n.height/2,a;switch(r){case $e:a={x:l,y:e.y-n.height};break;case ft:a={x:l,y:e.y+e.height};break;case ct:a={x:e.x+e.width,y:s};break;case et:a={x:e.x-n.width,y:s};break;default:a={x:e.x,y:e.y}}var u=r?Gi(r):null;if(u!=null){var f=u==="y"?"height":"width";switch(o){case tn:a[u]=a[u]-(e[f]/2-n[f]/2);break;case An:a[u]=a[u]+(e[f]/2-n[f]/2);break}}return a}function Nn(t,e){e===void 0&&(e={});var n=e,i=n.placement,r=i===void 0?t.placement:i,o=n.strategy,l=o===void 0?t.strategy:o,s=n.boundary,a=s===void 0?Zl:s,u=n.rootBoundary,f=u===void 0?Jr:u,c=n.elementContext,m=c===void 0?Ln:c,h=n.altBoundary,d=h===void 0?!1:h,v=n.padding,b=v===void 0?0:v,w=io(typeof b!="number"?b:ro(b,On)),E=m===Ln?Kl:Ln,D=t.rects.popper,p=t.elements[d?E:m],A=As(Ut(p)?p:p.contextElement||xt(t.elements.popper),a,f,l),k=rn(t.elements.reference),L=uo({reference:k,element:D,strategy:"absolute",placement:r}),C=Yi(Object.assign({},D,L)),y=m===Ln?C:k,T={top:A.top-y.top+w.top,bottom:y.bottom-A.bottom+w.bottom,left:A.left-y.left+w.left,right:y.right-A.right+w.right},I=t.modifiersData.offset;if(m===Ln&&I){var M=I[r];Object.keys(T).forEach(function(x){var H=[ct,ft].indexOf(x)>=0?1:-1,P=[$e,ft].indexOf(x)>=0?"y":"x";T[x]+=M[P]*H})}return T}function Ls(t,e){e===void 0&&(e={});var n=e,i=n.placement,r=n.boundary,o=n.rootBoundary,l=n.padding,s=n.flipVariations,a=n.allowedAutoPlacements,u=a===void 0?Kr:a,f=on(i),c=f?s?Zr:Zr.filter(function(d){return on(d)===f}):On,m=c.filter(function(d){return u.indexOf(d)>=0});m.length===0&&(m=c);var h=m.reduce(function(d,v){return d[v]=Nn(t,{placement:v,boundary:r,rootBoundary:o,padding:l})[Et(v)],d},{});return Object.keys(h).sort(function(d,v){return h[d]-h[v]})}function Is(t){if(Et(t)===Wi)return[];var e=ai(t);return[ao(t),e,ao(e)]}function Ps(t){var e=t.state,n=t.options,i=t.name;if(!e.modifiersData[i]._skip){for(var r=n.mainAxis,o=r===void 0?!0:r,l=n.altAxis,s=l===void 0?!0:l,a=n.fallbackPlacements,u=n.padding,f=n.boundary,c=n.rootBoundary,m=n.altBoundary,h=n.flipVariations,d=h===void 0?!0:h,v=n.allowedAutoPlacements,b=e.options.placement,w=Et(b),E=w===b,D=a||(E||!d?[ai(b)]:Is(b)),p=[b].concat(D).reduce(function(fe,Te){return fe.concat(Et(Te)===Wi?Ls(e,{placement:Te,boundary:f,rootBoundary:c,padding:u,flipVariations:d,allowedAutoPlacements:v}):Te)},[]),A=e.rects.reference,k=e.rects.popper,L=new Map,C=!0,y=p[0],T=0;T<p.length;T++){var I=p[T],M=Et(I),x=on(I)===tn,H=[$e,ft].indexOf(M)>=0,P=H?"width":"height",W=Nn(e,{placement:I,boundary:f,rootBoundary:c,altBoundary:m,padding:u}),B=H?x?ct:et:x?ft:$e;A[P]>k[P]&&(B=ai(B));var le=ai(B),Se=[];if(o&&Se.push(W[M]<=0),s&&Se.push(W[B]<=0,W[le]<=0),Se.every(function(fe){return fe})){y=I,C=!1;break}L.set(I,Se)}if(C)for(var we=d?3:1,pe=function(Te){var rt=p.find(function(mt){var ut=L.get(mt);if(ut)return ut.slice(0,Te).every(function(j){return j})});if(rt)return y=rt,"break"},$=we;$>0;$--){var ge=pe($);if(ge==="break")break}e.placement!==y&&(e.modifiersData[i]._skip=!0,e.placement=y,e.reset=!0)}}const Ms={name:"flip",enabled:!0,phase:"main",fn:Ps,requiresIfExists:["offset"],data:{_skip:!1}};function fo(t,e,n){return n===void 0&&(n={x:0,y:0}),{top:t.top-e.height-n.y,right:t.right-e.width+n.x,bottom:t.bottom-e.height+n.y,left:t.left-e.width-n.x}}function co(t){return[$e,ct,ft,et].some(function(e){return t[e]>=0})}function Ns(t){var e=t.state,n=t.name,i=e.rects.reference,r=e.rects.popper,o=e.modifiersData.preventOverflow,l=Nn(e,{elementContext:"reference"}),s=Nn(e,{altBoundary:!0}),a=fo(l,i),u=fo(s,r,o),f=co(a),c=co(u);e.modifiersData[n]={referenceClippingOffsets:a,popperEscapeOffsets:u,isReferenceHidden:f,hasPopperEscaped:c},e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-reference-hidden":f,"data-popper-escaped":c})}const Rs={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:Ns};function Bs(t,e,n){var i=Et(t),r=[et,$e].indexOf(i)>=0?-1:1,o=typeof n=="function"?n(Object.assign({},e,{placement:t})):n,l=o[0],s=o[1];return l=l||0,s=(s||0)*r,[et,ct].indexOf(i)>=0?{x:s,y:l}:{x:l,y:s}}function Fs(t){var e=t.state,n=t.options,i=t.name,r=n.offset,o=r===void 0?[0,0]:r,l=Kr.reduce(function(f,c){return f[c]=Bs(c,e.rects,o),f},{}),s=l[e.placement],a=s.x,u=s.y;e.modifiersData.popperOffsets!=null&&(e.modifiersData.popperOffsets.x+=a,e.modifiersData.popperOffsets.y+=u),e.modifiersData[i]=l}const xs={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:Fs};function Hs(t){var e=t.state,n=t.name;e.modifiersData[n]=uo({reference:e.rects.reference,element:e.rects.popper,strategy:"absolute",placement:e.placement})}const Ws={name:"popperOffsets",enabled:!0,phase:"read",fn:Hs,data:{}};function js(t){return t==="x"?"y":"x"}function zs(t){var e=t.state,n=t.options,i=t.name,r=n.mainAxis,o=r===void 0?!0:r,l=n.altAxis,s=l===void 0?!1:l,a=n.boundary,u=n.rootBoundary,f=n.altBoundary,c=n.padding,m=n.tether,h=m===void 0?!0:m,d=n.tetherOffset,v=d===void 0?0:d,b=Nn(e,{boundary:a,rootBoundary:u,padding:c,altBoundary:f}),w=Et(e.placement),E=on(e.placement),D=!E,p=Gi(w),A=js(p),k=e.modifiersData.popperOffsets,L=e.rects.reference,C=e.rects.popper,y=typeof v=="function"?v(Object.assign({},e.rects,{placement:e.placement})):v,T=typeof y=="number"?{mainAxis:y,altAxis:y}:Object.assign({mainAxis:0,altAxis:0},y),I=e.modifiersData.offset?e.modifiersData.offset[e.placement]:null,M={x:0,y:0};if(k){if(o){var x,H=p==="y"?$e:et,P=p==="y"?ft:ct,W=p==="y"?"height":"width",B=k[p],le=B+b[H],Se=B-b[P],we=h?-C[W]/2:0,pe=E===tn?L[W]:C[W],$=E===tn?-C[W]:-L[W],ge=e.elements.arrow,fe=h&&ge?qi(ge):{width:0,height:0},Te=e.modifiersData["arrow#persistent"]?e.modifiersData["arrow#persistent"].padding:no(),rt=Te[H],mt=Te[P],ut=Pn(0,L[W],fe[W]),j=D?L[W]/2-we-ut-rt-T.mainAxis:pe-ut-rt-T.mainAxis,R=D?-L[W]/2+we+ut+mt+T.mainAxis:$+ut+mt+T.mainAxis,V=e.elements.arrow&&In(e.elements.arrow),Z=V?p==="y"?V.clientTop||0:V.clientLeft||0:0,ae=(x=I==null?void 0:I[p])!=null?x:0,ke=B+j-ae-Z,Ae=B+R-ae,Xe=Pn(h?ii(le,ke):le,B,h?Xt(Se,Ae):Se);k[p]=Xe,M[p]=Xe-B}if(s){var ee,he=p==="x"?$e:et,Ee=p==="x"?ft:ct,Me=k[A],je=A==="y"?"height":"width",wt=Me+b[he],Rt=Me-b[Ee],Qt=[$e,et].indexOf(w)!==-1,En=(ee=I==null?void 0:I[A])!=null?ee:0,kn=Qt?wt:Me-L[je]-C[je]-En+T.altAxis,Dn=Qt?Me+L[je]+C[je]-En-T.altAxis:Rt,Sn=h&&Qt?ds(kn,Me,Dn):Pn(h?kn:wt,Me,h?Dn:Rt);k[A]=Sn,M[A]=Sn-Me}e.modifiersData[i]=M}}const qs={name:"preventOverflow",enabled:!0,phase:"main",fn:zs,requiresIfExists:["offset"]};function Gs(t){return{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}}function Vs(t){return t===ot(t)||!dt(t)?Vi(t):Gs(t)}function Us(t){var e=t.getBoundingClientRect(),n=nn(e.width)/t.offsetWidth||1,i=nn(e.height)/t.offsetHeight||1;return n!==1||i!==1}function Xs(t,e,n){n===void 0&&(n=!1);var i=dt(e),r=dt(e)&&Us(e),o=xt(e),l=rn(t,r,n),s={scrollLeft:0,scrollTop:0},a={x:0,y:0};return(i||!i&&!n)&&((_t(e)!=="body"||Xi(o))&&(s=Vs(e)),dt(e)?(a=rn(e,!0),a.x+=e.clientLeft,a.y+=e.clientTop):o&&(a.x=Ui(o))),{x:l.left+s.scrollLeft-a.x,y:l.top+s.scrollTop-a.y,width:l.width,height:l.height}}function Ys(t){var e=new Map,n=new Set,i=[];t.forEach(function(o){e.set(o.name,o)});function r(o){n.add(o.name);var l=[].concat(o.requires||[],o.requiresIfExists||[]);l.forEach(function(s){if(!n.has(s)){var a=e.get(s);a&&r(a)}}),i.push(o)}return t.forEach(function(o){n.has(o.name)||r(o)}),i}function Js(t){var e=Ys(t);return ls.reduce(function(n,i){return n.concat(e.filter(function(r){return r.phase===i}))},[])}function Zs(t){var e;return function(){return e||(e=new Promise(function(n){Promise.resolve().then(function(){e=void 0,n(t())})})),e}}function Ks(t){var e=t.reduce(function(n,i){var r=n[i.name];return n[i.name]=r?Object.assign({},r,i,{options:Object.assign({},r.options,i.options),data:Object.assign({},r.data,i.data)}):i,n},{});return Object.keys(e).map(function(n){return e[n]})}var po={placement:"bottom",modifiers:[],strategy:"absolute"};function mo(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return!e.some(function(i){return!(i&&typeof i.getBoundingClientRect=="function")})}function Qs(t){t===void 0&&(t={});var e=t,n=e.defaultModifiers,i=n===void 0?[]:n,r=e.defaultOptions,o=r===void 0?po:r;return function(s,a,u){u===void 0&&(u=o);var f={placement:"bottom",orderedModifiers:[],options:Object.assign({},po,o),modifiersData:{},elements:{reference:s,popper:a},attributes:{},styles:{}},c=[],m=!1,h={state:f,setOptions:function(w){var E=typeof w=="function"?w(f.options):w;v(),f.options=Object.assign({},o,f.options,E),f.scrollParents={reference:Ut(s)?Mn(s):s.contextElement?Mn(s.contextElement):[],popper:Mn(a)};var D=Js(Ks([].concat(i,f.options.modifiers)));return f.orderedModifiers=D.filter(function(p){return p.enabled}),d(),h.update()},forceUpdate:function(){if(!m){var w=f.elements,E=w.reference,D=w.popper;if(mo(E,D)){f.rects={reference:Xs(E,In(D),f.options.strategy==="fixed"),popper:qi(D)},f.reset=!1,f.placement=f.options.placement,f.orderedModifiers.forEach(function(T){return f.modifiersData[T.name]=Object.assign({},T.data)});for(var p=0;p<f.orderedModifiers.length;p++){if(f.reset===!0){f.reset=!1,p=-1;continue}var A=f.orderedModifiers[p],k=A.fn,L=A.options,C=L===void 0?{}:L,y=A.name;typeof k=="function"&&(f=k({state:f,options:C,name:y,instance:h})||f)}}}},update:Zs(function(){return new Promise(function(b){h.forceUpdate(),b(f)})}),destroy:function(){v(),m=!0}};if(!mo(s,a))return h;h.setOptions(u).then(function(b){!m&&u.onFirstUpdate&&u.onFirstUpdate(b)});function d(){f.orderedModifiers.forEach(function(b){var w=b.name,E=b.options,D=E===void 0?{}:E,p=b.effect;if(typeof p=="function"){var A=p({state:f,name:w,instance:h,options:D}),k=function(){};c.push(A||k)}})}function v(){c.forEach(function(b){return b()}),c=[]}return h}}var $s=[Es,Ws,ws,Qr,xs,Ms,qs,gs,Rs],eu=Qs({defaultModifiers:$s}),tu="tippy-box",ho="tippy-content",nu="tippy-backdrop",go="tippy-arrow",vo="tippy-svg-arrow",Yt={passive:!0,capture:!0},bo=function(){return document.body};function Ji(t,e,n){if(Array.isArray(t)){var i=t[e];return i??(Array.isArray(n)?n[e]:n)}return t}function Zi(t,e){var n={}.toString.call(t);return n.indexOf("[object")===0&&n.indexOf(e+"]")>-1}function yo(t,e){return typeof t=="function"?t.apply(void 0,e):t}function wo(t,e){if(e===0)return t;var n;return function(i){clearTimeout(n),n=setTimeout(function(){t(i)},e)}}function iu(t){return t.split(/\s+/).filter(Boolean)}function an(t){return[].concat(t)}function _o(t,e){t.indexOf(e)===-1&&t.push(e)}function ru(t){return t.filter(function(e,n){return t.indexOf(e)===n})}function ou(t){return t.split("-")[0]}function li(t){return[].slice.call(t)}function Eo(t){return Object.keys(t).reduce(function(e,n){return t[n]!==void 0&&(e[n]=t[n]),e},{})}function Rn(){return document.createElement("div")}function si(t){return["Element","Fragment"].some(function(e){return Zi(t,e)})}function au(t){return Zi(t,"NodeList")}function lu(t){return Zi(t,"MouseEvent")}function su(t){return!!(t&&t._tippy&&t._tippy.reference===t)}function uu(t){return si(t)?[t]:au(t)?li(t):Array.isArray(t)?t:li(document.querySelectorAll(t))}function Ki(t,e){t.forEach(function(n){n&&(n.style.transitionDuration=e+"ms")})}function ko(t,e){t.forEach(function(n){n&&n.setAttribute("data-state",e)})}function fu(t){var e,n=an(t),i=n[0];return i!=null&&(e=i.ownerDocument)!=null&&e.body?i.ownerDocument:document}function cu(t,e){var n=e.clientX,i=e.clientY;return t.every(function(r){var o=r.popperRect,l=r.popperState,s=r.props,a=s.interactiveBorder,u=ou(l.placement),f=l.modifiersData.offset;if(!f)return!0;var c=u==="bottom"?f.top.y:0,m=u==="top"?f.bottom.y:0,h=u==="right"?f.left.x:0,d=u==="left"?f.right.x:0,v=o.top-i+c>a,b=i-o.bottom-m>a,w=o.left-n+h>a,E=n-o.right-d>a;return v||b||w||E})}function Qi(t,e,n){var i=e+"EventListener";["transitionend","webkitTransitionEnd"].forEach(function(r){t[i](r,n)})}function Do(t,e){for(var n=e;n;){var i;if(t.contains(n))return!0;n=n.getRootNode==null||(i=n.getRootNode())==null?void 0:i.host}return!1}var kt={isTouch:!1},So=0;function du(){kt.isTouch||(kt.isTouch=!0,window.performance&&document.addEventListener("mousemove",Co))}function Co(){var t=performance.now();t-So<20&&(kt.isTouch=!1,document.removeEventListener("mousemove",Co)),So=t}function pu(){var t=document.activeElement;if(su(t)){var e=t._tippy;t.blur&&!e.state.isVisible&&t.blur()}}function mu(){document.addEventListener("touchstart",du,Yt),window.addEventListener("blur",pu)}var hu=typeof window<"u"&&typeof document<"u",gu=hu?!!window.msCrypto:!1,vu={animateFill:!1,followCursor:!1,inlinePositioning:!1,sticky:!1},bu={allowHTML:!1,animation:"fade",arrow:!0,content:"",inertia:!1,maxWidth:350,role:"tooltip",theme:"",zIndex:9999},ht=Object.assign({appendTo:bo,aria:{content:"auto",expanded:"auto"},delay:0,duration:[300,250],getReferenceClientRect:null,hideOnClick:!0,ignoreAttributes:!1,interactive:!1,interactiveBorder:2,interactiveDebounce:0,moveTransition:"",offset:[0,10],onAfterUpdate:function(){},onBeforeUpdate:function(){},onCreate:function(){},onDestroy:function(){},onHidden:function(){},onHide:function(){},onMount:function(){},onShow:function(){},onShown:function(){},onTrigger:function(){},onUntrigger:function(){},onClickOutside:function(){},placement:"top",plugins:[],popperOptions:{},render:null,showOnCreate:!1,touch:!0,trigger:"mouseenter focus",triggerTarget:null},vu,bu),yu=Object.keys(ht),wu=function(e){var n=Object.keys(e);n.forEach(function(i){ht[i]=e[i]})};function To(t){var e=t.plugins||[],n=e.reduce(function(i,r){var o=r.name,l=r.defaultValue;if(o){var s;i[o]=t[o]!==void 0?t[o]:(s=ht[o])!=null?s:l}return i},{});return Object.assign({},t,n)}function _u(t,e){var n=e?Object.keys(To(Object.assign({},ht,{plugins:e}))):yu,i=n.reduce(function(r,o){var l=(t.getAttribute("data-tippy-"+o)||"").trim();if(!l)return r;if(o==="content")r[o]=l;else try{r[o]=JSON.parse(l)}catch{r[o]=l}return r},{});return i}function Oo(t,e){var n=Object.assign({},e,{content:yo(e.content,[t])},e.ignoreAttributes?{}:_u(t,e.plugins));return n.aria=Object.assign({},ht.aria,n.aria),n.aria={expanded:n.aria.expanded==="auto"?e.interactive:n.aria.expanded,content:n.aria.content==="auto"?e.interactive?null:"describedby":n.aria.content},n}var Eu=function(){return"innerHTML"};function $i(t,e){t[Eu()]=e}function Ao(t){var e=Rn();return t===!0?e.className=go:(e.className=vo,si(t)?e.appendChild(t):$i(e,t)),e}function Lo(t,e){si(e.content)?($i(t,""),t.appendChild(e.content)):typeof e.content!="function"&&(e.allowHTML?$i(t,e.content):t.textContent=e.content)}function er(t){var e=t.firstElementChild,n=li(e.children);return{box:e,content:n.find(function(i){return i.classList.contains(ho)}),arrow:n.find(function(i){return i.classList.contains(go)||i.classList.contains(vo)}),backdrop:n.find(function(i){return i.classList.contains(nu)})}}function Io(t){var e=Rn(),n=Rn();n.className=tu,n.setAttribute("data-state","hidden"),n.setAttribute("tabindex","-1");var i=Rn();i.className=ho,i.setAttribute("data-state","hidden"),Lo(i,t.props),e.appendChild(n),n.appendChild(i),r(t.props,t.props);function r(o,l){var s=er(e),a=s.box,u=s.content,f=s.arrow;l.theme?a.setAttribute("data-theme",l.theme):a.removeAttribute("data-theme"),typeof l.animation=="string"?a.setAttribute("data-animation",l.animation):a.removeAttribute("data-animation"),l.inertia?a.setAttribute("data-inertia",""):a.removeAttribute("data-inertia"),a.style.maxWidth=typeof l.maxWidth=="number"?l.maxWidth+"px":l.maxWidth,l.role?a.setAttribute("role",l.role):a.removeAttribute("role"),(o.content!==l.content||o.allowHTML!==l.allowHTML)&&Lo(u,t.props),l.arrow?f?o.arrow!==l.arrow&&(a.removeChild(f),a.appendChild(Ao(l.arrow))):a.appendChild(Ao(l.arrow)):f&&a.removeChild(f)}return{popper:e,onUpdate:r}}Io.$$tippy=!0;var ku=1,ui=[],tr=[];function Du(t,e){var n=Oo(t,Object.assign({},ht,To(Eo(e)))),i,r,o,l=!1,s=!1,a=!1,u=!1,f,c,m,h=[],d=wo(ke,n.interactiveDebounce),v,b=ku++,w=null,E=ru(n.plugins),D={isEnabled:!0,isVisible:!1,isDestroyed:!1,isMounted:!1,isShown:!1},p={id:b,reference:t,popper:Rn(),popperInstance:w,props:n,state:D,plugins:E,clearDelayTimeouts:kn,setProps:Dn,setContent:Sn,show:Ir,hide:N,hideWithInteractivity:ie,enable:Qt,disable:En,unmount:K,destroy:ve};if(!n.render)return p;var A=n.render(p),k=A.popper,L=A.onUpdate;k.setAttribute("data-tippy-root",""),k.id="tippy-"+p.id,p.popper=k,t._tippy=p,k._tippy=p;var C=E.map(function(O){return O.fn(p)}),y=t.hasAttribute("aria-expanded");return V(),we(),B(),le("onCreate",[p]),n.showOnCreate&&wt(),k.addEventListener("mouseenter",function(){p.props.interactive&&p.state.isVisible&&p.clearDelayTimeouts()}),k.addEventListener("mouseleave",function(){p.props.interactive&&p.props.trigger.indexOf("mouseenter")>=0&&H().addEventListener("mousemove",d)}),p;function T(){var O=p.props.touch;return Array.isArray(O)?O:[O,0]}function I(){return T()[0]==="hold"}function M(){var O;return!!((O=p.props.render)!=null&&O.$$tippy)}function x(){return v||t}function H(){var O=x().parentNode;return O?fu(O):document}function P(){return er(k)}function W(O){return p.state.isMounted&&!p.state.isVisible||kt.isTouch||f&&f.type==="focus"?0:Ji(p.props.delay,O?0:1,ht.delay)}function B(O){O===void 0&&(O=!1),k.style.pointerEvents=p.props.interactive&&!O?"":"none",k.style.zIndex=""+p.props.zIndex}function le(O,F,U){if(U===void 0&&(U=!0),C.forEach(function(me){me[O]&&me[O].apply(me,F)}),U){var re;(re=p.props)[O].apply(re,F)}}function Se(){var O=p.props.aria;if(O.content){var F="aria-"+O.content,U=k.id,re=an(p.props.triggerTarget||t);re.forEach(function(me){var ze=me.getAttribute(F);if(p.state.isVisible)me.setAttribute(F,ze?ze+" "+U:U);else{var Qe=ze&&ze.replace(U,"").trim();Qe?me.setAttribute(F,Qe):me.removeAttribute(F)}})}}function we(){if(!(y||!p.props.aria.expanded)){var O=an(p.props.triggerTarget||t);O.forEach(function(F){p.props.interactive?F.setAttribute("aria-expanded",p.state.isVisible&&F===x()?"true":"false"):F.removeAttribute("aria-expanded")})}}function pe(){H().removeEventListener("mousemove",d),ui=ui.filter(function(O){return O!==d})}function $(O){if(!(kt.isTouch&&(a||O.type==="mousedown"))){var F=O.composedPath&&O.composedPath()[0]||O.target;if(!(p.props.interactive&&Do(k,F))){if(an(p.props.triggerTarget||t).some(function(U){return Do(U,F)})){if(kt.isTouch||p.state.isVisible&&p.props.trigger.indexOf("click")>=0)return}else le("onClickOutside",[p,O]);p.props.hideOnClick===!0&&(p.clearDelayTimeouts(),p.hide(),s=!0,setTimeout(function(){s=!1}),p.state.isMounted||rt())}}}function ge(){a=!0}function fe(){a=!1}function Te(){var O=H();O.addEventListener("mousedown",$,!0),O.addEventListener("touchend",$,Yt),O.addEventListener("touchstart",fe,Yt),O.addEventListener("touchmove",ge,Yt)}function rt(){var O=H();O.removeEventListener("mousedown",$,!0),O.removeEventListener("touchend",$,Yt),O.removeEventListener("touchstart",fe,Yt),O.removeEventListener("touchmove",ge,Yt)}function mt(O,F){j(O,function(){!p.state.isVisible&&k.parentNode&&k.parentNode.contains(k)&&F()})}function ut(O,F){j(O,F)}function j(O,F){var U=P().box;function re(me){me.target===U&&(Qi(U,"remove",re),F())}if(O===0)return F();Qi(U,"remove",c),Qi(U,"add",re),c=re}function R(O,F,U){U===void 0&&(U=!1);var re=an(p.props.triggerTarget||t);re.forEach(function(me){me.addEventListener(O,F,U),h.push({node:me,eventType:O,handler:F,options:U})})}function V(){I()&&(R("touchstart",ae,{passive:!0}),R("touchend",Ae,{passive:!0})),iu(p.props.trigger).forEach(function(O){if(O!=="manual")switch(R(O,ae),O){case"mouseenter":R("mouseleave",Ae);break;case"focus":R(gu?"focusout":"blur",Xe);break;case"focusin":R("focusout",Xe);break}})}function Z(){h.forEach(function(O){var F=O.node,U=O.eventType,re=O.handler,me=O.options;F.removeEventListener(U,re,me)}),h=[]}function ae(O){var F,U=!1;if(!(!p.state.isEnabled||ee(O)||s)){var re=((F=f)==null?void 0:F.type)==="focus";f=O,v=O.currentTarget,we(),!p.state.isVisible&&lu(O)&&ui.forEach(function(me){return me(O)}),O.type==="click"&&(p.props.trigger.indexOf("mouseenter")<0||l)&&p.props.hideOnClick!==!1&&p.state.isVisible?U=!0:wt(O),O.type==="click"&&(l=!U),U&&!re&&Rt(O)}}function ke(O){var F=O.target,U=x().contains(F)||k.contains(F);if(!(O.type==="mousemove"&&U)){var re=je().concat(k).map(function(me){var ze,Qe=me._tippy,Bt=(ze=Qe.popperInstance)==null?void 0:ze.state;return Bt?{popperRect:me.getBoundingClientRect(),popperState:Bt,props:n}:null}).filter(Boolean);cu(re,O)&&(pe(),Rt(O))}}function Ae(O){var F=ee(O)||p.props.trigger.indexOf("click")>=0&&l;if(!F){if(p.props.interactive){p.hideWithInteractivity(O);return}Rt(O)}}function Xe(O){p.props.trigger.indexOf("focusin")<0&&O.target!==x()||p.props.interactive&&O.relatedTarget&&k.contains(O.relatedTarget)||Rt(O)}function ee(O){return kt.isTouch?I()!==O.type.indexOf("touch")>=0:!1}function he(){Ee();var O=p.props,F=O.popperOptions,U=O.placement,re=O.offset,me=O.getReferenceClientRect,ze=O.moveTransition,Qe=M()?er(k).arrow:null,Bt=me?{getBoundingClientRect:me,contextElement:me.contextElement||x()}:t,$t={name:"$$tippy",enabled:!0,phase:"beforeWrite",requires:["computeStyles"],fn:function(xi){var Cn=xi.state;if(M()){var Rc=P(),Mr=Rc.box;["placement","reference-hidden","escaped"].forEach(function(Hi){Hi==="placement"?Mr.setAttribute("data-placement",Cn.placement):Cn.attributes.popper["data-popper-"+Hi]?Mr.setAttribute("data-"+Hi,""):Mr.removeAttribute("data-"+Hi)}),Cn.attributes.popper={}}}},en=[{name:"offset",options:{offset:re}},{name:"preventOverflow",options:{padding:{top:2,bottom:2,left:5,right:5}}},{name:"flip",options:{padding:5}},{name:"computeStyles",options:{adaptive:!ze}},$t];M()&&Qe&&en.push({name:"arrow",options:{element:Qe,padding:3}}),en.push.apply(en,(F==null?void 0:F.modifiers)||[]),p.popperInstance=eu(Bt,k,Object.assign({},F,{placement:U,onFirstUpdate:m,modifiers:en}))}function Ee(){p.popperInstance&&(p.popperInstance.destroy(),p.popperInstance=null)}function Me(){var O=p.props.appendTo,F,U=x();p.props.interactive&&O===bo||O==="parent"?F=U.parentNode:F=yo(O,[U]),F.contains(k)||F.appendChild(k),p.state.isMounted=!0,he()}function je(){return li(k.querySelectorAll("[data-tippy-root]"))}function wt(O){p.clearDelayTimeouts(),O&&le("onTrigger",[p,O]),Te();var F=W(!0),U=T(),re=U[0],me=U[1];kt.isTouch&&re==="hold"&&me&&(F=me),F?i=setTimeout(function(){p.show()},F):p.show()}function Rt(O){if(p.clearDelayTimeouts(),le("onUntrigger",[p,O]),!p.state.isVisible){rt();return}if(!(p.props.trigger.indexOf("mouseenter")>=0&&p.props.trigger.indexOf("click")>=0&&["mouseleave","mousemove"].indexOf(O.type)>=0&&l)){var F=W(!1);F?r=setTimeout(function(){p.state.isVisible&&p.hide()},F):o=requestAnimationFrame(function(){p.hide()})}}function Qt(){p.state.isEnabled=!0}function En(){p.hide(),p.state.isEnabled=!1}function kn(){clearTimeout(i),clearTimeout(r),cancelAnimationFrame(o)}function Dn(O){if(!p.state.isDestroyed){le("onBeforeUpdate",[p,O]),Z();var F=p.props,U=Oo(t,Object.assign({},F,Eo(O),{ignoreAttributes:!0}));p.props=U,V(),F.interactiveDebounce!==U.interactiveDebounce&&(pe(),d=wo(ke,U.interactiveDebounce)),F.triggerTarget&&!U.triggerTarget?an(F.triggerTarget).forEach(function(re){re.removeAttribute("aria-expanded")}):U.triggerTarget&&t.removeAttribute("aria-expanded"),we(),B(),L&&L(F,U),p.popperInstance&&(he(),je().forEach(function(re){requestAnimationFrame(re._tippy.popperInstance.forceUpdate)})),le("onAfterUpdate",[p,O])}}function Sn(O){p.setProps({content:O})}function Ir(){var O=p.state.isVisible,F=p.state.isDestroyed,U=!p.state.isEnabled,re=kt.isTouch&&!p.props.touch,me=Ji(p.props.duration,0,ht.duration);if(!(O||F||U||re)&&!x().hasAttribute("disabled")&&(le("onShow",[p],!1),p.props.onShow(p)!==!1)){if(p.state.isVisible=!0,M()&&(k.style.visibility="visible"),B(),Te(),p.state.isMounted||(k.style.transition="none"),M()){var ze=P(),Qe=ze.box,Bt=ze.content;Ki([Qe,Bt],0)}m=function(){var en;if(!(!p.state.isVisible||u)){if(u=!0,k.offsetHeight,k.style.transition=p.props.moveTransition,M()&&p.props.animation){var Pr=P(),xi=Pr.box,Cn=Pr.content;Ki([xi,Cn],me),ko([xi,Cn],"visible")}Se(),we(),_o(tr,p),(en=p.popperInstance)==null||en.forceUpdate(),le("onMount",[p]),p.props.animation&&M()&&ut(me,function(){p.state.isShown=!0,le("onShown",[p])})}},Me()}}function N(){var O=!p.state.isVisible,F=p.state.isDestroyed,U=!p.state.isEnabled,re=Ji(p.props.duration,1,ht.duration);if(!(O||F||U)&&(le("onHide",[p],!1),p.props.onHide(p)!==!1)){if(p.state.isVisible=!1,p.state.isShown=!1,u=!1,l=!1,M()&&(k.style.visibility="hidden"),pe(),rt(),B(!0),M()){var me=P(),ze=me.box,Qe=me.content;p.props.animation&&(Ki([ze,Qe],re),ko([ze,Qe],"hidden"))}Se(),we(),p.props.animation?M()&&mt(re,p.unmount):p.unmount()}}function ie(O){H().addEventListener("mousemove",d),_o(ui,d),d(O)}function K(){p.state.isVisible&&p.hide(),p.state.isMounted&&(Ee(),je().forEach(function(O){O._tippy.unmount()}),k.parentNode&&k.parentNode.removeChild(k),tr=tr.filter(function(O){return O!==p}),p.state.isMounted=!1,le("onHidden",[p]))}function ve(){p.state.isDestroyed||(p.clearDelayTimeouts(),p.unmount(),Z(),delete t._tippy,p.state.isDestroyed=!0,le("onDestroy",[p]))}}function Bn(t,e){e===void 0&&(e={});var n=ht.plugins.concat(e.plugins||[]);mu();var i=Object.assign({},e,{plugins:n}),r=uu(t),o=r.reduce(function(l,s){var a=s&&Du(s,i);return a&&l.push(a),l},[]);return si(t)?o[0]:o}Bn.defaultProps=ht,Bn.setDefaultProps=wu,Bn.currentInput=kt,Object.assign({},Qr,{effect:function(e){var n=e.state,i={popper:{position:n.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};Object.assign(n.elements.popper.style,i.popper),n.styles=i,n.elements.arrow&&Object.assign(n.elements.arrow.style,i.arrow)}}),Bn.setDefaultProps({render:Io});function Ie(){}const Po=t=>t;function Fn(t,e){for(const n in e)t[n]=e[n];return t}function Mo(t){return t()}function No(){return Object.create(null)}function at(t){t.forEach(Mo)}function fi(t){return typeof t=="function"}function Ne(t,e){return t!=t?e==e:t!==e||t&&typeof t=="object"||typeof t=="function"}let ci;function di(t,e){return t===e?!0:(ci||(ci=document.createElement("a")),ci.href=e,t===ci.href)}function Su(t){return Object.keys(t).length===0}function Ro(t,e,n,i){if(t){const r=Bo(t,e,n,i);return t[0](r)}}function Bo(t,e,n,i){return t[1]&&i?Fn(n.ctx.slice(),t[1](i(e))):n.ctx}function Fo(t,e,n,i){if(t[2]&&i){const r=t[2](i(n));if(e.dirty===void 0)return r;if(typeof r=="object"){const o=[],l=Math.max(e.dirty.length,r.length);for(let s=0;s<l;s+=1)o[s]=e.dirty[s]|r[s];return o}return e.dirty|r}return e.dirty}function xo(t,e,n,i,r,o){if(r){const l=Bo(e,n,i,o);t.p(l,r)}}function Ho(t){if(t.ctx.length>32){const e=[],n=t.ctx.length/32;for(let i=0;i<n;i++)e[i]=-1;return e}return-1}function Wo(t){return t??""}const jo=typeof window<"u";let Cu=jo?()=>window.performance.now():()=>Date.now(),nr=jo?t=>requestAnimationFrame(t):Ie;const ln=new Set;function zo(t){ln.forEach(e=>{e.c(t)||(ln.delete(e),e.f())}),ln.size!==0&&nr(zo)}function Tu(t){let e;return ln.size===0&&nr(zo),{promise:new Promise(n=>{ln.add(e={c:t,f:n})}),abort(){ln.delete(e)}}}function _(t,e){t.appendChild(e)}function qo(t){if(!t)return document;const e=t.getRootNode?t.getRootNode():t.ownerDocument;return e&&e.host?e:t.ownerDocument}function Ou(t){const e=S("style");return e.textContent="/* empty */",Au(qo(t),e),e.sheet}function Au(t,e){return _(t.head||t,e),e.sheet}function Y(t,e,n){t.insertBefore(e,n||null)}function X(t){t.parentNode&&t.parentNode.removeChild(t)}function sn(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}function S(t){return document.createElement(t)}function Ce(t){return document.createTextNode(t)}function z(){return Ce(" ")}function pi(){return Ce("")}function ce(t,e,n,i){return t.addEventListener(e,n,i),()=>t.removeEventListener(e,n,i)}function Ht(t){return function(e){return e.preventDefault(),t.call(this,e)}}function ir(t){return function(e){return e.stopPropagation(),t.call(this,e)}}function Lu(t){return function(e){e.target===this&&t.call(this,e)}}function g(t,e,n){n==null?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}const Iu=["width","height"];function Wt(t,e){const n=Object.getOwnPropertyDescriptors(t.__proto__);for(const i in e)e[i]==null?t.removeAttribute(i):i==="style"?t.style.cssText=e[i]:i==="__value"?t.value=t[i]=e[i]:n[i]&&n[i].set&&Iu.indexOf(i)===-1?t[i]=e[i]:g(t,i,e[i])}function Pu(t){return Array.from(t.childNodes)}function xe(t,e){e=""+e,t.data!==e&&(t.data=e)}function Go(t,e){t.value=e??""}function se(t,e,n,i){n==null?t.style.removeProperty(e):t.style.setProperty(e,n,"")}function Vo(t,e,n){for(let i=0;i<t.options.length;i+=1){const r=t.options[i];if(r.__value===e){r.selected=!0;return}}(!n||e!==void 0)&&(t.selectedIndex=-1)}function Mu(t){const e=t.querySelector(":checked");return e&&e.__value}function te(t,e,n){t.classList.toggle(e,!!n)}function Uo(t,e,{bubbles:n=!1,cancelable:i=!1}={}){return new CustomEvent(t,{detail:e,bubbles:n,cancelable:i})}const mi=new Map;let hi=0;function Nu(t){let e=5381,n=t.length;for(;n--;)e=(e<<5)-e^t.charCodeAt(n);return e>>>0}function Ru(t,e){const n={stylesheet:Ou(e),rules:{}};return mi.set(t,n),n}function Xo(t,e,n,i,r,o,l,s=0){const a=16.666/i;let u=`{
`;for(let b=0;b<=1;b+=a){const w=e+(n-e)*o(b);u+=b*100+`%{${l(w,1-w)}}
`}const f=u+`100% {${l(n,1-n)}}
}`,c=`__svelte_${Nu(f)}_${s}`,m=qo(t),{stylesheet:h,rules:d}=mi.get(m)||Ru(m,t);d[c]||(d[c]=!0,h.insertRule(`@keyframes ${c} ${f}`,h.cssRules.length));const v=t.style.animation||"";return t.style.animation=`${v?`${v}, `:""}${c} ${i}ms linear ${r}ms 1 both`,hi+=1,c}function Bu(t,e){const n=(t.style.animation||"").split(", "),i=n.filter(e?o=>o.indexOf(e)<0:o=>o.indexOf("__svelte")===-1),r=n.length-i.length;r&&(t.style.animation=i.join(", "),hi-=r,hi||Fu())}function Fu(){nr(()=>{hi||(mi.forEach(t=>{const{ownerNode:e}=t.stylesheet;e&&X(e)}),mi.clear())})}let xn;function Hn(t){xn=t}function gi(){if(!xn)throw new Error("Function called outside component initialization");return xn}function un(t){gi().$$.on_mount.push(t)}function xu(t){gi().$$.after_update.push(t)}function rr(t){gi().$$.on_destroy.push(t)}function or(){const t=gi();return(e,n,{cancelable:i=!1}={})=>{const r=t.$$.callbacks[e];if(r){const o=Uo(e,n,{cancelable:i});return r.slice().forEach(l=>{l.call(t,o)}),!o.defaultPrevented}return!0}}const fn=[],qe=[];let cn=[];const Yo=[],Jo=Promise.resolve();let ar=!1;function Zo(){ar||(ar=!0,Jo.then(Ko))}function dn(){return Zo(),Jo}function pn(t){cn.push(t)}const lr=new Set;let mn=0;function Ko(){if(mn!==0)return;const t=xn;do{try{for(;mn<fn.length;){const e=fn[mn];mn++,Hn(e),Hu(e.$$)}}catch(e){throw fn.length=0,mn=0,e}for(Hn(null),fn.length=0,mn=0;qe.length;)qe.pop()();for(let e=0;e<cn.length;e+=1){const n=cn[e];lr.has(n)||(lr.add(n),n())}cn.length=0}while(fn.length);for(;Yo.length;)Yo.pop()();ar=!1,lr.clear(),Hn(t)}function Hu(t){if(t.fragment!==null){t.update(),at(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(pn)}}function Wu(t){const e=[],n=[];cn.forEach(i=>t.indexOf(i)===-1?e.push(i):n.push(i)),n.forEach(i=>i()),cn=e}let Wn;function ju(){return Wn||(Wn=Promise.resolve(),Wn.then(()=>{Wn=null})),Wn}function sr(t,e,n){t.dispatchEvent(Uo(`${e?"intro":"outro"}${n}`))}const vi=new Set;let Ot;function Qo(){Ot={r:0,c:[],p:Ot}}function $o(){Ot.r||at(Ot.c),Ot=Ot.p}function We(t,e){t&&t.i&&(vi.delete(t),t.i(e))}function Ye(t,e,n,i){if(t&&t.o){if(vi.has(t))return;vi.add(t),Ot.c.push(()=>{vi.delete(t),i&&(n&&t.d(1),i())}),t.o(e)}else i&&i()}const zu={duration:0};function ea(t,e,n,i){let o=e(t,n,{direction:"both"}),l=i?0:1,s=null,a=null,u=null,f;function c(){u&&Bu(t,u)}function m(d,v){const b=d.b-l;return v*=Math.abs(b),{a:l,b:d.b,d:b,duration:v,start:d.start,end:d.start+v,group:d.group}}function h(d){const{delay:v=0,duration:b=300,easing:w=Po,tick:E=Ie,css:D}=o||zu,p={start:Cu()+v,b:d};d||(p.group=Ot,Ot.r+=1),"inert"in t&&(d?f!==void 0&&(t.inert=f):(f=t.inert,t.inert=!0)),s||a?a=p:(D&&(c(),u=Xo(t,l,d,b,v,w,D)),d&&E(0,1),s=m(p,b),pn(()=>sr(t,d,"start")),Tu(A=>{if(a&&A>a.start&&(s=m(a,b),a=null,sr(t,s.b,"start"),D&&(c(),u=Xo(t,l,s.b,s.duration,0,w,o.css))),s){if(A>=s.end)E(l=s.b,1-l),sr(t,s.b,"end"),a||(s.b?c():--s.group.r||at(s.group.c)),s=null;else if(A>=s.start){const k=A-s.start;l=s.a+s.d*w(k/s.duration),E(l,1-l)}}return!!(s||a)}))}return{run(d){fi(o)?ju().then(()=>{o=o({direction:d?"in":"out"}),h(d)}):h(d)},end(){c(),s=a=null}}}function De(t){return(t==null?void 0:t.length)!==void 0?t:Array.from(t)}function At(t,e){t.d(1),e.delete(t.key)}function Lt(t,e,n,i,r,o,l,s,a,u,f,c){let m=t.length,h=o.length,d=m;const v={};for(;d--;)v[t[d].key]=d;const b=[],w=new Map,E=new Map,D=[];for(d=h;d--;){const L=c(r,o,d),C=n(L);let y=l.get(C);y?D.push(()=>y.p(L,e)):(y=u(C,L),y.c()),w.set(C,b[d]=y),C in v&&E.set(C,Math.abs(d-v[C]))}const p=new Set,A=new Set;function k(L){We(L,1),L.m(s,f),l.set(L.key,L),f=L.first,h--}for(;m&&h;){const L=b[h-1],C=t[m-1],y=L.key,T=C.key;L===C?(f=L.first,m--,h--):w.has(T)?!l.has(y)||p.has(y)?k(L):A.has(T)?m--:E.get(y)>E.get(T)?(A.add(y),k(L)):(p.add(T),m--):(a(C,l),m--)}for(;m--;){const L=t[m];w.has(L.key)||a(L,l)}for(;h;)k(b[h-1]);return at(D),b}function bi(t,e){const n={},i={},r={$$scope:1};let o=t.length;for(;o--;){const l=t[o],s=e[o];if(s){for(const a in l)a in s||(i[a]=1);for(const a in s)r[a]||(n[a]=s[a],r[a]=1);t[o]=s}else for(const a in l)r[a]=1}for(const l in i)l in n||(n[l]=void 0);return n}function Dt(t){t&&t.c()}function gt(t,e,n){const{fragment:i,after_update:r}=t.$$;i&&i.m(e,n),pn(()=>{const o=t.$$.on_mount.map(Mo).filter(fi);t.$$.on_destroy?t.$$.on_destroy.push(...o):at(o),t.$$.on_mount=[]}),r.forEach(pn)}function vt(t,e){const n=t.$$;n.fragment!==null&&(Wu(n.after_update),at(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function qu(t,e){t.$$.dirty[0]===-1&&(fn.push(t),Zo(),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function Ge(t,e,n,i,r,o,l=null,s=[-1]){const a=xn;Hn(t);const u=t.$$={fragment:null,ctx:[],props:o,update:Ie,not_equal:r,bound:No(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(a?a.$$.context:[])),callbacks:No(),dirty:s,skip_bound:!1,root:e.target||a.$$.root};l&&l(u.root);let f=!1;if(u.ctx=n?n(t,e.props||{},(c,m,...h)=>{const d=h.length?h[0]:m;return u.ctx&&r(u.ctx[c],u.ctx[c]=d)&&(!u.skip_bound&&u.bound[c]&&u.bound[c](d),f&&qu(t,c)),m}):[],u.update(),f=!0,at(u.before_update),u.fragment=i?i(u.ctx):!1,e.target){if(e.hydrate){const c=Pu(e.target);u.fragment&&u.fragment.l(c),c.forEach(X)}else u.fragment&&u.fragment.c();e.intro&&We(t.$$.fragment),gt(t,e.target,e.anchor),Ko()}Hn(a)}class Ve{constructor(){Nr(this,"$$");Nr(this,"$$set")}$destroy(){vt(this,1),this.$destroy=Ie}$on(e,n){if(!fi(n))return Ie;const i=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return i.push(n),()=>{const r=i.indexOf(n);r!==-1&&i.splice(r,1)}}$set(e){this.$$set&&!Su(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}const Gu="4",hn=[];function jt(t,e=Ie){let n;const i=new Set;function r(s){if(Ne(t,s)&&(t=s,n)){const a=!hn.length;for(const u of i)u[1](),hn.push(u,t);if(a){for(let u=0;u<hn.length;u+=2)hn[u][0](hn[u+1]);hn.length=0}}}function o(s){r(s(t))}function l(s,a=Ie){const u=[s,a];return i.add(u),i.size===1&&(n=e(r,o)||Ie),s(t),()=>{i.delete(u),i.size===0&&n&&(n(),n=null)}}return{set:r,update:o,subscribe:l}}const ur=jt({}),q={setTranslations(t){ur.set(t)},has(t,e,n){let i=!1;return ur.subscribe(r=>{if(n in r&&e in r[n]&&t in r[n][e]){i=!0;return}})(),i},get(t,e,n){let i=n;return ur.subscribe(r=>{if(t in r&&e in r[t]&&n in r[t][e]){i=r[t][e][n];return}if(t in r&&e in r[t]&&n in r[t][e]){i=r[t][e][n];return}if(t=="Global"){i=n;return}i=null})(),i},translate(t,e=null,n=null){n=n||"Global",e=e||"labels";let i=q.get(n,e,t);return i===null&&n!="Global"&&(i=q.get("Global",e,t)),i},translateOption(t,e,n=null){let i=q.translate(e,"options",n);return i===null?"":typeof i=="object"?i[t]:t}},ta=jt({}),yi={set(t){ta.set(t)},get(){let t=null;return ta.subscribe(e=>{e&&(t=e)})(),t}},fr=jt(),tt={setNotifier(t){fr.set(t)},notify(t,e=null,n=2e3){fr.subscribe(i=>{i&&i.notify(t,e,2e3)})()},confirm(t=null,e=null,n){fr.subscribe(i=>{if(i){let r=null,o=null,l=null;typeof t=="string"||t instanceof String?(o=t,l=q.translate("Yes")):(t=t||{},o=t.message,l=t.confirmText,r=t.confirmStyle||null),i.confirm(o,{confirmText:l,cancelText:q.translate("Cancel"),confirmStyle:r},e,n)}})()}},wi=jt(),It={setLayoutManager(t){wi.set(t)},resetToDefault(t,e,n,i,r){let o=null;return wi.subscribe(l=>{l&&(o=l.resetToDefault(t,e,n,i,r))})(),o},get:function(t,e,n,i,r,o){let l=null;return wi.subscribe(s=>{s&&(l=s.get(t,e,n,i,r,o))})(),l},set:function(t,e,n,i,r,o){let l=null;return wi.subscribe(s=>{s&&(l=s.set(t,e,n,i,r,o))})(),l}},na=jt(),de={setMetadata(t){na.set(t)},get(t){let e=null;return na.subscribe(n=>{n&&(e=n.get(t))})(),e}},ia=jt(),cr={setModelFactory(t){ia.set(t)},create(t,e){ia.subscribe(n=>{n&&n.create(t,e)})()}},ra=jt(),oa={setConfig(t){ra.set(t)},get(t){let e=null;return ra.subscribe(n=>{n&&(e=n.get(t))})(),e}},jn=jt(),_e={setStorage(t){jn.set(t)},get(t,e){let n=null;return jn.subscribe(i=>{i&&(n=i.get(t,e))})(),n},has(t,e){let n=null;return jn.subscribe(i=>{i&&(n=i.has(t,e))})(),n},clear(t,e){jn.subscribe(n=>{n&&n.clear(t,e)})()},set(t,e,n){jn.subscribe(i=>{i&&i.set(t,e,n)})()}};typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(Gu);function aa(t){let e,n,i,r,o,l,s,a,u,f,c,m,h,d,v;function b(D,p){return D[2]?Uu:Vu}let w=b(t),E=w(t);return{c(){e=S("div"),n=S("div"),i=S("div"),r=S("span"),r.textContent=`${q.translate("jobManager")}`,o=z(),l=S("span"),s=S("a"),s.innerHTML='<span aria-hidden="true">×</span>',a=z(),E.c(),u=z(),f=S("a"),f.textContent=`${q.translate("View List")}`,c=z(),m=S("div"),h=S("div"),h.textContent=`${q.translate("Loading...")}`,g(r,"class","panel-heading-title"),g(s,"href","/"),g(s,"class","close svelte-1p6ppx8"),g(f,"href","#Job"),g(f,"title",q.translate("View List")),g(f,"class","qp-view-list svelte-1p6ppx8"),g(l,"class","pull-right"),g(i,"class","panel-heading clearfix"),g(h,"class","list-container"),g(m,"class","panel-body"),g(n,"class","panel panel-default"),g(e,"class","queue-panel-container")},m(D,p){Y(D,e,p),_(e,n),_(n,i),_(i,r),_(i,o),_(i,l),_(l,s),_(l,a),E.m(l,null),_(l,u),_(l,f),_(n,c),_(n,m),_(m,h),t[9](e),d||(v=ce(s,"click",t[6]),d=!0)},p(D,p){w===(w=b(D))&&E?E.p(D,p):(E.d(1),E=w(D),E&&(E.c(),E.m(l,u)))},d(D){D&&X(e),E.d(),t[9](null),d=!1,v()}}}function Vu(t){let e,n,i;return{c(){e=S("a"),e.textContent=`${q.translate("Pause")}`,g(e,"href","/"),g(e,"title",q.translate("Pause")),g(e,"class","qm-button")},m(r,o){Y(r,e,o),n||(i=ce(e,"click",t[8]),n=!0)},p:Ie,d(r){r&&X(e),n=!1,i()}}}function Uu(t){let e,n,i;return{c(){e=S("a"),e.textContent=`${q.translate("Start")}`,g(e,"href","/"),g(e,"title",q.translate("Start")),g(e,"class","qm-button")},m(r,o){Y(r,e,o),n||(i=ce(e,"click",t[7]),n=!0)},p:Ie,d(r){r&&X(e),n=!1,i()}}}function Xu(t){let e,n=t[0]&&aa(t);return{c(){n&&n.c(),e=pi()},m(i,r){n&&n.m(i,r),Y(i,e,r)},p(i,[r]){i[0]?n?n.p(i,r):(n=aa(i),n.c(),n.m(e.parentNode,e)):n&&(n.d(1),n=null)},i:Ie,o:Ie,d(i){i&&X(e),n&&n.d(i)}}}function Yu(t,e,n){let{isOpen:i=!1}=e,{close:r}=e,{icon:o}=e,l=!1;window.addEventListener("publicDataFetched",d=>{n(2,l=!!d.detail.qmPaused)});let s;function a(d){s&&!s.contains(d.target)&&o&&!o.contains(d.target)&&i===!0&&r()}un(()=>{document.addEventListener("click",a)}),rr(()=>{document.removeEventListener("click",a)});async function u(d){let v=yi.get();if(v)try{const b=await fetch("/api/v1/App/action/QueueManagerUpdate",{method:"POST",headers:{"Content-Type":"application/json","Authorization-Token":btoa(v.user.userName+":"+v.token)},body:JSON.stringify({pause:d})});if(!b.ok)throw new Error("Network response was not ok");await b.json(),tt.notify("Done","success")}catch(b){console.error("Error:",b)}}const f=d=>{d.preventDefault(),r()},c=d=>{d.preventDefault(),u(!1)},m=d=>{d.preventDefault(),u(!0)};function h(d){qe[d?"unshift":"push"](()=>{s=d,n(3,s)})}return t.$$set=d=>{"isOpen"in d&&n(0,i=d.isOpen),"close"in d&&n(1,r=d.close),"icon"in d&&n(5,o=d.icon)},[i,r,l,s,u,o,f,c,m,h]}class Ju extends Ve{constructor(e){super(),Ge(this,e,Yu,Xu,Ne,{isOpen:0,close:1,icon:5})}}function la(t){let e;return{c(){e=S("span"),g(e,"class","fas fa-pause-circle pause-icon")},m(n,i){Y(n,e,i)},d(n){n&&X(e)}}}function Zu(t){let e,n,i,r,o,l,s,a,u=t[2]&&la();return o=new Ju({props:{icon:t[0],isOpen:t[1],close:t[4]}}),{c(){e=S("a"),n=S("span"),i=z(),u&&u.c(),r=z(),Dt(o.$$.fragment),g(n,"class","fas fa-tasks"),g(e,"href","/"),g(e,"class","notifications-button"),g(e,"title",q.translate("jobManager"))},m(f,c){Y(f,e,c),_(e,n),_(e,i),u&&u.m(e,null),t[6](e),Y(f,r,c),gt(o,f,c),l=!0,s||(a=ce(e,"click",t[7]),s=!0)},p(f,[c]){f[2]?u||(u=la(),u.c(),u.m(e,null)):u&&(u.d(1),u=null);const m={};c&1&&(m.icon=f[0]),c&2&&(m.isOpen=f[1]),o.$set(m)},i(f){l||(We(o.$$.fragment,f),l=!0)},o(f){Ye(o.$$.fragment,f),l=!1},d(f){f&&(X(e),X(r)),u&&u.d(),t[6](null),vt(o,f),s=!1,a()}}}function Ku(t,e,n){let{renderTable:i=()=>{}}=e,r,o=!1,l=!1;window.addEventListener("publicDataFetched",c=>{n(2,l=!!c.detail.qmPaused)});function s(){o||(n(1,o=!0),i())}function a(){n(1,o=!1),window.dispatchEvent(new Event("jobManagerPanelClosed"))}function u(c){qe[c?"unshift":"push"](()=>{r=c,n(0,r)})}const f=c=>{c.preventDefault(),s()};return t.$$set=c=>{"renderTable"in c&&n(5,i=c.renderTable)},[r,o,l,s,a,i,u,f]}class Qu extends Ve{constructor(e){super(),Ge(this,e,Ku,Zu,Ne,{renderTable:5})}}function $u(t){let e,n=`${t[0]}px`,i=`${t[0]}px`,r=`${t[1]}px`;return{c(){e=S("div"),g(e,"class","loading-icon spinner svelte-yw8t7l"),se(e,"width",n),se(e,"height",i),se(e,"border-width",r)},m(o,l){Y(o,e,l)},p(o,[l]){l&1&&n!==(n=`${o[0]}px`)&&se(e,"width",n),l&1&&i!==(i=`${o[0]}px`)&&se(e,"height",i),l&2&&r!==(r=`${o[1]}px`)&&se(e,"border-width",r)},i:Ie,o:Ie,d(o){o&&X(e)}}}function ef(t,e,n){let{size:i=40}=e,{thickness:r=4}=e;return t.$$set=o=>{"size"in o&&n(0,i=o.size),"thickness"in o&&n(1,r=o.thickness)},[i,r]}class tf extends Ve{constructor(e){super(),Ge(this,e,ef,$u,Ne,{size:0,thickness:1})}}function sa(t){let e,n;return{c(){e=S("img"),di(e.src,n=t[1])||g(e,"src",n),g(e,"class","logo"),g(e,"alt",t[0])},m(i,r){Y(i,e,r)},p(i,r){r&2&&!di(e.src,n=i[1])&&g(e,"src",n),r&1&&g(e,"alt",i[0])},d(i){i&&X(e)}}}function ua(t){let e,n,i;return{c(){e=S("a"),n=S("i"),i=Ce("Recovery Instructions"),g(n,"class","fa fa-history svelte-1qmezxs"),g(e,"href",t[2]),g(e,"target","_blank"),g(e,"class","btn btn-default svelte-1qmezxs"),g(e,"role","button"),se(e,"float","right")},m(r,o){Y(r,e,o),_(e,n),_(e,i)},p(r,o){o&4&&g(e,"href",r[2])},d(r){r&&X(e)}}}function fa(t){let e,n,i,r,o,l;return{c(){e=S("hr"),n=z(),i=S("pre"),r=Ce(t[3]),g(i,"class","logs-container svelte-1qmezxs")},m(s,a){Y(s,e,a),Y(s,n,a),Y(s,i,a),_(i,r),t[11](i),o||(l=ce(i,"scroll",t[8]),o=!0)},p(s,a){a&8&&xe(r,s[3])},d(s){s&&(X(e),X(n),X(i)),t[11](null),o=!1,l()}}}function nf(t){let e,n,i,r,o,l,s,a,u,f,c,m,h,d,v,b,w,E,D=t[4]?"Hide":"Show",p,A,k,L,C,y,T,I,M=t[1]&&sa(t);f=new tf({props:{size:"40",thickness:"5"}});let x=t[2]&&ua(t),H=t[4]&&t[3]&&fa(t);return{c(){e=S("div"),n=S("div"),i=S("div"),M&&M.c(),r=z(),o=S("div"),l=S("div"),s=S("h3"),s.textContent="System is updating...",a=z(),u=S("section"),Dt(f.$$.fragment),c=z(),m=S("h5"),h=Ce(t[5]),d=z(),v=S("section"),b=S("div"),w=S("button"),E=S("i"),p=Ce(D),A=Ce(" logs"),L=z(),x&&x.c(),C=z(),H&&H.c(),g(i,"class","logo-container"),g(n,"class","panel-heading"),g(m,"class","svelte-1qmezxs"),g(u,"class","progress-section svelte-1qmezxs"),g(E,"class","fa fa-list svelte-1qmezxs"),g(w,"class","btn btn-default svelte-1qmezxs"),w.disabled=k=!t[3],g(b,"class","buttons"),g(v,"class","logs-section"),g(l,"class","form-group"),g(o,"class","panel-body"),g(e,"id","login"),g(e,"class","panel panel-default panel-updating")},m(P,W){Y(P,e,W),_(e,n),_(n,i),M&&M.m(i,null),_(e,r),_(e,o),_(o,l),_(l,s),_(l,a),_(l,u),gt(f,u,null),_(u,c),_(u,m),_(m,h),_(l,d),_(l,v),_(v,b),_(b,w),_(w,E),_(w,p),_(w,A),_(b,L),x&&x.m(b,null),_(v,C),H&&H.m(v,null),y=!0,T||(I=ce(w,"click",t[7]),T=!0)},p(P,[W]){P[1]?M?M.p(P,W):(M=sa(P),M.c(),M.m(i,null)):M&&(M.d(1),M=null),(!y||W&32)&&xe(h,P[5]),(!y||W&16)&&D!==(D=P[4]?"Hide":"Show")&&xe(p,D),(!y||W&8&&k!==(k=!P[3]))&&(w.disabled=k),P[2]?x?x.p(P,W):(x=ua(P),x.c(),x.m(b,null)):x&&(x.d(1),x=null),P[4]&&P[3]?H?H.p(P,W):(H=fa(P),H.c(),H.m(v,null)):H&&(H.d(1),H=null)},i(P){y||(We(f.$$.fragment,P),y=!0)},o(P){Ye(f.$$.fragment,P),y=!1},d(P){P&&X(e),M&&M.d(),vt(f),x&&x.d(),H&&H.d(),T=!1,I()}}}function rf(t){return t.replace(/^\d{2,4}.\d{2}.\d{2,4} \d{2}:\d{2}:\d{2}/g,"").replace(/^[\-\|\s]+/,"")}function of(t,e,n){let{applicationName:i="AtroCore"}=e,{logoPath:r=null}=e,{logFilePath:o}=e,{restoreLink:l=null}=e,s=!1,a=!1,u=0,f=!0,c="",m,h;xu(()=>{h&&f&&h.scrollTo(0,h.scrollHeight)});function d(){n(4,s=!s),s||(f=!0)}function v(w){const E=w.currentTarget;f=E.scrollHeight-E.scrollTop===E.clientHeight}setInterval(async()=>{try{const w=await fetch(o,{cache:"no-store"});u+=1,w.ok?(n(3,c=(await w.text()).trim()),c.search("composer")>=0&&n(10,a=!0),u>65&&!a&&n(3,c="Something wrong. Please, reboot the server.")):a?setTimeout(()=>{location.reload()},2e3):u>65&&n(3,c="Something wrong. Please, reboot the server.")}catch(w){console.error("Error: ",w)}},1e3);function b(w){qe[w?"unshift":"push"](()=>{h=w,n(6,h)})}return t.$$set=w=>{"applicationName"in w&&n(0,i=w.applicationName),"logoPath"in w&&n(1,r=w.logoPath),"logFilePath"in w&&n(9,o=w.logFilePath),"restoreLink"in w&&n(2,l=w.restoreLink)},t.$$.update=()=>{if(t.$$.dirty&1032)if(c){const w=c.trim().split(`
`);n(5,m=rf(w.pop()))}else a?n(5,m=""):n(5,m="Starting...")},[i,r,l,c,s,m,h,d,v,o,a,b]}class af extends Ve{constructor(e){super(),Ge(this,e,of,nf,Ne,{applicationName:0,logoPath:1,logFilePath:9,restoreLink:2})}}function ca(t,e,n){const i=t.slice();return i[20]=e[n],i}function da(t){let e,n=t[20].label+"",i,r,o,l,s,a;function u(){return t[12](t[20])}return{c(){e=S("button"),i=Ce(n),r=z(),g(e,"data-action",o=t[20].name),e.disabled=t[1],g(e,"type","button"),g(e,"class",l=`btn action btn-${t[20].style??"default"}`)},m(f,c){Y(f,e,c),_(e,i),_(e,r),s||(a=ce(e,"click",u),s=!0)},p(f,c){t=f,c&1&&n!==(n=t[20].label+"")&&xe(i,n),c&1&&o!==(o=t[20].name)&&g(e,"data-action",o),c&2&&(e.disabled=t[1]),c&1&&l!==(l=`btn action btn-${t[20].style??"default"}`)&&g(e,"class",l)},d(f){f&&X(e),s=!1,a()}}}function lf(t){let e,n,i,r=De(t[0]),o=[];for(let a=0;a<r.length;a+=1)o[a]=da(ca(t,r,a));const l=t[11].default,s=Ro(l,t,t[10],null);return{c(){e=S("div");for(let a=0;a<o.length;a+=1)o[a].c();n=z(),s&&s.c(),g(e,"class","button-container"),se(e,"padding-top","10px")},m(a,u){Y(a,e,u);for(let f=0;f<o.length;f+=1)o[f]&&o[f].m(e,null);t[13](e),Y(a,n,u),s&&s.m(a,u),i=!0},p(a,[u]){if(u&11){r=De(a[0]);let f;for(f=0;f<r.length;f+=1){const c=ca(a,r,f);o[f]?o[f].p(c,u):(o[f]=da(c),o[f].c(),o[f].m(e,null))}for(;f<o.length;f+=1)o[f].d(1);o.length=r.length}s&&s.p&&(!i||u&1024)&&xo(s,l,a,a[10],i?Fo(l,a[10],u,null):Ho(a[10]),null)},i(a){i||(We(s,a),i=!0)},o(a){Ye(s,a),i=!1},d(a){a&&(X(e),X(n)),sn(o,a),t[13](null),s&&s.d(a)}}}function sf(t,e,n){let{$$slots:i={},$$scope:r}=e;const o=or();let{params:l}=e,{fetch:s}=e,a,{loadLayout:u=k=>{It.get(scope,type,layoutProfileId,k,!1)}}=e,{validate:f=()=>!0}=e,c=!1,m=[],h;l.layoutProfiles,un(async()=>{var L;await d(),await dn(),o("ready");const k=document.querySelector("#layout-buttons");h&&k&&(l.inModal||l.replaceButtons)&&((L=k.closest(".modal-body"))==null||L.classList.add("modal-layout-manager"),k.appendChild(h))});async function d(){return tt.notify("Loading..."),new Promise((k,L)=>{u(C=>{n(9,a=C),tt.notify(!1),k(),l.afterRender&&l.afterRender()})})}function v(){n(1,c=!0);const k=s();if(!f(k)){n(1,c=!1);return}if(tt.notify("Saving..."),l.inModal&&!l.getActiveLayoutProfileId()){b(!0);return}It.set(l.scope,l.type,l.relatedScope,l.layoutProfileId,k,()=>{tt.notify("Saved","success",2e3),b(!1),n(1,c=!1),l.inModal||d()})}function b(k){l.onUpdate&&l.onUpdate(k)}function w(){l.inModal||d()}function E(){tt.confirm("Are you sure you want to reset this layout?",()=>{var k;It.resetToDefault(l.scope,l.type,l.relatedScope,(k=a.storedProfile)==null?void 0:k.id,()=>{b(!0),w()})})}function D(k){switch(k.name){case"save":v();break;case"cancel":w();break;case"reset":E();break;case"fullEdit":window.open(`#Admin/layouts/scope=${l.scope}&type=${l.type}${l.relatedScope?"&relatedScope="+l.relatedScope:""}${l.layoutProfileId?"&layoutProfileId="+l.layoutProfileId:""}`,"_blank");break}}const p=k=>D(k);function A(k){qe[k?"unshift":"push"](()=>{h=k,n(2,h)})}return t.$$set=k=>{"params"in k&&n(4,l=k.params),"fetch"in k&&n(5,s=k.fetch),"loadLayout"in k&&n(6,u=k.loadLayout),"validate"in k&&n(7,f=k.validate),"$$scope"in k&&n(10,r=k.$$scope)},t.$$.update=()=>{if(t.$$.dirty&529){if(n(0,m=[{name:"cancel",label:q.translate("Cancel","labels")}]),l.inModal){let k=yi.get();k&&k.user&&k.user.isAdmin&&m.unshift({name:"fullEdit",label:q.translate("Full Edit","labels","LayoutManager")})}(!l.inModal||a!=null&&a.canEdit)&&m.unshift({name:"save",label:q.translate("Save","labels"),style:"primary"}),a&&a.storedProfile&&a.storedProfile.id===l.layoutProfileId&&a.canEdit&&m.push({name:"reset",label:q.translate("reset","labels","LayoutManager")})}},[m,c,h,D,l,s,u,f,v,a,r,i,p,A]}let pa=class extends Ve{constructor(e){super(),Ge(this,e,sf,lf,Ne,{params:4,fetch:5,loadLayout:6,validate:7,save:8})}get save(){return this.$$.ctx[8]}};/**!
 * Sortable 1.15.6
 * @author	RubaXa   <trash@rubaxa.org>
 * @author	owenm    <owen23355@gmail.com>
 * @license MIT
 */function ma(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),n.push.apply(n,i)}return n}function St(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?ma(Object(n),!0).forEach(function(i){uf(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ma(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function _i(t){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?_i=function(e){return typeof e}:_i=function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_i(t)}function uf(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Pt(){return Pt=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},Pt.apply(this,arguments)}function ff(t,e){if(t==null)return{};var n={},i=Object.keys(t),r,o;for(o=0;o<i.length;o++)r=i[o],!(e.indexOf(r)>=0)&&(n[r]=t[r]);return n}function cf(t,e){if(t==null)return{};var n=ff(t,e),i,r;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(r=0;r<o.length;r++)i=o[r],!(e.indexOf(i)>=0)&&Object.prototype.propertyIsEnumerable.call(t,i)&&(n[i]=t[i])}return n}var df="1.15.6";function Mt(t){if(typeof window<"u"&&window.navigator)return!!navigator.userAgent.match(t)}var Nt=Mt(/(?:Trident.*rv[ :]?11\.|msie|iemobile|Windows Phone)/i),zn=Mt(/Edge/i),ha=Mt(/firefox/i),qn=Mt(/safari/i)&&!Mt(/chrome/i)&&!Mt(/android/i),dr=Mt(/iP(ad|od|hone)/i),ga=Mt(/chrome/i)&&Mt(/android/i),va={capture:!1,passive:!1};function ye(t,e,n){t.addEventListener(e,n,!Nt&&va)}function be(t,e,n){t.removeEventListener(e,n,!Nt&&va)}function Ei(t,e){if(e){if(e[0]===">"&&(e=e.substring(1)),t)try{if(t.matches)return t.matches(e);if(t.msMatchesSelector)return t.msMatchesSelector(e);if(t.webkitMatchesSelector)return t.webkitMatchesSelector(e)}catch{return!1}return!1}}function ba(t){return t.host&&t!==document&&t.host.nodeType?t.host:t.parentNode}function bt(t,e,n,i){if(t){n=n||document;do{if(e!=null&&(e[0]===">"?t.parentNode===n&&Ei(t,e):Ei(t,e))||i&&t===n)return t;if(t===n)break}while(t=ba(t))}return null}var ya=/\s+/g;function lt(t,e,n){if(t&&e)if(t.classList)t.classList[n?"add":"remove"](e);else{var i=(" "+t.className+" ").replace(ya," ").replace(" "+e+" "," ");t.className=(i+(n?" "+e:"")).replace(ya," ")}}function oe(t,e,n){var i=t&&t.style;if(i){if(n===void 0)return document.defaultView&&document.defaultView.getComputedStyle?n=document.defaultView.getComputedStyle(t,""):t.currentStyle&&(n=t.currentStyle),e===void 0?n:n[e];!(e in i)&&e.indexOf("webkit")===-1&&(e="-webkit-"+e),i[e]=n+(typeof n=="string"?"":"px")}}function gn(t,e){var n="";if(typeof t=="string")n=t;else do{var i=oe(t,"transform");i&&i!=="none"&&(n=i+" "+n)}while(!e&&(t=t.parentNode));var r=window.DOMMatrix||window.WebKitCSSMatrix||window.CSSMatrix||window.MSCSSMatrix;return r&&new r(n)}function wa(t,e,n){if(t){var i=t.getElementsByTagName(e),r=0,o=i.length;if(n)for(;r<o;r++)n(i[r],r);return i}return[]}function Ct(){var t=document.scrollingElement;return t||document.documentElement}function Re(t,e,n,i,r){if(!(!t.getBoundingClientRect&&t!==window)){var o,l,s,a,u,f,c;if(t!==window&&t.parentNode&&t!==Ct()?(o=t.getBoundingClientRect(),l=o.top,s=o.left,a=o.bottom,u=o.right,f=o.height,c=o.width):(l=0,s=0,a=window.innerHeight,u=window.innerWidth,f=window.innerHeight,c=window.innerWidth),(e||n)&&t!==window&&(r=r||t.parentNode,!Nt))do if(r&&r.getBoundingClientRect&&(oe(r,"transform")!=="none"||n&&oe(r,"position")!=="static")){var m=r.getBoundingClientRect();l-=m.top+parseInt(oe(r,"border-top-width")),s-=m.left+parseInt(oe(r,"border-left-width")),a=l+o.height,u=s+o.width;break}while(r=r.parentNode);if(i&&t!==window){var h=gn(r||t),d=h&&h.a,v=h&&h.d;h&&(l/=v,s/=d,c/=d,f/=v,a=l+f,u=s+c)}return{top:l,left:s,bottom:a,right:u,width:c,height:f}}}function _a(t,e,n){for(var i=zt(t,!0),r=Re(t)[e];i;){var o=Re(i)[n],l=void 0;if(l=r>=o,!l)return i;if(i===Ct())break;i=zt(i,!1)}return!1}function vn(t,e,n,i){for(var r=0,o=0,l=t.children;o<l.length;){if(l[o].style.display!=="none"&&l[o]!==ne.ghost&&(i||l[o]!==ne.dragged)&&bt(l[o],n.draggable,t,!1)){if(r===e)return l[o];r++}o++}return null}function pr(t,e){for(var n=t.lastElementChild;n&&(n===ne.ghost||oe(n,"display")==="none"||e&&!Ei(n,e));)n=n.previousElementSibling;return n||null}function pt(t,e){var n=0;if(!t||!t.parentNode)return-1;for(;t=t.previousElementSibling;)t.nodeName.toUpperCase()!=="TEMPLATE"&&t!==ne.clone&&(!e||Ei(t,e))&&n++;return n}function Ea(t){var e=0,n=0,i=Ct();if(t)do{var r=gn(t),o=r.a,l=r.d;e+=t.scrollLeft*o,n+=t.scrollTop*l}while(t!==i&&(t=t.parentNode));return[e,n]}function pf(t,e){for(var n in t)if(t.hasOwnProperty(n)){for(var i in e)if(e.hasOwnProperty(i)&&e[i]===t[n][i])return Number(n)}return-1}function zt(t,e){if(!t||!t.getBoundingClientRect)return Ct();var n=t,i=!1;do if(n.clientWidth<n.scrollWidth||n.clientHeight<n.scrollHeight){var r=oe(n);if(n.clientWidth<n.scrollWidth&&(r.overflowX=="auto"||r.overflowX=="scroll")||n.clientHeight<n.scrollHeight&&(r.overflowY=="auto"||r.overflowY=="scroll")){if(!n.getBoundingClientRect||n===document.body)return Ct();if(i||e)return n;i=!0}}while(n=n.parentNode);return Ct()}function mf(t,e){if(t&&e)for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t}function mr(t,e){return Math.round(t.top)===Math.round(e.top)&&Math.round(t.left)===Math.round(e.left)&&Math.round(t.height)===Math.round(e.height)&&Math.round(t.width)===Math.round(e.width)}var Gn;function ka(t,e){return function(){if(!Gn){var n=arguments,i=this;n.length===1?t.call(i,n[0]):t.apply(i,n),Gn=setTimeout(function(){Gn=void 0},e)}}}function hf(){clearTimeout(Gn),Gn=void 0}function Da(t,e,n){t.scrollLeft+=e,t.scrollTop+=n}function Sa(t){var e=window.Polymer,n=window.jQuery||window.Zepto;return e&&e.dom?e.dom(t).cloneNode(!0):n?n(t).clone(!0)[0]:t.cloneNode(!0)}function Ca(t,e,n){var i={};return Array.from(t.children).forEach(function(r){var o,l,s,a;if(!(!bt(r,e.draggable,t,!1)||r.animated||r===n)){var u=Re(r);i.left=Math.min((o=i.left)!==null&&o!==void 0?o:1/0,u.left),i.top=Math.min((l=i.top)!==null&&l!==void 0?l:1/0,u.top),i.right=Math.max((s=i.right)!==null&&s!==void 0?s:-1/0,u.right),i.bottom=Math.max((a=i.bottom)!==null&&a!==void 0?a:-1/0,u.bottom)}}),i.width=i.right-i.left,i.height=i.bottom-i.top,i.x=i.left,i.y=i.top,i}var nt="Sortable"+new Date().getTime();function gf(){var t=[],e;return{captureAnimationState:function(){if(t=[],!!this.options.animation){var i=[].slice.call(this.el.children);i.forEach(function(r){if(!(oe(r,"display")==="none"||r===ne.ghost)){t.push({target:r,rect:Re(r)});var o=St({},t[t.length-1].rect);if(r.thisAnimationDuration){var l=gn(r,!0);l&&(o.top-=l.f,o.left-=l.e)}r.fromRect=o}})}},addAnimationState:function(i){t.push(i)},removeAnimationState:function(i){t.splice(pf(t,{target:i}),1)},animateAll:function(i){var r=this;if(!this.options.animation){clearTimeout(e),typeof i=="function"&&i();return}var o=!1,l=0;t.forEach(function(s){var a=0,u=s.target,f=u.fromRect,c=Re(u),m=u.prevFromRect,h=u.prevToRect,d=s.rect,v=gn(u,!0);v&&(c.top-=v.f,c.left-=v.e),u.toRect=c,u.thisAnimationDuration&&mr(m,c)&&!mr(f,c)&&(d.top-c.top)/(d.left-c.left)===(f.top-c.top)/(f.left-c.left)&&(a=bf(d,m,h,r.options)),mr(c,f)||(u.prevFromRect=f,u.prevToRect=c,a||(a=r.options.animation),r.animate(u,d,c,a)),a&&(o=!0,l=Math.max(l,a),clearTimeout(u.animationResetTimer),u.animationResetTimer=setTimeout(function(){u.animationTime=0,u.prevFromRect=null,u.fromRect=null,u.prevToRect=null,u.thisAnimationDuration=null},a),u.thisAnimationDuration=a)}),clearTimeout(e),o?e=setTimeout(function(){typeof i=="function"&&i()},l):typeof i=="function"&&i(),t=[]},animate:function(i,r,o,l){if(l){oe(i,"transition",""),oe(i,"transform","");var s=gn(this.el),a=s&&s.a,u=s&&s.d,f=(r.left-o.left)/(a||1),c=(r.top-o.top)/(u||1);i.animatingX=!!f,i.animatingY=!!c,oe(i,"transform","translate3d("+f+"px,"+c+"px,0)"),this.forRepaintDummy=vf(i),oe(i,"transition","transform "+l+"ms"+(this.options.easing?" "+this.options.easing:"")),oe(i,"transform","translate3d(0,0,0)"),typeof i.animated=="number"&&clearTimeout(i.animated),i.animated=setTimeout(function(){oe(i,"transition",""),oe(i,"transform",""),i.animated=!1,i.animatingX=!1,i.animatingY=!1},l)}}}}function vf(t){return t.offsetWidth}function bf(t,e,n,i){return Math.sqrt(Math.pow(e.top-t.top,2)+Math.pow(e.left-t.left,2))/Math.sqrt(Math.pow(e.top-n.top,2)+Math.pow(e.left-n.left,2))*i.animation}var bn=[],hr={initializeByDefault:!0},Vn={mount:function(e){for(var n in hr)hr.hasOwnProperty(n)&&!(n in e)&&(e[n]=hr[n]);bn.forEach(function(i){if(i.pluginName===e.pluginName)throw"Sortable: Cannot mount plugin ".concat(e.pluginName," more than once")}),bn.push(e)},pluginEvent:function(e,n,i){var r=this;this.eventCanceled=!1,i.cancel=function(){r.eventCanceled=!0};var o=e+"Global";bn.forEach(function(l){n[l.pluginName]&&(n[l.pluginName][o]&&n[l.pluginName][o](St({sortable:n},i)),n.options[l.pluginName]&&n[l.pluginName][e]&&n[l.pluginName][e](St({sortable:n},i)))})},initializePlugins:function(e,n,i,r){bn.forEach(function(s){var a=s.pluginName;if(!(!e.options[a]&&!s.initializeByDefault)){var u=new s(e,n,e.options);u.sortable=e,u.options=e.options,e[a]=u,Pt(i,u.defaults)}});for(var o in e.options)if(e.options.hasOwnProperty(o)){var l=this.modifyOption(e,o,e.options[o]);typeof l<"u"&&(e.options[o]=l)}},getEventProperties:function(e,n){var i={};return bn.forEach(function(r){typeof r.eventProperties=="function"&&Pt(i,r.eventProperties.call(n[r.pluginName],e))}),i},modifyOption:function(e,n,i){var r;return bn.forEach(function(o){e[o.pluginName]&&o.optionListeners&&typeof o.optionListeners[n]=="function"&&(r=o.optionListeners[n].call(e[o.pluginName],i))}),r}};function yf(t){var e=t.sortable,n=t.rootEl,i=t.name,r=t.targetEl,o=t.cloneEl,l=t.toEl,s=t.fromEl,a=t.oldIndex,u=t.newIndex,f=t.oldDraggableIndex,c=t.newDraggableIndex,m=t.originalEvent,h=t.putSortable,d=t.extraEventProperties;if(e=e||n&&n[nt],!!e){var v,b=e.options,w="on"+i.charAt(0).toUpperCase()+i.substr(1);window.CustomEvent&&!Nt&&!zn?v=new CustomEvent(i,{bubbles:!0,cancelable:!0}):(v=document.createEvent("Event"),v.initEvent(i,!0,!0)),v.to=l||n,v.from=s||n,v.item=r||n,v.clone=o,v.oldIndex=a,v.newIndex=u,v.oldDraggableIndex=f,v.newDraggableIndex=c,v.originalEvent=m,v.pullMode=h?h.lastPutMode:void 0;var E=St(St({},d),Vn.getEventProperties(i,e));for(var D in E)v[D]=E[D];n&&n.dispatchEvent(v),b[w]&&b[w].call(e,v)}}var wf=["evt"],it=function(e,n){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},r=i.evt,o=cf(i,wf);Vn.pluginEvent.bind(ne)(e,n,St({dragEl:G,parentEl:Pe,ghostEl:ue,rootEl:Oe,nextEl:Jt,lastDownEl:ki,cloneEl:Le,cloneHidden:qt,dragStarted:Xn,putSortable:Ue,activeSortable:ne.active,originalEvent:r,oldIndex:yn,oldDraggableIndex:Un,newIndex:st,newDraggableIndex:Gt,hideGhostForTarget:Ma,unhideGhostForTarget:Na,cloneNowHidden:function(){qt=!0},cloneNowShown:function(){qt=!1},dispatchSortableEvent:function(s){Ke({sortable:n,name:s,originalEvent:r})}},o))};function Ke(t){yf(St({putSortable:Ue,cloneEl:Le,targetEl:G,rootEl:Oe,oldIndex:yn,oldDraggableIndex:Un,newIndex:st,newDraggableIndex:Gt},t))}var G,Pe,ue,Oe,Jt,ki,Le,qt,yn,st,Un,Gt,Di,Ue,wn=!1,Si=!1,Ci=[],Zt,yt,gr,vr,Ta,Oa,Xn,_n,Yn,Jn=!1,Ti=!1,Oi,Je,br=[],yr=!1,Ai=[],Li=typeof document<"u",Ii=dr,Aa=zn||Nt?"cssFloat":"float",_f=Li&&!ga&&!dr&&"draggable"in document.createElement("div"),La=function(){if(Li){if(Nt)return!1;var t=document.createElement("x");return t.style.cssText="pointer-events:auto",t.style.pointerEvents==="auto"}}(),Ia=function(e,n){var i=oe(e),r=parseInt(i.width)-parseInt(i.paddingLeft)-parseInt(i.paddingRight)-parseInt(i.borderLeftWidth)-parseInt(i.borderRightWidth),o=vn(e,0,n),l=vn(e,1,n),s=o&&oe(o),a=l&&oe(l),u=s&&parseInt(s.marginLeft)+parseInt(s.marginRight)+Re(o).width,f=a&&parseInt(a.marginLeft)+parseInt(a.marginRight)+Re(l).width;if(i.display==="flex")return i.flexDirection==="column"||i.flexDirection==="column-reverse"?"vertical":"horizontal";if(i.display==="grid")return i.gridTemplateColumns.split(" ").length<=1?"vertical":"horizontal";if(o&&s.float&&s.float!=="none"){var c=s.float==="left"?"left":"right";return l&&(a.clear==="both"||a.clear===c)?"vertical":"horizontal"}return o&&(s.display==="block"||s.display==="flex"||s.display==="table"||s.display==="grid"||u>=r&&i[Aa]==="none"||l&&i[Aa]==="none"&&u+f>r)?"vertical":"horizontal"},Ef=function(e,n,i){var r=i?e.left:e.top,o=i?e.right:e.bottom,l=i?e.width:e.height,s=i?n.left:n.top,a=i?n.right:n.bottom,u=i?n.width:n.height;return r===s||o===a||r+l/2===s+u/2},kf=function(e,n){var i;return Ci.some(function(r){var o=r[nt].options.emptyInsertThreshold;if(!(!o||pr(r))){var l=Re(r),s=e>=l.left-o&&e<=l.right+o,a=n>=l.top-o&&n<=l.bottom+o;if(s&&a)return i=r}}),i},Pa=function(e){function n(o,l){return function(s,a,u,f){var c=s.options.group.name&&a.options.group.name&&s.options.group.name===a.options.group.name;if(o==null&&(l||c))return!0;if(o==null||o===!1)return!1;if(l&&o==="clone")return o;if(typeof o=="function")return n(o(s,a,u,f),l)(s,a,u,f);var m=(l?s:a).options.group.name;return o===!0||typeof o=="string"&&o===m||o.join&&o.indexOf(m)>-1}}var i={},r=e.group;(!r||_i(r)!="object")&&(r={name:r}),i.name=r.name,i.checkPull=n(r.pull,!0),i.checkPut=n(r.put),i.revertClone=r.revertClone,e.group=i},Ma=function(){!La&&ue&&oe(ue,"display","none")},Na=function(){!La&&ue&&oe(ue,"display","")};Li&&!ga&&document.addEventListener("click",function(t){if(Si)return t.preventDefault(),t.stopPropagation&&t.stopPropagation(),t.stopImmediatePropagation&&t.stopImmediatePropagation(),Si=!1,!1},!0);var Kt=function(e){if(G){e=e.touches?e.touches[0]:e;var n=kf(e.clientX,e.clientY);if(n){var i={};for(var r in e)e.hasOwnProperty(r)&&(i[r]=e[r]);i.target=i.rootEl=n,i.preventDefault=void 0,i.stopPropagation=void 0,n[nt]._onDragOver(i)}}},Df=function(e){G&&G.parentNode[nt]._isOutsideThisEl(e.target)};function ne(t,e){if(!(t&&t.nodeType&&t.nodeType===1))throw"Sortable: `el` must be an HTMLElement, not ".concat({}.toString.call(t));this.el=t,this.options=e=Pt({},e),t[nt]=this;var n={group:null,sort:!0,disabled:!1,store:null,handle:null,draggable:/^[uo]l$/i.test(t.nodeName)?">li":">*",swapThreshold:1,invertSwap:!1,invertedSwapThreshold:null,removeCloneOnHide:!0,direction:function(){return Ia(t,this.options)},ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",dragClass:"sortable-drag",ignore:"a, img",filter:null,preventOnFilter:!0,animation:0,easing:null,setData:function(l,s){l.setData("Text",s.textContent)},dropBubble:!1,dragoverBubble:!1,dataIdAttr:"data-id",delay:0,delayOnTouchOnly:!1,touchStartThreshold:(Number.parseInt?Number:window).parseInt(window.devicePixelRatio,10)||1,forceFallback:!1,fallbackClass:"sortable-fallback",fallbackOnBody:!1,fallbackTolerance:0,fallbackOffset:{x:0,y:0},supportPointer:ne.supportPointer!==!1&&"PointerEvent"in window&&(!qn||dr),emptyInsertThreshold:5};Vn.initializePlugins(this,t,n);for(var i in n)!(i in e)&&(e[i]=n[i]);Pa(e);for(var r in this)r.charAt(0)==="_"&&typeof this[r]=="function"&&(this[r]=this[r].bind(this));this.nativeDraggable=e.forceFallback?!1:_f,this.nativeDraggable&&(this.options.touchStartThreshold=1),e.supportPointer?ye(t,"pointerdown",this._onTapStart):(ye(t,"mousedown",this._onTapStart),ye(t,"touchstart",this._onTapStart)),this.nativeDraggable&&(ye(t,"dragover",this),ye(t,"dragenter",this)),Ci.push(this.el),e.store&&e.store.get&&this.sort(e.store.get(this)||[]),Pt(this,gf())}ne.prototype={constructor:ne,_isOutsideThisEl:function(e){!this.el.contains(e)&&e!==this.el&&(_n=null)},_getDirection:function(e,n){return typeof this.options.direction=="function"?this.options.direction.call(this,e,n,G):this.options.direction},_onTapStart:function(e){if(e.cancelable){var n=this,i=this.el,r=this.options,o=r.preventOnFilter,l=e.type,s=e.touches&&e.touches[0]||e.pointerType&&e.pointerType==="touch"&&e,a=(s||e).target,u=e.target.shadowRoot&&(e.path&&e.path[0]||e.composedPath&&e.composedPath()[0])||a,f=r.filter;if(Pf(i),!G&&!(/mousedown|pointerdown/.test(l)&&e.button!==0||r.disabled)&&!u.isContentEditable&&!(!this.nativeDraggable&&qn&&a&&a.tagName.toUpperCase()==="SELECT")&&(a=bt(a,r.draggable,i,!1),!(a&&a.animated)&&ki!==a)){if(yn=pt(a),Un=pt(a,r.draggable),typeof f=="function"){if(f.call(this,e,a,this)){Ke({sortable:n,rootEl:u,name:"filter",targetEl:a,toEl:i,fromEl:i}),it("filter",n,{evt:e}),o&&e.preventDefault();return}}else if(f&&(f=f.split(",").some(function(c){if(c=bt(u,c.trim(),i,!1),c)return Ke({sortable:n,rootEl:c,name:"filter",targetEl:a,fromEl:i,toEl:i}),it("filter",n,{evt:e}),!0}),f)){o&&e.preventDefault();return}r.handle&&!bt(u,r.handle,i,!1)||this._prepareDragStart(e,s,a)}}},_prepareDragStart:function(e,n,i){var r=this,o=r.el,l=r.options,s=o.ownerDocument,a;if(i&&!G&&i.parentNode===o){var u=Re(i);if(Oe=o,G=i,Pe=G.parentNode,Jt=G.nextSibling,ki=i,Di=l.group,ne.dragged=G,Zt={target:G,clientX:(n||e).clientX,clientY:(n||e).clientY},Ta=Zt.clientX-u.left,Oa=Zt.clientY-u.top,this._lastX=(n||e).clientX,this._lastY=(n||e).clientY,G.style["will-change"]="all",a=function(){if(it("delayEnded",r,{evt:e}),ne.eventCanceled){r._onDrop();return}r._disableDelayedDragEvents(),!ha&&r.nativeDraggable&&(G.draggable=!0),r._triggerDragStart(e,n),Ke({sortable:r,name:"choose",originalEvent:e}),lt(G,l.chosenClass,!0)},l.ignore.split(",").forEach(function(f){wa(G,f.trim(),wr)}),ye(s,"dragover",Kt),ye(s,"mousemove",Kt),ye(s,"touchmove",Kt),l.supportPointer?(ye(s,"pointerup",r._onDrop),!this.nativeDraggable&&ye(s,"pointercancel",r._onDrop)):(ye(s,"mouseup",r._onDrop),ye(s,"touchend",r._onDrop),ye(s,"touchcancel",r._onDrop)),ha&&this.nativeDraggable&&(this.options.touchStartThreshold=4,G.draggable=!0),it("delayStart",this,{evt:e}),l.delay&&(!l.delayOnTouchOnly||n)&&(!this.nativeDraggable||!(zn||Nt))){if(ne.eventCanceled){this._onDrop();return}l.supportPointer?(ye(s,"pointerup",r._disableDelayedDrag),ye(s,"pointercancel",r._disableDelayedDrag)):(ye(s,"mouseup",r._disableDelayedDrag),ye(s,"touchend",r._disableDelayedDrag),ye(s,"touchcancel",r._disableDelayedDrag)),ye(s,"mousemove",r._delayedDragTouchMoveHandler),ye(s,"touchmove",r._delayedDragTouchMoveHandler),l.supportPointer&&ye(s,"pointermove",r._delayedDragTouchMoveHandler),r._dragStartTimer=setTimeout(a,l.delay)}else a()}},_delayedDragTouchMoveHandler:function(e){var n=e.touches?e.touches[0]:e;Math.max(Math.abs(n.clientX-this._lastX),Math.abs(n.clientY-this._lastY))>=Math.floor(this.options.touchStartThreshold/(this.nativeDraggable&&window.devicePixelRatio||1))&&this._disableDelayedDrag()},_disableDelayedDrag:function(){G&&wr(G),clearTimeout(this._dragStartTimer),this._disableDelayedDragEvents()},_disableDelayedDragEvents:function(){var e=this.el.ownerDocument;be(e,"mouseup",this._disableDelayedDrag),be(e,"touchend",this._disableDelayedDrag),be(e,"touchcancel",this._disableDelayedDrag),be(e,"pointerup",this._disableDelayedDrag),be(e,"pointercancel",this._disableDelayedDrag),be(e,"mousemove",this._delayedDragTouchMoveHandler),be(e,"touchmove",this._delayedDragTouchMoveHandler),be(e,"pointermove",this._delayedDragTouchMoveHandler)},_triggerDragStart:function(e,n){n=n||e.pointerType=="touch"&&e,!this.nativeDraggable||n?this.options.supportPointer?ye(document,"pointermove",this._onTouchMove):n?ye(document,"touchmove",this._onTouchMove):ye(document,"mousemove",this._onTouchMove):(ye(G,"dragend",this),ye(Oe,"dragstart",this._onDragStart));try{document.selection?Mi(function(){document.selection.empty()}):window.getSelection().removeAllRanges()}catch{}},_dragStarted:function(e,n){if(wn=!1,Oe&&G){it("dragStarted",this,{evt:n}),this.nativeDraggable&&ye(document,"dragover",Df);var i=this.options;!e&&lt(G,i.dragClass,!1),lt(G,i.ghostClass,!0),ne.active=this,e&&this._appendGhost(),Ke({sortable:this,name:"start",originalEvent:n})}else this._nulling()},_emulateDragOver:function(){if(yt){this._lastX=yt.clientX,this._lastY=yt.clientY,Ma();for(var e=document.elementFromPoint(yt.clientX,yt.clientY),n=e;e&&e.shadowRoot&&(e=e.shadowRoot.elementFromPoint(yt.clientX,yt.clientY),e!==n);)n=e;if(G.parentNode[nt]._isOutsideThisEl(e),n)do{if(n[nt]){var i=void 0;if(i=n[nt]._onDragOver({clientX:yt.clientX,clientY:yt.clientY,target:e,rootEl:n}),i&&!this.options.dragoverBubble)break}e=n}while(n=ba(n));Na()}},_onTouchMove:function(e){if(Zt){var n=this.options,i=n.fallbackTolerance,r=n.fallbackOffset,o=e.touches?e.touches[0]:e,l=ue&&gn(ue,!0),s=ue&&l&&l.a,a=ue&&l&&l.d,u=Ii&&Je&&Ea(Je),f=(o.clientX-Zt.clientX+r.x)/(s||1)+(u?u[0]-br[0]:0)/(s||1),c=(o.clientY-Zt.clientY+r.y)/(a||1)+(u?u[1]-br[1]:0)/(a||1);if(!ne.active&&!wn){if(i&&Math.max(Math.abs(o.clientX-this._lastX),Math.abs(o.clientY-this._lastY))<i)return;this._onDragStart(e,!0)}if(ue){l?(l.e+=f-(gr||0),l.f+=c-(vr||0)):l={a:1,b:0,c:0,d:1,e:f,f:c};var m="matrix(".concat(l.a,",").concat(l.b,",").concat(l.c,",").concat(l.d,",").concat(l.e,",").concat(l.f,")");oe(ue,"webkitTransform",m),oe(ue,"mozTransform",m),oe(ue,"msTransform",m),oe(ue,"transform",m),gr=f,vr=c,yt=o}e.cancelable&&e.preventDefault()}},_appendGhost:function(){if(!ue){var e=this.options.fallbackOnBody?document.body:Oe,n=Re(G,!0,Ii,!0,e),i=this.options;if(Ii){for(Je=e;oe(Je,"position")==="static"&&oe(Je,"transform")==="none"&&Je!==document;)Je=Je.parentNode;Je!==document.body&&Je!==document.documentElement?(Je===document&&(Je=Ct()),n.top+=Je.scrollTop,n.left+=Je.scrollLeft):Je=Ct(),br=Ea(Je)}ue=G.cloneNode(!0),lt(ue,i.ghostClass,!1),lt(ue,i.fallbackClass,!0),lt(ue,i.dragClass,!0),oe(ue,"transition",""),oe(ue,"transform",""),oe(ue,"box-sizing","border-box"),oe(ue,"margin",0),oe(ue,"top",n.top),oe(ue,"left",n.left),oe(ue,"width",n.width),oe(ue,"height",n.height),oe(ue,"opacity","0.8"),oe(ue,"position",Ii?"absolute":"fixed"),oe(ue,"zIndex","100000"),oe(ue,"pointerEvents","none"),ne.ghost=ue,e.appendChild(ue),oe(ue,"transform-origin",Ta/parseInt(ue.style.width)*100+"% "+Oa/parseInt(ue.style.height)*100+"%")}},_onDragStart:function(e,n){var i=this,r=e.dataTransfer,o=i.options;if(it("dragStart",this,{evt:e}),ne.eventCanceled){this._onDrop();return}it("setupClone",this),ne.eventCanceled||(Le=Sa(G),Le.removeAttribute("id"),Le.draggable=!1,Le.style["will-change"]="",this._hideClone(),lt(Le,this.options.chosenClass,!1),ne.clone=Le),i.cloneId=Mi(function(){it("clone",i),!ne.eventCanceled&&(i.options.removeCloneOnHide||Oe.insertBefore(Le,G),i._hideClone(),Ke({sortable:i,name:"clone"}))}),!n&&lt(G,o.dragClass,!0),n?(Si=!0,i._loopId=setInterval(i._emulateDragOver,50)):(be(document,"mouseup",i._onDrop),be(document,"touchend",i._onDrop),be(document,"touchcancel",i._onDrop),r&&(r.effectAllowed="move",o.setData&&o.setData.call(i,r,G)),ye(document,"drop",i),oe(G,"transform","translateZ(0)")),wn=!0,i._dragStartId=Mi(i._dragStarted.bind(i,n,e)),ye(document,"selectstart",i),Xn=!0,window.getSelection().removeAllRanges(),qn&&oe(document.body,"user-select","none")},_onDragOver:function(e){var n=this.el,i=e.target,r,o,l,s=this.options,a=s.group,u=ne.active,f=Di===a,c=s.sort,m=Ue||u,h,d=this,v=!1;if(yr)return;function b(le,Se){it(le,d,St({evt:e,isOwner:f,axis:h?"vertical":"horizontal",revert:l,dragRect:r,targetRect:o,canSort:c,fromSortable:m,target:i,completed:E,onMove:function(pe,$){return Pi(Oe,n,G,r,pe,Re(pe),e,$)},changed:D},Se))}function w(){b("dragOverAnimationCapture"),d.captureAnimationState(),d!==m&&m.captureAnimationState()}function E(le){return b("dragOverCompleted",{insertion:le}),le&&(f?u._hideClone():u._showClone(d),d!==m&&(lt(G,Ue?Ue.options.ghostClass:u.options.ghostClass,!1),lt(G,s.ghostClass,!0)),Ue!==d&&d!==ne.active?Ue=d:d===ne.active&&Ue&&(Ue=null),m===d&&(d._ignoreWhileAnimating=i),d.animateAll(function(){b("dragOverAnimationComplete"),d._ignoreWhileAnimating=null}),d!==m&&(m.animateAll(),m._ignoreWhileAnimating=null)),(i===G&&!G.animated||i===n&&!i.animated)&&(_n=null),!s.dragoverBubble&&!e.rootEl&&i!==document&&(G.parentNode[nt]._isOutsideThisEl(e.target),!le&&Kt(e)),!s.dragoverBubble&&e.stopPropagation&&e.stopPropagation(),v=!0}function D(){st=pt(G),Gt=pt(G,s.draggable),Ke({sortable:d,name:"change",toEl:n,newIndex:st,newDraggableIndex:Gt,originalEvent:e})}if(e.preventDefault!==void 0&&e.cancelable&&e.preventDefault(),i=bt(i,s.draggable,n,!0),b("dragOver"),ne.eventCanceled)return v;if(G.contains(e.target)||i.animated&&i.animatingX&&i.animatingY||d._ignoreWhileAnimating===i)return E(!1);if(Si=!1,u&&!s.disabled&&(f?c||(l=Pe!==Oe):Ue===this||(this.lastPutMode=Di.checkPull(this,u,G,e))&&a.checkPut(this,u,G,e))){if(h=this._getDirection(e,i)==="vertical",r=Re(G),b("dragOverValid"),ne.eventCanceled)return v;if(l)return Pe=Oe,w(),this._hideClone(),b("revert"),ne.eventCanceled||(Jt?Oe.insertBefore(G,Jt):Oe.appendChild(G)),E(!0);var p=pr(n,s.draggable);if(!p||Of(e,h,this)&&!p.animated){if(p===G)return E(!1);if(p&&n===e.target&&(i=p),i&&(o=Re(i)),Pi(Oe,n,G,r,i,o,e,!!i)!==!1)return w(),p&&p.nextSibling?n.insertBefore(G,p.nextSibling):n.appendChild(G),Pe=n,D(),E(!0)}else if(p&&Tf(e,h,this)){var A=vn(n,0,s,!0);if(A===G)return E(!1);if(i=A,o=Re(i),Pi(Oe,n,G,r,i,o,e,!1)!==!1)return w(),n.insertBefore(G,A),Pe=n,D(),E(!0)}else if(i.parentNode===n){o=Re(i);var k=0,L,C=G.parentNode!==n,y=!Ef(G.animated&&G.toRect||r,i.animated&&i.toRect||o,h),T=h?"top":"left",I=_a(i,"top","top")||_a(G,"top","top"),M=I?I.scrollTop:void 0;_n!==i&&(L=o[T],Jn=!1,Ti=!y&&s.invertSwap||C),k=Af(e,i,o,h,y?1:s.swapThreshold,s.invertedSwapThreshold==null?s.swapThreshold:s.invertedSwapThreshold,Ti,_n===i);var x;if(k!==0){var H=pt(G);do H-=k,x=Pe.children[H];while(x&&(oe(x,"display")==="none"||x===ue))}if(k===0||x===i)return E(!1);_n=i,Yn=k;var P=i.nextElementSibling,W=!1;W=k===1;var B=Pi(Oe,n,G,r,i,o,e,W);if(B!==!1)return(B===1||B===-1)&&(W=B===1),yr=!0,setTimeout(Cf,30),w(),W&&!P?n.appendChild(G):i.parentNode.insertBefore(G,W?P:i),I&&Da(I,0,M-I.scrollTop),Pe=G.parentNode,L!==void 0&&!Ti&&(Oi=Math.abs(L-Re(i)[T])),D(),E(!0)}if(n.contains(G))return E(!1)}return!1},_ignoreWhileAnimating:null,_offMoveEvents:function(){be(document,"mousemove",this._onTouchMove),be(document,"touchmove",this._onTouchMove),be(document,"pointermove",this._onTouchMove),be(document,"dragover",Kt),be(document,"mousemove",Kt),be(document,"touchmove",Kt)},_offUpEvents:function(){var e=this.el.ownerDocument;be(e,"mouseup",this._onDrop),be(e,"touchend",this._onDrop),be(e,"pointerup",this._onDrop),be(e,"pointercancel",this._onDrop),be(e,"touchcancel",this._onDrop),be(document,"selectstart",this)},_onDrop:function(e){var n=this.el,i=this.options;if(st=pt(G),Gt=pt(G,i.draggable),it("drop",this,{evt:e}),Pe=G&&G.parentNode,st=pt(G),Gt=pt(G,i.draggable),ne.eventCanceled){this._nulling();return}wn=!1,Ti=!1,Jn=!1,clearInterval(this._loopId),clearTimeout(this._dragStartTimer),_r(this.cloneId),_r(this._dragStartId),this.nativeDraggable&&(be(document,"drop",this),be(n,"dragstart",this._onDragStart)),this._offMoveEvents(),this._offUpEvents(),qn&&oe(document.body,"user-select",""),oe(G,"transform",""),e&&(Xn&&(e.cancelable&&e.preventDefault(),!i.dropBubble&&e.stopPropagation()),ue&&ue.parentNode&&ue.parentNode.removeChild(ue),(Oe===Pe||Ue&&Ue.lastPutMode!=="clone")&&Le&&Le.parentNode&&Le.parentNode.removeChild(Le),G&&(this.nativeDraggable&&be(G,"dragend",this),wr(G),G.style["will-change"]="",Xn&&!wn&&lt(G,Ue?Ue.options.ghostClass:this.options.ghostClass,!1),lt(G,this.options.chosenClass,!1),Ke({sortable:this,name:"unchoose",toEl:Pe,newIndex:null,newDraggableIndex:null,originalEvent:e}),Oe!==Pe?(st>=0&&(Ke({rootEl:Pe,name:"add",toEl:Pe,fromEl:Oe,originalEvent:e}),Ke({sortable:this,name:"remove",toEl:Pe,originalEvent:e}),Ke({rootEl:Pe,name:"sort",toEl:Pe,fromEl:Oe,originalEvent:e}),Ke({sortable:this,name:"sort",toEl:Pe,originalEvent:e})),Ue&&Ue.save()):st!==yn&&st>=0&&(Ke({sortable:this,name:"update",toEl:Pe,originalEvent:e}),Ke({sortable:this,name:"sort",toEl:Pe,originalEvent:e})),ne.active&&((st==null||st===-1)&&(st=yn,Gt=Un),Ke({sortable:this,name:"end",toEl:Pe,originalEvent:e}),this.save()))),this._nulling()},_nulling:function(){it("nulling",this),Oe=G=Pe=ue=Jt=Le=ki=qt=Zt=yt=Xn=st=Gt=yn=Un=_n=Yn=Ue=Di=ne.dragged=ne.ghost=ne.clone=ne.active=null,Ai.forEach(function(e){e.checked=!0}),Ai.length=gr=vr=0},handleEvent:function(e){switch(e.type){case"drop":case"dragend":this._onDrop(e);break;case"dragenter":case"dragover":G&&(this._onDragOver(e),Sf(e));break;case"selectstart":e.preventDefault();break}},toArray:function(){for(var e=[],n,i=this.el.children,r=0,o=i.length,l=this.options;r<o;r++)n=i[r],bt(n,l.draggable,this.el,!1)&&e.push(n.getAttribute(l.dataIdAttr)||If(n));return e},sort:function(e,n){var i={},r=this.el;this.toArray().forEach(function(o,l){var s=r.children[l];bt(s,this.options.draggable,r,!1)&&(i[o]=s)},this),n&&this.captureAnimationState(),e.forEach(function(o){i[o]&&(r.removeChild(i[o]),r.appendChild(i[o]))}),n&&this.animateAll()},save:function(){var e=this.options.store;e&&e.set&&e.set(this)},closest:function(e,n){return bt(e,n||this.options.draggable,this.el,!1)},option:function(e,n){var i=this.options;if(n===void 0)return i[e];var r=Vn.modifyOption(this,e,n);typeof r<"u"?i[e]=r:i[e]=n,e==="group"&&Pa(i)},destroy:function(){it("destroy",this);var e=this.el;e[nt]=null,be(e,"mousedown",this._onTapStart),be(e,"touchstart",this._onTapStart),be(e,"pointerdown",this._onTapStart),this.nativeDraggable&&(be(e,"dragover",this),be(e,"dragenter",this)),Array.prototype.forEach.call(e.querySelectorAll("[draggable]"),function(n){n.removeAttribute("draggable")}),this._onDrop(),this._disableDelayedDragEvents(),Ci.splice(Ci.indexOf(this.el),1),this.el=e=null},_hideClone:function(){if(!qt){if(it("hideClone",this),ne.eventCanceled)return;oe(Le,"display","none"),this.options.removeCloneOnHide&&Le.parentNode&&Le.parentNode.removeChild(Le),qt=!0}},_showClone:function(e){if(e.lastPutMode!=="clone"){this._hideClone();return}if(qt){if(it("showClone",this),ne.eventCanceled)return;G.parentNode==Oe&&!this.options.group.revertClone?Oe.insertBefore(Le,G):Jt?Oe.insertBefore(Le,Jt):Oe.appendChild(Le),this.options.group.revertClone&&this.animate(G,Le),oe(Le,"display",""),qt=!1}}};function Sf(t){t.dataTransfer&&(t.dataTransfer.dropEffect="move"),t.cancelable&&t.preventDefault()}function Pi(t,e,n,i,r,o,l,s){var a,u=t[nt],f=u.options.onMove,c;return window.CustomEvent&&!Nt&&!zn?a=new CustomEvent("move",{bubbles:!0,cancelable:!0}):(a=document.createEvent("Event"),a.initEvent("move",!0,!0)),a.to=e,a.from=t,a.dragged=n,a.draggedRect=i,a.related=r||e,a.relatedRect=o||Re(e),a.willInsertAfter=s,a.originalEvent=l,t.dispatchEvent(a),f&&(c=f.call(u,a,l)),c}function wr(t){t.draggable=!1}function Cf(){yr=!1}function Tf(t,e,n){var i=Re(vn(n.el,0,n.options,!0)),r=Ca(n.el,n.options,ue),o=10;return e?t.clientX<r.left-o||t.clientY<i.top&&t.clientX<i.right:t.clientY<r.top-o||t.clientY<i.bottom&&t.clientX<i.left}function Of(t,e,n){var i=Re(pr(n.el,n.options.draggable)),r=Ca(n.el,n.options,ue),o=10;return e?t.clientX>r.right+o||t.clientY>i.bottom&&t.clientX>i.left:t.clientY>r.bottom+o||t.clientX>i.right&&t.clientY>i.top}function Af(t,e,n,i,r,o,l,s){var a=i?t.clientY:t.clientX,u=i?n.height:n.width,f=i?n.top:n.left,c=i?n.bottom:n.right,m=!1;if(!l){if(s&&Oi<u*r){if(!Jn&&(Yn===1?a>f+u*o/2:a<c-u*o/2)&&(Jn=!0),Jn)m=!0;else if(Yn===1?a<f+Oi:a>c-Oi)return-Yn}else if(a>f+u*(1-r)/2&&a<c-u*(1-r)/2)return Lf(e)}return m=m||l,m&&(a<f+u*o/2||a>c-u*o/2)?a>f+u/2?1:-1:0}function Lf(t){return pt(G)<pt(t)?1:-1}function If(t){for(var e=t.tagName+t.className+t.src+t.href+t.textContent,n=e.length,i=0;n--;)i+=e.charCodeAt(n);return i.toString(36)}function Pf(t){Ai.length=0;for(var e=t.getElementsByTagName("input"),n=e.length;n--;){var i=e[n];i.checked&&Ai.push(i)}}function Mi(t){return setTimeout(t,0)}function _r(t){return clearTimeout(t)}Li&&ye(document,"touchmove",function(t){(ne.active||wn)&&t.cancelable&&t.preventDefault()}),ne.utils={on:ye,off:be,css:oe,find:wa,is:function(e,n){return!!bt(e,n,e,!1)},extend:mf,throttle:ka,closest:bt,toggleClass:lt,clone:Sa,index:pt,nextTick:Mi,cancelNextTick:_r,detectDirection:Ia,getChild:vn,expando:nt},ne.get=function(t){return t[nt]},ne.mount=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];e[0].constructor===Array&&(e=e[0]),e.forEach(function(i){if(!i.prototype||!i.prototype.constructor)throw"Sortable: Mounted plugin must be a constructor function, not ".concat({}.toString.call(i));i.utils&&(ne.utils=St(St({},ne.utils),i.utils)),Vn.mount(i)})},ne.create=function(t,e){return new ne(t,e)},ne.version=df;var Be=[],Zn,Er,kr=!1,Dr,Sr,Ni,Kn;function Mf(){function t(){this.defaults={scroll:!0,forceAutoScrollFallback:!1,scrollSensitivity:30,scrollSpeed:10,bubbleScroll:!0};for(var e in this)e.charAt(0)==="_"&&typeof this[e]=="function"&&(this[e]=this[e].bind(this))}return t.prototype={dragStarted:function(n){var i=n.originalEvent;this.sortable.nativeDraggable?ye(document,"dragover",this._handleAutoScroll):this.options.supportPointer?ye(document,"pointermove",this._handleFallbackAutoScroll):i.touches?ye(document,"touchmove",this._handleFallbackAutoScroll):ye(document,"mousemove",this._handleFallbackAutoScroll)},dragOverCompleted:function(n){var i=n.originalEvent;!this.options.dragOverBubble&&!i.rootEl&&this._handleAutoScroll(i)},drop:function(){this.sortable.nativeDraggable?be(document,"dragover",this._handleAutoScroll):(be(document,"pointermove",this._handleFallbackAutoScroll),be(document,"touchmove",this._handleFallbackAutoScroll),be(document,"mousemove",this._handleFallbackAutoScroll)),Ra(),Ri(),hf()},nulling:function(){Ni=Er=Zn=kr=Kn=Dr=Sr=null,Be.length=0},_handleFallbackAutoScroll:function(n){this._handleAutoScroll(n,!0)},_handleAutoScroll:function(n,i){var r=this,o=(n.touches?n.touches[0]:n).clientX,l=(n.touches?n.touches[0]:n).clientY,s=document.elementFromPoint(o,l);if(Ni=n,i||this.options.forceAutoScrollFallback||zn||Nt||qn){Cr(n,this.options,s,i);var a=zt(s,!0);kr&&(!Kn||o!==Dr||l!==Sr)&&(Kn&&Ra(),Kn=setInterval(function(){var u=zt(document.elementFromPoint(o,l),!0);u!==a&&(a=u,Ri()),Cr(n,r.options,u,i)},10),Dr=o,Sr=l)}else{if(!this.options.bubbleScroll||zt(s,!0)===Ct()){Ri();return}Cr(n,this.options,zt(s,!1),!1)}}},Pt(t,{pluginName:"scroll",initializeByDefault:!0})}function Ri(){Be.forEach(function(t){clearInterval(t.pid)}),Be=[]}function Ra(){clearInterval(Kn)}var Cr=ka(function(t,e,n,i){if(e.scroll){var r=(t.touches?t.touches[0]:t).clientX,o=(t.touches?t.touches[0]:t).clientY,l=e.scrollSensitivity,s=e.scrollSpeed,a=Ct(),u=!1,f;Er!==n&&(Er=n,Ri(),Zn=e.scroll,f=e.scrollFn,Zn===!0&&(Zn=zt(n,!0)));var c=0,m=Zn;do{var h=m,d=Re(h),v=d.top,b=d.bottom,w=d.left,E=d.right,D=d.width,p=d.height,A=void 0,k=void 0,L=h.scrollWidth,C=h.scrollHeight,y=oe(h),T=h.scrollLeft,I=h.scrollTop;h===a?(A=D<L&&(y.overflowX==="auto"||y.overflowX==="scroll"||y.overflowX==="visible"),k=p<C&&(y.overflowY==="auto"||y.overflowY==="scroll"||y.overflowY==="visible")):(A=D<L&&(y.overflowX==="auto"||y.overflowX==="scroll"),k=p<C&&(y.overflowY==="auto"||y.overflowY==="scroll"));var M=A&&(Math.abs(E-r)<=l&&T+D<L)-(Math.abs(w-r)<=l&&!!T),x=k&&(Math.abs(b-o)<=l&&I+p<C)-(Math.abs(v-o)<=l&&!!I);if(!Be[c])for(var H=0;H<=c;H++)Be[H]||(Be[H]={});(Be[c].vx!=M||Be[c].vy!=x||Be[c].el!==h)&&(Be[c].el=h,Be[c].vx=M,Be[c].vy=x,clearInterval(Be[c].pid),(M!=0||x!=0)&&(u=!0,Be[c].pid=setInterval((function(){i&&this.layer===0&&ne.active._onTouchMove(Ni);var P=Be[this.layer].vy?Be[this.layer].vy*s:0,W=Be[this.layer].vx?Be[this.layer].vx*s:0;typeof f=="function"&&f.call(ne.dragged.parentNode[nt],W,P,t,Ni,Be[this.layer].el)!=="continue"||Da(Be[this.layer].el,W,P)}).bind({layer:c}),24))),c++}while(e.bubbleScroll&&m!==a&&(m=zt(m,!1)));kr=u}},30),Ba=function(e){var n=e.originalEvent,i=e.putSortable,r=e.dragEl,o=e.activeSortable,l=e.dispatchSortableEvent,s=e.hideGhostForTarget,a=e.unhideGhostForTarget;if(n){var u=i||o;s();var f=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:n,c=document.elementFromPoint(f.clientX,f.clientY);a(),u&&!u.el.contains(c)&&(l("spill"),this.onSpill({dragEl:r,putSortable:i}))}};function Tr(){}Tr.prototype={startIndex:null,dragStart:function(e){var n=e.oldDraggableIndex;this.startIndex=n},onSpill:function(e){var n=e.dragEl,i=e.putSortable;this.sortable.captureAnimationState(),i&&i.captureAnimationState();var r=vn(this.sortable.el,this.startIndex,this.options);r?this.sortable.el.insertBefore(n,r):this.sortable.el.appendChild(n),this.sortable.animateAll(),i&&i.animateAll()},drop:Ba},Pt(Tr,{pluginName:"revertOnSpill"});function Or(){}Or.prototype={onSpill:function(e){var n=e.dragEl,i=e.putSortable,r=i||this.sortable;r.captureAnimationState(),n.parentNode&&n.parentNode.removeChild(n),r.animateAll()},drop:Ba},Pt(Or,{pluginName:"removeOnSpill"}),ne.mount(new Mf),ne.mount(Or,Tr);function Fa(t,e,n){const i=t.slice();return i[16]=e[n],i}function xa(t,e,n){const i=t.slice();return i[19]=e[n],i}function Ha(t,e,n){const i=t.slice();return i[22]=e[n],i}function Wa(t){let e,n,i,r;function o(){return t[11](t[22])}return{c(){e=S("div"),n=S("a"),n.innerHTML='<i class="fas fa-pencil-alt fa-sm"></i>',g(n,"href","javascript:"),g(n,"data-action","editField"),g(n,"class","edit-field svelte-1azk92t"),g(e,"class","right svelte-1azk92t")},m(l,s){Y(l,e,s),_(e,n),i||(r=ce(n,"click",o),i=!0)},p(l,s){t=l},d(l){l&&X(e),i=!1,r()}}}function ja(t,e){let n,i,r,o=e[22].label+"",l,s,a,u=e[2].editable&&Wa(e),f=[e[10](e[22])],c={};for(let m=0;m<f.length;m+=1)c=Fn(c,f[m]);return{key:t,first:null,c(){n=S("li"),i=S("div"),r=S("label"),l=Ce(o),s=z(),u&&u.c(),a=z(),g(r,"class","svelte-1azk92t"),g(i,"class","left svelte-1azk92t"),Wt(n,c),te(n,"svelte-1azk92t",!0),this.first=n},m(m,h){Y(m,n,h),_(n,i),_(i,r),_(r,l),_(n,s),u&&u.m(n,null),_(n,a)},p(m,h){e=m,h&1&&o!==(o=e[22].label+"")&&xe(l,o),e[2].editable?u?u.p(e,h):(u=Wa(e),u.c(),u.m(n,a)):u&&(u.d(1),u=null),Wt(n,c=bi(f,[h&1&&e[10](e[22])])),te(n,"svelte-1azk92t",!0)},d(m){m&&X(n),u&&u.d()}}}function za(t){let e,n=q.translate(t[16].name,"scopeNames")+"",i;return{c(){e=S("span"),i=Ce(n),g(e,"class","title svelte-1azk92t")},m(r,o){Y(r,e,o),_(e,i)},p(r,o){o&2&&n!==(n=q.translate(r[16].name,"scopeNames")+"")&&xe(i,n)},d(r){r&&X(e)}}}function qa(t,e){let n,i,r,o=e[19].label+"",l,s,a=[e[10](e[19])],u={};for(let f=0;f<a.length;f+=1)u=Fn(u,a[f]);return{key:t,first:null,c(){n=S("li"),i=S("div"),r=S("label"),l=Ce(o),s=z(),g(r,"class","svelte-1azk92t"),g(i,"class","left svelte-1azk92t"),Wt(n,u),te(n,"svelte-1azk92t",!0),this.first=n},m(f,c){Y(f,n,c),_(n,i),_(i,r),_(r,l),_(n,s)},p(f,c){e=f,c&2&&o!==(o=e[19].label+"")&&xe(l,o),Wt(n,u=bi(a,[c&2&&e[10](e[19])])),te(n,"svelte-1azk92t",!0)},d(f){f&&X(n)}}}function Ga(t,e){let n,i,r,o=[],l=new Map,s,a,u=e[1].length>1&&za(e),f=De(e[16].fields);const c=m=>m[19].name;for(let m=0;m<f.length;m+=1){let h=xa(e,f,m),d=c(h);l.set(d,o[m]=qa(d,h))}return{key:t,first:null,c(){n=S("div"),u&&u.c(),i=z(),r=S("ul");for(let m=0;m<o.length;m+=1)o[m].c();a=z(),g(r,"class","disabled connected svelte-1azk92t"),g(r,"data-name",s=e[16].name),g(n,"class","svelte-1azk92t"),te(n,"group",e[1].length>1),this.first=n},m(m,h){Y(m,n,h),u&&u.m(n,null),_(n,i),_(n,r);for(let d=0;d<o.length;d+=1)o[d]&&o[d].m(r,null);_(n,a)},p(m,h){e=m,e[1].length>1?u?u.p(e,h):(u=za(e),u.c(),u.m(n,i)):u&&(u.d(1),u=null),h&1026&&(f=De(e[16].fields),o=Lt(o,h,c,1,e,f,l,r,At,qa,null,xa)),h&2&&s!==(s=e[16].name)&&g(r,"data-name",s),h&2&&te(n,"group",e[1].length>1)},d(m){m&&X(n),u&&u.d();for(let h=0;h<o.length;h+=1)o[h].d()}}}function Nf(t){let e,n,i,r,o,l,s,a=[],u=new Map,f,c,m,h,d,v,b,w,E=[],D=new Map,p=De(t[0].sort(Ua));const A=C=>C[22].name;for(let C=0;C<p.length;C+=1){let y=Ha(t,p,C),T=A(y);u.set(T,a[C]=ja(T,y))}let k=De(t[1]);const L=C=>C[16].name;for(let C=0;C<k.length;C+=1){let y=Fa(t,k,C),T=L(y);D.set(T,E[C]=Ga(T,y))}return{c(){e=S("div"),n=S("div"),i=S("div"),r=S("header"),r.textContent=`${q.translate("Selected","labels","Admin")}`,o=z(),l=S("div"),s=S("ul");for(let C=0;C<a.length;C+=1)a[C].c();f=z(),c=S("div"),m=z(),h=S("div"),d=S("div"),v=S("header"),v.textContent=`${q.translate("Available","labels","Admin")}`,b=z(),w=S("div");for(let C=0;C<E.length;C+=1)E[C].c();g(r,"class","svelte-1azk92t"),g(s,"class","enabled connected svelte-1azk92t"),g(l,"class","rows-wrapper svelte-1azk92t"),g(i,"class","well svelte-1azk92t"),g(n,"class","col-sm-5 svelte-1azk92t"),g(c,"class","col-sm-1 svelte-1azk92t"),se(c,"width","35px"),g(v,"class","svelte-1azk92t"),g(w,"class","rows-wrapper svelte-1azk92t"),g(d,"class","well svelte-1azk92t"),g(h,"class","col-sm-5 svelte-1azk92t"),g(e,"id","layout"),g(e,"class","row svelte-1azk92t")},m(C,y){Y(C,e,y),_(e,n),_(n,i),_(i,r),_(i,o),_(i,l),_(l,s);for(let T=0;T<a.length;T+=1)a[T]&&a[T].m(s,null);_(e,f),_(e,c),_(e,m),_(e,h),_(h,d),_(d,v),_(d,b),_(d,w);for(let T=0;T<E.length;T+=1)E[T]&&E[T].m(w,null);t[12](e)},p(C,y){y&1285&&(p=De(C[0].sort(Ua)),a=Lt(a,y,A,1,C,p,u,s,At,ja,null,Ha)),y&1026&&(k=De(C[1]),E=Lt(E,y,L,1,C,k,D,w,At,Ga,null,Fa))},d(C){C&&X(e);for(let y=0;y<a.length;y+=1)a[y].d();for(let y=0;y<E.length;y+=1)E[y].d();t[12](null)}}}function Rf(t){let e,n,i={params:t[2],validate:t[9],fetch:t[4],loadLayout:t[3],$$slots:{default:[Nf]},$$scope:{ctx:t}};return e=new pa({props:i}),t[13](e),e.$on("ready",t[7]),{c(){Dt(e.$$.fragment)},m(r,o){gt(e,r,o),n=!0},p(r,[o]){const l={};o&4&&(l.params=r[2]),o&16&&(l.fetch=r[4]),o&8&&(l.loadLayout=r[3]),o&33554471&&(l.$$scope={dirty:o,ctx:r}),e.$set(l)},i(r){n||(We(e.$$.fragment,r),n=!0)},o(r){Ye(e.$$.fragment,r),n=!1},d(r){t[13](null),vt(e,r)}}}function Bf(t){return t.toLowerCase()}function Va(t,e){return t[e]}const Ua=(t,e)=>t.sortOrder-e.sortOrder;function Ff(t,e,n){let i,r,o,{params:l}=e,{selectedFields:s=[]}=e,{availableGroups:a=[]}=e,{loadLayout:u}=e,f;rr(()=>{r&&r.destroy(),o&&o.forEach(D=>D.destroy())});function c(){const D={group:"fields",draggable:"li",animation:150};r=ne.create(i.querySelector("ul.enabled"),{...D,onEnd(p){const A=p.to.closest(".connected");if(A.classList.contains("enabled")){const[k]=s.splice(p.oldIndex,1);s.splice(p.newIndex,0,k)}else{const k=s[p.oldIndex];s.splice(p.oldIndex,1);let L=a.find(C=>!C.prefix);if(a.forEach(C=>{C.prefix&&k.name.startsWith(C.prefix)&&(L=C)}),L.name!==A.attributes["data-name"].value){const C=document.querySelector(`#layout ul.disabled[data-name="${L.name}"]`);C.children.length?C.insertBefore(p.item,C.children[0]):C.appendChild(p.item),L.fields.unshift(k)}else L.fields.splice(p.newIndex,0,k);n(1,a=[...a])}n(0,s=[...s])}}),o=[];for(let p of i.querySelectorAll("ul.disabled")){const A=ne.create(p,{...D,onEnd(k){const L=k.to.closest(".connected");let C=null;if(L.classList.contains("disabled")){if(L!==p){k.oldIndex>=k.from.children.length?k.from.appendChild(k.item):k.from.insertBefore(k.item,k.from.children[k.oldIndex]);return}for(let y of a)if(y.name===L.attributes["data-name"].value){[C]=y.fields.splice(k.oldIndex,1),C&&y.fields.splice(k.newIndex,0,C);break}}else n(1,a=a.map(y=>(y.name===k.from.closest("ul").attributes["data-name"].value&&([C]=y.fields.splice(k.oldIndex,1)),y))),s.splice(k.newIndex,0,C),n(0,s=[...s])}});o.push(A)}}function m(D){l.openEditDialog(D,l.scope,l.dataAttributeList,l.dataAttributesDefs,p=>{n(0,s=s.map(A=>{if(A.name===D.name)for(let k in p)A[k]=p[k];return A}))})}let{fetch:h=()=>s}=e;function d(D){return D.length===0?(tt.notify("Layout cannot be empty","error"),!1):!0}function v(D){const p={};return l.dataAttributeList.forEach(A=>{Va(D,A)!=null&&(p[`data-${Bf(A)}`]=Va(D,A))}),p}const b=D=>m(D);function w(D){qe[D?"unshift":"push"](()=>{i=D,n(5,i)})}function E(D){qe[D?"unshift":"push"](()=>{f=D,n(6,f)})}return t.$$set=D=>{"params"in D&&n(2,l=D.params),"selectedFields"in D&&n(0,s=D.selectedFields),"availableGroups"in D&&n(1,a=D.availableGroups),"loadLayout"in D&&n(3,u=D.loadLayout),"fetch"in D&&n(4,h=D.fetch)},[s,a,l,u,h,i,f,c,m,d,v,b,w,E]}let Xa=class extends Ve{constructor(e){super(),Ge(this,e,Ff,Rf,Ne,{params:2,selectedFields:0,availableGroups:1,loadLayout:3,fetch:4})}};const Bi={upperCaseFirst(t){return t.length?t[0].toUpperCase()+t.slice(1):""}};function xf(t){let e,n,i={params:t[0],selectedFields:t[2],availableGroups:t[3],editable:Hf,loadLayout:t[4]};return e=new Xa({props:i}),t[5](e),{c(){Dt(e.$$.fragment)},m(r,o){gt(e,r,o),n=!0},p(r,[o]){const l={};o&1&&(l.params=r[0]),o&4&&(l.selectedFields=r[2]),o&8&&(l.availableGroups=r[3]),e.$set(l)},i(r){n||(We(e.$$.fragment,r),n=!0)},o(r){Ye(e.$$.fragment,r),n=!1},d(r){t[5](null),vt(e,r)}}}let Hf=!0;function Wf(t,e,n){let{params:i}=e;i.dataAttributeList||(i.dataAttributeList=["id","name","width","widthPx","link","notSortable","align","view","customLabel","editable"]),i.dataAttributesDefs||(i.dataAttributesDefs={link:{type:"bool"},width:{type:"float"},notSortable:{type:"bool"},align:{type:"enum",options:["left","right"]},view:{type:"varchar",readOnly:!0},customLabel:{type:"varchar",readOnly:!0},widthPx:{type:"float"},name:{type:"varchar",readOnly:!0},editable:{type:"bool"}});let r,o=[],l=[];const s=[],a=[];function u(E){It.get(i.scope,i.type,i.relatedScope,i.layoutProfileId,D=>{E&&(d(D.layout),E(D))},!1)}function f(E,D){return D==="_self"?q.translate(E,"scopeNamesPlural","Global"):D==="_bookmark"?q.translate("Bookmark","scopeNamesPlural","Global"):q.translate(D,"fields",E)}function c(){const E=[];return i.type==="leftSidebar"&&(de.get(["scopes",i.scope,"bookmarkDisabled"])||E.push("_bookmark"),de.get(["scopes",i.scope,"type"])==="Hierarchy"&&!de.get(["scopes",i.scope,"disableHierarchy"])&&E.push("_self")),E}function m(E,D){return de.get(["entityDefs",E,"fields",D,"type"])??""}function h(E,D){const p=D.split("."),A=de.get(["entityDefs",p[0],"links",p[1]])??{};return A.entity===E&&A.relationName?Espo.utils.upperCaseFirst(A.relationName):""}function d(E){const D=[];let p="";if(i.relatedScope&&i.type==="list"&&(p=h(i.scope,i.relatedScope),p)){const C={name:p,scope:p,prefix:p+"__"};let y=Object.keys(de.get(["entityDefs",p,"fields"])||{}).filter(T=>v(m(p,T))&&b(p,T));y=y.filter(T=>!(de.get(["entityDefs",p,"fields",T,"relationField"])??!1)),y=y.sort((T,I)=>f(p,T).localeCompare(f(p,I))).map(T=>C.prefix+T),C.fields=y,D.push(C)}let A=Object.keys(de.get(["entityDefs",i.scope,"fields"])||{}).filter(C=>v(m(i.scope,C))&&b(i.scope,C));A.push(...c()),A=A.sort((C,y)=>f(i.scope,C).localeCompare(f(i.scope,y))),D.unshift({name:i.scope,scope:i.scope,fields:A});const k=[],L=[];for(const C of D)C.fields=C.fields.map(y=>{const T=f(C.scope,C.prefix?y.replace(C.prefix,""):y);C.prefix||(k.includes(T)&&L.push(T),k.push(T));const I={name:y,label:T},M=de.get(["entityDefs",C.scope,"fields",y,"type"]);return M&&de.get(["fields",M,"notSortable"])&&(I.notSortable=!0),I});n(2,o=E),D[0].fields.forEach(C=>{L.includes(C.label)&&(C.label+=` (${C.name})`);const y=o.find(T=>!T.label&&T.name===C.name);y&&(y.label=C.label)}),D[1]&&D[1].fields.forEach(C=>{k.includes(C.label)&&(C.label+=" (Relation)");const y=o.find(T=>!T.label&&T.name===C.name);y&&(y.label=C.label)});for(const C of D)C.fields=C.fields.filter(y=>!o.find(T=>T.name===y.name));n(3,l=D.reverse())}function v(E){return i.fieldTypes?i.fieldTypes.includes(E):!0}function b(E,D){if(s.includes(D)||a.includes(m(E,D)))return!1;const p=["disabled",`layout${Bi.upperCaseFirst(i.type)}Disabled`];i.reelType&&p.push(`layout${Bi.upperCaseFirst(i.reelType)}Disabled`);for(let A of p)if(de.get(["entityDefs",E,"fields",D,A]))return!1;return!0}function w(E){qe[E?"unshift":"push"](()=>{r=E,n(1,r)})}return t.$$set=E=>{"params"in E&&n(0,i=E.params)},[i,r,o,l,u,w]}class Ar extends Ve{constructor(e){super(),Ge(this,e,Wf,xf,Ne,{params:0})}}function jf(t){let e,n;return e=new Xa({props:{params:t[0],selectedFields:t[1],availableGroups:t[2],loadLayout:t[3]}}),{c(){Dt(e.$$.fragment)},m(i,r){gt(e,i,r),n=!0},p(i,[r]){const o={};r&1&&(o.params=i[0]),r&2&&(o.selectedFields=i[1]),r&4&&(o.availableGroups=i[2]),e.$set(o)},i(i){n||(We(e.$$.fragment,i),n=!0)},o(i){Ye(e.$$.fragment,i),n=!1},d(i){vt(e,i)}}}function zf(t,e){return!t.getLinkParam(e,"disabled")&&!t.getLinkParam(e,"layoutRelationshipsDisabled")}function qf(t,e,n){let{params:i}=e;i.dataAttributeList||(i.dataAttributeList=["id","name","style","hiddenPerDefault"]),i.dataAttributesDefs||(i.dataAttributesDefs={style:{type:"enum",options:["default","success","danger","primary","info","warning"],translation:"LayoutManager.options.style"},hiddenPerDefault:{type:"bool"},name:{readOnly:!0}});let r=[],o=[];function l(a){cr.create(i.scope,function(u){It.get(i.scope,i.type,null,i.layoutProfileId,f=>{a&&(s(u,f.layout),a(f))},!1)})}function s(a,u){let f=[];for(let d in a.defs.links)["belongsTo","hasMany","hasChildren"].includes(a.defs.links[d].type)&&zf(a,d)&&f.push(d);const c=de.get(["clientDefs",i.scope,"bottomPanels","detail"])||[];for(let d of c)d.layoutRelationshipsDisabled||f.push(d.name);f.sort(function(d,v){let b,w,E=c.find(p=>p.name===d),D=c.find(p=>p.name===v);return d in a.defs.links?b=q.translate(d,"links",i.scope):E&&(b=q.translate(E.label,"labels",i.scope)),v in a.defs.links?w=q.translate(v,"links",i.scope):D&&(w=q.translate(D.label,"labels",i.scope)),b.localeCompare(w)});let m=[];n(1,r=[]);const h={name:i.scope,fields:[]};for(let d in u){let v=u[d],b,w=c.find(E=>E.name===v.name);typeof v=="string"||v instanceof String?b={name:v,label:w?q.translate(w.label,"labels",i.scope):q.translate(v,"links",i.scope)}:(b=v,b.label=w?q.translate(w.label,"labels",i.scope):q.translate(b.name,"links",i.scope)),i.dataAttributeList.forEach(E=>{if(E==="name"||E in b)return;let D=de.get(["clientDefs",i.scope,"relationshipPanels",b.name,E]);D!==null&&(b[E]=D)}),r.push(b),m.push(b.name)}for(let d of f)if(!m.includes(d)){let v=c.find(b=>b.name===d);h.fields.push({name:d,label:v?q.translate(v.label,"labels",i.scope):q.translate(d,"fields",i.scope)||q.translate(d,"links",i.scope)})}n(2,o=[h])}return t.$$set=a=>{"params"in a&&n(0,i=a.params)},[i,r,o,l]}class Gf extends Ve{constructor(e){super(),Ge(this,e,qf,jf,Ne,{params:0})}}function Ya(t,e,n){const i=t.slice();return i[43]=e[n],i}function Ja(t,e,n){const i=t.slice();return i[46]=e[n],i}function Za(t,e,n){const i=t.slice();return i[49]=e[n],i}function Ka(t,e,n){const i=t.slice();return i[52]=e[n],i}function Qa(t,e,n){const i=t.slice();return i[55]=e[n],i[57]=n,i}function Vf(t){let e,n,i,r,o;function l(){return t[20](t[49],t[52],t[57])}function s(...a){return t[21](t[49],t[52],t[57],...a)}return{c(){e=S("li"),n=S("a"),n.innerHTML='<i class="fas fa-minus"></i>',i=z(),g(n,"href","#"),g(n,"data-action","minusCell"),g(n,"class","remove-field svelte-t2y606"),g(e,"class","empty cell svelte-t2y606")},m(a,u){Y(a,e,u),_(e,n),_(e,i),r||(o=[ce(n,"click",Ht(l)),ce(e,"dragover",Ht(Zf)),ce(e,"drop",s)],r=!0)},p(a,u){t=a},d(a){a&&X(e),r=!1,at(o)}}}function Uf(t){let e,n=t[55].label+"",i,r,o,l,s,a,u,f,c,m,h;function d(){return t[18](t[49],t[52],t[57])}function v(...b){return t[19](t[55],...b)}return{c(){e=S("li"),i=Ce(n),r=z(),o=S("a"),o.innerHTML='<i class="fas fa-times"></i>',l=z(),g(o,"href","#"),g(o,"data-action","removeField"),g(o,"class","remove-field svelte-t2y606"),g(e,"class","cell svelte-t2y606"),g(e,"draggable","true"),g(e,"data-id",s=t[55].id),g(e,"data-name",a=t[55].name),g(e,"data-full-width",u=t[55].fullWidth?"true":void 0),g(e,"data-custom-label",f=t[55].customLabel?t[55].customLabel:void 0),g(e,"data-no-label",c=t[55].noLabel)},m(b,w){Y(b,e,w),_(e,i),_(e,r),_(e,o),_(e,l),m||(h=[ce(o,"click",Ht(d)),ce(e,"dragstart",ir(v))],m=!0)},p(b,w){t=b,w[0]&2&&n!==(n=t[55].label+"")&&xe(i,n),w[0]&2&&s!==(s=t[55].id)&&g(e,"data-id",s),w[0]&2&&a!==(a=t[55].name)&&g(e,"data-name",a),w[0]&2&&u!==(u=t[55].fullWidth?"true":void 0)&&g(e,"data-full-width",u),w[0]&2&&f!==(f=t[55].customLabel?t[55].customLabel:void 0)&&g(e,"data-custom-label",f),w[0]&2&&c!==(c=t[55].noLabel)&&g(e,"data-no-label",c)},d(b){b&&X(e),m=!1,at(h)}}}function $a(t){let e;function n(o,l){return o[55]?Uf:Vf}let i=n(t),r=i(t);return{c(){r.c(),e=pi()},m(o,l){r.m(o,l),Y(o,e,l)},p(o,l){i===(i=n(o))&&r?r.p(o,l):(r.d(1),r=i(o),r&&(r.c(),r.m(e.parentNode,e)))},d(o){o&&X(e),r.d(o)}}}function el(t,e){let n,i,r,o,l,s,a,u,f;function c(){return e[17](e[49],e[52])}let m=De(e[52].cells),h=[];for(let d=0;d<m.length;d+=1)h[d]=$a(Qa(e,m,d));return{key:t,first:null,c(){n=S("li"),i=S("div"),r=S("a"),r.innerHTML='<i class="fas fa-times"></i>',o=z(),l=S("ul");for(let d=0;d<h.length;d+=1)h[d].c();s=z(),g(r,"href","#"),g(r,"data-action","removeRow"),g(r,"class","remove-row pull-right svelte-t2y606"),g(i,"class","svelte-t2y606"),g(l,"class","cells svelte-t2y606"),g(n,"class","row svelte-t2y606"),g(n,"data-number",a=e[52].number),this.first=n},m(d,v){Y(d,n,v),_(n,i),_(i,r),_(n,o),_(n,l);for(let b=0;b<h.length;b+=1)h[b]&&h[b].m(l,null);_(n,s),u||(f=[ce(r,"click",Ht(c)),ce(l,"mousedown",ir(Kf))],u=!0)},p(d,v){if(e=d,v[0]&5634){m=De(e[52].cells);let b;for(b=0;b<m.length;b+=1){const w=Qa(e,m,b);h[b]?h[b].p(w,v):(h[b]=$a(w),h[b].c(),h[b].m(l,null))}for(;b<h.length;b+=1)h[b].d(1);h.length=m.length}v[0]&2&&a!==(a=e[52].number)&&g(n,"data-number",a)},d(d){d&&X(n),sn(h,d),u=!1,at(f)}}}function tl(t,e){let n,i,r,o=(e[49].customLabel||e[49].label||"")+"",l,s,a,u,f,c,m,h,d,v,b,w=[],E=new Map,D,p,A,k,L,C,y;function T(){return e[15](e[49])}function I(){return e[16](e[49])}let M=De(e[49].rows);const x=P=>P[52].number;for(let P=0;P<M.length;P+=1){let W=Ka(e,M,P),B=x(W);E.set(B,w[P]=el(B,W))}function H(){return e[22](e[49])}return{key:t,first:null,c(){n=S("li"),i=S("header"),r=S("label"),l=Ce(o),a=Ce(` 
                                    `),u=S("a"),u.innerHTML='<i class="fas fa-pencil-alt fa-sm"></i>',f=z(),c=S("a"),m=S("i"),v=z(),b=S("ul");for(let P=0;P<w.length;P+=1)w[P].c();D=z(),p=S("div"),A=S("a"),A.innerHTML='<i class="fas fa-plus"></i>',k=z(),g(r,"data-is-custom",s=e[49].customLabel?"true":void 0),g(r,"class","svelte-t2y606"),g(u,"href","#"),g(u,"data-action","edit-panel-label"),g(u,"class","edit-panel-label svelte-t2y606"),g(m,"class","fas fa-times"),g(c,"href","#"),se(c,"float","right"),g(c,"data-action","removePanel"),g(c,"class","remove-panel svelte-t2y606"),g(c,"data-number",h=e[49].number),g(i,"data-name",d=e[49].name),g(i,"class","svelte-t2y606"),g(b,"class","rows svelte-t2y606"),g(A,"href","#"),g(A,"data-action","addRow"),g(A,"class","svelte-t2y606"),g(p,"class","svelte-t2y606"),g(n,"data-number",L=e[49].number),g(n,"class","panel-layout svelte-t2y606"),this.first=n},m(P,W){Y(P,n,W),_(n,i),_(i,r),_(r,l),_(i,a),_(i,u),_(i,f),_(i,c),_(c,m),_(n,v),_(n,b);for(let B=0;B<w.length;B+=1)w[B]&&w[B].m(b,null);_(n,D),_(n,p),_(p,A),_(n,k),C||(y=[ce(u,"click",Ht(T)),ce(c,"click",Ht(I)),ce(b,"mousedown",ir(Qf)),ce(A,"click",Ht(H))],C=!0)},p(P,W){e=P,W[0]&2&&o!==(o=(e[49].customLabel||e[49].label||"")+"")&&xe(l,o),W[0]&2&&s!==(s=e[49].customLabel?"true":void 0)&&g(r,"data-is-custom",s),W[0]&2&&h!==(h=e[49].number)&&g(c,"data-number",h),W[0]&2&&d!==(d=e[49].name)&&g(i,"data-name",d),W[0]&5890&&(M=De(e[49].rows),w=Lt(w,W,x,1,e,M,E,b,At,el,null,Ka)),W[0]&2&&L!==(L=e[49].number)&&g(n,"data-number",L)},d(P){P&&X(n);for(let W=0;W<w.length;W+=1)w[W].d();C=!1,at(y)}}}function nl(t){let e,n=q.translate(t[43].name,"scopeNames")+"",i;return{c(){e=S("span"),i=Ce(n),g(e,"class","title svelte-t2y606")},m(r,o){Y(r,e,o),_(e,i)},p(r,o){o[0]&4&&n!==(n=q.translate(r[43].name,"scopeNames")+"")&&xe(i,n)},d(r){r&&X(e)}}}function il(t,e){let n,i=e[46].label+"",r,o,l,s,a;function u(...f){return e[23](e[46],...f)}return{key:t,first:null,c(){n=S("li"),r=Ce(i),o=z(),g(n,"class","cell svelte-t2y606"),g(n,"data-name",l=e[46].name),this.first=n},m(f,c){Y(f,n,c),_(n,r),_(n,o),s||(a=ce(n,"dragstart",u),s=!0)},p(f,c){e=f,c[0]&4&&i!==(i=e[46].label+"")&&xe(r,i),c[0]&4&&l!==(l=e[46].name)&&g(n,"data-name",l)},d(f){f&&X(n),s=!1,a()}}}function rl(t,e){let n,i,r,o=[],l=new Map,s,a,u=e[2].length>1&&nl(e),f=De(e[43].fields);const c=m=>m[46].name;for(let m=0;m<f.length;m+=1){let h=Ja(e,f,m),d=c(h);l.set(d,o[m]=il(d,h))}return{key:t,first:null,c(){n=S("div"),u&&u.c(),i=z(),r=S("ul");for(let m=0;m<o.length;m+=1)o[m].c();a=z(),g(r,"class","disabled cells clearfix svelte-t2y606"),g(r,"data-name",s=e[43].name),g(n,"class","svelte-t2y606"),te(n,"group",e[2].length>1),this.first=n},m(m,h){Y(m,n,h),u&&u.m(n,null),_(n,i),_(n,r);for(let d=0;d<o.length;d+=1)o[d]&&o[d].m(r,null);_(n,a)},p(m,h){e=m,e[2].length>1?u?u.p(e,h):(u=nl(e),u.c(),u.m(n,i)):u&&(u.d(1),u=null),h[0]&4&&(f=De(e[43].fields),o=Lt(o,h,c,1,e,f,l,r,At,il,null,Ja)),h[0]&4&&s!==(s=e[43].name)&&g(r,"data-name",s),h[0]&4&&te(n,"group",e[2].length>1)},d(m){m&&X(n),u&&u.d();for(let h=0;h<o.length;h+=1)o[h].d()}}}function Xf(t){let e,n,i,r,o,l,s,a,u,f=[],c=new Map,m,h,d,v,b,w,E=[],D=new Map,p,A,k=De(t[1]);const L=T=>T[49].number;for(let T=0;T<k.length;T+=1){let I=Za(t,k,T),M=L(I);c.set(M,f[T]=tl(M,I))}let C=De(t[2]);const y=T=>T[43].name;for(let T=0;T<C.length;T+=1){let I=Ya(t,C,T),M=y(I);D.set(M,E[T]=rl(M,I))}return{c(){e=S("div"),n=S("div"),i=S("div"),r=S("header"),r.textContent=`${q.translate("Layout","LayoutManager")}`,o=z(),l=S("a"),l.textContent=`${q.translate("Add Panel","Admin")}`,s=z(),a=S("div"),u=S("ul");for(let T=0;T<f.length;T+=1)f[T].c();m=z(),h=S("div"),d=S("div"),v=S("header"),v.textContent=`${q.translate("Available Fields","Admin")}`,b=z(),w=S("div");for(let T=0;T<E.length;T+=1)E[T].c();g(r,"class","svelte-t2y606"),g(l,"href","#"),g(l,"class","svelte-t2y606"),g(u,"class","panels svelte-t2y606"),g(a,"class","rows-wrapper svelte-t2y606"),g(i,"class","well svelte-t2y606"),g(n,"class","col-md-8 svelte-t2y606"),g(v,"class","svelte-t2y606"),g(w,"class","rows-wrapper svelte-t2y606"),g(d,"class","well available-fields svelte-t2y606"),g(h,"class","col-md-4 svelte-t2y606"),g(e,"id","layout"),g(e,"class","row svelte-t2y606")},m(T,I){Y(T,e,I),_(e,n),_(n,i),_(i,r),_(i,o),_(i,l),_(i,s),_(i,a),_(a,u);for(let M=0;M<f.length;M+=1)f[M]&&f[M].m(u,null);_(e,m),_(e,h),_(h,d),_(d,v),_(d,b),_(d,w);for(let M=0;M<E.length;M+=1)E[M]&&E[M].m(w,null);p||(A=ce(l,"click",Ht(t[5])),p=!0)},p(T,I){I[0]&8130&&(k=De(T[1]),f=Lt(f,I,L,1,T,k,c,u,At,tl,null,Za)),I[0]&4&&(C=De(T[2]),E=Lt(E,I,y,1,T,C,D,w,At,rl,null,Ya))},d(T){T&&X(e);for(let I=0;I<f.length;I+=1)f[I].d();for(let I=0;I<E.length;I+=1)E[I].d();p=!1,A()}}}function Yf(t){let e,n;return e=new pa({props:{params:t[0],validate:t[13],fetch:t[4],loadLayout:t[3],$$slots:{default:[Xf]},$$scope:{ctx:t}}}),{c(){Dt(e.$$.fragment)},m(i,r){gt(e,i,r),n=!0},p(i,r){const o={};r[0]&1&&(o.params=i[0]),r[0]&6|r[1]&134217728&&(o.$$scope={dirty:r,ctx:i}),e.$set(o)},i(i){n||(We(e.$$.fragment,i),n=!0)},o(i){Ye(e.$$.fragment,i),n=!1},d(i){vt(e,i)}}}function Jf(t,e){return e.prefix?t.startsWith(e.prefix):!t.includes("__")}const Zf=t=>t.dataTransfer.dropEffect="move",Kf=()=>{},Qf=()=>{};function $f(t,e,n){let{params:i}=e,{columnCount:r=2}=e,o=["id","label","style"],l={label:{type:"varchar"},style:{type:"enum",options:["default","success","danger","primary","info","warning"],translation:"LayoutManager.options.style"}},s=[],a=[],u=[],f=-1,c=-1,m;or();function h(j){let R;const V=[];V.push(new Promise(Z=>{It.get(i.scope,i.type,i.relatedScope,i.layoutProfileId,ae=>{R=ae,Z()},!1)})),i.type==="detail"&&V.push(new Promise(Z=>{It.get(i.scope,"sidePanelsDetail",null,i.layoutProfileId,ae=>{m=ae.layout,Z()},!1)})),Promise.all(V).then(()=>{j&&(E(R.layout),L(),dn().then(()=>{y()}),j(R))})}function d(j,R){const V=R.split("."),Z=de.get(["entityDefs",V[0],"links",V[1]])??{};return Z.entity===j&&Z.relationName?Espo.utils.upperCaseFirst(Z.relationName):""}function v(j,R){return q.translate(R,"fields",j)}function b(j,R){return de.get(["entityDefs",j,"fields",R,"type"])??""}function w(j){return i.fieldTypes?i.fieldTypes.includes(j):!0}function E(j){const R=[];let V="";if(i.relatedScope&&(V=d(i.scope,i.relatedScope),V)){const ee={name:V,scope:V,prefix:V+"__"};let he=Object.keys(de.get(["entityDefs",V,"fields"])||{}).filter(Ee=>w(b(V,Ee))&&p(V,Ee));he=he.filter(Ee=>!(de.get(["entityDefs",V,"fields",Ee,"relationField"])??!1)),he=he.sort((Ee,Me)=>v(V,Ee).localeCompare(v(V,Me))).map(Ee=>ee.prefix+Ee),ee.fields=he,R.push(ee)}let Z=[];const ae=[];for(const ee in de.get(["entityDefs",i.scope,"fields"])||{})p(i.scope,ee)&&(ae.push(q.translate(ee,"fields",i.scope)),Z.push(ee));R.unshift({name:i.scope,scope:i.scope,fields:Z});const ke=[],Ae=[];for(const ee of R)ee.fields=ee.fields.map(he=>{const Ee=v(ee.scope,ee.prefix?he.replace(ee.prefix,""):he);return ee.prefix||(ke.includes(Ee)&&Ae.push(Ee),ke.push(Ee)),{name:he,label:Ee}});n(1,a=j);let Xe=[];j.forEach((ee,he)=>{ee.rows.forEach((Ee,Me)=>{Ee&&Ee.forEach((je,wt)=>{wt==r||!je||Xe.push(je.name)})})}),R[0].fields.forEach(ee=>{Ae.includes(ee.label)&&(ee.label+=` (${ee.name})`);const he=D(ee.name);he&&(he.label=ee.label)}),R[1]&&R[1].fields.forEach(ee=>{ee.label+=" (Relation)";const he=D(ee.name);he&&(he.label=ee.label)});for(const ee of R)ee.fields=ee.fields.filter(he=>!Xe.find(Ee=>Ee===he.name));n(2,u=R.reverse())}function D(j){for(const R of a)for(const V of R.rows)for(const Z of V)if(Z&&Z.name===j)return Z;return null}function p(j,R){if(A()&&s.includes(R))return!1;const V=["disabled",`layout${Bi.upperCaseFirst(i.type)}Disabled`];i.reelType&&V.push(`layout${Bi.upperCaseFirst(i.reelType)}Disabled`);for(let Z of V)if(de.get(["entityDefs",j,"fields",R,Z]))return!1;return!0}function A(){if(de.get(["clientDefs",i.scope,"defaultSidePanelDisabled"]))return!1;if(m){for(const j in m)if(j==="default"&&m[j].disabled)return!1}return!0}function k(){return a.map(j=>({...j,rows:j.rows.map(R=>R.cells)}))}function L(){f=-1,c=-1,n(1,a=a.map((j,R)=>(j.number=R,f=R,j.rows=j.rows.map(V=>({number:c++,cells:V})),j)))}function C(j){ne.create(j,{animation:150,group:"rows",draggable:"li.row",onEnd(R){const V=parseInt(R.to.closest(".panel-layout").getAttribute("data-number")),Z=parseInt(R.from.closest(".panel-layout").getAttribute("data-number"));if(Z===V)n(1,a=a.map(ae=>{if(ae.number===V){const[ke]=ae.rows.splice(R.oldIndex,1);ae.rows.splice(R.newIndex,0,ke)}return ae}));else{const ke=a.find(Ae=>Ae.number===Z).rows[R.oldIndex];n(1,a=a.map(Ae=>(Ae.number===Z&&Ae.rows.splice(R.oldIndex,1),Ae.number===V&&Ae.rows.splice(R.newIndex,0,ke),Ae)))}}})}function y(){const j=document.querySelector("ul.panels");j&&ne.create(j,{animation:150,group:"panels",draggable:"li.panel-layout",onEnd(R){const V=Array.from(R.to.children);n(1,a=V.map(Z=>{const ae=parseInt(Z.getAttribute("data-number"));return a.find(ke=>ke.number===ae)}))}}),document.querySelectorAll("ul.rows").forEach(R=>{C(R)}),document.querySelectorAll("ul.cells.disabled").forEach(R=>{ne.create(R,{animation:150,group:"cells",draggable:"li.cell",onEnd(V){const Z=V.to.closest(".cells.disabled");if(Z&&Z!==R){V.oldIndex>=V.from.children.length?V.from.appendChild(V.item):V.from.insertBefore(V.item,V.from.children[V.oldIndex]);return}}})})}function T(){f++;const j={label:"New panel",rows:[{number:c++,cells:[!1,!1]}],number:f,name:`panel${f}`,isCustomLabel:!0};n(1,a=[...a,j]),dn().then(()=>{const R=document.querySelector(`.panel-layout[data-number="${j.number}"] > .rows`);C(R),R.scrollIntoView()})}function I(j){const R=a.find(Z=>Z.number===j);n(1,a=a.filter(Z=>Z!==R));let V=[];R.rows.forEach(Z=>{Z.cells.forEach(ae=>{ae&&V.push(ae)})}),M(V)}function M(j){n(2,u=u.map(R=>(R.fields=[...j.filter(V=>!!V&&Jf(V.name,R)),...R.fields],R)))}function x(j){n(1,a=a.map(R=>(R.number===j&&(R.rows=[...R.rows,{number:c++,cells:Array(r).fill(!1)}]),R)))}function H(j,R){n(1,a=a.map(V=>{if(V.number===j){const Z=V.rows.find(ae=>ae.number===R);V.rows=V.rows.filter(ae=>ae!=Z),M(Z.cells.filter(ae=>!!ae))}return V}))}function P(j,R,V){n(1,a=a.map(Z=>(Z.number===j&&(Z.rows=Z.rows.map((ae,ke)=>{if(ae.number===R){const Ae=ae.cells[V];Ae&&M([Ae]),ae.cells[V]=!1}return ae})),Z)))}function W(j,R,V,Z){const ae=j.dataTransfer.getData("name");let ke=null;for(const ee of u)if(ke=ee.fields.find(he=>he.name===ae),ke)break;let Ae=null,Xe=null;if(ke)n(2,u=u.map(ee=>(ee.fields=ee.fields.filter(he=>he!==ke),ee)));else{if(a.forEach(ee=>{ee.rows.forEach((he,Ee)=>{he.cells.forEach(Me=>{Me&&Me.name===ae&&(ke=Me,Ae=he.number,Xe=ee.number)})})}),!ke)return;n(1,a=a.map((ee,he)=>(Xe===ee.number&&(ee.rows=ee.rows.map((Ee,Me)=>(Ee.number===Ae&&(Ee.cells=Ee.cells.map((je,wt)=>je&&je.name===ae?!1:je)),Ee))),ee)))}n(1,a=a.map(ee=>(R===ee.number&&(ee.rows=ee.rows.map(he=>(V===he.number&&(he.cells=he.cells.map((Ee,Me)=>Me===Z?(ke.fullWidth&&he.cells.length>1&&delete ke.fullWidth,ke):Ee)),he))),ee)))}function B(j){i.onEditPanel(j,o,l,R=>{n(1,a=a.map(V=>(V.number===j.number&&o.forEach(Z=>{j[Z]=R[Z]}),V)))})}function le(j,R,V){n(1,a=a.map(Z=>(j===Z.number&&(Z.rows=Z.rows.map(ae=>{if(R===ae.number){const ke=ae.cells.filter((Ae,Xe)=>Xe!==V);ke.length===1&&ke[0]&&(ke[0].fullWidth=!0),ae.cells=ke}return ae})),Z)))}function Se(j){let R=0;return j.forEach(V=>{V.rows.forEach(Z=>{Z.forEach(ae=>{ae&&R++})})}),R===0?(tt.notify("Layout cannot be empty.","error"),!1):!0}const we=j=>B(j),pe=j=>I(j.number),$=(j,R)=>H(j.number,R.number),ge=(j,R,V)=>P(j.number,R.number,V),fe=(j,R)=>{R.dataTransfer.setData("name",j.name)},Te=(j,R,V)=>le(j.number,R.number,V),rt=(j,R,V,Z)=>W(Z,j.number,R.number,V),mt=j=>x(j.number),ut=(j,R)=>{R.dataTransfer.setData("name",j.name)};return t.$$set=j=>{"params"in j&&n(0,i=j.params),"columnCount"in j&&n(14,r=j.columnCount)},[i,a,u,h,k,T,I,x,H,P,W,B,le,Se,r,we,pe,$,ge,fe,Te,rt,mt,ut]}class ec extends Ve{constructor(e){super(),Ge(this,e,$f,Yf,Ne,{params:0,columnCount:14},null,[-1,-1])}}function tc(t){let e,n;return e=new t[1]({props:{params:t[0],viewType:t[2]}}),{c(){Dt(e.$$.fragment)},m(i,r){gt(e,i,r),n=!0},p(i,[r]){const o={};r&1&&(o.params=i[0]),e.$set(o)},i(i){n||(We(e.$$.fragment,i),n=!0)},o(i){Ye(e.$$.fragment,i),n=!1},d(i){vt(e,i)}}}function nc(t,e,n){let{params:i}=e,r,o;const l=de.get(["clientDefs",i.scope,"additionalLayouts",i.type])||i.type;switch(l&&(i.reelType=l),t.$$set=s=>{"params"in s&&n(0,i=s.params)},l){case"list":n(1,r=Ar);break;case"leftSidebar":n(1,r=Ar),n(0,i.fieldTypes=["link","linkMultiple"],i);break;case"kanban":n(1,r=Ar),n(0,i.dataAttributeList=["id","name","link","align","view","isLarge","cssStyle"],i),n(0,i.dataAttributesDefs={link:{type:"bool"},isLarge:{type:"bool"},width:{type:"float"},cssStyle:{type:"varchar"},align:{type:"enum",options:["left","right"]},view:{type:"varchar",readOnly:!0},name:{type:"varchar",readOnly:!0}},i);break;case"relationships":n(1,r=Gf);break;case"rightSideView":case"detail":n(1,r=ec);break}return[i,r,o]}class ic extends Ve{constructor(e){super(),Ge(this,e,nc,tc,Ne,{params:0})}}function rc(t){let e,n,i,r,o,l=q.translate("apiRequest","labels","Admin")+"",s,a,u,f,c,m,h,d,v,b,w,E,D,p,A,k,L,C,y,T,I,M,x=q.translate("response","fields","Admin")+"",H,P,W=q.translate("status","labels","Admin")+"",B,le,Se,we,pe,$,ge;return{c(){e=S("div"),n=S("h3"),i=S("div"),r=S("div"),o=S("a"),o.textContent=`${q.translate("Administration")}`,s=Ce(l),a=z(),u=S("div"),u.textContent=`${q.translate("apiRequest","labels","Admin")}`,f=z(),c=S("button"),c.textContent=`${q.translate("execute","labels","Admin")}`,m=z(),h=S("div"),d=S("div"),v=S("div"),b=S("div"),w=S("label"),w.textContent=`${q.translate("Type","fields","Admin")}`,E=z(),D=S("div"),p=z(),A=S("div"),k=S("div"),L=S("label"),L.textContent=`${q.translate("request","fields","Admin")}`,C=z(),y=S("div"),T=z(),I=S("div"),M=S("label"),H=Ce(x),P=S("span"),B=Ce(W),le=Ce(": "),Se=S("span"),we=z(),pe=S("div"),g(o,"href","#Admin"),g(r,"class","breadcrumbs-wrapper"),g(i,"class","header-breadcrumbs fixed-header-breadcrumbs"),g(u,"class","header-title"),se(c,"margin","10px 7px 10px 5px"),g(c,"class","btn btn-primary action"),g(c,"data-action","execute"),g(c,"type","button"),g(e,"class","page-header"),g(w,"class","control-label"),g(w,"data-name","type"),g(D,"class","field"),g(D,"data-name","type"),g(b,"class","col-xs-12 cell form-group"),g(v,"class","row"),g(d,"class","col-sm-3"),g(h,"class","row"),g(L,"class","control-label"),g(L,"data-name","request"),g(y,"class","field"),g(y,"data-name","request"),g(k,"class","col-sm-12 col-md-6 cell form-group"),g(P,"class","pull-right status hidden"),se(M,"width","100%"),g(M,"class","control-label"),g(M,"data-name","response"),g(pe,"class","field"),g(pe,"data-name","response"),g(I,"class","col-sm-12 col-md-6 cell form-group"),g(A,"class","row")},m(fe,Te){Y(fe,e,Te),_(e,n),_(n,i),_(i,r),_(r,o),_(r,s),_(n,a),_(n,u),_(e,f),_(e,c),Y(fe,m,Te),Y(fe,h,Te),_(h,d),_(d,v),_(v,b),_(b,w),_(b,E),_(b,D),Y(fe,p,Te),Y(fe,A,Te),_(A,k),_(k,L),_(k,C),_(k,y),_(A,T),_(A,I),_(I,M),_(M,H),_(M,P),_(P,B),_(P,le),_(P,Se),_(I,we),_(I,pe),$||(ge=ce(c,"click",function(){fi(t[0](t[1]))&&t[0](t[1]).apply(this,arguments)}),$=!0)},p(fe,[Te]){t=fe},i:Ie,o:Ie,d(fe){fe&&(X(e),X(m),X(h),X(p),X(A)),$=!1,ge()}}}function oc(t,e,n){let{afterOnMount:i=()=>null}=e,{sendRequest:r=()=>null}=e,o=null;return un(()=>{cr.create("",function(l){n(1,o=l),i(o)})}),t.$$set=l=>{"afterOnMount"in l&&n(2,i=l.afterOnMount),"sendRequest"in l&&n(0,r=l.sendRequest)},[r,o,i]}class ac extends Ve{constructor(e){super(),Ge(this,e,oc,rc,Ne,{afterOnMount:2,sendRequest:0})}}function ol(t,e,n){const i=t.slice();return i[12]=e[n],i}function al(t){let e,n=t[12].label+"",i,r,o,l,s,a,u;function f(){return t[10](t[12])}return{c(){e=S("button"),i=Ce(n),r=z(),g(e,"data-action",o=t[12].name),e.disabled=t[1],g(e,"type","button"),g(e,"style",l=t[12].cssStyle),g(e,"class",s=`btn action btn-${t[12].style??"default"}`)},m(c,m){Y(c,e,m),_(e,i),_(e,r),a||(u=ce(e,"click",f),a=!0)},p(c,m){t=c,m&1&&n!==(n=t[12].label+"")&&xe(i,n),m&1&&o!==(o=t[12].name)&&g(e,"data-action",o),m&2&&(e.disabled=t[1]),m&1&&l!==(l=t[12].cssStyle)&&g(e,"style",l),m&1&&s!==(s=`btn action btn-${t[12].style??"default"}`)&&g(e,"class",s)},d(c){c&&X(e),a=!1,u()}}}function lc(t){let e,n,i,r=De(t[0]),o=[];for(let a=0;a<r.length;a+=1)o[a]=al(ol(t,r,a));const l=t[9].default,s=Ro(l,t,t[8],null);return{c(){e=S("div");for(let a=0;a<o.length;a+=1)o[a].c();n=z(),s&&s.c(),g(e,"class","button-container"),se(e,"padding-top","10px")},m(a,u){Y(a,e,u);for(let f=0;f<o.length;f+=1)o[f]&&o[f].m(e,null);t[11](e),Y(a,n,u),s&&s.m(a,u),i=!0},p(a,[u]){if(u&11){r=De(a[0]);let f;for(f=0;f<r.length;f+=1){const c=ol(a,r,f);o[f]?o[f].p(c,u):(o[f]=al(c),o[f].c(),o[f].m(e,null))}for(;f<o.length;f+=1)o[f].d(1);o.length=r.length}s&&s.p&&(!i||u&256)&&xo(s,l,a,a[8],i?Fo(l,a[8],u,null):Ho(a[8]),null)},i(a){i||(We(s,a),i=!0)},o(a){Ye(s,a),i=!1},d(a){a&&(X(e),X(n)),sn(o,a),t[11](null),s&&s.d(a)}}}function sc(t,e,n){let{$$slots:i={},$$scope:r}=e,{params:o}=e,{fetch:l}=e,{validate:s=()=>!0}=e,a=!1,{buttonList:u=[{name:"save",label:q.translate("Save","labels"),style:"primary"},{name:"cancel",label:q.translate("Cancel","labels")}]}=e,f;function c(){n(1,a=!0);const v=l();s(v)&&o.onSaved(v),n(1,a=!1)}function m(v){if(v.action){v.action();return}switch(v.name){case"save":c();break}}const h=v=>m(v);function d(v){qe[v?"unshift":"push"](()=>{f=v,n(2,f)})}return t.$$set=v=>{"params"in v&&n(4,o=v.params),"fetch"in v&&n(5,l=v.fetch),"validate"in v&&n(6,s=v.validate),"buttonList"in v&&n(0,u=v.buttonList),"$$scope"in v&&n(8,r=v.$$scope)},[u,a,f,m,o,l,s,c,r,i,h,d]}class uc extends Ve{constructor(e){super(),Ge(this,e,sc,lc,Ne,{params:4,fetch:5,validate:6,buttonList:0,save:7})}get save(){return this.$$.ctx[7]}}function ll(t,e,n){const i=t.slice();return i[22]=e[n],i}function sl(t,e,n){const i=t.slice();return i[22]=e[n],i}function ul(t){let e,n,i;function r(){return t[14](t[22])}return{c(){e=S("a"),e.innerHTML='<i class="fas fa-pencil-alt fa-sm svelte-7ge08f"></i>',g(e,"href","javascript:"),g(e,"data-action","editField"),g(e,"class","edit-field svelte-7ge08f")},m(o,l){Y(o,e,l),n||(i=ce(e,"click",r),n=!0)},p(o,l){t=o},d(o){o&&X(e),n=!1,i()}}}function fl(t){let e,n,i;function r(){return t[15](t[22])}return{c(){e=S("a"),e.innerHTML='<i class="fas fa-times"></i>',g(e,"href","javascript:"),g(e,"data-action","removeField"),g(e,"class","remove-field svelte-7ge08f")},m(o,l){Y(o,e,l),n||(i=ce(e,"click",r),n=!0)},p(o,l){t=o},d(o){o&&X(e),n=!1,i()}}}function cl(t,e){let n,i,r,o=e[22].label+"",l,s,a,u,f,c,m,h=e[22].canEdit&&ul(e),d=e[22].canRemove&&fl(e),v=[Fi(e[22]),{class:m=(e[22].isGroup?"group":"")+" "+(e[22].groupEnd?"end":"")+" "+(e[1][e[22].name]&&!e[22].isGroup?"in-group":"")}],b={};for(let w=0;w<v.length;w+=1)b=Fn(b,v[w]);return{key:t,first:null,c(){n=S("li"),i=S("div"),r=S("label"),l=Ce(o),a=z(),u=S("div"),h&&h.c(),f=z(),d&&d.c(),c=z(),g(r,"title",s=e[22].label),g(r,"class","svelte-7ge08f"),g(i,"class","left svelte-7ge08f"),g(u,"class","right svelte-7ge08f"),Wt(n,b),te(n,"svelte-7ge08f",!0),this.first=n},m(w,E){Y(w,n,E),_(n,i),_(i,r),_(r,l),_(n,a),_(n,u),h&&h.m(u,null),_(u,f),d&&d.m(u,null),_(n,c)},p(w,E){e=w,E&1&&o!==(o=e[22].label+"")&&xe(l,o),E&1&&s!==(s=e[22].label)&&g(r,"title",s),e[22].canEdit?h?h.p(e,E):(h=ul(e),h.c(),h.m(u,f)):h&&(h.d(1),h=null),e[22].canRemove?d?d.p(e,E):(d=fl(e),d.c(),d.m(u,null)):d&&(d.d(1),d=null),Wt(n,b=bi(v,[E&1&&Fi(e[22]),E&3&&m!==(m=(e[22].isGroup?"group":"")+" "+(e[22].groupEnd?"end":"")+" "+(e[1][e[22].name]&&!e[22].isGroup?"in-group":""))&&{class:m}])),te(n,"svelte-7ge08f",!0)},d(w){w&&X(n),h&&h.d(),d&&d.d()}}}function dl(t,e){let n,i,r,o=e[22].label+"",l,s,a,u=[Fi(e[22])],f={};for(let c=0;c<u.length;c+=1)f=Fn(f,u[c]);return{key:t,first:null,c(){n=S("li"),i=S("div"),r=S("label"),l=Ce(o),a=z(),g(r,"title",s=e[22].label),g(r,"class","svelte-7ge08f"),g(i,"class","left svelte-7ge08f"),Wt(n,f),te(n,"svelte-7ge08f",!0),this.first=n},m(c,m){Y(c,n,m),_(n,i),_(i,r),_(r,l),_(n,a)},p(c,m){e=c,m&8&&o!==(o=e[22].label+"")&&xe(l,o),m&8&&s!==(s=e[22].label)&&g(r,"title",s),Wt(n,f=bi(u,[m&8&&Fi(e[22])])),te(n,"svelte-7ge08f",!0)},d(c){c&&X(n)}}}function fc(t){let e,n,i,r,o,l,s,a=[],u=new Map,f,c,m,h,d,v,b,w,E,D=[],p=new Map,A=De(t[0].sort(ml));const k=y=>y[22].name;for(let y=0;y<A.length;y+=1){let T=sl(t,A,y),I=k(T);u.set(I,a[y]=cl(I,T))}let L=De(t[3]);const C=y=>y[22].name;for(let y=0;y<L.length;y+=1){let T=ll(t,L,y),I=C(T);p.set(I,D[y]=dl(I,T))}return{c(){e=S("div"),n=S("div"),i=S("div"),r=S("header"),r.textContent=`${q.translate("Selected","labels","Admin")}`,o=z(),l=S("div"),s=S("ul");for(let y=0;y<a.length;y+=1)a[y].c();f=z(),c=S("div"),m=z(),h=S("div"),d=S("div"),v=S("header"),v.textContent=`${q.translate("Available","labels","Admin")}`,b=z(),w=S("div"),E=S("ul");for(let y=0;y<D.length;y+=1)D[y].c();g(r,"class","svelte-7ge08f"),g(s,"class","enabled connected svelte-7ge08f"),g(l,"class","rows-wrapper svelte-7ge08f"),g(i,"class","well svelte-7ge08f"),g(n,"class","col-sm-5 svelte-7ge08f"),g(c,"class","col-sm-2 svelte-7ge08f"),g(v,"class","svelte-7ge08f"),g(E,"class","disabled connected svelte-7ge08f"),g(w,"class","rows-wrapper svelte-7ge08f"),g(d,"class","well svelte-7ge08f"),g(h,"class","col-sm-5 svelte-7ge08f"),g(e,"id","layout"),g(e,"class","row svelte-7ge08f")},m(y,T){Y(y,e,T),_(e,n),_(n,i),_(i,r),_(i,o),_(i,l),_(l,s);for(let I=0;I<a.length;I+=1)a[I]&&a[I].m(s,null);_(e,f),_(e,c),_(e,m),_(e,h),_(h,d),_(d,v),_(d,b),_(d,w),_(w,E);for(let I=0;I<D.length;I+=1)D[I]&&D[I].m(E,null);t[16](e)},p(y,T){T&2115&&(A=De(y[0].sort(ml)),a=Lt(a,T,k,1,y,A,u,s,At,cl,null,sl)),T&8&&(L=De(y[3]),D=Lt(D,T,C,1,y,L,p,E,At,dl,null,ll))},d(y){y&&X(e);for(let T=0;T<a.length;T+=1)a[T].d();for(let T=0;T<D.length;T+=1)D[T].d();t[16](null)}}}function cc(t){let e,n,i={params:t[2],validate:t[8],fetch:t[7],loadData:t[5],buttonList:t[4],$$slots:{default:[fc]},$$scope:{ctx:t}};return e=new uc({props:i}),t[17](e),{c(){Dt(e.$$.fragment)},m(r,o){gt(e,r,o),n=!0},p(r,[o]){const l={};o&4&&(l.params=r[2]),o&256&&(l.validate=r[8]),o&128&&(l.fetch=r[7]),o&32&&(l.loadData=r[5]),o&16&&(l.buttonList=r[4]),o&134218315&&(l.$$scope={dirty:o,ctx:r}),e.$set(l)},i(r){n||(We(e.$$.fragment,r),n=!0)},o(r){Ye(e.$$.fragment,r),n=!1},d(r){t[17](null),vt(e,r)}}}function dc(t){return t.toLowerCase()}function pl(t,e){return t[e]}function Fi(t){let e={};return["name","id"].forEach(n=>{pl(t,n)!=null&&(e[`data-${dc(n)}`]=pl(t,n))}),e}const ml=(t,e)=>t.sortOrder-e.sortOrder;function pc(t,e,n){let i,r,o,{params:l}=e,{enabledItems:s=[]}=e,{disabledItems:a=[]}=e,{buttonList:u}=e,{loadData:f}=e,{refresh:c=()=>{}}=e,{editItem:m}=e,{getGroupId:h=()=>"id"}=e,{fieldsInGroup:d}=e,v;function b(y){let T=!1,I={};y.forEach(M=>{if(M.isGroup){T=M.name!=="";return}T&&(I[M.name]=!0)}),n(1,d=I)}un(()=>{w()}),rr(()=>{r&&r.destroy(),o&&o.destroy()});function w(){const y={group:"fields",draggable:"li",animation:150};r=ne.create(i.querySelector("ul.enabled"),{...y,onEnd(T){if(T.to.closest(".connected").classList.contains("enabled")){const[I]=s.splice(T.oldIndex,1);s.splice(T.newIndex,0,I);for(let M=T.newIndex;M<s.length;M++)n(0,s[M].sortOrder=(M>0?s[M-1].sortOrder:0)+M,s);b(s),c()}else{const I=s[T.oldIndex];if(I.canDisabled===!1){c();return}s.splice(T.oldIndex,1),a.splice(T.newIndex,0,I),c()}}}),o=ne.create(i.querySelector("ul.disabled"),{...y,onEnd(T){if(T.to.closest(".connected").classList.contains("disabled")){const[I]=a.splice(T.oldIndex,1);a.splice(T.newIndex,0,I)}else{const I=a[T.oldIndex];a.splice(T.oldIndex,1),s.splice(T.newIndex,0,I);for(let M=T.newIndex;M<s.length;M++)n(0,s[M].sortOrder=(M>0?s[M-1].sortOrder:0)+M,s);b(s),c()}}})}let{fetch:E=()=>{let y=[],T=!1,I=!1;for(let P=0;P<s.length;P++){const W=s[P];if(W.isGroup){T=!W.groupEnd,y.push({id:W.id,name:W.name,color:W.color,iconClass:W.iconClass,items:[]});continue}T?y[y.length-1].items.push(W.name):y.push(W.name)}let M=!1,x=y.filter(P=>{if(typeof P=="object"){if(P.name!==""&&!P.items.length)return!1;if(P.name!==""&&P.items.length)return M=!0,!0;if(P.name===""&&M)return M=!1,!0;if(P.name===""&&!M)return!1}return!0});I=x.length!==y.length,y=x;let H=[];for(let P=0;P<y.length;P++){let W=y[P];H.push(W),typeof W=="object"&&W.name!==""&&(P===y.length-1||!(typeof y[P+1]=="object"&&y[P+1].name===""))&&(I=!0,H.push({id:h(),name:"",items:[]}))}return{adjusted:I,navigation:H}}}=e;function D(y){s.splice(s.findIndex(T=>T.id===y.id),1),c()}let{validate:p=y=>y.length===0?(tt.notify("Menu cannot be empty","error"),!1):!0}=e;const A=y=>m(y),k=y=>D(y);function L(y){qe[y?"unshift":"push"](()=>{i=y,n(9,i)})}function C(y){qe[y?"unshift":"push"](()=>{v=y,n(10,v)})}return t.$$set=y=>{"params"in y&&n(2,l=y.params),"enabledItems"in y&&n(0,s=y.enabledItems),"disabledItems"in y&&n(3,a=y.disabledItems),"buttonList"in y&&n(4,u=y.buttonList),"loadData"in y&&n(5,f=y.loadData),"refresh"in y&&n(12,c=y.refresh),"editItem"in y&&n(6,m=y.editItem),"getGroupId"in y&&n(13,h=y.getGroupId),"fieldsInGroup"in y&&n(1,d=y.fieldsInGroup),"fetch"in y&&n(7,E=y.fetch),"validate"in y&&n(8,p=y.validate)},t.$$.update=()=>{t.$$.dirty&1&&b(s)},[s,d,l,a,u,f,m,E,p,i,v,D,c,h,A,k,L,C]}class hl extends Ve{constructor(e){super(),Ge(this,e,pc,cc,Ne,{params:2,enabledItems:0,disabledItems:3,buttonList:4,loadData:5,refresh:12,editItem:6,getGroupId:13,fieldsInGroup:1,fetch:7,validate:8})}}function gl(t){let e,n,i={params:t[0],enabledItems:t[2],disabledItems:t[4],buttonList:t[6],fieldsInGroup:t[5],refresh:t[7],editItem:t[8],getGroupId:Qn};return e=new hl({props:i}),t[9](e),{c(){Dt(e.$$.fragment)},m(r,o){gt(e,r,o),n=!0},p(r,o){const l={};o&1&&(l.params=r[0]),o&4&&(l.enabledItems=r[2]),e.$set(l)},i(r){n||(We(e.$$.fragment,r),n=!0)},o(r){Ye(e.$$.fragment,r),n=!1},d(r){t[9](null),vt(e,r)}}}function mc(t){let e,n=t[3],i,r=gl(t);return{c(){e=S("div"),r.c()},m(o,l){Y(o,e,l),r.m(e,null),i=!0},p(o,[l]){l&8&&Ne(n,n=o[3])?(Qo(),Ye(r,1,1,Ie),$o(),r=gl(o),r.c(),We(r,1),r.m(e,null)):r.p(o,l)},i(o){i||(We(r),i=!0)},o(o){Ye(r),i=!1},d(o){o&&X(e),r.d(o)}}}let hc="_delimiter_";function Qn(){return hc+gc()}function gc(){return Math.floor((1+Math.random())*4294967296).toString(16).substring(1)}function vc(t,e,n){let{params:i}=e,r,o=[],l=[],s=0,a={},u=[{name:"save",label:q.translate("Save","labels"),style:"primary"},{name:"cancel",label:q.translate("Cancel","labels")},{name:"addGroup",label:q.translate("addGroup","labels"),cssStyle:"margin-left: 30px",action:()=>{i.onEditItem({id:Qn(),groupEnd:!1},d=>{let v=10;o.length&&(v=o[o.length-1].sortOrder+10);let b={isGroup:!0,canEdit:!0,canRemove:!0,isGroup:!0,canDisabled:!1,name:"",label:"",sortOrder:v,...d};o.push(b),b.name!==""&&o.push({id:Qn(),isGroup:!0,canEdit:!0,canRemove:!0,isGroup:!0,canDisabled:!1,groupEnd:!0,name:"",label:"",sortOrder:b.sortOrder+1}),f()})}}];function f(){n(3,s++,s)}function c(d){i.onEditItem(d,v=>{let b=o.findIndex(w=>w.id===v.id);n(2,o[b]=v,o),f()})}m();function m(){let d=i.list??[],v=0;for(let b=0;b<d.length;b++){let w=d[b];if(typeof w=="string")de.get(["scopes",w,"tab"])&&o.push({name:w,label:q.translate(w,"scopeNamesPlural"),sortOrder:v}),v++;else if(typeof w=="object"){o.push({id:w.id??Qn(),canEdit:!0,canRemove:!0,isGroup:!0,canDisabled:!1,groupEnd:w.name==="",name:w.name,label:w.name,iconClass:w.iconClass||null,sortOrder:v}),v++;for(const E of w.items)de.get(["scopes",E,"tab"])&&(o.push({name:E,label:q.translate(E,"scopeNamesPlural"),sortOrder:v}),v++);if(b<d.length-1&&d[b+1].name==="")continue;w.name!==""&&(b===d.length-1||typeof d[b+b]=="string"||w.items.length===0)&&(o.push({id:Qn(),canEdit:!0,canRemove:!0,canDisabled:!1,isGroup:!0,groupEnd:!0,name:"",label:"",iconClass:w.iconClass||null,sortOrder:v}),v++)}}Object.entries(de.get(["scopes"])).forEach(([b,w])=>{w.disabled||w.emHidden||!w.tab||o.find(E=>E.name===b)||l.push({name:b,label:q.translate(b,"scopeNamesPlural")})}),l.sort((b,w)=>b.label.localeCompare(w.label))}function h(d){qe[d?"unshift":"push"](()=>{r=d,n(1,r)})}return t.$$set=d=>{"params"in d&&n(0,i=d.params)},[i,r,o,s,l,a,u,f,c,h]}class bc extends Ve{constructor(e){super(),Ge(this,e,vc,mc,Ne,{params:0})}}function vl(t){let e,n,i={params:t[0],enabledItems:t[3],disabledItems:t[4],buttonList:t[6],fieldsInGroup:t[5],refresh:t[7],validate:wc};return e=new hl({props:i}),t[8](e),{c(){Dt(e.$$.fragment)},m(r,o){gt(e,r,o),n=!0},p(r,o){const l={};o&1&&(l.params=r[0]),e.$set(l)},i(r){n||(We(e.$$.fragment,r),n=!0)},o(r){Ye(e.$$.fragment,r),n=!1},d(r){t[8](null),vt(e,r)}}}function yc(t){let e,n=t[2],i,r=vl(t);return{c(){e=S("div"),r.c()},m(o,l){Y(o,e,l),r.m(e,null),i=!0},p(o,[l]){l&4&&Ne(n,n=o[2])?(Qo(),Ye(r,1,1,Ie),$o(),r=vl(o),r.c(),We(r,1),r.m(e,null)):r.p(o,l)},i(o){i||(We(r),i=!0)},o(o){Ye(r),i=!1},d(o){o&&X(e),r.d(o)}}}function wc(t){return!0}function _c(t,e,n){let{params:i}=e,r,o=[],l=[],s=0,a={},u=[{name:"save",label:q.translate("Save","labels"),style:"primary"},{name:"cancel",label:q.translate("Cancel","labels")}];function f(){n(2,s++,s)}c();function c(){let h=i.list??[],d=0;for(let v=0;v<h.length;v++){let b=h[v];typeof b=="string"&&(de.get(["scopes",b,"tab"])&&o.push({name:b,label:q.translate(b,"scopeNamesPlural"),sortOrder:d}),d++)}Object.entries(de.get(["scopes"])).forEach(([v,b])=>{b.disabled||b.emHidden||!b.tab||o.find(w=>w.name===v)||l.push({name:v,label:q.translate(v,"scopeNamesPlural")})}),l.sort((v,b)=>v.label.localeCompare(b.label))}function m(h){qe[h?"unshift":"push"](()=>{r=h,n(1,r)})}return t.$$set=h=>{"params"in h&&n(0,i=h.params)},[i,r,s,o,l,a,u,f,m]}class Ec extends Ve{constructor(e){super(),Ge(this,e,_c,yc,Ne,{params:0})}}function bl(t,{delay:e=0,duration:n=400,easing:i=Po}={}){const r=+getComputedStyle(t).opacity;return{delay:e,duration:n,easing:i,css:o=>`opacity: ${o*r}`}}function yl(t,e,n){const i=t.slice();return i[65]=e[n],i}function wl(t,e,n){const i=t.slice();return i[68]=e[n],i}function kc(t){let e,n,i,r,o,l,s=De(t[5]),a=[];for(let f=0;f<s.length;f+=1)a[f]=_l(wl(t,s,f));let u=t[1]&&El(t);return{c(){e=S("div"),n=S("div");for(let f=0;f<a.length;f+=1)a[f].c();i=z(),r=S("hr"),o=z(),u&&u.c(),l=pi(),g(n,"class","btn-group"),g(e,"class","panel-group"),se(e,"margin-bottom","10px"),se(e,"margin-top","-10px"),se(r,"margin","0 -10px")},m(f,c){Y(f,e,c),_(e,n);for(let m=0;m<a.length;m+=1)a[m]&&a[m].m(n,null);Y(f,i,c),Y(f,r,c),Y(f,o,c),u&&u.m(f,c),Y(f,l,c)},p(f,c){if(c[0]&131106){s=De(f[5]);let m;for(m=0;m<s.length;m+=1){const h=wl(f,s,m);a[m]?a[m].p(h,c):(a[m]=_l(h),a[m].c(),a[m].m(n,null))}for(;m<a.length;m+=1)a[m].d(1);a.length=s.length}f[1]?u?u.p(f,c):(u=El(f),u.c(),u.m(l.parentNode,l)):u&&(u.d(1),u=null)},d(f){f&&(X(e),X(i),X(r),X(o),X(l)),sn(a,f),u&&u.d(f)}}}function _l(t){let e,n=t[68].label+"",i,r,o,l;function s(){return t[42](t[68])}return{c(){e=S("a"),i=Ce(n),r=z(),g(e,"href","javascript:"),g(e,"class","btn btn-link tree-item svelte-1y8n9cg"),te(e,"active",t[68].name===t[1].name)},m(a,u){Y(a,e,u),_(e,i),_(e,r),o||(l=ce(e,"click",s),o=!0)},p(a,u){t=a,u[0]&32&&n!==(n=t[68].label+"")&&xe(i,n),u[0]&34&&te(e,"active",t[68].name===t[1].name)},d(a){a&&X(e),o=!1,l()}}}function El(t){let e,n,i=t[1].label+"",r,o,l,s,a,u,f,c,m,h,d,v,b,w,E,D,p,A,k,L,C,y,T,I,M,x=De(t[11]),H=[];for(let P=0;P<x.length;P+=1)H[P]=kl(yl(t,x,P));return{c(){e=S("div"),n=S("h5"),r=Ce(i),o=z(),l=S("div"),s=S("input"),a=z(),u=S("button"),f=z(),c=S("button"),m=z(),h=S("div"),d=S("button"),v=Ce("Unset selection"),w=z(),E=S("div"),D=S("button"),p=S("i"),L=z(),C=S("select");for(let P=0;P<H.length;P+=1)H[P].c();y=z(),T=S("div"),T.innerHTML="",se(n,"margin","20px 0"),se(n,"font-weight","bold"),se(n,"font-size","16px"),g(s,"type","text"),g(s,"class","form-control category-search search-in-tree-input"),g(s,"tabindex","1"),g(s,"placeholder","Type and press Enter..."),g(u,"class","fas fa-times reset-search-in-tree-button"),te(u,"hidden",!t[6]),g(c,"class","fas fa-search search-in-tree-button"),g(l,"class","field"),g(l,"data-name","category-search"),g(d,"type","button"),se(d,"margin-bottom","5px"),d.disabled=b=!t[7]||!t[12],g(d,"class","btn btn-default"),g(p,"class",A=Wo("fas "+(t[9]?"fa-sort-amount-up":"fa-sort-amount-down"))+" svelte-1y8n9cg"),g(D,"type","button"),g(D,"class","btn btn-default sort-btn svelte-1y8n9cg"),g(D,"data-tippy","true"),g(D,"title",k=q.translateOption(t[9]?"asc":"desc","sortDirection","Entity")),g(C,"class","form-control"),se(C,"width","auto"),se(C,"max-width","120px"),t[10]===void 0&&pn(()=>t[45].call(C)),g(E,"class","btn-group"),se(h,"margin-top","20px"),se(h,"display","flex"),se(h,"justify-content","space-between"),se(h,"flex-wrap","wrap"),g(e,"class","panel-group category-search"),se(e,"margin-bottom","20px"),g(T,"class","panel-group category-tree")},m(P,W){Y(P,e,W),_(e,n),_(n,r),_(e,o),_(e,l),_(l,s),t[43](s),_(l,a),_(l,u),_(l,f),_(l,c),_(e,m),_(e,h),_(h,d),_(d,v),_(h,w),_(h,E),_(E,D),_(D,p),_(E,L),_(E,C);for(let B=0;B<H.length;B+=1)H[B]&&H[B].m(C,null);Vo(C,t[10],!0),Y(P,y,W),Y(P,T,W),t[46](T),I||(M=[ce(s,"keydown",t[44]),ce(u,"click",t[18]),ce(c,"click",t[19]),ce(d,"click",t[16]),ce(D,"click",t[21]),ce(C,"change",t[20]),ce(C,"change",t[45])],I=!0)},p(P,W){if(W[0]&2&&i!==(i=P[1].label+"")&&xe(r,i),W[0]&64&&te(u,"hidden",!P[6]),W[0]&4224&&b!==(b=!P[7]||!P[12])&&(d.disabled=b),W[0]&512&&A!==(A=Wo("fas "+(P[9]?"fa-sort-amount-up":"fa-sort-amount-down"))+" svelte-1y8n9cg")&&g(p,"class",A),W[0]&512&&k!==(k=q.translateOption(P[9]?"asc":"desc","sortDirection","Entity"))&&g(D,"title",k),W[0]&2048){x=De(P[11]);let B;for(B=0;B<x.length;B+=1){const le=yl(P,x,B);H[B]?H[B].p(le,W):(H[B]=kl(le),H[B].c(),H[B].m(C,null))}for(;B<H.length;B+=1)H[B].d(1);H.length=x.length}W[0]&3072&&Vo(C,P[10])},d(P){P&&(X(e),X(y),X(T)),t[43](null),sn(H,P),t[46](null),I=!1,at(M)}}}function kl(t){let e,n=t[65].label+"",i,r,o;return{c(){e=S("option"),i=Ce(n),r=z(),e.__value=o=t[65].name,Go(e,e.__value)},m(l,s){Y(l,e,s),_(e,i),_(e,r)},p(l,s){s[0]&2048&&n!==(n=l[65].label+"")&&xe(i,n),s[0]&2048&&o!==(o=l[65].name)&&(e.__value=o,Go(e,e.__value))},d(l){l&&X(e)}}}function Dl(t){let e,n,i;return{c(){e=S("div"),g(e,"class","category-panel-resizer svelte-1y8n9cg")},m(r,o){Y(r,e,o),n||(i=ce(e,"mousedown",t[15]),n=!0)},p:Ie,d(r){r&&X(e),n=!1,i()}}}function Dc(t){let e,n,i,r,o,l,s,a,u,f,c,m,h,d,v;function b(p,A){if(p[5].length>0)return kc}let w=b(t),E=w&&w(t),D=!t[0]&&Dl(t);return{c(){e=S("aside"),n=S("button"),i=S("span"),r=z(),o=S("span"),l=z(),s=S("div"),a=S("div"),u=S("div"),f=z(),E&&E.c(),c=z(),D&&D.c(),g(i,"class","toggle-icon-left fas fa-angle-left"),te(i,"hidden",t[0]),g(o,"class","toggle-icon-right fas fa-angle-right"),te(o,"hidden",!t[0]),g(n,"type","button"),g(n,"class","btn btn-link collapse-panel"),te(n,"collapsed",t[0]),se(u,"margin-right","20px"),g(u,"class","layout-editor-container"),se(a,"display","flex"),se(a,"flex-direction","row-reverse"),se(a,"align-items","center"),se(a,"height","35px"),g(s,"class","category-panel"),te(s,"hidden",t[0]),g(e,"class","catalog-tree-panel"),se(e,"width",t[13]),te(e,"collapsed",t[0]),te(e,"catalog-tree-panel-hidden",t[0]),te(e,"hidden",t[8])},m(p,A){Y(p,e,A),_(e,n),_(n,i),_(n,r),_(n,o),_(e,l),_(e,s),_(s,a),_(a,u),t[41](u),_(s,f),E&&E.m(s,null),_(s,c),D&&D.m(s,null),h=!0,d||(v=ce(n,"click",t[14]),d=!0)},p(p,A){(!h||A[0]&1)&&te(i,"hidden",p[0]),(!h||A[0]&1)&&te(o,"hidden",!p[0]),(!h||A[0]&1)&&te(n,"collapsed",p[0]),w===(w=b(p))&&E?E.p(p,A):(E&&E.d(1),E=w&&w(p),E&&(E.c(),E.m(s,c))),p[0]?D&&(D.d(1),D=null):D?D.p(p,A):(D=Dl(p),D.c(),D.m(s,null)),(!h||A[0]&1)&&te(s,"hidden",p[0]),(!h||A[0]&8192)&&se(e,"width",p[13]),(!h||A[0]&1)&&te(e,"collapsed",p[0]),(!h||A[0]&1)&&te(e,"catalog-tree-panel-hidden",p[0]),(!h||A[0]&256)&&te(e,"hidden",p[8])},i(p){h||(p&&pn(()=>{h&&(m||(m=ea(e,bl,{},!0)),m.run(1))}),h=!0)},o(p){p&&(m||(m=ea(e,bl,{},!1)),m.run(0)),h=!1},d(p){p&&X(e),t[41](null),E&&E.d(),D&&D.d(),p&&m&&m.end(),d=!1,v()}}}function Sc(t){let e=[];return(t||"").split("|").forEach(n=>{n&&e.push(n)}),e}function Cc(t,e,n){((n||t.tree("getTree")).children||[]).findIndex(o=>e.id===o.id)===-1&&t.tree("appendNode",e,n)}function Tc(t,e,n){((n||t.tree("getTree")).children||[]).findIndex(o=>e.id===o.id)===-1&&t.tree("prependNode",e,n)}function Lr(t,e,n){if(!Array.isArray(e)||e.length===0){n();return}const i=e[0];let r=t.find(`.jqtree-title[data-id="${i}"]`);r.length>0&&r.each((o,l)=>{if(l=window.$(l),l.parent().parent().hasClass("jqtree-closed")){let a=t.tree("getNodeByHtmlElement",l);t.tree("openNode",a,!1,()=>Lr(t,e.slice(1),n))}else Lr(t,e.slice(1),n)})}function Oc(t,e,n){let i,r,{scope:o}=e,{model:l}=e,{collection:s}=e,{callbacks:a}=e,{minWidth:u=220}=e,{maxWidth:f=600}=e,{currentWidth:c=u}=e,{isCollapsed:m=!1}=e,{mode:h}=e,{maxSize:d=oa.get("recordsPerPageSmall")||20}=e,{renderLayoutEditor:v}=e;or();let b,w,E,D=!1,p,A,k=[],L,C="",y,T,I,M=!1,x=!0,H=null,P=[];function W(N){s&&N.name===o&&_e.set("treeWhereData",o,N.where),m||pe()}function B(){n(0,m=!m),m?(window.$(".page-header").addClass("collapsed").removeClass("not-collapsed"),window.$("#tree-list-table").addClass("collapsed")):(window.$(".page-header").removeClass("collapsed").addClass("not-collapsed"),window.$("#tree-list-table").removeClass("collapsed")),_e.set("catalog-tree-panel",o,m?"collapsed":""),m||pe()}function le(N){if(!D)return;N.preventDefault();const ie=A+(N.pageX-p);ie>=u&&ie<=f&&n(22,c=ie)}function Se(N){D=!0,p=N.pageX,A=c,document.addEventListener("mousemove",le),document.addEventListener("mouseup",we,{once:!0}),document.body.style.userSelect="none"}function we(){D&&(D=!1,_e.set("panelWidth",o,c.toString()),document.removeEventListener("mousemove",le),document.body.style.userSelect="")}function pe(){$(),fe()}function $(){let N=window.$(b);N&&N.tree("destroy")}function ge(){let N=_e.get("treeWhereData",o)||[];return["_self","_bookmark"].includes(L.name)||(N=[]),N}function fe(N=null){if(!L)return;let ie=window.$(b),K=ge();if(N===null&&C&&de.get(["scopes",y,"type"])==="Hierarchy"&&!de.get(["scopes",y,"hierarchyDisabled"])){K.push({type:"textFilter",value:C}),Espo.ajax.getRequest(`${y}/action/TreeData`,{where:K,scope:o,link:L.name,sortBy:H,asc:!!x}).then(O=>{fe(O.tree)});return}let ve={dataUrl:rt(),dataFilter:(function(O){return V(O)}).bind(this),selectable:!0,saveState:!1,autoOpen:!1,dragAndDrop:de.get(["scopes",y,"multiParents"])!==!0&&de.get(["scopes",y,"dragAndDrop"])&&H==="sortOrder",useContextMenu:!1,closedIcon:window.$('<i class="fa fa-angle-right"></i>'),openedIcon:window.$('<i class="fa fa-angle-down"></i>'),onCreateLi:(function(O,F,U){O.disabled?F.addClass("disabled"):F.removeClass("disabled");const re=F.find(".jqtree-title");if(C){let me=C.replace(/\*/g,"");if(me.length>0){let ze=re.html(),Qe=ze.match(new RegExp(me,"ig"));if(Qe){let Bt=[];Qe.forEach($t=>{Bt.includes($t)||(Bt.push($t),re.html(ze.replace(new RegExp($t,"g"),`<b>${$t}</b>`)))})}}}["_self","_bookmark"].includes(L.name)&&l&&l.get("id")===O.id&&(ie.tree("addToSelection",O),F.addClass("jqtree-selected")),!["_self","_bookmark"].includes(L.name)&&I===O.id&&(ie.tree("addToSelection",O),F.addClass("jqtree-selected")),re.attr("data-id",O.id),ve.dragAndDrop&&!O.showMoreDirection&&re.attr("title",q.translate("useDragAndDrop")),O.showMoreDirection&&(F.addClass("show-more"),F.addClass("show-more-"+O.showMoreDirection),F.find(".jqtree-title").addClass("more-label"))}).bind(this)};N&&(ve.data=N,ve.autoOpen=!0,ve.dragAndDrop=!1,delete ve.dataUrl,delete ve.dataFilter),ie.tree(ve),ie.on("tree.load_data",O=>{tt.notify(!1),a!=null&&a.treeLoad&&a.treeLoad(y,ve)}),ie.on("tree.refresh",O=>{if(_e.get("selectedNodeId",o)&&h==="list"){const F=_e.get("selectedNodeId",o),U=_e.get("selectedNodeRoute",o);a!=null&&a.selectNode&&a.selectNode({id:F,route:U},!0)}h==="detail"&&(l&&["_self","_bookmark"].includes(L.name)?mt(l.get("id"),Object.keys(l.get("hierarchyRoute")??[]).reverse()):_e.get("selectedNodeId",o)&&mt(_e.get("selectedNodeId",o),Sc(_e.get("selectedNodeRoute",o))))}),ie.on("tree.move",O=>{O.preventDefault();const F="parent";let U=O.move_info,re={_position:U.position,_sortAsc:x,_target:U.target_node.id};re[F+"Id"]=null,re[F+"Name"]=null,U.position==="inside"?(re[F+"Id"]=U.target_node.id,re[F+"Name"]=U.target_node.name):U.target_node.parent.id&&(re[F+"Id"]=U.target_node.parent.id,re[F+"Name"]=U.target_node.parent.name),Espo.ajax.patchRequest(`${y}/${U.moved_node.id}`,re).success(me=>{U.do_move()})}),ie.on("tree.click",O=>{if(O.preventDefault(),O.node.disabled)return!1;const F=window.$(O.click_event.target);if(F.hasClass("jqtree-title")||F.parent().hasClass("jqtree-title")){let U=O.node;if(U.showMoreDirection)return Te(U);let re=[];for(;U.parent.id;)re.push(U.parent.id),U=U.parent;let me={id:O.node.id,route:"",click:!0};re.length>0&&(me.route="|"+re.reverse().join("|")+"|"),a!=null&&a.selectNode&&a.selectNode(me)}})}function Te(N){tt.notify("Loading..."),Espo.ajax.getRequest(rt(N)).then(ie=>{if(ie.list){const K=window.$(b);N.showMoreDirection==="up"?V(JSON.parse(JSON.stringify(ie)),"up").reverse().forEach(ve=>{Tc(K,ve,N.getParent())}):N.showMoreDirection==="down"&&V(JSON.parse(JSON.stringify(ie)),"down").forEach(ve=>{Cc(K,ve,N.getParent())}),K.tree("removeNode",N)}})}function rt(N){let ie=y+`/action/Tree?isTreePanel=1&scope=${o}&link=${L.name}`;if(H&&(ie+=`&sortBy=${H}&asc=${x?"true":"false"}`),N&&N.showMoreDirection){let ve=N.offset,O=d;if(N.showMoreDirection==="up"){let F=N.offset-O;ve=N.offset-O,F<0?(ve=0,O=O+F):ve=F}else N.showMoreDirection==="down"&&(ve=ve+1);ie+="&offset="+ve+"&maxSize="+O,N.getParent()&&(ie+="&node="+N.getParent().id)}else N&&N.id?ie+="&node="+N.id+"&offset=0&maxSize="+d:l&&l.id&&[l.urlRoot,"Bookmark"].includes(y)&&(ie+="&selectedId="+l.id);let K=ge();return C&&(K=[...K,{type:"textFilter",value:C}]),K.length>0&&(ie+="&",ie+=window.$.param({where:K})),ie}function mt(N,ie){const K=window.$(b);Lr(K,ie,()=>{let O=K.tree("getNodeById",N);O&&(K.tree("addToSelection",O),n(7,I=N)),K.find(".jqtree-title").each((F,U)=>{U=window.$(U);let re=U.parent().parent();U.data("id")!==N&&K.tree("getNodeById",U.data("id"))?(K.tree("removeFromSelection",K.tree("getNodeById",U.data("id"))),re.removeClass("jqtree-selected")):re.hasClass("jqtree-selected")||re.addClass("jqtree-selected")})})}function ut(){a!=null&&a.selectNode&&a.selectNode({id:I})}function j(N){const ie=R(),K=ie.tree("getNodeById",N);n(7,I=null),K&&ie.tree("removeFromSelection",K)}function R(){return window.$(b)}function V(N,ie=null){return N.list?(Z(N.list,ie),N.list):N}function Z(N,ie){if(!ie||ie==="up"){let K=JSON.parse(JSON.stringify(N)).shift();K&&K.offset&&K.offset!==0&&N.unshift({id:"show-more-"+K.offset,offset:K.offset,showMoreDirection:"up",name:q.translate("Show more")})}if(!ie||ie==="down"){let K=JSON.parse(JSON.stringify(N)).pop();K&&K.offset&&K.total-1!==K.offset&&N.push({id:"show-more-"+K.offset,offset:K.offset,showMoreDirection:"down",name:q.translate("Show more")})}N.forEach(K=>{K.children&&Z(K.children)})}function ae(N){return N==="_self"?o:N==="_bookmark"?"Bookmark":de.get(["entityDefs",o,"links",N,"entity"])||de.get(["entityDefs",o,"fields",N,"entity"])}function ke(N){L&&L.name===N.name||(n(6,C=""),n(4,E.value="",E),_e.clear("treeSearchValue",y),h==="list"?I&&(a!=null&&a.selectNode&&a.selectNode({id:I}),n(7,I=null)):n(7,I=null),n(1,L=N),wt(!1),_e.set("treeItem",o,N.name),tt.notify("Loading..."),dn().then(()=>{pe()}))}function Ae(){n(4,E.value="",E),h==="detail"&&_e.clear("treeWhereData",o),Xe()}function Xe(){n(6,C=E.value),C?_e.set("treeSearchValue",o,C):_e.clear("treeSearchValue",o),tt.notify("Loading..."),pe()}function ee(){y==="Bookmark"&&pe()}function he(){return T}function Ee(N){n(10,H=N.target.value),_e.set("treeItemSorting",o,{sortBy:H,sortAsc:x}),pe()}function Me(N){N.preventDefault(),n(9,x=!x),_e.set("treeItemSorting",o,{sortBy:H,sortAsc:x}),pe()}function je(N){It.get(o,"leftSidebar",null,null,ie=>{T=ie,n(5,k=ie.layout.map(ve=>{const O=de.get(["entityDefs",o,"fields",ve.name,"type"]);let F="";if(ve.name==="_self")F=q.get("Global","scopeNamesPlural",o);else if(ve.name==="_bookmark")F=q.get("Global","scopeNamesPlural","Bookmark");else{if(O=="link"){const U=ae(ve.name);F=q.get("Global","scopeNamesPlural",U)}F||(F=q.get(o,"links",ve.name)||q.get(o,"fields",ve.name)||q.get("Global","fields",ve.name))}return{name:ve.name,label:F}}));const K=_e.get("treeItem",o);k.length>0&&(!K||!k.find(ve=>ve.name===K)?(_e.set("treeItem",o,k[0].name),n(1,L=k[0])):n(1,L=k.find(ve=>ve.name===K)),wt(!0)),N()})}function wt(N){var ie;if(n(40,y=ae(L.name)),y==="Bookmark"&&n(40,y=o),N&&L.name===_e.get("treeItem",o)){const K=_e.get("treeItemSorting",o);if(K&&typeof K=="object"&&de.get(["entityDefs",y,"fields",K.sortBy])){n(9,x=K.sortAsc),n(10,H=K.sortBy);return}}de.get(["scopes",y,"type"])==="Hierarchy"&&!de.get(["scopes",y,"hierarchyDisabled"])&&L.name!=="_bookmark"?n(10,H="sortOrder"):n(10,H=de.get(["entityDefs",y,"collection","sortBy"])||"name"),de.get(["entityDefs",y,"fields",H])||n(10,H=(ie=P[0])==null?void 0:ie.name),n(9,x=!!de.get(["entityDefs",y,"collection","asc"])),_e.set("treeItemSorting",o,{sortBy:H,sortAsc:x})}function Rt(){je(()=>{dn().then(()=>{pe()})})}un(()=>{const N=_e.get("panelWidth",o);return N&&n(22,c=parseInt(N)||u),(window.innerWidth<=767||_e.get("catalog-tree-panel",o))&&n(0,m=!0),je(()=>{var ie,K;k.length===0&&(n(0,m=!0),(K=(ie=yi.get())==null?void 0:ie.user)!=null&&K.isAdmin||n(8,M=!0)),dn().then(()=>{n(6,C=_e.get("treeSearchValue",o)||null),C&&n(4,E.value=C,E),m||fe()}),v&&v(w)}),()=>{D&&we()}});function Qt(N){qe[N?"unshift":"push"](()=>{w=N,n(3,w)})}const En=N=>ke(N);function kn(N){qe[N?"unshift":"push"](()=>{E=N,n(4,E)})}const Dn=N=>N.key==="Enter"&&Xe();function Sn(){H=Mu(this),n(10,H),n(11,P),n(40,y),n(23,o),n(1,L)}function Ir(N){qe[N?"unshift":"push"](()=>{b=N,n(2,b)})}return t.$$set=N=>{"scope"in N&&n(23,o=N.scope),"model"in N&&n(24,l=N.model),"collection"in N&&n(25,s=N.collection),"callbacks"in N&&n(26,a=N.callbacks),"minWidth"in N&&n(27,u=N.minWidth),"maxWidth"in N&&n(28,f=N.maxWidth),"currentWidth"in N&&n(22,c=N.currentWidth),"isCollapsed"in N&&n(0,m=N.isCollapsed),"mode"in N&&n(29,h=N.mode),"maxSize"in N&&n(30,d=N.maxSize),"renderLayoutEditor"in N&&n(31,v=N.renderLayoutEditor)},t.$$.update=()=>{if(t.$$.dirty[0]&71303168&&c&&a!=null&&a.treeWidthChanged&&a.treeWidthChanged(c),t.$$.dirty[0]&4194305&&n(13,i=m?"auto":`${c}px`),t.$$.dirty[0]&2&&n(40,y=L?ae(L.name):null),t.$$.dirty[0]&536870914&&n(12,r=L&&!["_self","_bookmark"].includes(L.name)&&h==="list"),t.$$.dirty[0]&8388608|t.$$.dirty[1]&512)if(!y)n(11,P=[]);else{const N=y==="Bookmark"?o:y,ie=de.get(["entityDefs",N,"fields"]);n(11,P=Object.keys(ie).filter(function(K){return["varchar","text","int","float","date","datetime"].includes(ie[K].type)&&!ie[K].notStorable}).sort(function(K,ve){return q.translate(K,"fields",N).localeCompare(q.translate(ve,"fields",N))}).map(K=>({name:K,label:q.translate(K,"fields",N)})))}},[m,L,b,w,E,k,C,I,M,x,H,P,r,i,B,Se,ut,ke,Ae,Xe,Ee,Me,c,o,l,s,a,u,f,h,d,v,W,pe,mt,j,R,ee,he,Rt,y,Qt,En,kn,Dn,Sn,Ir]}class Ac extends Ve{constructor(e){super(),Ge(this,e,Oc,Dc,Ne,{scope:23,model:24,collection:25,callbacks:26,minWidth:27,maxWidth:28,currentWidth:22,isCollapsed:0,mode:29,maxSize:30,renderLayoutEditor:31,handleCollectionSearch:32,rebuildTree:33,selectTreeNode:34,unSelectTreeNode:35,getTreeEl:36,reloadBookmarks:37,getLayoutData:38,refreshLayout:39},null,[-1,-1,-1])}get handleCollectionSearch(){return this.$$.ctx[32]}get rebuildTree(){return this.$$.ctx[33]}get selectTreeNode(){return this.$$.ctx[34]}get unSelectTreeNode(){return this.$$.ctx[35]}get getTreeEl(){return this.$$.ctx[36]}get reloadBookmarks(){return this.$$.ctx[37]}get getLayoutData(){return this.$$.ctx[38]}get refreshLayout(){return this.$$.ctx[39]}}const Lc="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20height='24px'%20viewBox='0%20-960%20960%20960'%20width='24px'%20fill='%23000'%3e%3cpath%20d='M200-120q-33%200-56.5-23.5T120-200v-560q0-33%2023.5-56.5T200-840h560q33%200%2056.5%2023.5T840-760v560q0%2033-23.5%2056.5T760-120H200Zm0-80h560v-560H200v560Zm40-80h480L570-480%20450-320l-90-120-120%20160Zm-40%2080v-560%20560Z'/%3e%3c/svg%3e",Ic="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20height='24px'%20viewBox='0%20-960%20960%20960'%20width='24px'%20fill='%23000'%3e%3cpath%20d='m840-234-80-80v-446H314l-80-80h526q33%200%2056.5%2023.5T840-760v526ZM792-56l-64-64H200q-33%200-56.5-23.5T120-200v-528l-64-64%2056-56%20736%20736-56%2056ZM240-280l120-160%2090%20120%2033-44-283-283v447h447l-80-80H240Zm297-257ZM424-424Z'/%3e%3c/svg%3e";function Sl(t,e,n){const i=t.slice();return i[30]=e[n],i}function Cl(t){let e,n=t[30].label+"",i,r,o;function l(){return t[17](t[30])}return{c(){e=S("a"),i=Ce(n),g(e,"href","javascript:"),g(e,"class","btn btn-link item svelte-1mqjn0v")},m(s,a){Y(s,e,a),_(e,i),r||(o=ce(e,"click",l),r=!0)},p(s,a){t=s,a[0]&4&&n!==(n=t[30].label+"")&&xe(i,n)},d(s){s&&X(e),r=!1,o()}}}function Tl(t){let e,n=t[30].name!==t[3].name&&Cl(t);return{c(){n&&n.c(),e=pi()},m(i,r){n&&n.m(i,r),Y(i,e,r)},p(i,r){i[30].name!==i[3].name?n?n.p(i,r):(n=Cl(i),n.c(),n.m(e.parentNode,e)):n&&(n.d(1),n=null)},d(i){i&&X(e),n&&n.d(i)}}}function Ol(t){let e,n,i;return{c(){e=S("div"),g(e,"class","side-panel-resizer svelte-1mqjn0v")},m(r,o){Y(r,e,o),n||(i=ce(e,"mousedown",t[5]),n=!0)},p:Ie,d(r){r&&X(e),n=!1,i()}}}function Pc(t){let e,n,i,r,o,l,s,a,u,f,c,m,h,d,v,b,w,E,D,p,A,k,L,C=t[3].label+"",y,T,I,M,x,H,P,W,B,le,Se=De(t[2]),we=[];for(let $=0;$<Se.length;$+=1)we[$]=Tl(Sl(t,Se,$));let pe=!t[0]&&Ol(t);return{c(){e=S("div"),n=z(),i=S("aside"),r=S("div"),o=z(),l=S("button"),s=S("span"),a=z(),u=S("span"),f=z(),c=S("div"),m=S("div");for(let $=0;$<we.length;$+=1)we[$].c();h=z(),d=S("button"),v=S("img"),w=z(),E=S("img"),A=z(),k=S("div"),L=S("h5"),y=Ce(C),T=z(),I=S("div"),M=z(),x=S("div"),x.innerHTML="",H=z(),P=S("div"),P.innerHTML="",W=z(),pe&&pe.c(),g(e,"class","svelte-1mqjn0v"),te(e,"expanded",!t[0]),te(e,"not-pinned",!t[1]),g(r,"class","collapse-strip svelte-1mqjn0v"),g(s,"class","toggle-icon-left fas fa-angle-left"),te(s,"hidden",!t[0]),g(u,"class","toggle-icon-right fas fa-angle-right"),te(u,"hidden",t[0]),g(l,"type","button"),g(l,"class","btn btn-link collapse-panel svelte-1mqjn0v"),di(v.src,b=Lc)||g(v,"src",b),g(v,"alt","image"),te(v,"hidden",!t[1]),di(E.src,D=Ic)||g(E,"src",D),g(E,"alt","hide_image"),te(E,"hidden",t[1]),g(d,"class","btn btn-link"),se(d,"padding","0"),se(d,"border","0"),se(d,"margin-left","-2px"),g(d,"title",p=q.translate(t[1]?"enableAutomaticClosing":"disableAutomaticClosing")),g(m,"class","btn-group svelte-1mqjn0v"),se(L,"font-weight","bold"),se(L,"margin-right","10px"),se(L,"font-size","16px"),g(I,"class","layout-editor-container"),te(I,"hidden",t[3].name!=="summary"),se(k,"display","flex"),se(k,"align-items","center"),g(x,"class","summary"),te(x,"hidden",t[3].name!=="summary"),g(P,"class","activities"),te(P,"hidden",t[3].name!=="activities"),g(c,"class","content svelte-1mqjn0v"),g(i,"class","right-side-view svelte-1mqjn0v"),se(i,"width",t[4]),te(i,"collapsed",t[0]),te(i,"expanded",!t[0]),te(i,"pinned",t[1])},m($,ge){Y($,e,ge),Y($,n,ge),Y($,i,ge),_(i,r),_(i,o),_(i,l),_(l,s),_(l,a),_(l,u),_(i,f),_(i,c),_(c,m);for(let fe=0;fe<we.length;fe+=1)we[fe]&&we[fe].m(m,null);_(m,h),_(m,d),_(d,v),_(d,w),_(d,E),_(c,A),_(c,k),_(k,L),_(L,y),_(k,T),_(k,I),_(c,M),_(c,x),_(c,H),_(c,P),_(c,W),pe&&pe.m(c,null),B||(le=[ce(r,"click",Lu(t[7])),ce(l,"click",t[7]),ce(d,"click",t[10]),ce(i,"mouseenter",t[9]),ce(i,"mouseleave",t[8])],B=!0)},p($,ge){if(ge[0]&1&&te(e,"expanded",!$[0]),ge[0]&2&&te(e,"not-pinned",!$[1]),ge[0]&1&&te(s,"hidden",!$[0]),ge[0]&1&&te(u,"hidden",$[0]),ge[0]&76){Se=De($[2]);let fe;for(fe=0;fe<Se.length;fe+=1){const Te=Sl($,Se,fe);we[fe]?we[fe].p(Te,ge):(we[fe]=Tl(Te),we[fe].c(),we[fe].m(m,h))}for(;fe<we.length;fe+=1)we[fe].d(1);we.length=Se.length}ge[0]&2&&te(v,"hidden",!$[1]),ge[0]&2&&te(E,"hidden",$[1]),ge[0]&2&&p!==(p=q.translate($[1]?"enableAutomaticClosing":"disableAutomaticClosing"))&&g(d,"title",p),ge[0]&8&&C!==(C=$[3].label+"")&&xe(y,C),ge[0]&8&&te(I,"hidden",$[3].name!=="summary"),ge[0]&8&&te(x,"hidden",$[3].name!=="summary"),ge[0]&8&&te(P,"hidden",$[3].name!=="activities"),$[0]?pe&&(pe.d(1),pe=null):pe?pe.p($,ge):(pe=Ol($),pe.c(),pe.m(c,null)),ge[0]&16&&se(i,"width",$[4]),ge[0]&1&&te(i,"collapsed",$[0]),ge[0]&1&&te(i,"expanded",!$[0]),ge[0]&2&&te(i,"pinned",$[1])},i:Ie,o:Ie,d($){$&&(X(e),X(n),X(i)),sn(we,$),pe&&pe.d(),B=!1,at(le)}}}function Mc(t,e,n){let i,{scope:r}=e,{minWidth:o=300}=e,{maxWidth:l=600}=e,{currentWidth:s=o}=e,{loadSummary:a}=e,{loadActivities:u}=e,{isCollapsed:f=!1}=e,c=!1,m,h,d,v,b=!1,w=!0,E,D=[{name:"summary",label:q.translate("Summary")}],p=D[0];function A(){return de.get(["scopes",r,"stream"])===!0}function k(B){if(!c)return;B.preventDefault();const le=h+(m-B.pageX);le>=o&&le<=l&&n(11,s=le)}function L(B){c=!0,m=B.pageX,h=s,document.addEventListener("mousemove",k),document.addEventListener("mouseup",C,{once:!0}),document.body.style.userSelect="none"}function C(){c&&(c=!1,_e.set("rightSideView",r,s.toString()),document.removeEventListener("mousemove",k),document.body.style.userSelect="")}function y(B){p&&p.name===B.name||(n(3,p=B),p.name==="activities"&&P(),_e.set("right-side-view-active-item",r,p.name))}function T(B){I(!f)}function I(B){n(0,f=B),_e.set("right-side-view-collapse",r,f?"collapsed":""),p.name==="activities"&&P()}function M(){w||(b=!1,v!==null&&clearTimeout(v),v=null,d=setTimeout(()=>{b||I(!0)},500))}function x(){w||(b=!0,d!==null&&clearTimeout(d),d=null,f&&(v=setTimeout(()=>{b&&I(!1)},500)))}function H(B){n(1,w=!w),_e.set("right-side-view-pin",r,w?"pin":"not-pinned")}function P(){f||(E==null?u(B=>{E=B}):E==null||E.refresh())}un(()=>{const B=_e.get("rightSideView",r);B&&n(11,s=parseInt(B)||o),n(0,f=_e.get("right-side-view-collapse",r)==="collapsed"),n(1,w=_e.get("right-side-view-pin",r)!=="not-pinned"),a(),A()&&n(2,D=[...D,{name:"activities",label:q.translate("Activities")}]);let le=_e.get("right-side-view-active-item",r);return le&&D.map(Se=>Se.name).includes(le)&&y(D.find(Se=>Se.name===le)),()=>{d!==null&&clearTimeout(d),v!==null&&clearTimeout(v)}});const W=B=>y(B);return t.$$set=B=>{"scope"in B&&n(12,r=B.scope),"minWidth"in B&&n(13,o=B.minWidth),"maxWidth"in B&&n(14,l=B.maxWidth),"currentWidth"in B&&n(11,s=B.currentWidth),"loadSummary"in B&&n(15,a=B.loadSummary),"loadActivities"in B&&n(16,u=B.loadActivities),"isCollapsed"in B&&n(0,f=B.isCollapsed)},t.$$.update=()=>{t.$$.dirty[0]&2049&&n(4,i=f?"auto":`${s}px`)},[f,w,D,p,i,L,y,T,M,x,H,s,r,o,l,a,u,W]}class Nc extends Ve{constructor(e){super(),Ge(this,e,Mc,Pc,Ne,{scope:12,minWidth:13,maxWidth:14,currentWidth:11,loadSummary:15,loadActivities:16,isCollapsed:0},null,[-1,-1])}}window.SvelteLanguage=q,window.SvelteUserData=yi,window.SvelteNotifier=tt,window.SvelteLayoutManager=It,window.SvelteMetadata=de,window.SvelteModelFactory=cr,window.SvelteConfig=oa,window.SvelteStorage=_e,window.driver=Jl,window.tippy=Bn,Fe.ApiRequestComponent=ac,Fe.Favorites=Ec,Fe.JobManagerIcon=Qu,Fe.LayoutComponent=ic,Fe.Navigation=bc,Fe.RightSideView=Nc,Fe.TreePanel=Ac,Fe.UpdatePanel=af,Object.defineProperty(Fe,Symbol.toStringTag,{value:"Module"})});
