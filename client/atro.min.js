(function(pe,he){typeof exports=="object"&&typeof module<"u"?he(exports):typeof define=="function"&&define.amd?define(["exports"],he):(pe=typeof globalThis<"u"?globalThis:pe||self,he(pe.Svelte={}))})(this,function(pe){"use strict";var ur=Object.defineProperty;var dr=(pe,he,Ke)=>he in pe?ur(pe,he,{enumerable:!0,configurable:!0,writable:!0,value:Ke}):pe[he]=Ke;var Rn=(pe,he,Ke)=>dr(pe,typeof he!="symbol"?he+"":he,Ke);let he={};function Ke(t={}){he={animate:!0,allowClose:!0,overlayOpacity:.7,smoothScroll:!1,disableActiveInteraction:!1,showProgress:!1,stagePadding:10,stageRadius:5,popoverOffset:10,showButtons:["next","previous","close"],disableButtons:[],overlayColor:"#000",...t}}function I(t){return t?he[t]:he}function Nt(t,e,n,i){return(t/=i/2)<1?n/2*t*t+e:-n/2*(--t*(t-2)-1)+e}function Hn(t){const e='a[href]:not([disabled]), button:not([disabled]), textarea:not([disabled]), input[type="text"]:not([disabled]), input[type="radio"]:not([disabled]), input[type="checkbox"]:not([disabled]), select:not([disabled])';return t.flatMap(n=>{const i=n.matches(e),o=Array.from(n.querySelectorAll(e));return[...i?[n]:[],...o]}).filter(n=>getComputedStyle(n).pointerEvents!=="none"&&uo(n))}function Wn(t){if(!t||so(t))return;const e=I("smoothScroll");t.scrollIntoView({behavior:!e||ao(t)?"auto":"smooth",inline:"center",block:"center"})}function ao(t){if(!t||!t.parentElement)return;const e=t.parentElement;return e.scrollHeight>e.clientHeight}function so(t){const e=t.getBoundingClientRect();return e.top>=0&&e.left>=0&&e.bottom<=(window.innerHeight||document.documentElement.clientHeight)&&e.right<=(window.innerWidth||document.documentElement.clientWidth)}function uo(t){return!!(t.offsetWidth||t.offsetHeight||t.getClientRects().length)}let xt={};function se(t,e){xt[t]=e}function O(t){return t?xt[t]:xt}function qn(){xt={}}let Bt={};function Rt(t,e){Bt[t]=e}function it(t){var e;(e=Bt[t])==null||e.call(Bt)}function co(){Bt={}}function fo(t,e,n,i){let o=O("__activeStagePosition");const l=o||n.getBoundingClientRect(),r=i.getBoundingClientRect(),u=Nt(t,l.x,r.x-l.x,e),s=Nt(t,l.y,r.y-l.y,e),a=Nt(t,l.width,r.width-l.width,e),d=Nt(t,l.height,r.height-l.height,e);o={x:u,y:s,width:a,height:d},Yn(o),se("__activeStagePosition",o)}function zn(t){if(!t)return;const e=t.getBoundingClientRect(),n={x:e.x,y:e.y,width:e.width,height:e.height};se("__activeStagePosition",n),Yn(n)}function po(){const t=O("__activeStagePosition"),e=O("__overlaySvg");if(!t)return;if(!e){console.warn("No stage svg found.");return}const n=window.innerWidth,i=window.innerHeight;e.setAttribute("viewBox",`0 0 ${n} ${i}`)}function ho(t){const e=mo(t);document.body.appendChild(e),Un(e,n=>{n.target.tagName==="path"&&it("overlayClick")}),se("__overlaySvg",e)}function Yn(t){const e=O("__overlaySvg");if(!e){ho(t);return}const n=e.firstElementChild;if((n==null?void 0:n.tagName)!=="path")throw new Error("no path element found in stage svg");n.setAttribute("d",Xn(t))}function mo(t){const e=window.innerWidth,n=window.innerHeight,i=document.createElementNS("http://www.w3.org/2000/svg","svg");i.classList.add("driver-overlay","driver-overlay-animated"),i.setAttribute("viewBox",`0 0 ${e} ${n}`),i.setAttribute("xmlSpace","preserve"),i.setAttribute("xmlnsXlink","http://www.w3.org/1999/xlink"),i.setAttribute("version","1.1"),i.setAttribute("preserveAspectRatio","xMinYMin slice"),i.style.fillRule="evenodd",i.style.clipRule="evenodd",i.style.strokeLinejoin="round",i.style.strokeMiterlimit="2",i.style.zIndex="10000",i.style.position="fixed",i.style.top="0",i.style.left="0",i.style.width="100%",i.style.height="100%";const o=document.createElementNS("http://www.w3.org/2000/svg","path");return o.setAttribute("d",Xn(t)),o.style.fill=I("overlayColor")||"rgb(0,0,0)",o.style.opacity=`${I("overlayOpacity")}`,o.style.pointerEvents="auto",o.style.cursor="auto",i.appendChild(o),i}function Xn(t){const e=window.innerWidth,n=window.innerHeight,i=I("stagePadding")||0,o=I("stageRadius")||0,l=t.width+i*2,r=t.height+i*2,u=Math.min(o,l/2,r/2),s=Math.floor(Math.max(u,0)),a=t.x-i+s,d=t.y-i,c=l-s*2,f=r-s*2;return`M${e},0L0,0L0,${n}L${e},${n}L${e},0Z
    M${a},${d} h${c} a${s},${s} 0 0 1 ${s},${s} v${f} a${s},${s} 0 0 1 -${s},${s} h-${c} a${s},${s} 0 0 1 -${s},-${s} v-${f} a${s},${s} 0 0 1 ${s},-${s} z`}function go(){const t=O("__overlaySvg");t&&t.remove()}function vo(){const t=document.getElementById("driver-dummy-element");if(t)return t;let e=document.createElement("div");return e.id="driver-dummy-element",e.style.width="0",e.style.height="0",e.style.pointerEvents="none",e.style.opacity="0",e.style.position="fixed",e.style.top="50%",e.style.left="50%",document.body.appendChild(e),e}function jn(t){const{element:e}=t;let n=typeof e=="string"?document.querySelector(e):e;n||(n=vo()),yo(n,t)}function bo(){const t=O("__activeElement"),e=O("__activeStep");t&&(zn(t),po(),Jn(t,e))}function yo(t,e){const n=Date.now(),i=O("__activeStep"),o=O("__activeElement")||t,l=!o||o===t,r=t.id==="driver-dummy-element",u=o.id==="driver-dummy-element",s=I("animate"),a=e.onHighlightStarted||I("onHighlightStarted"),d=(e==null?void 0:e.onHighlighted)||I("onHighlighted"),c=(i==null?void 0:i.onDeselected)||I("onDeselected"),f=I(),h=O();!l&&c&&c(u?void 0:o,i,{config:f,state:h}),a&&a(r?void 0:t,e,{config:f,state:h});const p=!l&&s;let v=!1;So(),se("previousStep",i),se("previousElement",o),se("activeStep",e),se("activeElement",t);const g=()=>{if(O("__transitionCallback")!==g)return;const b=Date.now()-n,E=400-b<=400/2;e.popover&&E&&!v&&p&&(Vn(t,e),v=!0),I("animate")&&b<400?fo(b,400,o,t):(zn(t),d&&d(r?void 0:t,e,{config:I(),state:O()}),se("__transitionCallback",void 0),se("__previousStep",i),se("__previousElement",o),se("__activeStep",e),se("__activeElement",t)),window.requestAnimationFrame(g)};se("__transitionCallback",g),window.requestAnimationFrame(g),Wn(t),!p&&e.popover&&Vn(t,e),o.classList.remove("driver-active-element","driver-no-interaction"),o.removeAttribute("aria-haspopup"),o.removeAttribute("aria-expanded"),o.removeAttribute("aria-controls"),I("disableActiveInteraction")&&t.classList.add("driver-no-interaction"),t.classList.add("driver-active-element"),t.setAttribute("aria-haspopup","dialog"),t.setAttribute("aria-expanded","true"),t.setAttribute("aria-controls","driver-popover-content")}function _o(){var t;(t=document.getElementById("driver-dummy-element"))==null||t.remove(),document.querySelectorAll(".driver-active-element").forEach(e=>{e.classList.remove("driver-active-element","driver-no-interaction"),e.removeAttribute("aria-haspopup"),e.removeAttribute("aria-expanded"),e.removeAttribute("aria-controls")})}function _t(){const t=O("__resizeTimeout");t&&window.cancelAnimationFrame(t),se("__resizeTimeout",window.requestAnimationFrame(bo))}function wo(t){var e;if(!O("isInitialized")||!(t.key==="Tab"||t.keyCode===9))return;const n=O("__activeElement"),i=(e=O("popover"))==null?void 0:e.wrapper,o=Hn([...i?[i]:[],...n?[n]:[]]),l=o[0],r=o[o.length-1];if(t.preventDefault(),t.shiftKey){const u=o[o.indexOf(document.activeElement)-1]||r;u==null||u.focus()}else{const u=o[o.indexOf(document.activeElement)+1]||l;u==null||u.focus()}}function Gn(t){var e;((e=I("allowKeyboardControl"))==null||e)&&(t.key==="Escape"?it("escapePress"):t.key==="ArrowRight"?it("arrowRightPress"):t.key==="ArrowLeft"&&it("arrowLeftPress"))}function Un(t,e,n){const i=(o,l)=>{const r=o.target;t.contains(r)&&((!n||n(r))&&(o.preventDefault(),o.stopPropagation(),o.stopImmediatePropagation()),l==null||l(o))};document.addEventListener("pointerdown",i,!0),document.addEventListener("mousedown",i,!0),document.addEventListener("pointerup",i,!0),document.addEventListener("mouseup",i,!0),document.addEventListener("click",o=>{i(o,e)},!0)}function Eo(){window.addEventListener("keyup",Gn,!1),window.addEventListener("keydown",wo,!1),window.addEventListener("resize",_t),window.addEventListener("scroll",_t)}function Do(){window.removeEventListener("keyup",Gn),window.removeEventListener("resize",_t),window.removeEventListener("scroll",_t)}function So(){const t=O("popover");t&&(t.wrapper.style.display="none")}function Vn(t,e){var n,i;let o=O("popover");o&&document.body.removeChild(o.wrapper),o=Co(),document.body.appendChild(o.wrapper);const{title:l,description:r,showButtons:u,disableButtons:s,showProgress:a,nextBtnText:d=I("nextBtnText")||"Next &rarr;",prevBtnText:c=I("prevBtnText")||"&larr; Previous",progressText:f=I("progressText")||"{current} of {total}"}=e.popover||{};o.nextButton.innerHTML=d,o.previousButton.innerHTML=c,o.progress.innerHTML=f,l?(o.title.innerHTML=l,o.title.style.display="block"):o.title.style.display="none",r?(o.description.innerHTML=r,o.description.style.display="block"):o.description.style.display="none";const h=u||I("showButtons"),p=a||I("showProgress")||!1,v=(h==null?void 0:h.includes("next"))||(h==null?void 0:h.includes("previous"))||p;o.closeButton.style.display=h.includes("close")?"block":"none",v?(o.footer.style.display="flex",o.progress.style.display=p?"block":"none",o.nextButton.style.display=h.includes("next")?"block":"none",o.previousButton.style.display=h.includes("previous")?"block":"none"):o.footer.style.display="none";const g=s||I("disableButtons")||[];g!=null&&g.includes("next")&&(o.nextButton.disabled=!0,o.nextButton.classList.add("driver-popover-btn-disabled")),g!=null&&g.includes("previous")&&(o.previousButton.disabled=!0,o.previousButton.classList.add("driver-popover-btn-disabled")),g!=null&&g.includes("close")&&(o.closeButton.disabled=!0,o.closeButton.classList.add("driver-popover-btn-disabled"));const b=o.wrapper;b.style.display="block",b.style.left="",b.style.top="",b.style.bottom="",b.style.right="",b.id="driver-popover-content",b.setAttribute("role","dialog"),b.setAttribute("aria-labelledby","driver-popover-title"),b.setAttribute("aria-describedby","driver-popover-description");const E=o.arrow;E.className="driver-popover-arrow";const D=((n=e.popover)==null?void 0:n.popoverClass)||I("popoverClass")||"";b.className=`driver-popover ${D}`.trim(),Un(o.wrapper,S=>{var B,T,J;const Z=S.target,q=((B=e.popover)==null?void 0:B.onNextClick)||I("onNextClick"),j=((T=e.popover)==null?void 0:T.onPrevClick)||I("onPrevClick"),U=((J=e.popover)==null?void 0:J.onCloseClick)||I("onCloseClick");if(Z.classList.contains("driver-popover-next-btn"))return q?q(t,e,{config:I(),state:O()}):it("nextClick");if(Z.classList.contains("driver-popover-prev-btn"))return j?j(t,e,{config:I(),state:O()}):it("prevClick");if(Z.classList.contains("driver-popover-close-btn"))return U?U(t,e,{config:I(),state:O()}):it("closeClick")},S=>!(o!=null&&o.description.contains(S))&&!(o!=null&&o.title.contains(S))&&typeof S.className=="string"&&S.className.includes("driver-popover")),se("popover",o);const w=((i=e.popover)==null?void 0:i.onPopoverRender)||I("onPopoverRender");w&&w(o,{config:I(),state:O()}),Jn(t,e),Wn(b);const _=t.classList.contains("driver-dummy-element"),C=Hn([b,..._?[]:[t]]);C.length>0&&C[0].focus()}function Qn(){const t=O("popover");if(!(t!=null&&t.wrapper))return;const e=t.wrapper.getBoundingClientRect(),n=I("stagePadding")||0,i=I("popoverOffset")||0;return{width:e.width+n+i,height:e.height+n+i,realWidth:e.width,realHeight:e.height}}function Kn(t,e){const{elementDimensions:n,popoverDimensions:i,popoverPadding:o,popoverArrowDimensions:l}=e;return t==="start"?Math.max(Math.min(n.top-o,window.innerHeight-i.realHeight-l.width),l.width):t==="end"?Math.max(Math.min(n.top-(i==null?void 0:i.realHeight)+n.height+o,window.innerHeight-(i==null?void 0:i.realHeight)-l.width),l.width):t==="center"?Math.max(Math.min(n.top+n.height/2-(i==null?void 0:i.realHeight)/2,window.innerHeight-(i==null?void 0:i.realHeight)-l.width),l.width):0}function Zn(t,e){const{elementDimensions:n,popoverDimensions:i,popoverPadding:o,popoverArrowDimensions:l}=e;return t==="start"?Math.max(Math.min(n.left-o,window.innerWidth-i.realWidth-l.width),l.width):t==="end"?Math.max(Math.min(n.left-(i==null?void 0:i.realWidth)+n.width+o,window.innerWidth-(i==null?void 0:i.realWidth)-l.width),l.width):t==="center"?Math.max(Math.min(n.left+n.width/2-(i==null?void 0:i.realWidth)/2,window.innerWidth-(i==null?void 0:i.realWidth)-l.width),l.width):0}function Jn(t,e){const n=O("popover");if(!n)return;const{align:i="start",side:o="left"}=(e==null?void 0:e.popover)||{},l=i,r=t.id==="driver-dummy-element"?"over":o,u=I("stagePadding")||0,s=Qn(),a=n.arrow.getBoundingClientRect(),d=t.getBoundingClientRect(),c=d.top-s.height;let f=c>=0;const h=window.innerHeight-(d.bottom+s.height);let p=h>=0;const v=d.left-s.width;let g=v>=0;const b=window.innerWidth-(d.right+s.width);let E=b>=0;const D=!f&&!p&&!g&&!E;let w=r;if(r==="top"&&f?E=g=p=!1:r==="bottom"&&p?E=g=f=!1:r==="left"&&g?E=f=p=!1:r==="right"&&E&&(g=f=p=!1),r==="over"){const _=window.innerWidth/2-s.realWidth/2,C=window.innerHeight/2-s.realHeight/2;n.wrapper.style.left=`${_}px`,n.wrapper.style.right="auto",n.wrapper.style.top=`${C}px`,n.wrapper.style.bottom="auto"}else if(D){const _=window.innerWidth/2-(s==null?void 0:s.realWidth)/2,C=10;n.wrapper.style.left=`${_}px`,n.wrapper.style.right="auto",n.wrapper.style.bottom=`${C}px`,n.wrapper.style.top="auto"}else if(g){const _=Math.min(v,window.innerWidth-(s==null?void 0:s.realWidth)-a.width),C=Kn(l,{elementDimensions:d,popoverDimensions:s,popoverPadding:u,popoverArrowDimensions:a});n.wrapper.style.left=`${_}px`,n.wrapper.style.top=`${C}px`,n.wrapper.style.bottom="auto",n.wrapper.style.right="auto",w="left"}else if(E){const _=Math.min(b,window.innerWidth-(s==null?void 0:s.realWidth)-a.width),C=Kn(l,{elementDimensions:d,popoverDimensions:s,popoverPadding:u,popoverArrowDimensions:a});n.wrapper.style.right=`${_}px`,n.wrapper.style.top=`${C}px`,n.wrapper.style.bottom="auto",n.wrapper.style.left="auto",w="right"}else if(f){const _=Math.min(c,window.innerHeight-s.realHeight-a.width);let C=Zn(l,{elementDimensions:d,popoverDimensions:s,popoverPadding:u,popoverArrowDimensions:a});n.wrapper.style.top=`${_}px`,n.wrapper.style.left=`${C}px`,n.wrapper.style.bottom="auto",n.wrapper.style.right="auto",w="top"}else if(p){const _=Math.min(h,window.innerHeight-(s==null?void 0:s.realHeight)-a.width);let C=Zn(l,{elementDimensions:d,popoverDimensions:s,popoverPadding:u,popoverArrowDimensions:a});n.wrapper.style.left=`${C}px`,n.wrapper.style.bottom=`${_}px`,n.wrapper.style.top="auto",n.wrapper.style.right="auto",w="bottom"}D?n.arrow.classList.add("driver-popover-arrow-none"):ko(l,w,t)}function ko(t,e,n){const i=O("popover");if(!i)return;const o=n.getBoundingClientRect(),l=Qn(),r=i.arrow,u=l.width,s=window.innerWidth,a=o.width,d=o.left,c=l.height,f=window.innerHeight,h=o.top,p=o.height;r.className="driver-popover-arrow";let v=e,g=t;e==="top"?(d+a<=0?(v="right",g="end"):d+a-u<=0&&(v="top",g="start"),d>=s?(v="left",g="end"):d+u>=s&&(v="top",g="end")):e==="bottom"?(d+a<=0?(v="right",g="start"):d+a-u<=0&&(v="bottom",g="start"),d>=s?(v="left",g="start"):d+u>=s&&(v="bottom",g="end")):e==="left"?(h+p<=0?(v="bottom",g="end"):h+p-c<=0&&(v="left",g="start"),h>=f?(v="top",g="end"):h+c>=f&&(v="left",g="end")):e==="right"&&(h+p<=0?(v="bottom",g="start"):h+p-c<=0&&(v="right",g="start"),h>=f?(v="top",g="start"):h+c>=f&&(v="right",g="end")),v?(r.classList.add(`driver-popover-arrow-side-${v}`),r.classList.add(`driver-popover-arrow-align-${g}`)):r.classList.add("driver-popover-arrow-none")}function Co(){const t=document.createElement("div");t.classList.add("driver-popover");const e=document.createElement("div");e.classList.add("driver-popover-arrow");const n=document.createElement("header");n.id="driver-popover-title",n.classList.add("driver-popover-title"),n.style.display="none",n.innerText="Popover Title";const i=document.createElement("div");i.id="driver-popover-description",i.classList.add("driver-popover-description"),i.style.display="none",i.innerText="Popover description is here";const o=document.createElement("button");o.type="button",o.classList.add("driver-popover-close-btn"),o.setAttribute("aria-label","Close"),o.innerHTML="&times;";const l=document.createElement("footer");l.classList.add("driver-popover-footer");const r=document.createElement("span");r.classList.add("driver-popover-progress-text"),r.innerText="";const u=document.createElement("span");u.classList.add("driver-popover-navigation-btns");const s=document.createElement("button");s.type="button",s.classList.add("driver-popover-prev-btn"),s.innerHTML="&larr; Previous";const a=document.createElement("button");return a.type="button",a.classList.add("driver-popover-next-btn"),a.innerHTML="Next &rarr;",u.appendChild(s),u.appendChild(a),l.appendChild(r),l.appendChild(u),t.appendChild(o),t.appendChild(e),t.appendChild(n),t.appendChild(i),t.appendChild(l),{wrapper:t,arrow:e,title:n,description:i,footer:l,previousButton:s,nextButton:a,closeButton:o,footerButtons:u,progress:r}}function Po(){var t;const e=O("popover");e&&((t=e.wrapper.parentElement)==null||t.removeChild(e.wrapper))}function Lo(t={}){Ke(t);function e(){I("allowClose")&&a()}function n(){const d=O("activeIndex"),c=I("steps")||[];if(typeof d>"u")return;const f=d+1;c[f]?s(f):a()}function i(){const d=O("activeIndex"),c=I("steps")||[];if(typeof d>"u")return;const f=d-1;c[f]?s(f):a()}function o(d){(I("steps")||[])[d]?s(d):a()}function l(){var d;if(O("__transitionCallback"))return;const c=O("activeIndex"),f=O("__activeStep"),h=O("__activeElement");if(typeof c>"u"||typeof f>"u"||typeof O("activeIndex")>"u")return;const p=((d=f.popover)==null?void 0:d.onPrevClick)||I("onPrevClick");if(p)return p(h,f,{config:I(),state:O()});i()}function r(){var d;if(O("__transitionCallback"))return;const c=O("activeIndex"),f=O("__activeStep"),h=O("__activeElement");if(typeof c>"u"||typeof f>"u")return;const p=((d=f.popover)==null?void 0:d.onNextClick)||I("onNextClick");if(p)return p(h,f,{config:I(),state:O()});n()}function u(){O("isInitialized")||(se("isInitialized",!0),document.body.classList.add("driver-active",I("animate")?"driver-fade":"driver-simple"),Eo(),Rt("overlayClick",e),Rt("escapePress",e),Rt("arrowLeftPress",l),Rt("arrowRightPress",r))}function s(d=0){var c,f,h,p,v,g,b,E;const D=I("steps");if(!D){console.error("No steps to drive through"),a();return}if(!D[d]){a();return}se("__activeOnDestroyed",document.activeElement),se("activeIndex",d);const w=D[d],_=D[d+1],C=D[d-1],S=((c=w.popover)==null?void 0:c.doneBtnText)||I("doneBtnText")||"Done",B=I("allowClose"),T=typeof((f=w.popover)==null?void 0:f.showProgress)<"u"?(h=w.popover)==null?void 0:h.showProgress:I("showProgress"),J=(((p=w.popover)==null?void 0:p.progressText)||I("progressText")||"{{current}} of {{total}}").replace("{{current}}",`${d+1}`).replace("{{total}}",`${D.length}`),Z=((v=w.popover)==null?void 0:v.showButtons)||I("showButtons"),q=["next","previous",...B?["close"]:[]].filter(Y=>!(Z!=null&&Z.length)||Z.includes(Y)),j=((g=w.popover)==null?void 0:g.onNextClick)||I("onNextClick"),U=((b=w.popover)==null?void 0:b.onPrevClick)||I("onPrevClick"),M=((E=w.popover)==null?void 0:E.onCloseClick)||I("onCloseClick");jn({...w,popover:{showButtons:q,nextBtnText:_?void 0:S,disableButtons:[...C?[]:["previous"]],showProgress:T,progressText:J,onNextClick:j||(()=>{_?s(d+1):a()}),onPrevClick:U||(()=>{s(d-1)}),onCloseClick:M||(()=>{a()}),...(w==null?void 0:w.popover)||{}}})}function a(d=!0){const c=O("__activeElement"),f=O("__activeStep"),h=O("__activeOnDestroyed"),p=I("onDestroyStarted");if(d&&p){const b=!c||(c==null?void 0:c.id)==="driver-dummy-element";p(b?void 0:c,f,{config:I(),state:O()});return}const v=(f==null?void 0:f.onDeselected)||I("onDeselected"),g=I("onDestroyed");if(document.body.classList.remove("driver-active","driver-fade","driver-simple"),Do(),Po(),_o(),go(),co(),qn(),c&&f){const b=c.id==="driver-dummy-element";v&&v(b?void 0:c,f,{config:I(),state:O()}),g&&g(b?void 0:c,f,{config:I(),state:O()})}h&&h.focus()}return{isActive:()=>O("isInitialized")||!1,refresh:_t,drive:(d=0)=>{u(),s(d)},setConfig:Ke,setSteps:d=>{qn(),Ke({...I(),steps:d})},getConfig:I,getState:O,getActiveIndex:()=>O("activeIndex"),isFirstStep:()=>O("activeIndex")===0,isLastStep:()=>{const d=I("steps")||[],c=O("activeIndex");return c!==void 0&&c===d.length-1},getActiveStep:()=>O("activeStep"),getActiveElement:()=>O("activeElement"),getPreviousElement:()=>O("previousElement"),getPreviousStep:()=>O("previousStep"),moveNext:n,movePrevious:i,moveTo:o,hasNextStep:()=>{const d=I("steps")||[],c=O("activeIndex");return c!==void 0&&d[c+1]},hasPreviousStep:()=>{const d=I("steps")||[],c=O("activeIndex");return c!==void 0&&d[c-1]},highlight:d=>{u(),jn({...d,popover:d.popover?{showButtons:[],showProgress:!1,progressText:"",...d.popover}:void 0})},destroy:()=>{a(!1)}}}function ge(){}function fn(t,e){for(const n in e)t[n]=e[n];return t}function $n(t){return t()}function ei(){return Object.create(null)}function xe(t){t.forEach($n)}function pn(t){return typeof t=="function"}function _e(t,e){return t!=t?e==e:t!==e||t&&typeof t=="object"||typeof t=="function"}let Ht;function ti(t,e){return t===e?!0:(Ht||(Ht=document.createElement("a")),Ht.href=e,t===Ht.href)}function To(t){return Object.keys(t).length===0}function Ao(t,e,n,i){if(t){const o=ni(t,e,n,i);return t[0](o)}}function ni(t,e,n,i){return t[1]&&i?fn(n.ctx.slice(),t[1](i(e))):n.ctx}function Io(t,e,n,i){if(t[2]&&i){const o=t[2](i(n));if(e.dirty===void 0)return o;if(typeof o=="object"){const l=[],r=Math.max(e.dirty.length,o.length);for(let u=0;u<r;u+=1)l[u]=e.dirty[u]|o[u];return l}return e.dirty|o}return e.dirty}function Oo(t,e,n,i,o,l){if(o){const r=ni(e,n,i,l);t.p(r,o)}}function Mo(t){if(t.ctx.length>32){const e=[],n=t.ctx.length/32;for(let i=0;i<n;i++)e[i]=-1;return e}return-1}function y(t,e){t.appendChild(e)}function V(t,e,n){t.insertBefore(e,n||null)}function G(t){t.parentNode&&t.parentNode.removeChild(t)}function hn(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}function k(t){return document.createElement(t)}function ue(t){return document.createTextNode(t)}function H(){return ue(" ")}function ii(){return ue("")}function oe(t,e,n,i){return t.addEventListener(e,n,i),()=>t.removeEventListener(e,n,i)}function Ze(t){return function(e){return e.preventDefault(),t.call(this,e)}}function mn(t){return function(e){return e.stopPropagation(),t.call(this,e)}}function m(t,e,n){n==null?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}const Fo=["width","height"];function Wt(t,e){const n=Object.getOwnPropertyDescriptors(t.__proto__);for(const i in e)e[i]==null?t.removeAttribute(i):i==="style"?t.style.cssText=e[i]:i==="__value"?t.value=t[i]=e[i]:n[i]&&n[i].set&&Fo.indexOf(i)===-1?t[i]=e[i]:m(t,i,e[i])}function No(t){return Array.from(t.childNodes)}function Be(t,e){e=""+e,t.data!==e&&(t.data=e)}function Oe(t,e,n,i){n==null?t.style.removeProperty(e):t.style.setProperty(e,n,"")}function qt(t,e,n){t.classList.toggle(e,!!n)}function xo(t,e,{bubbles:n=!1,cancelable:i=!1}={}){return new CustomEvent(t,{detail:e,bubbles:n,cancelable:i})}let wt;function Et(t){wt=t}function zt(){if(!wt)throw new Error("Function called outside component initialization");return wt}function Yt(t){zt().$$.on_mount.push(t)}function Bo(t){zt().$$.after_update.push(t)}function oi(t){zt().$$.on_destroy.push(t)}function Ro(){const t=zt();return(e,n,{cancelable:i=!1}={})=>{const o=t.$$.callbacks[e];if(o){const l=xo(e,n,{cancelable:i});return o.slice().forEach(r=>{r.call(t,l)}),!l.defaultPrevented}return!0}}const st=[],Re=[];let ut=[];const li=[],ri=Promise.resolve();let gn=!1;function ai(){gn||(gn=!0,ri.then(ui))}function si(){return ai(),ri}function vn(t){ut.push(t)}const bn=new Set;let dt=0;function ui(){if(dt!==0)return;const t=wt;do{try{for(;dt<st.length;){const e=st[dt];dt++,Et(e),Ho(e.$$)}}catch(e){throw st.length=0,dt=0,e}for(Et(null),st.length=0,dt=0;Re.length;)Re.pop()();for(let e=0;e<ut.length;e+=1){const n=ut[e];bn.has(n)||(bn.add(n),n())}ut.length=0}while(st.length);for(;li.length;)li.pop()();gn=!1,bn.clear(),Et(t)}function Ho(t){if(t.fragment!==null){t.update(),xe(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(vn)}}function Wo(t){const e=[],n=[];ut.forEach(i=>t.indexOf(i)===-1?e.push(i):n.push(i)),n.forEach(i=>i()),ut=e}const Xt=new Set;let qo;function Le(t,e){t&&t.i&&(Xt.delete(t),t.i(e))}function He(t,e,n,i){if(t&&t.o){if(Xt.has(t))return;Xt.add(t),qo.c.push(()=>{Xt.delete(t)}),t.o(e)}}function ve(t){return(t==null?void 0:t.length)!==void 0?t:Array.from(t)}function jt(t,e){t.d(1),e.delete(t.key)}function Gt(t,e,n,i,o,l,r,u,s,a,d,c){let f=t.length,h=l.length,p=f;const v={};for(;p--;)v[t[p].key]=p;const g=[],b=new Map,E=new Map,D=[];for(p=h;p--;){const S=c(o,l,p),B=n(S);let T=r.get(B);T?D.push(()=>T.p(S,e)):(T=a(B,S),T.c()),b.set(B,g[p]=T),B in v&&E.set(B,Math.abs(p-v[B]))}const w=new Set,_=new Set;function C(S){Le(S,1),S.m(u,d),r.set(S.key,S),d=S.first,h--}for(;f&&h;){const S=g[h-1],B=t[f-1],T=S.key,J=B.key;S===B?(d=S.first,f--,h--):b.has(J)?!r.has(T)||w.has(T)?C(S):_.has(J)?f--:E.get(T)>E.get(J)?(_.add(T),C(S)):(w.add(J),f--):(s(B,r),f--)}for(;f--;){const S=t[f];b.has(S.key)||s(S,r)}for(;h;)C(g[h-1]);return xe(D),g}function di(t,e){const n={},i={},o={$$scope:1};let l=t.length;for(;l--;){const r=t[l],u=e[l];if(u){for(const s in r)s in u||(i[s]=1);for(const s in u)o[s]||(n[s]=u[s],o[s]=1);t[l]=u}else for(const s in r)o[s]=1}for(const r in i)r in n||(n[r]=void 0);return n}function Je(t){t&&t.c()}function We(t,e,n){const{fragment:i,after_update:o}=t.$$;i&&i.m(e,n),vn(()=>{const l=t.$$.on_mount.map($n).filter(pn);t.$$.on_destroy?t.$$.on_destroy.push(...l):xe(l),t.$$.on_mount=[]}),o.forEach(vn)}function qe(t,e){const n=t.$$;n.fragment!==null&&(Wo(n.after_update),xe(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function zo(t,e){t.$$.dirty[0]===-1&&(st.push(t),ai(),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function Se(t,e,n,i,o,l,r=null,u=[-1]){const s=wt;Et(t);const a=t.$$={fragment:null,ctx:[],props:l,update:ge,not_equal:o,bound:ei(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(s?s.$$.context:[])),callbacks:ei(),dirty:u,skip_bound:!1,root:e.target||s.$$.root};r&&r(a.root);let d=!1;if(a.ctx=n?n(t,e.props||{},(c,f,...h)=>{const p=h.length?h[0]:f;return a.ctx&&o(a.ctx[c],a.ctx[c]=p)&&(!a.skip_bound&&a.bound[c]&&a.bound[c](p),d&&zo(t,c)),f}):[],a.update(),d=!0,xe(a.before_update),a.fragment=i?i(a.ctx):!1,e.target){if(e.hydrate){const c=No(e.target);a.fragment&&a.fragment.l(c),c.forEach(G)}else a.fragment&&a.fragment.c();e.intro&&Le(t.$$.fragment),We(t,e.target,e.anchor),ui()}Et(s)}class ke{constructor(){Rn(this,"$$");Rn(this,"$$set")}$destroy(){qe(this,1),this.$destroy=ge}$on(e,n){if(!pn(n))return ge;const i=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return i.push(n),()=>{const o=i.indexOf(n);o!==-1&&i.splice(o,1)}}$set(e){this.$$set&&!To(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}const Yo="4",ct=[];function ft(t,e=ge){let n;const i=new Set;function o(u){if(_e(t,u)&&(t=u,n)){const s=!ct.length;for(const a of i)a[1](),ct.push(a,t);if(s){for(let a=0;a<ct.length;a+=2)ct[a][0](ct[a+1]);ct.length=0}}}function l(u){o(u(t))}function r(u,s=ge){const a=[u,s];return i.add(a),i.size===1&&(n=e(o,l)||ge),u(t),()=>{i.delete(a),i.size===0&&n&&(n(),n=null)}}return{set:o,update:l,subscribe:r}}const yn=ft({}),N={setTranslations(t){yn.set(t)},has(t,e,n){let i=!1;return yn.subscribe(o=>{if(n in o&&e in o[n]&&t in o[n][e]){i=!0;return}})(),i},get(t,e,n){let i=n;return yn.subscribe(o=>{if(t in o&&e in o[t]&&n in o[t][e]){i=o[t][e][n];return}if(t in o&&e in o[t]&&n in o[t][e]){i=o[t][e][n];return}if(t=="Global"){i=n;return}i=null})(),i},translate(t,e=null,n=null){n=n||"Global",e=e||"labels";let i=N.get(n,e,t);return i===null&&n!="Global"&&(i=N.get("Global",e,t)),i},translateOption(t,e,n=null){let i=N.translate(e,"options",n);return i===null?"":typeof i=="object"?i[t]:t}},ci=ft({}),fi={set(t){ci.set(t)},get(){let t=null;return ci.subscribe(e=>{e&&(t=e)})(),t}},_n=ft(),ze={setNotifier(t){_n.set(t)},notify(t,e=null,n=2e3){_n.subscribe(i=>{i&&i.notify(t,e,2e3)})()},confirm(t=null,e=null,n){_n.subscribe(i=>{if(i){let o=null,l=null,r=null;typeof t=="string"||t instanceof String?(l=t,r=N.translate("Yes")):(t=t||{},l=t.message,r=t.confirmText,o=t.confirmStyle||null),i.confirm(l,{confirmText:r,cancelText:N.translate("Cancel"),confirmStyle:o},e,n)}})()}},Ut=ft(),Ye={setLayoutManager(t){Ut.set(t)},resetToDefault(t,e,n,i){let o=null;return Ut.subscribe(l=>{l&&(o=l.resetToDefault(t,e,n,i))})(),o},get:function(t,e,n,i,o){let l=null;return Ut.subscribe(r=>{r&&(l=r.get(t,e,n,i,o))})(),l},set:function(t,e,n,i,o){let l=null;return Ut.subscribe(r=>{r&&(l=r.set(t,e,n,i,o))})(),l}},pi=ft(),Xe={setMetadata(t){pi.set(t)},get(t){let e=null;return pi.subscribe(n=>{n&&(e=n.get(t))})(),e}},hi=ft(),Dt={setModelFactory(t){hi.set(t)},create(t,e){hi.subscribe(n=>{n&&n.create(t,e)})()}};typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(Yo);function mi(t){let e,n,i,o,l,r,u,s,a,d,c,f,h,p,v;function g(D,w){return D[2]?jo:Xo}let b=g(t),E=b(t);return{c(){e=k("div"),n=k("div"),i=k("div"),o=k("span"),o.textContent=`${N.translate("queueManager","labels","QueueItem")}`,l=H(),r=k("span"),u=k("a"),u.innerHTML='<span aria-hidden="true">Ã—</span>',s=H(),E.c(),a=H(),d=k("a"),d.textContent=`${N.translate("View List")}`,c=H(),f=k("div"),h=k("div"),h.textContent=`${N.translate("Loading...")}`,m(o,"class","panel-heading-title"),m(u,"href","/"),m(u,"class","close svelte-1p6ppx8"),m(d,"href","#QueueItem"),m(d,"title",N.translate("View List")),m(d,"class","qp-view-list svelte-1p6ppx8"),m(r,"class","pull-right"),m(i,"class","panel-heading clearfix"),m(h,"class","list-container"),m(f,"class","panel-body"),m(n,"class","panel panel-default"),m(e,"class","queue-panel-container")},m(D,w){V(D,e,w),y(e,n),y(n,i),y(i,o),y(i,l),y(i,r),y(r,u),y(r,s),E.m(r,null),y(r,a),y(r,d),y(n,c),y(n,f),y(f,h),t[9](e),p||(v=oe(u,"click",t[6]),p=!0)},p(D,w){b===(b=g(D))&&E?E.p(D,w):(E.d(1),E=b(D),E&&(E.c(),E.m(r,a)))},d(D){D&&G(e),E.d(),t[9](null),p=!1,v()}}}function Xo(t){let e,n,i;return{c(){e=k("a"),e.textContent=`${N.translate("Pause")}`,m(e,"href","/"),m(e,"title",N.translate("Pause")),m(e,"class","qm-button")},m(o,l){V(o,e,l),n||(i=oe(e,"click",t[8]),n=!0)},p:ge,d(o){o&&G(e),n=!1,i()}}}function jo(t){let e,n,i;return{c(){e=k("a"),e.textContent=`${N.translate("Start")}`,m(e,"href","/"),m(e,"title",N.translate("Start")),m(e,"class","qm-button")},m(o,l){V(o,e,l),n||(i=oe(e,"click",t[7]),n=!0)},p:ge,d(o){o&&G(e),n=!1,i()}}}function Go(t){let e,n=t[0]&&mi(t);return{c(){n&&n.c(),e=ii()},m(i,o){n&&n.m(i,o),V(i,e,o)},p(i,[o]){i[0]?n?n.p(i,o):(n=mi(i),n.c(),n.m(e.parentNode,e)):n&&(n.d(1),n=null)},i:ge,o:ge,d(i){i&&G(e),n&&n.d(i)}}}function Uo(t,e,n){let{isOpen:i=!1}=e,{close:o}=e,{icon:l}=e,r=!1;window.addEventListener("publicDataFetched",p=>{n(2,r=!!p.detail.qmPaused)});let u;function s(p){u&&!u.contains(p.target)&&l&&!l.contains(p.target)&&i===!0&&o()}Yt(()=>{document.addEventListener("click",s)}),oi(()=>{document.removeEventListener("click",s)});async function a(p){let v=fi.get();if(v)try{const g=await fetch("/api/v1/App/action/QueueManagerUpdate",{method:"POST",headers:{"Content-Type":"application/json","Authorization-Token":btoa(v.user.userName+":"+v.token)},body:JSON.stringify({pause:p})});if(!g.ok)throw new Error("Network response was not ok");await g.json(),ze.notify("Done","success")}catch(g){console.error("Error:",g)}}const d=p=>{p.preventDefault(),o()},c=p=>{p.preventDefault(),a(!1)},f=p=>{p.preventDefault(),a(!0)};function h(p){Re[p?"unshift":"push"](()=>{u=p,n(3,u)})}return t.$$set=p=>{"isOpen"in p&&n(0,i=p.isOpen),"close"in p&&n(1,o=p.close),"icon"in p&&n(5,l=p.icon)},[i,o,r,u,a,l,d,c,f,h]}class Vo extends ke{constructor(e){super(),Se(this,e,Uo,Go,_e,{isOpen:0,close:1,icon:5})}}function gi(t){let e;return{c(){e=k("span"),m(e,"class","fas fa-pause-circle pause-icon")},m(n,i){V(n,e,i)},d(n){n&&G(e)}}}function Qo(t){let e,n,i,o,l,r,u,s,a=t[2]&&gi();return l=new Vo({props:{icon:t[0],isOpen:t[1],close:t[4]}}),{c(){e=k("a"),n=k("span"),i=H(),a&&a.c(),o=H(),Je(l.$$.fragment),m(n,"class","fas fa-tasks"),m(e,"href","/"),m(e,"class","notifications-button")},m(d,c){V(d,e,c),y(e,n),y(e,i),a&&a.m(e,null),t[6](e),V(d,o,c),We(l,d,c),r=!0,u||(s=oe(e,"click",t[7]),u=!0)},p(d,[c]){d[2]?a||(a=gi(),a.c(),a.m(e,null)):a&&(a.d(1),a=null);const f={};c&1&&(f.icon=d[0]),c&2&&(f.isOpen=d[1]),l.$set(f)},i(d){r||(Le(l.$$.fragment,d),r=!0)},o(d){He(l.$$.fragment,d),r=!1},d(d){d&&(G(e),G(o)),a&&a.d(),t[6](null),qe(l,d),u=!1,s()}}}function Ko(t,e,n){let{renderTable:i=()=>{}}=e,o,l=!1,r=!1;window.addEventListener("publicDataFetched",c=>{n(2,r=!!c.detail.qmPaused)});function u(){l||(n(1,l=!0),i())}function s(){n(1,l=!1),window.dispatchEvent(new Event("qmPanelClosed"))}function a(c){Re[c?"unshift":"push"](()=>{o=c,n(0,o)})}const d=c=>{c.preventDefault(),u()};return t.$$set=c=>{"renderTable"in c&&n(5,i=c.renderTable)},[o,l,r,u,s,i,a,d]}class Zo extends ke{constructor(e){super(),Se(this,e,Ko,Qo,_e,{renderTable:5})}}function Jo(t){let e,n=`${t[0]}px`,i=`${t[0]}px`,o=`${t[1]}px`;return{c(){e=k("div"),m(e,"class","loading-icon spinner svelte-yw8t7l"),Oe(e,"width",n),Oe(e,"height",i),Oe(e,"border-width",o)},m(l,r){V(l,e,r)},p(l,[r]){r&1&&n!==(n=`${l[0]}px`)&&Oe(e,"width",n),r&1&&i!==(i=`${l[0]}px`)&&Oe(e,"height",i),r&2&&o!==(o=`${l[1]}px`)&&Oe(e,"border-width",o)},i:ge,o:ge,d(l){l&&G(e)}}}function $o(t,e,n){let{size:i=40}=e,{thickness:o=4}=e;return t.$$set=l=>{"size"in l&&n(0,i=l.size),"thickness"in l&&n(1,o=l.thickness)},[i,o]}class el extends ke{constructor(e){super(),Se(this,e,$o,Jo,_e,{size:0,thickness:1})}}function vi(t){let e,n;return{c(){e=k("img"),ti(e.src,n=t[1])||m(e,"src",n),m(e,"class","logo"),m(e,"alt",t[0])},m(i,o){V(i,e,o)},p(i,o){o&2&&!ti(e.src,n=i[1])&&m(e,"src",n),o&1&&m(e,"alt",i[0])},d(i){i&&G(e)}}}function bi(t){let e,n,i;return{c(){e=k("a"),n=k("i"),i=ue("Recovery Instructions"),m(n,"class","fa fa-history svelte-1qmezxs"),m(e,"href",t[2]),m(e,"target","_blank"),m(e,"class","btn btn-default svelte-1qmezxs"),m(e,"role","button"),Oe(e,"float","right")},m(o,l){V(o,e,l),y(e,n),y(e,i)},p(o,l){l&4&&m(e,"href",o[2])},d(o){o&&G(e)}}}function yi(t){let e,n,i,o,l,r;return{c(){e=k("hr"),n=H(),i=k("pre"),o=ue(t[3]),m(i,"class","logs-container svelte-1qmezxs")},m(u,s){V(u,e,s),V(u,n,s),V(u,i,s),y(i,o),t[11](i),l||(r=oe(i,"scroll",t[8]),l=!0)},p(u,s){s&8&&Be(o,u[3])},d(u){u&&(G(e),G(n),G(i)),t[11](null),l=!1,r()}}}function tl(t){let e,n,i,o,l,r,u,s,a,d,c,f,h,p,v,g,b,E,D=t[4]?"Hide":"Show",w,_,C,S,B,T,J,Z,q=t[1]&&vi(t);d=new el({props:{size:"40",thickness:"5"}});let j=t[2]&&bi(t),U=t[4]&&t[3]&&yi(t);return{c(){e=k("div"),n=k("div"),i=k("div"),q&&q.c(),o=H(),l=k("div"),r=k("div"),u=k("h3"),u.textContent="System is updating...",s=H(),a=k("section"),Je(d.$$.fragment),c=H(),f=k("h5"),h=ue(t[5]),p=H(),v=k("section"),g=k("div"),b=k("button"),E=k("i"),w=ue(D),_=ue(" logs"),S=H(),j&&j.c(),B=H(),U&&U.c(),m(i,"class","logo-container"),m(n,"class","panel-heading"),m(f,"class","svelte-1qmezxs"),m(a,"class","progress-section svelte-1qmezxs"),m(E,"class","fa fa-list svelte-1qmezxs"),m(b,"class","btn btn-default svelte-1qmezxs"),b.disabled=C=!t[3],m(g,"class","buttons"),m(v,"class","logs-section"),m(r,"class","form-group"),m(l,"class","panel-body"),m(e,"id","login"),m(e,"class","panel panel-default panel-updating")},m(M,Y){V(M,e,Y),y(e,n),y(n,i),q&&q.m(i,null),y(e,o),y(e,l),y(l,r),y(r,u),y(r,s),y(r,a),We(d,a,null),y(a,c),y(a,f),y(f,h),y(r,p),y(r,v),y(v,g),y(g,b),y(b,E),y(b,w),y(b,_),y(g,S),j&&j.m(g,null),y(v,B),U&&U.m(v,null),T=!0,J||(Z=oe(b,"click",t[7]),J=!0)},p(M,[Y]){M[1]?q?q.p(M,Y):(q=vi(M),q.c(),q.m(i,null)):q&&(q.d(1),q=null),(!T||Y&32)&&Be(h,M[5]),(!T||Y&16)&&D!==(D=M[4]?"Hide":"Show")&&Be(w,D),(!T||Y&8&&C!==(C=!M[3]))&&(b.disabled=C),M[2]?j?j.p(M,Y):(j=bi(M),j.c(),j.m(g,null)):j&&(j.d(1),j=null),M[4]&&M[3]?U?U.p(M,Y):(U=yi(M),U.c(),U.m(v,null)):U&&(U.d(1),U=null)},i(M){T||(Le(d.$$.fragment,M),T=!0)},o(M){He(d.$$.fragment,M),T=!1},d(M){M&&G(e),q&&q.d(),qe(d),j&&j.d(),U&&U.d(),J=!1,Z()}}}function nl(t){return t.replace(/^\d{2,4}.\d{2}.\d{2,4} \d{2}:\d{2}:\d{2}/g,"").replace(/^[\-\|\s]+/,"")}function il(t,e,n){let{applicationName:i="AtroCore"}=e,{logoPath:o=null}=e,{logFilePath:l}=e,{restoreLink:r=null}=e,u=!1,s=!1,a=0,d=!0,c="",f,h;Bo(()=>{h&&d&&h.scrollTo(0,h.scrollHeight)});function p(){n(4,u=!u),u||(d=!0)}function v(b){const E=b.currentTarget;d=E.scrollHeight-E.scrollTop===E.clientHeight}setInterval(async()=>{try{const b=await fetch(l,{cache:"no-store"});a+=1,b.ok?(n(3,c=(await b.text()).trim()),c.search("composer")>=0&&n(10,s=!0),a>65&&!s&&n(3,c="Something wrong. Please, reboot the server.")):s?setTimeout(()=>{location.reload()},2e3):a>65&&n(3,c="Something wrong. Please, reboot the server.")}catch(b){console.error("Error: ",b)}},1e3);function g(b){Re[b?"unshift":"push"](()=>{h=b,n(6,h)})}return t.$$set=b=>{"applicationName"in b&&n(0,i=b.applicationName),"logoPath"in b&&n(1,o=b.logoPath),"logFilePath"in b&&n(9,l=b.logFilePath),"restoreLink"in b&&n(2,r=b.restoreLink)},t.$$.update=()=>{if(t.$$.dirty&1032)if(c){const b=c.trim().split(`
`);n(5,f=nl(b.pop()))}else s?n(5,f=""):n(5,f="Starting...")},[i,o,r,c,u,f,h,p,v,l,s,g]}class ol extends ke{constructor(e){super(),Se(this,e,il,tl,_e,{applicationName:0,logoPath:1,logFilePath:9,restoreLink:2})}}function _i(t,e,n){const i=t.slice();return i[15]=e[n],i}function wi(t){let e,n=t[15].label+"",i,o,l,r,u,s,a;function d(){return t[9](t[15])}return{c(){e=k("button"),i=ue(n),o=H(),m(e,"data-action",l=t[15].name),e.disabled=r=t[15].disabled,m(e,"type","button"),m(e,"class",u=`btn action btn-${t[15].style??"default"}`)},m(c,f){V(c,e,f),y(e,i),y(e,o),s||(a=oe(e,"click",d),s=!0)},p(c,f){t=c,f&1&&n!==(n=t[15].label+"")&&Be(i,n),f&1&&l!==(l=t[15].name)&&m(e,"data-action",l),f&1&&r!==(r=t[15].disabled)&&(e.disabled=r),f&1&&u!==(u=`btn action btn-${t[15].style??"default"}`)&&m(e,"class",u)},d(c){c&&G(e),s=!1,a()}}}function ll(t){let e,n,i,o=ve(t[0]),l=[];for(let s=0;s<o.length;s+=1)l[s]=wi(_i(t,o,s));const r=t[8].default,u=Ao(r,t,t[7],null);return{c(){e=k("div");for(let s=0;s<l.length;s+=1)l[s].c();n=H(),u&&u.c(),m(e,"class","button-container")},m(s,a){V(s,e,a);for(let d=0;d<l.length;d+=1)l[d]&&l[d].m(e,null);V(s,n,a),u&&u.m(s,a),i=!0},p(s,[a]){if(a&3){o=ve(s[0]);let d;for(d=0;d<o.length;d+=1){const c=_i(s,o,d);l[d]?l[d].p(c,a):(l[d]=wi(c),l[d].c(),l[d].m(e,null))}for(;d<l.length;d+=1)l[d].d(1);l.length=o.length}u&&u.p&&(!i||a&128)&&Oo(u,r,s,s[7],i?Io(r,s[7],a,null):Mo(s[7]),null)},i(s){i||(Le(u,s),i=!0)},o(s){He(u,s),i=!1},d(s){s&&(G(e),G(n)),hn(l,s),u&&u.d(s)}}}function rl(t,e,n){let{$$slots:i={},$$scope:o}=e,{params:l}=e,{fetch:r}=e,{loadLayout:u=()=>{Ye.get(scope,type,layoutProfileId,E=>{layout=E},!1)}}=e,{validate:s=()=>!0}=e,a=[{name:"save",label:"Save",style:"primary"},{name:"cancel",label:"Cancel"},{name:"resetToDefault",label:"Reset to Default"}];Yt(()=>{ze.notify("Loading..."),u(()=>{ze.notify(!1),l.afterRender&&l.afterRender()})});function d(){p();const E=r();if(!s(E)){v();return}ze.notify("Saving..."),Ye.set(l.scope,l.type,l.layoutProfileId,E,()=>{ze.notify("Saved","success",2e3),c(),v()})}function c(){l.onUpdate&&l.onUpdate({scope:l.scope,type:l.type,layoutProfileId:l.layoutProfileId})}function f(){u()}function h(){ze.confirm("Are you sure you want to reset to default?",()=>{Ye.resetToDefault(l.scope,l.type,l.layoutProfileId,()=>{c(),f()})})}function p(){n(0,a=a.map(E=>({...E,disabled:!0})))}function v(){n(0,a=a.map(E=>({...E,disabled:!1})))}function g(E){switch(E.name){case"save":d();break;case"cancel":f();break;case"resetToDefault":h();break}}const b=E=>g(E);return t.$$set=E=>{"params"in E&&n(2,l=E.params),"fetch"in E&&n(3,r=E.fetch),"loadLayout"in E&&n(4,u=E.loadLayout),"validate"in E&&n(5,s=E.validate),"$$scope"in E&&n(7,o=E.$$scope)},[a,g,l,r,u,s,d,o,i,b]}class Ei extends ke{constructor(e){super(),Se(this,e,rl,ll,_e,{params:2,fetch:3,loadLayout:4,validate:5,save:6})}get save(){return this.$$.ctx[6]}}/**!
 * Sortable 1.15.2
 * @author	RubaXa   <trash@rubaxa.org>
 * @author	owenm    <owen23355@gmail.com>
 * @license MIT
 */function Di(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(o){return Object.getOwnPropertyDescriptor(t,o).enumerable})),n.push.apply(n,i)}return n}function Me(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Di(Object(n),!0).forEach(function(i){al(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Di(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function Vt(t){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Vt=function(e){return typeof e}:Vt=function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Vt(t)}function al(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function je(){return je=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},je.apply(this,arguments)}function sl(t,e){if(t==null)return{};var n={},i=Object.keys(t),o,l;for(l=0;l<i.length;l++)o=i[l],!(e.indexOf(o)>=0)&&(n[o]=t[o]);return n}function ul(t,e){if(t==null)return{};var n=sl(t,e),i,o;if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(t);for(o=0;o<l.length;o++)i=l[o],!(e.indexOf(i)>=0)&&Object.prototype.propertyIsEnumerable.call(t,i)&&(n[i]=t[i])}return n}var dl="1.15.2";function Ge(t){if(typeof window<"u"&&window.navigator)return!!navigator.userAgent.match(t)}var Ue=Ge(/(?:Trident.*rv[ :]?11\.|msie|iemobile|Windows Phone)/i),St=Ge(/Edge/i),Si=Ge(/firefox/i),kt=Ge(/safari/i)&&!Ge(/chrome/i)&&!Ge(/android/i),ki=Ge(/iP(ad|od|hone)/i),Ci=Ge(/chrome/i)&&Ge(/android/i),Pi={capture:!1,passive:!1};function K(t,e,n){t.addEventListener(e,n,!Ue&&Pi)}function Q(t,e,n){t.removeEventListener(e,n,!Ue&&Pi)}function Qt(t,e){if(e){if(e[0]===">"&&(e=e.substring(1)),t)try{if(t.matches)return t.matches(e);if(t.msMatchesSelector)return t.msMatchesSelector(e);if(t.webkitMatchesSelector)return t.webkitMatchesSelector(e)}catch{return!1}return!1}}function cl(t){return t.host&&t!==document&&t.host.nodeType?t.host:t.parentNode}function Te(t,e,n,i){if(t){n=n||document;do{if(e!=null&&(e[0]===">"?t.parentNode===n&&Qt(t,e):Qt(t,e))||i&&t===n)return t;if(t===n)break}while(t=cl(t))}return null}var Li=/\s+/g;function we(t,e,n){if(t&&e)if(t.classList)t.classList[n?"add":"remove"](e);else{var i=(" "+t.className+" ").replace(Li," ").replace(" "+e+" "," ");t.className=(i+(n?" "+e:"")).replace(Li," ")}}function x(t,e,n){var i=t&&t.style;if(i){if(n===void 0)return document.defaultView&&document.defaultView.getComputedStyle?n=document.defaultView.getComputedStyle(t,""):t.currentStyle&&(n=t.currentStyle),e===void 0?n:n[e];!(e in i)&&e.indexOf("webkit")===-1&&(e="-webkit-"+e),i[e]=n+(typeof n=="string"?"":"px")}}function pt(t,e){var n="";if(typeof t=="string")n=t;else do{var i=x(t,"transform");i&&i!=="none"&&(n=i+" "+n)}while(!e&&(t=t.parentNode));var o=window.DOMMatrix||window.WebKitCSSMatrix||window.CSSMatrix||window.MSCSSMatrix;return o&&new o(n)}function Ti(t,e,n){if(t){var i=t.getElementsByTagName(e),o=0,l=i.length;if(n)for(;o<l;o++)n(i[o],o);return i}return[]}function Fe(){var t=document.scrollingElement;return t||document.documentElement}function re(t,e,n,i,o){if(!(!t.getBoundingClientRect&&t!==window)){var l,r,u,s,a,d,c;if(t!==window&&t.parentNode&&t!==Fe()?(l=t.getBoundingClientRect(),r=l.top,u=l.left,s=l.bottom,a=l.right,d=l.height,c=l.width):(r=0,u=0,s=window.innerHeight,a=window.innerWidth,d=window.innerHeight,c=window.innerWidth),(e||n)&&t!==window&&(o=o||t.parentNode,!Ue))do if(o&&o.getBoundingClientRect&&(x(o,"transform")!=="none"||n&&x(o,"position")!=="static")){var f=o.getBoundingClientRect();r-=f.top+parseInt(x(o,"border-top-width")),u-=f.left+parseInt(x(o,"border-left-width")),s=r+l.height,a=u+l.width;break}while(o=o.parentNode);if(i&&t!==window){var h=pt(o||t),p=h&&h.a,v=h&&h.d;h&&(r/=v,u/=p,c/=p,d/=v,s=r+d,a=u+c)}return{top:r,left:u,bottom:s,right:a,width:c,height:d}}}function Ai(t,e,n){for(var i=$e(t,!0),o=re(t)[e];i;){var l=re(i)[n],r=void 0;if(r=o>=l,!r)return i;if(i===Fe())break;i=$e(i,!1)}return!1}function ht(t,e,n,i){for(var o=0,l=0,r=t.children;l<r.length;){if(r[l].style.display!=="none"&&r[l]!==F.ghost&&(i||r[l]!==F.dragged)&&Te(r[l],n.draggable,t,!1)){if(o===e)return r[l];o++}l++}return null}function wn(t,e){for(var n=t.lastElementChild;n&&(n===F.ghost||x(n,"display")==="none"||e&&!Qt(n,e));)n=n.previousElementSibling;return n||null}function Ce(t,e){var n=0;if(!t||!t.parentNode)return-1;for(;t=t.previousElementSibling;)t.nodeName.toUpperCase()!=="TEMPLATE"&&t!==F.clone&&(!e||Qt(t,e))&&n++;return n}function Ii(t){var e=0,n=0,i=Fe();if(t)do{var o=pt(t),l=o.a,r=o.d;e+=t.scrollLeft*l,n+=t.scrollTop*r}while(t!==i&&(t=t.parentNode));return[e,n]}function fl(t,e){for(var n in t)if(t.hasOwnProperty(n)){for(var i in e)if(e.hasOwnProperty(i)&&e[i]===t[n][i])return Number(n)}return-1}function $e(t,e){if(!t||!t.getBoundingClientRect)return Fe();var n=t,i=!1;do if(n.clientWidth<n.scrollWidth||n.clientHeight<n.scrollHeight){var o=x(n);if(n.clientWidth<n.scrollWidth&&(o.overflowX=="auto"||o.overflowX=="scroll")||n.clientHeight<n.scrollHeight&&(o.overflowY=="auto"||o.overflowY=="scroll")){if(!n.getBoundingClientRect||n===document.body)return Fe();if(i||e)return n;i=!0}}while(n=n.parentNode);return Fe()}function pl(t,e){if(t&&e)for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t}function En(t,e){return Math.round(t.top)===Math.round(e.top)&&Math.round(t.left)===Math.round(e.left)&&Math.round(t.height)===Math.round(e.height)&&Math.round(t.width)===Math.round(e.width)}var Ct;function Oi(t,e){return function(){if(!Ct){var n=arguments,i=this;n.length===1?t.call(i,n[0]):t.apply(i,n),Ct=setTimeout(function(){Ct=void 0},e)}}}function hl(){clearTimeout(Ct),Ct=void 0}function Mi(t,e,n){t.scrollLeft+=e,t.scrollTop+=n}function Fi(t){var e=window.Polymer,n=window.jQuery||window.Zepto;return e&&e.dom?e.dom(t).cloneNode(!0):n?n(t).clone(!0)[0]:t.cloneNode(!0)}function Ni(t,e,n){var i={};return Array.from(t.children).forEach(function(o){var l,r,u,s;if(!(!Te(o,e.draggable,t,!1)||o.animated||o===n)){var a=re(o);i.left=Math.min((l=i.left)!==null&&l!==void 0?l:1/0,a.left),i.top=Math.min((r=i.top)!==null&&r!==void 0?r:1/0,a.top),i.right=Math.max((u=i.right)!==null&&u!==void 0?u:-1/0,a.right),i.bottom=Math.max((s=i.bottom)!==null&&s!==void 0?s:-1/0,a.bottom)}}),i.width=i.right-i.left,i.height=i.bottom-i.top,i.x=i.left,i.y=i.top,i}var Ee="Sortable"+new Date().getTime();function ml(){var t=[],e;return{captureAnimationState:function(){if(t=[],!!this.options.animation){var i=[].slice.call(this.el.children);i.forEach(function(o){if(!(x(o,"display")==="none"||o===F.ghost)){t.push({target:o,rect:re(o)});var l=Me({},t[t.length-1].rect);if(o.thisAnimationDuration){var r=pt(o,!0);r&&(l.top-=r.f,l.left-=r.e)}o.fromRect=l}})}},addAnimationState:function(i){t.push(i)},removeAnimationState:function(i){t.splice(fl(t,{target:i}),1)},animateAll:function(i){var o=this;if(!this.options.animation){clearTimeout(e),typeof i=="function"&&i();return}var l=!1,r=0;t.forEach(function(u){var s=0,a=u.target,d=a.fromRect,c=re(a),f=a.prevFromRect,h=a.prevToRect,p=u.rect,v=pt(a,!0);v&&(c.top-=v.f,c.left-=v.e),a.toRect=c,a.thisAnimationDuration&&En(f,c)&&!En(d,c)&&(p.top-c.top)/(p.left-c.left)===(d.top-c.top)/(d.left-c.left)&&(s=vl(p,f,h,o.options)),En(c,d)||(a.prevFromRect=d,a.prevToRect=c,s||(s=o.options.animation),o.animate(a,p,c,s)),s&&(l=!0,r=Math.max(r,s),clearTimeout(a.animationResetTimer),a.animationResetTimer=setTimeout(function(){a.animationTime=0,a.prevFromRect=null,a.fromRect=null,a.prevToRect=null,a.thisAnimationDuration=null},s),a.thisAnimationDuration=s)}),clearTimeout(e),l?e=setTimeout(function(){typeof i=="function"&&i()},r):typeof i=="function"&&i(),t=[]},animate:function(i,o,l,r){if(r){x(i,"transition",""),x(i,"transform","");var u=pt(this.el),s=u&&u.a,a=u&&u.d,d=(o.left-l.left)/(s||1),c=(o.top-l.top)/(a||1);i.animatingX=!!d,i.animatingY=!!c,x(i,"transform","translate3d("+d+"px,"+c+"px,0)"),this.forRepaintDummy=gl(i),x(i,"transition","transform "+r+"ms"+(this.options.easing?" "+this.options.easing:"")),x(i,"transform","translate3d(0,0,0)"),typeof i.animated=="number"&&clearTimeout(i.animated),i.animated=setTimeout(function(){x(i,"transition",""),x(i,"transform",""),i.animated=!1,i.animatingX=!1,i.animatingY=!1},r)}}}}function gl(t){return t.offsetWidth}function vl(t,e,n,i){return Math.sqrt(Math.pow(e.top-t.top,2)+Math.pow(e.left-t.left,2))/Math.sqrt(Math.pow(e.top-n.top,2)+Math.pow(e.left-n.left,2))*i.animation}var mt=[],Dn={initializeByDefault:!0},Pt={mount:function(e){for(var n in Dn)Dn.hasOwnProperty(n)&&!(n in e)&&(e[n]=Dn[n]);mt.forEach(function(i){if(i.pluginName===e.pluginName)throw"Sortable: Cannot mount plugin ".concat(e.pluginName," more than once")}),mt.push(e)},pluginEvent:function(e,n,i){var o=this;this.eventCanceled=!1,i.cancel=function(){o.eventCanceled=!0};var l=e+"Global";mt.forEach(function(r){n[r.pluginName]&&(n[r.pluginName][l]&&n[r.pluginName][l](Me({sortable:n},i)),n.options[r.pluginName]&&n[r.pluginName][e]&&n[r.pluginName][e](Me({sortable:n},i)))})},initializePlugins:function(e,n,i,o){mt.forEach(function(u){var s=u.pluginName;if(!(!e.options[s]&&!u.initializeByDefault)){var a=new u(e,n,e.options);a.sortable=e,a.options=e.options,e[s]=a,je(i,a.defaults)}});for(var l in e.options)if(e.options.hasOwnProperty(l)){var r=this.modifyOption(e,l,e.options[l]);typeof r<"u"&&(e.options[l]=r)}},getEventProperties:function(e,n){var i={};return mt.forEach(function(o){typeof o.eventProperties=="function"&&je(i,o.eventProperties.call(n[o.pluginName],e))}),i},modifyOption:function(e,n,i){var o;return mt.forEach(function(l){e[l.pluginName]&&l.optionListeners&&typeof l.optionListeners[n]=="function"&&(o=l.optionListeners[n].call(e[l.pluginName],i))}),o}};function bl(t){var e=t.sortable,n=t.rootEl,i=t.name,o=t.targetEl,l=t.cloneEl,r=t.toEl,u=t.fromEl,s=t.oldIndex,a=t.newIndex,d=t.oldDraggableIndex,c=t.newDraggableIndex,f=t.originalEvent,h=t.putSortable,p=t.extraEventProperties;if(e=e||n&&n[Ee],!!e){var v,g=e.options,b="on"+i.charAt(0).toUpperCase()+i.substr(1);window.CustomEvent&&!Ue&&!St?v=new CustomEvent(i,{bubbles:!0,cancelable:!0}):(v=document.createEvent("Event"),v.initEvent(i,!0,!0)),v.to=r||n,v.from=u||n,v.item=o||n,v.clone=l,v.oldIndex=s,v.newIndex=a,v.oldDraggableIndex=d,v.newDraggableIndex=c,v.originalEvent=f,v.pullMode=h?h.lastPutMode:void 0;var E=Me(Me({},p),Pt.getEventProperties(i,e));for(var D in E)v[D]=E[D];n&&n.dispatchEvent(v),g[b]&&g[b].call(e,v)}}var yl=["evt"],be=function(e,n){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},o=i.evt,l=ul(i,yl);Pt.pluginEvent.bind(F)(e,n,Me({dragEl:P,parentEl:le,ghostEl:R,rootEl:te,nextEl:ot,lastDownEl:Kt,cloneEl:ne,cloneHidden:et,dragStarted:Tt,putSortable:de,activeSortable:F.active,originalEvent:o,oldIndex:gt,oldDraggableIndex:Lt,newIndex:De,newDraggableIndex:tt,hideGhostForTarget:zi,unhideGhostForTarget:Yi,cloneNowHidden:function(){et=!0},cloneNowShown:function(){et=!1},dispatchSortableEvent:function(u){me({sortable:n,name:u,originalEvent:o})}},l))};function me(t){bl(Me({putSortable:de,cloneEl:ne,targetEl:P,rootEl:te,oldIndex:gt,oldDraggableIndex:Lt,newIndex:De,newDraggableIndex:tt},t))}var P,le,R,te,ot,Kt,ne,et,gt,De,Lt,tt,Zt,de,vt=!1,Jt=!1,$t=[],lt,Ae,Sn,kn,xi,Bi,Tt,bt,At,It=!1,en=!1,tn,fe,Cn=[],Pn=!1,nn=[],on=typeof document<"u",ln=ki,Ri=St||Ue?"cssFloat":"float",_l=on&&!Ci&&!ki&&"draggable"in document.createElement("div"),Hi=function(){if(on){if(Ue)return!1;var t=document.createElement("x");return t.style.cssText="pointer-events:auto",t.style.pointerEvents==="auto"}}(),Wi=function(e,n){var i=x(e),o=parseInt(i.width)-parseInt(i.paddingLeft)-parseInt(i.paddingRight)-parseInt(i.borderLeftWidth)-parseInt(i.borderRightWidth),l=ht(e,0,n),r=ht(e,1,n),u=l&&x(l),s=r&&x(r),a=u&&parseInt(u.marginLeft)+parseInt(u.marginRight)+re(l).width,d=s&&parseInt(s.marginLeft)+parseInt(s.marginRight)+re(r).width;if(i.display==="flex")return i.flexDirection==="column"||i.flexDirection==="column-reverse"?"vertical":"horizontal";if(i.display==="grid")return i.gridTemplateColumns.split(" ").length<=1?"vertical":"horizontal";if(l&&u.float&&u.float!=="none"){var c=u.float==="left"?"left":"right";return r&&(s.clear==="both"||s.clear===c)?"vertical":"horizontal"}return l&&(u.display==="block"||u.display==="flex"||u.display==="table"||u.display==="grid"||a>=o&&i[Ri]==="none"||r&&i[Ri]==="none"&&a+d>o)?"vertical":"horizontal"},wl=function(e,n,i){var o=i?e.left:e.top,l=i?e.right:e.bottom,r=i?e.width:e.height,u=i?n.left:n.top,s=i?n.right:n.bottom,a=i?n.width:n.height;return o===u||l===s||o+r/2===u+a/2},El=function(e,n){var i;return $t.some(function(o){var l=o[Ee].options.emptyInsertThreshold;if(!(!l||wn(o))){var r=re(o),u=e>=r.left-l&&e<=r.right+l,s=n>=r.top-l&&n<=r.bottom+l;if(u&&s)return i=o}}),i},qi=function(e){function n(l,r){return function(u,s,a,d){var c=u.options.group.name&&s.options.group.name&&u.options.group.name===s.options.group.name;if(l==null&&(r||c))return!0;if(l==null||l===!1)return!1;if(r&&l==="clone")return l;if(typeof l=="function")return n(l(u,s,a,d),r)(u,s,a,d);var f=(r?u:s).options.group.name;return l===!0||typeof l=="string"&&l===f||l.join&&l.indexOf(f)>-1}}var i={},o=e.group;(!o||Vt(o)!="object")&&(o={name:o}),i.name=o.name,i.checkPull=n(o.pull,!0),i.checkPut=n(o.put),i.revertClone=o.revertClone,e.group=i},zi=function(){!Hi&&R&&x(R,"display","none")},Yi=function(){!Hi&&R&&x(R,"display","")};on&&!Ci&&document.addEventListener("click",function(t){if(Jt)return t.preventDefault(),t.stopPropagation&&t.stopPropagation(),t.stopImmediatePropagation&&t.stopImmediatePropagation(),Jt=!1,!1},!0);var rt=function(e){if(P){e=e.touches?e.touches[0]:e;var n=El(e.clientX,e.clientY);if(n){var i={};for(var o in e)e.hasOwnProperty(o)&&(i[o]=e[o]);i.target=i.rootEl=n,i.preventDefault=void 0,i.stopPropagation=void 0,n[Ee]._onDragOver(i)}}},Dl=function(e){P&&P.parentNode[Ee]._isOutsideThisEl(e.target)};function F(t,e){if(!(t&&t.nodeType&&t.nodeType===1))throw"Sortable: `el` must be an HTMLElement, not ".concat({}.toString.call(t));this.el=t,this.options=e=je({},e),t[Ee]=this;var n={group:null,sort:!0,disabled:!1,store:null,handle:null,draggable:/^[uo]l$/i.test(t.nodeName)?">li":">*",swapThreshold:1,invertSwap:!1,invertedSwapThreshold:null,removeCloneOnHide:!0,direction:function(){return Wi(t,this.options)},ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",dragClass:"sortable-drag",ignore:"a, img",filter:null,preventOnFilter:!0,animation:0,easing:null,setData:function(r,u){r.setData("Text",u.textContent)},dropBubble:!1,dragoverBubble:!1,dataIdAttr:"data-id",delay:0,delayOnTouchOnly:!1,touchStartThreshold:(Number.parseInt?Number:window).parseInt(window.devicePixelRatio,10)||1,forceFallback:!1,fallbackClass:"sortable-fallback",fallbackOnBody:!1,fallbackTolerance:0,fallbackOffset:{x:0,y:0},supportPointer:F.supportPointer!==!1&&"PointerEvent"in window&&!kt,emptyInsertThreshold:5};Pt.initializePlugins(this,t,n);for(var i in n)!(i in e)&&(e[i]=n[i]);qi(e);for(var o in this)o.charAt(0)==="_"&&typeof this[o]=="function"&&(this[o]=this[o].bind(this));this.nativeDraggable=e.forceFallback?!1:_l,this.nativeDraggable&&(this.options.touchStartThreshold=1),e.supportPointer?K(t,"pointerdown",this._onTapStart):(K(t,"mousedown",this._onTapStart),K(t,"touchstart",this._onTapStart)),this.nativeDraggable&&(K(t,"dragover",this),K(t,"dragenter",this)),$t.push(this.el),e.store&&e.store.get&&this.sort(e.store.get(this)||[]),je(this,ml())}F.prototype={constructor:F,_isOutsideThisEl:function(e){!this.el.contains(e)&&e!==this.el&&(bt=null)},_getDirection:function(e,n){return typeof this.options.direction=="function"?this.options.direction.call(this,e,n,P):this.options.direction},_onTapStart:function(e){if(e.cancelable){var n=this,i=this.el,o=this.options,l=o.preventOnFilter,r=e.type,u=e.touches&&e.touches[0]||e.pointerType&&e.pointerType==="touch"&&e,s=(u||e).target,a=e.target.shadowRoot&&(e.path&&e.path[0]||e.composedPath&&e.composedPath()[0])||s,d=o.filter;if(Il(i),!P&&!(/mousedown|pointerdown/.test(r)&&e.button!==0||o.disabled)&&!a.isContentEditable&&!(!this.nativeDraggable&&kt&&s&&s.tagName.toUpperCase()==="SELECT")&&(s=Te(s,o.draggable,i,!1),!(s&&s.animated)&&Kt!==s)){if(gt=Ce(s),Lt=Ce(s,o.draggable),typeof d=="function"){if(d.call(this,e,s,this)){me({sortable:n,rootEl:a,name:"filter",targetEl:s,toEl:i,fromEl:i}),be("filter",n,{evt:e}),l&&e.cancelable&&e.preventDefault();return}}else if(d&&(d=d.split(",").some(function(c){if(c=Te(a,c.trim(),i,!1),c)return me({sortable:n,rootEl:c,name:"filter",targetEl:s,fromEl:i,toEl:i}),be("filter",n,{evt:e}),!0}),d)){l&&e.cancelable&&e.preventDefault();return}o.handle&&!Te(a,o.handle,i,!1)||this._prepareDragStart(e,u,s)}}},_prepareDragStart:function(e,n,i){var o=this,l=o.el,r=o.options,u=l.ownerDocument,s;if(i&&!P&&i.parentNode===l){var a=re(i);if(te=l,P=i,le=P.parentNode,ot=P.nextSibling,Kt=i,Zt=r.group,F.dragged=P,lt={target:P,clientX:(n||e).clientX,clientY:(n||e).clientY},xi=lt.clientX-a.left,Bi=lt.clientY-a.top,this._lastX=(n||e).clientX,this._lastY=(n||e).clientY,P.style["will-change"]="all",s=function(){if(be("delayEnded",o,{evt:e}),F.eventCanceled){o._onDrop();return}o._disableDelayedDragEvents(),!Si&&o.nativeDraggable&&(P.draggable=!0),o._triggerDragStart(e,n),me({sortable:o,name:"choose",originalEvent:e}),we(P,r.chosenClass,!0)},r.ignore.split(",").forEach(function(d){Ti(P,d.trim(),Ln)}),K(u,"dragover",rt),K(u,"mousemove",rt),K(u,"touchmove",rt),K(u,"mouseup",o._onDrop),K(u,"touchend",o._onDrop),K(u,"touchcancel",o._onDrop),Si&&this.nativeDraggable&&(this.options.touchStartThreshold=4,P.draggable=!0),be("delayStart",this,{evt:e}),r.delay&&(!r.delayOnTouchOnly||n)&&(!this.nativeDraggable||!(St||Ue))){if(F.eventCanceled){this._onDrop();return}K(u,"mouseup",o._disableDelayedDrag),K(u,"touchend",o._disableDelayedDrag),K(u,"touchcancel",o._disableDelayedDrag),K(u,"mousemove",o._delayedDragTouchMoveHandler),K(u,"touchmove",o._delayedDragTouchMoveHandler),r.supportPointer&&K(u,"pointermove",o._delayedDragTouchMoveHandler),o._dragStartTimer=setTimeout(s,r.delay)}else s()}},_delayedDragTouchMoveHandler:function(e){var n=e.touches?e.touches[0]:e;Math.max(Math.abs(n.clientX-this._lastX),Math.abs(n.clientY-this._lastY))>=Math.floor(this.options.touchStartThreshold/(this.nativeDraggable&&window.devicePixelRatio||1))&&this._disableDelayedDrag()},_disableDelayedDrag:function(){P&&Ln(P),clearTimeout(this._dragStartTimer),this._disableDelayedDragEvents()},_disableDelayedDragEvents:function(){var e=this.el.ownerDocument;Q(e,"mouseup",this._disableDelayedDrag),Q(e,"touchend",this._disableDelayedDrag),Q(e,"touchcancel",this._disableDelayedDrag),Q(e,"mousemove",this._delayedDragTouchMoveHandler),Q(e,"touchmove",this._delayedDragTouchMoveHandler),Q(e,"pointermove",this._delayedDragTouchMoveHandler)},_triggerDragStart:function(e,n){n=n||e.pointerType=="touch"&&e,!this.nativeDraggable||n?this.options.supportPointer?K(document,"pointermove",this._onTouchMove):n?K(document,"touchmove",this._onTouchMove):K(document,"mousemove",this._onTouchMove):(K(P,"dragend",this),K(te,"dragstart",this._onDragStart));try{document.selection?an(function(){document.selection.empty()}):window.getSelection().removeAllRanges()}catch{}},_dragStarted:function(e,n){if(vt=!1,te&&P){be("dragStarted",this,{evt:n}),this.nativeDraggable&&K(document,"dragover",Dl);var i=this.options;!e&&we(P,i.dragClass,!1),we(P,i.ghostClass,!0),F.active=this,e&&this._appendGhost(),me({sortable:this,name:"start",originalEvent:n})}else this._nulling()},_emulateDragOver:function(){if(Ae){this._lastX=Ae.clientX,this._lastY=Ae.clientY,zi();for(var e=document.elementFromPoint(Ae.clientX,Ae.clientY),n=e;e&&e.shadowRoot&&(e=e.shadowRoot.elementFromPoint(Ae.clientX,Ae.clientY),e!==n);)n=e;if(P.parentNode[Ee]._isOutsideThisEl(e),n)do{if(n[Ee]){var i=void 0;if(i=n[Ee]._onDragOver({clientX:Ae.clientX,clientY:Ae.clientY,target:e,rootEl:n}),i&&!this.options.dragoverBubble)break}e=n}while(n=n.parentNode);Yi()}},_onTouchMove:function(e){if(lt){var n=this.options,i=n.fallbackTolerance,o=n.fallbackOffset,l=e.touches?e.touches[0]:e,r=R&&pt(R,!0),u=R&&r&&r.a,s=R&&r&&r.d,a=ln&&fe&&Ii(fe),d=(l.clientX-lt.clientX+o.x)/(u||1)+(a?a[0]-Cn[0]:0)/(u||1),c=(l.clientY-lt.clientY+o.y)/(s||1)+(a?a[1]-Cn[1]:0)/(s||1);if(!F.active&&!vt){if(i&&Math.max(Math.abs(l.clientX-this._lastX),Math.abs(l.clientY-this._lastY))<i)return;this._onDragStart(e,!0)}if(R){r?(r.e+=d-(Sn||0),r.f+=c-(kn||0)):r={a:1,b:0,c:0,d:1,e:d,f:c};var f="matrix(".concat(r.a,",").concat(r.b,",").concat(r.c,",").concat(r.d,",").concat(r.e,",").concat(r.f,")");x(R,"webkitTransform",f),x(R,"mozTransform",f),x(R,"msTransform",f),x(R,"transform",f),Sn=d,kn=c,Ae=l}e.cancelable&&e.preventDefault()}},_appendGhost:function(){if(!R){var e=this.options.fallbackOnBody?document.body:te,n=re(P,!0,ln,!0,e),i=this.options;if(ln){for(fe=e;x(fe,"position")==="static"&&x(fe,"transform")==="none"&&fe!==document;)fe=fe.parentNode;fe!==document.body&&fe!==document.documentElement?(fe===document&&(fe=Fe()),n.top+=fe.scrollTop,n.left+=fe.scrollLeft):fe=Fe(),Cn=Ii(fe)}R=P.cloneNode(!0),we(R,i.ghostClass,!1),we(R,i.fallbackClass,!0),we(R,i.dragClass,!0),x(R,"transition",""),x(R,"transform",""),x(R,"box-sizing","border-box"),x(R,"margin",0),x(R,"top",n.top),x(R,"left",n.left),x(R,"width",n.width),x(R,"height",n.height),x(R,"opacity","0.8"),x(R,"position",ln?"absolute":"fixed"),x(R,"zIndex","100000"),x(R,"pointerEvents","none"),F.ghost=R,e.appendChild(R),x(R,"transform-origin",xi/parseInt(R.style.width)*100+"% "+Bi/parseInt(R.style.height)*100+"%")}},_onDragStart:function(e,n){var i=this,o=e.dataTransfer,l=i.options;if(be("dragStart",this,{evt:e}),F.eventCanceled){this._onDrop();return}be("setupClone",this),F.eventCanceled||(ne=Fi(P),ne.removeAttribute("id"),ne.draggable=!1,ne.style["will-change"]="",this._hideClone(),we(ne,this.options.chosenClass,!1),F.clone=ne),i.cloneId=an(function(){be("clone",i),!F.eventCanceled&&(i.options.removeCloneOnHide||te.insertBefore(ne,P),i._hideClone(),me({sortable:i,name:"clone"}))}),!n&&we(P,l.dragClass,!0),n?(Jt=!0,i._loopId=setInterval(i._emulateDragOver,50)):(Q(document,"mouseup",i._onDrop),Q(document,"touchend",i._onDrop),Q(document,"touchcancel",i._onDrop),o&&(o.effectAllowed="move",l.setData&&l.setData.call(i,o,P)),K(document,"drop",i),x(P,"transform","translateZ(0)")),vt=!0,i._dragStartId=an(i._dragStarted.bind(i,n,e)),K(document,"selectstart",i),Tt=!0,kt&&x(document.body,"user-select","none")},_onDragOver:function(e){var n=this.el,i=e.target,o,l,r,u=this.options,s=u.group,a=F.active,d=Zt===s,c=u.sort,f=de||a,h,p=this,v=!1;if(Pn)return;function g(Ne,yt){be(Ne,p,Me({evt:e,isOwner:d,axis:h?"vertical":"horizontal",revert:r,dragRect:o,targetRect:l,canSort:c,fromSortable:f,target:i,completed:E,onMove:function(Ve,at){return rn(te,n,P,o,Ve,re(Ve),e,at)},changed:D},yt))}function b(){g("dragOverAnimationCapture"),p.captureAnimationState(),p!==f&&f.captureAnimationState()}function E(Ne){return g("dragOverCompleted",{insertion:Ne}),Ne&&(d?a._hideClone():a._showClone(p),p!==f&&(we(P,de?de.options.ghostClass:a.options.ghostClass,!1),we(P,u.ghostClass,!0)),de!==p&&p!==F.active?de=p:p===F.active&&de&&(de=null),f===p&&(p._ignoreWhileAnimating=i),p.animateAll(function(){g("dragOverAnimationComplete"),p._ignoreWhileAnimating=null}),p!==f&&(f.animateAll(),f._ignoreWhileAnimating=null)),(i===P&&!P.animated||i===n&&!i.animated)&&(bt=null),!u.dragoverBubble&&!e.rootEl&&i!==document&&(P.parentNode[Ee]._isOutsideThisEl(e.target),!Ne&&rt(e)),!u.dragoverBubble&&e.stopPropagation&&e.stopPropagation(),v=!0}function D(){De=Ce(P),tt=Ce(P,u.draggable),me({sortable:p,name:"change",toEl:n,newIndex:De,newDraggableIndex:tt,originalEvent:e})}if(e.preventDefault!==void 0&&e.cancelable&&e.preventDefault(),i=Te(i,u.draggable,n,!0),g("dragOver"),F.eventCanceled)return v;if(P.contains(e.target)||i.animated&&i.animatingX&&i.animatingY||p._ignoreWhileAnimating===i)return E(!1);if(Jt=!1,a&&!u.disabled&&(d?c||(r=le!==te):de===this||(this.lastPutMode=Zt.checkPull(this,a,P,e))&&s.checkPut(this,a,P,e))){if(h=this._getDirection(e,i)==="vertical",o=re(P),g("dragOverValid"),F.eventCanceled)return v;if(r)return le=te,b(),this._hideClone(),g("revert"),F.eventCanceled||(ot?te.insertBefore(P,ot):te.appendChild(P)),E(!0);var w=wn(n,u.draggable);if(!w||Pl(e,h,this)&&!w.animated){if(w===P)return E(!1);if(w&&n===e.target&&(i=w),i&&(l=re(i)),rn(te,n,P,o,i,l,e,!!i)!==!1)return b(),w&&w.nextSibling?n.insertBefore(P,w.nextSibling):n.appendChild(P),le=n,D(),E(!0)}else if(w&&Cl(e,h,this)){var _=ht(n,0,u,!0);if(_===P)return E(!1);if(i=_,l=re(i),rn(te,n,P,o,i,l,e,!1)!==!1)return b(),n.insertBefore(P,_),le=n,D(),E(!0)}else if(i.parentNode===n){l=re(i);var C=0,S,B=P.parentNode!==n,T=!wl(P.animated&&P.toRect||o,i.animated&&i.toRect||l,h),J=h?"top":"left",Z=Ai(i,"top","top")||Ai(P,"top","top"),q=Z?Z.scrollTop:void 0;bt!==i&&(S=l[J],It=!1,en=!T&&u.invertSwap||B),C=Ll(e,i,l,h,T?1:u.swapThreshold,u.invertedSwapThreshold==null?u.swapThreshold:u.invertedSwapThreshold,en,bt===i);var j;if(C!==0){var U=Ce(P);do U-=C,j=le.children[U];while(j&&(x(j,"display")==="none"||j===R))}if(C===0||j===i)return E(!1);bt=i,At=C;var M=i.nextElementSibling,Y=!1;Y=C===1;var ce=rn(te,n,P,o,i,l,e,Y);if(ce!==!1)return(ce===1||ce===-1)&&(Y=ce===1),Pn=!0,setTimeout(kl,30),b(),Y&&!M?n.appendChild(P):i.parentNode.insertBefore(P,Y?M:i),Z&&Mi(Z,0,q-Z.scrollTop),le=P.parentNode,S!==void 0&&!en&&(tn=Math.abs(S-re(i)[J])),D(),E(!0)}if(n.contains(P))return E(!1)}return!1},_ignoreWhileAnimating:null,_offMoveEvents:function(){Q(document,"mousemove",this._onTouchMove),Q(document,"touchmove",this._onTouchMove),Q(document,"pointermove",this._onTouchMove),Q(document,"dragover",rt),Q(document,"mousemove",rt),Q(document,"touchmove",rt)},_offUpEvents:function(){var e=this.el.ownerDocument;Q(e,"mouseup",this._onDrop),Q(e,"touchend",this._onDrop),Q(e,"pointerup",this._onDrop),Q(e,"touchcancel",this._onDrop),Q(document,"selectstart",this)},_onDrop:function(e){var n=this.el,i=this.options;if(De=Ce(P),tt=Ce(P,i.draggable),be("drop",this,{evt:e}),le=P&&P.parentNode,De=Ce(P),tt=Ce(P,i.draggable),F.eventCanceled){this._nulling();return}vt=!1,en=!1,It=!1,clearInterval(this._loopId),clearTimeout(this._dragStartTimer),Tn(this.cloneId),Tn(this._dragStartId),this.nativeDraggable&&(Q(document,"drop",this),Q(n,"dragstart",this._onDragStart)),this._offMoveEvents(),this._offUpEvents(),kt&&x(document.body,"user-select",""),x(P,"transform",""),e&&(Tt&&(e.cancelable&&e.preventDefault(),!i.dropBubble&&e.stopPropagation()),R&&R.parentNode&&R.parentNode.removeChild(R),(te===le||de&&de.lastPutMode!=="clone")&&ne&&ne.parentNode&&ne.parentNode.removeChild(ne),P&&(this.nativeDraggable&&Q(P,"dragend",this),Ln(P),P.style["will-change"]="",Tt&&!vt&&we(P,de?de.options.ghostClass:this.options.ghostClass,!1),we(P,this.options.chosenClass,!1),me({sortable:this,name:"unchoose",toEl:le,newIndex:null,newDraggableIndex:null,originalEvent:e}),te!==le?(De>=0&&(me({rootEl:le,name:"add",toEl:le,fromEl:te,originalEvent:e}),me({sortable:this,name:"remove",toEl:le,originalEvent:e}),me({rootEl:le,name:"sort",toEl:le,fromEl:te,originalEvent:e}),me({sortable:this,name:"sort",toEl:le,originalEvent:e})),de&&de.save()):De!==gt&&De>=0&&(me({sortable:this,name:"update",toEl:le,originalEvent:e}),me({sortable:this,name:"sort",toEl:le,originalEvent:e})),F.active&&((De==null||De===-1)&&(De=gt,tt=Lt),me({sortable:this,name:"end",toEl:le,originalEvent:e}),this.save()))),this._nulling()},_nulling:function(){be("nulling",this),te=P=le=R=ot=ne=Kt=et=lt=Ae=Tt=De=tt=gt=Lt=bt=At=de=Zt=F.dragged=F.ghost=F.clone=F.active=null,nn.forEach(function(e){e.checked=!0}),nn.length=Sn=kn=0},handleEvent:function(e){switch(e.type){case"drop":case"dragend":this._onDrop(e);break;case"dragenter":case"dragover":P&&(this._onDragOver(e),Sl(e));break;case"selectstart":e.preventDefault();break}},toArray:function(){for(var e=[],n,i=this.el.children,o=0,l=i.length,r=this.options;o<l;o++)n=i[o],Te(n,r.draggable,this.el,!1)&&e.push(n.getAttribute(r.dataIdAttr)||Al(n));return e},sort:function(e,n){var i={},o=this.el;this.toArray().forEach(function(l,r){var u=o.children[r];Te(u,this.options.draggable,o,!1)&&(i[l]=u)},this),n&&this.captureAnimationState(),e.forEach(function(l){i[l]&&(o.removeChild(i[l]),o.appendChild(i[l]))}),n&&this.animateAll()},save:function(){var e=this.options.store;e&&e.set&&e.set(this)},closest:function(e,n){return Te(e,n||this.options.draggable,this.el,!1)},option:function(e,n){var i=this.options;if(n===void 0)return i[e];var o=Pt.modifyOption(this,e,n);typeof o<"u"?i[e]=o:i[e]=n,e==="group"&&qi(i)},destroy:function(){be("destroy",this);var e=this.el;e[Ee]=null,Q(e,"mousedown",this._onTapStart),Q(e,"touchstart",this._onTapStart),Q(e,"pointerdown",this._onTapStart),this.nativeDraggable&&(Q(e,"dragover",this),Q(e,"dragenter",this)),Array.prototype.forEach.call(e.querySelectorAll("[draggable]"),function(n){n.removeAttribute("draggable")}),this._onDrop(),this._disableDelayedDragEvents(),$t.splice($t.indexOf(this.el),1),this.el=e=null},_hideClone:function(){if(!et){if(be("hideClone",this),F.eventCanceled)return;x(ne,"display","none"),this.options.removeCloneOnHide&&ne.parentNode&&ne.parentNode.removeChild(ne),et=!0}},_showClone:function(e){if(e.lastPutMode!=="clone"){this._hideClone();return}if(et){if(be("showClone",this),F.eventCanceled)return;P.parentNode==te&&!this.options.group.revertClone?te.insertBefore(ne,P):ot?te.insertBefore(ne,ot):te.appendChild(ne),this.options.group.revertClone&&this.animate(P,ne),x(ne,"display",""),et=!1}}};function Sl(t){t.dataTransfer&&(t.dataTransfer.dropEffect="move"),t.cancelable&&t.preventDefault()}function rn(t,e,n,i,o,l,r,u){var s,a=t[Ee],d=a.options.onMove,c;return window.CustomEvent&&!Ue&&!St?s=new CustomEvent("move",{bubbles:!0,cancelable:!0}):(s=document.createEvent("Event"),s.initEvent("move",!0,!0)),s.to=e,s.from=t,s.dragged=n,s.draggedRect=i,s.related=o||e,s.relatedRect=l||re(e),s.willInsertAfter=u,s.originalEvent=r,t.dispatchEvent(s),d&&(c=d.call(a,s,r)),c}function Ln(t){t.draggable=!1}function kl(){Pn=!1}function Cl(t,e,n){var i=re(ht(n.el,0,n.options,!0)),o=Ni(n.el,n.options,R),l=10;return e?t.clientX<o.left-l||t.clientY<i.top&&t.clientX<i.right:t.clientY<o.top-l||t.clientY<i.bottom&&t.clientX<i.left}function Pl(t,e,n){var i=re(wn(n.el,n.options.draggable)),o=Ni(n.el,n.options,R),l=10;return e?t.clientX>o.right+l||t.clientY>i.bottom&&t.clientX>i.left:t.clientY>o.bottom+l||t.clientX>i.right&&t.clientY>i.top}function Ll(t,e,n,i,o,l,r,u){var s=i?t.clientY:t.clientX,a=i?n.height:n.width,d=i?n.top:n.left,c=i?n.bottom:n.right,f=!1;if(!r){if(u&&tn<a*o){if(!It&&(At===1?s>d+a*l/2:s<c-a*l/2)&&(It=!0),It)f=!0;else if(At===1?s<d+tn:s>c-tn)return-At}else if(s>d+a*(1-o)/2&&s<c-a*(1-o)/2)return Tl(e)}return f=f||r,f&&(s<d+a*l/2||s>c-a*l/2)?s>d+a/2?1:-1:0}function Tl(t){return Ce(P)<Ce(t)?1:-1}function Al(t){for(var e=t.tagName+t.className+t.src+t.href+t.textContent,n=e.length,i=0;n--;)i+=e.charCodeAt(n);return i.toString(36)}function Il(t){nn.length=0;for(var e=t.getElementsByTagName("input"),n=e.length;n--;){var i=e[n];i.checked&&nn.push(i)}}function an(t){return setTimeout(t,0)}function Tn(t){return clearTimeout(t)}on&&K(document,"touchmove",function(t){(F.active||vt)&&t.cancelable&&t.preventDefault()}),F.utils={on:K,off:Q,css:x,find:Ti,is:function(e,n){return!!Te(e,n,e,!1)},extend:pl,throttle:Oi,closest:Te,toggleClass:we,clone:Fi,index:Ce,nextTick:an,cancelNextTick:Tn,detectDirection:Wi,getChild:ht},F.get=function(t){return t[Ee]},F.mount=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];e[0].constructor===Array&&(e=e[0]),e.forEach(function(i){if(!i.prototype||!i.prototype.constructor)throw"Sortable: Mounted plugin must be a constructor function, not ".concat({}.toString.call(i));i.utils&&(F.utils=Me(Me({},F.utils),i.utils)),Pt.mount(i)})},F.create=function(t,e){return new F(t,e)},F.version=dl;var ae=[],Ot,An,In=!1,On,Mn,sn,Mt;function Ol(){function t(){this.defaults={scroll:!0,forceAutoScrollFallback:!1,scrollSensitivity:30,scrollSpeed:10,bubbleScroll:!0};for(var e in this)e.charAt(0)==="_"&&typeof this[e]=="function"&&(this[e]=this[e].bind(this))}return t.prototype={dragStarted:function(n){var i=n.originalEvent;this.sortable.nativeDraggable?K(document,"dragover",this._handleAutoScroll):this.options.supportPointer?K(document,"pointermove",this._handleFallbackAutoScroll):i.touches?K(document,"touchmove",this._handleFallbackAutoScroll):K(document,"mousemove",this._handleFallbackAutoScroll)},dragOverCompleted:function(n){var i=n.originalEvent;!this.options.dragOverBubble&&!i.rootEl&&this._handleAutoScroll(i)},drop:function(){this.sortable.nativeDraggable?Q(document,"dragover",this._handleAutoScroll):(Q(document,"pointermove",this._handleFallbackAutoScroll),Q(document,"touchmove",this._handleFallbackAutoScroll),Q(document,"mousemove",this._handleFallbackAutoScroll)),Xi(),un(),hl()},nulling:function(){sn=An=Ot=In=Mt=On=Mn=null,ae.length=0},_handleFallbackAutoScroll:function(n){this._handleAutoScroll(n,!0)},_handleAutoScroll:function(n,i){var o=this,l=(n.touches?n.touches[0]:n).clientX,r=(n.touches?n.touches[0]:n).clientY,u=document.elementFromPoint(l,r);if(sn=n,i||this.options.forceAutoScrollFallback||St||Ue||kt){Fn(n,this.options,u,i);var s=$e(u,!0);In&&(!Mt||l!==On||r!==Mn)&&(Mt&&Xi(),Mt=setInterval(function(){var a=$e(document.elementFromPoint(l,r),!0);a!==s&&(s=a,un()),Fn(n,o.options,a,i)},10),On=l,Mn=r)}else{if(!this.options.bubbleScroll||$e(u,!0)===Fe()){un();return}Fn(n,this.options,$e(u,!1),!1)}}},je(t,{pluginName:"scroll",initializeByDefault:!0})}function un(){ae.forEach(function(t){clearInterval(t.pid)}),ae=[]}function Xi(){clearInterval(Mt)}var Fn=Oi(function(t,e,n,i){if(e.scroll){var o=(t.touches?t.touches[0]:t).clientX,l=(t.touches?t.touches[0]:t).clientY,r=e.scrollSensitivity,u=e.scrollSpeed,s=Fe(),a=!1,d;An!==n&&(An=n,un(),Ot=e.scroll,d=e.scrollFn,Ot===!0&&(Ot=$e(n,!0)));var c=0,f=Ot;do{var h=f,p=re(h),v=p.top,g=p.bottom,b=p.left,E=p.right,D=p.width,w=p.height,_=void 0,C=void 0,S=h.scrollWidth,B=h.scrollHeight,T=x(h),J=h.scrollLeft,Z=h.scrollTop;h===s?(_=D<S&&(T.overflowX==="auto"||T.overflowX==="scroll"||T.overflowX==="visible"),C=w<B&&(T.overflowY==="auto"||T.overflowY==="scroll"||T.overflowY==="visible")):(_=D<S&&(T.overflowX==="auto"||T.overflowX==="scroll"),C=w<B&&(T.overflowY==="auto"||T.overflowY==="scroll"));var q=_&&(Math.abs(E-o)<=r&&J+D<S)-(Math.abs(b-o)<=r&&!!J),j=C&&(Math.abs(g-l)<=r&&Z+w<B)-(Math.abs(v-l)<=r&&!!Z);if(!ae[c])for(var U=0;U<=c;U++)ae[U]||(ae[U]={});(ae[c].vx!=q||ae[c].vy!=j||ae[c].el!==h)&&(ae[c].el=h,ae[c].vx=q,ae[c].vy=j,clearInterval(ae[c].pid),(q!=0||j!=0)&&(a=!0,ae[c].pid=setInterval((function(){i&&this.layer===0&&F.active._onTouchMove(sn);var M=ae[this.layer].vy?ae[this.layer].vy*u:0,Y=ae[this.layer].vx?ae[this.layer].vx*u:0;typeof d=="function"&&d.call(F.dragged.parentNode[Ee],Y,M,t,sn,ae[this.layer].el)!=="continue"||Mi(ae[this.layer].el,Y,M)}).bind({layer:c}),24))),c++}while(e.bubbleScroll&&f!==s&&(f=$e(f,!1)));In=a}},30),ji=function(e){var n=e.originalEvent,i=e.putSortable,o=e.dragEl,l=e.activeSortable,r=e.dispatchSortableEvent,u=e.hideGhostForTarget,s=e.unhideGhostForTarget;if(n){var a=i||l;u();var d=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:n,c=document.elementFromPoint(d.clientX,d.clientY);s(),a&&!a.el.contains(c)&&(r("spill"),this.onSpill({dragEl:o,putSortable:i}))}};function Nn(){}Nn.prototype={startIndex:null,dragStart:function(e){var n=e.oldDraggableIndex;this.startIndex=n},onSpill:function(e){var n=e.dragEl,i=e.putSortable;this.sortable.captureAnimationState(),i&&i.captureAnimationState();var o=ht(this.sortable.el,this.startIndex,this.options);o?this.sortable.el.insertBefore(n,o):this.sortable.el.appendChild(n),this.sortable.animateAll(),i&&i.animateAll()},drop:ji},je(Nn,{pluginName:"revertOnSpill"});function xn(){}xn.prototype={onSpill:function(e){var n=e.dragEl,i=e.putSortable,o=i||this.sortable;o.captureAnimationState(),n.parentNode&&n.parentNode.removeChild(n),o.animateAll()},drop:ji},je(xn,{pluginName:"removeOnSpill"}),F.mount(new Ol),F.mount(xn,Nn);function Gi(t,e,n){const i=t.slice();return i[16]=e[n],i}function Ui(t,e,n){const i=t.slice();return i[19]=e[n],i}function Vi(t){let e,n,i,o;function l(){return t[10](t[19])}return{c(){e=k("div"),n=k("a"),n.innerHTML='<i class="fas fa-pencil-alt fa-sm"></i>',m(n,"href","javascript:"),m(n,"data-action","editField"),m(n,"class","edit-field svelte-1mx8y43"),m(e,"class","right svelte-1mx8y43")},m(r,u){V(r,e,u),y(e,n),i||(o=oe(n,"click",l),i=!0)},p(r,u){t=r},d(r){r&&G(e),i=!1,o()}}}function Qi(t,e){let n,i,o,l=e[19].label+"",r,u,s,a=e[2].editable&&Vi(e),d=[e[9](e[19])],c={};for(let f=0;f<d.length;f+=1)c=fn(c,d[f]);return{key:t,first:null,c(){n=k("li"),i=k("div"),o=k("label"),r=ue(l),u=H(),a&&a.c(),s=H(),m(o,"class","svelte-1mx8y43"),m(i,"class","left svelte-1mx8y43"),Wt(n,c),qt(n,"svelte-1mx8y43",!0),this.first=n},m(f,h){V(f,n,h),y(n,i),y(i,o),y(o,r),y(n,u),a&&a.m(n,null),y(n,s)},p(f,h){e=f,h&1&&l!==(l=e[19].label+"")&&Be(r,l),e[2].editable?a?a.p(e,h):(a=Vi(e),a.c(),a.m(n,s)):a&&(a.d(1),a=null),Wt(n,c=di(d,[h&1&&e[9](e[19])])),qt(n,"svelte-1mx8y43",!0)},d(f){f&&G(n),a&&a.d()}}}function Ki(t,e){let n,i,o,l=e[16].label+"",r,u,s=[e[9](e[16])],a={};for(let d=0;d<s.length;d+=1)a=fn(a,s[d]);return{key:t,first:null,c(){n=k("li"),i=k("div"),o=k("label"),r=ue(l),u=H(),m(o,"class","svelte-1mx8y43"),m(i,"class","left svelte-1mx8y43"),Wt(n,a),qt(n,"svelte-1mx8y43",!0),this.first=n},m(d,c){V(d,n,c),y(n,i),y(i,o),y(o,r),y(n,u)},p(d,c){e=d,c&2&&l!==(l=e[16].label+"")&&Be(r,l),Wt(n,a=di(s,[c&2&&e[9](e[16])])),qt(n,"svelte-1mx8y43",!0)},d(d){d&&G(n)}}}function Ml(t){let e,n,i,o,l,r,u=[],s=new Map,a,d,c,f,h,p,v=[],g=new Map,b=ve(t[0]);const E=_=>_[19].name;for(let _=0;_<b.length;_+=1){let C=Ui(t,b,_),S=E(C);s.set(S,u[_]=Qi(S,C))}let D=ve(t[1]);const w=_=>_[16].name;for(let _=0;_<D.length;_+=1){let C=Gi(t,D,_),S=w(C);g.set(S,v[_]=Ki(S,C))}return{c(){e=k("div"),n=k("div"),i=k("div"),o=k("header"),o.textContent=`${N.translate("Enabled","labels","Admin")}`,l=H(),r=k("ul");for(let _=0;_<u.length;_+=1)u[_].c();a=H(),d=k("div"),c=k("div"),f=k("header"),f.textContent=`${N.translate("Disabled","labels","Admin")}`,h=H(),p=k("ul");for(let _=0;_<v.length;_+=1)v[_].c();m(r,"class","enabled connected svelte-1mx8y43"),m(i,"class","well"),m(n,"class","col-sm-5"),m(p,"class","disabled connected svelte-1mx8y43"),m(c,"class","well"),m(d,"class","col-sm-5"),m(e,"id","layout"),m(e,"class","row")},m(_,C){V(_,e,C),y(e,n),y(n,i),y(i,o),y(i,l),y(i,r);for(let S=0;S<u.length;S+=1)u[S]&&u[S].m(r,null);y(e,a),y(e,d),y(d,c),y(c,f),y(c,h),y(c,p);for(let S=0;S<v.length;S+=1)v[S]&&v[S].m(p,null);t[11](e)},p(_,C){C&645&&(b=ve(_[0]),u=Gt(u,C,E,1,_,b,s,r,jt,Qi,null,Ui)),C&514&&(D=ve(_[1]),v=Gt(v,C,w,1,_,D,g,p,jt,Ki,null,Gi))},d(_){_&&G(e);for(let C=0;C<u.length;C+=1)u[C].d();for(let C=0;C<v.length;C+=1)v[C].d();t[11](null)}}}function Fl(t){let e,n,i={params:t[2],validate:t[8],fetch:t[4],loadLayout:t[3],$$slots:{default:[Ml]},$$scope:{ctx:t}};return e=new Ei({props:i}),t[12](e),{c(){Je(e.$$.fragment)},m(o,l){We(e,o,l),n=!0},p(o,[l]){const r={};l&4&&(r.params=o[2]),l&16&&(r.fetch=o[4]),l&8&&(r.loadLayout=o[3]),l&4194343&&(r.$$scope={dirty:l,ctx:o}),e.$set(r)},i(o){n||(Le(e.$$.fragment,o),n=!0)},o(o){He(e.$$.fragment,o),n=!1},d(o){t[12](null),qe(e,o)}}}function Nl(t){return t.toLowerCase()}function Zi(t,e){return t[e]}function xl(t,e,n){let i,o,l,{params:r}=e,{enabledFields:u=[]}=e,{disabledFields:s=[]}=e,{loadLayout:a}=e,d;Yt(()=>{c()}),oi(()=>{o&&o.destroy(),l&&l.destroy()});function c(){const D={group:"fields",draggable:"li",animation:150};o=F.create(i.querySelector("ul.enabled"),{...D,onEnd(w){if(w.to.closest(".connected").classList.contains("enabled")){const[_]=u.splice(w.oldIndex,1);u.splice(w.newIndex,0,_)}else{const _=u[w.oldIndex];u.splice(w.oldIndex,1),s.splice(w.newIndex,0,_),n(1,s=[...s])}n(0,u=[...u])}}),l=F.create(i.querySelector("ul.disabled"),{...D,onEnd(w){if(w.to.closest(".connected").classList.contains("disabled")){const[_]=s.splice(w.oldIndex,1);s.splice(w.newIndex,0,_)}else{const _=s[w.oldIndex];s.splice(w.oldIndex,1),u.splice(w.newIndex,0,_),n(0,u=[...u])}n(1,s=[...s])}})}function f(D){r.openEditDialog(D,r.scope,r.dataAttributeList,r.dataAttributesDefs,w=>{n(0,u=u.map(_=>{if(_.name===D.name)for(let C in w)_[C]=w[C];return _}))})}let{fetch:h=()=>u}=e;function p(D){return D.length===0?(ze.notify("Layout cannot be empty","error"),!1):!0}function v(D){const w={};return r.dataAttributeList.forEach(_=>{Zi(D,_)!=null&&(w[`data-${Nl(_)}`]=Zi(D,_))}),w}const g=D=>f(D);function b(D){Re[D?"unshift":"push"](()=>{i=D,n(5,i)})}function E(D){Re[D?"unshift":"push"](()=>{d=D,n(6,d)})}return t.$$set=D=>{"params"in D&&n(2,r=D.params),"enabledFields"in D&&n(0,u=D.enabledFields),"disabledFields"in D&&n(1,s=D.disabledFields),"loadLayout"in D&&n(3,a=D.loadLayout),"fetch"in D&&n(4,h=D.fetch)},[u,s,r,a,h,i,d,f,p,v,g,b,E]}class Bn extends ke{constructor(e){super(),Se(this,e,xl,Fl,_e,{params:2,enabledFields:0,disabledFields:1,loadLayout:3,fetch:4})}}function Bl(t){let e,n,i={params:t[0],enabledFields:t[2],disabledFields:t[3],editable:Rl,loadLayout:t[4]};return e=new Bn({props:i}),t[6](e),{c(){Je(e.$$.fragment)},m(o,l){We(e,o,l),n=!0},p(o,[l]){const r={};l&1&&(r.params=o[0]),l&4&&(r.enabledFields=o[2]),l&8&&(r.disabledFields=o[3]),e.$set(r)},i(o){n||(Le(e.$$.fragment,o),n=!0)},o(o){He(e.$$.fragment,o),n=!1},d(o){t[6](null),qe(e,o)}}}let Rl=!0;function Hl(t){return!0}function Wl(t,e,n){let{params:i}=e;i.dataAttributeList||(i.dataAttributeList=["id","name","width","widthPx","link","notSortable","align","view","customLabel"]),i.dataAttributesDefs||(i.dataAttributesDefs={link:{type:"bool"},width:{type:"float"},notSortable:{type:"bool"},align:{type:"enum",options:["left","right"]},view:{type:"varchar",readOnly:!0},customLabel:{type:"varchar",readOnly:!0},widthPx:{type:"float"},name:{type:"varchar",readOnly:!0}});let{layoutDisabledParameter:o="layoutListDisabled"}=e,l,r=[],u=[];const s=[],a=[];function d(p){Dt.create(i.scope,v=>{Ye.get(i.scope,i.type,i.layoutProfileId,g=>{p&&(c(v,g),p())},!1)})}function c(p,v){const g=Object.keys(p.defs.fields).filter(w=>Hl(p.getFieldParam(w,"type"))&&f(p,w)).sort((w,_)=>N.translate(w,"fields",i.scope).localeCompare(N.translate(_,"fields",i.scope))),b=[],E=[],D=[];n(2,r=v.map(w=>{const _=N.translate(w.name,"fields",i.scope);return E.includes(_)&&D.push(_),E.push(_),b.push(w.name),{...w,label:w.label||_}})),n(3,u=g.filter(w=>!b.includes(w)).map(w=>{const _=N.translate(w,"fields",i.scope);E.includes(_)&&D.push(_),E.push(_);const C={name:w,label:_},S=Xe.get(["entityDefs",i.scope,"fields",w,"type"]);return S&&Xe.get(["fields",S,"notSortable"])&&(C.notSortable=!0),C})),[r,u].forEach(w=>{w.forEach(_=>{D.includes(_.label)&&(_.label+=` (${_.name})`)})})}function f(p,v){return s.includes(v)||a.includes(p.getFieldParam(v,"type"))?!1:!p.getFieldParam(v,"disabled")&&!p.getFieldParam(v,o)}function h(p){Re[p?"unshift":"push"](()=>{l=p,n(1,l)})}return t.$$set=p=>{"params"in p&&n(0,i=p.params),"layoutDisabledParameter"in p&&n(5,o=p.layoutDisabledParameter)},[i,l,r,u,d,o,h]}class Ji extends ke{constructor(e){super(),Se(this,e,Wl,Bl,_e,{params:0,layoutDisabledParameter:5})}}function ql(t){let e,n,i={params:t[0],enabledFields:t[2],disabledFields:t[3],loadLayout:t[5],fetch:t[4]};return e=new Bn({props:i}),t[7](e),{c(){Je(e.$$.fragment)},m(o,l){We(e,o,l),n=!0},p(o,[l]){const r={};l&1&&(r.params=o[0]),l&4&&(r.enabledFields=o[2]),l&8&&(r.disabledFields=o[3]),e.$set(r)},i(o){n||(Le(e.$$.fragment,o),n=!0)},o(o){He(e.$$.fragment,o),n=!1},d(o){t[7](null),qe(e,o)}}}function zl(t,e,n){let{params:i}=e,{viewType:o="detail"}=e;i.dataAttributeList||(i.dataAttributeList=["id","name","style","sticked"]),i.dataAttributesDefs||(i.dataAttributesDefs={style:{type:"enum",options:["default","success","danger","primary","info","warning"],translation:"LayoutManager.options.style"},sticked:{type:"bool"},name:{readOnly:!0}});let l,r=[],u=[],s=()=>{let f={};return r.forEach(h=>{f[h.name]=h}),u.forEach(h=>{f[h.name]={...h,disabled:!0}}),f};function a(f){Ye.get(i.scope,i.type,i.layoutProfileId,h=>{f&&(d(h),f())},!1)}function d(f){let h=[],p={},v={};Xe.get(["clientDefs",i.scope,"defaultSidePanel",o])!==!1&&!Xe.get(["clientDefs",i.scope,"defaultSidePanelDisabled"])&&(h.push("default"),p.default="Default"),(Xe.get(["clientDefs",i.scope,"sidePanels",o])||[]).forEach(g=>{g.name&&(h.push(g.name),g.label&&(p[g.name]=g.label),v[g.name]=g)}),n(3,u=[]),f=f||{},n(2,r=[]),h.forEach((g,b)=>{let E=!1,D=f[g]||{};D.disabled&&(E=!0);let w;if(p[g]?w=N.translate(p[g],"labels",i.scope):w=N.translate(g,"panels",i.scope),E)u.push({name:g,label:w});else{let _={name:g,label:w};_.name in v&&i.dataAttributeList.forEach(C=>{if(C==="name")return;let S=v[_.name]||{};C in S&&(_[C]=S[C])});for(let C in D)_[C]=D[C];_.index="index"in D?D.index:b,r.push(_)}}),r.sort((g,b)=>g.index-b.index)}function c(f){Re[f?"unshift":"push"](()=>{l=f,n(1,l)})}return t.$$set=f=>{"params"in f&&n(0,i=f.params),"viewType"in f&&n(6,o=f.viewType)},[i,l,r,u,s,a,o,c]}class dn extends ke{constructor(e){super(),Se(this,e,zl,ql,_e,{params:0,viewType:6})}}function Yl(t){let e,n;return e=new Bn({props:{params:t[0],enabledFields:t[1],disabledFields:t[2],loadLayout:t[3]}}),{c(){Je(e.$$.fragment)},m(i,o){We(e,i,o),n=!0},p(i,[o]){const l={};o&1&&(l.params=i[0]),o&2&&(l.enabledFields=i[1]),o&4&&(l.disabledFields=i[2]),e.$set(l)},i(i){n||(Le(e.$$.fragment,i),n=!0)},o(i){He(e.$$.fragment,i),n=!1},d(i){qe(e,i)}}}function Xl(t,e){return!t.getLinkParam(e,"disabled")&&!t.getLinkParam(e,"layoutRelationshipsDisabled")}function jl(t,e,n){let{params:i}=e;i.dataAttributeList||(i.dataAttributeList=["id","name","style","hiddenPerDefault"]),i.dataAttributesDefs||(i.dataAttributesDefs={style:{type:"enum",options:["default","success","danger","primary","info","warning"],translation:"LayoutManager.options.style"},hiddenPerDefault:{type:"bool"},name:{readOnly:!0}});let o=[],l=[];function r(s){Dt.create(i.scope,function(a){Ye.get(i.scope,i.type,i.layoutProfileId,d=>{s&&(u(a,d),s())},!1)})}function u(s,a){let d=[];for(let h in s.defs.links)["belongsTo","hasMany","hasChildren"].includes(s.defs.links[h].type)&&Xl(s,h)&&d.push(h);const c=Xe.get(["clientDefs",i.scope,"bottomPanels","detail"])||[];for(let h of c)h.layoutRelationshipsDisabled||d.push(h.name);d.sort(function(h,p){let v,g,b=c.find(D=>D.name===h),E=c.find(D=>D.name===p);return h in s.defs.links?v=N.translate(h,"links",i.scope):b&&(v=N.translate(b.label,"labels",i.scope)),p in s.defs.links?g=N.translate(p,"links",i.scope):E&&(g=N.translate(E.label,"labels",i.scope)),v.localeCompare(g)});let f=[];n(1,o=[]),n(2,l=[]);for(let h in a){let p=a[h],v,g=c.find(b=>b.name===p.name);typeof p=="string"||p instanceof String?v={name:p,label:g?N.translate(g.label,"labels",i.scope):N.translate(p,"links",i.scope)}:(v=p,v.label=g?N.translate(g.label,"labels",i.scope):N.translate(v.name,"links",i.scope)),i.dataAttributeList.forEach(b=>{if(b==="name"||b in v)return;let E=Xe.get(["clientDefs",i.scope,"relationshipPanels",v.name,b]);E!==null&&(v[b]=E)}),o.push(v),f.push(v.name)}for(let h of d)if(!f.includes(h)){let p=c.find(v=>v.name===h);l.push({name:h,label:p?N.translate(p.label,"labels",i.scope):N.translate(h,"links",i.scope)})}}return t.$$set=s=>{"params"in s&&n(0,i=s.params)},[i,o,l,r]}class Gl extends ke{constructor(e){super(),Se(this,e,jl,Yl,_e,{params:0})}}function $i(t,e,n){const i=t.slice();return i[40]=e[n],i}function eo(t,e,n){const i=t.slice();return i[43]=e[n],i}function to(t,e,n){const i=t.slice();return i[46]=e[n],i}function no(t,e,n){const i=t.slice();return i[49]=e[n],i[51]=n,i}function Ul(t){let e,n,i,o,l;function r(){return t[21](t[43],t[46],t[51])}function u(...s){return t[22](t[43],t[46],t[51],...s)}return{c(){e=k("li"),n=k("a"),n.innerHTML='<i class="fas fa-minus"></i>',i=H(),m(n,"href","#"),m(n,"data-action","minusCell"),m(n,"class","remove-field svelte-fp3tbt"),m(e,"class","empty cell svelte-fp3tbt")},m(s,a){V(s,e,a),y(e,n),y(e,i),o||(l=[oe(n,"click",Ze(r)),oe(e,"dragover",Ze(Jl)),oe(e,"drop",u)],o=!0)},p(s,a){t=s},d(s){s&&G(e),o=!1,xe(l)}}}function Vl(t){let e,n=t[49].label+"",i,o,l,r,u,s,a,d,c,f,h;function p(){return t[19](t[43],t[46],t[51])}function v(...g){return t[20](t[49],...g)}return{c(){e=k("li"),i=ue(n),o=H(),l=k("a"),l.innerHTML='<i class="fas fa-times"></i>',r=H(),m(l,"href","#"),m(l,"data-action","removeField"),m(l,"class","remove-field svelte-fp3tbt"),m(e,"class","cell svelte-fp3tbt"),m(e,"draggable","true"),m(e,"data-id",u=t[49].id),m(e,"data-name",s=t[49].name),m(e,"data-full-width",a=t[49].fullWidth?"true":void 0),m(e,"data-custom-label",d=t[49].customLabel?t[49].customLabel:void 0),m(e,"data-no-label",c=t[49].noLabel)},m(g,b){V(g,e,b),y(e,i),y(e,o),y(e,l),y(e,r),f||(h=[oe(l,"click",Ze(p)),oe(e,"dragstart",mn(v))],f=!0)},p(g,b){t=g,b[0]&2&&n!==(n=t[49].label+"")&&Be(i,n),b[0]&2&&u!==(u=t[49].id)&&m(e,"data-id",u),b[0]&2&&s!==(s=t[49].name)&&m(e,"data-name",s),b[0]&2&&a!==(a=t[49].fullWidth?"true":void 0)&&m(e,"data-full-width",a),b[0]&2&&d!==(d=t[49].customLabel?t[49].customLabel:void 0)&&m(e,"data-custom-label",d),b[0]&2&&c!==(c=t[49].noLabel)&&m(e,"data-no-label",c)},d(g){g&&G(e),f=!1,xe(h)}}}function io(t){let e;function n(l,r){return l[49]?Vl:Ul}let i=n(t),o=i(t);return{c(){o.c(),e=ii()},m(l,r){o.m(l,r),V(l,e,r)},p(l,r){i===(i=n(l))&&o?o.p(l,r):(o.d(1),o=i(l),o&&(o.c(),o.m(e.parentNode,e)))},d(l){l&&G(e),o.d(l)}}}function oo(t,e){let n,i,o,l,r,u,s,a,d;function c(){return e[18](e[43],e[46])}let f=ve(e[46].cells),h=[];for(let p=0;p<f.length;p+=1)h[p]=io(no(e,f,p));return{key:t,first:null,c(){n=k("li"),i=k("div"),o=k("a"),o.innerHTML='<i class="fas fa-times"></i>',l=H(),r=k("ul");for(let p=0;p<h.length;p+=1)h[p].c();u=H(),m(o,"href","#"),m(o,"data-action","removeRow"),m(o,"class","remove-row pull-right svelte-fp3tbt"),m(i,"class","svelte-fp3tbt"),m(r,"class","cells svelte-fp3tbt"),m(n,"class","row svelte-fp3tbt"),m(n,"data-number",s=e[46].number),this.first=n},m(p,v){V(p,n,v),y(n,i),y(i,o),y(n,l),y(n,r);for(let g=0;g<h.length;g+=1)h[g]&&h[g].m(r,null);y(n,u),a||(d=[oe(o,"click",Ze(c)),oe(r,"mousedown",mn($l))],a=!0)},p(p,v){if(e=p,v[0]&5634){f=ve(e[46].cells);let g;for(g=0;g<f.length;g+=1){const b=no(e,f,g);h[g]?h[g].p(b,v):(h[g]=io(b),h[g].c(),h[g].m(r,null))}for(;g<h.length;g+=1)h[g].d(1);h.length=f.length}v[0]&2&&s!==(s=e[46].number)&&m(n,"data-number",s)},d(p){p&&G(n),hn(h,p),a=!1,xe(d)}}}function lo(t,e){let n,i,o,l=(e[43].customLabel||e[43].label||"")+"",r,u,s,a,d,c,f,h,p,v,g,b=[],E=new Map,D,w,_,C,S,B,T;function J(){return e[16](e[43])}function Z(){return e[17](e[43])}let q=ve(e[43].rows);const j=M=>M[46].number;for(let M=0;M<q.length;M+=1){let Y=to(e,q,M),ce=j(Y);E.set(ce,b[M]=oo(ce,Y))}function U(){return e[23](e[43])}return{key:t,first:null,c(){n=k("li"),i=k("header"),o=k("label"),r=ue(l),s=ue(`Â 
                                `),a=k("a"),a.innerHTML='<i class="fas fa-pencil-alt fa-sm"></i>',d=H(),c=k("a"),f=k("i"),v=H(),g=k("ul");for(let M=0;M<b.length;M+=1)b[M].c();D=H(),w=k("div"),_=k("a"),_.innerHTML='<i class="fas fa-plus"></i>',C=H(),m(o,"data-is-custom",u=e[43].customLabel?"true":void 0),m(o,"class","svelte-fp3tbt"),m(a,"href","#"),m(a,"data-action","edit-panel-label"),m(a,"class","edit-panel-label svelte-fp3tbt"),m(f,"class","fas fa-times"),m(c,"href","#"),Oe(c,"float","right"),m(c,"data-action","removePanel"),m(c,"class","remove-panel svelte-fp3tbt"),m(c,"data-number",h=e[43].number),m(i,"data-name",p=e[43].name),m(i,"class","svelte-fp3tbt"),m(g,"class","rows svelte-fp3tbt"),m(_,"href","#"),m(_,"data-action","addRow"),m(_,"class","svelte-fp3tbt"),m(w,"class","svelte-fp3tbt"),m(n,"data-number",S=e[43].number),m(n,"class","panel-layout svelte-fp3tbt"),this.first=n},m(M,Y){V(M,n,Y),y(n,i),y(i,o),y(o,r),y(i,s),y(i,a),y(i,d),y(i,c),y(c,f),y(n,v),y(n,g);for(let ce=0;ce<b.length;ce+=1)b[ce]&&b[ce].m(g,null);y(n,D),y(n,w),y(w,_),y(n,C),B||(T=[oe(a,"click",Ze(J)),oe(c,"click",Ze(Z)),oe(g,"mousedown",mn(er)),oe(_,"click",Ze(U))],B=!0)},p(M,Y){e=M,Y[0]&2&&l!==(l=(e[43].customLabel||e[43].label||"")+"")&&Be(r,l),Y[0]&2&&u!==(u=e[43].customLabel?"true":void 0)&&m(o,"data-is-custom",u),Y[0]&2&&h!==(h=e[43].number)&&m(c,"data-number",h),Y[0]&2&&p!==(p=e[43].name)&&m(i,"data-name",p),Y[0]&5890&&(q=ve(e[43].rows),b=Gt(b,Y,j,1,e,q,E,g,jt,oo,null,to)),Y[0]&2&&S!==(S=e[43].number)&&m(n,"data-number",S)},d(M){M&&G(n);for(let Y=0;Y<b.length;Y+=1)b[Y].d();B=!1,xe(T)}}}function ro(t){let e,n=t[40].label+"",i,o,l,r,u;function s(...a){return t[24](t[40],...a)}return{c(){e=k("li"),i=ue(n),o=H(),m(e,"class","cell svelte-fp3tbt"),m(e,"data-name",l=t[40].name)},m(a,d){V(a,e,d),y(e,i),y(e,o),r||(u=oe(e,"dragstart",s),r=!0)},p(a,d){t=a,d[0]&4&&n!==(n=t[40].label+"")&&Be(i,n),d[0]&4&&l!==(l=t[40].name)&&m(e,"data-name",l)},d(a){a&&G(e),r=!1,u()}}}function Ql(t){let e,n,i,o,l,r,u,s,a=[],d=new Map,c,f,h,p,v,g,b,E,D=ve(t[1]);const w=S=>S[43].number;for(let S=0;S<D.length;S+=1){let B=eo(t,D,S),T=w(B);d.set(T,a[S]=lo(T,B))}let _=ve(t[2]),C=[];for(let S=0;S<_.length;S+=1)C[S]=ro($i(t,_,S));return{c(){e=k("div"),n=k("div"),i=k("div"),o=k("header"),o.textContent=`${N.translate("Layout","LayoutManager")}`,l=H(),r=k("a"),r.textContent=`${N.translate("Add Panel","Admin")}`,u=H(),s=k("ul");for(let S=0;S<a.length;S+=1)a[S].c();c=H(),f=k("div"),h=k("div"),p=k("header"),p.textContent=`${N.translate("Available Fields","Admin")}`,v=H(),g=k("ul");for(let S=0;S<C.length;S+=1)C[S].c();m(o,"class","svelte-fp3tbt"),m(r,"href","#"),m(r,"class","svelte-fp3tbt"),m(s,"class","panels svelte-fp3tbt"),m(i,"class","well svelte-fp3tbt"),m(n,"class","col-md-8 svelte-fp3tbt"),m(p,"class","svelte-fp3tbt"),m(g,"class","disabled cells clearfix svelte-fp3tbt"),m(h,"class","well svelte-fp3tbt"),m(f,"class","col-md-4 svelte-fp3tbt"),m(e,"id","layout"),m(e,"class","row svelte-fp3tbt")},m(S,B){V(S,e,B),y(e,n),y(n,i),y(i,o),y(i,l),y(i,r),y(i,u),y(i,s);for(let T=0;T<a.length;T+=1)a[T]&&a[T].m(s,null);y(e,c),y(e,f),y(f,h),y(h,p),y(h,v),y(h,g);for(let T=0;T<C.length;T+=1)C[T]&&C[T].m(g,null);b||(E=oe(r,"click",Ze(t[5])),b=!0)},p(S,B){if(B[0]&8130&&(D=ve(S[1]),a=Gt(a,B,w,1,S,D,d,s,jt,lo,null,eo)),B[0]&4){_=ve(S[2]);let T;for(T=0;T<_.length;T+=1){const J=$i(S,_,T);C[T]?C[T].p(J,B):(C[T]=ro(J),C[T].c(),C[T].m(g,null))}for(;T<C.length;T+=1)C[T].d(1);C.length=_.length}},d(S){S&&G(e);for(let B=0;B<a.length;B+=1)a[B].d();hn(C,S),b=!1,E()}}}function Kl(t){let e,n;return e=new Ei({props:{params:t[0],validate:t[13],fetch:t[4],loadLayout:t[3],$$slots:{default:[Ql]},$$scope:{ctx:t}}}),{c(){Je(e.$$.fragment)},m(i,o){We(e,i,o),n=!0},p(i,o){const l={};o[0]&1&&(l.params=i[0]),o[0]&6|o[1]&2097152&&(l.$$scope={dirty:o,ctx:i}),e.$set(l)},i(i){n||(Le(e.$$.fragment,i),n=!0)},o(i){He(e.$$.fragment,i),n=!1},d(i){qe(e,i)}}}function Zl(t,e){return e.some(n=>n.name===t)}const Jl=t=>t.dataTransfer.dropEffect="move",$l=()=>{},er=()=>{};function tr(t,e,n){let{params:i}=e,{columnCount:o=2}=e,{layoutDisabledParameter:l="layoutDetailDisabled"}=e,r=["id","label","style"],u={label:{type:"varchar"},style:{type:"enum",options:["default","success","danger","primary","info","warning"],translation:"LayoutManager.options.style"},dynamicLogicVisible:{type:"base",view:"views/admin/field-manager/fields/dynamic-logic-conditions"}},s=["modifiedAt","createdAt","modifiedBy","createdBy","assignedUser","ownerUser","teams"],a=[],d=[],c=-1,f=-1,h;Ro();function p(L){let A,W;const z=[];z.push(new Promise(X=>{Dt.create(i.scope,ee=>{Ye.get(i.scope,i.type,i.layoutProfileId,$=>{A=$,W=ee,X()},!1)})})),["detail","detailSmall"].includes(i.type)&&z.push(new Promise(X=>{Ye.get(i.scope,"sidePanels"+Espo.utils.upperCaseFirst(i.type),i.layoutProfileId,ee=>{h=ee,X()},!1)})),Promise.all(z).then(()=>{L&&(v(W,A),D(),si().then(()=>{_()}),L())})}function v(L,A){let W=[];const z=[];for(const $ in L.defs.fields)g(L,$)&&(z.push(N.translate($,"fields",i.scope)),W.push($));const X=z.filter(($,ye)=>z.indexOf($)!==ye);let ee=[];n(2,d=[]),n(1,a=A),A.forEach(($,ye)=>{$.rows.forEach((ie,Ie)=>{ie&&ie.forEach((Pe,Qe)=>{if(Qe==o||!Pe)return;let nt=N.translate(Pe.name,"fields",i.scope);X.includes(nt)&&(nt+=` (${Pe.name})`),ee.push({name:Pe.name,label:nt}),n(1,a[ye].rows[Ie][Qe].label=nt,a)})})}),W.sort(($,ye)=>N.translate($,"fields",i.scope).localeCompare(N.translate(ye,"fields",i.scope)));for(const $ in W)if(!Zl(W[$],ee)){const ye=W[$];let ie=N.translate(ye,"fields",i.scope);X.includes(ie)&&(ie+=` (${ye})`),d.push({name:ye,label:ie})}}function g(L,A){return b()&&s.includes(A)?!1:!L.getFieldParam(A,"disabled")&&!L.getFieldParam(A,l)}function b(){if(Xe.get(["clientDefs",i.scope,"defaultSidePanelDisabled"]))return!1;if(h){for(const L in h)if(L==="default"&&h[L].disabled)return!1}return!0}function E(){return a.map(L=>({...L,rows:L.rows.map(A=>A.cells)}))}function D(){c=-1,f=-1,n(1,a=a.map((L,A)=>(L.number=A,c=A,L.rows=L.rows.map(W=>({number:f++,cells:W})),L)))}function w(L){F.create(L,{animation:150,group:"rows",draggable:"li.row",onEnd(A){const W=parseInt(A.to.closest(".panel-layout").getAttribute("data-number")),z=parseInt(A.from.closest(".panel-layout").getAttribute("data-number"));if(z===W)n(1,a=a.map(X=>{if(X.number===W){const[ee]=X.rows.splice(A.oldIndex,1);X.rows.splice(A.newIndex,0,ee)}return X}));else{const ee=a.find($=>$.number===z).rows[A.oldIndex];n(1,a=a.map($=>($.number===z&&$.rows.splice(A.oldIndex,1),$.number===W&&$.rows.splice(A.newIndex,0,ee),$)))}}})}function _(){const L=document.querySelector("ul.panels");L&&F.create(L,{animation:150,group:"panels",draggable:"li.panel-layout",onEnd(A){const W=Array.from(A.to.children);n(1,a=W.map(z=>{const X=parseInt(z.getAttribute("data-number"));return a.find(ee=>ee.number===X)}))}}),document.querySelectorAll("ul.rows").forEach(A=>{w(A)}),document.querySelectorAll("ul.cells.disabled").forEach(A=>{F.create(A,{animation:150,group:"cells",draggable:"li.cell"})})}function C(){c++;const L={label:"New panel",rows:[{number:f++,cells:[!1,!1]}],number:c,name:`panel${c}`,isCustomLabel:!0};n(1,a=[...a,L]),si().then(()=>{const A=document.querySelector(`.panel-layout[data-number="${L.number}"] > .rows`);w(A)})}function S(L){const A=a.find(z=>z.number===L);n(1,a=a.filter(z=>z!==A));let W=[];A.rows.forEach(z=>{z.cells.forEach(X=>{X&&W.push(X)})}),n(2,d=[...d,...W])}function B(L){n(1,a=a.map(A=>(A.number===L&&(A.rows=[...A.rows,{number:f++,cells:Array(o).fill(!1)}]),A)))}function T(L,A){n(1,a=a.map(W=>{if(W.number===L){const z=W.rows.find(X=>X.number===A);W.rows=W.rows.filter(X=>X!=z),n(2,d=[...d,...z.cells.filter(X=>!!X)])}return W}))}function J(L,A,W){n(1,a=a.map(z=>(z.number===L&&(z.rows=z.rows.map((X,ee)=>{if(X.number===A){const $=X.cells[W];$&&n(2,d=[...d,$]),X.cells[W]=!1}return X})),z)))}function Z(L,A,W,z){const X=L.dataTransfer.getData("name");let ee=d.find(ie=>ie.name===X),$=null,ye=null;if(ee)n(2,d=d.filter(ie=>ie!==ee));else{if(a.forEach(ie=>{ie.rows.forEach((Ie,Pe)=>{Ie.cells.forEach(Qe=>{Qe&&Qe.name===X&&(ee=Qe,$=Ie.number,ye=ie.number)})})}),!ee)return;n(1,a=a.map((ie,Ie)=>(ye===ie.number&&(ie.rows=ie.rows.map((Pe,Qe)=>(Pe.number===$&&(Pe.cells=Pe.cells.map((nt,cr)=>nt&&nt.name===X?!1:nt)),Pe))),ie)))}n(1,a=a.map(ie=>(A===ie.number&&(ie.rows=ie.rows.map(Ie=>(W===Ie.number&&(Ie.cells=Ie.cells.map((Pe,Qe)=>Qe===z?(ee.fullWidth&&Ie.cells.length>1&&delete ee.fullWidth,ee):Pe)),Ie))),ie)))}function q(L){i.onEditPanel(L,r,u,A=>{n(1,a=a.map(W=>(W.number===L.number&&r.forEach(z=>{L[z]=A[z]}),W)))})}function j(L,A,W){n(1,a=a.map(z=>(L===z.number&&(z.rows=z.rows.map(X=>{if(A===X.number){const ee=X.cells.filter(($,ye)=>ye!==W);ee.length===1&&ee[0]&&(ee[0].fullWidth=!0),X.cells=ee}return X})),z)))}function U(L){let A=0;return L.forEach(W=>{W.rows.forEach(z=>{z.forEach(X=>{X&&A++})})}),A===0?(ze.notify("Layout cannot be empty.","error"),!1):!0}const M=L=>q(L),Y=L=>S(L.number),ce=(L,A)=>T(L.number,A.number),Ne=(L,A,W)=>J(L.number,A.number,W),yt=(L,A)=>{A.dataTransfer.setData("name",L.name)},Ft=(L,A,W)=>j(L.number,A.number,W),Ve=(L,A,W,z)=>Z(z,L.number,A.number,W),at=L=>B(L.number),cn=(L,A)=>{A.dataTransfer.setData("name",L.name)};return t.$$set=L=>{"params"in L&&n(0,i=L.params),"columnCount"in L&&n(14,o=L.columnCount),"layoutDisabledParameter"in L&&n(15,l=L.layoutDisabledParameter)},[i,a,d,p,E,C,S,B,T,J,Z,q,j,U,o,l,M,Y,ce,Ne,yt,Ft,Ve,at,cn]}class nr extends ke{constructor(e){super(),Se(this,e,tr,Kl,_e,{params:0,columnCount:14,layoutDisabledParameter:15},null,[-1,-1])}}function ir(t){let e,n;return e=new t[1]({props:{params:t[0],layoutDisabledParameter:t[2],viewType:t[3]}}),{c(){Je(e.$$.fragment)},m(i,o){We(e,i,o),n=!0},p(i,[o]){const l={};o&1&&(l.params=i[0]),o&4&&(l.layoutDisabledParameter=i[2]),o&8&&(l.viewType=i[3]),e.$set(l)},i(i){n||(Le(e.$$.fragment,i),n=!0)},o(i){He(e.$$.fragment,i),n=!1},d(i){qe(e,i)}}}function or(t,e,n){let{params:i}=e,o,l,r;return t.$$set=u=>{"params"in u&&n(0,i=u.params)},t.$$.update=()=>{if(t.$$.dirty&1)switch(i.type){case"list":case"listSmall":n(2,l=i.type==="list"?"layoutListDisabled":"layoutListSmallDisabled"),n(1,o=Ji);break;case"kanban":n(1,o=Ji),n(0,i.dataAttributeList=["id","name","link","align","view","isLarge","cssStyle"],i),n(0,i.dataAttributesDefs={link:{type:"bool"},isLarge:{type:"bool"},width:{type:"float"},cssStyle:{type:"varchar"},align:{type:"enum",options:["left","right"]},view:{type:"varchar",readOnly:!0},name:{type:"varchar",readOnly:!0}},i);break;case"relationships":n(1,o=Gl);break;case"detail":case"detailSmall":n(2,l=i.type==="detail"?"layoutDetailDisabled":"layoutDetailSmallDisabled"),n(1,o=nr);break;case"sidePanelsDetail":n(3,r="detail"),n(1,o=dn);break;case"sidePanelsDetailSmall":n(3,r="detailSmall"),n(1,o=dn);break;case"sidePanelsEdit":n(3,r="edit"),n(1,o=dn);break;case"sidePanelsEditSmall":n(3,r="editSmall"),n(1,o=dn);break}},[i,o,l,r]}class lr extends ke{constructor(e){super(),Se(this,e,or,ir,_e,{params:0})}}function rr(t){let e,n,i,o,l,r=N.translate("apiRequest","labels","Admin")+"",u,s,a,d,c,f,h,p,v,g,b,E,D,w,_,C,S,B,T,J,Z,q,j=N.translate("response","fields","Admin")+"",U,M,Y=N.translate("status","labels","Admin")+"",ce,Ne,yt,Ft,Ve,at,cn;return{c(){e=k("div"),n=k("h3"),i=k("div"),o=k("div"),l=k("a"),l.textContent=`${N.translate("Administration")}`,u=ue(r),s=H(),a=k("div"),a.textContent=`${N.translate("apiRequest","labels","Admin")}`,d=H(),c=k("button"),c.textContent=`${N.translate("execute","labels","Admin")}`,f=H(),h=k("div"),p=k("div"),v=k("div"),g=k("div"),b=k("label"),b.textContent=`${N.translate("Type","fields","Admin")}`,E=H(),D=k("div"),w=H(),_=k("div"),C=k("div"),S=k("label"),S.textContent=`${N.translate("request","fields","Admin")}`,B=H(),T=k("div"),J=H(),Z=k("div"),q=k("label"),U=ue(j),M=k("span"),ce=ue(Y),Ne=ue(": "),yt=k("span"),Ft=H(),Ve=k("div"),m(l,"href","#Admin"),m(o,"class","breadcrumbs-wrapper"),m(i,"class","header-breadcrumbs fixed-header-breadcrumbs"),m(a,"class","header-title"),Oe(c,"margin","10px 7px 10px 5px"),m(c,"class","btn btn-primary action"),m(c,"data-action","execute"),m(c,"type","button"),m(e,"class","page-header"),m(b,"class","control-label"),m(b,"data-name","type"),m(D,"class","field"),m(D,"data-name","type"),m(g,"class","col-xs-12 cell form-group"),m(v,"class","row"),m(p,"class","col-sm-3"),m(h,"class","row"),m(S,"class","control-label"),m(S,"data-name","request"),m(T,"class","field"),m(T,"data-name","request"),m(C,"class","col-sm-12 col-md-6 cell form-group"),m(M,"class","pull-right status hidden"),Oe(q,"width","100%"),m(q,"class","control-label"),m(q,"data-name","response"),m(Ve,"class","field"),m(Ve,"data-name","response"),m(Z,"class","col-sm-12 col-md-6 cell form-group"),m(_,"class","row")},m(L,A){V(L,e,A),y(e,n),y(n,i),y(i,o),y(o,l),y(o,u),y(n,s),y(n,a),y(e,d),y(e,c),V(L,f,A),V(L,h,A),y(h,p),y(p,v),y(v,g),y(g,b),y(g,E),y(g,D),V(L,w,A),V(L,_,A),y(_,C),y(C,S),y(C,B),y(C,T),y(_,J),y(_,Z),y(Z,q),y(q,U),y(q,M),y(M,ce),y(M,Ne),y(M,yt),y(Z,Ft),y(Z,Ve),at||(cn=oe(c,"click",function(){pn(t[0](t[1]))&&t[0](t[1]).apply(this,arguments)}),at=!0)},p(L,[A]){t=L},i:ge,o:ge,d(L){L&&(G(e),G(f),G(h),G(w),G(_)),at=!1,cn()}}}function ar(t,e,n){let{afterOnMount:i=()=>null}=e,{sendRequest:o=()=>null}=e,l=null;return Yt(()=>{Dt.create("",function(r){n(1,l=r),i(l)})}),t.$$set=r=>{"afterOnMount"in r&&n(2,i=r.afterOnMount),"sendRequest"in r&&n(0,o=r.sendRequest)},[o,l,i]}class sr extends ke{constructor(e){super(),Se(this,e,ar,rr,_e,{afterOnMount:2,sendRequest:0})}}window.SvelteLanguage=N,window.SvelteUserData=fi,window.SvelteNotifier=ze,window.SvelteLayoutManager=Ye,window.SvelteMetadata=Xe,window.SvelteModelFactory=Dt,window.driver=Lo,pe.ApiRequestComponent=sr,pe.LayoutComponent=lr,pe.QueueManagerIcon=Zo,pe.UpdatePanel=ol,Object.defineProperty(pe,Symbol.toStringTag,{value:"Module"})});
