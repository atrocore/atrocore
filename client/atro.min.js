(function(ue,Z){typeof exports=="object"&&typeof module<"u"?Z(exports):typeof define=="function"&&define.amd?define(["exports"],Z):(ue=typeof globalThis<"u"?globalThis:ue||self,Z(ue.Svelte={}))})(this,function(ue){"use strict";var ua=Object.defineProperty;var fa=(ue,Z,Be)=>Z in ue?ua(ue,Z,{enumerable:!0,configurable:!0,writable:!0,value:Be}):ue[Z]=Be;var vn=(ue,Z,Be)=>fa(ue,typeof Z!="symbol"?Z+"":Z,Be);function Z(){}function Be(t,e){for(const n in e)t[n]=e[n];return t}function yn(t){return t()}function wn(){return Object.create(null)}function Ce(t){t.forEach(yn)}function En(t){return typeof t=="function"}function _e(t,e){return t!=t?e==e:t!==e||t&&typeof t=="object"||typeof t=="function"}let Et;function Dn(t,e){return t===e?!0:(Et||(Et=document.createElement("a")),Et.href=e,t===Et.href)}function Al(t){return Object.keys(t).length===0}function Ol(t,e,n,l){if(t){const i=Sn(t,e,n,l);return t[0](i)}}function Sn(t,e,n,l){return t[1]&&l?Be(n.ctx.slice(),t[1](l(e))):n.ctx}function Il(t,e,n,l){if(t[2]&&l){const i=t[2](l(n));if(e.dirty===void 0)return i;if(typeof i=="object"){const a=[],o=Math.max(e.dirty.length,i.length);for(let s=0;s<o;s+=1)a[s]=e.dirty[s]|i[s];return a}return e.dirty|i}return e.dirty}function Fl(t,e,n,l,i,a){if(i){const o=Sn(e,n,l,a);t.p(o,i)}}function Nl(t){if(t.ctx.length>32){const e=[],n=t.ctx.length/32;for(let l=0;l<n;l++)e[l]=-1;return e}return-1}function b(t,e){t.appendChild(e)}function Q(t,e,n){t.insertBefore(e,n||null)}function U(t){t.parentNode&&t.parentNode.removeChild(t)}function Ke(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}function k(t){return document.createElement(t)}function fe(t){return document.createTextNode(t)}function q(){return fe(" ")}function kn(){return fe("")}function ee(t,e,n,l){return t.addEventListener(e,n,l),()=>t.removeEventListener(e,n,l)}function Ye(t){return function(e){return e.preventDefault(),t.call(this,e)}}function Qt(t){return function(e){return e.stopPropagation(),t.call(this,e)}}function h(t,e,n){n==null?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}const Ml=["width","height"];function Dt(t,e){const n=Object.getOwnPropertyDescriptors(t.__proto__);for(const l in e)e[l]==null?t.removeAttribute(l):l==="style"?t.style.cssText=e[l]:l==="__value"?t.value=t[l]=e[l]:n[l]&&n[l].set&&Ml.indexOf(l)===-1?t[l]=e[l]:h(t,l,e[l])}function Rl(t){return Array.from(t.childNodes)}function Ae(t,e){e=""+e,t.data!==e&&(t.data=e)}function qe(t,e,n,l){n==null?t.style.removeProperty(e):t.style.setProperty(e,n,"")}function St(t,e,n){t.classList.toggle(e,!!n)}function Hl(t,e,{bubbles:n=!1,cancelable:l=!1}={}){return new CustomEvent(t,{detail:e,bubbles:n,cancelable:l})}let ut;function ft(t){ut=t}function kt(){if(!ut)throw new Error("Function called outside component initialization");return ut}function Vt(t){kt().$$.on_mount.push(t)}function Bl(t){kt().$$.after_update.push(t)}function Tn(t){kt().$$.on_destroy.push(t)}function Pn(){const t=kt();return(e,n,{cancelable:l=!1}={})=>{const i=t.$$.callbacks[e];if(i){const a=Hl(e,n,{cancelable:l});return i.slice().forEach(o=>{o.call(t,a)}),!a.defaultPrevented}return!0}}const Ze=[],ke=[];let Je=[];const Ln=[],Cn=Promise.resolve();let Kt=!1;function An(){Kt||(Kt=!0,Cn.then(In))}function On(){return An(),Cn}function Zt(t){Je.push(t)}const Jt=new Set;let xe=0;function In(){if(xe!==0)return;const t=ut;do{try{for(;xe<Ze.length;){const e=Ze[xe];xe++,ft(e),Yl(e.$$)}}catch(e){throw Ze.length=0,xe=0,e}for(ft(null),Ze.length=0,xe=0;ke.length;)ke.pop()();for(let e=0;e<Je.length;e+=1){const n=Je[e];Jt.has(n)||(Jt.add(n),n())}Je.length=0}while(Ze.length);for(;Ln.length;)Ln.pop()();Kt=!1,Jt.clear(),ft(t)}function Yl(t){if(t.fragment!==null){t.update(),Ce(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(Zt)}}function ql(t){const e=[],n=[];Je.forEach(l=>t.indexOf(l)===-1?e.push(l):n.push(l)),n.forEach(l=>l()),Je=e}const Tt=new Set;let zl;function ye(t,e){t&&t.i&&(Tt.delete(t),t.i(e))}function Oe(t,e,n,l){if(t&&t.o){if(Tt.has(t))return;Tt.add(t),zl.c.push(()=>{Tt.delete(t)}),t.o(e)}}function ce(t){return(t==null?void 0:t.length)!==void 0?t:Array.from(t)}function Xl(t,e){t.d(1),e.delete(t.key)}function jl(t,e,n,l,i,a,o,s,r,u,c,f){let m=t.length,v=a.length,d=m;const y={};for(;d--;)y[t[d].key]=d;const E=[],p=new Map,_=new Map,w=[];for(d=v;d--;){const g=f(i,a,d),L=n(g);let P=o.get(L);P?w.push(()=>P.p(g,e)):(P=u(L,g),P.c()),p.set(L,E[d]=P),L in y&&_.set(L,Math.abs(d-y[L]))}const D=new Set,T=new Set;function A(g){ye(g,1),g.m(s,c),o.set(g.key,g),c=g.first,v--}for(;m&&v;){const g=E[v-1],L=t[m-1],P=g.key,V=L.key;g===L?(c=g.first,m--,v--):p.has(V)?!o.has(P)||D.has(P)?A(g):T.has(V)?m--:_.get(P)>_.get(V)?(T.add(P),A(g)):(D.add(V),m--):(r(L,o),m--)}for(;m--;){const g=t[m];p.has(g.key)||r(g,o)}for(;v;)A(E[v-1]);return Ce(w),E}function Fn(t,e){const n={},l={},i={$$scope:1};let a=t.length;for(;a--;){const o=t[a],s=e[a];if(s){for(const r in o)r in s||(l[r]=1);for(const r in s)i[r]||(n[r]=s[r],i[r]=1);t[a]=s}else for(const r in o)i[r]=1}for(const o in l)o in n||(n[o]=void 0);return n}function ze(t){t&&t.c()}function Ie(t,e,n){const{fragment:l,after_update:i}=t.$$;l&&l.m(e,n),Zt(()=>{const a=t.$$.on_mount.map(yn).filter(En);t.$$.on_destroy?t.$$.on_destroy.push(...a):Ce(a),t.$$.on_mount=[]}),i.forEach(Zt)}function Fe(t,e){const n=t.$$;n.fragment!==null&&(ql(n.after_update),Ce(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function Gl(t,e){t.$$.dirty[0]===-1&&(Ze.push(t),An(),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function we(t,e,n,l,i,a,o=null,s=[-1]){const r=ut;ft(t);const u=t.$$={fragment:null,ctx:[],props:a,update:Z,not_equal:i,bound:wn(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(r?r.$$.context:[])),callbacks:wn(),dirty:s,skip_bound:!1,root:e.target||r.$$.root};o&&o(u.root);let c=!1;if(u.ctx=n?n(t,e.props||{},(f,m,...v)=>{const d=v.length?v[0]:m;return u.ctx&&i(u.ctx[f],u.ctx[f]=d)&&(!u.skip_bound&&u.bound[f]&&u.bound[f](d),c&&Gl(t,f)),m}):[],u.update(),c=!0,Ce(u.before_update),u.fragment=l?l(u.ctx):!1,e.target){if(e.hydrate){const f=Rl(e.target);u.fragment&&u.fragment.l(f),f.forEach(U)}else u.fragment&&u.fragment.c();e.intro&&ye(t.$$.fragment),Ie(t,e.target,e.anchor),In()}ft(r)}class Ee{constructor(){vn(this,"$$");vn(this,"$$set")}$destroy(){Fe(this,1),this.$destroy=Z}$on(e,n){if(!En(n))return Z;const l=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return l.push(n),()=>{const i=l.indexOf(n);i!==-1&&l.splice(i,1)}}$set(e){this.$$set&&!Al(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}const Wl="4",$e=[];function et(t,e=Z){let n;const l=new Set;function i(s){if(_e(t,s)&&(t=s,n)){const r=!$e.length;for(const u of l)u[1](),$e.push(u,t);if(r){for(let u=0;u<$e.length;u+=2)$e[u][0]($e[u+1]);$e.length=0}}}function a(s){i(s(t))}function o(s,r=Z){const u=[s,r];return l.add(u),l.size===1&&(n=e(i,a)||Z),s(t),()=>{l.delete(u),l.size===0&&n&&(n(),n=null)}}return{set:i,update:a,subscribe:o}}const xt=et({}),B={setTranslations(t){xt.set(t)},has(t,e,n){let l=!1;return xt.subscribe(i=>{if(n in i&&e in i[n]&&t in i[n][e]){l=!0;return}})(),l},get(t,e,n){let l=n;return xt.subscribe(i=>{if(t in i&&e in i[t]&&n in i[t][e]){l=i[t][e][n];return}if(t in i&&e in i[t]&&n in i[t][e]){l=i[t][e][n];return}if(t=="Global"){l=n;return}l=null})(),l},translate(t,e=null,n=null){n=n||"Global",e=e||"labels";let l=B.get(n,e,t);return l===null&&n!="Global"&&(l=B.get("Global",e,t)),l},translateOption(t,e,n=null){let l=B.translate(e,"options",n);return l===null?"":typeof l=="object"?l[t]:t}},Nn=et({}),Mn={set(t){Nn.set(t)},get(){let t=null;return Nn.subscribe(e=>{e&&(t=e)})(),t}},$t=et(),me={setNotifier(t){$t.set(t)},notify(t,e=null,n=2e3){$t.subscribe(l=>{l&&l.notify(t,e,2e3)})()},confirm(t=null,e=null,n){$t.subscribe(l=>{if(l){let i=null,a=null,o=null;typeof t=="string"||t instanceof String?(a=t,o=B.translate("Yes")):(t=t||{},a=t.message,o=t.confirmText,i=t.confirmStyle||null),l.confirm(a,{confirmText:o,cancelText:B.translate("Cancel"),confirmStyle:i},e,n)}})()}},Pt=et(),Ne={setLayoutManager(t){Pt.set(t)},resetToDefault(t,e,n,l){let i=null;return Pt.subscribe(a=>{a&&(i=a.resetToDefault(t,e,n,l))})(),i},get:function(t,e,n,l,i){let a=null;return Pt.subscribe(o=>{o&&(a=o.get(t,e,n,l,i))})(),a},set:function(t,e,n,l,i){let a=null;return Pt.subscribe(o=>{o&&(a=o.set(t,e,n,l,i))})(),a}},Rn=et(),Xe={setMetadata(t){Rn.set(t)},get(t){Rn.subscribe(e=>{e&&e.get(t)})()}},Hn=et(),Lt={setModelFactory(t){Hn.set(t)},create(t,e){Hn.subscribe(n=>{n&&n.create(t,e)})()}};typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(Wl);function Bn(t){let e,n,l,i,a,o,s,r,u,c,f,m,v,d,y;function E(w,D){return w[2]?Ql:Ul}let p=E(t),_=p(t);return{c(){e=k("div"),n=k("div"),l=k("div"),i=k("span"),i.textContent=`${B.translate("queueManager","labels","QueueItem")}`,a=q(),o=k("span"),s=k("a"),s.innerHTML='<span aria-hidden="true">Ã—</span>',r=q(),_.c(),u=q(),c=k("a"),c.textContent=`${B.translate("View List")}`,f=q(),m=k("div"),v=k("div"),v.textContent=`${B.translate("Loading...")}`,h(i,"class","panel-heading-title"),h(s,"href","/"),h(s,"class","close svelte-1p6ppx8"),h(c,"href","#QueueItem"),h(c,"title",B.translate("View List")),h(c,"class","qp-view-list svelte-1p6ppx8"),h(o,"class","pull-right"),h(l,"class","panel-heading clearfix"),h(v,"class","list-container"),h(m,"class","panel-body"),h(n,"class","panel panel-default"),h(e,"class","queue-panel-container")},m(w,D){Q(w,e,D),b(e,n),b(n,l),b(l,i),b(l,a),b(l,o),b(o,s),b(o,r),_.m(o,null),b(o,u),b(o,c),b(n,f),b(n,m),b(m,v),t[9](e),d||(y=ee(s,"click",t[6]),d=!0)},p(w,D){p===(p=E(w))&&_?_.p(w,D):(_.d(1),_=p(w),_&&(_.c(),_.m(o,u)))},d(w){w&&U(e),_.d(),t[9](null),d=!1,y()}}}function Ul(t){let e,n,l;return{c(){e=k("a"),e.textContent=`${B.translate("Pause")}`,h(e,"href","/"),h(e,"title",B.translate("Pause")),h(e,"class","qm-button")},m(i,a){Q(i,e,a),n||(l=ee(e,"click",t[8]),n=!0)},p:Z,d(i){i&&U(e),n=!1,l()}}}function Ql(t){let e,n,l;return{c(){e=k("a"),e.textContent=`${B.translate("Start")}`,h(e,"href","/"),h(e,"title",B.translate("Start")),h(e,"class","qm-button")},m(i,a){Q(i,e,a),n||(l=ee(e,"click",t[7]),n=!0)},p:Z,d(i){i&&U(e),n=!1,l()}}}function Vl(t){let e,n=t[0]&&Bn(t);return{c(){n&&n.c(),e=kn()},m(l,i){n&&n.m(l,i),Q(l,e,i)},p(l,[i]){l[0]?n?n.p(l,i):(n=Bn(l),n.c(),n.m(e.parentNode,e)):n&&(n.d(1),n=null)},i:Z,o:Z,d(l){l&&U(e),n&&n.d(l)}}}function Kl(t,e,n){let{isOpen:l=!1}=e,{close:i}=e,{icon:a}=e,o=!1;window.addEventListener("publicDataFetched",d=>{n(2,o=!!d.detail.qmPaused)});let s;function r(d){s&&!s.contains(d.target)&&a&&!a.contains(d.target)&&l===!0&&i()}Vt(()=>{document.addEventListener("click",r)}),Tn(()=>{document.removeEventListener("click",r)});async function u(d){let y=Mn.get();if(y)try{const E=await fetch("/api/v1/App/action/QueueManagerUpdate",{method:"POST",headers:{"Content-Type":"application/json","Authorization-Token":btoa(y.user.userName+":"+y.token)},body:JSON.stringify({pause:d})});if(!E.ok)throw new Error("Network response was not ok");await E.json(),me.notify("Done","success")}catch(E){console.error("Error:",E)}}const c=d=>{d.preventDefault(),i()},f=d=>{d.preventDefault(),u(!1)},m=d=>{d.preventDefault(),u(!0)};function v(d){ke[d?"unshift":"push"](()=>{s=d,n(3,s)})}return t.$$set=d=>{"isOpen"in d&&n(0,l=d.isOpen),"close"in d&&n(1,i=d.close),"icon"in d&&n(5,a=d.icon)},[l,i,o,s,u,a,c,f,m,v]}class Zl extends Ee{constructor(e){super(),we(this,e,Kl,Vl,_e,{isOpen:0,close:1,icon:5})}}function Yn(t){let e;return{c(){e=k("span"),h(e,"class","fas fa-pause-circle pause-icon")},m(n,l){Q(n,e,l)},d(n){n&&U(e)}}}function Jl(t){let e,n,l,i,a,o,s,r,u=t[2]&&Yn();return a=new Zl({props:{icon:t[0],isOpen:t[1],close:t[4]}}),{c(){e=k("a"),n=k("span"),l=q(),u&&u.c(),i=q(),ze(a.$$.fragment),h(n,"class","fas fa-tasks"),h(e,"href","/"),h(e,"class","notifications-button")},m(c,f){Q(c,e,f),b(e,n),b(e,l),u&&u.m(e,null),t[6](e),Q(c,i,f),Ie(a,c,f),o=!0,s||(r=ee(e,"click",t[7]),s=!0)},p(c,[f]){c[2]?u||(u=Yn(),u.c(),u.m(e,null)):u&&(u.d(1),u=null);const m={};f&1&&(m.icon=c[0]),f&2&&(m.isOpen=c[1]),a.$set(m)},i(c){o||(ye(a.$$.fragment,c),o=!0)},o(c){Oe(a.$$.fragment,c),o=!1},d(c){c&&(U(e),U(i)),u&&u.d(),t[6](null),Fe(a,c),s=!1,r()}}}function xl(t,e,n){let{renderTable:l=()=>{}}=e,i,a=!1,o=!1;window.addEventListener("publicDataFetched",f=>{n(2,o=!!f.detail.qmPaused)});function s(){a||(n(1,a=!0),l())}function r(){n(1,a=!1),window.dispatchEvent(new Event("qmPanelClosed"))}function u(f){ke[f?"unshift":"push"](()=>{i=f,n(0,i)})}const c=f=>{f.preventDefault(),s()};return t.$$set=f=>{"renderTable"in f&&n(5,l=f.renderTable)},[i,a,o,s,r,l,u,c]}class $l extends Ee{constructor(e){super(),we(this,e,xl,Jl,_e,{renderTable:5})}}function ei(t){let e,n=`${t[0]}px`,l=`${t[0]}px`,i=`${t[1]}px`;return{c(){e=k("div"),h(e,"class","loading-icon spinner svelte-yw8t7l"),qe(e,"width",n),qe(e,"height",l),qe(e,"border-width",i)},m(a,o){Q(a,e,o)},p(a,[o]){o&1&&n!==(n=`${a[0]}px`)&&qe(e,"width",n),o&1&&l!==(l=`${a[0]}px`)&&qe(e,"height",l),o&2&&i!==(i=`${a[1]}px`)&&qe(e,"border-width",i)},i:Z,o:Z,d(a){a&&U(e)}}}function ti(t,e,n){let{size:l=40}=e,{thickness:i=4}=e;return t.$$set=a=>{"size"in a&&n(0,l=a.size),"thickness"in a&&n(1,i=a.thickness)},[l,i]}class ni extends Ee{constructor(e){super(),we(this,e,ti,ei,_e,{size:0,thickness:1})}}function qn(t){let e,n;return{c(){e=k("img"),Dn(e.src,n=t[1])||h(e,"src",n),h(e,"class","logo"),h(e,"alt",t[0])},m(l,i){Q(l,e,i)},p(l,i){i&2&&!Dn(e.src,n=l[1])&&h(e,"src",n),i&1&&h(e,"alt",l[0])},d(l){l&&U(e)}}}function zn(t){let e,n,l;return{c(){e=k("a"),n=k("i"),l=fe("Recovery Instructions"),h(n,"class","fa fa-history svelte-1qmezxs"),h(e,"href",t[2]),h(e,"target","_blank"),h(e,"class","btn btn-default svelte-1qmezxs"),h(e,"role","button"),qe(e,"float","right")},m(i,a){Q(i,e,a),b(e,n),b(e,l)},p(i,a){a&4&&h(e,"href",i[2])},d(i){i&&U(e)}}}function Xn(t){let e,n,l,i,a,o;return{c(){e=k("hr"),n=q(),l=k("pre"),i=fe(t[3]),h(l,"class","logs-container svelte-1qmezxs")},m(s,r){Q(s,e,r),Q(s,n,r),Q(s,l,r),b(l,i),t[11](l),a||(o=ee(l,"scroll",t[8]),a=!0)},p(s,r){r&8&&Ae(i,s[3])},d(s){s&&(U(e),U(n),U(l)),t[11](null),a=!1,o()}}}function li(t){let e,n,l,i,a,o,s,r,u,c,f,m,v,d,y,E,p,_,w=t[4]?"Hide":"Show",D,T,A,g,L,P,V,K,x=t[1]&&qn(t);c=new ni({props:{size:"40",thickness:"5"}});let R=t[2]&&zn(t),z=t[4]&&t[3]&&Xn(t);return{c(){e=k("div"),n=k("div"),l=k("div"),x&&x.c(),i=q(),a=k("div"),o=k("div"),s=k("h3"),s.textContent="System is updating...",r=q(),u=k("section"),ze(c.$$.fragment),f=q(),m=k("h5"),v=fe(t[5]),d=q(),y=k("section"),E=k("div"),p=k("button"),_=k("i"),D=fe(w),T=fe(" logs"),g=q(),R&&R.c(),L=q(),z&&z.c(),h(l,"class","logo-container"),h(n,"class","panel-heading"),h(m,"class","svelte-1qmezxs"),h(u,"class","progress-section svelte-1qmezxs"),h(_,"class","fa fa-list svelte-1qmezxs"),h(p,"class","btn btn-default svelte-1qmezxs"),p.disabled=A=!t[3],h(E,"class","buttons"),h(y,"class","logs-section"),h(o,"class","form-group"),h(a,"class","panel-body"),h(e,"id","login"),h(e,"class","panel panel-default panel-updating")},m(N,ne){Q(N,e,ne),b(e,n),b(n,l),x&&x.m(l,null),b(e,i),b(e,a),b(a,o),b(o,s),b(o,r),b(o,u),Ie(c,u,null),b(u,f),b(u,m),b(m,v),b(o,d),b(o,y),b(y,E),b(E,p),b(p,_),b(p,D),b(p,T),b(E,g),R&&R.m(E,null),b(y,L),z&&z.m(y,null),P=!0,V||(K=ee(p,"click",t[7]),V=!0)},p(N,[ne]){N[1]?x?x.p(N,ne):(x=qn(N),x.c(),x.m(l,null)):x&&(x.d(1),x=null),(!P||ne&32)&&Ae(v,N[5]),(!P||ne&16)&&w!==(w=N[4]?"Hide":"Show")&&Ae(D,w),(!P||ne&8&&A!==(A=!N[3]))&&(p.disabled=A),N[2]?R?R.p(N,ne):(R=zn(N),R.c(),R.m(E,null)):R&&(R.d(1),R=null),N[4]&&N[3]?z?z.p(N,ne):(z=Xn(N),z.c(),z.m(y,null)):z&&(z.d(1),z=null)},i(N){P||(ye(c.$$.fragment,N),P=!0)},o(N){Oe(c.$$.fragment,N),P=!1},d(N){N&&U(e),x&&x.d(),Fe(c),R&&R.d(),z&&z.d(),V=!1,K()}}}function ii(t){return t.replace(/^\d{2,4}.\d{2}.\d{2,4} \d{2}:\d{2}:\d{2}/g,"").replace(/^[\-\|\s]+/,"")}function ai(t,e,n){let{applicationName:l="AtroCore"}=e,{logoPath:i=null}=e,{logFilePath:a}=e,{restoreLink:o=null}=e,s=!1,r=!1,u=0,c=!0,f="",m,v;Bl(()=>{v&&c&&v.scrollTo(0,v.scrollHeight)});function d(){n(4,s=!s),s||(c=!0)}function y(p){const _=p.currentTarget;c=_.scrollHeight-_.scrollTop===_.clientHeight}setInterval(async()=>{try{const p=await fetch(a,{cache:"no-store"});u+=1,p.ok?(n(3,f=(await p.text()).trim()),f.search("composer")>=0&&n(10,r=!0),u>65&&!r&&n(3,f="Something wrong. Please, reboot the server.")):r?setTimeout(()=>{location.reload()},2e3):u>65&&n(3,f="Something wrong. Please, reboot the server.")}catch(p){console.error("Error: ",p)}},1e3);function E(p){ke[p?"unshift":"push"](()=>{v=p,n(6,v)})}return t.$$set=p=>{"applicationName"in p&&n(0,l=p.applicationName),"logoPath"in p&&n(1,i=p.logoPath),"logFilePath"in p&&n(9,a=p.logFilePath),"restoreLink"in p&&n(2,o=p.restoreLink)},t.$$.update=()=>{if(t.$$.dirty&1032)if(f){const p=f.trim().split(`
`);n(5,m=ii(p.pop()))}else r?n(5,m=""):n(5,m="Starting...")},[l,i,o,f,s,m,v,d,y,a,r,E]}class oi extends Ee{constructor(e){super(),we(this,e,ai,li,_e,{applicationName:0,logoPath:1,logFilePath:9,restoreLink:2})}}function jn(t,e,n){const l=t.slice();return l[17]=e[n],l}function Gn(t){let e,n=t[17].label+"",l,i,a,o,s,r,u;function c(){return t[10](t[17])}return{c(){e=k("button"),l=fe(n),i=q(),h(e,"data-action",a=t[17].name),e.disabled=o=t[17].disabled,h(e,"type","button"),h(e,"class",s=`btn action btn-${t[17].style??"default"}`)},m(f,m){Q(f,e,m),b(e,l),b(e,i),r||(u=ee(e,"click",c),r=!0)},p(f,m){t=f,m&1&&n!==(n=t[17].label+"")&&Ae(l,n),m&1&&a!==(a=t[17].name)&&h(e,"data-action",a),m&1&&o!==(o=t[17].disabled)&&(e.disabled=o),m&1&&s!==(s=`btn action btn-${t[17].style??"default"}`)&&h(e,"class",s)},d(f){f&&U(e),r=!1,u()}}}function ri(t){let e,n,l,i=ce(t[0]),a=[];for(let r=0;r<i.length;r+=1)a[r]=Gn(jn(t,i,r));const o=t[9].default,s=Ol(o,t,t[8],null);return{c(){e=k("div");for(let r=0;r<a.length;r+=1)a[r].c();n=q(),s&&s.c(),h(e,"class","button-container")},m(r,u){Q(r,e,u);for(let c=0;c<a.length;c+=1)a[c]&&a[c].m(e,null);Q(r,n,u),s&&s.m(r,u),l=!0},p(r,[u]){if(u&3){i=ce(r[0]);let c;for(c=0;c<i.length;c+=1){const f=jn(r,i,c);a[c]?a[c].p(f,u):(a[c]=Gn(f),a[c].c(),a[c].m(e,null))}for(;c<a.length;c+=1)a[c].d(1);a.length=i.length}s&&s.p&&(!l||u&256)&&Fl(s,o,r,r[8],l?Il(o,r[8],u,null):Nl(r[8]),null)},i(r){l||(ye(s,r),l=!0)},o(r){Oe(s,r),l=!1},d(r){r&&(U(e),U(n)),Ke(a,r),s&&s.d(r)}}}function si(t,e,n){let{$$slots:l={},$$scope:i}=e,{params:a}=e,{fetch:o}=e,{loadLayout:s=()=>{Ne.get(scope,type,layoutProfileId,D=>{layout=D},!1)}}=e,{validate:r=()=>!0}=e;function u(D){c("openEditDialog",D)}const c=Pn();let f=[{name:"save",label:"Save",style:"primary"},{name:"cancel",label:"Cancel"},{name:"resetToDefault",label:"Reset to Default"}];Vt(()=>{s()});function m(){E();const D=o();if(!r(D)){p();return}me.notify("Saving..."),Ne.set(a.scope,a.type,a.layoutProfileId,D,()=>{me.notify("Saved","success",2e3),v(),p()})}function v(){console.log("emit update");const D=new CustomEvent("layoutUpdated",{detail:{scope:a.scope,type:a.type,layoutProfileId:a.layoutProfileId}});window.dispatchEvent(D)}function d(){s()}function y(){me.confirm("Are you sure you want to reset to default?",()=>{Ne.resetToDefault(a.scope,a.type,a.layoutProfileId,()=>{v(),d()})})}function E(){n(0,f=f.map(D=>({...D,disabled:!0})))}function p(){n(0,f=f.map(D=>({...D,disabled:!1})))}function _(D){switch(D.name){case"save":m();break;case"cancel":d();break;case"resetToDefault":y();break}}const w=D=>_(D);return t.$$set=D=>{"params"in D&&n(2,a=D.params),"fetch"in D&&n(3,o=D.fetch),"loadLayout"in D&&n(4,s=D.loadLayout),"validate"in D&&n(5,r=D.validate),"$$scope"in D&&n(8,i=D.$$scope)},[f,_,a,o,s,r,u,m,i,l,w]}class Wn extends Ee{constructor(e){super(),we(this,e,si,ri,_e,{params:2,fetch:3,loadLayout:4,validate:5,openEditDialog:6,save:7})}get openEditDialog(){return this.$$.ctx[6]}get save(){return this.$$.ctx[7]}}/**!
 * Sortable 1.15.2
 * @author	RubaXa   <trash@rubaxa.org>
 * @author	owenm    <owen23355@gmail.com>
 * @license MIT
 */function Un(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(t);e&&(l=l.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,l)}return n}function Te(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Un(Object(n),!0).forEach(function(l){ui(t,l,n[l])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Un(Object(n)).forEach(function(l){Object.defineProperty(t,l,Object.getOwnPropertyDescriptor(n,l))})}return t}function Ct(t){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Ct=function(e){return typeof e}:Ct=function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ct(t)}function ui(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Me(){return Me=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var l in n)Object.prototype.hasOwnProperty.call(n,l)&&(t[l]=n[l])}return t},Me.apply(this,arguments)}function fi(t,e){if(t==null)return{};var n={},l=Object.keys(t),i,a;for(a=0;a<l.length;a++)i=l[a],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}function ci(t,e){if(t==null)return{};var n=fi(t,e),l,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)l=a[i],!(e.indexOf(l)>=0)&&Object.prototype.propertyIsEnumerable.call(t,l)&&(n[l]=t[l])}return n}var di="1.15.2";function Re(t){if(typeof window<"u"&&window.navigator)return!!navigator.userAgent.match(t)}var He=Re(/(?:Trident.*rv[ :]?11\.|msie|iemobile|Windows Phone)/i),ct=Re(/Edge/i),Qn=Re(/firefox/i),dt=Re(/safari/i)&&!Re(/chrome/i)&&!Re(/android/i),Vn=Re(/iP(ad|od|hone)/i),Kn=Re(/chrome/i)&&Re(/android/i),Zn={capture:!1,passive:!1};function G(t,e,n){t.addEventListener(e,n,!He&&Zn)}function X(t,e,n){t.removeEventListener(e,n,!He&&Zn)}function At(t,e){if(e){if(e[0]===">"&&(e=e.substring(1)),t)try{if(t.matches)return t.matches(e);if(t.msMatchesSelector)return t.msMatchesSelector(e);if(t.webkitMatchesSelector)return t.webkitMatchesSelector(e)}catch{return!1}return!1}}function hi(t){return t.host&&t!==document&&t.host.nodeType?t.host:t.parentNode}function De(t,e,n,l){if(t){n=n||document;do{if(e!=null&&(e[0]===">"?t.parentNode===n&&At(t,e):At(t,e))||l&&t===n)return t;if(t===n)break}while(t=hi(t))}return null}var Jn=/\s+/g;function pe(t,e,n){if(t&&e)if(t.classList)t.classList[n?"add":"remove"](e);else{var l=(" "+t.className+" ").replace(Jn," ").replace(" "+e+" "," ");t.className=(l+(n?" "+e:"")).replace(Jn," ")}}function F(t,e,n){var l=t&&t.style;if(l){if(n===void 0)return document.defaultView&&document.defaultView.getComputedStyle?n=document.defaultView.getComputedStyle(t,""):t.currentStyle&&(n=t.currentStyle),e===void 0?n:n[e];!(e in l)&&e.indexOf("webkit")===-1&&(e="-webkit-"+e),l[e]=n+(typeof n=="string"?"":"px")}}function tt(t,e){var n="";if(typeof t=="string")n=t;else do{var l=F(t,"transform");l&&l!=="none"&&(n=l+" "+n)}while(!e&&(t=t.parentNode));var i=window.DOMMatrix||window.WebKitCSSMatrix||window.CSSMatrix||window.MSCSSMatrix;return i&&new i(n)}function xn(t,e,n){if(t){var l=t.getElementsByTagName(e),i=0,a=l.length;if(n)for(;i<a;i++)n(l[i],i);return l}return[]}function Pe(){var t=document.scrollingElement;return t||document.documentElement}function le(t,e,n,l,i){if(!(!t.getBoundingClientRect&&t!==window)){var a,o,s,r,u,c,f;if(t!==window&&t.parentNode&&t!==Pe()?(a=t.getBoundingClientRect(),o=a.top,s=a.left,r=a.bottom,u=a.right,c=a.height,f=a.width):(o=0,s=0,r=window.innerHeight,u=window.innerWidth,c=window.innerHeight,f=window.innerWidth),(e||n)&&t!==window&&(i=i||t.parentNode,!He))do if(i&&i.getBoundingClientRect&&(F(i,"transform")!=="none"||n&&F(i,"position")!=="static")){var m=i.getBoundingClientRect();o-=m.top+parseInt(F(i,"border-top-width")),s-=m.left+parseInt(F(i,"border-left-width")),r=o+a.height,u=s+a.width;break}while(i=i.parentNode);if(l&&t!==window){var v=tt(i||t),d=v&&v.a,y=v&&v.d;v&&(o/=y,s/=d,f/=d,c/=y,r=o+c,u=s+f)}return{top:o,left:s,bottom:r,right:u,width:f,height:c}}}function $n(t,e,n){for(var l=je(t,!0),i=le(t)[e];l;){var a=le(l)[n],o=void 0;if(o=i>=a,!o)return l;if(l===Pe())break;l=je(l,!1)}return!1}function nt(t,e,n,l){for(var i=0,a=0,o=t.children;a<o.length;){if(o[a].style.display!=="none"&&o[a]!==O.ghost&&(l||o[a]!==O.dragged)&&De(o[a],n.draggable,t,!1)){if(i===e)return o[a];i++}a++}return null}function en(t,e){for(var n=t.lastElementChild;n&&(n===O.ghost||F(n,"display")==="none"||e&&!At(n,e));)n=n.previousElementSibling;return n||null}function ve(t,e){var n=0;if(!t||!t.parentNode)return-1;for(;t=t.previousElementSibling;)t.nodeName.toUpperCase()!=="TEMPLATE"&&t!==O.clone&&(!e||At(t,e))&&n++;return n}function el(t){var e=0,n=0,l=Pe();if(t)do{var i=tt(t),a=i.a,o=i.d;e+=t.scrollLeft*a,n+=t.scrollTop*o}while(t!==l&&(t=t.parentNode));return[e,n]}function mi(t,e){for(var n in t)if(t.hasOwnProperty(n)){for(var l in e)if(e.hasOwnProperty(l)&&e[l]===t[n][l])return Number(n)}return-1}function je(t,e){if(!t||!t.getBoundingClientRect)return Pe();var n=t,l=!1;do if(n.clientWidth<n.scrollWidth||n.clientHeight<n.scrollHeight){var i=F(n);if(n.clientWidth<n.scrollWidth&&(i.overflowX=="auto"||i.overflowX=="scroll")||n.clientHeight<n.scrollHeight&&(i.overflowY=="auto"||i.overflowY=="scroll")){if(!n.getBoundingClientRect||n===document.body)return Pe();if(l||e)return n;l=!0}}while(n=n.parentNode);return Pe()}function pi(t,e){if(t&&e)for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t}function tn(t,e){return Math.round(t.top)===Math.round(e.top)&&Math.round(t.left)===Math.round(e.left)&&Math.round(t.height)===Math.round(e.height)&&Math.round(t.width)===Math.round(e.width)}var ht;function tl(t,e){return function(){if(!ht){var n=arguments,l=this;n.length===1?t.call(l,n[0]):t.apply(l,n),ht=setTimeout(function(){ht=void 0},e)}}}function gi(){clearTimeout(ht),ht=void 0}function nl(t,e,n){t.scrollLeft+=e,t.scrollTop+=n}function ll(t){var e=window.Polymer,n=window.jQuery||window.Zepto;return e&&e.dom?e.dom(t).cloneNode(!0):n?n(t).clone(!0)[0]:t.cloneNode(!0)}function il(t,e,n){var l={};return Array.from(t.children).forEach(function(i){var a,o,s,r;if(!(!De(i,e.draggable,t,!1)||i.animated||i===n)){var u=le(i);l.left=Math.min((a=l.left)!==null&&a!==void 0?a:1/0,u.left),l.top=Math.min((o=l.top)!==null&&o!==void 0?o:1/0,u.top),l.right=Math.max((s=l.right)!==null&&s!==void 0?s:-1/0,u.right),l.bottom=Math.max((r=l.bottom)!==null&&r!==void 0?r:-1/0,u.bottom)}}),l.width=l.right-l.left,l.height=l.bottom-l.top,l.x=l.left,l.y=l.top,l}var ge="Sortable"+new Date().getTime();function bi(){var t=[],e;return{captureAnimationState:function(){if(t=[],!!this.options.animation){var l=[].slice.call(this.el.children);l.forEach(function(i){if(!(F(i,"display")==="none"||i===O.ghost)){t.push({target:i,rect:le(i)});var a=Te({},t[t.length-1].rect);if(i.thisAnimationDuration){var o=tt(i,!0);o&&(a.top-=o.f,a.left-=o.e)}i.fromRect=a}})}},addAnimationState:function(l){t.push(l)},removeAnimationState:function(l){t.splice(mi(t,{target:l}),1)},animateAll:function(l){var i=this;if(!this.options.animation){clearTimeout(e),typeof l=="function"&&l();return}var a=!1,o=0;t.forEach(function(s){var r=0,u=s.target,c=u.fromRect,f=le(u),m=u.prevFromRect,v=u.prevToRect,d=s.rect,y=tt(u,!0);y&&(f.top-=y.f,f.left-=y.e),u.toRect=f,u.thisAnimationDuration&&tn(m,f)&&!tn(c,f)&&(d.top-f.top)/(d.left-f.left)===(c.top-f.top)/(c.left-f.left)&&(r=vi(d,m,v,i.options)),tn(f,c)||(u.prevFromRect=c,u.prevToRect=f,r||(r=i.options.animation),i.animate(u,d,f,r)),r&&(a=!0,o=Math.max(o,r),clearTimeout(u.animationResetTimer),u.animationResetTimer=setTimeout(function(){u.animationTime=0,u.prevFromRect=null,u.fromRect=null,u.prevToRect=null,u.thisAnimationDuration=null},r),u.thisAnimationDuration=r)}),clearTimeout(e),a?e=setTimeout(function(){typeof l=="function"&&l()},o):typeof l=="function"&&l(),t=[]},animate:function(l,i,a,o){if(o){F(l,"transition",""),F(l,"transform","");var s=tt(this.el),r=s&&s.a,u=s&&s.d,c=(i.left-a.left)/(r||1),f=(i.top-a.top)/(u||1);l.animatingX=!!c,l.animatingY=!!f,F(l,"transform","translate3d("+c+"px,"+f+"px,0)"),this.forRepaintDummy=_i(l),F(l,"transition","transform "+o+"ms"+(this.options.easing?" "+this.options.easing:"")),F(l,"transform","translate3d(0,0,0)"),typeof l.animated=="number"&&clearTimeout(l.animated),l.animated=setTimeout(function(){F(l,"transition",""),F(l,"transform",""),l.animated=!1,l.animatingX=!1,l.animatingY=!1},o)}}}}function _i(t){return t.offsetWidth}function vi(t,e,n,l){return Math.sqrt(Math.pow(e.top-t.top,2)+Math.pow(e.left-t.left,2))/Math.sqrt(Math.pow(e.top-n.top,2)+Math.pow(e.left-n.left,2))*l.animation}var lt=[],nn={initializeByDefault:!0},mt={mount:function(e){for(var n in nn)nn.hasOwnProperty(n)&&!(n in e)&&(e[n]=nn[n]);lt.forEach(function(l){if(l.pluginName===e.pluginName)throw"Sortable: Cannot mount plugin ".concat(e.pluginName," more than once")}),lt.push(e)},pluginEvent:function(e,n,l){var i=this;this.eventCanceled=!1,l.cancel=function(){i.eventCanceled=!0};var a=e+"Global";lt.forEach(function(o){n[o.pluginName]&&(n[o.pluginName][a]&&n[o.pluginName][a](Te({sortable:n},l)),n.options[o.pluginName]&&n[o.pluginName][e]&&n[o.pluginName][e](Te({sortable:n},l)))})},initializePlugins:function(e,n,l,i){lt.forEach(function(s){var r=s.pluginName;if(!(!e.options[r]&&!s.initializeByDefault)){var u=new s(e,n,e.options);u.sortable=e,u.options=e.options,e[r]=u,Me(l,u.defaults)}});for(var a in e.options)if(e.options.hasOwnProperty(a)){var o=this.modifyOption(e,a,e.options[a]);typeof o<"u"&&(e.options[a]=o)}},getEventProperties:function(e,n){var l={};return lt.forEach(function(i){typeof i.eventProperties=="function"&&Me(l,i.eventProperties.call(n[i.pluginName],e))}),l},modifyOption:function(e,n,l){var i;return lt.forEach(function(a){e[a.pluginName]&&a.optionListeners&&typeof a.optionListeners[n]=="function"&&(i=a.optionListeners[n].call(e[a.pluginName],l))}),i}};function yi(t){var e=t.sortable,n=t.rootEl,l=t.name,i=t.targetEl,a=t.cloneEl,o=t.toEl,s=t.fromEl,r=t.oldIndex,u=t.newIndex,c=t.oldDraggableIndex,f=t.newDraggableIndex,m=t.originalEvent,v=t.putSortable,d=t.extraEventProperties;if(e=e||n&&n[ge],!!e){var y,E=e.options,p="on"+l.charAt(0).toUpperCase()+l.substr(1);window.CustomEvent&&!He&&!ct?y=new CustomEvent(l,{bubbles:!0,cancelable:!0}):(y=document.createEvent("Event"),y.initEvent(l,!0,!0)),y.to=o||n,y.from=s||n,y.item=i||n,y.clone=a,y.oldIndex=r,y.newIndex=u,y.oldDraggableIndex=c,y.newDraggableIndex=f,y.originalEvent=m,y.pullMode=v?v.lastPutMode:void 0;var _=Te(Te({},d),mt.getEventProperties(l,e));for(var w in _)y[w]=_[w];n&&n.dispatchEvent(y),E[p]&&E[p].call(e,y)}}var wi=["evt"],de=function(e,n){var l=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},i=l.evt,a=ci(l,wi);mt.pluginEvent.bind(O)(e,n,Te({dragEl:S,parentEl:te,ghostEl:M,rootEl:J,nextEl:Ue,lastDownEl:Ot,cloneEl:$,cloneHidden:Ge,dragStarted:gt,putSortable:oe,activeSortable:O.active,originalEvent:i,oldIndex:it,oldDraggableIndex:pt,newIndex:be,newDraggableIndex:We,hideGhostForTarget:cl,unhideGhostForTarget:dl,cloneNowHidden:function(){Ge=!0},cloneNowShown:function(){Ge=!1},dispatchSortableEvent:function(s){se({sortable:n,name:s,originalEvent:i})}},a))};function se(t){yi(Te({putSortable:oe,cloneEl:$,targetEl:S,rootEl:J,oldIndex:it,oldDraggableIndex:pt,newIndex:be,newDraggableIndex:We},t))}var S,te,M,J,Ue,Ot,$,Ge,it,be,pt,We,It,oe,at=!1,Ft=!1,Nt=[],Qe,Se,ln,an,al,ol,gt,ot,bt,_t=!1,Mt=!1,Rt,re,on=[],rn=!1,Ht=[],Bt=typeof document<"u",Yt=Vn,rl=ct||He?"cssFloat":"float",Ei=Bt&&!Kn&&!Vn&&"draggable"in document.createElement("div"),sl=function(){if(Bt){if(He)return!1;var t=document.createElement("x");return t.style.cssText="pointer-events:auto",t.style.pointerEvents==="auto"}}(),ul=function(e,n){var l=F(e),i=parseInt(l.width)-parseInt(l.paddingLeft)-parseInt(l.paddingRight)-parseInt(l.borderLeftWidth)-parseInt(l.borderRightWidth),a=nt(e,0,n),o=nt(e,1,n),s=a&&F(a),r=o&&F(o),u=s&&parseInt(s.marginLeft)+parseInt(s.marginRight)+le(a).width,c=r&&parseInt(r.marginLeft)+parseInt(r.marginRight)+le(o).width;if(l.display==="flex")return l.flexDirection==="column"||l.flexDirection==="column-reverse"?"vertical":"horizontal";if(l.display==="grid")return l.gridTemplateColumns.split(" ").length<=1?"vertical":"horizontal";if(a&&s.float&&s.float!=="none"){var f=s.float==="left"?"left":"right";return o&&(r.clear==="both"||r.clear===f)?"vertical":"horizontal"}return a&&(s.display==="block"||s.display==="flex"||s.display==="table"||s.display==="grid"||u>=i&&l[rl]==="none"||o&&l[rl]==="none"&&u+c>i)?"vertical":"horizontal"},Di=function(e,n,l){var i=l?e.left:e.top,a=l?e.right:e.bottom,o=l?e.width:e.height,s=l?n.left:n.top,r=l?n.right:n.bottom,u=l?n.width:n.height;return i===s||a===r||i+o/2===s+u/2},Si=function(e,n){var l;return Nt.some(function(i){var a=i[ge].options.emptyInsertThreshold;if(!(!a||en(i))){var o=le(i),s=e>=o.left-a&&e<=o.right+a,r=n>=o.top-a&&n<=o.bottom+a;if(s&&r)return l=i}}),l},fl=function(e){function n(a,o){return function(s,r,u,c){var f=s.options.group.name&&r.options.group.name&&s.options.group.name===r.options.group.name;if(a==null&&(o||f))return!0;if(a==null||a===!1)return!1;if(o&&a==="clone")return a;if(typeof a=="function")return n(a(s,r,u,c),o)(s,r,u,c);var m=(o?s:r).options.group.name;return a===!0||typeof a=="string"&&a===m||a.join&&a.indexOf(m)>-1}}var l={},i=e.group;(!i||Ct(i)!="object")&&(i={name:i}),l.name=i.name,l.checkPull=n(i.pull,!0),l.checkPut=n(i.put),l.revertClone=i.revertClone,e.group=l},cl=function(){!sl&&M&&F(M,"display","none")},dl=function(){!sl&&M&&F(M,"display","")};Bt&&!Kn&&document.addEventListener("click",function(t){if(Ft)return t.preventDefault(),t.stopPropagation&&t.stopPropagation(),t.stopImmediatePropagation&&t.stopImmediatePropagation(),Ft=!1,!1},!0);var Ve=function(e){if(S){e=e.touches?e.touches[0]:e;var n=Si(e.clientX,e.clientY);if(n){var l={};for(var i in e)e.hasOwnProperty(i)&&(l[i]=e[i]);l.target=l.rootEl=n,l.preventDefault=void 0,l.stopPropagation=void 0,n[ge]._onDragOver(l)}}},ki=function(e){S&&S.parentNode[ge]._isOutsideThisEl(e.target)};function O(t,e){if(!(t&&t.nodeType&&t.nodeType===1))throw"Sortable: `el` must be an HTMLElement, not ".concat({}.toString.call(t));this.el=t,this.options=e=Me({},e),t[ge]=this;var n={group:null,sort:!0,disabled:!1,store:null,handle:null,draggable:/^[uo]l$/i.test(t.nodeName)?">li":">*",swapThreshold:1,invertSwap:!1,invertedSwapThreshold:null,removeCloneOnHide:!0,direction:function(){return ul(t,this.options)},ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",dragClass:"sortable-drag",ignore:"a, img",filter:null,preventOnFilter:!0,animation:0,easing:null,setData:function(o,s){o.setData("Text",s.textContent)},dropBubble:!1,dragoverBubble:!1,dataIdAttr:"data-id",delay:0,delayOnTouchOnly:!1,touchStartThreshold:(Number.parseInt?Number:window).parseInt(window.devicePixelRatio,10)||1,forceFallback:!1,fallbackClass:"sortable-fallback",fallbackOnBody:!1,fallbackTolerance:0,fallbackOffset:{x:0,y:0},supportPointer:O.supportPointer!==!1&&"PointerEvent"in window&&!dt,emptyInsertThreshold:5};mt.initializePlugins(this,t,n);for(var l in n)!(l in e)&&(e[l]=n[l]);fl(e);for(var i in this)i.charAt(0)==="_"&&typeof this[i]=="function"&&(this[i]=this[i].bind(this));this.nativeDraggable=e.forceFallback?!1:Ei,this.nativeDraggable&&(this.options.touchStartThreshold=1),e.supportPointer?G(t,"pointerdown",this._onTapStart):(G(t,"mousedown",this._onTapStart),G(t,"touchstart",this._onTapStart)),this.nativeDraggable&&(G(t,"dragover",this),G(t,"dragenter",this)),Nt.push(this.el),e.store&&e.store.get&&this.sort(e.store.get(this)||[]),Me(this,bi())}O.prototype={constructor:O,_isOutsideThisEl:function(e){!this.el.contains(e)&&e!==this.el&&(ot=null)},_getDirection:function(e,n){return typeof this.options.direction=="function"?this.options.direction.call(this,e,n,S):this.options.direction},_onTapStart:function(e){if(e.cancelable){var n=this,l=this.el,i=this.options,a=i.preventOnFilter,o=e.type,s=e.touches&&e.touches[0]||e.pointerType&&e.pointerType==="touch"&&e,r=(s||e).target,u=e.target.shadowRoot&&(e.path&&e.path[0]||e.composedPath&&e.composedPath()[0])||r,c=i.filter;if(Fi(l),!S&&!(/mousedown|pointerdown/.test(o)&&e.button!==0||i.disabled)&&!u.isContentEditable&&!(!this.nativeDraggable&&dt&&r&&r.tagName.toUpperCase()==="SELECT")&&(r=De(r,i.draggable,l,!1),!(r&&r.animated)&&Ot!==r)){if(it=ve(r),pt=ve(r,i.draggable),typeof c=="function"){if(c.call(this,e,r,this)){se({sortable:n,rootEl:u,name:"filter",targetEl:r,toEl:l,fromEl:l}),de("filter",n,{evt:e}),a&&e.cancelable&&e.preventDefault();return}}else if(c&&(c=c.split(",").some(function(f){if(f=De(u,f.trim(),l,!1),f)return se({sortable:n,rootEl:f,name:"filter",targetEl:r,fromEl:l,toEl:l}),de("filter",n,{evt:e}),!0}),c)){a&&e.cancelable&&e.preventDefault();return}i.handle&&!De(u,i.handle,l,!1)||this._prepareDragStart(e,s,r)}}},_prepareDragStart:function(e,n,l){var i=this,a=i.el,o=i.options,s=a.ownerDocument,r;if(l&&!S&&l.parentNode===a){var u=le(l);if(J=a,S=l,te=S.parentNode,Ue=S.nextSibling,Ot=l,It=o.group,O.dragged=S,Qe={target:S,clientX:(n||e).clientX,clientY:(n||e).clientY},al=Qe.clientX-u.left,ol=Qe.clientY-u.top,this._lastX=(n||e).clientX,this._lastY=(n||e).clientY,S.style["will-change"]="all",r=function(){if(de("delayEnded",i,{evt:e}),O.eventCanceled){i._onDrop();return}i._disableDelayedDragEvents(),!Qn&&i.nativeDraggable&&(S.draggable=!0),i._triggerDragStart(e,n),se({sortable:i,name:"choose",originalEvent:e}),pe(S,o.chosenClass,!0)},o.ignore.split(",").forEach(function(c){xn(S,c.trim(),sn)}),G(s,"dragover",Ve),G(s,"mousemove",Ve),G(s,"touchmove",Ve),G(s,"mouseup",i._onDrop),G(s,"touchend",i._onDrop),G(s,"touchcancel",i._onDrop),Qn&&this.nativeDraggable&&(this.options.touchStartThreshold=4,S.draggable=!0),de("delayStart",this,{evt:e}),o.delay&&(!o.delayOnTouchOnly||n)&&(!this.nativeDraggable||!(ct||He))){if(O.eventCanceled){this._onDrop();return}G(s,"mouseup",i._disableDelayedDrag),G(s,"touchend",i._disableDelayedDrag),G(s,"touchcancel",i._disableDelayedDrag),G(s,"mousemove",i._delayedDragTouchMoveHandler),G(s,"touchmove",i._delayedDragTouchMoveHandler),o.supportPointer&&G(s,"pointermove",i._delayedDragTouchMoveHandler),i._dragStartTimer=setTimeout(r,o.delay)}else r()}},_delayedDragTouchMoveHandler:function(e){var n=e.touches?e.touches[0]:e;Math.max(Math.abs(n.clientX-this._lastX),Math.abs(n.clientY-this._lastY))>=Math.floor(this.options.touchStartThreshold/(this.nativeDraggable&&window.devicePixelRatio||1))&&this._disableDelayedDrag()},_disableDelayedDrag:function(){S&&sn(S),clearTimeout(this._dragStartTimer),this._disableDelayedDragEvents()},_disableDelayedDragEvents:function(){var e=this.el.ownerDocument;X(e,"mouseup",this._disableDelayedDrag),X(e,"touchend",this._disableDelayedDrag),X(e,"touchcancel",this._disableDelayedDrag),X(e,"mousemove",this._delayedDragTouchMoveHandler),X(e,"touchmove",this._delayedDragTouchMoveHandler),X(e,"pointermove",this._delayedDragTouchMoveHandler)},_triggerDragStart:function(e,n){n=n||e.pointerType=="touch"&&e,!this.nativeDraggable||n?this.options.supportPointer?G(document,"pointermove",this._onTouchMove):n?G(document,"touchmove",this._onTouchMove):G(document,"mousemove",this._onTouchMove):(G(S,"dragend",this),G(J,"dragstart",this._onDragStart));try{document.selection?zt(function(){document.selection.empty()}):window.getSelection().removeAllRanges()}catch{}},_dragStarted:function(e,n){if(at=!1,J&&S){de("dragStarted",this,{evt:n}),this.nativeDraggable&&G(document,"dragover",ki);var l=this.options;!e&&pe(S,l.dragClass,!1),pe(S,l.ghostClass,!0),O.active=this,e&&this._appendGhost(),se({sortable:this,name:"start",originalEvent:n})}else this._nulling()},_emulateDragOver:function(){if(Se){this._lastX=Se.clientX,this._lastY=Se.clientY,cl();for(var e=document.elementFromPoint(Se.clientX,Se.clientY),n=e;e&&e.shadowRoot&&(e=e.shadowRoot.elementFromPoint(Se.clientX,Se.clientY),e!==n);)n=e;if(S.parentNode[ge]._isOutsideThisEl(e),n)do{if(n[ge]){var l=void 0;if(l=n[ge]._onDragOver({clientX:Se.clientX,clientY:Se.clientY,target:e,rootEl:n}),l&&!this.options.dragoverBubble)break}e=n}while(n=n.parentNode);dl()}},_onTouchMove:function(e){if(Qe){var n=this.options,l=n.fallbackTolerance,i=n.fallbackOffset,a=e.touches?e.touches[0]:e,o=M&&tt(M,!0),s=M&&o&&o.a,r=M&&o&&o.d,u=Yt&&re&&el(re),c=(a.clientX-Qe.clientX+i.x)/(s||1)+(u?u[0]-on[0]:0)/(s||1),f=(a.clientY-Qe.clientY+i.y)/(r||1)+(u?u[1]-on[1]:0)/(r||1);if(!O.active&&!at){if(l&&Math.max(Math.abs(a.clientX-this._lastX),Math.abs(a.clientY-this._lastY))<l)return;this._onDragStart(e,!0)}if(M){o?(o.e+=c-(ln||0),o.f+=f-(an||0)):o={a:1,b:0,c:0,d:1,e:c,f};var m="matrix(".concat(o.a,",").concat(o.b,",").concat(o.c,",").concat(o.d,",").concat(o.e,",").concat(o.f,")");F(M,"webkitTransform",m),F(M,"mozTransform",m),F(M,"msTransform",m),F(M,"transform",m),ln=c,an=f,Se=a}e.cancelable&&e.preventDefault()}},_appendGhost:function(){if(!M){var e=this.options.fallbackOnBody?document.body:J,n=le(S,!0,Yt,!0,e),l=this.options;if(Yt){for(re=e;F(re,"position")==="static"&&F(re,"transform")==="none"&&re!==document;)re=re.parentNode;re!==document.body&&re!==document.documentElement?(re===document&&(re=Pe()),n.top+=re.scrollTop,n.left+=re.scrollLeft):re=Pe(),on=el(re)}M=S.cloneNode(!0),pe(M,l.ghostClass,!1),pe(M,l.fallbackClass,!0),pe(M,l.dragClass,!0),F(M,"transition",""),F(M,"transform",""),F(M,"box-sizing","border-box"),F(M,"margin",0),F(M,"top",n.top),F(M,"left",n.left),F(M,"width",n.width),F(M,"height",n.height),F(M,"opacity","0.8"),F(M,"position",Yt?"absolute":"fixed"),F(M,"zIndex","100000"),F(M,"pointerEvents","none"),O.ghost=M,e.appendChild(M),F(M,"transform-origin",al/parseInt(M.style.width)*100+"% "+ol/parseInt(M.style.height)*100+"%")}},_onDragStart:function(e,n){var l=this,i=e.dataTransfer,a=l.options;if(de("dragStart",this,{evt:e}),O.eventCanceled){this._onDrop();return}de("setupClone",this),O.eventCanceled||($=ll(S),$.removeAttribute("id"),$.draggable=!1,$.style["will-change"]="",this._hideClone(),pe($,this.options.chosenClass,!1),O.clone=$),l.cloneId=zt(function(){de("clone",l),!O.eventCanceled&&(l.options.removeCloneOnHide||J.insertBefore($,S),l._hideClone(),se({sortable:l,name:"clone"}))}),!n&&pe(S,a.dragClass,!0),n?(Ft=!0,l._loopId=setInterval(l._emulateDragOver,50)):(X(document,"mouseup",l._onDrop),X(document,"touchend",l._onDrop),X(document,"touchcancel",l._onDrop),i&&(i.effectAllowed="move",a.setData&&a.setData.call(l,i,S)),G(document,"drop",l),F(S,"transform","translateZ(0)")),at=!0,l._dragStartId=zt(l._dragStarted.bind(l,n,e)),G(document,"selectstart",l),gt=!0,dt&&F(document.body,"user-select","none")},_onDragOver:function(e){var n=this.el,l=e.target,i,a,o,s=this.options,r=s.group,u=O.active,c=It===r,f=s.sort,m=oe||u,v,d=this,y=!1;if(rn)return;function E(C,I){de(C,d,Te({evt:e,isOwner:c,axis:v?"vertical":"horizontal",revert:o,dragRect:i,targetRect:a,canSort:f,fromSortable:m,target:l,completed:_,onMove:function(H,j){return qt(J,n,S,i,H,le(H),e,j)},changed:w},I))}function p(){E("dragOverAnimationCapture"),d.captureAnimationState(),d!==m&&m.captureAnimationState()}function _(C){return E("dragOverCompleted",{insertion:C}),C&&(c?u._hideClone():u._showClone(d),d!==m&&(pe(S,oe?oe.options.ghostClass:u.options.ghostClass,!1),pe(S,s.ghostClass,!0)),oe!==d&&d!==O.active?oe=d:d===O.active&&oe&&(oe=null),m===d&&(d._ignoreWhileAnimating=l),d.animateAll(function(){E("dragOverAnimationComplete"),d._ignoreWhileAnimating=null}),d!==m&&(m.animateAll(),m._ignoreWhileAnimating=null)),(l===S&&!S.animated||l===n&&!l.animated)&&(ot=null),!s.dragoverBubble&&!e.rootEl&&l!==document&&(S.parentNode[ge]._isOutsideThisEl(e.target),!C&&Ve(e)),!s.dragoverBubble&&e.stopPropagation&&e.stopPropagation(),y=!0}function w(){be=ve(S),We=ve(S,s.draggable),se({sortable:d,name:"change",toEl:n,newIndex:be,newDraggableIndex:We,originalEvent:e})}if(e.preventDefault!==void 0&&e.cancelable&&e.preventDefault(),l=De(l,s.draggable,n,!0),E("dragOver"),O.eventCanceled)return y;if(S.contains(e.target)||l.animated&&l.animatingX&&l.animatingY||d._ignoreWhileAnimating===l)return _(!1);if(Ft=!1,u&&!s.disabled&&(c?f||(o=te!==J):oe===this||(this.lastPutMode=It.checkPull(this,u,S,e))&&r.checkPut(this,u,S,e))){if(v=this._getDirection(e,l)==="vertical",i=le(S),E("dragOverValid"),O.eventCanceled)return y;if(o)return te=J,p(),this._hideClone(),E("revert"),O.eventCanceled||(Ue?J.insertBefore(S,Ue):J.appendChild(S)),_(!0);var D=en(n,s.draggable);if(!D||Ci(e,v,this)&&!D.animated){if(D===S)return _(!1);if(D&&n===e.target&&(l=D),l&&(a=le(l)),qt(J,n,S,i,l,a,e,!!l)!==!1)return p(),D&&D.nextSibling?n.insertBefore(S,D.nextSibling):n.appendChild(S),te=n,w(),_(!0)}else if(D&&Li(e,v,this)){var T=nt(n,0,s,!0);if(T===S)return _(!1);if(l=T,a=le(l),qt(J,n,S,i,l,a,e,!1)!==!1)return p(),n.insertBefore(S,T),te=n,w(),_(!0)}else if(l.parentNode===n){a=le(l);var A=0,g,L=S.parentNode!==n,P=!Di(S.animated&&S.toRect||i,l.animated&&l.toRect||a,v),V=v?"top":"left",K=$n(l,"top","top")||$n(S,"top","top"),x=K?K.scrollTop:void 0;ot!==l&&(g=a[V],_t=!1,Mt=!P&&s.invertSwap||L),A=Ai(e,l,a,v,P?1:s.swapThreshold,s.invertedSwapThreshold==null?s.swapThreshold:s.invertedSwapThreshold,Mt,ot===l);var R;if(A!==0){var z=ve(S);do z-=A,R=te.children[z];while(R&&(F(R,"display")==="none"||R===M))}if(A===0||R===l)return _(!1);ot=l,bt=A;var N=l.nextElementSibling,ne=!1;ne=A===1;var rt=qt(J,n,S,i,l,a,e,ne);if(rt!==!1)return(rt===1||rt===-1)&&(ne=rt===1),rn=!0,setTimeout(Pi,30),p(),ne&&!N?n.appendChild(S):l.parentNode.insertBefore(S,ne?N:l),K&&nl(K,0,x-K.scrollTop),te=S.parentNode,g!==void 0&&!Mt&&(Rt=Math.abs(g-le(l)[V])),w(),_(!0)}if(n.contains(S))return _(!1)}return!1},_ignoreWhileAnimating:null,_offMoveEvents:function(){X(document,"mousemove",this._onTouchMove),X(document,"touchmove",this._onTouchMove),X(document,"pointermove",this._onTouchMove),X(document,"dragover",Ve),X(document,"mousemove",Ve),X(document,"touchmove",Ve)},_offUpEvents:function(){var e=this.el.ownerDocument;X(e,"mouseup",this._onDrop),X(e,"touchend",this._onDrop),X(e,"pointerup",this._onDrop),X(e,"touchcancel",this._onDrop),X(document,"selectstart",this)},_onDrop:function(e){var n=this.el,l=this.options;if(be=ve(S),We=ve(S,l.draggable),de("drop",this,{evt:e}),te=S&&S.parentNode,be=ve(S),We=ve(S,l.draggable),O.eventCanceled){this._nulling();return}at=!1,Mt=!1,_t=!1,clearInterval(this._loopId),clearTimeout(this._dragStartTimer),un(this.cloneId),un(this._dragStartId),this.nativeDraggable&&(X(document,"drop",this),X(n,"dragstart",this._onDragStart)),this._offMoveEvents(),this._offUpEvents(),dt&&F(document.body,"user-select",""),F(S,"transform",""),e&&(gt&&(e.cancelable&&e.preventDefault(),!l.dropBubble&&e.stopPropagation()),M&&M.parentNode&&M.parentNode.removeChild(M),(J===te||oe&&oe.lastPutMode!=="clone")&&$&&$.parentNode&&$.parentNode.removeChild($),S&&(this.nativeDraggable&&X(S,"dragend",this),sn(S),S.style["will-change"]="",gt&&!at&&pe(S,oe?oe.options.ghostClass:this.options.ghostClass,!1),pe(S,this.options.chosenClass,!1),se({sortable:this,name:"unchoose",toEl:te,newIndex:null,newDraggableIndex:null,originalEvent:e}),J!==te?(be>=0&&(se({rootEl:te,name:"add",toEl:te,fromEl:J,originalEvent:e}),se({sortable:this,name:"remove",toEl:te,originalEvent:e}),se({rootEl:te,name:"sort",toEl:te,fromEl:J,originalEvent:e}),se({sortable:this,name:"sort",toEl:te,originalEvent:e})),oe&&oe.save()):be!==it&&be>=0&&(se({sortable:this,name:"update",toEl:te,originalEvent:e}),se({sortable:this,name:"sort",toEl:te,originalEvent:e})),O.active&&((be==null||be===-1)&&(be=it,We=pt),se({sortable:this,name:"end",toEl:te,originalEvent:e}),this.save()))),this._nulling()},_nulling:function(){de("nulling",this),J=S=te=M=Ue=$=Ot=Ge=Qe=Se=gt=be=We=it=pt=ot=bt=oe=It=O.dragged=O.ghost=O.clone=O.active=null,Ht.forEach(function(e){e.checked=!0}),Ht.length=ln=an=0},handleEvent:function(e){switch(e.type){case"drop":case"dragend":this._onDrop(e);break;case"dragenter":case"dragover":S&&(this._onDragOver(e),Ti(e));break;case"selectstart":e.preventDefault();break}},toArray:function(){for(var e=[],n,l=this.el.children,i=0,a=l.length,o=this.options;i<a;i++)n=l[i],De(n,o.draggable,this.el,!1)&&e.push(n.getAttribute(o.dataIdAttr)||Ii(n));return e},sort:function(e,n){var l={},i=this.el;this.toArray().forEach(function(a,o){var s=i.children[o];De(s,this.options.draggable,i,!1)&&(l[a]=s)},this),n&&this.captureAnimationState(),e.forEach(function(a){l[a]&&(i.removeChild(l[a]),i.appendChild(l[a]))}),n&&this.animateAll()},save:function(){var e=this.options.store;e&&e.set&&e.set(this)},closest:function(e,n){return De(e,n||this.options.draggable,this.el,!1)},option:function(e,n){var l=this.options;if(n===void 0)return l[e];var i=mt.modifyOption(this,e,n);typeof i<"u"?l[e]=i:l[e]=n,e==="group"&&fl(l)},destroy:function(){de("destroy",this);var e=this.el;e[ge]=null,X(e,"mousedown",this._onTapStart),X(e,"touchstart",this._onTapStart),X(e,"pointerdown",this._onTapStart),this.nativeDraggable&&(X(e,"dragover",this),X(e,"dragenter",this)),Array.prototype.forEach.call(e.querySelectorAll("[draggable]"),function(n){n.removeAttribute("draggable")}),this._onDrop(),this._disableDelayedDragEvents(),Nt.splice(Nt.indexOf(this.el),1),this.el=e=null},_hideClone:function(){if(!Ge){if(de("hideClone",this),O.eventCanceled)return;F($,"display","none"),this.options.removeCloneOnHide&&$.parentNode&&$.parentNode.removeChild($),Ge=!0}},_showClone:function(e){if(e.lastPutMode!=="clone"){this._hideClone();return}if(Ge){if(de("showClone",this),O.eventCanceled)return;S.parentNode==J&&!this.options.group.revertClone?J.insertBefore($,S):Ue?J.insertBefore($,Ue):J.appendChild($),this.options.group.revertClone&&this.animate(S,$),F($,"display",""),Ge=!1}}};function Ti(t){t.dataTransfer&&(t.dataTransfer.dropEffect="move"),t.cancelable&&t.preventDefault()}function qt(t,e,n,l,i,a,o,s){var r,u=t[ge],c=u.options.onMove,f;return window.CustomEvent&&!He&&!ct?r=new CustomEvent("move",{bubbles:!0,cancelable:!0}):(r=document.createEvent("Event"),r.initEvent("move",!0,!0)),r.to=e,r.from=t,r.dragged=n,r.draggedRect=l,r.related=i||e,r.relatedRect=a||le(e),r.willInsertAfter=s,r.originalEvent=o,t.dispatchEvent(r),c&&(f=c.call(u,r,o)),f}function sn(t){t.draggable=!1}function Pi(){rn=!1}function Li(t,e,n){var l=le(nt(n.el,0,n.options,!0)),i=il(n.el,n.options,M),a=10;return e?t.clientX<i.left-a||t.clientY<l.top&&t.clientX<l.right:t.clientY<i.top-a||t.clientY<l.bottom&&t.clientX<l.left}function Ci(t,e,n){var l=le(en(n.el,n.options.draggable)),i=il(n.el,n.options,M),a=10;return e?t.clientX>i.right+a||t.clientY>l.bottom&&t.clientX>l.left:t.clientY>i.bottom+a||t.clientX>l.right&&t.clientY>l.top}function Ai(t,e,n,l,i,a,o,s){var r=l?t.clientY:t.clientX,u=l?n.height:n.width,c=l?n.top:n.left,f=l?n.bottom:n.right,m=!1;if(!o){if(s&&Rt<u*i){if(!_t&&(bt===1?r>c+u*a/2:r<f-u*a/2)&&(_t=!0),_t)m=!0;else if(bt===1?r<c+Rt:r>f-Rt)return-bt}else if(r>c+u*(1-i)/2&&r<f-u*(1-i)/2)return Oi(e)}return m=m||o,m&&(r<c+u*a/2||r>f-u*a/2)?r>c+u/2?1:-1:0}function Oi(t){return ve(S)<ve(t)?1:-1}function Ii(t){for(var e=t.tagName+t.className+t.src+t.href+t.textContent,n=e.length,l=0;n--;)l+=e.charCodeAt(n);return l.toString(36)}function Fi(t){Ht.length=0;for(var e=t.getElementsByTagName("input"),n=e.length;n--;){var l=e[n];l.checked&&Ht.push(l)}}function zt(t){return setTimeout(t,0)}function un(t){return clearTimeout(t)}Bt&&G(document,"touchmove",function(t){(O.active||at)&&t.cancelable&&t.preventDefault()}),O.utils={on:G,off:X,css:F,find:xn,is:function(e,n){return!!De(e,n,e,!1)},extend:pi,throttle:tl,closest:De,toggleClass:pe,clone:ll,index:ve,nextTick:zt,cancelNextTick:un,detectDirection:ul,getChild:nt},O.get=function(t){return t[ge]},O.mount=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];e[0].constructor===Array&&(e=e[0]),e.forEach(function(l){if(!l.prototype||!l.prototype.constructor)throw"Sortable: Mounted plugin must be a constructor function, not ".concat({}.toString.call(l));l.utils&&(O.utils=Te(Te({},O.utils),l.utils)),mt.mount(l)})},O.create=function(t,e){return new O(t,e)},O.version=di;var ie=[],vt,fn,cn=!1,dn,hn,Xt,yt;function Ni(){function t(){this.defaults={scroll:!0,forceAutoScrollFallback:!1,scrollSensitivity:30,scrollSpeed:10,bubbleScroll:!0};for(var e in this)e.charAt(0)==="_"&&typeof this[e]=="function"&&(this[e]=this[e].bind(this))}return t.prototype={dragStarted:function(n){var l=n.originalEvent;this.sortable.nativeDraggable?G(document,"dragover",this._handleAutoScroll):this.options.supportPointer?G(document,"pointermove",this._handleFallbackAutoScroll):l.touches?G(document,"touchmove",this._handleFallbackAutoScroll):G(document,"mousemove",this._handleFallbackAutoScroll)},dragOverCompleted:function(n){var l=n.originalEvent;!this.options.dragOverBubble&&!l.rootEl&&this._handleAutoScroll(l)},drop:function(){this.sortable.nativeDraggable?X(document,"dragover",this._handleAutoScroll):(X(document,"pointermove",this._handleFallbackAutoScroll),X(document,"touchmove",this._handleFallbackAutoScroll),X(document,"mousemove",this._handleFallbackAutoScroll)),hl(),jt(),gi()},nulling:function(){Xt=fn=vt=cn=yt=dn=hn=null,ie.length=0},_handleFallbackAutoScroll:function(n){this._handleAutoScroll(n,!0)},_handleAutoScroll:function(n,l){var i=this,a=(n.touches?n.touches[0]:n).clientX,o=(n.touches?n.touches[0]:n).clientY,s=document.elementFromPoint(a,o);if(Xt=n,l||this.options.forceAutoScrollFallback||ct||He||dt){mn(n,this.options,s,l);var r=je(s,!0);cn&&(!yt||a!==dn||o!==hn)&&(yt&&hl(),yt=setInterval(function(){var u=je(document.elementFromPoint(a,o),!0);u!==r&&(r=u,jt()),mn(n,i.options,u,l)},10),dn=a,hn=o)}else{if(!this.options.bubbleScroll||je(s,!0)===Pe()){jt();return}mn(n,this.options,je(s,!1),!1)}}},Me(t,{pluginName:"scroll",initializeByDefault:!0})}function jt(){ie.forEach(function(t){clearInterval(t.pid)}),ie=[]}function hl(){clearInterval(yt)}var mn=tl(function(t,e,n,l){if(e.scroll){var i=(t.touches?t.touches[0]:t).clientX,a=(t.touches?t.touches[0]:t).clientY,o=e.scrollSensitivity,s=e.scrollSpeed,r=Pe(),u=!1,c;fn!==n&&(fn=n,jt(),vt=e.scroll,c=e.scrollFn,vt===!0&&(vt=je(n,!0)));var f=0,m=vt;do{var v=m,d=le(v),y=d.top,E=d.bottom,p=d.left,_=d.right,w=d.width,D=d.height,T=void 0,A=void 0,g=v.scrollWidth,L=v.scrollHeight,P=F(v),V=v.scrollLeft,K=v.scrollTop;v===r?(T=w<g&&(P.overflowX==="auto"||P.overflowX==="scroll"||P.overflowX==="visible"),A=D<L&&(P.overflowY==="auto"||P.overflowY==="scroll"||P.overflowY==="visible")):(T=w<g&&(P.overflowX==="auto"||P.overflowX==="scroll"),A=D<L&&(P.overflowY==="auto"||P.overflowY==="scroll"));var x=T&&(Math.abs(_-i)<=o&&V+w<g)-(Math.abs(p-i)<=o&&!!V),R=A&&(Math.abs(E-a)<=o&&K+D<L)-(Math.abs(y-a)<=o&&!!K);if(!ie[f])for(var z=0;z<=f;z++)ie[z]||(ie[z]={});(ie[f].vx!=x||ie[f].vy!=R||ie[f].el!==v)&&(ie[f].el=v,ie[f].vx=x,ie[f].vy=R,clearInterval(ie[f].pid),(x!=0||R!=0)&&(u=!0,ie[f].pid=setInterval((function(){l&&this.layer===0&&O.active._onTouchMove(Xt);var N=ie[this.layer].vy?ie[this.layer].vy*s:0,ne=ie[this.layer].vx?ie[this.layer].vx*s:0;typeof c=="function"&&c.call(O.dragged.parentNode[ge],ne,N,t,Xt,ie[this.layer].el)!=="continue"||nl(ie[this.layer].el,ne,N)}).bind({layer:f}),24))),f++}while(e.bubbleScroll&&m!==r&&(m=je(m,!1)));cn=u}},30),ml=function(e){var n=e.originalEvent,l=e.putSortable,i=e.dragEl,a=e.activeSortable,o=e.dispatchSortableEvent,s=e.hideGhostForTarget,r=e.unhideGhostForTarget;if(n){var u=l||a;s();var c=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:n,f=document.elementFromPoint(c.clientX,c.clientY);r(),u&&!u.el.contains(f)&&(o("spill"),this.onSpill({dragEl:i,putSortable:l}))}};function pn(){}pn.prototype={startIndex:null,dragStart:function(e){var n=e.oldDraggableIndex;this.startIndex=n},onSpill:function(e){var n=e.dragEl,l=e.putSortable;this.sortable.captureAnimationState(),l&&l.captureAnimationState();var i=nt(this.sortable.el,this.startIndex,this.options);i?this.sortable.el.insertBefore(n,i):this.sortable.el.appendChild(n),this.sortable.animateAll(),l&&l.animateAll()},drop:ml},Me(pn,{pluginName:"revertOnSpill"});function gn(){}gn.prototype={onSpill:function(e){var n=e.dragEl,l=e.putSortable,i=l||this.sortable;i.captureAnimationState(),n.parentNode&&n.parentNode.removeChild(n),i.animateAll()},drop:ml},Me(gn,{pluginName:"removeOnSpill"}),O.mount(new Ni),O.mount(gn,pn);function pl(t,e,n){const l=t.slice();return l[18]=e[n],l}function gl(t,e,n){const l=t.slice();return l[21]=e[n],l}function bl(t){let e,n,l,i;return{c(){e=k("div"),n=k("a"),n.innerHTML='<i class="fas fa-pencil-alt fa-sm"></i>',h(n,"href","javascript:"),h(n,"data-action","editField"),h(n,"class","edit-field svelte-1mx8y43"),h(e,"class","right svelte-1mx8y43")},m(a,o){Q(a,e,o),b(e,n),l||(i=ee(n,"click",t[6]),l=!0)},p:Z,d(a){a&&U(e),l=!1,i()}}}function _l(t){let e,n,l,i=t[21].label+"",a,o,s,r=t[0].editable&&bl(t),u=[t[9](t[21])],c={};for(let f=0;f<u.length;f+=1)c=Be(c,u[f]);return{c(){e=k("li"),n=k("div"),l=k("label"),a=fe(i),o=q(),r&&r.c(),s=q(),h(l,"class","svelte-1mx8y43"),h(n,"class","left svelte-1mx8y43"),Dt(e,c),St(e,"svelte-1mx8y43",!0)},m(f,m){Q(f,e,m),b(e,n),b(n,l),b(l,a),b(e,o),r&&r.m(e,null),b(e,s)},p(f,m){m&4&&i!==(i=f[21].label+"")&&Ae(a,i),f[0].editable?r?r.p(f,m):(r=bl(f),r.c(),r.m(e,s)):r&&(r.d(1),r=null),Dt(e,c=Fn(u,[m&4&&f[9](f[21])])),St(e,"svelte-1mx8y43",!0)},d(f){f&&U(e),r&&r.d()}}}function vl(t){let e,n,l,i;return{c(){e=k("div"),n=k("a"),n.innerHTML='<i class="fas fa-pencil-alt fa-sm"></i>',h(n,"href","javascript:"),h(n,"data-action","editField"),h(n,"class","edit-field svelte-1mx8y43"),h(e,"class","right svelte-1mx8y43")},m(a,o){Q(a,e,o),b(e,n),l||(i=ee(n,"click",t[6]),l=!0)},p:Z,d(a){a&&U(e),l=!1,i()}}}function yl(t){let e,n,l,i=t[18].label+"",a,o,s,r=t[0].editable&&vl(t),u=[t[9](t[18])],c={};for(let f=0;f<u.length;f+=1)c=Be(c,u[f]);return{c(){e=k("li"),n=k("div"),l=k("label"),a=fe(i),o=q(),r&&r.c(),s=q(),h(l,"class","svelte-1mx8y43"),h(n,"class","left svelte-1mx8y43"),Dt(e,c),St(e,"svelte-1mx8y43",!0)},m(f,m){Q(f,e,m),b(e,n),b(n,l),b(l,a),b(e,o),r&&r.m(e,null),b(e,s)},p(f,m){m&2&&i!==(i=f[18].label+"")&&Ae(a,i),f[0].editable?r?r.p(f,m):(r=vl(f),r.c(),r.m(e,s)):r&&(r.d(1),r=null),Dt(e,c=Fn(u,[m&2&&f[9](f[18])])),St(e,"svelte-1mx8y43",!0)},d(f){f&&U(e),r&&r.d()}}}function Mi(t){let e,n,l,i,a,o,s,r,u,c,f,m,v=ce(t[2]),d=[];for(let p=0;p<v.length;p+=1)d[p]=_l(gl(t,v,p));let y=ce(t[1]),E=[];for(let p=0;p<y.length;p+=1)E[p]=yl(pl(t,y,p));return{c(){e=k("div"),n=k("div"),l=k("div"),i=k("header"),i.textContent=`${B.translate("Enabled","labels","Admin")}`,a=q(),o=k("ul");for(let p=0;p<d.length;p+=1)d[p].c();s=q(),r=k("div"),u=k("div"),c=k("header"),c.textContent=`${B.translate("Disabled","labels","Admin")}`,f=q(),m=k("ul");for(let p=0;p<E.length;p+=1)E[p].c();h(o,"class","enabled connected svelte-1mx8y43"),h(l,"class","well"),h(n,"class","col-sm-5"),h(m,"class","disabled connected svelte-1mx8y43"),h(u,"class","well"),h(r,"class","col-sm-5"),h(e,"id","layout"),h(e,"class","row")},m(p,_){Q(p,e,_),b(e,n),b(n,l),b(l,i),b(l,a),b(l,o);for(let w=0;w<d.length;w+=1)d[w]&&d[w].m(o,null);b(e,s),b(e,r),b(r,u),b(u,c),b(u,f),b(u,m);for(let w=0;w<E.length;w+=1)E[w]&&E[w].m(m,null);t[13](e)},p(p,_){if(_&581){v=ce(p[2]);let w;for(w=0;w<v.length;w+=1){const D=gl(p,v,w);d[w]?d[w].p(D,_):(d[w]=_l(D),d[w].c(),d[w].m(o,null))}for(;w<d.length;w+=1)d[w].d(1);d.length=v.length}if(_&579){y=ce(p[1]);let w;for(w=0;w<y.length;w+=1){const D=pl(p,y,w);E[w]?E[w].p(D,_):(E[w]=yl(D),E[w].c(),E[w].m(m,null))}for(;w<E.length;w+=1)E[w].d(1);E.length=y.length}},d(p){p&&U(e),Ke(d,p),Ke(E,p),t[13](null)}}}function Ri(t){let e,n,l={params:t[0],validate:t[8],fetch:t[7],loadLayout:t[3],$$slots:{default:[Mi]},$$scope:{ctx:t}};return e=new Wn({props:l}),t[14](e),{c(){ze(e.$$.fragment)},m(i,a){Ie(e,i,a),n=!0},p(i,[a]){const o={};a&1&&(o.params=i[0]),a&8&&(o.loadLayout=i[3]),a&16777239&&(o.$$scope={dirty:a,ctx:i}),e.$set(o)},i(i){n||(ye(e.$$.fragment,i),n=!0)},o(i){Oe(e.$$.fragment,i),n=!1},d(i){t[14](null),Fe(e,i)}}}function Hi(t){return t.toLowerCase()}function wl(t,e){return t[e]}function Bi(t,e,n){let l,i,a,{params:o}=e,{dataAttributeList:s=[]}=e,{dataAttributeDefs:r}=e,{enabledFields:u=[]}=e,{disabledFields:c=[]}=e,{rowLayout:f=[]}=e,{loadLayout:m}=e,v;Vt(()=>{d()}),Tn(()=>{i&&i.destroy(),a&&a.destroy()});function d(){const T={group:"fields",draggable:"li",animation:150};i=O.create(l.querySelector("ul.enabled"),{...T}),a=O.create(l.querySelector("ul.disabled"),{...T})}function y(T){const g=T.target.closest("li");if(!g)return;const L={};s.forEach(P=>{L[P]=g.dataset[P]||null}),v.openEditDialog(L)}function E(){const T=[];for(let A of l.querySelector("ul.enabled").children){const g={};s.forEach(L=>{const P=A.dataset[L];P&&(g[L]=P)}),T.push(g)}return T}function p(T){return T.length===0?(me.notify("Layout cannot be empty","error"),!1):!0}function _(T){const A={};return s.forEach(g=>{wl(T,g)!=null&&(A[`data-${Hi(g)}`]=wl(T,g))}),A}function w(T){ke[T?"unshift":"push"](()=>{l=T,n(4,l)})}function D(T){ke[T?"unshift":"push"](()=>{v=T,n(5,v)})}return t.$$set=T=>{"params"in T&&n(0,o=T.params),"dataAttributeList"in T&&n(10,s=T.dataAttributeList),"dataAttributeDefs"in T&&n(11,r=T.dataAttributeDefs),"enabledFields"in T&&n(12,u=T.enabledFields),"disabledFields"in T&&n(1,c=T.disabledFields),"rowLayout"in T&&n(2,f=T.rowLayout),"loadLayout"in T&&n(3,m=T.loadLayout)},[o,c,f,m,l,v,y,E,p,_,s,r,u,w,D]}class bn extends Ee{constructor(e){super(),we(this,e,Bi,Ri,_e,{params:0,dataAttributeList:10,dataAttributeDefs:11,enabledFields:12,disabledFields:1,rowLayout:2,loadLayout:3})}}function Yi(t){let e,n,l={params:t[0],enabledFields:t[2],disabledFields:t[3],rowLayout:t[4],editable:qi,dataAttributeList:t[5],loadLayout:t[6]};return e=new bn({props:l}),t[9](e),{c(){ze(e.$$.fragment)},m(i,a){Ie(e,i,a),n=!0},p(i,[a]){const o={};a&1&&(o.params=i[0]),a&4&&(o.enabledFields=i[2]),a&8&&(o.disabledFields=i[3]),a&16&&(o.rowLayout=i[4]),e.$set(o)},i(i){n||(ye(e.$$.fragment,i),n=!0)},o(i){Oe(e.$$.fragment,i),n=!1},d(i){t[9](null),Fe(e,i)}}}let qi=!0;function zi(t){return!0}function Xi(t,e,n){let{params:l}=e;const i=["id","name","width","widthPx","link","notSortable","align","view","customLabel"];let{layoutDisabledParameter:a="layoutListDisabled"}=e,{afterRender:o}=e,s,r=[],u=[],c=[];const f=[],m=[];function v(){Lt.create(scope,p=>{me.notify("Loading..."),Ne.get(l.scope,l.type,l.layoutProfileId,_=>{d(p,_),me.notify(!1),o&&o()},!1)})}function d(p,_){const w=Object.keys(p.defs.fields).filter(g=>zi(p.getFieldParam(g,"type"))&&y(p,g)).sort((g,L)=>B.translate(g,"fields",scope).localeCompare(B.translate(L,"fields",scope))),D=[],T=[],A=[];n(2,r=_.map(g=>{const L=B.translate(g.name,"fields",scope);return T.includes(L)&&A.push(L),T.push(L),D.push(g.name),{name:g.name,label:L}})),n(3,u=w.filter(g=>!D.includes(g)).map(g=>{const L=B.translate(g,"fields",scope);T.includes(L)&&A.push(L),T.push(L);const P={name:g,label:L},V=Xe.get(["entityDefs",scope,"fields",g,"type"]);return V&&Xe.get(["fields",V,"notSortable"])&&(P.notSortable=!0),P})),[r,u].forEach(g=>{g.forEach(L=>{A.includes(L.label)&&(L.label+=` (${L.name})`)})}),n(4,c=_.map(g=>{var L;return{...g,label:((L=r.find(P=>P.name===g.name))==null?void 0:L.label)||B.translate(g.name,"fields",scope)}}))}function y(p,_){return f.includes(_)||m.includes(p.getFieldParam(_,"type"))?!1:!p.getFieldParam(_,"disabled")&&!p.getFieldParam(_,a)}function E(p){ke[p?"unshift":"push"](()=>{s=p,n(1,s)})}return t.$$set=p=>{"params"in p&&n(0,l=p.params),"layoutDisabledParameter"in p&&n(7,a=p.layoutDisabledParameter),"afterRender"in p&&n(8,o=p.afterRender)},[l,s,r,u,c,i,v,a,o,E]}class _n extends Ee{constructor(e){super(),we(this,e,Xi,Yi,_e,{params:0,layoutDisabledParameter:7,afterRender:8})}}function ji(t){let e,n,l={params:t[0],enabledFields:t[6],disabledFields:t[2],rowLayout:t[3],dataAttributeList:t[4],dataAttributesDefs:t[5],loadLayout:t[7]};return e=new bn({props:l}),t[9](e),{c(){ze(e.$$.fragment)},m(i,a){Ie(e,i,a),n=!0},p(i,[a]){const o={};a&1&&(o.params=i[0]),a&4&&(o.disabledFields=i[2]),a&8&&(o.rowLayout=i[3]),e.$set(o)},i(i){n||(ye(e.$$.fragment,i),n=!0)},o(i){Oe(e.$$.fragment,i),n=!1},d(i){t[9](null),Fe(e,i)}}}function Gi(t,e,n){let{params:l}=e,{viewType:i="detail"}=e;const a=["id","name","style","sticked"],o={style:{type:"enum",options:["default","success","danger","primary","info","warning"],translation:"LayoutManager.options.style"},sticked:{type:"bool"},name:{readOnly:!0}};let s,r=[],u=[],c=[];function f(){me.notify("Loading..."),Ne.get(l.scope,l.type,l.layoutProfileId,d=>{m(d),me.notify(!1),l.afterRender&&l.afterRender()},!1)}function m(d){let y=[],E={},p={};Xe.get(["clientDefs",p.scope,"defaultSidePanel",i])!==!1&&!Xe.get(["clientDefs",p.scope,"defaultSidePanelDisabled"])&&(y.push("default"),E.default="Default"),(Xe.get(["clientDefs",p.scope,"sidePanels",i])||[]).forEach(_=>{_.name&&(y.push(_.name),_.label&&(E[_.name]=_.label),p[_.name]=_)}),n(2,u=[]),d=d||{},n(3,c=[]),y.forEach((_,w)=>{let D=!1,T=d[_]||{};T.disabled&&(D=!0);let A;if(E[_]?A=B.translate(E[_],"labels",p.scope):A=B.translate(_,"panels",p.scope),D)u.push({name:_,label:A});else{let g={name:_,label:A};g.name in p&&a.forEach(L=>{if(L==="name")return;let P=p[g.name]||{};L in P&&(g[L]=P[L])});for(let L in T)g[L]=T[L];g.index="index"in T?T.index:w,c.push(g)}}),c.sort((_,w)=>_.index-w.index)}function v(d){ke[d?"unshift":"push"](()=>{s=d,n(1,s)})}return t.$$set=d=>{"params"in d&&n(0,l=d.params),"viewType"in d&&n(8,i=d.viewType)},[l,s,u,c,a,o,r,f,i,v]}class Gt extends Ee{constructor(e){super(),we(this,e,Gi,ji,_e,{params:0,viewType:8})}}function Wi(t){let e,n,l={params:t[0],enabledFields:t[2],disabledFields:t[3],rowLayout:t[4],dataAttributeList:t[5],dataAttributesDefs:t[6],loadLayout:t[7]};return e=new bn({props:l}),t[9](e),{c(){ze(e.$$.fragment)},m(i,a){Ie(e,i,a),n=!0},p(i,[a]){const o={};a&1&&(o.params=i[0]),a&4&&(o.enabledFields=i[2]),a&8&&(o.disabledFields=i[3]),a&16&&(o.rowLayout=i[4]),e.$set(o)},i(i){n||(ye(e.$$.fragment,i),n=!0)},o(i){Oe(e.$$.fragment,i),n=!1},d(i){t[9](null),Fe(e,i)}}}function Ui(t,e){return!t.getLinkParam(e,"disabled")&&!t.getLinkParam(e,"layoutRelationshipsDisabled")}function Qi(t,e,n){let{params:l}=e;const i=["id","name","style","hiddenPerDefault"],a={style:{type:"enum",options:["default","success","danger","primary","info","warning"],translation:"LayoutManager.options.style"},hiddenPerDefault:{type:"bool"},name:{readOnly:!0}};let{afterRender:o}=e,s,r=[],u=[],c=[],f=[];function m(){me.notify("Loading..."),Lt.create(scope,function(y){Ne.get(scope,type,layoutProfileId,E=>{v(y,E),me.notify(!1),o&&o()},!1)})}function v(y,E){let p=[];for(let _ in y.defs.links)["hasMany","hasChildren"].includes(y.defs.links[_].type)&&Ui(y,_)&&p.push(_);p.sort((_,w)=>B.translate(_,"links","scope").localeCompare(B.translate(w,"links","scope"))),u=[],n(2,r=[]),n(3,c=[]);for(let _ in E){let w=E[_],D;typeof w=="string"?D={name:w,label:B.translate(w,"links","scope")}:(D=w,D.label=B.translate(D.name,"links","scope")),i.forEach(T=>{if(T==="name"||T in D)return;let A=Xe.get(["clientDefs","scope","relationshipPanels",D.name,T]);A!==null&&(D[T]=A)}),r.push(D),u.push(D.name)}for(let _ of p)u.includes(_)||c.push({name:_,label:B.translate(_,"links","scope")});n(4,f=r);for(let _ of f)_.label=B.translate(_.name,"links","scope")}function d(y){ke[y?"unshift":"push"](()=>{s=y,n(1,s)})}return t.$$set=y=>{"params"in y&&n(0,l=y.params),"afterRender"in y&&n(8,o=y.afterRender)},[l,s,r,c,f,i,a,m,o,d]}class Vi extends Ee{constructor(e){super(),we(this,e,Qi,Wi,_e,{params:0,afterRender:8})}}function El(t,e,n){const l=t.slice();return l[36]=e[n],l}function Dl(t,e,n){const l=t.slice();return l[39]=e[n],l}function Sl(t,e,n){const l=t.slice();return l[42]=e[n],l[44]=n,l}function kl(t,e,n){const l=t.slice();return l[45]=e[n],l[47]=n,l}function Ki(t){let e,n,l,i,a;function o(){return t[18](t[39],t[44],t[47])}function s(...r){return t[19](t[39],t[44],t[47],...r)}return{c(){e=k("li"),n=k("a"),n.innerHTML='<i class="fas fa-minus"></i>',l=q(),h(n,"href","#"),h(n,"data-action","minusCell"),h(n,"class","remove-field svelte-fp3tbt"),h(e,"class","empty cell svelte-fp3tbt")},m(r,u){Q(r,e,u),b(e,n),b(e,l),i||(a=[ee(n,"click",Ye(o)),ee(e,"dragover",Ye(ta)),ee(e,"drop",s)],i=!0)},p(r,u){t=r},d(r){r&&U(e),i=!1,Ce(a)}}}function Zi(t){let e,n=t[45].label+"",l,i,a,o,s,r,u,c,f,m,v;function d(){return t[17](t[39],t[44],t[47])}return{c(){e=k("li"),l=fe(n),i=q(),a=k("a"),a.innerHTML='<i class="fas fa-times"></i>',o=q(),h(a,"href","#"),h(a,"data-action","removeField"),h(a,"class","remove-field svelte-fp3tbt"),h(e,"class","cell svelte-fp3tbt"),h(e,"draggable","true"),h(e,"data-id",s=t[45].id),h(e,"data-name",r=t[45].name),h(e,"data-full-width",u=t[45].fullWidth?"true":void 0),h(e,"data-custom-label",c=t[45].customLabel?t[45].customLabel:void 0),h(e,"data-no-label",f=t[45].noLabel)},m(y,E){Q(y,e,E),b(e,l),b(e,i),b(e,a),b(e,o),m||(v=[ee(a,"click",Ye(d)),ee(e,"dragstart",Qt(ea))],m=!0)},p(y,E){t=y,E[0]&2&&n!==(n=t[45].label+"")&&Ae(l,n),E[0]&2&&s!==(s=t[45].id)&&h(e,"data-id",s),E[0]&2&&r!==(r=t[45].name)&&h(e,"data-name",r),E[0]&2&&u!==(u=t[45].fullWidth?"true":void 0)&&h(e,"data-full-width",u),E[0]&2&&c!==(c=t[45].customLabel?t[45].customLabel:void 0)&&h(e,"data-custom-label",c),E[0]&2&&f!==(f=t[45].noLabel)&&h(e,"data-no-label",f)},d(y){y&&U(e),m=!1,Ce(v)}}}function Tl(t){let e;function n(a,o){return a[45]?Zi:Ki}let l=n(t),i=l(t);return{c(){i.c(),e=kn()},m(a,o){i.m(a,o),Q(a,e,o)},p(a,o){l===(l=n(a))&&i?i.p(a,o):(i.d(1),i=l(a),i&&(i.c(),i.m(e.parentNode,e)))},d(a){a&&U(e),i.d(a)}}}function Pl(t){let e,n,l,i,a,o,s,r;function u(){return t[16](t[39],t[44])}let c=ce(t[42]),f=[];for(let m=0;m<c.length;m+=1)f[m]=Tl(kl(t,c,m));return{c(){e=k("li"),n=k("div"),l=k("a"),l.innerHTML='<i class="fas fa-times"></i>',i=q(),a=k("ul");for(let m=0;m<f.length;m+=1)f[m].c();o=q(),h(l,"href","#"),h(l,"data-action","removeRow"),h(l,"class","remove-row pull-right svelte-fp3tbt"),h(n,"class","svelte-fp3tbt"),h(a,"class","cells svelte-fp3tbt"),h(e,"class","row svelte-fp3tbt")},m(m,v){Q(m,e,v),b(e,n),b(n,l),b(e,i),b(e,a);for(let d=0;d<f.length;d+=1)f[d]&&f[d].m(a,null);b(e,o),s||(r=[ee(l,"click",Ye(u)),ee(a,"mousedown",Qt(na))],s=!0)},p(m,v){if(t=m,v[0]&1794){c=ce(t[42]);let d;for(d=0;d<c.length;d+=1){const y=kl(t,c,d);f[d]?f[d].p(y,v):(f[d]=Tl(y),f[d].c(),f[d].m(a,null))}for(;d<f.length;d+=1)f[d].d(1);f.length=c.length}},d(m){m&&U(e),Ke(f,m),s=!1,Ce(r)}}}function Ll(t,e){let n,l,i,a=(e[39].customLabel||e[39].label)+"",o,s,r,u,c,f,m,v,d,y,E,p,_,w,D,T,A,g;function L(){return e[14](e[39])}function P(){return e[15](e[39])}let V=ce(e[39].rows),K=[];for(let R=0;R<V.length;R+=1)K[R]=Pl(Sl(e,V,R));function x(){return e[20](e[39])}return{key:t,first:null,c(){n=k("li"),l=k("header"),i=k("label"),o=fe(a),r=fe(`Â \r
                                `),u=k("a"),u.innerHTML='<i class="fas fa-pencil-alt fa-sm"></i>',c=q(),f=k("a"),m=k("i"),y=q(),E=k("ul");for(let R=0;R<K.length;R+=1)K[R].c();p=q(),_=k("div"),w=k("a"),w.innerHTML='<i class="fas fa-plus"></i>',D=q(),h(i,"data-is-custom",s=e[39].isCustomLabel?"true":void 0),h(i,"class","svelte-fp3tbt"),h(u,"href","#"),h(u,"data-action","edit-panel-label"),h(u,"class","edit-panel-label svelte-fp3tbt"),h(m,"class","fas fa-times"),h(f,"href","#"),qe(f,"float","right"),h(f,"data-action","removePanel"),h(f,"class","remove-panel svelte-fp3tbt"),h(f,"data-number",v=e[39].number),h(l,"data-name",d=e[39].name),h(l,"class","svelte-fp3tbt"),h(E,"class","rows svelte-fp3tbt"),h(w,"href","#"),h(w,"data-action","addRow"),h(w,"class","svelte-fp3tbt"),h(_,"class","svelte-fp3tbt"),h(n,"data-number",T=e[39].number),h(n,"class","panel-layout svelte-fp3tbt"),this.first=n},m(R,z){Q(R,n,z),b(n,l),b(l,i),b(i,o),b(l,r),b(l,u),b(l,c),b(l,f),b(f,m),b(n,y),b(n,E);for(let N=0;N<K.length;N+=1)K[N]&&K[N].m(E,null);b(n,p),b(n,_),b(_,w),b(n,D),A||(g=[ee(u,"click",Ye(L)),ee(f,"click",Ye(P)),ee(E,"mousedown",Qt(la)),ee(w,"click",Ye(x))],A=!0)},p(R,z){if(e=R,z[0]&2&&a!==(a=(e[39].customLabel||e[39].label)+"")&&Ae(o,a),z[0]&2&&s!==(s=e[39].isCustomLabel?"true":void 0)&&h(i,"data-is-custom",s),z[0]&2&&v!==(v=e[39].number)&&h(f,"data-number",v),z[0]&2&&d!==(d=e[39].name)&&h(l,"data-name",d),z[0]&1922){V=ce(e[39].rows);let N;for(N=0;N<V.length;N+=1){const ne=Sl(e,V,N);K[N]?K[N].p(ne,z):(K[N]=Pl(ne),K[N].c(),K[N].m(E,null))}for(;N<K.length;N+=1)K[N].d(1);K.length=V.length}z[0]&2&&T!==(T=e[39].number)&&h(n,"data-number",T)},d(R){R&&U(n),Ke(K,R),A=!1,Ce(g)}}}function Cl(t){let e,n=t[36].label+"",l,i,a,o,s;function r(...u){return t[21](t[36],...u)}return{c(){e=k("li"),l=fe(n),i=q(),h(e,"class","cell svelte-fp3tbt"),h(e,"data-name",a=t[36].name)},m(u,c){Q(u,e,c),b(e,l),b(e,i),o||(s=ee(e,"dragstart",r),o=!0)},p(u,c){t=u,c[0]&4&&n!==(n=t[36].label+"")&&Ae(l,n),c[0]&4&&a!==(a=t[36].name)&&h(e,"data-name",a)},d(u){u&&U(e),o=!1,s()}}}function Ji(t){let e,n,l,i,a,o,s,r,u=[],c=new Map,f,m,v,d,y,E,p,_,w=ce(t[1]);const D=g=>g[39].number;for(let g=0;g<w.length;g+=1){let L=Dl(t,w,g),P=D(L);c.set(P,u[g]=Ll(P,L))}let T=ce(t[2]),A=[];for(let g=0;g<T.length;g+=1)A[g]=Cl(El(t,T,g));return{c(){e=k("div"),n=k("div"),l=k("div"),i=k("header"),i.textContent=`${B.translate("Layout","LayoutManager")}`,a=q(),o=k("a"),o.textContent=`${B.translate("Add Panel","Admin")}`,s=q(),r=k("ul");for(let g=0;g<u.length;g+=1)u[g].c();f=q(),m=k("div"),v=k("div"),d=k("header"),d.textContent=`${B.translate("Available Fields","Admin")}`,y=q(),E=k("ul");for(let g=0;g<A.length;g+=1)A[g].c();h(i,"class","svelte-fp3tbt"),h(o,"href","#"),h(o,"class","svelte-fp3tbt"),h(r,"class","panels svelte-fp3tbt"),h(l,"class","well svelte-fp3tbt"),h(n,"class","col-md-8 svelte-fp3tbt"),h(d,"class","svelte-fp3tbt"),h(E,"class","disabled cells clearfix svelte-fp3tbt"),h(v,"class","well svelte-fp3tbt"),h(m,"class","col-md-4 svelte-fp3tbt"),h(e,"id","layout"),h(e,"class","row svelte-fp3tbt")},m(g,L){Q(g,e,L),b(e,n),b(n,l),b(l,i),b(l,a),b(l,o),b(l,s),b(l,r);for(let P=0;P<u.length;P+=1)u[P]&&u[P].m(r,null);b(e,f),b(e,m),b(m,v),b(v,d),b(v,y),b(v,E);for(let P=0;P<A.length;P+=1)A[P]&&A[P].m(E,null);p||(_=ee(o,"click",Ye(t[4])),p=!0)},p(g,L){if(L[0]&2018&&(w=ce(g[1]),u=jl(u,L,D,1,g,w,c,r,Xl,Ll,null,Dl)),L[0]&4){T=ce(g[2]);let P;for(P=0;P<T.length;P+=1){const V=El(g,T,P);A[P]?A[P].p(V,L):(A[P]=Cl(V),A[P].c(),A[P].m(E,null))}for(;P<A.length;P+=1)A[P].d(1);A.length=T.length}},d(g){g&&U(e);for(let L=0;L<u.length;L+=1)u[L].d();Ke(A,g),p=!1,_()}}}function xi(t){let e,n;return e=new Wn({props:{params:t[0],validate:t[11],fetch,loadLayout:t[3],$$slots:{default:[Ji]},$$scope:{ctx:t}}}),{c(){ze(e.$$.fragment)},m(l,i){Ie(e,l,i),n=!0},p(l,i){const a={};i[0]&1&&(a.params=l[0]),i[0]&6|i[1]&131072&&(a.$$scope={dirty:i,ctx:l}),e.$set(a)},i(l){n||(ye(e.$$.fragment,l),n=!0)},o(l){Oe(e.$$.fragment,l),n=!1},d(l){Fe(e,l)}}}function $i(t,e){return e.some(n=>n.name===t)}function ca(t){}const ea=()=>{},ta=t=>t.dataTransfer.dropEffect="move",na=()=>{},la=()=>{};function ia(t,e,n){let{params:l}=e,{columnCount:i=2}=e,{layoutDisabledParameter:a="layoutDetailDisabled"}=e,o=["modifiedAt","createdAt","modifiedBy","createdBy","assignedUser","ownerUser","teams"],s=[],r=[],u=-1,c;Pn();function f(C){let I,Y;const H=[];H.push(new Promise(j=>{Lt.create(l.scope,ae=>{Ne.get(l.scope,l.type,l.layoutProfileId,W=>{I=W,Y=ae,j()},!1)})})),["detail","detailSmall"].includes(l.type)&&H.push(new Promise(j=>{Ne.get(l.scope,"sidePanels"+Espo.utils.upperCaseFirst(l.type),l.layoutProfileId,ae=>{c=ae,j()},!1)})),Promise.all(H).then(()=>{m(Y,I),y(),On().then(()=>{p()}),C&&C()})}function m(C,I){let Y=[];const H=[];for(const W in C.defs.fields)v(C,W)&&(H.push(B.translate(W,"fields",l.scope)),Y.push(W));const j=H.filter((W,he)=>H.indexOf(W)!==he);let ae=[];n(2,r=[]),n(1,s=I),I.forEach((W,he)=>{W.rows.forEach((Le,wt)=>{Le&&Le.forEach((st,Wt)=>{if(Wt==i||!st)return;let Ut=B.translate(st.name,"fields",l.scope);j.includes(Ut)&&(Ut+=` (${st.name})`),ae.push({name:st.name,label:Ut}),n(1,s[he].rows[wt][Wt].label=Ut,s)})})}),Y.sort((W,he)=>B.translate(W,"fields",l.scope).localeCompare(B.translate(he,"fields",l.scope)));for(const W in Y)if(!$i(Y[W],ae)){const he=Y[W];let Le=B.translate(he,"fields",l.scope);j.includes(Le)&&(Le+=` (${he})`),r.push({name:he,label:Le})}}function v(C,I){return d()&&o.includes(I)?!1:!C.getFieldParam(I,"disabled")&&!C.getFieldParam(I,a)}function d(){if(Xe.get(["clientDefs",l.scope,"defaultSidePanelDisabled"]))return!1;if(c){for(const C in c)if(C==="default"&&c[C].disabled)return!1}return!0}function y(){u=-1,n(1,s=s.map((C,I)=>(C.number=I,u=I,C)))}function E(C){O.create(C,{animation:150,group:"rows",draggable:"li.row",onEnd(I){const Y=parseInt(I.to.closest(".panel-layout").getAttribute("data-number")),H=Array.from(I.to.children);n(1,s=s.map(j=>(j.number===Y&&(j.rows=H.map(ae=>{const W=Array.from(ae.parentNode.children).indexOf(ae);return console.log("oldIndex",W),j.rows[W]})),j))),console.log(s)}})}function p(){O.create(document.querySelector("ul.panels"),{animation:150,group:"panels",draggable:"li.panel-layout",onEnd(C){const I=Array.from(C.to.children);n(1,s=I.map(Y=>{const H=parseInt(Y.getAttribute("data-number"));return s.find(j=>j.number===H)})),console.log(s)}}),document.querySelectorAll("ul.rows").forEach(C=>{E(C)}),document.querySelectorAll("ul.cells.disabled").forEach(C=>{O.create(C,{animation:150,group:"cells",draggable:"li.cell"})})}function _(){u++;const C={customLabel:"New panel",rows:[[!1,!1]],number:u,name:`panel${u}`,isCustomLabel:!0};n(1,s=[...s,C]),On().then(()=>{const I=document.querySelector(`.panel-layout[data-number="${C.number}"] > .rows`);E(I)})}function w(C){const I=s.find(H=>H.number===C);n(1,s=s.filter(H=>H!==I));let Y=[];I.rows.forEach(H=>{H.forEach(j=>{j&&Y.push(j)})}),n(2,r=[...r,...Y])}function D(C){n(1,s=s.map(I=>(I.number===C&&(I.rows=[...I.rows,Array(i).fill(!1)]),I)))}function T(C,I){n(1,s=s.map(Y=>{if(Y.number===C){const H=Y.rows.find((j,ae)=>ae===I);Y.rows=Y.rows.filter(j=>j!=H),console.log(H),n(2,r=[...r,...H.filter(j=>!!j)])}return Y}))}function A(C,I,Y){n(1,s=s.map(H=>(H.number===C&&(H.rows=H.rows.map((j,ae)=>{if(ae===I){const W=j[Y];W&&n(2,r=[...r,W]),j[Y]=!1}return j})),H)))}function g(C,I,Y,H){const j=C.dataTransfer.getData("name"),ae=r.find(W=>W.name===j);ae&&(n(2,r=r.filter(W=>W!==ae)),n(1,s=s.map((W,he)=>(I===W.number&&(W.rows=W.rows.map((Le,wt)=>wt===Y?Le.map((st,Wt)=>Wt===H?ae:st):Le)),W))),console.log(s))}function L(C,I,Y){i<2||(n(1,s=s.map((H,j)=>(j===C&&(H.rows=H.rows.map((ae,W)=>{if(W===I){const he=ae.filter((Le,wt)=>wt!==Y);return he.length===1&&(he[0].fullWidth=!0),he}return ae})),H))),n(12,i--,i))}function P(C){let I=0;return C.forEach(Y=>{Y.rows.forEach(H=>{H.forEach(j=>{j&&I++})})}),I===0?(me.notify("Layout cannot be empty.","error"),!1):!0}const V=C=>(C.number,void 0),K=C=>w(C.number),x=(C,I)=>T(C.number,I),R=(C,I,Y)=>A(C.number,I,Y),z=(C,I,Y)=>L(C.number,I,Y),N=(C,I,Y,H)=>g(H,C.number,I,Y),ne=C=>D(C.number),rt=(C,I)=>{I.dataTransfer.setData("name",C.name)};return t.$$set=C=>{"params"in C&&n(0,l=C.params),"columnCount"in C&&n(12,i=C.columnCount),"layoutDisabledParameter"in C&&n(13,a=C.layoutDisabledParameter)},[l,s,r,f,_,w,D,T,A,g,L,P,i,a,V,K,x,R,z,N,ne,rt]}class aa extends Ee{constructor(e){super(),we(this,e,ia,xi,_e,{params:0,columnCount:12,layoutDisabledParameter:13},null,[-1,-1])}}function oa(t){let e,n;return e=new t[1]({props:{params:t[0],layoutDisabledParameter:t[2],viewType:t[3]}}),{c(){ze(e.$$.fragment)},m(l,i){Ie(e,l,i),n=!0},p(l,[i]){const a={};i&1&&(a.params=l[0]),i&4&&(a.layoutDisabledParameter=l[2]),i&8&&(a.viewType=l[3]),e.$set(a)},i(l){n||(ye(e.$$.fragment,l),n=!0)},o(l){Oe(e.$$.fragment,l),n=!1},d(l){Fe(e,l)}}}function ra(t,e,n){let{params:l}=e,i,a,o;return t.$$set=s=>{"params"in s&&n(0,l=s.params)},t.$$.update=()=>{if(t.$$.dirty&1)switch(l.type){case"list":n(2,a="layoutListDisabled"),n(1,i=_n);break;case"listSmall":n(2,a="layoutListSmallDisabled"),n(1,i=_n);break;case"kanban":n(1,i=_n);break;case"relationships":n(1,i=Vi);break;case"detail":case"detailSmall":n(1,i=aa);break;case"sidePanelsDetail":n(3,o="detail"),n(1,i=Gt);break;case"sidePanelsDetailSmall":n(3,o="detailSmall"),n(1,i=Gt);break;case"sidePanelsEdit":n(3,o="edit"),n(1,i=Gt);break;case"sidePanelsEditSmall":n(3,o="editSmall"),n(1,i=Gt);break}},[l,i,a,o]}class sa extends Ee{constructor(e){super(),we(this,e,ra,oa,_e,{params:0})}}window.SvelteLanguage=B,window.SvelteUserData=Mn,window.SvelteNotifier=me,window.SvelteLayoutManager=Ne,window.SvelteMetadata=Xe,window.SvelteModelFactory=Lt,ue.LayoutComponent=sa,ue.QueueManagerIcon=$l,ue.UpdatePanel=oi,Object.defineProperty(ue,Symbol.toStringTag,{value:"Module"})});
