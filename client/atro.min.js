(function(Be,Je){typeof exports=="object"&&typeof module<"u"?Je(exports,require("https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@24,400,0,0&icon_names=image")):typeof define=="function"&&define.amd?define(["exports","https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@24,400,0,0&icon_names=image"],Je):(Be=typeof globalThis<"u"?globalThis:Be||self,Je(Be.Svelte={}))})(this,function(Be){"use strict";var Wc=Object.defineProperty;var jc=(Be,Je,Vt)=>Je in Be?Wc(Be,Je,{enumerable:!0,configurable:!0,writable:!0,value:Vt}):Be[Je]=Vt;var Br=(Be,Je,Vt)=>jc(Be,typeof Je!="symbol"?Je+"":Je,Vt);let Je={},Vt;function ji(t={}){Je={animate:!0,allowClose:!0,overlayClickBehavior:"close",overlayOpacity:.7,smoothScroll:!1,disableActiveInteraction:!1,showProgress:!1,stagePadding:10,stageRadius:5,popoverOffset:10,showButtons:["next","previous","close"],disableButtons:[],overlayColor:"#000",...t}}function J(t){return t?Je[t]:Je}function Pl(t){Vt=t}function ft(){return Vt}let ei={};function ti(t,e){ei[t]=e}function Ut(t){var e;(e=ei[t])==null||e.call(ei)}function Ml(){ei={}}function ni(t,e,n,i){return(t/=i/2)<1?n/2*t*t+e:-n/2*(--t*(t-2)-1)+e}function Fr(t){const e='a[href]:not([disabled]), button:not([disabled]), textarea:not([disabled]), input[type="text"]:not([disabled]), input[type="radio"]:not([disabled]), input[type="checkbox"]:not([disabled]), select:not([disabled])';return t.flatMap(n=>{const i=n.matches(e),r=Array.from(n.querySelectorAll(e));return[...i?[n]:[],...r]}).filter(n=>getComputedStyle(n).pointerEvents!=="none"&&Bl(n))}function xr(t){if(!t||Rl(t))return;const e=J("smoothScroll"),n=t.offsetHeight>window.innerHeight;t.scrollIntoView({behavior:!e||Nl(t)?"auto":"smooth",inline:"center",block:n?"start":"center"})}function Nl(t){if(!t||!t.parentElement)return;const e=t.parentElement;return e.scrollHeight>e.clientHeight}function Rl(t){const e=t.getBoundingClientRect();return e.top>=0&&e.left>=0&&e.bottom<=(window.innerHeight||document.documentElement.clientHeight)&&e.right<=(window.innerWidth||document.documentElement.clientWidth)}function Bl(t){return!!(t.offsetWidth||t.offsetHeight||t.getClientRects().length)}let ii={};function xe(t,e){ii[t]=e}function Q(t){return t?ii[t]:ii}function Hr(){ii={}}function Fl(t,e,n,i){let r=Q("__activeStagePosition");const o=r||n.getBoundingClientRect(),a=i.getBoundingClientRect(),s=ni(t,o.x,a.x-o.x,e),l=ni(t,o.y,a.y-o.y,e),u=ni(t,o.width,a.width-o.width,e),f=ni(t,o.height,a.height-o.height,e);r={x:s,y:l,width:u,height:f},jr(r),xe("__activeStagePosition",r)}function Wr(t){if(!t)return;const e=t.getBoundingClientRect(),n={x:e.x,y:e.y,width:e.width,height:e.height};xe("__activeStagePosition",n),jr(n)}function xl(){const t=Q("__activeStagePosition"),e=Q("__overlaySvg");if(!t)return;if(!e){console.warn("No stage svg found.");return}const n=window.innerWidth,i=window.innerHeight;e.setAttribute("viewBox",`0 0 ${n} ${i}`)}function Hl(t){const e=Wl(t);document.body.appendChild(e),Vr(e,n=>{n.target.tagName==="path"&&Ut("overlayClick")}),xe("__overlaySvg",e)}function jr(t){const e=Q("__overlaySvg");if(!e){Hl(t);return}const n=e.firstElementChild;if((n==null?void 0:n.tagName)!=="path")throw new Error("no path element found in stage svg");n.setAttribute("d",zr(t))}function Wl(t){const e=window.innerWidth,n=window.innerHeight,i=document.createElementNS("http://www.w3.org/2000/svg","svg");i.classList.add("driver-overlay","driver-overlay-animated"),i.setAttribute("viewBox",`0 0 ${e} ${n}`),i.setAttribute("xmlSpace","preserve"),i.setAttribute("xmlnsXlink","http://www.w3.org/1999/xlink"),i.setAttribute("version","1.1"),i.setAttribute("preserveAspectRatio","xMinYMin slice"),i.style.fillRule="evenodd",i.style.clipRule="evenodd",i.style.strokeLinejoin="round",i.style.strokeMiterlimit="2",i.style.zIndex="10000",i.style.position="fixed",i.style.top="0",i.style.left="0",i.style.width="100%",i.style.height="100%";const r=document.createElementNS("http://www.w3.org/2000/svg","path");return r.setAttribute("d",zr(t)),r.style.fill=J("overlayColor")||"rgb(0,0,0)",r.style.opacity=`${J("overlayOpacity")}`,r.style.pointerEvents="auto",r.style.cursor="auto",i.appendChild(r),i}function zr(t){const e=window.innerWidth,n=window.innerHeight,i=J("stagePadding")||0,r=J("stageRadius")||0,o=t.width+i*2,a=t.height+i*2,s=Math.min(r,o/2,a/2),l=Math.floor(Math.max(s,0)),u=t.x-i+l,f=t.y-i,c=o-l*2,d=a-l*2;return`M${e},0L0,0L0,${n}L${e},${n}L${e},0Z
    M${u},${f} h${c} a${l},${l} 0 0 1 ${l},${l} v${d} a${l},${l} 0 0 1 -${l},${l} h-${c} a${l},${l} 0 0 1 -${l},-${l} v-${d} a${l},${l} 0 0 1 ${l},-${l} z`}function jl(){const t=Q("__overlaySvg");t&&t.remove()}function zl(){const t=document.getElementById("driver-dummy-element");if(t)return t;let e=document.createElement("div");return e.id="driver-dummy-element",e.style.width="0",e.style.height="0",e.style.pointerEvents="none",e.style.opacity="0",e.style.position="fixed",e.style.top="50%",e.style.left="50%",document.body.appendChild(e),e}function qr(t){const{element:e}=t;let n=typeof e=="function"?e():typeof e=="string"?document.querySelector(e):e;n||(n=zl()),Gl(n,t)}function ql(){const t=Q("__activeElement"),e=Q("__activeStep");t&&(Wr(t),xl(),Zr(t,e))}function Gl(t,e){var n;const i=Date.now(),r=Q("__activeStep"),o=Q("__activeElement")||t,a=!o||o===t,s=t.id==="driver-dummy-element",l=o.id==="driver-dummy-element",u=J("animate"),f=e.onHighlightStarted||J("onHighlightStarted"),c=(e==null?void 0:e.onHighlighted)||J("onHighlighted"),d=(r==null?void 0:r.onDeselected)||J("onDeselected"),h=J(),p=Q();!a&&d&&d(l?void 0:o,r,{config:h,state:p,driver:ft()}),f&&f(s?void 0:t,e,{config:h,state:p,driver:ft()});const v=!a&&u;let g=!1;Jl(),xe("previousStep",r),xe("previousElement",o),xe("activeStep",e),xe("activeElement",t);const y=()=>{if(Q("__transitionCallback")!==y)return;const _=Date.now()-i,D=400-_<=400/2;e.popover&&D&&!g&&v&&(Ur(t,e),g=!0),J("animate")&&_<400?Fl(_,400,o,t):(Wr(t),c&&c(s?void 0:t,e,{config:J(),state:Q(),driver:ft()}),xe("__transitionCallback",void 0),xe("__previousStep",r),xe("__previousElement",o),xe("__activeStep",e),xe("__activeElement",t)),window.requestAnimationFrame(y)};xe("__transitionCallback",y),window.requestAnimationFrame(y),xr(t),!v&&e.popover&&Ur(t,e),o.classList.remove("driver-active-element","driver-no-interaction"),o.removeAttribute("aria-haspopup"),o.removeAttribute("aria-expanded"),o.removeAttribute("aria-controls"),((n=e.disableActiveInteraction)!=null?n:J("disableActiveInteraction"))&&t.classList.add("driver-no-interaction"),t.classList.add("driver-active-element"),t.setAttribute("aria-haspopup","dialog"),t.setAttribute("aria-expanded","true"),t.setAttribute("aria-controls","driver-popover-content")}function Vl(){var t;(t=document.getElementById("driver-dummy-element"))==null||t.remove(),document.querySelectorAll(".driver-active-element").forEach(e=>{e.classList.remove("driver-active-element","driver-no-interaction"),e.removeAttribute("aria-haspopup"),e.removeAttribute("aria-expanded"),e.removeAttribute("aria-controls")})}function An(){const t=Q("__resizeTimeout");t&&window.cancelAnimationFrame(t),xe("__resizeTimeout",window.requestAnimationFrame(ql))}function Ul(t){var e;if(!Q("isInitialized")||!(t.key==="Tab"||t.keyCode===9))return;const n=Q("__activeElement"),i=(e=Q("popover"))==null?void 0:e.wrapper,r=Fr([...i?[i]:[],...n?[n]:[]]),o=r[0],a=r[r.length-1];if(t.preventDefault(),t.shiftKey){const s=r[r.indexOf(document.activeElement)-1]||a;s==null||s.focus()}else{const s=r[r.indexOf(document.activeElement)+1]||o;s==null||s.focus()}}function Gr(t){var e;((e=J("allowKeyboardControl"))==null||e)&&(t.key==="Escape"?Ut("escapePress"):t.key==="ArrowRight"?Ut("arrowRightPress"):t.key==="ArrowLeft"&&Ut("arrowLeftPress"))}function Vr(t,e,n){const i=(r,o)=>{const a=r.target;t.contains(a)&&((!n||n(a))&&(r.preventDefault(),r.stopPropagation(),r.stopImmediatePropagation()),o==null||o(r))};document.addEventListener("pointerdown",i,!0),document.addEventListener("mousedown",i,!0),document.addEventListener("pointerup",i,!0),document.addEventListener("mouseup",i,!0),document.addEventListener("click",r=>{i(r,e)},!0)}function Xl(){window.addEventListener("keyup",Gr,!1),window.addEventListener("keydown",Ul,!1),window.addEventListener("resize",An),window.addEventListener("scroll",An)}function Yl(){window.removeEventListener("keyup",Gr),window.removeEventListener("resize",An),window.removeEventListener("scroll",An)}function Jl(){const t=Q("popover");t&&(t.wrapper.style.display="none")}function Ur(t,e){var n,i;let r=Q("popover");r&&document.body.removeChild(r.wrapper),r=Kl(),document.body.appendChild(r.wrapper);const{title:o,description:a,showButtons:s,disableButtons:l,showProgress:u,nextBtnText:f=J("nextBtnText")||"Next &rarr;",prevBtnText:c=J("prevBtnText")||"&larr; Previous",progressText:d=J("progressText")||"{current} of {total}"}=e.popover||{};r.nextButton.innerHTML=f,r.previousButton.innerHTML=c,r.progress.innerHTML=d,o?(r.title.innerHTML=o,r.title.style.display="block"):r.title.style.display="none",a?(r.description.innerHTML=a,r.description.style.display="block"):r.description.style.display="none";const h=s||J("showButtons"),p=u||J("showProgress")||!1,v=(h==null?void 0:h.includes("next"))||(h==null?void 0:h.includes("previous"))||p;r.closeButton.style.display=h.includes("close")?"block":"none",v?(r.footer.style.display="flex",r.progress.style.display=p?"block":"none",r.nextButton.style.display=h.includes("next")?"block":"none",r.previousButton.style.display=h.includes("previous")?"block":"none"):r.footer.style.display="none";const g=l||J("disableButtons")||[];g!=null&&g.includes("next")&&(r.nextButton.disabled=!0,r.nextButton.classList.add("driver-popover-btn-disabled")),g!=null&&g.includes("previous")&&(r.previousButton.disabled=!0,r.previousButton.classList.add("driver-popover-btn-disabled")),g!=null&&g.includes("close")&&(r.closeButton.disabled=!0,r.closeButton.classList.add("driver-popover-btn-disabled"));const y=r.wrapper;y.style.display="block",y.style.left="",y.style.top="",y.style.bottom="",y.style.right="",y.id="driver-popover-content",y.setAttribute("role","dialog"),y.setAttribute("aria-labelledby","driver-popover-title"),y.setAttribute("aria-describedby","driver-popover-description");const _=r.arrow;_.className="driver-popover-arrow";const D=((n=e.popover)==null?void 0:n.popoverClass)||J("popoverClass")||"";y.className=`driver-popover ${D}`.trim(),Vr(r.wrapper,L=>{var S,w,T;const P=L.target,N=((S=e.popover)==null?void 0:S.onNextClick)||J("onNextClick"),B=((w=e.popover)==null?void 0:w.onPrevClick)||J("onPrevClick"),F=((T=e.popover)==null?void 0:T.onCloseClick)||J("onCloseClick");if(P.classList.contains("driver-popover-next-btn"))return N?N(t,e,{config:J(),state:Q(),driver:ft()}):Ut("nextClick");if(P.classList.contains("driver-popover-prev-btn"))return B?B(t,e,{config:J(),state:Q(),driver:ft()}):Ut("prevClick");if(P.classList.contains("driver-popover-close-btn"))return F?F(t,e,{config:J(),state:Q(),driver:ft()}):Ut("closeClick")},L=>!(r!=null&&r.description.contains(L))&&!(r!=null&&r.title.contains(L))&&typeof L.className=="string"&&L.className.includes("driver-popover")),xe("popover",r);const m=((i=e.popover)==null?void 0:i.onPopoverRender)||J("onPopoverRender");m&&m(r,{config:J(),state:Q(),driver:ft()}),Zr(t,e),xr(y);const A=t.classList.contains("driver-dummy-element"),k=Fr([y,...A?[]:[t]]);k.length>0&&k[0].focus()}function Xr(){const t=Q("popover");if(!(t!=null&&t.wrapper))return;const e=t.wrapper.getBoundingClientRect(),n=J("stagePadding")||0,i=J("popoverOffset")||0;return{width:e.width+n+i,height:e.height+n+i,realWidth:e.width,realHeight:e.height}}function Yr(t,e){const{elementDimensions:n,popoverDimensions:i,popoverPadding:r,popoverArrowDimensions:o}=e;return t==="start"?Math.max(Math.min(n.top-r,window.innerHeight-i.realHeight-o.width),o.width):t==="end"?Math.max(Math.min(n.top-(i==null?void 0:i.realHeight)+n.height+r,window.innerHeight-(i==null?void 0:i.realHeight)-o.width),o.width):t==="center"?Math.max(Math.min(n.top+n.height/2-(i==null?void 0:i.realHeight)/2,window.innerHeight-(i==null?void 0:i.realHeight)-o.width),o.width):0}function Jr(t,e){const{elementDimensions:n,popoverDimensions:i,popoverPadding:r,popoverArrowDimensions:o}=e;return t==="start"?Math.max(Math.min(n.left-r,window.innerWidth-i.realWidth-o.width),o.width):t==="end"?Math.max(Math.min(n.left-(i==null?void 0:i.realWidth)+n.width+r,window.innerWidth-(i==null?void 0:i.realWidth)-o.width),o.width):t==="center"?Math.max(Math.min(n.left+n.width/2-(i==null?void 0:i.realWidth)/2,window.innerWidth-(i==null?void 0:i.realWidth)-o.width),o.width):0}function Zr(t,e){const n=Q("popover");if(!n)return;const{align:i="start",side:r="left"}=(e==null?void 0:e.popover)||{},o=i,a=t.id==="driver-dummy-element"?"over":r,s=J("stagePadding")||0,l=Xr(),u=n.arrow.getBoundingClientRect(),f=t.getBoundingClientRect(),c=f.top-l.height;let d=c>=0;const h=window.innerHeight-(f.bottom+l.height);let p=h>=0;const v=f.left-l.width;let g=v>=0;const y=window.innerWidth-(f.right+l.width);let _=y>=0;const D=!d&&!p&&!g&&!_;let m=a;if(a==="top"&&d?_=g=p=!1:a==="bottom"&&p?_=g=d=!1:a==="left"&&g?_=d=p=!1:a==="right"&&_&&(g=d=p=!1),a==="over"){const A=window.innerWidth/2-l.realWidth/2,k=window.innerHeight/2-l.realHeight/2;n.wrapper.style.left=`${A}px`,n.wrapper.style.right="auto",n.wrapper.style.top=`${k}px`,n.wrapper.style.bottom="auto"}else if(D){const A=window.innerWidth/2-(l==null?void 0:l.realWidth)/2,k=10;n.wrapper.style.left=`${A}px`,n.wrapper.style.right="auto",n.wrapper.style.bottom=`${k}px`,n.wrapper.style.top="auto"}else if(g){const A=Math.min(v,window.innerWidth-(l==null?void 0:l.realWidth)-u.width),k=Yr(o,{elementDimensions:f,popoverDimensions:l,popoverPadding:s,popoverArrowDimensions:u});n.wrapper.style.left=`${A}px`,n.wrapper.style.top=`${k}px`,n.wrapper.style.bottom="auto",n.wrapper.style.right="auto",m="left"}else if(_){const A=Math.min(y,window.innerWidth-(l==null?void 0:l.realWidth)-u.width),k=Yr(o,{elementDimensions:f,popoverDimensions:l,popoverPadding:s,popoverArrowDimensions:u});n.wrapper.style.right=`${A}px`,n.wrapper.style.top=`${k}px`,n.wrapper.style.bottom="auto",n.wrapper.style.left="auto",m="right"}else if(d){const A=Math.min(c,window.innerHeight-l.realHeight-u.width);let k=Jr(o,{elementDimensions:f,popoverDimensions:l,popoverPadding:s,popoverArrowDimensions:u});n.wrapper.style.top=`${A}px`,n.wrapper.style.left=`${k}px`,n.wrapper.style.bottom="auto",n.wrapper.style.right="auto",m="top"}else if(p){const A=Math.min(h,window.innerHeight-(l==null?void 0:l.realHeight)-u.width);let k=Jr(o,{elementDimensions:f,popoverDimensions:l,popoverPadding:s,popoverArrowDimensions:u});n.wrapper.style.left=`${k}px`,n.wrapper.style.bottom=`${A}px`,n.wrapper.style.top="auto",n.wrapper.style.right="auto",m="bottom"}D?n.arrow.classList.add("driver-popover-arrow-none"):Zl(o,m,t)}function Zl(t,e,n){const i=Q("popover");if(!i)return;const r=n.getBoundingClientRect(),o=Xr(),a=i.arrow,s=o.width,l=window.innerWidth,u=r.width,f=r.left,c=o.height,d=window.innerHeight,h=r.top,p=r.height;a.className="driver-popover-arrow";let v=e,g=t;if(e==="top"?(f+u<=0?(v="right",g="end"):f+u-s<=0&&(v="top",g="start"),f>=l?(v="left",g="end"):f+s>=l&&(v="top",g="end")):e==="bottom"?(f+u<=0?(v="right",g="start"):f+u-s<=0&&(v="bottom",g="start"),f>=l?(v="left",g="start"):f+s>=l&&(v="bottom",g="end")):e==="left"?(h+p<=0?(v="bottom",g="end"):h+p-c<=0&&(v="left",g="start"),h>=d?(v="top",g="end"):h+c>=d&&(v="left",g="end")):e==="right"&&(h+p<=0?(v="bottom",g="start"):h+p-c<=0&&(v="right",g="start"),h>=d?(v="top",g="start"):h+c>=d&&(v="right",g="end")),!v)a.classList.add("driver-popover-arrow-none");else{a.classList.add(`driver-popover-arrow-side-${v}`),a.classList.add(`driver-popover-arrow-align-${g}`);const y=n.getBoundingClientRect(),_=a.getBoundingClientRect(),D=J("stagePadding")||0,m=y.left-D<window.innerWidth&&y.right+D>0&&y.top-D<window.innerHeight&&y.bottom+D>0;e==="bottom"&&m&&(_.x>y.x&&_.x+_.width<y.x+y.width?i.wrapper.style.transform="translateY(0)":(a.classList.remove(`driver-popover-arrow-align-${g}`),a.classList.add("driver-popover-arrow-none"),i.wrapper.style.transform=`translateY(-${D/2}px)`))}}function Kl(){const t=document.createElement("div");t.classList.add("driver-popover");const e=document.createElement("div");e.classList.add("driver-popover-arrow");const n=document.createElement("header");n.id="driver-popover-title",n.classList.add("driver-popover-title"),n.style.display="none",n.innerText="Popover Title";const i=document.createElement("div");i.id="driver-popover-description",i.classList.add("driver-popover-description"),i.style.display="none",i.innerText="Popover description is here";const r=document.createElement("button");r.type="button",r.classList.add("driver-popover-close-btn"),r.setAttribute("aria-label","Close"),r.innerHTML="&times;";const o=document.createElement("footer");o.classList.add("driver-popover-footer");const a=document.createElement("span");a.classList.add("driver-popover-progress-text"),a.innerText="";const s=document.createElement("span");s.classList.add("driver-popover-navigation-btns");const l=document.createElement("button");l.type="button",l.classList.add("driver-popover-prev-btn"),l.innerHTML="&larr; Previous";const u=document.createElement("button");return u.type="button",u.classList.add("driver-popover-next-btn"),u.innerHTML="Next &rarr;",s.appendChild(l),s.appendChild(u),o.appendChild(a),o.appendChild(s),t.appendChild(r),t.appendChild(e),t.appendChild(n),t.appendChild(i),t.appendChild(o),{wrapper:t,arrow:e,title:n,description:i,footer:o,previousButton:l,nextButton:u,closeButton:r,footerButtons:s,progress:a}}function Ql(){var t;const e=Q("popover");e&&((t=e.wrapper.parentElement)==null||t.removeChild(e.wrapper))}function $l(t={}){ji(t);function e(){J("allowClose")&&f()}function n(){const d=J("overlayClickBehavior");if(J("allowClose")&&d==="close"){f();return}d==="nextStep"&&i()}function i(){const d=Q("activeIndex"),h=J("steps")||[];if(typeof d>"u")return;const p=d+1;h[p]?u(p):f()}function r(){const d=Q("activeIndex"),h=J("steps")||[];if(typeof d>"u")return;const p=d-1;h[p]?u(p):f()}function o(d){(J("steps")||[])[d]?u(d):f()}function a(){var d;if(Q("__transitionCallback"))return;const h=Q("activeIndex"),p=Q("__activeStep"),v=Q("__activeElement");if(typeof h>"u"||typeof p>"u"||typeof Q("activeIndex")>"u")return;const g=((d=p.popover)==null?void 0:d.onPrevClick)||J("onPrevClick");if(g)return g(v,p,{config:J(),state:Q(),driver:ft()});r()}function s(){var d;if(Q("__transitionCallback"))return;const h=Q("activeIndex"),p=Q("__activeStep"),v=Q("__activeElement");if(typeof h>"u"||typeof p>"u")return;const g=((d=p.popover)==null?void 0:d.onNextClick)||J("onNextClick");if(g)return g(v,p,{config:J(),state:Q(),driver:ft()});i()}function l(){Q("isInitialized")||(xe("isInitialized",!0),document.body.classList.add("driver-active",J("animate")?"driver-fade":"driver-simple"),Xl(),ti("overlayClick",n),ti("escapePress",e),ti("arrowLeftPress",a),ti("arrowRightPress",s))}function u(d=0){var h,p,v,g,y,_,D,m;const A=J("steps");if(!A){console.error("No steps to drive through"),f();return}if(!A[d]){f();return}xe("__activeOnDestroyed",document.activeElement),xe("activeIndex",d);const k=A[d],L=A[d+1],S=A[d-1],w=((h=k.popover)==null?void 0:h.doneBtnText)||J("doneBtnText")||"Done",T=J("allowClose"),P=typeof((p=k.popover)==null?void 0:p.showProgress)<"u"?(v=k.popover)==null?void 0:v.showProgress:J("showProgress"),N=(((g=k.popover)==null?void 0:g.progressText)||J("progressText")||"{{current}} of {{total}}").replace("{{current}}",`${d+1}`).replace("{{total}}",`${A.length}`),B=((y=k.popover)==null?void 0:y.showButtons)||J("showButtons"),F=["next","previous",...T?["close"]:[]].filter($=>!(B!=null&&B.length)||B.includes($)),I=((_=k.popover)==null?void 0:_.onNextClick)||J("onNextClick"),M=((D=k.popover)==null?void 0:D.onPrevClick)||J("onPrevClick"),V=((m=k.popover)==null?void 0:m.onCloseClick)||J("onCloseClick");qr({...k,popover:{showButtons:F,nextBtnText:L?void 0:w,disableButtons:[...S?[]:["previous"]],showProgress:P,progressText:N,onNextClick:I||(()=>{L?u(d+1):f()}),onPrevClick:M||(()=>{u(d-1)}),onCloseClick:V||(()=>{f()}),...(k==null?void 0:k.popover)||{}}})}function f(d=!0){const h=Q("__activeElement"),p=Q("__activeStep"),v=Q("__activeOnDestroyed"),g=J("onDestroyStarted");if(d&&g){const D=!h||(h==null?void 0:h.id)==="driver-dummy-element";g(D?void 0:h,p,{config:J(),state:Q(),driver:ft()});return}const y=(p==null?void 0:p.onDeselected)||J("onDeselected"),_=J("onDestroyed");if(document.body.classList.remove("driver-active","driver-fade","driver-simple"),Yl(),Ql(),Vl(),jl(),Ml(),Hr(),h&&p){const D=h.id==="driver-dummy-element";y&&y(D?void 0:h,p,{config:J(),state:Q(),driver:ft()}),_&&_(D?void 0:h,p,{config:J(),state:Q(),driver:ft()})}v&&v.focus()}const c={isActive:()=>Q("isInitialized")||!1,refresh:An,drive:(d=0)=>{l(),u(d)},setConfig:ji,setSteps:d=>{Hr(),ji({...J(),steps:d})},getConfig:J,getState:Q,getActiveIndex:()=>Q("activeIndex"),isFirstStep:()=>Q("activeIndex")===0,isLastStep:()=>{const d=J("steps")||[],h=Q("activeIndex");return h!==void 0&&h===d.length-1},getActiveStep:()=>Q("activeStep"),getActiveElement:()=>Q("activeElement"),getPreviousElement:()=>Q("previousElement"),getPreviousStep:()=>Q("previousStep"),moveNext:i,movePrevious:r,moveTo:o,hasNextStep:()=>{const d=J("steps")||[],h=Q("activeIndex");return h!==void 0&&!!d[h+1]},hasPreviousStep:()=>{const d=J("steps")||[],h=Q("activeIndex");return h!==void 0&&!!d[h-1]},highlight:d=>{l(),qr({...d,popover:d.popover?{showButtons:[],showProgress:!1,progressText:"",...d.popover}:void 0})},destroy:()=>{f(!1)}};return Pl(c),c}var $e="top",ct="bottom",dt="right",et="left",zi="auto",On=[$e,ct,dt,et],nn="start",Ln="end",es="clippingParents",Kr="viewport",In="popper",ts="reference",Qr=On.reduce(function(t,e){return t.concat([e+"-"+nn,e+"-"+Ln])},[]),$r=[].concat(On,[zi]).reduce(function(t,e){return t.concat([e,e+"-"+nn,e+"-"+Ln])},[]),ns="beforeRead",is="read",rs="afterRead",os="beforeMain",as="main",ls="afterMain",ss="beforeWrite",us="write",fs="afterWrite",cs=[ns,is,rs,os,as,ls,ss,us,fs];function Et(t){return t?(t.nodeName||"").toLowerCase():null}function ot(t){if(t==null)return window;if(t.toString()!=="[object Window]"){var e=t.ownerDocument;return e&&e.defaultView||window}return t}function Xt(t){var e=ot(t).Element;return t instanceof e||t instanceof Element}function pt(t){var e=ot(t).HTMLElement;return t instanceof e||t instanceof HTMLElement}function qi(t){if(typeof ShadowRoot>"u")return!1;var e=ot(t).ShadowRoot;return t instanceof e||t instanceof ShadowRoot}function ds(t){var e=t.state;Object.keys(e.elements).forEach(function(n){var i=e.styles[n]||{},r=e.attributes[n]||{},o=e.elements[n];!pt(o)||!Et(o)||(Object.assign(o.style,i),Object.keys(r).forEach(function(a){var s=r[a];s===!1?o.removeAttribute(a):o.setAttribute(a,s===!0?"":s)}))})}function ps(t){var e=t.state,n={popper:{position:e.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(e.elements.popper.style,n.popper),e.styles=n,e.elements.arrow&&Object.assign(e.elements.arrow.style,n.arrow),function(){Object.keys(e.elements).forEach(function(i){var r=e.elements[i],o=e.attributes[i]||{},a=Object.keys(e.styles.hasOwnProperty(i)?e.styles[i]:n[i]),s=a.reduce(function(l,u){return l[u]="",l},{});!pt(r)||!Et(r)||(Object.assign(r.style,s),Object.keys(o).forEach(function(l){r.removeAttribute(l)}))})}}const eo={name:"applyStyles",enabled:!0,phase:"write",fn:ds,effect:ps,requires:["computeStyles"]};function kt(t){return t.split("-")[0]}var Yt=Math.max,ri=Math.min,rn=Math.round;function Gi(){var t=navigator.userAgentData;return t!=null&&t.brands&&Array.isArray(t.brands)?t.brands.map(function(e){return e.brand+"/"+e.version}).join(" "):navigator.userAgent}function to(){return!/^((?!chrome|android).)*safari/i.test(Gi())}function on(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!1);var i=t.getBoundingClientRect(),r=1,o=1;e&&pt(t)&&(r=t.offsetWidth>0&&rn(i.width)/t.offsetWidth||1,o=t.offsetHeight>0&&rn(i.height)/t.offsetHeight||1);var a=Xt(t)?ot(t):window,s=a.visualViewport,l=!to()&&n,u=(i.left+(l&&s?s.offsetLeft:0))/r,f=(i.top+(l&&s?s.offsetTop:0))/o,c=i.width/r,d=i.height/o;return{width:c,height:d,top:f,right:u+c,bottom:f+d,left:u,x:u,y:f}}function Vi(t){var e=on(t),n=t.offsetWidth,i=t.offsetHeight;return Math.abs(e.width-n)<=1&&(n=e.width),Math.abs(e.height-i)<=1&&(i=e.height),{x:t.offsetLeft,y:t.offsetTop,width:n,height:i}}function no(t,e){var n=e.getRootNode&&e.getRootNode();if(t.contains(e))return!0;if(n&&qi(n)){var i=e;do{if(i&&t.isSameNode(i))return!0;i=i.parentNode||i.host}while(i)}return!1}function At(t){return ot(t).getComputedStyle(t)}function hs(t){return["table","td","th"].indexOf(Et(t))>=0}function xt(t){return((Xt(t)?t.ownerDocument:t.document)||window.document).documentElement}function oi(t){return Et(t)==="html"?t:t.assignedSlot||t.parentNode||(qi(t)?t.host:null)||xt(t)}function io(t){return!pt(t)||At(t).position==="fixed"?null:t.offsetParent}function ms(t){var e=/firefox/i.test(Gi()),n=/Trident/i.test(Gi());if(n&&pt(t)){var i=At(t);if(i.position==="fixed")return null}var r=oi(t);for(qi(r)&&(r=r.host);pt(r)&&["html","body"].indexOf(Et(r))<0;){var o=At(r);if(o.transform!=="none"||o.perspective!=="none"||o.contain==="paint"||["transform","perspective"].indexOf(o.willChange)!==-1||e&&o.willChange==="filter"||e&&o.filter&&o.filter!=="none")return r;r=r.parentNode}return null}function Pn(t){for(var e=ot(t),n=io(t);n&&hs(n)&&At(n).position==="static";)n=io(n);return n&&(Et(n)==="html"||Et(n)==="body"&&At(n).position==="static")?e:n||ms(t)||e}function Ui(t){return["top","bottom"].indexOf(t)>=0?"x":"y"}function Mn(t,e,n){return Yt(t,ri(e,n))}function gs(t,e,n){var i=Mn(t,e,n);return i>n?n:i}function ro(){return{top:0,right:0,bottom:0,left:0}}function oo(t){return Object.assign({},ro(),t)}function ao(t,e){return e.reduce(function(n,i){return n[i]=t,n},{})}var vs=function(e,n){return e=typeof e=="function"?e(Object.assign({},n.rects,{placement:n.placement})):e,oo(typeof e!="number"?e:ao(e,On))};function bs(t){var e,n=t.state,i=t.name,r=t.options,o=n.elements.arrow,a=n.modifiersData.popperOffsets,s=kt(n.placement),l=Ui(s),u=[et,dt].indexOf(s)>=0,f=u?"height":"width";if(!(!o||!a)){var c=vs(r.padding,n),d=Vi(o),h=l==="y"?$e:et,p=l==="y"?ct:dt,v=n.rects.reference[f]+n.rects.reference[l]-a[l]-n.rects.popper[f],g=a[l]-n.rects.reference[l],y=Pn(o),_=y?l==="y"?y.clientHeight||0:y.clientWidth||0:0,D=v/2-g/2,m=c[h],A=_-d[f]-c[p],k=_/2-d[f]/2+D,L=Mn(m,k,A),S=l;n.modifiersData[i]=(e={},e[S]=L,e.centerOffset=L-k,e)}}function ys(t){var e=t.state,n=t.options,i=n.element,r=i===void 0?"[data-popper-arrow]":i;r!=null&&(typeof r=="string"&&(r=e.elements.popper.querySelector(r),!r)||no(e.elements.popper,r)&&(e.elements.arrow=r))}const ws={name:"arrow",enabled:!0,phase:"main",fn:bs,effect:ys,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function an(t){return t.split("-")[1]}var _s={top:"auto",right:"auto",bottom:"auto",left:"auto"};function Es(t,e){var n=t.x,i=t.y,r=e.devicePixelRatio||1;return{x:rn(n*r)/r||0,y:rn(i*r)/r||0}}function lo(t){var e,n=t.popper,i=t.popperRect,r=t.placement,o=t.variation,a=t.offsets,s=t.position,l=t.gpuAcceleration,u=t.adaptive,f=t.roundOffsets,c=t.isFixed,d=a.x,h=d===void 0?0:d,p=a.y,v=p===void 0?0:p,g=typeof f=="function"?f({x:h,y:v}):{x:h,y:v};h=g.x,v=g.y;var y=a.hasOwnProperty("x"),_=a.hasOwnProperty("y"),D=et,m=$e,A=window;if(u){var k=Pn(n),L="clientHeight",S="clientWidth";if(k===ot(n)&&(k=xt(n),At(k).position!=="static"&&s==="absolute"&&(L="scrollHeight",S="scrollWidth")),k=k,r===$e||(r===et||r===dt)&&o===Ln){m=ct;var w=c&&k===A&&A.visualViewport?A.visualViewport.height:k[L];v-=w-i.height,v*=l?1:-1}if(r===et||(r===$e||r===ct)&&o===Ln){D=dt;var T=c&&k===A&&A.visualViewport?A.visualViewport.width:k[S];h-=T-i.width,h*=l?1:-1}}var P=Object.assign({position:s},u&&_s),N=f===!0?Es({x:h,y:v},ot(n)):{x:h,y:v};if(h=N.x,v=N.y,l){var B;return Object.assign({},P,(B={},B[m]=_?"0":"",B[D]=y?"0":"",B.transform=(A.devicePixelRatio||1)<=1?"translate("+h+"px, "+v+"px)":"translate3d("+h+"px, "+v+"px, 0)",B))}return Object.assign({},P,(e={},e[m]=_?v+"px":"",e[D]=y?h+"px":"",e.transform="",e))}function ks(t){var e=t.state,n=t.options,i=n.gpuAcceleration,r=i===void 0?!0:i,o=n.adaptive,a=o===void 0?!0:o,s=n.roundOffsets,l=s===void 0?!0:s,u={placement:kt(e.placement),variation:an(e.placement),popper:e.elements.popper,popperRect:e.rects.popper,gpuAcceleration:r,isFixed:e.options.strategy==="fixed"};e.modifiersData.popperOffsets!=null&&(e.styles.popper=Object.assign({},e.styles.popper,lo(Object.assign({},u,{offsets:e.modifiersData.popperOffsets,position:e.options.strategy,adaptive:a,roundOffsets:l})))),e.modifiersData.arrow!=null&&(e.styles.arrow=Object.assign({},e.styles.arrow,lo(Object.assign({},u,{offsets:e.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:l})))),e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-placement":e.placement})}const Ds={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:ks,data:{}};var ai={passive:!0};function Ss(t){var e=t.state,n=t.instance,i=t.options,r=i.scroll,o=r===void 0?!0:r,a=i.resize,s=a===void 0?!0:a,l=ot(e.elements.popper),u=[].concat(e.scrollParents.reference,e.scrollParents.popper);return o&&u.forEach(function(f){f.addEventListener("scroll",n.update,ai)}),s&&l.addEventListener("resize",n.update,ai),function(){o&&u.forEach(function(f){f.removeEventListener("scroll",n.update,ai)}),s&&l.removeEventListener("resize",n.update,ai)}}const Cs={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:Ss,data:{}};var Ts={left:"right",right:"left",bottom:"top",top:"bottom"};function li(t){return t.replace(/left|right|bottom|top/g,function(e){return Ts[e]})}var As={start:"end",end:"start"};function so(t){return t.replace(/start|end/g,function(e){return As[e]})}function Xi(t){var e=ot(t),n=e.pageXOffset,i=e.pageYOffset;return{scrollLeft:n,scrollTop:i}}function Yi(t){return on(xt(t)).left+Xi(t).scrollLeft}function Os(t,e){var n=ot(t),i=xt(t),r=n.visualViewport,o=i.clientWidth,a=i.clientHeight,s=0,l=0;if(r){o=r.width,a=r.height;var u=to();(u||!u&&e==="fixed")&&(s=r.offsetLeft,l=r.offsetTop)}return{width:o,height:a,x:s+Yi(t),y:l}}function Ls(t){var e,n=xt(t),i=Xi(t),r=(e=t.ownerDocument)==null?void 0:e.body,o=Yt(n.scrollWidth,n.clientWidth,r?r.scrollWidth:0,r?r.clientWidth:0),a=Yt(n.scrollHeight,n.clientHeight,r?r.scrollHeight:0,r?r.clientHeight:0),s=-i.scrollLeft+Yi(t),l=-i.scrollTop;return At(r||n).direction==="rtl"&&(s+=Yt(n.clientWidth,r?r.clientWidth:0)-o),{width:o,height:a,x:s,y:l}}function Ji(t){var e=At(t),n=e.overflow,i=e.overflowX,r=e.overflowY;return/auto|scroll|overlay|hidden/.test(n+r+i)}function uo(t){return["html","body","#document"].indexOf(Et(t))>=0?t.ownerDocument.body:pt(t)&&Ji(t)?t:uo(oi(t))}function Nn(t,e){var n;e===void 0&&(e=[]);var i=uo(t),r=i===((n=t.ownerDocument)==null?void 0:n.body),o=ot(i),a=r?[o].concat(o.visualViewport||[],Ji(i)?i:[]):i,s=e.concat(a);return r?s:s.concat(Nn(oi(a)))}function Zi(t){return Object.assign({},t,{left:t.x,top:t.y,right:t.x+t.width,bottom:t.y+t.height})}function Is(t,e){var n=on(t,!1,e==="fixed");return n.top=n.top+t.clientTop,n.left=n.left+t.clientLeft,n.bottom=n.top+t.clientHeight,n.right=n.left+t.clientWidth,n.width=t.clientWidth,n.height=t.clientHeight,n.x=n.left,n.y=n.top,n}function fo(t,e,n){return e===Kr?Zi(Os(t,n)):Xt(e)?Is(e,n):Zi(Ls(xt(t)))}function Ps(t){var e=Nn(oi(t)),n=["absolute","fixed"].indexOf(At(t).position)>=0,i=n&&pt(t)?Pn(t):t;return Xt(i)?e.filter(function(r){return Xt(r)&&no(r,i)&&Et(r)!=="body"}):[]}function Ms(t,e,n,i){var r=e==="clippingParents"?Ps(t):[].concat(e),o=[].concat(r,[n]),a=o[0],s=o.reduce(function(l,u){var f=fo(t,u,i);return l.top=Yt(f.top,l.top),l.right=ri(f.right,l.right),l.bottom=ri(f.bottom,l.bottom),l.left=Yt(f.left,l.left),l},fo(t,a,i));return s.width=s.right-s.left,s.height=s.bottom-s.top,s.x=s.left,s.y=s.top,s}function co(t){var e=t.reference,n=t.element,i=t.placement,r=i?kt(i):null,o=i?an(i):null,a=e.x+e.width/2-n.width/2,s=e.y+e.height/2-n.height/2,l;switch(r){case $e:l={x:a,y:e.y-n.height};break;case ct:l={x:a,y:e.y+e.height};break;case dt:l={x:e.x+e.width,y:s};break;case et:l={x:e.x-n.width,y:s};break;default:l={x:e.x,y:e.y}}var u=r?Ui(r):null;if(u!=null){var f=u==="y"?"height":"width";switch(o){case nn:l[u]=l[u]-(e[f]/2-n[f]/2);break;case Ln:l[u]=l[u]+(e[f]/2-n[f]/2);break}}return l}function Rn(t,e){e===void 0&&(e={});var n=e,i=n.placement,r=i===void 0?t.placement:i,o=n.strategy,a=o===void 0?t.strategy:o,s=n.boundary,l=s===void 0?es:s,u=n.rootBoundary,f=u===void 0?Kr:u,c=n.elementContext,d=c===void 0?In:c,h=n.altBoundary,p=h===void 0?!1:h,v=n.padding,g=v===void 0?0:v,y=oo(typeof g!="number"?g:ao(g,On)),_=d===In?ts:In,D=t.rects.popper,m=t.elements[p?_:d],A=Ms(Xt(m)?m:m.contextElement||xt(t.elements.popper),l,f,a),k=on(t.elements.reference),L=co({reference:k,element:D,placement:r}),S=Zi(Object.assign({},D,L)),w=d===In?S:k,T={top:A.top-w.top+y.top,bottom:w.bottom-A.bottom+y.bottom,left:A.left-w.left+y.left,right:w.right-A.right+y.right},P=t.modifiersData.offset;if(d===In&&P){var N=P[r];Object.keys(T).forEach(function(B){var F=[dt,ct].indexOf(B)>=0?1:-1,I=[$e,ct].indexOf(B)>=0?"y":"x";T[B]+=N[I]*F})}return T}function Ns(t,e){e===void 0&&(e={});var n=e,i=n.placement,r=n.boundary,o=n.rootBoundary,a=n.padding,s=n.flipVariations,l=n.allowedAutoPlacements,u=l===void 0?$r:l,f=an(i),c=f?s?Qr:Qr.filter(function(p){return an(p)===f}):On,d=c.filter(function(p){return u.indexOf(p)>=0});d.length===0&&(d=c);var h=d.reduce(function(p,v){return p[v]=Rn(t,{placement:v,boundary:r,rootBoundary:o,padding:a})[kt(v)],p},{});return Object.keys(h).sort(function(p,v){return h[p]-h[v]})}function Rs(t){if(kt(t)===zi)return[];var e=li(t);return[so(t),e,so(e)]}function Bs(t){var e=t.state,n=t.options,i=t.name;if(!e.modifiersData[i]._skip){for(var r=n.mainAxis,o=r===void 0?!0:r,a=n.altAxis,s=a===void 0?!0:a,l=n.fallbackPlacements,u=n.padding,f=n.boundary,c=n.rootBoundary,d=n.altBoundary,h=n.flipVariations,p=h===void 0?!0:h,v=n.allowedAutoPlacements,g=e.options.placement,y=kt(g),_=y===g,D=l||(_||!p?[li(g)]:Rs(g)),m=[g].concat(D).reduce(function(De,Le){return De.concat(kt(Le)===zi?Ns(e,{placement:Le,boundary:f,rootBoundary:c,padding:u,flipVariations:p,allowedAutoPlacements:v}):Le)},[]),A=e.rects.reference,k=e.rects.popper,L=new Map,S=!0,w=m[0],T=0;T<m.length;T++){var P=m[T],N=kt(P),B=an(P)===nn,F=[$e,ct].indexOf(N)>=0,I=F?"width":"height",M=Rn(e,{placement:P,boundary:f,rootBoundary:c,altBoundary:d,padding:u}),V=F?B?dt:et:B?ct:$e;A[I]>k[I]&&(V=li(V));var $=li(V),ee=[];if(o&&ee.push(M[N]<=0),s&&ee.push(M[V]<=0,M[$]<=0),ee.every(function(De){return De})){w=P,S=!1;break}L.set(P,ee)}if(S)for(var ke=p?3:1,we=function(Le){var rt=m.find(function(mt){var ut=L.get(mt);if(ut)return ut.slice(0,Le).every(function(W){return W})});if(rt)return w=rt,"break"},Re=ke;Re>0;Re--){var Ke=we(Re);if(Ke==="break")break}e.placement!==w&&(e.modifiersData[i]._skip=!0,e.placement=w,e.reset=!0)}}const Fs={name:"flip",enabled:!0,phase:"main",fn:Bs,requiresIfExists:["offset"],data:{_skip:!1}};function po(t,e,n){return n===void 0&&(n={x:0,y:0}),{top:t.top-e.height-n.y,right:t.right-e.width+n.x,bottom:t.bottom-e.height+n.y,left:t.left-e.width-n.x}}function ho(t){return[$e,dt,ct,et].some(function(e){return t[e]>=0})}function xs(t){var e=t.state,n=t.name,i=e.rects.reference,r=e.rects.popper,o=e.modifiersData.preventOverflow,a=Rn(e,{elementContext:"reference"}),s=Rn(e,{altBoundary:!0}),l=po(a,i),u=po(s,r,o),f=ho(l),c=ho(u);e.modifiersData[n]={referenceClippingOffsets:l,popperEscapeOffsets:u,isReferenceHidden:f,hasPopperEscaped:c},e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-reference-hidden":f,"data-popper-escaped":c})}const Hs={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:xs};function Ws(t,e,n){var i=kt(t),r=[et,$e].indexOf(i)>=0?-1:1,o=typeof n=="function"?n(Object.assign({},e,{placement:t})):n,a=o[0],s=o[1];return a=a||0,s=(s||0)*r,[et,dt].indexOf(i)>=0?{x:s,y:a}:{x:a,y:s}}function js(t){var e=t.state,n=t.options,i=t.name,r=n.offset,o=r===void 0?[0,0]:r,a=$r.reduce(function(f,c){return f[c]=Ws(c,e.rects,o),f},{}),s=a[e.placement],l=s.x,u=s.y;e.modifiersData.popperOffsets!=null&&(e.modifiersData.popperOffsets.x+=l,e.modifiersData.popperOffsets.y+=u),e.modifiersData[i]=a}const zs={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:js};function qs(t){var e=t.state,n=t.name;e.modifiersData[n]=co({reference:e.rects.reference,element:e.rects.popper,placement:e.placement})}const Gs={name:"popperOffsets",enabled:!0,phase:"read",fn:qs,data:{}};function Vs(t){return t==="x"?"y":"x"}function Us(t){var e=t.state,n=t.options,i=t.name,r=n.mainAxis,o=r===void 0?!0:r,a=n.altAxis,s=a===void 0?!1:a,l=n.boundary,u=n.rootBoundary,f=n.altBoundary,c=n.padding,d=n.tether,h=d===void 0?!0:d,p=n.tetherOffset,v=p===void 0?0:p,g=Rn(e,{boundary:l,rootBoundary:u,padding:c,altBoundary:f}),y=kt(e.placement),_=an(e.placement),D=!_,m=Ui(y),A=Vs(m),k=e.modifiersData.popperOffsets,L=e.rects.reference,S=e.rects.popper,w=typeof v=="function"?v(Object.assign({},e.rects,{placement:e.placement})):v,T=typeof w=="number"?{mainAxis:w,altAxis:w}:Object.assign({mainAxis:0,altAxis:0},w),P=e.modifiersData.offset?e.modifiersData.offset[e.placement]:null,N={x:0,y:0};if(k){if(o){var B,F=m==="y"?$e:et,I=m==="y"?ct:dt,M=m==="y"?"height":"width",V=k[m],$=V+g[F],ee=V-g[I],ke=h?-S[M]/2:0,we=_===nn?L[M]:S[M],Re=_===nn?-S[M]:-L[M],Ke=e.elements.arrow,De=h&&Ke?Vi(Ke):{width:0,height:0},Le=e.modifiersData["arrow#persistent"]?e.modifiersData["arrow#persistent"].padding:ro(),rt=Le[F],mt=Le[I],ut=Mn(0,L[M],De[M]),W=D?L[M]/2-ke-ut-rt-T.mainAxis:we-ut-rt-T.mainAxis,x=D?-L[M]/2+ke+ut+mt+T.mainAxis:Re+ut+mt+T.mainAxis,G=e.elements.arrow&&Pn(e.elements.arrow),Z=G?m==="y"?G.clientTop||0:G.clientLeft||0:0,le=(B=P==null?void 0:P[m])!=null?B:0,ye=V+W-le-Z,Ce=V+x-le,Ue=Mn(h?ri($,ye):$,V,h?Yt(ee,Ce):ee);k[m]=Ue,N[m]=Ue-V}if(s){var te,pe=m==="x"?$e:et,be=m==="x"?ct:dt,Ie=k[A],We=A==="y"?"height":"width",_t=Ie+g[pe],Bt=Ie-g[be],$t=[$e,et].indexOf(y)!==-1,kn=(te=P==null?void 0:P[A])!=null?te:0,Dn=$t?_t:Ie-L[We]-S[We]-kn+T.altAxis,Sn=$t?Ie+L[We]+S[We]-kn-T.altAxis:Bt,Cn=h&&$t?gs(Dn,Ie,Sn):Mn(h?Dn:_t,Ie,h?Sn:Bt);k[A]=Cn,N[A]=Cn-Ie}e.modifiersData[i]=N}}const Xs={name:"preventOverflow",enabled:!0,phase:"main",fn:Us,requiresIfExists:["offset"]};function Ys(t){return{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}}function Js(t){return t===ot(t)||!pt(t)?Xi(t):Ys(t)}function Zs(t){var e=t.getBoundingClientRect(),n=rn(e.width)/t.offsetWidth||1,i=rn(e.height)/t.offsetHeight||1;return n!==1||i!==1}function Ks(t,e,n){n===void 0&&(n=!1);var i=pt(e),r=pt(e)&&Zs(e),o=xt(e),a=on(t,r,n),s={scrollLeft:0,scrollTop:0},l={x:0,y:0};return(i||!i&&!n)&&((Et(e)!=="body"||Ji(o))&&(s=Js(e)),pt(e)?(l=on(e,!0),l.x+=e.clientLeft,l.y+=e.clientTop):o&&(l.x=Yi(o))),{x:a.left+s.scrollLeft-l.x,y:a.top+s.scrollTop-l.y,width:a.width,height:a.height}}function Qs(t){var e=new Map,n=new Set,i=[];t.forEach(function(o){e.set(o.name,o)});function r(o){n.add(o.name);var a=[].concat(o.requires||[],o.requiresIfExists||[]);a.forEach(function(s){if(!n.has(s)){var l=e.get(s);l&&r(l)}}),i.push(o)}return t.forEach(function(o){n.has(o.name)||r(o)}),i}function $s(t){var e=Qs(t);return cs.reduce(function(n,i){return n.concat(e.filter(function(r){return r.phase===i}))},[])}function eu(t){var e;return function(){return e||(e=new Promise(function(n){Promise.resolve().then(function(){e=void 0,n(t())})})),e}}function tu(t){var e=t.reduce(function(n,i){var r=n[i.name];return n[i.name]=r?Object.assign({},r,i,{options:Object.assign({},r.options,i.options),data:Object.assign({},r.data,i.data)}):i,n},{});return Object.keys(e).map(function(n){return e[n]})}var mo={placement:"bottom",modifiers:[],strategy:"absolute"};function go(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return!e.some(function(i){return!(i&&typeof i.getBoundingClientRect=="function")})}function nu(t){t===void 0&&(t={});var e=t,n=e.defaultModifiers,i=n===void 0?[]:n,r=e.defaultOptions,o=r===void 0?mo:r;return function(s,l,u){u===void 0&&(u=o);var f={placement:"bottom",orderedModifiers:[],options:Object.assign({},mo,o),modifiersData:{},elements:{reference:s,popper:l},attributes:{},styles:{}},c=[],d=!1,h={state:f,setOptions:function(y){var _=typeof y=="function"?y(f.options):y;v(),f.options=Object.assign({},o,f.options,_),f.scrollParents={reference:Xt(s)?Nn(s):s.contextElement?Nn(s.contextElement):[],popper:Nn(l)};var D=$s(tu([].concat(i,f.options.modifiers)));return f.orderedModifiers=D.filter(function(m){return m.enabled}),p(),h.update()},forceUpdate:function(){if(!d){var y=f.elements,_=y.reference,D=y.popper;if(go(_,D)){f.rects={reference:Ks(_,Pn(D),f.options.strategy==="fixed"),popper:Vi(D)},f.reset=!1,f.placement=f.options.placement,f.orderedModifiers.forEach(function(T){return f.modifiersData[T.name]=Object.assign({},T.data)});for(var m=0;m<f.orderedModifiers.length;m++){if(f.reset===!0){f.reset=!1,m=-1;continue}var A=f.orderedModifiers[m],k=A.fn,L=A.options,S=L===void 0?{}:L,w=A.name;typeof k=="function"&&(f=k({state:f,options:S,name:w,instance:h})||f)}}}},update:eu(function(){return new Promise(function(g){h.forceUpdate(),g(f)})}),destroy:function(){v(),d=!0}};if(!go(s,l))return h;h.setOptions(u).then(function(g){!d&&u.onFirstUpdate&&u.onFirstUpdate(g)});function p(){f.orderedModifiers.forEach(function(g){var y=g.name,_=g.options,D=_===void 0?{}:_,m=g.effect;if(typeof m=="function"){var A=m({state:f,name:y,instance:h,options:D}),k=function(){};c.push(A||k)}})}function v(){c.forEach(function(g){return g()}),c=[]}return h}}var iu=[Cs,Gs,Ds,eo,zs,Fs,Xs,ws,Hs],ru=nu({defaultModifiers:iu}),ou="tippy-box",vo="tippy-content",au="tippy-backdrop",bo="tippy-arrow",yo="tippy-svg-arrow",Jt={passive:!0,capture:!0},wo=function(){return document.body};function Ki(t,e,n){if(Array.isArray(t)){var i=t[e];return i??(Array.isArray(n)?n[e]:n)}return t}function Qi(t,e){var n={}.toString.call(t);return n.indexOf("[object")===0&&n.indexOf(e+"]")>-1}function _o(t,e){return typeof t=="function"?t.apply(void 0,e):t}function Eo(t,e){if(e===0)return t;var n;return function(i){clearTimeout(n),n=setTimeout(function(){t(i)},e)}}function lu(t){return t.split(/\s+/).filter(Boolean)}function ln(t){return[].concat(t)}function ko(t,e){t.indexOf(e)===-1&&t.push(e)}function su(t){return t.filter(function(e,n){return t.indexOf(e)===n})}function uu(t){return t.split("-")[0]}function si(t){return[].slice.call(t)}function Do(t){return Object.keys(t).reduce(function(e,n){return t[n]!==void 0&&(e[n]=t[n]),e},{})}function Bn(){return document.createElement("div")}function ui(t){return["Element","Fragment"].some(function(e){return Qi(t,e)})}function fu(t){return Qi(t,"NodeList")}function cu(t){return Qi(t,"MouseEvent")}function du(t){return!!(t&&t._tippy&&t._tippy.reference===t)}function pu(t){return ui(t)?[t]:fu(t)?si(t):Array.isArray(t)?t:si(document.querySelectorAll(t))}function $i(t,e){t.forEach(function(n){n&&(n.style.transitionDuration=e+"ms")})}function So(t,e){t.forEach(function(n){n&&n.setAttribute("data-state",e)})}function hu(t){var e,n=ln(t),i=n[0];return i!=null&&(e=i.ownerDocument)!=null&&e.body?i.ownerDocument:document}function mu(t,e){var n=e.clientX,i=e.clientY;return t.every(function(r){var o=r.popperRect,a=r.popperState,s=r.props,l=s.interactiveBorder,u=uu(a.placement),f=a.modifiersData.offset;if(!f)return!0;var c=u==="bottom"?f.top.y:0,d=u==="top"?f.bottom.y:0,h=u==="right"?f.left.x:0,p=u==="left"?f.right.x:0,v=o.top-i+c>l,g=i-o.bottom-d>l,y=o.left-n+h>l,_=n-o.right-p>l;return v||g||y||_})}function er(t,e,n){var i=e+"EventListener";["transitionend","webkitTransitionEnd"].forEach(function(r){t[i](r,n)})}function Co(t,e){for(var n=e;n;){var i;if(t.contains(n))return!0;n=n.getRootNode==null||(i=n.getRootNode())==null?void 0:i.host}return!1}var Dt={isTouch:!1},To=0;function gu(){Dt.isTouch||(Dt.isTouch=!0,window.performance&&document.addEventListener("mousemove",Ao))}function Ao(){var t=performance.now();t-To<20&&(Dt.isTouch=!1,document.removeEventListener("mousemove",Ao)),To=t}function vu(){var t=document.activeElement;if(du(t)){var e=t._tippy;t.blur&&!e.state.isVisible&&t.blur()}}function bu(){document.addEventListener("touchstart",gu,Jt),window.addEventListener("blur",vu)}var yu=typeof window<"u"&&typeof document<"u",wu=yu?!!window.msCrypto:!1,_u={animateFill:!1,followCursor:!1,inlinePositioning:!1,sticky:!1},Eu={allowHTML:!1,animation:"fade",arrow:!0,content:"",inertia:!1,maxWidth:350,role:"tooltip",theme:"",zIndex:9999},gt=Object.assign({appendTo:wo,aria:{content:"auto",expanded:"auto"},delay:0,duration:[300,250],getReferenceClientRect:null,hideOnClick:!0,ignoreAttributes:!1,interactive:!1,interactiveBorder:2,interactiveDebounce:0,moveTransition:"",offset:[0,10],onAfterUpdate:function(){},onBeforeUpdate:function(){},onCreate:function(){},onDestroy:function(){},onHidden:function(){},onHide:function(){},onMount:function(){},onShow:function(){},onShown:function(){},onTrigger:function(){},onUntrigger:function(){},onClickOutside:function(){},placement:"top",plugins:[],popperOptions:{},render:null,showOnCreate:!1,touch:!0,trigger:"mouseenter focus",triggerTarget:null},_u,Eu),ku=Object.keys(gt),Du=function(e){var n=Object.keys(e);n.forEach(function(i){gt[i]=e[i]})};function Oo(t){var e=t.plugins||[],n=e.reduce(function(i,r){var o=r.name,a=r.defaultValue;if(o){var s;i[o]=t[o]!==void 0?t[o]:(s=gt[o])!=null?s:a}return i},{});return Object.assign({},t,n)}function Su(t,e){var n=e?Object.keys(Oo(Object.assign({},gt,{plugins:e}))):ku,i=n.reduce(function(r,o){var a=(t.getAttribute("data-tippy-"+o)||"").trim();if(!a)return r;if(o==="content")r[o]=a;else try{r[o]=JSON.parse(a)}catch{r[o]=a}return r},{});return i}function Lo(t,e){var n=Object.assign({},e,{content:_o(e.content,[t])},e.ignoreAttributes?{}:Su(t,e.plugins));return n.aria=Object.assign({},gt.aria,n.aria),n.aria={expanded:n.aria.expanded==="auto"?e.interactive:n.aria.expanded,content:n.aria.content==="auto"?e.interactive?null:"describedby":n.aria.content},n}var Cu=function(){return"innerHTML"};function tr(t,e){t[Cu()]=e}function Io(t){var e=Bn();return t===!0?e.className=bo:(e.className=yo,ui(t)?e.appendChild(t):tr(e,t)),e}function Po(t,e){ui(e.content)?(tr(t,""),t.appendChild(e.content)):typeof e.content!="function"&&(e.allowHTML?tr(t,e.content):t.textContent=e.content)}function nr(t){var e=t.firstElementChild,n=si(e.children);return{box:e,content:n.find(function(i){return i.classList.contains(vo)}),arrow:n.find(function(i){return i.classList.contains(bo)||i.classList.contains(yo)}),backdrop:n.find(function(i){return i.classList.contains(au)})}}function Mo(t){var e=Bn(),n=Bn();n.className=ou,n.setAttribute("data-state","hidden"),n.setAttribute("tabindex","-1");var i=Bn();i.className=vo,i.setAttribute("data-state","hidden"),Po(i,t.props),e.appendChild(n),n.appendChild(i),r(t.props,t.props);function r(o,a){var s=nr(e),l=s.box,u=s.content,f=s.arrow;a.theme?l.setAttribute("data-theme",a.theme):l.removeAttribute("data-theme"),typeof a.animation=="string"?l.setAttribute("data-animation",a.animation):l.removeAttribute("data-animation"),a.inertia?l.setAttribute("data-inertia",""):l.removeAttribute("data-inertia"),l.style.maxWidth=typeof a.maxWidth=="number"?a.maxWidth+"px":a.maxWidth,a.role?l.setAttribute("role",a.role):l.removeAttribute("role"),(o.content!==a.content||o.allowHTML!==a.allowHTML)&&Po(u,t.props),a.arrow?f?o.arrow!==a.arrow&&(l.removeChild(f),l.appendChild(Io(a.arrow))):l.appendChild(Io(a.arrow)):f&&l.removeChild(f)}return{popper:e,onUpdate:r}}Mo.$$tippy=!0;var Tu=1,fi=[],ir=[];function Au(t,e){var n=Lo(t,Object.assign({},gt,Oo(Do(e)))),i,r,o,a=!1,s=!1,l=!1,u=!1,f,c,d,h=[],p=Eo(ye,n.interactiveDebounce),v,g=Tu++,y=null,_=su(n.plugins),D={isEnabled:!0,isVisible:!1,isDestroyed:!1,isMounted:!1,isShown:!1},m={id:g,reference:t,popper:Bn(),popperInstance:y,props:n,state:D,plugins:_,clearDelayTimeouts:Dn,setProps:Sn,setContent:Cn,show:Mr,hide:R,hideWithInteractivity:re,enable:$t,disable:kn,unmount:K,destroy:he};if(!n.render)return m;var A=n.render(m),k=A.popper,L=A.onUpdate;k.setAttribute("data-tippy-root",""),k.id="tippy-"+m.id,m.popper=k,t._tippy=m,k._tippy=m;var S=_.map(function(O){return O.fn(m)}),w=t.hasAttribute("aria-expanded");return G(),ke(),V(),$("onCreate",[m]),n.showOnCreate&&_t(),k.addEventListener("mouseenter",function(){m.props.interactive&&m.state.isVisible&&m.clearDelayTimeouts()}),k.addEventListener("mouseleave",function(){m.props.interactive&&m.props.trigger.indexOf("mouseenter")>=0&&F().addEventListener("mousemove",p)}),m;function T(){var O=m.props.touch;return Array.isArray(O)?O:[O,0]}function P(){return T()[0]==="hold"}function N(){var O;return!!((O=m.props.render)!=null&&O.$$tippy)}function B(){return v||t}function F(){var O=B().parentNode;return O?hu(O):document}function I(){return nr(k)}function M(O){return m.state.isMounted&&!m.state.isVisible||Dt.isTouch||f&&f.type==="focus"?0:Ki(m.props.delay,O?0:1,gt.delay)}function V(O){O===void 0&&(O=!1),k.style.pointerEvents=m.props.interactive&&!O?"":"none",k.style.zIndex=""+m.props.zIndex}function $(O,H,U){if(U===void 0&&(U=!0),S.forEach(function(de){de[O]&&de[O].apply(de,H)}),U){var oe;(oe=m.props)[O].apply(oe,H)}}function ee(){var O=m.props.aria;if(O.content){var H="aria-"+O.content,U=k.id,oe=ln(m.props.triggerTarget||t);oe.forEach(function(de){var je=de.getAttribute(H);if(m.state.isVisible)de.setAttribute(H,je?je+" "+U:U);else{var Qe=je&&je.replace(U,"").trim();Qe?de.setAttribute(H,Qe):de.removeAttribute(H)}})}}function ke(){if(!(w||!m.props.aria.expanded)){var O=ln(m.props.triggerTarget||t);O.forEach(function(H){m.props.interactive?H.setAttribute("aria-expanded",m.state.isVisible&&H===B()?"true":"false"):H.removeAttribute("aria-expanded")})}}function we(){F().removeEventListener("mousemove",p),fi=fi.filter(function(O){return O!==p})}function Re(O){if(!(Dt.isTouch&&(l||O.type==="mousedown"))){var H=O.composedPath&&O.composedPath()[0]||O.target;if(!(m.props.interactive&&Co(k,H))){if(ln(m.props.triggerTarget||t).some(function(U){return Co(U,H)})){if(Dt.isTouch||m.state.isVisible&&m.props.trigger.indexOf("click")>=0)return}else $("onClickOutside",[m,O]);m.props.hideOnClick===!0&&(m.clearDelayTimeouts(),m.hide(),s=!0,setTimeout(function(){s=!1}),m.state.isMounted||rt())}}}function Ke(){l=!0}function De(){l=!1}function Le(){var O=F();O.addEventListener("mousedown",Re,!0),O.addEventListener("touchend",Re,Jt),O.addEventListener("touchstart",De,Jt),O.addEventListener("touchmove",Ke,Jt)}function rt(){var O=F();O.removeEventListener("mousedown",Re,!0),O.removeEventListener("touchend",Re,Jt),O.removeEventListener("touchstart",De,Jt),O.removeEventListener("touchmove",Ke,Jt)}function mt(O,H){W(O,function(){!m.state.isVisible&&k.parentNode&&k.parentNode.contains(k)&&H()})}function ut(O,H){W(O,H)}function W(O,H){var U=I().box;function oe(de){de.target===U&&(er(U,"remove",oe),H())}if(O===0)return H();er(U,"remove",c),er(U,"add",oe),c=oe}function x(O,H,U){U===void 0&&(U=!1);var oe=ln(m.props.triggerTarget||t);oe.forEach(function(de){de.addEventListener(O,H,U),h.push({node:de,eventType:O,handler:H,options:U})})}function G(){P()&&(x("touchstart",le,{passive:!0}),x("touchend",Ce,{passive:!0})),lu(m.props.trigger).forEach(function(O){if(O!=="manual")switch(x(O,le),O){case"mouseenter":x("mouseleave",Ce);break;case"focus":x(wu?"focusout":"blur",Ue);break;case"focusin":x("focusout",Ue);break}})}function Z(){h.forEach(function(O){var H=O.node,U=O.eventType,oe=O.handler,de=O.options;H.removeEventListener(U,oe,de)}),h=[]}function le(O){var H,U=!1;if(!(!m.state.isEnabled||te(O)||s)){var oe=((H=f)==null?void 0:H.type)==="focus";f=O,v=O.currentTarget,ke(),!m.state.isVisible&&cu(O)&&fi.forEach(function(de){return de(O)}),O.type==="click"&&(m.props.trigger.indexOf("mouseenter")<0||a)&&m.props.hideOnClick!==!1&&m.state.isVisible?U=!0:_t(O),O.type==="click"&&(a=!U),U&&!oe&&Bt(O)}}function ye(O){var H=O.target,U=B().contains(H)||k.contains(H);if(!(O.type==="mousemove"&&U)){var oe=We().concat(k).map(function(de){var je,Qe=de._tippy,Ft=(je=Qe.popperInstance)==null?void 0:je.state;return Ft?{popperRect:de.getBoundingClientRect(),popperState:Ft,props:n}:null}).filter(Boolean);mu(oe,O)&&(we(),Bt(O))}}function Ce(O){var H=te(O)||m.props.trigger.indexOf("click")>=0&&a;if(!H){if(m.props.interactive){m.hideWithInteractivity(O);return}Bt(O)}}function Ue(O){m.props.trigger.indexOf("focusin")<0&&O.target!==B()||m.props.interactive&&O.relatedTarget&&k.contains(O.relatedTarget)||Bt(O)}function te(O){return Dt.isTouch?P()!==O.type.indexOf("touch")>=0:!1}function pe(){be();var O=m.props,H=O.popperOptions,U=O.placement,oe=O.offset,de=O.getReferenceClientRect,je=O.moveTransition,Qe=N()?nr(k).arrow:null,Ft=de?{getBoundingClientRect:de,contextElement:de.contextElement||B()}:t,en={name:"$$tippy",enabled:!0,phase:"beforeWrite",requires:["computeStyles"],fn:function(Hi){var Tn=Hi.state;if(N()){var Hc=I(),Rr=Hc.box;["placement","reference-hidden","escaped"].forEach(function(Wi){Wi==="placement"?Rr.setAttribute("data-placement",Tn.placement):Tn.attributes.popper["data-popper-"+Wi]?Rr.setAttribute("data-"+Wi,""):Rr.removeAttribute("data-"+Wi)}),Tn.attributes.popper={}}}},tn=[{name:"offset",options:{offset:oe}},{name:"preventOverflow",options:{padding:{top:2,bottom:2,left:5,right:5}}},{name:"flip",options:{padding:5}},{name:"computeStyles",options:{adaptive:!je}},en];N()&&Qe&&tn.push({name:"arrow",options:{element:Qe,padding:3}}),tn.push.apply(tn,(H==null?void 0:H.modifiers)||[]),m.popperInstance=ru(Ft,k,Object.assign({},H,{placement:U,onFirstUpdate:d,modifiers:tn}))}function be(){m.popperInstance&&(m.popperInstance.destroy(),m.popperInstance=null)}function Ie(){var O=m.props.appendTo,H,U=B();m.props.interactive&&O===wo||O==="parent"?H=U.parentNode:H=_o(O,[U]),H.contains(k)||H.appendChild(k),m.state.isMounted=!0,pe()}function We(){return si(k.querySelectorAll("[data-tippy-root]"))}function _t(O){m.clearDelayTimeouts(),O&&$("onTrigger",[m,O]),Le();var H=M(!0),U=T(),oe=U[0],de=U[1];Dt.isTouch&&oe==="hold"&&de&&(H=de),H?i=setTimeout(function(){m.show()},H):m.show()}function Bt(O){if(m.clearDelayTimeouts(),$("onUntrigger",[m,O]),!m.state.isVisible){rt();return}if(!(m.props.trigger.indexOf("mouseenter")>=0&&m.props.trigger.indexOf("click")>=0&&["mouseleave","mousemove"].indexOf(O.type)>=0&&a)){var H=M(!1);H?r=setTimeout(function(){m.state.isVisible&&m.hide()},H):o=requestAnimationFrame(function(){m.hide()})}}function $t(){m.state.isEnabled=!0}function kn(){m.hide(),m.state.isEnabled=!1}function Dn(){clearTimeout(i),clearTimeout(r),cancelAnimationFrame(o)}function Sn(O){if(!m.state.isDestroyed){$("onBeforeUpdate",[m,O]),Z();var H=m.props,U=Lo(t,Object.assign({},H,Do(O),{ignoreAttributes:!0}));m.props=U,G(),H.interactiveDebounce!==U.interactiveDebounce&&(we(),p=Eo(ye,U.interactiveDebounce)),H.triggerTarget&&!U.triggerTarget?ln(H.triggerTarget).forEach(function(oe){oe.removeAttribute("aria-expanded")}):U.triggerTarget&&t.removeAttribute("aria-expanded"),ke(),V(),L&&L(H,U),m.popperInstance&&(pe(),We().forEach(function(oe){requestAnimationFrame(oe._tippy.popperInstance.forceUpdate)})),$("onAfterUpdate",[m,O])}}function Cn(O){m.setProps({content:O})}function Mr(){var O=m.state.isVisible,H=m.state.isDestroyed,U=!m.state.isEnabled,oe=Dt.isTouch&&!m.props.touch,de=Ki(m.props.duration,0,gt.duration);if(!(O||H||U||oe)&&!B().hasAttribute("disabled")&&($("onShow",[m],!1),m.props.onShow(m)!==!1)){if(m.state.isVisible=!0,N()&&(k.style.visibility="visible"),V(),Le(),m.state.isMounted||(k.style.transition="none"),N()){var je=I(),Qe=je.box,Ft=je.content;$i([Qe,Ft],0)}d=function(){var tn;if(!(!m.state.isVisible||u)){if(u=!0,k.offsetHeight,k.style.transition=m.props.moveTransition,N()&&m.props.animation){var Nr=I(),Hi=Nr.box,Tn=Nr.content;$i([Hi,Tn],de),So([Hi,Tn],"visible")}ee(),ke(),ko(ir,m),(tn=m.popperInstance)==null||tn.forceUpdate(),$("onMount",[m]),m.props.animation&&N()&&ut(de,function(){m.state.isShown=!0,$("onShown",[m])})}},Ie()}}function R(){var O=!m.state.isVisible,H=m.state.isDestroyed,U=!m.state.isEnabled,oe=Ki(m.props.duration,1,gt.duration);if(!(O||H||U)&&($("onHide",[m],!1),m.props.onHide(m)!==!1)){if(m.state.isVisible=!1,m.state.isShown=!1,u=!1,a=!1,N()&&(k.style.visibility="hidden"),we(),rt(),V(!0),N()){var de=I(),je=de.box,Qe=de.content;m.props.animation&&($i([je,Qe],oe),So([je,Qe],"hidden"))}ee(),ke(),m.props.animation?N()&&mt(oe,m.unmount):m.unmount()}}function re(O){F().addEventListener("mousemove",p),ko(fi,p),p(O)}function K(){m.state.isVisible&&m.hide(),m.state.isMounted&&(be(),We().forEach(function(O){O._tippy.unmount()}),k.parentNode&&k.parentNode.removeChild(k),ir=ir.filter(function(O){return O!==m}),m.state.isMounted=!1,$("onHidden",[m]))}function he(){m.state.isDestroyed||(m.clearDelayTimeouts(),m.unmount(),Z(),delete t._tippy,m.state.isDestroyed=!0,$("onDestroy",[m]))}}function Fn(t,e){e===void 0&&(e={});var n=gt.plugins.concat(e.plugins||[]);bu();var i=Object.assign({},e,{plugins:n}),r=pu(t),o=r.reduce(function(a,s){var l=s&&Au(s,i);return l&&a.push(l),a},[]);return ui(t)?o[0]:o}Fn.defaultProps=gt,Fn.setDefaultProps=Du,Fn.currentInput=Dt,Object.assign({},eo,{effect:function(e){var n=e.state,i={popper:{position:n.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};Object.assign(n.elements.popper.style,i.popper),n.styles=i,n.elements.arrow&&Object.assign(n.elements.arrow.style,i.arrow)}}),Fn.setDefaultProps({render:Mo});function Ae(){}const No=t=>t;function xn(t,e){for(const n in e)t[n]=e[n];return t}function Ro(t){return t()}function Bo(){return Object.create(null)}function at(t){t.forEach(Ro)}function ci(t){return typeof t=="function"}function Pe(t,e){return t!=t?e==e:t!==e||t&&typeof t=="object"||typeof t=="function"}let di;function pi(t,e){return t===e?!0:(di||(di=document.createElement("a")),di.href=e,t===di.href)}function Ou(t){return Object.keys(t).length===0}function Fo(t,e,n,i){if(t){const r=xo(t,e,n,i);return t[0](r)}}function xo(t,e,n,i){return t[1]&&i?xn(n.ctx.slice(),t[1](i(e))):n.ctx}function Ho(t,e,n,i){if(t[2]&&i){const r=t[2](i(n));if(e.dirty===void 0)return r;if(typeof r=="object"){const o=[],a=Math.max(e.dirty.length,r.length);for(let s=0;s<a;s+=1)o[s]=e.dirty[s]|r[s];return o}return e.dirty|r}return e.dirty}function Wo(t,e,n,i,r,o){if(r){const a=xo(e,n,i,o);t.p(a,r)}}function jo(t){if(t.ctx.length>32){const e=[],n=t.ctx.length/32;for(let i=0;i<n;i++)e[i]=-1;return e}return-1}function zo(t){return t??""}const qo=typeof window<"u";let Lu=qo?()=>window.performance.now():()=>Date.now(),rr=qo?t=>requestAnimationFrame(t):Ae;const sn=new Set;function Go(t){sn.forEach(e=>{e.c(t)||(sn.delete(e),e.f())}),sn.size!==0&&rr(Go)}function Iu(t){let e;return sn.size===0&&rr(Go),{promise:new Promise(n=>{sn.add(e={c:t,f:n})}),abort(){sn.delete(e)}}}function E(t,e){t.appendChild(e)}function Vo(t){if(!t)return document;const e=t.getRootNode?t.getRootNode():t.ownerDocument;return e&&e.host?e:t.ownerDocument}function Pu(t){const e=C("style");return e.textContent="/* empty */",Mu(Vo(t),e),e.sheet}function Mu(t,e){return E(t.head||t,e),e.sheet}function Y(t,e,n){t.insertBefore(e,n||null)}function X(t){t.parentNode&&t.parentNode.removeChild(t)}function un(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}function C(t){return document.createElement(t)}function Ee(t){return document.createTextNode(t)}function j(){return Ee(" ")}function hi(){return Ee("")}function fe(t,e,n,i){return t.addEventListener(e,n,i),()=>t.removeEventListener(e,n,i)}function Ht(t){return function(e){return e.preventDefault(),t.call(this,e)}}function or(t){return function(e){return e.stopPropagation(),t.call(this,e)}}function Nu(t){return function(e){e.target===this&&t.call(this,e)}}function b(t,e,n){n==null?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}const Ru=["width","height"];function Wt(t,e){const n=Object.getOwnPropertyDescriptors(t.__proto__);for(const i in e)e[i]==null?t.removeAttribute(i):i==="style"?t.style.cssText=e[i]:i==="__value"?t.value=t[i]=e[i]:n[i]&&n[i].set&&Ru.indexOf(i)===-1?t[i]=e[i]:b(t,i,e[i])}function Bu(t){return Array.from(t.childNodes)}function Fe(t,e){e=""+e,t.data!==e&&(t.data=e)}function Uo(t,e){t.value=e??""}function se(t,e,n,i){n==null?t.style.removeProperty(e):t.style.setProperty(e,n,"")}function Xo(t,e,n){for(let i=0;i<t.options.length;i+=1){const r=t.options[i];if(r.__value===e){r.selected=!0;return}}(!n||e!==void 0)&&(t.selectedIndex=-1)}function Fu(t){const e=t.querySelector(":checked");return e&&e.__value}function ne(t,e,n){t.classList.toggle(e,!!n)}function Yo(t,e,{bubbles:n=!1,cancelable:i=!1}={}){return new CustomEvent(t,{detail:e,bubbles:n,cancelable:i})}const mi=new Map;let gi=0;function xu(t){let e=5381,n=t.length;for(;n--;)e=(e<<5)-e^t.charCodeAt(n);return e>>>0}function Hu(t,e){const n={stylesheet:Pu(e),rules:{}};return mi.set(t,n),n}function Jo(t,e,n,i,r,o,a,s=0){const l=16.666/i;let u=`{
`;for(let g=0;g<=1;g+=l){const y=e+(n-e)*o(g);u+=g*100+`%{${a(y,1-y)}}
`}const f=u+`100% {${a(n,1-n)}}
}`,c=`__svelte_${xu(f)}_${s}`,d=Vo(t),{stylesheet:h,rules:p}=mi.get(d)||Hu(d,t);p[c]||(p[c]=!0,h.insertRule(`@keyframes ${c} ${f}`,h.cssRules.length));const v=t.style.animation||"";return t.style.animation=`${v?`${v}, `:""}${c} ${i}ms linear ${r}ms 1 both`,gi+=1,c}function Wu(t,e){const n=(t.style.animation||"").split(", "),i=n.filter(e?o=>o.indexOf(e)<0:o=>o.indexOf("__svelte")===-1),r=n.length-i.length;r&&(t.style.animation=i.join(", "),gi-=r,gi||ju())}function ju(){rr(()=>{gi||(mi.forEach(t=>{const{ownerNode:e}=t.stylesheet;e&&X(e)}),mi.clear())})}let Hn;function Wn(t){Hn=t}function vi(){if(!Hn)throw new Error("Function called outside component initialization");return Hn}function fn(t){vi().$$.on_mount.push(t)}function zu(t){vi().$$.after_update.push(t)}function ar(t){vi().$$.on_destroy.push(t)}function lr(){const t=vi();return(e,n,{cancelable:i=!1}={})=>{const r=t.$$.callbacks[e];if(r){const o=Yo(e,n,{cancelable:i});return r.slice().forEach(a=>{a.call(t,o)}),!o.defaultPrevented}return!0}}const cn=[],ze=[];let dn=[];const Zo=[],Ko=Promise.resolve();let sr=!1;function Qo(){sr||(sr=!0,Ko.then($o))}function pn(){return Qo(),Ko}function hn(t){dn.push(t)}const ur=new Set;let mn=0;function $o(){if(mn!==0)return;const t=Hn;do{try{for(;mn<cn.length;){const e=cn[mn];mn++,Wn(e),qu(e.$$)}}catch(e){throw cn.length=0,mn=0,e}for(Wn(null),cn.length=0,mn=0;ze.length;)ze.pop()();for(let e=0;e<dn.length;e+=1){const n=dn[e];ur.has(n)||(ur.add(n),n())}dn.length=0}while(cn.length);for(;Zo.length;)Zo.pop()();sr=!1,ur.clear(),Wn(t)}function qu(t){if(t.fragment!==null){t.update(),at(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(hn)}}function Gu(t){const e=[],n=[];dn.forEach(i=>t.indexOf(i)===-1?e.push(i):n.push(i)),n.forEach(i=>i()),dn=e}let jn;function Vu(){return jn||(jn=Promise.resolve(),jn.then(()=>{jn=null})),jn}function fr(t,e,n){t.dispatchEvent(Yo(`${e?"intro":"outro"}${n}`))}const bi=new Set;let Ot;function ea(){Ot={r:0,c:[],p:Ot}}function ta(){Ot.r||at(Ot.c),Ot=Ot.p}function He(t,e){t&&t.i&&(bi.delete(t),t.i(e))}function Xe(t,e,n,i){if(t&&t.o){if(bi.has(t))return;bi.add(t),Ot.c.push(()=>{bi.delete(t),i&&(n&&t.d(1),i())}),t.o(e)}else i&&i()}const Uu={duration:0};function na(t,e,n,i){let o=e(t,n,{direction:"both"}),a=i?0:1,s=null,l=null,u=null,f;function c(){u&&Wu(t,u)}function d(p,v){const g=p.b-a;return v*=Math.abs(g),{a,b:p.b,d:g,duration:v,start:p.start,end:p.start+v,group:p.group}}function h(p){const{delay:v=0,duration:g=300,easing:y=No,tick:_=Ae,css:D}=o||Uu,m={start:Lu()+v,b:p};p||(m.group=Ot,Ot.r+=1),"inert"in t&&(p?f!==void 0&&(t.inert=f):(f=t.inert,t.inert=!0)),s||l?l=m:(D&&(c(),u=Jo(t,a,p,g,v,y,D)),p&&_(0,1),s=d(m,g),hn(()=>fr(t,p,"start")),Iu(A=>{if(l&&A>l.start&&(s=d(l,g),l=null,fr(t,s.b,"start"),D&&(c(),u=Jo(t,a,s.b,s.duration,0,y,o.css))),s){if(A>=s.end)_(a=s.b,1-a),fr(t,s.b,"end"),l||(s.b?c():--s.group.r||at(s.group.c)),s=null;else if(A>=s.start){const k=A-s.start;a=s.a+s.d*y(k/s.duration),_(a,1-a)}}return!!(s||l)}))}return{run(p){ci(o)?Vu().then(()=>{o=o({direction:p?"in":"out"}),h(p)}):h(p)},end(){c(),s=l=null}}}function _e(t){return(t==null?void 0:t.length)!==void 0?t:Array.from(t)}function Lt(t,e){t.d(1),e.delete(t.key)}function It(t,e,n,i,r,o,a,s,l,u,f,c){let d=t.length,h=o.length,p=d;const v={};for(;p--;)v[t[p].key]=p;const g=[],y=new Map,_=new Map,D=[];for(p=h;p--;){const L=c(r,o,p),S=n(L);let w=a.get(S);w?D.push(()=>w.p(L,e)):(w=u(S,L),w.c()),y.set(S,g[p]=w),S in v&&_.set(S,Math.abs(p-v[S]))}const m=new Set,A=new Set;function k(L){He(L,1),L.m(s,f),a.set(L.key,L),f=L.first,h--}for(;d&&h;){const L=g[h-1],S=t[d-1],w=L.key,T=S.key;L===S?(f=L.first,d--,h--):y.has(T)?!a.has(w)||m.has(w)?k(L):A.has(T)?d--:_.get(w)>_.get(T)?(A.add(w),k(L)):(m.add(T),d--):(l(S,a),d--)}for(;d--;){const L=t[d];y.has(L.key)||l(L,a)}for(;h;)k(g[h-1]);return at(D),g}function yi(t,e){const n={},i={},r={$$scope:1};let o=t.length;for(;o--;){const a=t[o],s=e[o];if(s){for(const l in a)l in s||(i[l]=1);for(const l in s)r[l]||(n[l]=s[l],r[l]=1);t[o]=s}else for(const l in a)r[l]=1}for(const a in i)a in n||(n[a]=void 0);return n}function St(t){t&&t.c()}function vt(t,e,n){const{fragment:i,after_update:r}=t.$$;i&&i.m(e,n),hn(()=>{const o=t.$$.on_mount.map(Ro).filter(ci);t.$$.on_destroy?t.$$.on_destroy.push(...o):at(o),t.$$.on_mount=[]}),r.forEach(hn)}function bt(t,e){const n=t.$$;n.fragment!==null&&(Gu(n.after_update),at(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function Xu(t,e){t.$$.dirty[0]===-1&&(cn.push(t),Qo(),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function qe(t,e,n,i,r,o,a=null,s=[-1]){const l=Hn;Wn(t);const u=t.$$={fragment:null,ctx:[],props:o,update:Ae,not_equal:r,bound:Bo(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(l?l.$$.context:[])),callbacks:Bo(),dirty:s,skip_bound:!1,root:e.target||l.$$.root};a&&a(u.root);let f=!1;if(u.ctx=n?n(t,e.props||{},(c,d,...h)=>{const p=h.length?h[0]:d;return u.ctx&&r(u.ctx[c],u.ctx[c]=p)&&(!u.skip_bound&&u.bound[c]&&u.bound[c](p),f&&Xu(t,c)),d}):[],u.update(),f=!0,at(u.before_update),u.fragment=i?i(u.ctx):!1,e.target){if(e.hydrate){const c=Bu(e.target);u.fragment&&u.fragment.l(c),c.forEach(X)}else u.fragment&&u.fragment.c();e.intro&&He(t.$$.fragment),vt(t,e.target,e.anchor),$o()}Wn(l)}class Ge{constructor(){Br(this,"$$");Br(this,"$$set")}$destroy(){bt(this,1),this.$destroy=Ae}$on(e,n){if(!ci(n))return Ae;const i=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return i.push(n),()=>{const r=i.indexOf(n);r!==-1&&i.splice(r,1)}}$set(e){this.$$set&&!Ou(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}const Yu="4",gn=[];function jt(t,e=Ae){let n;const i=new Set;function r(s){if(Pe(t,s)&&(t=s,n)){const l=!gn.length;for(const u of i)u[1](),gn.push(u,t);if(l){for(let u=0;u<gn.length;u+=2)gn[u][0](gn[u+1]);gn.length=0}}}function o(s){r(s(t))}function a(s,l=Ae){const u=[s,l];return i.add(u),i.size===1&&(n=e(r,o)||Ae),s(t),()=>{i.delete(u),i.size===0&&n&&(n(),n=null)}}return{set:r,update:o,subscribe:a}}const cr=jt({}),z={setTranslations(t){cr.set(t)},has(t,e,n){let i=!1;return cr.subscribe(r=>{if(n in r&&e in r[n]&&t in r[n][e]){i=!0;return}})(),i},get(t,e,n){let i=n;return cr.subscribe(r=>{if(t in r&&e in r[t]&&n in r[t][e]){i=r[t][e][n];return}if(t in r&&e in r[t]&&n in r[t][e]){i=r[t][e][n];return}if(t=="Global"){i=n;return}i=null})(),i},translate(t,e=null,n=null){n=n||"Global",e=e||"labels";let i=z.get(n,e,t);return i===null&&n!="Global"&&(i=z.get("Global",e,t)),i},translateOption(t,e,n=null){let i=z.translate(e,"options",n);return i===null?"":typeof i=="object"?i[t]:t}},ia=jt({}),wi={set(t){ia.set(t)},get(){let t=null;return ia.subscribe(e=>{e&&(t=e)})(),t}},dr=jt(),tt={setNotifier(t){dr.set(t)},notify(t,e=null,n=2e3){dr.subscribe(i=>{i&&i.notify(t,e,2e3)})()},confirm(t=null,e=null,n){dr.subscribe(i=>{if(i){let r=null,o=null,a=null;typeof t=="string"||t instanceof String?(o=t,a=z.translate("Yes")):(t=t||{},o=t.message,a=t.confirmText,r=t.confirmStyle||null),i.confirm(o,{confirmText:a,cancelText:z.translate("Cancel"),confirmStyle:r},e,n)}})()}},_i=jt(),Pt={setLayoutManager(t){_i.set(t)},resetToDefault(t,e,n,i,r){let o=null;return _i.subscribe(a=>{a&&(o=a.resetToDefault(t,e,n,i,r))})(),o},get:function(t,e,n,i,r,o){let a=null;return _i.subscribe(s=>{s&&(a=s.get(t,e,n,i,r,o))})(),a},set:function(t,e,n,i,r,o){let a=null;return _i.subscribe(s=>{s&&(a=s.set(t,e,n,i,r,o))})(),a}},ra=jt(),ce={setMetadata(t){ra.set(t)},get(t){let e=null;return ra.subscribe(n=>{n&&(e=n.get(t))})(),e}},oa=jt(),pr={setModelFactory(t){oa.set(t)},create(t,e){oa.subscribe(n=>{n&&n.create(t,e)})()}},aa=jt(),la={setConfig(t){aa.set(t)},get(t){let e=null;return aa.subscribe(n=>{n&&(e=n.get(t))})(),e}},zn=jt(),ve={setStorage(t){zn.set(t)},get(t,e){let n=null;return zn.subscribe(i=>{i&&(n=i.get(t,e))})(),n},has(t,e){let n=null;return zn.subscribe(i=>{i&&(n=i.has(t,e))})(),n},clear(t,e){zn.subscribe(n=>{n&&n.clear(t,e)})()},set(t,e,n){zn.subscribe(i=>{i&&i.set(t,e,n)})()}};typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(Yu);function sa(t){let e,n,i,r,o,a,s,l,u,f,c,d,h,p,v;function g(D,m){return D[2]?Zu:Ju}let y=g(t),_=y(t);return{c(){e=C("div"),n=C("div"),i=C("div"),r=C("span"),r.textContent=`${z.translate("jobManager")}`,o=j(),a=C("span"),s=C("a"),s.innerHTML='<span aria-hidden="true">×</span>',l=j(),_.c(),u=j(),f=C("a"),f.textContent=`${z.translate("View List")}`,c=j(),d=C("div"),h=C("div"),h.textContent=`${z.translate("Loading...")}`,b(r,"class","panel-heading-title"),b(s,"href","/"),b(s,"class","close svelte-1p6ppx8"),b(f,"href","#Job"),b(f,"title",z.translate("View List")),b(f,"class","qp-view-list svelte-1p6ppx8"),b(a,"class","pull-right"),b(i,"class","panel-heading clearfix"),b(h,"class","list-container"),b(d,"class","panel-body"),b(n,"class","panel panel-default"),b(e,"class","queue-panel-container")},m(D,m){Y(D,e,m),E(e,n),E(n,i),E(i,r),E(i,o),E(i,a),E(a,s),E(a,l),_.m(a,null),E(a,u),E(a,f),E(n,c),E(n,d),E(d,h),t[9](e),p||(v=fe(s,"click",t[6]),p=!0)},p(D,m){y===(y=g(D))&&_?_.p(D,m):(_.d(1),_=y(D),_&&(_.c(),_.m(a,u)))},d(D){D&&X(e),_.d(),t[9](null),p=!1,v()}}}function Ju(t){let e,n,i;return{c(){e=C("a"),e.textContent=`${z.translate("Pause")}`,b(e,"href","/"),b(e,"title",z.translate("Pause")),b(e,"class","qm-button")},m(r,o){Y(r,e,o),n||(i=fe(e,"click",t[8]),n=!0)},p:Ae,d(r){r&&X(e),n=!1,i()}}}function Zu(t){let e,n,i;return{c(){e=C("a"),e.textContent=`${z.translate("Start")}`,b(e,"href","/"),b(e,"title",z.translate("Start")),b(e,"class","qm-button")},m(r,o){Y(r,e,o),n||(i=fe(e,"click",t[7]),n=!0)},p:Ae,d(r){r&&X(e),n=!1,i()}}}function Ku(t){let e,n=t[0]&&sa(t);return{c(){n&&n.c(),e=hi()},m(i,r){n&&n.m(i,r),Y(i,e,r)},p(i,[r]){i[0]?n?n.p(i,r):(n=sa(i),n.c(),n.m(e.parentNode,e)):n&&(n.d(1),n=null)},i:Ae,o:Ae,d(i){i&&X(e),n&&n.d(i)}}}function Qu(t,e,n){let{isOpen:i=!1}=e,{close:r}=e,{icon:o}=e,a=!1;window.addEventListener("publicDataFetched",p=>{n(2,a=!!p.detail.qmPaused)});let s;function l(p){s&&!s.contains(p.target)&&o&&!o.contains(p.target)&&i===!0&&r()}fn(()=>{document.addEventListener("click",l)}),ar(()=>{document.removeEventListener("click",l)});async function u(p){let v=wi.get();if(v)try{const g=await fetch("/api/v1/App/action/QueueManagerUpdate",{method:"POST",headers:{"Content-Type":"application/json","Authorization-Token":btoa(v.user.userName+":"+v.token)},body:JSON.stringify({pause:p})});if(!g.ok)throw new Error("Network response was not ok");await g.json(),tt.notify("Done","success")}catch(g){console.error("Error:",g)}}const f=p=>{p.preventDefault(),r()},c=p=>{p.preventDefault(),u(!1)},d=p=>{p.preventDefault(),u(!0)};function h(p){ze[p?"unshift":"push"](()=>{s=p,n(3,s)})}return t.$$set=p=>{"isOpen"in p&&n(0,i=p.isOpen),"close"in p&&n(1,r=p.close),"icon"in p&&n(5,o=p.icon)},[i,r,a,s,u,o,f,c,d,h]}class $u extends Ge{constructor(e){super(),qe(this,e,Qu,Ku,Pe,{isOpen:0,close:1,icon:5})}}function ua(t){let e;return{c(){e=C("span"),b(e,"class","fas fa-pause-circle pause-icon")},m(n,i){Y(n,e,i)},d(n){n&&X(e)}}}function ef(t){let e,n,i,r,o,a,s,l,u=t[2]&&ua();return o=new $u({props:{icon:t[0],isOpen:t[1],close:t[4]}}),{c(){e=C("a"),n=C("span"),i=j(),u&&u.c(),r=j(),St(o.$$.fragment),b(n,"class","fas fa-tasks"),b(e,"href","/"),b(e,"class","notifications-button"),b(e,"title",z.translate("jobManager"))},m(f,c){Y(f,e,c),E(e,n),E(e,i),u&&u.m(e,null),t[6](e),Y(f,r,c),vt(o,f,c),a=!0,s||(l=fe(e,"click",t[7]),s=!0)},p(f,[c]){f[2]?u||(u=ua(),u.c(),u.m(e,null)):u&&(u.d(1),u=null);const d={};c&1&&(d.icon=f[0]),c&2&&(d.isOpen=f[1]),o.$set(d)},i(f){a||(He(o.$$.fragment,f),a=!0)},o(f){Xe(o.$$.fragment,f),a=!1},d(f){f&&(X(e),X(r)),u&&u.d(),t[6](null),bt(o,f),s=!1,l()}}}function tf(t,e,n){let{renderTable:i=()=>{}}=e,r,o=!1,a=!1;window.addEventListener("publicDataFetched",c=>{n(2,a=!!c.detail.qmPaused)});function s(){o||(n(1,o=!0),i())}function l(){n(1,o=!1),window.dispatchEvent(new Event("jobManagerPanelClosed"))}function u(c){ze[c?"unshift":"push"](()=>{r=c,n(0,r)})}const f=c=>{c.preventDefault(),s()};return t.$$set=c=>{"renderTable"in c&&n(5,i=c.renderTable)},[r,o,a,s,l,i,u,f]}class nf extends Ge{constructor(e){super(),qe(this,e,tf,ef,Pe,{renderTable:5})}}function rf(t){let e,n=`${t[0]}px`,i=`${t[0]}px`,r=`${t[1]}px`;return{c(){e=C("div"),b(e,"class","loading-icon spinner svelte-yw8t7l"),se(e,"width",n),se(e,"height",i),se(e,"border-width",r)},m(o,a){Y(o,e,a)},p(o,[a]){a&1&&n!==(n=`${o[0]}px`)&&se(e,"width",n),a&1&&i!==(i=`${o[0]}px`)&&se(e,"height",i),a&2&&r!==(r=`${o[1]}px`)&&se(e,"border-width",r)},i:Ae,o:Ae,d(o){o&&X(e)}}}function of(t,e,n){let{size:i=40}=e,{thickness:r=4}=e;return t.$$set=o=>{"size"in o&&n(0,i=o.size),"thickness"in o&&n(1,r=o.thickness)},[i,r]}class af extends Ge{constructor(e){super(),qe(this,e,of,rf,Pe,{size:0,thickness:1})}}function fa(t){let e,n;return{c(){e=C("img"),pi(e.src,n=t[1])||b(e,"src",n),b(e,"class","logo"),b(e,"alt",t[0])},m(i,r){Y(i,e,r)},p(i,r){r&2&&!pi(e.src,n=i[1])&&b(e,"src",n),r&1&&b(e,"alt",i[0])},d(i){i&&X(e)}}}function ca(t){let e,n,i;return{c(){e=C("a"),n=C("i"),i=Ee("Recovery Instructions"),b(n,"class","fa fa-history svelte-1qmezxs"),b(e,"href",t[2]),b(e,"target","_blank"),b(e,"class","btn btn-default svelte-1qmezxs"),b(e,"role","button"),se(e,"float","right")},m(r,o){Y(r,e,o),E(e,n),E(e,i)},p(r,o){o&4&&b(e,"href",r[2])},d(r){r&&X(e)}}}function da(t){let e,n,i,r,o,a;return{c(){e=C("hr"),n=j(),i=C("pre"),r=Ee(t[3]),b(i,"class","logs-container svelte-1qmezxs")},m(s,l){Y(s,e,l),Y(s,n,l),Y(s,i,l),E(i,r),t[11](i),o||(a=fe(i,"scroll",t[8]),o=!0)},p(s,l){l&8&&Fe(r,s[3])},d(s){s&&(X(e),X(n),X(i)),t[11](null),o=!1,a()}}}function lf(t){let e,n,i,r,o,a,s,l,u,f,c,d,h,p,v,g,y,_,D=t[4]?"Hide":"Show",m,A,k,L,S,w,T,P,N=t[1]&&fa(t);f=new af({props:{size:"40",thickness:"5"}});let B=t[2]&&ca(t),F=t[4]&&t[3]&&da(t);return{c(){e=C("div"),n=C("div"),i=C("div"),N&&N.c(),r=j(),o=C("div"),a=C("div"),s=C("h3"),s.textContent="System is updating...",l=j(),u=C("section"),St(f.$$.fragment),c=j(),d=C("h5"),h=Ee(t[5]),p=j(),v=C("section"),g=C("div"),y=C("button"),_=C("i"),m=Ee(D),A=Ee(" logs"),L=j(),B&&B.c(),S=j(),F&&F.c(),b(i,"class","logo-container"),b(n,"class","panel-heading"),b(d,"class","svelte-1qmezxs"),b(u,"class","progress-section svelte-1qmezxs"),b(_,"class","fa fa-list svelte-1qmezxs"),b(y,"class","btn btn-default svelte-1qmezxs"),y.disabled=k=!t[3],b(g,"class","buttons"),b(v,"class","logs-section"),b(a,"class","form-group"),b(o,"class","panel-body"),b(e,"id","login"),b(e,"class","panel panel-default panel-updating")},m(I,M){Y(I,e,M),E(e,n),E(n,i),N&&N.m(i,null),E(e,r),E(e,o),E(o,a),E(a,s),E(a,l),E(a,u),vt(f,u,null),E(u,c),E(u,d),E(d,h),E(a,p),E(a,v),E(v,g),E(g,y),E(y,_),E(y,m),E(y,A),E(g,L),B&&B.m(g,null),E(v,S),F&&F.m(v,null),w=!0,T||(P=fe(y,"click",t[7]),T=!0)},p(I,[M]){I[1]?N?N.p(I,M):(N=fa(I),N.c(),N.m(i,null)):N&&(N.d(1),N=null),(!w||M&32)&&Fe(h,I[5]),(!w||M&16)&&D!==(D=I[4]?"Hide":"Show")&&Fe(m,D),(!w||M&8&&k!==(k=!I[3]))&&(y.disabled=k),I[2]?B?B.p(I,M):(B=ca(I),B.c(),B.m(g,null)):B&&(B.d(1),B=null),I[4]&&I[3]?F?F.p(I,M):(F=da(I),F.c(),F.m(v,null)):F&&(F.d(1),F=null)},i(I){w||(He(f.$$.fragment,I),w=!0)},o(I){Xe(f.$$.fragment,I),w=!1},d(I){I&&X(e),N&&N.d(),bt(f),B&&B.d(),F&&F.d(),T=!1,P()}}}function sf(t){return t.replace(/^\d{2,4}.\d{2}.\d{2,4} \d{2}:\d{2}:\d{2}/g,"").replace(/^[\-\|\s]+/,"")}function uf(t,e,n){let{applicationName:i="AtroCore"}=e,{logoPath:r=null}=e,{logFilePath:o}=e,{restoreLink:a=null}=e,s=!1,l=!1,u=0,f=!0,c="",d,h;zu(()=>{h&&f&&h.scrollTo(0,h.scrollHeight)});function p(){n(4,s=!s),s||(f=!0)}function v(y){const _=y.currentTarget;f=_.scrollHeight-_.scrollTop===_.clientHeight}setInterval(async()=>{try{const y=await fetch(o,{cache:"no-store"});u+=1,y.ok?(n(3,c=(await y.text()).trim()),c.search("composer")>=0&&n(10,l=!0),u>65&&!l&&n(3,c="Something wrong. Please, reboot the server.")):l?setTimeout(()=>{location.reload()},2e3):u>65&&n(3,c="Something wrong. Please, reboot the server.")}catch(y){console.error("Error: ",y)}},1e3);function g(y){ze[y?"unshift":"push"](()=>{h=y,n(6,h)})}return t.$$set=y=>{"applicationName"in y&&n(0,i=y.applicationName),"logoPath"in y&&n(1,r=y.logoPath),"logFilePath"in y&&n(9,o=y.logFilePath),"restoreLink"in y&&n(2,a=y.restoreLink)},t.$$.update=()=>{if(t.$$.dirty&1032)if(c){const y=c.trim().split(`
`);n(5,d=sf(y.pop()))}else l?n(5,d=""):n(5,d="Starting...")},[i,r,a,c,s,d,h,p,v,o,l,g]}class ff extends Ge{constructor(e){super(),qe(this,e,uf,lf,Pe,{applicationName:0,logoPath:1,logFilePath:9,restoreLink:2})}}function pa(t,e,n){const i=t.slice();return i[20]=e[n],i}function ha(t){let e,n=t[20].label+"",i,r,o,a,s,l;function u(){return t[12](t[20])}return{c(){e=C("button"),i=Ee(n),r=j(),b(e,"data-action",o=t[20].name),e.disabled=t[1],b(e,"type","button"),b(e,"class",a=`btn action btn-${t[20].style??"default"}`)},m(f,c){Y(f,e,c),E(e,i),E(e,r),s||(l=fe(e,"click",u),s=!0)},p(f,c){t=f,c&1&&n!==(n=t[20].label+"")&&Fe(i,n),c&1&&o!==(o=t[20].name)&&b(e,"data-action",o),c&2&&(e.disabled=t[1]),c&1&&a!==(a=`btn action btn-${t[20].style??"default"}`)&&b(e,"class",a)},d(f){f&&X(e),s=!1,l()}}}function cf(t){let e,n,i,r=_e(t[0]),o=[];for(let l=0;l<r.length;l+=1)o[l]=ha(pa(t,r,l));const a=t[11].default,s=Fo(a,t,t[10],null);return{c(){e=C("div");for(let l=0;l<o.length;l+=1)o[l].c();n=j(),s&&s.c(),b(e,"class","button-container"),se(e,"padding-top","10px")},m(l,u){Y(l,e,u);for(let f=0;f<o.length;f+=1)o[f]&&o[f].m(e,null);t[13](e),Y(l,n,u),s&&s.m(l,u),i=!0},p(l,[u]){if(u&11){r=_e(l[0]);let f;for(f=0;f<r.length;f+=1){const c=pa(l,r,f);o[f]?o[f].p(c,u):(o[f]=ha(c),o[f].c(),o[f].m(e,null))}for(;f<o.length;f+=1)o[f].d(1);o.length=r.length}s&&s.p&&(!i||u&1024)&&Wo(s,a,l,l[10],i?Ho(a,l[10],u,null):jo(l[10]),null)},i(l){i||(He(s,l),i=!0)},o(l){Xe(s,l),i=!1},d(l){l&&(X(e),X(n)),un(o,l),t[13](null),s&&s.d(l)}}}function df(t,e,n){let{$$slots:i={},$$scope:r}=e;const o=lr();let{params:a}=e,{fetch:s}=e,l,{loadLayout:u=k=>{Pt.get(scope,type,layoutProfileId,k,!1)}}=e,{validate:f=()=>!0}=e,c=!1,d=[],h;a.layoutProfiles,fn(async()=>{var L;await p(),await pn(),o("ready");const k=document.querySelector("#layout-buttons");h&&k&&(a.inModal||a.replaceButtons)&&((L=k.closest(".modal-body"))==null||L.classList.add("modal-layout-manager"),k.appendChild(h))});async function p(){return tt.notify("Loading..."),new Promise((k,L)=>{u(S=>{n(9,l=S),tt.notify(!1),k(),a.afterRender&&a.afterRender()})})}function v(){n(1,c=!0);const k=s();if(!f(k)){n(1,c=!1);return}if(tt.notify("Saving..."),a.inModal&&!a.getActiveLayoutProfileId()){g(!0);return}Pt.set(a.scope,a.type,a.relatedScope,a.layoutProfileId,k,()=>{tt.notify("Saved","success",2e3),g(!1),n(1,c=!1),a.inModal||p()})}function g(k){a.onUpdate&&a.onUpdate(k)}function y(){a.inModal||p()}function _(){tt.confirm("Are you sure you want to reset this layout?",()=>{var k;Pt.resetToDefault(a.scope,a.type,a.relatedScope,(k=l.storedProfile)==null?void 0:k.id,()=>{g(!0),y()})})}function D(k){switch(k.name){case"save":v();break;case"cancel":y();break;case"reset":_();break;case"fullEdit":window.open(`#Admin/layouts/scope=${a.scope}&type=${a.type}${a.relatedScope?"&relatedScope="+a.relatedScope:""}${a.layoutProfileId?"&layoutProfileId="+a.layoutProfileId:""}`,"_blank");break}}const m=k=>D(k);function A(k){ze[k?"unshift":"push"](()=>{h=k,n(2,h)})}return t.$$set=k=>{"params"in k&&n(4,a=k.params),"fetch"in k&&n(5,s=k.fetch),"loadLayout"in k&&n(6,u=k.loadLayout),"validate"in k&&n(7,f=k.validate),"$$scope"in k&&n(10,r=k.$$scope)},t.$$.update=()=>{if(t.$$.dirty&529){if(n(0,d=[{name:"cancel",label:z.translate("Cancel","labels")}]),a.inModal){let k=wi.get();k&&k.user&&k.user.isAdmin&&d.unshift({name:"fullEdit",label:z.translate("Full Edit","labels","LayoutManager")})}(!a.inModal||l!=null&&l.canEdit)&&d.unshift({name:"save",label:z.translate("Save","labels"),style:"primary"}),l&&l.storedProfile&&l.storedProfile.id===a.layoutProfileId&&l.canEdit&&d.push({name:"reset",label:z.translate("reset","labels","LayoutManager")})}},[d,c,h,D,a,s,u,f,v,l,r,i,m,A]}let ma=class extends Ge{constructor(e){super(),qe(this,e,df,cf,Pe,{params:4,fetch:5,loadLayout:6,validate:7,save:8})}get save(){return this.$$.ctx[8]}};/**!
 * Sortable 1.15.6
 * @author	RubaXa   <trash@rubaxa.org>
 * @author	owenm    <owen23355@gmail.com>
 * @license MIT
 */function ga(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),n.push.apply(n,i)}return n}function Ct(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?ga(Object(n),!0).forEach(function(i){pf(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ga(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function Ei(t){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Ei=function(e){return typeof e}:Ei=function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ei(t)}function pf(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Mt(){return Mt=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},Mt.apply(this,arguments)}function hf(t,e){if(t==null)return{};var n={},i=Object.keys(t),r,o;for(o=0;o<i.length;o++)r=i[o],!(e.indexOf(r)>=0)&&(n[r]=t[r]);return n}function mf(t,e){if(t==null)return{};var n=hf(t,e),i,r;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(r=0;r<o.length;r++)i=o[r],!(e.indexOf(i)>=0)&&Object.prototype.propertyIsEnumerable.call(t,i)&&(n[i]=t[i])}return n}var gf="1.15.6";function Nt(t){if(typeof window<"u"&&window.navigator)return!!navigator.userAgent.match(t)}var Rt=Nt(/(?:Trident.*rv[ :]?11\.|msie|iemobile|Windows Phone)/i),qn=Nt(/Edge/i),va=Nt(/firefox/i),Gn=Nt(/safari/i)&&!Nt(/chrome/i)&&!Nt(/android/i),hr=Nt(/iP(ad|od|hone)/i),ba=Nt(/chrome/i)&&Nt(/android/i),ya={capture:!1,passive:!1};function ge(t,e,n){t.addEventListener(e,n,!Rt&&ya)}function me(t,e,n){t.removeEventListener(e,n,!Rt&&ya)}function ki(t,e){if(e){if(e[0]===">"&&(e=e.substring(1)),t)try{if(t.matches)return t.matches(e);if(t.msMatchesSelector)return t.msMatchesSelector(e);if(t.webkitMatchesSelector)return t.webkitMatchesSelector(e)}catch{return!1}return!1}}function wa(t){return t.host&&t!==document&&t.host.nodeType?t.host:t.parentNode}function yt(t,e,n,i){if(t){n=n||document;do{if(e!=null&&(e[0]===">"?t.parentNode===n&&ki(t,e):ki(t,e))||i&&t===n)return t;if(t===n)break}while(t=wa(t))}return null}var _a=/\s+/g;function lt(t,e,n){if(t&&e)if(t.classList)t.classList[n?"add":"remove"](e);else{var i=(" "+t.className+" ").replace(_a," ").replace(" "+e+" "," ");t.className=(i+(n?" "+e:"")).replace(_a," ")}}function ae(t,e,n){var i=t&&t.style;if(i){if(n===void 0)return document.defaultView&&document.defaultView.getComputedStyle?n=document.defaultView.getComputedStyle(t,""):t.currentStyle&&(n=t.currentStyle),e===void 0?n:n[e];!(e in i)&&e.indexOf("webkit")===-1&&(e="-webkit-"+e),i[e]=n+(typeof n=="string"?"":"px")}}function vn(t,e){var n="";if(typeof t=="string")n=t;else do{var i=ae(t,"transform");i&&i!=="none"&&(n=i+" "+n)}while(!e&&(t=t.parentNode));var r=window.DOMMatrix||window.WebKitCSSMatrix||window.CSSMatrix||window.MSCSSMatrix;return r&&new r(n)}function Ea(t,e,n){if(t){var i=t.getElementsByTagName(e),r=0,o=i.length;if(n)for(;r<o;r++)n(i[r],r);return i}return[]}function Tt(){var t=document.scrollingElement;return t||document.documentElement}function Me(t,e,n,i,r){if(!(!t.getBoundingClientRect&&t!==window)){var o,a,s,l,u,f,c;if(t!==window&&t.parentNode&&t!==Tt()?(o=t.getBoundingClientRect(),a=o.top,s=o.left,l=o.bottom,u=o.right,f=o.height,c=o.width):(a=0,s=0,l=window.innerHeight,u=window.innerWidth,f=window.innerHeight,c=window.innerWidth),(e||n)&&t!==window&&(r=r||t.parentNode,!Rt))do if(r&&r.getBoundingClientRect&&(ae(r,"transform")!=="none"||n&&ae(r,"position")!=="static")){var d=r.getBoundingClientRect();a-=d.top+parseInt(ae(r,"border-top-width")),s-=d.left+parseInt(ae(r,"border-left-width")),l=a+o.height,u=s+o.width;break}while(r=r.parentNode);if(i&&t!==window){var h=vn(r||t),p=h&&h.a,v=h&&h.d;h&&(a/=v,s/=p,c/=p,f/=v,l=a+f,u=s+c)}return{top:a,left:s,bottom:l,right:u,width:c,height:f}}}function ka(t,e,n){for(var i=zt(t,!0),r=Me(t)[e];i;){var o=Me(i)[n],a=void 0;if(a=r>=o,!a)return i;if(i===Tt())break;i=zt(i,!1)}return!1}function bn(t,e,n,i){for(var r=0,o=0,a=t.children;o<a.length;){if(a[o].style.display!=="none"&&a[o]!==ie.ghost&&(i||a[o]!==ie.dragged)&&yt(a[o],n.draggable,t,!1)){if(r===e)return a[o];r++}o++}return null}function mr(t,e){for(var n=t.lastElementChild;n&&(n===ie.ghost||ae(n,"display")==="none"||e&&!ki(n,e));)n=n.previousElementSibling;return n||null}function ht(t,e){var n=0;if(!t||!t.parentNode)return-1;for(;t=t.previousElementSibling;)t.nodeName.toUpperCase()!=="TEMPLATE"&&t!==ie.clone&&(!e||ki(t,e))&&n++;return n}function Da(t){var e=0,n=0,i=Tt();if(t)do{var r=vn(t),o=r.a,a=r.d;e+=t.scrollLeft*o,n+=t.scrollTop*a}while(t!==i&&(t=t.parentNode));return[e,n]}function vf(t,e){for(var n in t)if(t.hasOwnProperty(n)){for(var i in e)if(e.hasOwnProperty(i)&&e[i]===t[n][i])return Number(n)}return-1}function zt(t,e){if(!t||!t.getBoundingClientRect)return Tt();var n=t,i=!1;do if(n.clientWidth<n.scrollWidth||n.clientHeight<n.scrollHeight){var r=ae(n);if(n.clientWidth<n.scrollWidth&&(r.overflowX=="auto"||r.overflowX=="scroll")||n.clientHeight<n.scrollHeight&&(r.overflowY=="auto"||r.overflowY=="scroll")){if(!n.getBoundingClientRect||n===document.body)return Tt();if(i||e)return n;i=!0}}while(n=n.parentNode);return Tt()}function bf(t,e){if(t&&e)for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t}function gr(t,e){return Math.round(t.top)===Math.round(e.top)&&Math.round(t.left)===Math.round(e.left)&&Math.round(t.height)===Math.round(e.height)&&Math.round(t.width)===Math.round(e.width)}var Vn;function Sa(t,e){return function(){if(!Vn){var n=arguments,i=this;n.length===1?t.call(i,n[0]):t.apply(i,n),Vn=setTimeout(function(){Vn=void 0},e)}}}function yf(){clearTimeout(Vn),Vn=void 0}function Ca(t,e,n){t.scrollLeft+=e,t.scrollTop+=n}function Ta(t){var e=window.Polymer,n=window.jQuery||window.Zepto;return e&&e.dom?e.dom(t).cloneNode(!0):n?n(t).clone(!0)[0]:t.cloneNode(!0)}function Aa(t,e,n){var i={};return Array.from(t.children).forEach(function(r){var o,a,s,l;if(!(!yt(r,e.draggable,t,!1)||r.animated||r===n)){var u=Me(r);i.left=Math.min((o=i.left)!==null&&o!==void 0?o:1/0,u.left),i.top=Math.min((a=i.top)!==null&&a!==void 0?a:1/0,u.top),i.right=Math.max((s=i.right)!==null&&s!==void 0?s:-1/0,u.right),i.bottom=Math.max((l=i.bottom)!==null&&l!==void 0?l:-1/0,u.bottom)}}),i.width=i.right-i.left,i.height=i.bottom-i.top,i.x=i.left,i.y=i.top,i}var nt="Sortable"+new Date().getTime();function wf(){var t=[],e;return{captureAnimationState:function(){if(t=[],!!this.options.animation){var i=[].slice.call(this.el.children);i.forEach(function(r){if(!(ae(r,"display")==="none"||r===ie.ghost)){t.push({target:r,rect:Me(r)});var o=Ct({},t[t.length-1].rect);if(r.thisAnimationDuration){var a=vn(r,!0);a&&(o.top-=a.f,o.left-=a.e)}r.fromRect=o}})}},addAnimationState:function(i){t.push(i)},removeAnimationState:function(i){t.splice(vf(t,{target:i}),1)},animateAll:function(i){var r=this;if(!this.options.animation){clearTimeout(e),typeof i=="function"&&i();return}var o=!1,a=0;t.forEach(function(s){var l=0,u=s.target,f=u.fromRect,c=Me(u),d=u.prevFromRect,h=u.prevToRect,p=s.rect,v=vn(u,!0);v&&(c.top-=v.f,c.left-=v.e),u.toRect=c,u.thisAnimationDuration&&gr(d,c)&&!gr(f,c)&&(p.top-c.top)/(p.left-c.left)===(f.top-c.top)/(f.left-c.left)&&(l=Ef(p,d,h,r.options)),gr(c,f)||(u.prevFromRect=f,u.prevToRect=c,l||(l=r.options.animation),r.animate(u,p,c,l)),l&&(o=!0,a=Math.max(a,l),clearTimeout(u.animationResetTimer),u.animationResetTimer=setTimeout(function(){u.animationTime=0,u.prevFromRect=null,u.fromRect=null,u.prevToRect=null,u.thisAnimationDuration=null},l),u.thisAnimationDuration=l)}),clearTimeout(e),o?e=setTimeout(function(){typeof i=="function"&&i()},a):typeof i=="function"&&i(),t=[]},animate:function(i,r,o,a){if(a){ae(i,"transition",""),ae(i,"transform","");var s=vn(this.el),l=s&&s.a,u=s&&s.d,f=(r.left-o.left)/(l||1),c=(r.top-o.top)/(u||1);i.animatingX=!!f,i.animatingY=!!c,ae(i,"transform","translate3d("+f+"px,"+c+"px,0)"),this.forRepaintDummy=_f(i),ae(i,"transition","transform "+a+"ms"+(this.options.easing?" "+this.options.easing:"")),ae(i,"transform","translate3d(0,0,0)"),typeof i.animated=="number"&&clearTimeout(i.animated),i.animated=setTimeout(function(){ae(i,"transition",""),ae(i,"transform",""),i.animated=!1,i.animatingX=!1,i.animatingY=!1},a)}}}}function _f(t){return t.offsetWidth}function Ef(t,e,n,i){return Math.sqrt(Math.pow(e.top-t.top,2)+Math.pow(e.left-t.left,2))/Math.sqrt(Math.pow(e.top-n.top,2)+Math.pow(e.left-n.left,2))*i.animation}var yn=[],vr={initializeByDefault:!0},Un={mount:function(e){for(var n in vr)vr.hasOwnProperty(n)&&!(n in e)&&(e[n]=vr[n]);yn.forEach(function(i){if(i.pluginName===e.pluginName)throw"Sortable: Cannot mount plugin ".concat(e.pluginName," more than once")}),yn.push(e)},pluginEvent:function(e,n,i){var r=this;this.eventCanceled=!1,i.cancel=function(){r.eventCanceled=!0};var o=e+"Global";yn.forEach(function(a){n[a.pluginName]&&(n[a.pluginName][o]&&n[a.pluginName][o](Ct({sortable:n},i)),n.options[a.pluginName]&&n[a.pluginName][e]&&n[a.pluginName][e](Ct({sortable:n},i)))})},initializePlugins:function(e,n,i,r){yn.forEach(function(s){var l=s.pluginName;if(!(!e.options[l]&&!s.initializeByDefault)){var u=new s(e,n,e.options);u.sortable=e,u.options=e.options,e[l]=u,Mt(i,u.defaults)}});for(var o in e.options)if(e.options.hasOwnProperty(o)){var a=this.modifyOption(e,o,e.options[o]);typeof a<"u"&&(e.options[o]=a)}},getEventProperties:function(e,n){var i={};return yn.forEach(function(r){typeof r.eventProperties=="function"&&Mt(i,r.eventProperties.call(n[r.pluginName],e))}),i},modifyOption:function(e,n,i){var r;return yn.forEach(function(o){e[o.pluginName]&&o.optionListeners&&typeof o.optionListeners[n]=="function"&&(r=o.optionListeners[n].call(e[o.pluginName],i))}),r}};function kf(t){var e=t.sortable,n=t.rootEl,i=t.name,r=t.targetEl,o=t.cloneEl,a=t.toEl,s=t.fromEl,l=t.oldIndex,u=t.newIndex,f=t.oldDraggableIndex,c=t.newDraggableIndex,d=t.originalEvent,h=t.putSortable,p=t.extraEventProperties;if(e=e||n&&n[nt],!!e){var v,g=e.options,y="on"+i.charAt(0).toUpperCase()+i.substr(1);window.CustomEvent&&!Rt&&!qn?v=new CustomEvent(i,{bubbles:!0,cancelable:!0}):(v=document.createEvent("Event"),v.initEvent(i,!0,!0)),v.to=a||n,v.from=s||n,v.item=r||n,v.clone=o,v.oldIndex=l,v.newIndex=u,v.oldDraggableIndex=f,v.newDraggableIndex=c,v.originalEvent=d,v.pullMode=h?h.lastPutMode:void 0;var _=Ct(Ct({},p),Un.getEventProperties(i,e));for(var D in _)v[D]=_[D];n&&n.dispatchEvent(v),g[y]&&g[y].call(e,v)}}var Df=["evt"],it=function(e,n){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},r=i.evt,o=mf(i,Df);Un.pluginEvent.bind(ie)(e,n,Ct({dragEl:q,parentEl:Oe,ghostEl:ue,rootEl:Se,nextEl:Zt,lastDownEl:Di,cloneEl:Te,cloneHidden:qt,dragStarted:Yn,putSortable:Ve,activeSortable:ie.active,originalEvent:r,oldIndex:wn,oldDraggableIndex:Xn,newIndex:st,newDraggableIndex:Gt,hideGhostForTarget:Ra,unhideGhostForTarget:Ba,cloneNowHidden:function(){qt=!0},cloneNowShown:function(){qt=!1},dispatchSortableEvent:function(s){Ze({sortable:n,name:s,originalEvent:r})}},o))};function Ze(t){kf(Ct({putSortable:Ve,cloneEl:Te,targetEl:q,rootEl:Se,oldIndex:wn,oldDraggableIndex:Xn,newIndex:st,newDraggableIndex:Gt},t))}var q,Oe,ue,Se,Zt,Di,Te,qt,wn,st,Xn,Gt,Si,Ve,_n=!1,Ci=!1,Ti=[],Kt,wt,br,yr,Oa,La,Yn,En,Jn,Zn=!1,Ai=!1,Oi,Ye,wr=[],_r=!1,Li=[],Ii=typeof document<"u",Pi=hr,Ia=qn||Rt?"cssFloat":"float",Sf=Ii&&!ba&&!hr&&"draggable"in document.createElement("div"),Pa=function(){if(Ii){if(Rt)return!1;var t=document.createElement("x");return t.style.cssText="pointer-events:auto",t.style.pointerEvents==="auto"}}(),Ma=function(e,n){var i=ae(e),r=parseInt(i.width)-parseInt(i.paddingLeft)-parseInt(i.paddingRight)-parseInt(i.borderLeftWidth)-parseInt(i.borderRightWidth),o=bn(e,0,n),a=bn(e,1,n),s=o&&ae(o),l=a&&ae(a),u=s&&parseInt(s.marginLeft)+parseInt(s.marginRight)+Me(o).width,f=l&&parseInt(l.marginLeft)+parseInt(l.marginRight)+Me(a).width;if(i.display==="flex")return i.flexDirection==="column"||i.flexDirection==="column-reverse"?"vertical":"horizontal";if(i.display==="grid")return i.gridTemplateColumns.split(" ").length<=1?"vertical":"horizontal";if(o&&s.float&&s.float!=="none"){var c=s.float==="left"?"left":"right";return a&&(l.clear==="both"||l.clear===c)?"vertical":"horizontal"}return o&&(s.display==="block"||s.display==="flex"||s.display==="table"||s.display==="grid"||u>=r&&i[Ia]==="none"||a&&i[Ia]==="none"&&u+f>r)?"vertical":"horizontal"},Cf=function(e,n,i){var r=i?e.left:e.top,o=i?e.right:e.bottom,a=i?e.width:e.height,s=i?n.left:n.top,l=i?n.right:n.bottom,u=i?n.width:n.height;return r===s||o===l||r+a/2===s+u/2},Tf=function(e,n){var i;return Ti.some(function(r){var o=r[nt].options.emptyInsertThreshold;if(!(!o||mr(r))){var a=Me(r),s=e>=a.left-o&&e<=a.right+o,l=n>=a.top-o&&n<=a.bottom+o;if(s&&l)return i=r}}),i},Na=function(e){function n(o,a){return function(s,l,u,f){var c=s.options.group.name&&l.options.group.name&&s.options.group.name===l.options.group.name;if(o==null&&(a||c))return!0;if(o==null||o===!1)return!1;if(a&&o==="clone")return o;if(typeof o=="function")return n(o(s,l,u,f),a)(s,l,u,f);var d=(a?s:l).options.group.name;return o===!0||typeof o=="string"&&o===d||o.join&&o.indexOf(d)>-1}}var i={},r=e.group;(!r||Ei(r)!="object")&&(r={name:r}),i.name=r.name,i.checkPull=n(r.pull,!0),i.checkPut=n(r.put),i.revertClone=r.revertClone,e.group=i},Ra=function(){!Pa&&ue&&ae(ue,"display","none")},Ba=function(){!Pa&&ue&&ae(ue,"display","")};Ii&&!ba&&document.addEventListener("click",function(t){if(Ci)return t.preventDefault(),t.stopPropagation&&t.stopPropagation(),t.stopImmediatePropagation&&t.stopImmediatePropagation(),Ci=!1,!1},!0);var Qt=function(e){if(q){e=e.touches?e.touches[0]:e;var n=Tf(e.clientX,e.clientY);if(n){var i={};for(var r in e)e.hasOwnProperty(r)&&(i[r]=e[r]);i.target=i.rootEl=n,i.preventDefault=void 0,i.stopPropagation=void 0,n[nt]._onDragOver(i)}}},Af=function(e){q&&q.parentNode[nt]._isOutsideThisEl(e.target)};function ie(t,e){if(!(t&&t.nodeType&&t.nodeType===1))throw"Sortable: `el` must be an HTMLElement, not ".concat({}.toString.call(t));this.el=t,this.options=e=Mt({},e),t[nt]=this;var n={group:null,sort:!0,disabled:!1,store:null,handle:null,draggable:/^[uo]l$/i.test(t.nodeName)?">li":">*",swapThreshold:1,invertSwap:!1,invertedSwapThreshold:null,removeCloneOnHide:!0,direction:function(){return Ma(t,this.options)},ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",dragClass:"sortable-drag",ignore:"a, img",filter:null,preventOnFilter:!0,animation:0,easing:null,setData:function(a,s){a.setData("Text",s.textContent)},dropBubble:!1,dragoverBubble:!1,dataIdAttr:"data-id",delay:0,delayOnTouchOnly:!1,touchStartThreshold:(Number.parseInt?Number:window).parseInt(window.devicePixelRatio,10)||1,forceFallback:!1,fallbackClass:"sortable-fallback",fallbackOnBody:!1,fallbackTolerance:0,fallbackOffset:{x:0,y:0},supportPointer:ie.supportPointer!==!1&&"PointerEvent"in window&&(!Gn||hr),emptyInsertThreshold:5};Un.initializePlugins(this,t,n);for(var i in n)!(i in e)&&(e[i]=n[i]);Na(e);for(var r in this)r.charAt(0)==="_"&&typeof this[r]=="function"&&(this[r]=this[r].bind(this));this.nativeDraggable=e.forceFallback?!1:Sf,this.nativeDraggable&&(this.options.touchStartThreshold=1),e.supportPointer?ge(t,"pointerdown",this._onTapStart):(ge(t,"mousedown",this._onTapStart),ge(t,"touchstart",this._onTapStart)),this.nativeDraggable&&(ge(t,"dragover",this),ge(t,"dragenter",this)),Ti.push(this.el),e.store&&e.store.get&&this.sort(e.store.get(this)||[]),Mt(this,wf())}ie.prototype={constructor:ie,_isOutsideThisEl:function(e){!this.el.contains(e)&&e!==this.el&&(En=null)},_getDirection:function(e,n){return typeof this.options.direction=="function"?this.options.direction.call(this,e,n,q):this.options.direction},_onTapStart:function(e){if(e.cancelable){var n=this,i=this.el,r=this.options,o=r.preventOnFilter,a=e.type,s=e.touches&&e.touches[0]||e.pointerType&&e.pointerType==="touch"&&e,l=(s||e).target,u=e.target.shadowRoot&&(e.path&&e.path[0]||e.composedPath&&e.composedPath()[0])||l,f=r.filter;if(Bf(i),!q&&!(/mousedown|pointerdown/.test(a)&&e.button!==0||r.disabled)&&!u.isContentEditable&&!(!this.nativeDraggable&&Gn&&l&&l.tagName.toUpperCase()==="SELECT")&&(l=yt(l,r.draggable,i,!1),!(l&&l.animated)&&Di!==l)){if(wn=ht(l),Xn=ht(l,r.draggable),typeof f=="function"){if(f.call(this,e,l,this)){Ze({sortable:n,rootEl:u,name:"filter",targetEl:l,toEl:i,fromEl:i}),it("filter",n,{evt:e}),o&&e.preventDefault();return}}else if(f&&(f=f.split(",").some(function(c){if(c=yt(u,c.trim(),i,!1),c)return Ze({sortable:n,rootEl:c,name:"filter",targetEl:l,fromEl:i,toEl:i}),it("filter",n,{evt:e}),!0}),f)){o&&e.preventDefault();return}r.handle&&!yt(u,r.handle,i,!1)||this._prepareDragStart(e,s,l)}}},_prepareDragStart:function(e,n,i){var r=this,o=r.el,a=r.options,s=o.ownerDocument,l;if(i&&!q&&i.parentNode===o){var u=Me(i);if(Se=o,q=i,Oe=q.parentNode,Zt=q.nextSibling,Di=i,Si=a.group,ie.dragged=q,Kt={target:q,clientX:(n||e).clientX,clientY:(n||e).clientY},Oa=Kt.clientX-u.left,La=Kt.clientY-u.top,this._lastX=(n||e).clientX,this._lastY=(n||e).clientY,q.style["will-change"]="all",l=function(){if(it("delayEnded",r,{evt:e}),ie.eventCanceled){r._onDrop();return}r._disableDelayedDragEvents(),!va&&r.nativeDraggable&&(q.draggable=!0),r._triggerDragStart(e,n),Ze({sortable:r,name:"choose",originalEvent:e}),lt(q,a.chosenClass,!0)},a.ignore.split(",").forEach(function(f){Ea(q,f.trim(),Er)}),ge(s,"dragover",Qt),ge(s,"mousemove",Qt),ge(s,"touchmove",Qt),a.supportPointer?(ge(s,"pointerup",r._onDrop),!this.nativeDraggable&&ge(s,"pointercancel",r._onDrop)):(ge(s,"mouseup",r._onDrop),ge(s,"touchend",r._onDrop),ge(s,"touchcancel",r._onDrop)),va&&this.nativeDraggable&&(this.options.touchStartThreshold=4,q.draggable=!0),it("delayStart",this,{evt:e}),a.delay&&(!a.delayOnTouchOnly||n)&&(!this.nativeDraggable||!(qn||Rt))){if(ie.eventCanceled){this._onDrop();return}a.supportPointer?(ge(s,"pointerup",r._disableDelayedDrag),ge(s,"pointercancel",r._disableDelayedDrag)):(ge(s,"mouseup",r._disableDelayedDrag),ge(s,"touchend",r._disableDelayedDrag),ge(s,"touchcancel",r._disableDelayedDrag)),ge(s,"mousemove",r._delayedDragTouchMoveHandler),ge(s,"touchmove",r._delayedDragTouchMoveHandler),a.supportPointer&&ge(s,"pointermove",r._delayedDragTouchMoveHandler),r._dragStartTimer=setTimeout(l,a.delay)}else l()}},_delayedDragTouchMoveHandler:function(e){var n=e.touches?e.touches[0]:e;Math.max(Math.abs(n.clientX-this._lastX),Math.abs(n.clientY-this._lastY))>=Math.floor(this.options.touchStartThreshold/(this.nativeDraggable&&window.devicePixelRatio||1))&&this._disableDelayedDrag()},_disableDelayedDrag:function(){q&&Er(q),clearTimeout(this._dragStartTimer),this._disableDelayedDragEvents()},_disableDelayedDragEvents:function(){var e=this.el.ownerDocument;me(e,"mouseup",this._disableDelayedDrag),me(e,"touchend",this._disableDelayedDrag),me(e,"touchcancel",this._disableDelayedDrag),me(e,"pointerup",this._disableDelayedDrag),me(e,"pointercancel",this._disableDelayedDrag),me(e,"mousemove",this._delayedDragTouchMoveHandler),me(e,"touchmove",this._delayedDragTouchMoveHandler),me(e,"pointermove",this._delayedDragTouchMoveHandler)},_triggerDragStart:function(e,n){n=n||e.pointerType=="touch"&&e,!this.nativeDraggable||n?this.options.supportPointer?ge(document,"pointermove",this._onTouchMove):n?ge(document,"touchmove",this._onTouchMove):ge(document,"mousemove",this._onTouchMove):(ge(q,"dragend",this),ge(Se,"dragstart",this._onDragStart));try{document.selection?Ni(function(){document.selection.empty()}):window.getSelection().removeAllRanges()}catch{}},_dragStarted:function(e,n){if(_n=!1,Se&&q){it("dragStarted",this,{evt:n}),this.nativeDraggable&&ge(document,"dragover",Af);var i=this.options;!e&&lt(q,i.dragClass,!1),lt(q,i.ghostClass,!0),ie.active=this,e&&this._appendGhost(),Ze({sortable:this,name:"start",originalEvent:n})}else this._nulling()},_emulateDragOver:function(){if(wt){this._lastX=wt.clientX,this._lastY=wt.clientY,Ra();for(var e=document.elementFromPoint(wt.clientX,wt.clientY),n=e;e&&e.shadowRoot&&(e=e.shadowRoot.elementFromPoint(wt.clientX,wt.clientY),e!==n);)n=e;if(q.parentNode[nt]._isOutsideThisEl(e),n)do{if(n[nt]){var i=void 0;if(i=n[nt]._onDragOver({clientX:wt.clientX,clientY:wt.clientY,target:e,rootEl:n}),i&&!this.options.dragoverBubble)break}e=n}while(n=wa(n));Ba()}},_onTouchMove:function(e){if(Kt){var n=this.options,i=n.fallbackTolerance,r=n.fallbackOffset,o=e.touches?e.touches[0]:e,a=ue&&vn(ue,!0),s=ue&&a&&a.a,l=ue&&a&&a.d,u=Pi&&Ye&&Da(Ye),f=(o.clientX-Kt.clientX+r.x)/(s||1)+(u?u[0]-wr[0]:0)/(s||1),c=(o.clientY-Kt.clientY+r.y)/(l||1)+(u?u[1]-wr[1]:0)/(l||1);if(!ie.active&&!_n){if(i&&Math.max(Math.abs(o.clientX-this._lastX),Math.abs(o.clientY-this._lastY))<i)return;this._onDragStart(e,!0)}if(ue){a?(a.e+=f-(br||0),a.f+=c-(yr||0)):a={a:1,b:0,c:0,d:1,e:f,f:c};var d="matrix(".concat(a.a,",").concat(a.b,",").concat(a.c,",").concat(a.d,",").concat(a.e,",").concat(a.f,")");ae(ue,"webkitTransform",d),ae(ue,"mozTransform",d),ae(ue,"msTransform",d),ae(ue,"transform",d),br=f,yr=c,wt=o}e.cancelable&&e.preventDefault()}},_appendGhost:function(){if(!ue){var e=this.options.fallbackOnBody?document.body:Se,n=Me(q,!0,Pi,!0,e),i=this.options;if(Pi){for(Ye=e;ae(Ye,"position")==="static"&&ae(Ye,"transform")==="none"&&Ye!==document;)Ye=Ye.parentNode;Ye!==document.body&&Ye!==document.documentElement?(Ye===document&&(Ye=Tt()),n.top+=Ye.scrollTop,n.left+=Ye.scrollLeft):Ye=Tt(),wr=Da(Ye)}ue=q.cloneNode(!0),lt(ue,i.ghostClass,!1),lt(ue,i.fallbackClass,!0),lt(ue,i.dragClass,!0),ae(ue,"transition",""),ae(ue,"transform",""),ae(ue,"box-sizing","border-box"),ae(ue,"margin",0),ae(ue,"top",n.top),ae(ue,"left",n.left),ae(ue,"width",n.width),ae(ue,"height",n.height),ae(ue,"opacity","0.8"),ae(ue,"position",Pi?"absolute":"fixed"),ae(ue,"zIndex","100000"),ae(ue,"pointerEvents","none"),ie.ghost=ue,e.appendChild(ue),ae(ue,"transform-origin",Oa/parseInt(ue.style.width)*100+"% "+La/parseInt(ue.style.height)*100+"%")}},_onDragStart:function(e,n){var i=this,r=e.dataTransfer,o=i.options;if(it("dragStart",this,{evt:e}),ie.eventCanceled){this._onDrop();return}it("setupClone",this),ie.eventCanceled||(Te=Ta(q),Te.removeAttribute("id"),Te.draggable=!1,Te.style["will-change"]="",this._hideClone(),lt(Te,this.options.chosenClass,!1),ie.clone=Te),i.cloneId=Ni(function(){it("clone",i),!ie.eventCanceled&&(i.options.removeCloneOnHide||Se.insertBefore(Te,q),i._hideClone(),Ze({sortable:i,name:"clone"}))}),!n&&lt(q,o.dragClass,!0),n?(Ci=!0,i._loopId=setInterval(i._emulateDragOver,50)):(me(document,"mouseup",i._onDrop),me(document,"touchend",i._onDrop),me(document,"touchcancel",i._onDrop),r&&(r.effectAllowed="move",o.setData&&o.setData.call(i,r,q)),ge(document,"drop",i),ae(q,"transform","translateZ(0)")),_n=!0,i._dragStartId=Ni(i._dragStarted.bind(i,n,e)),ge(document,"selectstart",i),Yn=!0,window.getSelection().removeAllRanges(),Gn&&ae(document.body,"user-select","none")},_onDragOver:function(e){var n=this.el,i=e.target,r,o,a,s=this.options,l=s.group,u=ie.active,f=Si===l,c=s.sort,d=Ve||u,h,p=this,v=!1;if(_r)return;function g($,ee){it($,p,Ct({evt:e,isOwner:f,axis:h?"vertical":"horizontal",revert:a,dragRect:r,targetRect:o,canSort:c,fromSortable:d,target:i,completed:_,onMove:function(we,Re){return Mi(Se,n,q,r,we,Me(we),e,Re)},changed:D},ee))}function y(){g("dragOverAnimationCapture"),p.captureAnimationState(),p!==d&&d.captureAnimationState()}function _($){return g("dragOverCompleted",{insertion:$}),$&&(f?u._hideClone():u._showClone(p),p!==d&&(lt(q,Ve?Ve.options.ghostClass:u.options.ghostClass,!1),lt(q,s.ghostClass,!0)),Ve!==p&&p!==ie.active?Ve=p:p===ie.active&&Ve&&(Ve=null),d===p&&(p._ignoreWhileAnimating=i),p.animateAll(function(){g("dragOverAnimationComplete"),p._ignoreWhileAnimating=null}),p!==d&&(d.animateAll(),d._ignoreWhileAnimating=null)),(i===q&&!q.animated||i===n&&!i.animated)&&(En=null),!s.dragoverBubble&&!e.rootEl&&i!==document&&(q.parentNode[nt]._isOutsideThisEl(e.target),!$&&Qt(e)),!s.dragoverBubble&&e.stopPropagation&&e.stopPropagation(),v=!0}function D(){st=ht(q),Gt=ht(q,s.draggable),Ze({sortable:p,name:"change",toEl:n,newIndex:st,newDraggableIndex:Gt,originalEvent:e})}if(e.preventDefault!==void 0&&e.cancelable&&e.preventDefault(),i=yt(i,s.draggable,n,!0),g("dragOver"),ie.eventCanceled)return v;if(q.contains(e.target)||i.animated&&i.animatingX&&i.animatingY||p._ignoreWhileAnimating===i)return _(!1);if(Ci=!1,u&&!s.disabled&&(f?c||(a=Oe!==Se):Ve===this||(this.lastPutMode=Si.checkPull(this,u,q,e))&&l.checkPut(this,u,q,e))){if(h=this._getDirection(e,i)==="vertical",r=Me(q),g("dragOverValid"),ie.eventCanceled)return v;if(a)return Oe=Se,y(),this._hideClone(),g("revert"),ie.eventCanceled||(Zt?Se.insertBefore(q,Zt):Se.appendChild(q)),_(!0);var m=mr(n,s.draggable);if(!m||Pf(e,h,this)&&!m.animated){if(m===q)return _(!1);if(m&&n===e.target&&(i=m),i&&(o=Me(i)),Mi(Se,n,q,r,i,o,e,!!i)!==!1)return y(),m&&m.nextSibling?n.insertBefore(q,m.nextSibling):n.appendChild(q),Oe=n,D(),_(!0)}else if(m&&If(e,h,this)){var A=bn(n,0,s,!0);if(A===q)return _(!1);if(i=A,o=Me(i),Mi(Se,n,q,r,i,o,e,!1)!==!1)return y(),n.insertBefore(q,A),Oe=n,D(),_(!0)}else if(i.parentNode===n){o=Me(i);var k=0,L,S=q.parentNode!==n,w=!Cf(q.animated&&q.toRect||r,i.animated&&i.toRect||o,h),T=h?"top":"left",P=ka(i,"top","top")||ka(q,"top","top"),N=P?P.scrollTop:void 0;En!==i&&(L=o[T],Zn=!1,Ai=!w&&s.invertSwap||S),k=Mf(e,i,o,h,w?1:s.swapThreshold,s.invertedSwapThreshold==null?s.swapThreshold:s.invertedSwapThreshold,Ai,En===i);var B;if(k!==0){var F=ht(q);do F-=k,B=Oe.children[F];while(B&&(ae(B,"display")==="none"||B===ue))}if(k===0||B===i)return _(!1);En=i,Jn=k;var I=i.nextElementSibling,M=!1;M=k===1;var V=Mi(Se,n,q,r,i,o,e,M);if(V!==!1)return(V===1||V===-1)&&(M=V===1),_r=!0,setTimeout(Lf,30),y(),M&&!I?n.appendChild(q):i.parentNode.insertBefore(q,M?I:i),P&&Ca(P,0,N-P.scrollTop),Oe=q.parentNode,L!==void 0&&!Ai&&(Oi=Math.abs(L-Me(i)[T])),D(),_(!0)}if(n.contains(q))return _(!1)}return!1},_ignoreWhileAnimating:null,_offMoveEvents:function(){me(document,"mousemove",this._onTouchMove),me(document,"touchmove",this._onTouchMove),me(document,"pointermove",this._onTouchMove),me(document,"dragover",Qt),me(document,"mousemove",Qt),me(document,"touchmove",Qt)},_offUpEvents:function(){var e=this.el.ownerDocument;me(e,"mouseup",this._onDrop),me(e,"touchend",this._onDrop),me(e,"pointerup",this._onDrop),me(e,"pointercancel",this._onDrop),me(e,"touchcancel",this._onDrop),me(document,"selectstart",this)},_onDrop:function(e){var n=this.el,i=this.options;if(st=ht(q),Gt=ht(q,i.draggable),it("drop",this,{evt:e}),Oe=q&&q.parentNode,st=ht(q),Gt=ht(q,i.draggable),ie.eventCanceled){this._nulling();return}_n=!1,Ai=!1,Zn=!1,clearInterval(this._loopId),clearTimeout(this._dragStartTimer),kr(this.cloneId),kr(this._dragStartId),this.nativeDraggable&&(me(document,"drop",this),me(n,"dragstart",this._onDragStart)),this._offMoveEvents(),this._offUpEvents(),Gn&&ae(document.body,"user-select",""),ae(q,"transform",""),e&&(Yn&&(e.cancelable&&e.preventDefault(),!i.dropBubble&&e.stopPropagation()),ue&&ue.parentNode&&ue.parentNode.removeChild(ue),(Se===Oe||Ve&&Ve.lastPutMode!=="clone")&&Te&&Te.parentNode&&Te.parentNode.removeChild(Te),q&&(this.nativeDraggable&&me(q,"dragend",this),Er(q),q.style["will-change"]="",Yn&&!_n&&lt(q,Ve?Ve.options.ghostClass:this.options.ghostClass,!1),lt(q,this.options.chosenClass,!1),Ze({sortable:this,name:"unchoose",toEl:Oe,newIndex:null,newDraggableIndex:null,originalEvent:e}),Se!==Oe?(st>=0&&(Ze({rootEl:Oe,name:"add",toEl:Oe,fromEl:Se,originalEvent:e}),Ze({sortable:this,name:"remove",toEl:Oe,originalEvent:e}),Ze({rootEl:Oe,name:"sort",toEl:Oe,fromEl:Se,originalEvent:e}),Ze({sortable:this,name:"sort",toEl:Oe,originalEvent:e})),Ve&&Ve.save()):st!==wn&&st>=0&&(Ze({sortable:this,name:"update",toEl:Oe,originalEvent:e}),Ze({sortable:this,name:"sort",toEl:Oe,originalEvent:e})),ie.active&&((st==null||st===-1)&&(st=wn,Gt=Xn),Ze({sortable:this,name:"end",toEl:Oe,originalEvent:e}),this.save()))),this._nulling()},_nulling:function(){it("nulling",this),Se=q=Oe=ue=Zt=Te=Di=qt=Kt=wt=Yn=st=Gt=wn=Xn=En=Jn=Ve=Si=ie.dragged=ie.ghost=ie.clone=ie.active=null,Li.forEach(function(e){e.checked=!0}),Li.length=br=yr=0},handleEvent:function(e){switch(e.type){case"drop":case"dragend":this._onDrop(e);break;case"dragenter":case"dragover":q&&(this._onDragOver(e),Of(e));break;case"selectstart":e.preventDefault();break}},toArray:function(){for(var e=[],n,i=this.el.children,r=0,o=i.length,a=this.options;r<o;r++)n=i[r],yt(n,a.draggable,this.el,!1)&&e.push(n.getAttribute(a.dataIdAttr)||Rf(n));return e},sort:function(e,n){var i={},r=this.el;this.toArray().forEach(function(o,a){var s=r.children[a];yt(s,this.options.draggable,r,!1)&&(i[o]=s)},this),n&&this.captureAnimationState(),e.forEach(function(o){i[o]&&(r.removeChild(i[o]),r.appendChild(i[o]))}),n&&this.animateAll()},save:function(){var e=this.options.store;e&&e.set&&e.set(this)},closest:function(e,n){return yt(e,n||this.options.draggable,this.el,!1)},option:function(e,n){var i=this.options;if(n===void 0)return i[e];var r=Un.modifyOption(this,e,n);typeof r<"u"?i[e]=r:i[e]=n,e==="group"&&Na(i)},destroy:function(){it("destroy",this);var e=this.el;e[nt]=null,me(e,"mousedown",this._onTapStart),me(e,"touchstart",this._onTapStart),me(e,"pointerdown",this._onTapStart),this.nativeDraggable&&(me(e,"dragover",this),me(e,"dragenter",this)),Array.prototype.forEach.call(e.querySelectorAll("[draggable]"),function(n){n.removeAttribute("draggable")}),this._onDrop(),this._disableDelayedDragEvents(),Ti.splice(Ti.indexOf(this.el),1),this.el=e=null},_hideClone:function(){if(!qt){if(it("hideClone",this),ie.eventCanceled)return;ae(Te,"display","none"),this.options.removeCloneOnHide&&Te.parentNode&&Te.parentNode.removeChild(Te),qt=!0}},_showClone:function(e){if(e.lastPutMode!=="clone"){this._hideClone();return}if(qt){if(it("showClone",this),ie.eventCanceled)return;q.parentNode==Se&&!this.options.group.revertClone?Se.insertBefore(Te,q):Zt?Se.insertBefore(Te,Zt):Se.appendChild(Te),this.options.group.revertClone&&this.animate(q,Te),ae(Te,"display",""),qt=!1}}};function Of(t){t.dataTransfer&&(t.dataTransfer.dropEffect="move"),t.cancelable&&t.preventDefault()}function Mi(t,e,n,i,r,o,a,s){var l,u=t[nt],f=u.options.onMove,c;return window.CustomEvent&&!Rt&&!qn?l=new CustomEvent("move",{bubbles:!0,cancelable:!0}):(l=document.createEvent("Event"),l.initEvent("move",!0,!0)),l.to=e,l.from=t,l.dragged=n,l.draggedRect=i,l.related=r||e,l.relatedRect=o||Me(e),l.willInsertAfter=s,l.originalEvent=a,t.dispatchEvent(l),f&&(c=f.call(u,l,a)),c}function Er(t){t.draggable=!1}function Lf(){_r=!1}function If(t,e,n){var i=Me(bn(n.el,0,n.options,!0)),r=Aa(n.el,n.options,ue),o=10;return e?t.clientX<r.left-o||t.clientY<i.top&&t.clientX<i.right:t.clientY<r.top-o||t.clientY<i.bottom&&t.clientX<i.left}function Pf(t,e,n){var i=Me(mr(n.el,n.options.draggable)),r=Aa(n.el,n.options,ue),o=10;return e?t.clientX>r.right+o||t.clientY>i.bottom&&t.clientX>i.left:t.clientY>r.bottom+o||t.clientX>i.right&&t.clientY>i.top}function Mf(t,e,n,i,r,o,a,s){var l=i?t.clientY:t.clientX,u=i?n.height:n.width,f=i?n.top:n.left,c=i?n.bottom:n.right,d=!1;if(!a){if(s&&Oi<u*r){if(!Zn&&(Jn===1?l>f+u*o/2:l<c-u*o/2)&&(Zn=!0),Zn)d=!0;else if(Jn===1?l<f+Oi:l>c-Oi)return-Jn}else if(l>f+u*(1-r)/2&&l<c-u*(1-r)/2)return Nf(e)}return d=d||a,d&&(l<f+u*o/2||l>c-u*o/2)?l>f+u/2?1:-1:0}function Nf(t){return ht(q)<ht(t)?1:-1}function Rf(t){for(var e=t.tagName+t.className+t.src+t.href+t.textContent,n=e.length,i=0;n--;)i+=e.charCodeAt(n);return i.toString(36)}function Bf(t){Li.length=0;for(var e=t.getElementsByTagName("input"),n=e.length;n--;){var i=e[n];i.checked&&Li.push(i)}}function Ni(t){return setTimeout(t,0)}function kr(t){return clearTimeout(t)}Ii&&ge(document,"touchmove",function(t){(ie.active||_n)&&t.cancelable&&t.preventDefault()}),ie.utils={on:ge,off:me,css:ae,find:Ea,is:function(e,n){return!!yt(e,n,e,!1)},extend:bf,throttle:Sa,closest:yt,toggleClass:lt,clone:Ta,index:ht,nextTick:Ni,cancelNextTick:kr,detectDirection:Ma,getChild:bn,expando:nt},ie.get=function(t){return t[nt]},ie.mount=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];e[0].constructor===Array&&(e=e[0]),e.forEach(function(i){if(!i.prototype||!i.prototype.constructor)throw"Sortable: Mounted plugin must be a constructor function, not ".concat({}.toString.call(i));i.utils&&(ie.utils=Ct(Ct({},ie.utils),i.utils)),Un.mount(i)})},ie.create=function(t,e){return new ie(t,e)},ie.version=gf;var Ne=[],Kn,Dr,Sr=!1,Cr,Tr,Ri,Qn;function Ff(){function t(){this.defaults={scroll:!0,forceAutoScrollFallback:!1,scrollSensitivity:30,scrollSpeed:10,bubbleScroll:!0};for(var e in this)e.charAt(0)==="_"&&typeof this[e]=="function"&&(this[e]=this[e].bind(this))}return t.prototype={dragStarted:function(n){var i=n.originalEvent;this.sortable.nativeDraggable?ge(document,"dragover",this._handleAutoScroll):this.options.supportPointer?ge(document,"pointermove",this._handleFallbackAutoScroll):i.touches?ge(document,"touchmove",this._handleFallbackAutoScroll):ge(document,"mousemove",this._handleFallbackAutoScroll)},dragOverCompleted:function(n){var i=n.originalEvent;!this.options.dragOverBubble&&!i.rootEl&&this._handleAutoScroll(i)},drop:function(){this.sortable.nativeDraggable?me(document,"dragover",this._handleAutoScroll):(me(document,"pointermove",this._handleFallbackAutoScroll),me(document,"touchmove",this._handleFallbackAutoScroll),me(document,"mousemove",this._handleFallbackAutoScroll)),Fa(),Bi(),yf()},nulling:function(){Ri=Dr=Kn=Sr=Qn=Cr=Tr=null,Ne.length=0},_handleFallbackAutoScroll:function(n){this._handleAutoScroll(n,!0)},_handleAutoScroll:function(n,i){var r=this,o=(n.touches?n.touches[0]:n).clientX,a=(n.touches?n.touches[0]:n).clientY,s=document.elementFromPoint(o,a);if(Ri=n,i||this.options.forceAutoScrollFallback||qn||Rt||Gn){Ar(n,this.options,s,i);var l=zt(s,!0);Sr&&(!Qn||o!==Cr||a!==Tr)&&(Qn&&Fa(),Qn=setInterval(function(){var u=zt(document.elementFromPoint(o,a),!0);u!==l&&(l=u,Bi()),Ar(n,r.options,u,i)},10),Cr=o,Tr=a)}else{if(!this.options.bubbleScroll||zt(s,!0)===Tt()){Bi();return}Ar(n,this.options,zt(s,!1),!1)}}},Mt(t,{pluginName:"scroll",initializeByDefault:!0})}function Bi(){Ne.forEach(function(t){clearInterval(t.pid)}),Ne=[]}function Fa(){clearInterval(Qn)}var Ar=Sa(function(t,e,n,i){if(e.scroll){var r=(t.touches?t.touches[0]:t).clientX,o=(t.touches?t.touches[0]:t).clientY,a=e.scrollSensitivity,s=e.scrollSpeed,l=Tt(),u=!1,f;Dr!==n&&(Dr=n,Bi(),Kn=e.scroll,f=e.scrollFn,Kn===!0&&(Kn=zt(n,!0)));var c=0,d=Kn;do{var h=d,p=Me(h),v=p.top,g=p.bottom,y=p.left,_=p.right,D=p.width,m=p.height,A=void 0,k=void 0,L=h.scrollWidth,S=h.scrollHeight,w=ae(h),T=h.scrollLeft,P=h.scrollTop;h===l?(A=D<L&&(w.overflowX==="auto"||w.overflowX==="scroll"||w.overflowX==="visible"),k=m<S&&(w.overflowY==="auto"||w.overflowY==="scroll"||w.overflowY==="visible")):(A=D<L&&(w.overflowX==="auto"||w.overflowX==="scroll"),k=m<S&&(w.overflowY==="auto"||w.overflowY==="scroll"));var N=A&&(Math.abs(_-r)<=a&&T+D<L)-(Math.abs(y-r)<=a&&!!T),B=k&&(Math.abs(g-o)<=a&&P+m<S)-(Math.abs(v-o)<=a&&!!P);if(!Ne[c])for(var F=0;F<=c;F++)Ne[F]||(Ne[F]={});(Ne[c].vx!=N||Ne[c].vy!=B||Ne[c].el!==h)&&(Ne[c].el=h,Ne[c].vx=N,Ne[c].vy=B,clearInterval(Ne[c].pid),(N!=0||B!=0)&&(u=!0,Ne[c].pid=setInterval((function(){i&&this.layer===0&&ie.active._onTouchMove(Ri);var I=Ne[this.layer].vy?Ne[this.layer].vy*s:0,M=Ne[this.layer].vx?Ne[this.layer].vx*s:0;typeof f=="function"&&f.call(ie.dragged.parentNode[nt],M,I,t,Ri,Ne[this.layer].el)!=="continue"||Ca(Ne[this.layer].el,M,I)}).bind({layer:c}),24))),c++}while(e.bubbleScroll&&d!==l&&(d=zt(d,!1)));Sr=u}},30),xa=function(e){var n=e.originalEvent,i=e.putSortable,r=e.dragEl,o=e.activeSortable,a=e.dispatchSortableEvent,s=e.hideGhostForTarget,l=e.unhideGhostForTarget;if(n){var u=i||o;s();var f=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:n,c=document.elementFromPoint(f.clientX,f.clientY);l(),u&&!u.el.contains(c)&&(a("spill"),this.onSpill({dragEl:r,putSortable:i}))}};function Or(){}Or.prototype={startIndex:null,dragStart:function(e){var n=e.oldDraggableIndex;this.startIndex=n},onSpill:function(e){var n=e.dragEl,i=e.putSortable;this.sortable.captureAnimationState(),i&&i.captureAnimationState();var r=bn(this.sortable.el,this.startIndex,this.options);r?this.sortable.el.insertBefore(n,r):this.sortable.el.appendChild(n),this.sortable.animateAll(),i&&i.animateAll()},drop:xa},Mt(Or,{pluginName:"revertOnSpill"});function Lr(){}Lr.prototype={onSpill:function(e){var n=e.dragEl,i=e.putSortable,r=i||this.sortable;r.captureAnimationState(),n.parentNode&&n.parentNode.removeChild(n),r.animateAll()},drop:xa},Mt(Lr,{pluginName:"removeOnSpill"}),ie.mount(new Ff),ie.mount(Lr,Or);function Ha(t,e,n){const i=t.slice();return i[16]=e[n],i}function Wa(t,e,n){const i=t.slice();return i[19]=e[n],i}function ja(t,e,n){const i=t.slice();return i[22]=e[n],i}function za(t){let e,n,i,r;function o(){return t[11](t[22])}return{c(){e=C("div"),n=C("a"),n.innerHTML='<i class="fas fa-pencil-alt fa-sm"></i>',b(n,"href","javascript:"),b(n,"data-action","editField"),b(n,"class","edit-field svelte-1azk92t"),b(e,"class","right svelte-1azk92t")},m(a,s){Y(a,e,s),E(e,n),i||(r=fe(n,"click",o),i=!0)},p(a,s){t=a},d(a){a&&X(e),i=!1,r()}}}function qa(t,e){let n,i,r,o=e[22].label+"",a,s,l,u=e[2].editable&&za(e),f=[e[10](e[22])],c={};for(let d=0;d<f.length;d+=1)c=xn(c,f[d]);return{key:t,first:null,c(){n=C("li"),i=C("div"),r=C("label"),a=Ee(o),s=j(),u&&u.c(),l=j(),b(r,"class","svelte-1azk92t"),b(i,"class","left svelte-1azk92t"),Wt(n,c),ne(n,"svelte-1azk92t",!0),this.first=n},m(d,h){Y(d,n,h),E(n,i),E(i,r),E(r,a),E(n,s),u&&u.m(n,null),E(n,l)},p(d,h){e=d,h&1&&o!==(o=e[22].label+"")&&Fe(a,o),e[2].editable?u?u.p(e,h):(u=za(e),u.c(),u.m(n,l)):u&&(u.d(1),u=null),Wt(n,c=yi(f,[h&1&&e[10](e[22])])),ne(n,"svelte-1azk92t",!0)},d(d){d&&X(n),u&&u.d()}}}function Ga(t){let e,n=z.translate(t[16].name,"scopeNames")+"",i;return{c(){e=C("span"),i=Ee(n),b(e,"class","title svelte-1azk92t")},m(r,o){Y(r,e,o),E(e,i)},p(r,o){o&2&&n!==(n=z.translate(r[16].name,"scopeNames")+"")&&Fe(i,n)},d(r){r&&X(e)}}}function Va(t,e){let n,i,r,o=e[19].label+"",a,s,l=[e[10](e[19])],u={};for(let f=0;f<l.length;f+=1)u=xn(u,l[f]);return{key:t,first:null,c(){n=C("li"),i=C("div"),r=C("label"),a=Ee(o),s=j(),b(r,"class","svelte-1azk92t"),b(i,"class","left svelte-1azk92t"),Wt(n,u),ne(n,"svelte-1azk92t",!0),this.first=n},m(f,c){Y(f,n,c),E(n,i),E(i,r),E(r,a),E(n,s)},p(f,c){e=f,c&2&&o!==(o=e[19].label+"")&&Fe(a,o),Wt(n,u=yi(l,[c&2&&e[10](e[19])])),ne(n,"svelte-1azk92t",!0)},d(f){f&&X(n)}}}function Ua(t,e){let n,i,r,o=[],a=new Map,s,l,u=e[1].length>1&&Ga(e),f=_e(e[16].fields);const c=d=>d[19].name;for(let d=0;d<f.length;d+=1){let h=Wa(e,f,d),p=c(h);a.set(p,o[d]=Va(p,h))}return{key:t,first:null,c(){n=C("div"),u&&u.c(),i=j(),r=C("ul");for(let d=0;d<o.length;d+=1)o[d].c();l=j(),b(r,"class","disabled connected svelte-1azk92t"),b(r,"data-name",s=e[16].name),b(n,"class","svelte-1azk92t"),ne(n,"group",e[1].length>1),this.first=n},m(d,h){Y(d,n,h),u&&u.m(n,null),E(n,i),E(n,r);for(let p=0;p<o.length;p+=1)o[p]&&o[p].m(r,null);E(n,l)},p(d,h){e=d,e[1].length>1?u?u.p(e,h):(u=Ga(e),u.c(),u.m(n,i)):u&&(u.d(1),u=null),h&1026&&(f=_e(e[16].fields),o=It(o,h,c,1,e,f,a,r,Lt,Va,null,Wa)),h&2&&s!==(s=e[16].name)&&b(r,"data-name",s),h&2&&ne(n,"group",e[1].length>1)},d(d){d&&X(n),u&&u.d();for(let h=0;h<o.length;h+=1)o[h].d()}}}function xf(t){let e,n,i,r,o,a,s,l=[],u=new Map,f,c,d,h,p,v,g,y,_=[],D=new Map,m=_e(t[0].sort(Ya));const A=S=>S[22].name;for(let S=0;S<m.length;S+=1){let w=ja(t,m,S),T=A(w);u.set(T,l[S]=qa(T,w))}let k=_e(t[1]);const L=S=>S[16].name;for(let S=0;S<k.length;S+=1){let w=Ha(t,k,S),T=L(w);D.set(T,_[S]=Ua(T,w))}return{c(){e=C("div"),n=C("div"),i=C("div"),r=C("header"),r.textContent=`${z.translate("Selected","labels","Admin")}`,o=j(),a=C("div"),s=C("ul");for(let S=0;S<l.length;S+=1)l[S].c();f=j(),c=C("div"),d=j(),h=C("div"),p=C("div"),v=C("header"),v.textContent=`${z.translate("Available","labels","Admin")}`,g=j(),y=C("div");for(let S=0;S<_.length;S+=1)_[S].c();b(r,"class","svelte-1azk92t"),b(s,"class","enabled connected svelte-1azk92t"),b(a,"class","rows-wrapper svelte-1azk92t"),b(i,"class","well svelte-1azk92t"),b(n,"class","col-sm-5 svelte-1azk92t"),b(c,"class","col-sm-1 svelte-1azk92t"),se(c,"width","35px"),b(v,"class","svelte-1azk92t"),b(y,"class","rows-wrapper svelte-1azk92t"),b(p,"class","well svelte-1azk92t"),b(h,"class","col-sm-5 svelte-1azk92t"),b(e,"id","layout"),b(e,"class","row svelte-1azk92t")},m(S,w){Y(S,e,w),E(e,n),E(n,i),E(i,r),E(i,o),E(i,a),E(a,s);for(let T=0;T<l.length;T+=1)l[T]&&l[T].m(s,null);E(e,f),E(e,c),E(e,d),E(e,h),E(h,p),E(p,v),E(p,g),E(p,y);for(let T=0;T<_.length;T+=1)_[T]&&_[T].m(y,null);t[12](e)},p(S,w){w&1285&&(m=_e(S[0].sort(Ya)),l=It(l,w,A,1,S,m,u,s,Lt,qa,null,ja)),w&1026&&(k=_e(S[1]),_=It(_,w,L,1,S,k,D,y,Lt,Ua,null,Ha))},d(S){S&&X(e);for(let w=0;w<l.length;w+=1)l[w].d();for(let w=0;w<_.length;w+=1)_[w].d();t[12](null)}}}function Hf(t){let e,n,i={params:t[2],validate:t[9],fetch:t[4],loadLayout:t[3],$$slots:{default:[xf]},$$scope:{ctx:t}};return e=new ma({props:i}),t[13](e),e.$on("ready",t[7]),{c(){St(e.$$.fragment)},m(r,o){vt(e,r,o),n=!0},p(r,[o]){const a={};o&4&&(a.params=r[2]),o&16&&(a.fetch=r[4]),o&8&&(a.loadLayout=r[3]),o&33554471&&(a.$$scope={dirty:o,ctx:r}),e.$set(a)},i(r){n||(He(e.$$.fragment,r),n=!0)},o(r){Xe(e.$$.fragment,r),n=!1},d(r){t[13](null),bt(e,r)}}}function Wf(t){return t.toLowerCase()}function Xa(t,e){return t[e]}const Ya=(t,e)=>t.sortOrder-e.sortOrder;function jf(t,e,n){let i,r,o,{params:a}=e,{selectedFields:s=[]}=e,{availableGroups:l=[]}=e,{loadLayout:u}=e,f;ar(()=>{r&&r.destroy(),o&&o.forEach(D=>D.destroy())});function c(){const D={group:"fields",draggable:"li",animation:150};r=ie.create(i.querySelector("ul.enabled"),{...D,onEnd(m){const A=m.to.closest(".connected");if(A.classList.contains("enabled")){const[k]=s.splice(m.oldIndex,1);s.splice(m.newIndex,0,k)}else{const k=s[m.oldIndex];s.splice(m.oldIndex,1);let L=l.find(S=>!S.prefix);if(l.forEach(S=>{S.prefix&&k.name.startsWith(S.prefix)&&(L=S)}),L.name!==A.attributes["data-name"].value){const S=document.querySelector(`#layout ul.disabled[data-name="${L.name}"]`);S.children.length?S.insertBefore(m.item,S.children[0]):S.appendChild(m.item),L.fields.unshift(k)}else L.fields.splice(m.newIndex,0,k);n(1,l=[...l])}n(0,s=[...s])}}),o=[];for(let m of i.querySelectorAll("ul.disabled")){const A=ie.create(m,{...D,onEnd(k){const L=k.to.closest(".connected");let S=null;if(L.classList.contains("disabled")){if(L!==m){k.oldIndex>=k.from.children.length?k.from.appendChild(k.item):k.from.insertBefore(k.item,k.from.children[k.oldIndex]);return}for(let w of l)if(w.name===L.attributes["data-name"].value){[S]=w.fields.splice(k.oldIndex,1),S&&w.fields.splice(k.newIndex,0,S);break}}else n(1,l=l.map(w=>(w.name===k.from.closest("ul").attributes["data-name"].value&&([S]=w.fields.splice(k.oldIndex,1)),w))),s.splice(k.newIndex,0,S),n(0,s=[...s])}});o.push(A)}}function d(D){a.openEditDialog(D,a.scope,a.dataAttributeList,a.dataAttributesDefs,m=>{n(0,s=s.map(A=>{if(A.name===D.name)for(let k in m)A[k]=m[k];return A}))})}let{fetch:h=()=>s}=e;function p(D){return D.length===0?(tt.notify("Layout cannot be empty","error"),!1):!0}function v(D){const m={};return a.dataAttributeList.forEach(A=>{Xa(D,A)!=null&&(m[`data-${Wf(A)}`]=Xa(D,A))}),m}const g=D=>d(D);function y(D){ze[D?"unshift":"push"](()=>{i=D,n(5,i)})}function _(D){ze[D?"unshift":"push"](()=>{f=D,n(6,f)})}return t.$$set=D=>{"params"in D&&n(2,a=D.params),"selectedFields"in D&&n(0,s=D.selectedFields),"availableGroups"in D&&n(1,l=D.availableGroups),"loadLayout"in D&&n(3,u=D.loadLayout),"fetch"in D&&n(4,h=D.fetch)},[s,l,a,u,h,i,f,c,d,p,v,g,y,_]}let Ja=class extends Ge{constructor(e){super(),qe(this,e,jf,Hf,Pe,{params:2,selectedFields:0,availableGroups:1,loadLayout:3,fetch:4})}};const Fi={upperCaseFirst(t){return t.length?t[0].toUpperCase()+t.slice(1):""}};function zf(t){let e,n,i={params:t[0],selectedFields:t[2],availableGroups:t[3],editable:qf,loadLayout:t[4]};return e=new Ja({props:i}),t[5](e),{c(){St(e.$$.fragment)},m(r,o){vt(e,r,o),n=!0},p(r,[o]){const a={};o&1&&(a.params=r[0]),o&4&&(a.selectedFields=r[2]),o&8&&(a.availableGroups=r[3]),e.$set(a)},i(r){n||(He(e.$$.fragment,r),n=!0)},o(r){Xe(e.$$.fragment,r),n=!1},d(r){t[5](null),bt(e,r)}}}let qf=!0;function Gf(t,e,n){let{params:i}=e;i.dataAttributeList||(i.dataAttributeList=["id","name","width","widthPx","link","notSortable","align","view","customLabel","editable"]),i.dataAttributesDefs||(i.dataAttributesDefs={link:{type:"bool"},width:{type:"float"},notSortable:{type:"bool"},align:{type:"enum",options:["left","right"]},view:{type:"varchar",readOnly:!0},customLabel:{type:"varchar",readOnly:!0},widthPx:{type:"float"},name:{type:"varchar",readOnly:!0},editable:{type:"bool"}});let r,o=[],a=[];const s=[],l=[];function u(_){Pt.get(i.scope,i.type,i.relatedScope,i.layoutProfileId,D=>{_&&(p(D.layout),_(D))},!1)}function f(_,D){return D==="_self"?z.translate(_,"scopeNamesPlural","Global"):D==="_bookmark"?z.translate("Bookmark","scopeNamesPlural","Global"):z.translate(D,"fields",_)}function c(){const _=[];return i.type==="leftSidebar"&&(ce.get(["scopes",i.scope,"bookmarkDisabled"])||_.push("_bookmark"),ce.get(["scopes",i.scope,"type"])==="Hierarchy"&&!ce.get(["scopes",i.scope,"disableHierarchy"])&&_.push("_self")),_}function d(_,D){return ce.get(["entityDefs",_,"fields",D,"type"])??""}function h(_,D){const m=D.split("."),A=ce.get(["entityDefs",m[0],"links",m[1]])??{};return A.entity===_&&A.relationName?Espo.utils.upperCaseFirst(A.relationName):""}function p(_){const D=[];let m="";if(i.relatedScope&&i.type==="list"&&(m=h(i.scope,i.relatedScope),m)){const S={name:m,scope:m,prefix:m+"__"};let w=Object.keys(ce.get(["entityDefs",m,"fields"])||{}).filter(T=>v(d(m,T))&&g(m,T));w=w.filter(T=>!(ce.get(["entityDefs",m,"fields",T,"relationField"])??!1)),w=w.sort((T,P)=>f(m,T).localeCompare(f(m,P))).map(T=>S.prefix+T),S.fields=w,D.push(S)}let A=Object.keys(ce.get(["entityDefs",i.scope,"fields"])||{}).filter(S=>v(d(i.scope,S))&&g(i.scope,S));A.push(...c()),A=A.sort((S,w)=>f(i.scope,S).localeCompare(f(i.scope,w))),D.unshift({name:i.scope,scope:i.scope,fields:A});const k=[],L=[];for(const S of D)S.fields=S.fields.map(w=>{const T=f(S.scope,S.prefix?w.replace(S.prefix,""):w);S.prefix||(k.includes(T)&&L.push(T),k.push(T));const P={name:w,label:T},N=ce.get(["entityDefs",S.scope,"fields",w,"type"]);return N&&ce.get(["fields",N,"notSortable"])&&(P.notSortable=!0),P});n(2,o=_),D[0].fields.forEach(S=>{L.includes(S.label)&&(S.label+=` (${S.name})`);const w=o.find(T=>!T.label&&T.name===S.name);w&&(w.label=S.label)}),D[1]&&D[1].fields.forEach(S=>{k.includes(S.label)&&(S.label+=" (Relation)");const w=o.find(T=>!T.label&&T.name===S.name);w&&(w.label=S.label)});for(const S of D)S.fields=S.fields.filter(w=>!o.find(T=>T.name===w.name));n(3,a=D.reverse())}function v(_){return i.fieldTypes?i.fieldTypes.includes(_):!0}function g(_,D){if(s.includes(D)||l.includes(d(_,D)))return!1;const m=["disabled",`layout${Fi.upperCaseFirst(i.type)}Disabled`];i.reelType&&m.push(`layout${Fi.upperCaseFirst(i.reelType)}Disabled`);for(let A of m)if(ce.get(["entityDefs",_,"fields",D,A]))return!1;return!0}function y(_){ze[_?"unshift":"push"](()=>{r=_,n(1,r)})}return t.$$set=_=>{"params"in _&&n(0,i=_.params)},[i,r,o,a,u,y]}class Ir extends Ge{constructor(e){super(),qe(this,e,Gf,zf,Pe,{params:0})}}function Vf(t){let e,n;return e=new Ja({props:{params:t[0],selectedFields:t[1],availableGroups:t[2],loadLayout:t[3]}}),{c(){St(e.$$.fragment)},m(i,r){vt(e,i,r),n=!0},p(i,[r]){const o={};r&1&&(o.params=i[0]),r&2&&(o.selectedFields=i[1]),r&4&&(o.availableGroups=i[2]),e.$set(o)},i(i){n||(He(e.$$.fragment,i),n=!0)},o(i){Xe(e.$$.fragment,i),n=!1},d(i){bt(e,i)}}}function Uf(t,e){return!t.getLinkParam(e,"disabled")&&!t.getLinkParam(e,"layoutRelationshipsDisabled")}function Xf(t,e,n){let{params:i}=e;i.dataAttributeList||(i.dataAttributeList=["id","name","style","hiddenPerDefault"]),i.dataAttributesDefs||(i.dataAttributesDefs={style:{type:"enum",options:["default","success","danger","primary","info","warning"],translation:"LayoutManager.options.style"},hiddenPerDefault:{type:"bool"},name:{readOnly:!0}});let r=[],o=[];function a(l){pr.create(i.scope,function(u){Pt.get(i.scope,i.type,null,i.layoutProfileId,f=>{l&&(s(u,f.layout),l(f))},!1)})}function s(l,u){let f=[];for(let p in l.defs.links)["belongsTo","hasMany","hasChildren"].includes(l.defs.links[p].type)&&Uf(l,p)&&f.push(p);const c=ce.get(["clientDefs",i.scope,"bottomPanels","detail"])||[];for(let p of c)p.layoutRelationshipsDisabled||f.push(p.name);f.sort(function(p,v){let g,y,_=c.find(m=>m.name===p),D=c.find(m=>m.name===v);return p in l.defs.links?g=z.translate(p,"links",i.scope):_&&(g=z.translate(_.label,"labels",i.scope)),v in l.defs.links?y=z.translate(v,"links",i.scope):D&&(y=z.translate(D.label,"labels",i.scope)),g.localeCompare(y)});let d=[];n(1,r=[]);const h={name:i.scope,fields:[]};for(let p in u){let v=u[p],g,y=c.find(_=>_.name===v.name);typeof v=="string"||v instanceof String?g={name:v,label:y?z.translate(y.label,"labels",i.scope):z.translate(v,"links",i.scope)}:(g=v,g.label=y?z.translate(y.label,"labels",i.scope):z.translate(g.name,"links",i.scope)),i.dataAttributeList.forEach(_=>{if(_==="name"||_ in g)return;let D=ce.get(["clientDefs",i.scope,"relationshipPanels",g.name,_]);D!==null&&(g[_]=D)}),r.push(g),d.push(g.name)}for(let p of f)if(!d.includes(p)){let v=c.find(g=>g.name===p);h.fields.push({name:p,label:v?z.translate(v.label,"labels",i.scope):z.translate(p,"fields",i.scope)||z.translate(p,"links",i.scope)})}n(2,o=[h])}return t.$$set=l=>{"params"in l&&n(0,i=l.params)},[i,r,o,a]}class Yf extends Ge{constructor(e){super(),qe(this,e,Xf,Vf,Pe,{params:0})}}function Za(t,e,n){const i=t.slice();return i[43]=e[n],i}function Ka(t,e,n){const i=t.slice();return i[46]=e[n],i}function Qa(t,e,n){const i=t.slice();return i[49]=e[n],i}function $a(t,e,n){const i=t.slice();return i[52]=e[n],i}function el(t,e,n){const i=t.slice();return i[55]=e[n],i[57]=n,i}function Jf(t){let e,n,i,r,o;function a(){return t[20](t[49],t[52],t[57])}function s(...l){return t[21](t[49],t[52],t[57],...l)}return{c(){e=C("li"),n=C("a"),n.innerHTML='<i class="fas fa-minus"></i>',i=j(),b(n,"href","#"),b(n,"data-action","minusCell"),b(n,"class","remove-field svelte-t2y606"),b(e,"class","empty cell svelte-t2y606")},m(l,u){Y(l,e,u),E(e,n),E(e,i),r||(o=[fe(n,"click",Ht(a)),fe(e,"dragover",Ht(ec)),fe(e,"drop",s)],r=!0)},p(l,u){t=l},d(l){l&&X(e),r=!1,at(o)}}}function Zf(t){let e,n=t[55].label+"",i,r,o,a,s,l,u,f,c,d,h;function p(){return t[18](t[49],t[52],t[57])}function v(...g){return t[19](t[55],...g)}return{c(){e=C("li"),i=Ee(n),r=j(),o=C("a"),o.innerHTML='<i class="fas fa-times"></i>',a=j(),b(o,"href","#"),b(o,"data-action","removeField"),b(o,"class","remove-field svelte-t2y606"),b(e,"class","cell svelte-t2y606"),b(e,"draggable","true"),b(e,"data-id",s=t[55].id),b(e,"data-name",l=t[55].name),b(e,"data-full-width",u=t[55].fullWidth?"true":void 0),b(e,"data-custom-label",f=t[55].customLabel?t[55].customLabel:void 0),b(e,"data-no-label",c=t[55].noLabel)},m(g,y){Y(g,e,y),E(e,i),E(e,r),E(e,o),E(e,a),d||(h=[fe(o,"click",Ht(p)),fe(e,"dragstart",or(v))],d=!0)},p(g,y){t=g,y[0]&2&&n!==(n=t[55].label+"")&&Fe(i,n),y[0]&2&&s!==(s=t[55].id)&&b(e,"data-id",s),y[0]&2&&l!==(l=t[55].name)&&b(e,"data-name",l),y[0]&2&&u!==(u=t[55].fullWidth?"true":void 0)&&b(e,"data-full-width",u),y[0]&2&&f!==(f=t[55].customLabel?t[55].customLabel:void 0)&&b(e,"data-custom-label",f),y[0]&2&&c!==(c=t[55].noLabel)&&b(e,"data-no-label",c)},d(g){g&&X(e),d=!1,at(h)}}}function tl(t){let e;function n(o,a){return o[55]?Zf:Jf}let i=n(t),r=i(t);return{c(){r.c(),e=hi()},m(o,a){r.m(o,a),Y(o,e,a)},p(o,a){i===(i=n(o))&&r?r.p(o,a):(r.d(1),r=i(o),r&&(r.c(),r.m(e.parentNode,e)))},d(o){o&&X(e),r.d(o)}}}function nl(t,e){let n,i,r,o,a,s,l,u,f;function c(){return e[17](e[49],e[52])}let d=_e(e[52].cells),h=[];for(let p=0;p<d.length;p+=1)h[p]=tl(el(e,d,p));return{key:t,first:null,c(){n=C("li"),i=C("div"),r=C("a"),r.innerHTML='<i class="fas fa-times"></i>',o=j(),a=C("ul");for(let p=0;p<h.length;p+=1)h[p].c();s=j(),b(r,"href","#"),b(r,"data-action","removeRow"),b(r,"class","remove-row pull-right svelte-t2y606"),b(i,"class","svelte-t2y606"),b(a,"class","cells svelte-t2y606"),b(n,"class","row svelte-t2y606"),b(n,"data-number",l=e[52].number),this.first=n},m(p,v){Y(p,n,v),E(n,i),E(i,r),E(n,o),E(n,a);for(let g=0;g<h.length;g+=1)h[g]&&h[g].m(a,null);E(n,s),u||(f=[fe(r,"click",Ht(c)),fe(a,"mousedown",or(tc))],u=!0)},p(p,v){if(e=p,v[0]&5634){d=_e(e[52].cells);let g;for(g=0;g<d.length;g+=1){const y=el(e,d,g);h[g]?h[g].p(y,v):(h[g]=tl(y),h[g].c(),h[g].m(a,null))}for(;g<h.length;g+=1)h[g].d(1);h.length=d.length}v[0]&2&&l!==(l=e[52].number)&&b(n,"data-number",l)},d(p){p&&X(n),un(h,p),u=!1,at(f)}}}function il(t,e){let n,i,r,o=(e[49].customLabel||e[49].label||"")+"",a,s,l,u,f,c,d,h,p,v,g,y=[],_=new Map,D,m,A,k,L,S,w;function T(){return e[15](e[49])}function P(){return e[16](e[49])}let N=_e(e[49].rows);const B=I=>I[52].number;for(let I=0;I<N.length;I+=1){let M=$a(e,N,I),V=B(M);_.set(V,y[I]=nl(V,M))}function F(){return e[22](e[49])}return{key:t,first:null,c(){n=C("li"),i=C("header"),r=C("label"),a=Ee(o),l=Ee(` 
                                    `),u=C("a"),u.innerHTML='<i class="fas fa-pencil-alt fa-sm"></i>',f=j(),c=C("a"),d=C("i"),v=j(),g=C("ul");for(let I=0;I<y.length;I+=1)y[I].c();D=j(),m=C("div"),A=C("a"),A.innerHTML='<i class="fas fa-plus"></i>',k=j(),b(r,"data-is-custom",s=e[49].customLabel?"true":void 0),b(r,"class","svelte-t2y606"),b(u,"href","#"),b(u,"data-action","edit-panel-label"),b(u,"class","edit-panel-label svelte-t2y606"),b(d,"class","fas fa-times"),b(c,"href","#"),se(c,"float","right"),b(c,"data-action","removePanel"),b(c,"class","remove-panel svelte-t2y606"),b(c,"data-number",h=e[49].number),b(i,"data-name",p=e[49].name),b(i,"class","svelte-t2y606"),b(g,"class","rows svelte-t2y606"),b(A,"href","#"),b(A,"data-action","addRow"),b(A,"class","svelte-t2y606"),b(m,"class","svelte-t2y606"),b(n,"data-number",L=e[49].number),b(n,"class","panel-layout svelte-t2y606"),this.first=n},m(I,M){Y(I,n,M),E(n,i),E(i,r),E(r,a),E(i,l),E(i,u),E(i,f),E(i,c),E(c,d),E(n,v),E(n,g);for(let V=0;V<y.length;V+=1)y[V]&&y[V].m(g,null);E(n,D),E(n,m),E(m,A),E(n,k),S||(w=[fe(u,"click",Ht(T)),fe(c,"click",Ht(P)),fe(g,"mousedown",or(nc)),fe(A,"click",Ht(F))],S=!0)},p(I,M){e=I,M[0]&2&&o!==(o=(e[49].customLabel||e[49].label||"")+"")&&Fe(a,o),M[0]&2&&s!==(s=e[49].customLabel?"true":void 0)&&b(r,"data-is-custom",s),M[0]&2&&h!==(h=e[49].number)&&b(c,"data-number",h),M[0]&2&&p!==(p=e[49].name)&&b(i,"data-name",p),M[0]&5890&&(N=_e(e[49].rows),y=It(y,M,B,1,e,N,_,g,Lt,nl,null,$a)),M[0]&2&&L!==(L=e[49].number)&&b(n,"data-number",L)},d(I){I&&X(n);for(let M=0;M<y.length;M+=1)y[M].d();S=!1,at(w)}}}function rl(t){let e,n=z.translate(t[43].name,"scopeNames")+"",i;return{c(){e=C("span"),i=Ee(n),b(e,"class","title svelte-t2y606")},m(r,o){Y(r,e,o),E(e,i)},p(r,o){o[0]&4&&n!==(n=z.translate(r[43].name,"scopeNames")+"")&&Fe(i,n)},d(r){r&&X(e)}}}function ol(t,e){let n,i=e[46].label+"",r,o,a,s,l;function u(...f){return e[23](e[46],...f)}return{key:t,first:null,c(){n=C("li"),r=Ee(i),o=j(),b(n,"class","cell svelte-t2y606"),b(n,"data-name",a=e[46].name),this.first=n},m(f,c){Y(f,n,c),E(n,r),E(n,o),s||(l=fe(n,"dragstart",u),s=!0)},p(f,c){e=f,c[0]&4&&i!==(i=e[46].label+"")&&Fe(r,i),c[0]&4&&a!==(a=e[46].name)&&b(n,"data-name",a)},d(f){f&&X(n),s=!1,l()}}}function al(t,e){let n,i,r,o=[],a=new Map,s,l,u=e[2].length>1&&rl(e),f=_e(e[43].fields);const c=d=>d[46].name;for(let d=0;d<f.length;d+=1){let h=Ka(e,f,d),p=c(h);a.set(p,o[d]=ol(p,h))}return{key:t,first:null,c(){n=C("div"),u&&u.c(),i=j(),r=C("ul");for(let d=0;d<o.length;d+=1)o[d].c();l=j(),b(r,"class","disabled cells clearfix svelte-t2y606"),b(r,"data-name",s=e[43].name),b(n,"class","svelte-t2y606"),ne(n,"group",e[2].length>1),this.first=n},m(d,h){Y(d,n,h),u&&u.m(n,null),E(n,i),E(n,r);for(let p=0;p<o.length;p+=1)o[p]&&o[p].m(r,null);E(n,l)},p(d,h){e=d,e[2].length>1?u?u.p(e,h):(u=rl(e),u.c(),u.m(n,i)):u&&(u.d(1),u=null),h[0]&4&&(f=_e(e[43].fields),o=It(o,h,c,1,e,f,a,r,Lt,ol,null,Ka)),h[0]&4&&s!==(s=e[43].name)&&b(r,"data-name",s),h[0]&4&&ne(n,"group",e[2].length>1)},d(d){d&&X(n),u&&u.d();for(let h=0;h<o.length;h+=1)o[h].d()}}}function Kf(t){let e,n,i,r,o,a,s,l,u,f=[],c=new Map,d,h,p,v,g,y,_=[],D=new Map,m,A,k=_e(t[1]);const L=T=>T[49].number;for(let T=0;T<k.length;T+=1){let P=Qa(t,k,T),N=L(P);c.set(N,f[T]=il(N,P))}let S=_e(t[2]);const w=T=>T[43].name;for(let T=0;T<S.length;T+=1){let P=Za(t,S,T),N=w(P);D.set(N,_[T]=al(N,P))}return{c(){e=C("div"),n=C("div"),i=C("div"),r=C("header"),r.textContent=`${z.translate("Layout","LayoutManager")}`,o=j(),a=C("a"),a.textContent=`${z.translate("Add Panel","Admin")}`,s=j(),l=C("div"),u=C("ul");for(let T=0;T<f.length;T+=1)f[T].c();d=j(),h=C("div"),p=C("div"),v=C("header"),v.textContent=`${z.translate("Available Fields","Admin")}`,g=j(),y=C("div");for(let T=0;T<_.length;T+=1)_[T].c();b(r,"class","svelte-t2y606"),b(a,"href","#"),b(a,"class","svelte-t2y606"),b(u,"class","panels svelte-t2y606"),b(l,"class","rows-wrapper svelte-t2y606"),b(i,"class","well svelte-t2y606"),b(n,"class","col-md-8 svelte-t2y606"),b(v,"class","svelte-t2y606"),b(y,"class","rows-wrapper svelte-t2y606"),b(p,"class","well available-fields svelte-t2y606"),b(h,"class","col-md-4 svelte-t2y606"),b(e,"id","layout"),b(e,"class","row svelte-t2y606")},m(T,P){Y(T,e,P),E(e,n),E(n,i),E(i,r),E(i,o),E(i,a),E(i,s),E(i,l),E(l,u);for(let N=0;N<f.length;N+=1)f[N]&&f[N].m(u,null);E(e,d),E(e,h),E(h,p),E(p,v),E(p,g),E(p,y);for(let N=0;N<_.length;N+=1)_[N]&&_[N].m(y,null);m||(A=fe(a,"click",Ht(t[5])),m=!0)},p(T,P){P[0]&8130&&(k=_e(T[1]),f=It(f,P,L,1,T,k,c,u,Lt,il,null,Qa)),P[0]&4&&(S=_e(T[2]),_=It(_,P,w,1,T,S,D,y,Lt,al,null,Za))},d(T){T&&X(e);for(let P=0;P<f.length;P+=1)f[P].d();for(let P=0;P<_.length;P+=1)_[P].d();m=!1,A()}}}function Qf(t){let e,n;return e=new ma({props:{params:t[0],validate:t[13],fetch:t[4],loadLayout:t[3],$$slots:{default:[Kf]},$$scope:{ctx:t}}}),{c(){St(e.$$.fragment)},m(i,r){vt(e,i,r),n=!0},p(i,r){const o={};r[0]&1&&(o.params=i[0]),r[0]&6|r[1]&134217728&&(o.$$scope={dirty:r,ctx:i}),e.$set(o)},i(i){n||(He(e.$$.fragment,i),n=!0)},o(i){Xe(e.$$.fragment,i),n=!1},d(i){bt(e,i)}}}function $f(t,e){return e.prefix?t.startsWith(e.prefix):!t.includes("__")}const ec=t=>t.dataTransfer.dropEffect="move",tc=()=>{},nc=()=>{};function ic(t,e,n){let{params:i}=e,{columnCount:r=2}=e,o=["id","label","style"],a={label:{type:"varchar"},style:{type:"enum",options:["default","success","danger","primary","info","warning"],translation:"LayoutManager.options.style"}},s=[],l=[],u=[],f=-1,c=-1,d;lr();function h(W){let x;const G=[];G.push(new Promise(Z=>{Pt.get(i.scope,i.type,i.relatedScope,i.layoutProfileId,le=>{x=le,Z()},!1)})),i.type==="detail"&&G.push(new Promise(Z=>{Pt.get(i.scope,"sidePanelsDetail",null,i.layoutProfileId,le=>{d=le.layout,Z()},!1)})),Promise.all(G).then(()=>{W&&(_(x.layout),L(),pn().then(()=>{w()}),W(x))})}function p(W,x){const G=x.split("."),Z=ce.get(["entityDefs",G[0],"links",G[1]])??{};return Z.entity===W&&Z.relationName?Espo.utils.upperCaseFirst(Z.relationName):""}function v(W,x){return z.translate(x,"fields",W)}function g(W,x){return ce.get(["entityDefs",W,"fields",x,"type"])??""}function y(W){return i.fieldTypes?i.fieldTypes.includes(W):!0}function _(W){const x=[];let G="";if(i.relatedScope&&(G=p(i.scope,i.relatedScope),G)){const te={name:G,scope:G,prefix:G+"__"};let pe=Object.keys(ce.get(["entityDefs",G,"fields"])||{}).filter(be=>y(g(G,be))&&m(G,be));pe=pe.filter(be=>!(ce.get(["entityDefs",G,"fields",be,"relationField"])??!1)),pe=pe.sort((be,Ie)=>v(G,be).localeCompare(v(G,Ie))).map(be=>te.prefix+be),te.fields=pe,x.push(te)}let Z=[];const le=[];for(const te in ce.get(["entityDefs",i.scope,"fields"])||{})m(i.scope,te)&&(le.push(z.translate(te,"fields",i.scope)),Z.push(te));x.unshift({name:i.scope,scope:i.scope,fields:Z});const ye=[],Ce=[];for(const te of x)te.fields=te.fields.map(pe=>{const be=v(te.scope,te.prefix?pe.replace(te.prefix,""):pe);return te.prefix||(ye.includes(be)&&Ce.push(be),ye.push(be)),{name:pe,label:be}});n(1,l=W);let Ue=[];W.forEach((te,pe)=>{te.rows.forEach((be,Ie)=>{be&&be.forEach((We,_t)=>{_t==r||!We||Ue.push(We.name)})})}),x[0].fields.forEach(te=>{Ce.includes(te.label)&&(te.label+=` (${te.name})`);const pe=D(te.name);pe&&(pe.label=te.label)}),x[1]&&x[1].fields.forEach(te=>{te.label+=" (Relation)";const pe=D(te.name);pe&&(pe.label=te.label)});for(const te of x)te.fields=te.fields.filter(pe=>!Ue.find(be=>be===pe.name));n(2,u=x.reverse())}function D(W){for(const x of l)for(const G of x.rows)for(const Z of G)if(Z&&Z.name===W)return Z;return null}function m(W,x){if(A()&&s.includes(x))return!1;const G=["disabled",`layout${Fi.upperCaseFirst(i.type)}Disabled`];i.reelType&&G.push(`layout${Fi.upperCaseFirst(i.reelType)}Disabled`);for(let Z of G)if(ce.get(["entityDefs",W,"fields",x,Z]))return!1;return!0}function A(){if(ce.get(["clientDefs",i.scope,"defaultSidePanelDisabled"]))return!1;if(d){for(const W in d)if(W==="default"&&d[W].disabled)return!1}return!0}function k(){return l.map(W=>({...W,rows:W.rows.map(x=>x.cells)}))}function L(){f=-1,c=-1,n(1,l=l.map((W,x)=>(W.number=x,f=x,W.rows=W.rows.map(G=>({number:c++,cells:G})),W)))}function S(W){ie.create(W,{animation:150,group:"rows",draggable:"li.row",onEnd(x){const G=parseInt(x.to.closest(".panel-layout").getAttribute("data-number")),Z=parseInt(x.from.closest(".panel-layout").getAttribute("data-number"));if(Z===G)n(1,l=l.map(le=>{if(le.number===G){const[ye]=le.rows.splice(x.oldIndex,1);le.rows.splice(x.newIndex,0,ye)}return le}));else{const ye=l.find(Ce=>Ce.number===Z).rows[x.oldIndex];n(1,l=l.map(Ce=>(Ce.number===Z&&Ce.rows.splice(x.oldIndex,1),Ce.number===G&&Ce.rows.splice(x.newIndex,0,ye),Ce)))}}})}function w(){const W=document.querySelector("ul.panels");W&&ie.create(W,{animation:150,group:"panels",draggable:"li.panel-layout",onEnd(x){const G=Array.from(x.to.children);n(1,l=G.map(Z=>{const le=parseInt(Z.getAttribute("data-number"));return l.find(ye=>ye.number===le)}))}}),document.querySelectorAll("ul.rows").forEach(x=>{S(x)}),document.querySelectorAll("ul.cells.disabled").forEach(x=>{ie.create(x,{animation:150,group:"cells",draggable:"li.cell",onEnd(G){const Z=G.to.closest(".cells.disabled");if(Z&&Z!==x){G.oldIndex>=G.from.children.length?G.from.appendChild(G.item):G.from.insertBefore(G.item,G.from.children[G.oldIndex]);return}}})})}function T(){f++;const W={label:"New panel",rows:[{number:c++,cells:[!1,!1]}],number:f,name:`panel${f}`,isCustomLabel:!0};n(1,l=[...l,W]),pn().then(()=>{const x=document.querySelector(`.panel-layout[data-number="${W.number}"] > .rows`);S(x),x.scrollIntoView()})}function P(W){const x=l.find(Z=>Z.number===W);n(1,l=l.filter(Z=>Z!==x));let G=[];x.rows.forEach(Z=>{Z.cells.forEach(le=>{le&&G.push(le)})}),N(G)}function N(W){n(2,u=u.map(x=>(x.fields=[...W.filter(G=>!!G&&$f(G.name,x)),...x.fields],x)))}function B(W){n(1,l=l.map(x=>(x.number===W&&(x.rows=[...x.rows,{number:c++,cells:Array(r).fill(!1)}]),x)))}function F(W,x){n(1,l=l.map(G=>{if(G.number===W){const Z=G.rows.find(le=>le.number===x);G.rows=G.rows.filter(le=>le!=Z),N(Z.cells.filter(le=>!!le))}return G}))}function I(W,x,G){n(1,l=l.map(Z=>(Z.number===W&&(Z.rows=Z.rows.map((le,ye)=>{if(le.number===x){const Ce=le.cells[G];Ce&&N([Ce]),le.cells[G]=!1}return le})),Z)))}function M(W,x,G,Z){const le=W.dataTransfer.getData("name");let ye=null;for(const te of u)if(ye=te.fields.find(pe=>pe.name===le),ye)break;let Ce=null,Ue=null;if(ye)n(2,u=u.map(te=>(te.fields=te.fields.filter(pe=>pe!==ye),te)));else{if(l.forEach(te=>{te.rows.forEach((pe,be)=>{pe.cells.forEach(Ie=>{Ie&&Ie.name===le&&(ye=Ie,Ce=pe.number,Ue=te.number)})})}),!ye)return;n(1,l=l.map((te,pe)=>(Ue===te.number&&(te.rows=te.rows.map((be,Ie)=>(be.number===Ce&&(be.cells=be.cells.map((We,_t)=>We&&We.name===le?!1:We)),be))),te)))}n(1,l=l.map(te=>(x===te.number&&(te.rows=te.rows.map(pe=>(G===pe.number&&(pe.cells=pe.cells.map((be,Ie)=>Ie===Z?(ye.fullWidth&&pe.cells.length>1&&delete ye.fullWidth,ye):be)),pe))),te)))}function V(W){i.onEditPanel(W,o,a,x=>{n(1,l=l.map(G=>(G.number===W.number&&o.forEach(Z=>{W[Z]=x[Z]}),G)))})}function $(W,x,G){n(1,l=l.map(Z=>(W===Z.number&&(Z.rows=Z.rows.map(le=>{if(x===le.number){const ye=le.cells.filter((Ce,Ue)=>Ue!==G);ye.length===1&&ye[0]&&(ye[0].fullWidth=!0),le.cells=ye}return le})),Z)))}function ee(W){let x=0;return W.forEach(G=>{G.rows.forEach(Z=>{Z.forEach(le=>{le&&x++})})}),x===0?(tt.notify("Layout cannot be empty.","error"),!1):!0}const ke=W=>V(W),we=W=>P(W.number),Re=(W,x)=>F(W.number,x.number),Ke=(W,x,G)=>I(W.number,x.number,G),De=(W,x)=>{x.dataTransfer.setData("name",W.name)},Le=(W,x,G)=>$(W.number,x.number,G),rt=(W,x,G,Z)=>M(Z,W.number,x.number,G),mt=W=>B(W.number),ut=(W,x)=>{x.dataTransfer.setData("name",W.name)};return t.$$set=W=>{"params"in W&&n(0,i=W.params),"columnCount"in W&&n(14,r=W.columnCount)},[i,l,u,h,k,T,P,B,F,I,M,V,$,ee,r,ke,we,Re,Ke,De,Le,rt,mt,ut]}class rc extends Ge{constructor(e){super(),qe(this,e,ic,Qf,Pe,{params:0,columnCount:14},null,[-1,-1])}}function oc(t){let e,n;return e=new t[1]({props:{params:t[0],viewType:t[2]}}),{c(){St(e.$$.fragment)},m(i,r){vt(e,i,r),n=!0},p(i,[r]){const o={};r&1&&(o.params=i[0]),e.$set(o)},i(i){n||(He(e.$$.fragment,i),n=!0)},o(i){Xe(e.$$.fragment,i),n=!1},d(i){bt(e,i)}}}function ac(t,e,n){let{params:i}=e,r,o;const a=ce.get(["clientDefs",i.scope,"additionalLayouts",i.type])||i.type;switch(a&&(i.reelType=a),t.$$set=s=>{"params"in s&&n(0,i=s.params)},a){case"list":n(1,r=Ir);break;case"leftSidebar":n(1,r=Ir),n(0,i.fieldTypes=["link","linkMultiple"],i);break;case"kanban":n(1,r=Ir),n(0,i.dataAttributeList=["id","name","link","align","view","isLarge","cssStyle"],i),n(0,i.dataAttributesDefs={link:{type:"bool"},isLarge:{type:"bool"},width:{type:"float"},cssStyle:{type:"varchar"},align:{type:"enum",options:["left","right"]},view:{type:"varchar",readOnly:!0},name:{type:"varchar",readOnly:!0}},i);break;case"relationships":n(1,r=Yf);break;case"rightSideView":case"detail":n(1,r=rc);break}return[i,r,o]}class lc extends Ge{constructor(e){super(),qe(this,e,ac,oc,Pe,{params:0})}}function sc(t){let e,n,i,r,o,a=z.translate("apiRequest","labels","Admin")+"",s,l,u,f,c,d,h,p,v,g,y,_,D,m,A,k,L,S,w,T,P,N,B=z.translate("response","fields","Admin")+"",F,I,M=z.translate("status","labels","Admin")+"",V,$,ee,ke,we,Re,Ke;return{c(){e=C("div"),n=C("h3"),i=C("div"),r=C("div"),o=C("a"),o.textContent=`${z.translate("Administration")}`,s=Ee(a),l=j(),u=C("div"),u.textContent=`${z.translate("apiRequest","labels","Admin")}`,f=j(),c=C("button"),c.textContent=`${z.translate("execute","labels","Admin")}`,d=j(),h=C("div"),p=C("div"),v=C("div"),g=C("div"),y=C("label"),y.textContent=`${z.translate("Type","fields","Admin")}`,_=j(),D=C("div"),m=j(),A=C("div"),k=C("div"),L=C("label"),L.textContent=`${z.translate("request","fields","Admin")}`,S=j(),w=C("div"),T=j(),P=C("div"),N=C("label"),F=Ee(B),I=C("span"),V=Ee(M),$=Ee(": "),ee=C("span"),ke=j(),we=C("div"),b(o,"href","#Admin"),b(r,"class","breadcrumbs-wrapper"),b(i,"class","header-breadcrumbs fixed-header-breadcrumbs"),b(u,"class","header-title"),se(c,"margin","10px 7px 10px 5px"),b(c,"class","btn btn-primary action"),b(c,"data-action","execute"),b(c,"type","button"),b(e,"class","page-header"),b(y,"class","control-label"),b(y,"data-name","type"),b(D,"class","field"),b(D,"data-name","type"),b(g,"class","col-xs-12 cell form-group"),b(v,"class","row"),b(p,"class","col-sm-3"),b(h,"class","row"),b(L,"class","control-label"),b(L,"data-name","request"),b(w,"class","field"),b(w,"data-name","request"),b(k,"class","col-sm-12 col-md-6 cell form-group"),b(I,"class","pull-right status hidden"),se(N,"width","100%"),b(N,"class","control-label"),b(N,"data-name","response"),b(we,"class","field"),b(we,"data-name","response"),b(P,"class","col-sm-12 col-md-6 cell form-group"),b(A,"class","row")},m(De,Le){Y(De,e,Le),E(e,n),E(n,i),E(i,r),E(r,o),E(r,s),E(n,l),E(n,u),E(e,f),E(e,c),Y(De,d,Le),Y(De,h,Le),E(h,p),E(p,v),E(v,g),E(g,y),E(g,_),E(g,D),Y(De,m,Le),Y(De,A,Le),E(A,k),E(k,L),E(k,S),E(k,w),E(A,T),E(A,P),E(P,N),E(N,F),E(N,I),E(I,V),E(I,$),E(I,ee),E(P,ke),E(P,we),Re||(Ke=fe(c,"click",function(){ci(t[0](t[1]))&&t[0](t[1]).apply(this,arguments)}),Re=!0)},p(De,[Le]){t=De},i:Ae,o:Ae,d(De){De&&(X(e),X(d),X(h),X(m),X(A)),Re=!1,Ke()}}}function uc(t,e,n){let{afterOnMount:i=()=>null}=e,{sendRequest:r=()=>null}=e,o=null;return fn(()=>{pr.create("",function(a){n(1,o=a),i(o)})}),t.$$set=a=>{"afterOnMount"in a&&n(2,i=a.afterOnMount),"sendRequest"in a&&n(0,r=a.sendRequest)},[r,o,i]}class fc extends Ge{constructor(e){super(),qe(this,e,uc,sc,Pe,{afterOnMount:2,sendRequest:0})}}function ll(t,e,n){const i=t.slice();return i[12]=e[n],i}function sl(t){let e,n=t[12].label+"",i,r,o,a,s,l,u;function f(){return t[10](t[12])}return{c(){e=C("button"),i=Ee(n),r=j(),b(e,"data-action",o=t[12].name),e.disabled=t[1],b(e,"type","button"),b(e,"style",a=t[12].cssStyle),b(e,"class",s=`btn action btn-${t[12].style??"default"}`)},m(c,d){Y(c,e,d),E(e,i),E(e,r),l||(u=fe(e,"click",f),l=!0)},p(c,d){t=c,d&1&&n!==(n=t[12].label+"")&&Fe(i,n),d&1&&o!==(o=t[12].name)&&b(e,"data-action",o),d&2&&(e.disabled=t[1]),d&1&&a!==(a=t[12].cssStyle)&&b(e,"style",a),d&1&&s!==(s=`btn action btn-${t[12].style??"default"}`)&&b(e,"class",s)},d(c){c&&X(e),l=!1,u()}}}function cc(t){let e,n,i,r=_e(t[0]),o=[];for(let l=0;l<r.length;l+=1)o[l]=sl(ll(t,r,l));const a=t[9].default,s=Fo(a,t,t[8],null);return{c(){e=C("div");for(let l=0;l<o.length;l+=1)o[l].c();n=j(),s&&s.c(),b(e,"class","button-container"),se(e,"padding-top","10px")},m(l,u){Y(l,e,u);for(let f=0;f<o.length;f+=1)o[f]&&o[f].m(e,null);t[11](e),Y(l,n,u),s&&s.m(l,u),i=!0},p(l,[u]){if(u&11){r=_e(l[0]);let f;for(f=0;f<r.length;f+=1){const c=ll(l,r,f);o[f]?o[f].p(c,u):(o[f]=sl(c),o[f].c(),o[f].m(e,null))}for(;f<o.length;f+=1)o[f].d(1);o.length=r.length}s&&s.p&&(!i||u&256)&&Wo(s,a,l,l[8],i?Ho(a,l[8],u,null):jo(l[8]),null)},i(l){i||(He(s,l),i=!0)},o(l){Xe(s,l),i=!1},d(l){l&&(X(e),X(n)),un(o,l),t[11](null),s&&s.d(l)}}}function dc(t,e,n){let{$$slots:i={},$$scope:r}=e,{params:o}=e,{fetch:a}=e,{validate:s=()=>!0}=e,l=!1,{buttonList:u=[{name:"save",label:z.translate("Save","labels"),style:"primary"},{name:"cancel",label:z.translate("Cancel","labels")}]}=e,f;function c(){n(1,l=!0);const v=a();s(v)&&o.onSaved(v),n(1,l=!1)}function d(v){if(v.action){v.action();return}switch(v.name){case"save":c();break}}const h=v=>d(v);function p(v){ze[v?"unshift":"push"](()=>{f=v,n(2,f)})}return t.$$set=v=>{"params"in v&&n(4,o=v.params),"fetch"in v&&n(5,a=v.fetch),"validate"in v&&n(6,s=v.validate),"buttonList"in v&&n(0,u=v.buttonList),"$$scope"in v&&n(8,r=v.$$scope)},[u,l,f,d,o,a,s,c,r,i,h,p]}class pc extends Ge{constructor(e){super(),qe(this,e,dc,cc,Pe,{params:4,fetch:5,validate:6,buttonList:0,save:7})}get save(){return this.$$.ctx[7]}}function ul(t,e,n){const i=t.slice();return i[22]=e[n],i}function fl(t,e,n){const i=t.slice();return i[22]=e[n],i}function cl(t){let e,n,i;function r(){return t[14](t[22])}return{c(){e=C("a"),e.innerHTML='<i class="fas fa-pencil-alt fa-sm svelte-7ge08f"></i>',b(e,"href","javascript:"),b(e,"data-action","editField"),b(e,"class","edit-field svelte-7ge08f")},m(o,a){Y(o,e,a),n||(i=fe(e,"click",r),n=!0)},p(o,a){t=o},d(o){o&&X(e),n=!1,i()}}}function dl(t){let e,n,i;function r(){return t[15](t[22])}return{c(){e=C("a"),e.innerHTML='<i class="fas fa-times"></i>',b(e,"href","javascript:"),b(e,"data-action","removeField"),b(e,"class","remove-field svelte-7ge08f")},m(o,a){Y(o,e,a),n||(i=fe(e,"click",r),n=!0)},p(o,a){t=o},d(o){o&&X(e),n=!1,i()}}}function pl(t,e){let n,i,r,o=e[22].label+"",a,s,l,u,f,c,d,h=e[22].canEdit&&cl(e),p=e[22].canRemove&&dl(e),v=[xi(e[22]),{class:d=(e[22].isGroup?"group":"")+" "+(e[22].groupEnd?"end":"")+" "+(e[1][e[22].name]&&!e[22].isGroup?"in-group":"")}],g={};for(let y=0;y<v.length;y+=1)g=xn(g,v[y]);return{key:t,first:null,c(){n=C("li"),i=C("div"),r=C("label"),a=Ee(o),l=j(),u=C("div"),h&&h.c(),f=j(),p&&p.c(),c=j(),b(r,"title",s=e[22].label),b(r,"class","svelte-7ge08f"),b(i,"class","left svelte-7ge08f"),b(u,"class","right svelte-7ge08f"),Wt(n,g),ne(n,"svelte-7ge08f",!0),this.first=n},m(y,_){Y(y,n,_),E(n,i),E(i,r),E(r,a),E(n,l),E(n,u),h&&h.m(u,null),E(u,f),p&&p.m(u,null),E(n,c)},p(y,_){e=y,_&1&&o!==(o=e[22].label+"")&&Fe(a,o),_&1&&s!==(s=e[22].label)&&b(r,"title",s),e[22].canEdit?h?h.p(e,_):(h=cl(e),h.c(),h.m(u,f)):h&&(h.d(1),h=null),e[22].canRemove?p?p.p(e,_):(p=dl(e),p.c(),p.m(u,null)):p&&(p.d(1),p=null),Wt(n,g=yi(v,[_&1&&xi(e[22]),_&3&&d!==(d=(e[22].isGroup?"group":"")+" "+(e[22].groupEnd?"end":"")+" "+(e[1][e[22].name]&&!e[22].isGroup?"in-group":""))&&{class:d}])),ne(n,"svelte-7ge08f",!0)},d(y){y&&X(n),h&&h.d(),p&&p.d()}}}function hl(t,e){let n,i,r,o=e[22].label+"",a,s,l,u=[xi(e[22])],f={};for(let c=0;c<u.length;c+=1)f=xn(f,u[c]);return{key:t,first:null,c(){n=C("li"),i=C("div"),r=C("label"),a=Ee(o),l=j(),b(r,"title",s=e[22].label),b(r,"class","svelte-7ge08f"),b(i,"class","left svelte-7ge08f"),Wt(n,f),ne(n,"svelte-7ge08f",!0),this.first=n},m(c,d){Y(c,n,d),E(n,i),E(i,r),E(r,a),E(n,l)},p(c,d){e=c,d&8&&o!==(o=e[22].label+"")&&Fe(a,o),d&8&&s!==(s=e[22].label)&&b(r,"title",s),Wt(n,f=yi(u,[d&8&&xi(e[22])])),ne(n,"svelte-7ge08f",!0)},d(c){c&&X(n)}}}function hc(t){let e,n,i,r,o,a,s,l=[],u=new Map,f,c,d,h,p,v,g,y,_,D=[],m=new Map,A=_e(t[0].sort(gl));const k=w=>w[22].name;for(let w=0;w<A.length;w+=1){let T=fl(t,A,w),P=k(T);u.set(P,l[w]=pl(P,T))}let L=_e(t[3]);const S=w=>w[22].name;for(let w=0;w<L.length;w+=1){let T=ul(t,L,w),P=S(T);m.set(P,D[w]=hl(P,T))}return{c(){e=C("div"),n=C("div"),i=C("div"),r=C("header"),r.textContent=`${z.translate("Selected","labels","Admin")}`,o=j(),a=C("div"),s=C("ul");for(let w=0;w<l.length;w+=1)l[w].c();f=j(),c=C("div"),d=j(),h=C("div"),p=C("div"),v=C("header"),v.textContent=`${z.translate("Available","labels","Admin")}`,g=j(),y=C("div"),_=C("ul");for(let w=0;w<D.length;w+=1)D[w].c();b(r,"class","svelte-7ge08f"),b(s,"class","enabled connected svelte-7ge08f"),b(a,"class","rows-wrapper svelte-7ge08f"),b(i,"class","well svelte-7ge08f"),b(n,"class","col-sm-5 svelte-7ge08f"),b(c,"class","col-sm-2 svelte-7ge08f"),b(v,"class","svelte-7ge08f"),b(_,"class","disabled connected svelte-7ge08f"),b(y,"class","rows-wrapper svelte-7ge08f"),b(p,"class","well svelte-7ge08f"),b(h,"class","col-sm-5 svelte-7ge08f"),b(e,"id","layout"),b(e,"class","row svelte-7ge08f")},m(w,T){Y(w,e,T),E(e,n),E(n,i),E(i,r),E(i,o),E(i,a),E(a,s);for(let P=0;P<l.length;P+=1)l[P]&&l[P].m(s,null);E(e,f),E(e,c),E(e,d),E(e,h),E(h,p),E(p,v),E(p,g),E(p,y),E(y,_);for(let P=0;P<D.length;P+=1)D[P]&&D[P].m(_,null);t[16](e)},p(w,T){T&2115&&(A=_e(w[0].sort(gl)),l=It(l,T,k,1,w,A,u,s,Lt,pl,null,fl)),T&8&&(L=_e(w[3]),D=It(D,T,S,1,w,L,m,_,Lt,hl,null,ul))},d(w){w&&X(e);for(let T=0;T<l.length;T+=1)l[T].d();for(let T=0;T<D.length;T+=1)D[T].d();t[16](null)}}}function mc(t){let e,n,i={params:t[2],validate:t[8],fetch:t[7],loadData:t[5],buttonList:t[4],$$slots:{default:[hc]},$$scope:{ctx:t}};return e=new pc({props:i}),t[17](e),{c(){St(e.$$.fragment)},m(r,o){vt(e,r,o),n=!0},p(r,[o]){const a={};o&4&&(a.params=r[2]),o&256&&(a.validate=r[8]),o&128&&(a.fetch=r[7]),o&32&&(a.loadData=r[5]),o&16&&(a.buttonList=r[4]),o&134218315&&(a.$$scope={dirty:o,ctx:r}),e.$set(a)},i(r){n||(He(e.$$.fragment,r),n=!0)},o(r){Xe(e.$$.fragment,r),n=!1},d(r){t[17](null),bt(e,r)}}}function gc(t){return t.toLowerCase()}function ml(t,e){return t[e]}function xi(t){let e={};return["name","id"].forEach(n=>{ml(t,n)!=null&&(e[`data-${gc(n)}`]=ml(t,n))}),e}const gl=(t,e)=>t.sortOrder-e.sortOrder;function vc(t,e,n){let i,r,o,{params:a}=e,{enabledItems:s=[]}=e,{disabledItems:l=[]}=e,{buttonList:u}=e,{loadData:f}=e,{refresh:c=()=>{}}=e,{editItem:d}=e,{getGroupId:h=()=>"id"}=e,{fieldsInGroup:p}=e,v;function g(w){let T=!1,P={};w.forEach(N=>{if(N.isGroup){T=N.name!=="";return}T&&(P[N.name]=!0)}),n(1,p=P)}fn(()=>{y()}),ar(()=>{r&&r.destroy(),o&&o.destroy()});function y(){const w={group:"fields",draggable:"li",animation:150};r=ie.create(i.querySelector("ul.enabled"),{...w,onEnd(T){if(T.to.closest(".connected").classList.contains("enabled")){const[P]=s.splice(T.oldIndex,1);s.splice(T.newIndex,0,P);for(let N=T.newIndex;N<s.length;N++)n(0,s[N].sortOrder=(N>0?s[N-1].sortOrder:0)+N,s);g(s),c()}else{const P=s[T.oldIndex];if(P.canDisabled===!1){c();return}s.splice(T.oldIndex,1),l.splice(T.newIndex,0,P),c()}}}),o=ie.create(i.querySelector("ul.disabled"),{...w,onEnd(T){if(T.to.closest(".connected").classList.contains("disabled")){const[P]=l.splice(T.oldIndex,1);l.splice(T.newIndex,0,P)}else{const P=l[T.oldIndex];l.splice(T.oldIndex,1),s.splice(T.newIndex,0,P);for(let N=T.newIndex;N<s.length;N++)n(0,s[N].sortOrder=(N>0?s[N-1].sortOrder:0)+N,s);g(s),c()}}})}let{fetch:_=()=>{let w=[],T=!1,P=!1;for(let I=0;I<s.length;I++){const M=s[I];if(M.isGroup){T=!M.groupEnd,w.push({id:M.id,name:M.name,color:M.color,iconClass:M.iconClass,items:[]});continue}T?w[w.length-1].items.push(M.name):w.push(M.name)}let N=!1,B=w.filter(I=>{if(typeof I=="object"){if(I.name!==""&&!I.items.length)return!1;if(I.name!==""&&I.items.length)return N=!0,!0;if(I.name===""&&N)return N=!1,!0;if(I.name===""&&!N)return!1}return!0});P=B.length!==w.length,w=B;let F=[];for(let I=0;I<w.length;I++){let M=w[I];F.push(M),typeof M=="object"&&M.name!==""&&(I===w.length-1||!(typeof w[I+1]=="object"&&w[I+1].name===""))&&(P=!0,F.push({id:h(),name:"",items:[]}))}return{adjusted:P,navigation:F}}}=e;function D(w){s.splice(s.findIndex(T=>T.id===w.id),1),c()}let{validate:m=w=>w.length===0?(tt.notify("Menu cannot be empty","error"),!1):!0}=e;const A=w=>d(w),k=w=>D(w);function L(w){ze[w?"unshift":"push"](()=>{i=w,n(9,i)})}function S(w){ze[w?"unshift":"push"](()=>{v=w,n(10,v)})}return t.$$set=w=>{"params"in w&&n(2,a=w.params),"enabledItems"in w&&n(0,s=w.enabledItems),"disabledItems"in w&&n(3,l=w.disabledItems),"buttonList"in w&&n(4,u=w.buttonList),"loadData"in w&&n(5,f=w.loadData),"refresh"in w&&n(12,c=w.refresh),"editItem"in w&&n(6,d=w.editItem),"getGroupId"in w&&n(13,h=w.getGroupId),"fieldsInGroup"in w&&n(1,p=w.fieldsInGroup),"fetch"in w&&n(7,_=w.fetch),"validate"in w&&n(8,m=w.validate)},t.$$.update=()=>{t.$$.dirty&1&&g(s)},[s,p,a,l,u,f,d,_,m,i,v,D,c,h,A,k,L,S]}class vl extends Ge{constructor(e){super(),qe(this,e,vc,mc,Pe,{params:2,enabledItems:0,disabledItems:3,buttonList:4,loadData:5,refresh:12,editItem:6,getGroupId:13,fieldsInGroup:1,fetch:7,validate:8})}}function bl(t){let e,n,i={params:t[0],enabledItems:t[2],disabledItems:t[4],buttonList:t[6],fieldsInGroup:t[5],refresh:t[7],editItem:t[8],getGroupId:$n};return e=new vl({props:i}),t[9](e),{c(){St(e.$$.fragment)},m(r,o){vt(e,r,o),n=!0},p(r,o){const a={};o&1&&(a.params=r[0]),o&4&&(a.enabledItems=r[2]),e.$set(a)},i(r){n||(He(e.$$.fragment,r),n=!0)},o(r){Xe(e.$$.fragment,r),n=!1},d(r){t[9](null),bt(e,r)}}}function bc(t){let e,n=t[3],i,r=bl(t);return{c(){e=C("div"),r.c()},m(o,a){Y(o,e,a),r.m(e,null),i=!0},p(o,[a]){a&8&&Pe(n,n=o[3])?(ea(),Xe(r,1,1,Ae),ta(),r=bl(o),r.c(),He(r,1),r.m(e,null)):r.p(o,a)},i(o){i||(He(r),i=!0)},o(o){Xe(r),i=!1},d(o){o&&X(e),r.d(o)}}}let yc="_delimiter_";function $n(){return yc+wc()}function wc(){return Math.floor((1+Math.random())*4294967296).toString(16).substring(1)}function _c(t,e,n){let{params:i}=e,r,o=[],a=[],s=0,l={},u=[{name:"save",label:z.translate("Save","labels"),style:"primary"},{name:"cancel",label:z.translate("Cancel","labels")},{name:"addGroup",label:z.translate("addGroup","labels"),cssStyle:"margin-left: 30px",action:()=>{i.onEditItem({id:$n(),groupEnd:!1},p=>{let v=10;o.length&&(v=o[o.length-1].sortOrder+10);let g={isGroup:!0,canEdit:!0,canRemove:!0,isGroup:!0,canDisabled:!1,name:"",label:"",sortOrder:v,...p};o.push(g),g.name!==""&&o.push({id:$n(),isGroup:!0,canEdit:!0,canRemove:!0,isGroup:!0,canDisabled:!1,groupEnd:!0,name:"",label:"",sortOrder:g.sortOrder+1}),f()})}}];function f(){n(3,s++,s)}function c(p){i.onEditItem(p,v=>{let g=o.findIndex(y=>y.id===v.id);n(2,o[g]=v,o),f()})}d();function d(){let p=i.list??[],v=0;for(let g=0;g<p.length;g++){let y=p[g];if(typeof y=="string")ce.get(["scopes",y,"tab"])&&o.push({name:y,label:z.translate(y,"scopeNamesPlural"),sortOrder:v}),v++;else if(typeof y=="object"){o.push({id:y.id??$n(),canEdit:!0,canRemove:!0,isGroup:!0,canDisabled:!1,groupEnd:y.name==="",name:y.name,label:y.name,iconClass:y.iconClass||null,sortOrder:v}),v++;for(const _ of y.items)ce.get(["scopes",_,"tab"])&&(o.push({name:_,label:z.translate(_,"scopeNamesPlural"),sortOrder:v}),v++);if(g<p.length-1&&p[g+1].name==="")continue;y.name!==""&&(g===p.length-1||typeof p[g+g]=="string"||y.items.length===0)&&(o.push({id:$n(),canEdit:!0,canRemove:!0,canDisabled:!1,isGroup:!0,groupEnd:!0,name:"",label:"",iconClass:y.iconClass||null,sortOrder:v}),v++)}}Object.entries(ce.get(["scopes"])).forEach(([g,y])=>{y.disabled||y.emHidden||!y.tab||o.find(_=>_.name===g)||a.push({name:g,label:z.translate(g,"scopeNamesPlural")})}),a.sort((g,y)=>g.label.localeCompare(y.label))}function h(p){ze[p?"unshift":"push"](()=>{r=p,n(1,r)})}return t.$$set=p=>{"params"in p&&n(0,i=p.params)},[i,r,o,s,a,l,u,f,c,h]}class Ec extends Ge{constructor(e){super(),qe(this,e,_c,bc,Pe,{params:0})}}function yl(t){let e,n,i={params:t[0],enabledItems:t[3],disabledItems:t[4],buttonList:t[6],fieldsInGroup:t[5],refresh:t[7],validate:Dc};return e=new vl({props:i}),t[8](e),{c(){St(e.$$.fragment)},m(r,o){vt(e,r,o),n=!0},p(r,o){const a={};o&1&&(a.params=r[0]),e.$set(a)},i(r){n||(He(e.$$.fragment,r),n=!0)},o(r){Xe(e.$$.fragment,r),n=!1},d(r){t[8](null),bt(e,r)}}}function kc(t){let e,n=t[2],i,r=yl(t);return{c(){e=C("div"),r.c()},m(o,a){Y(o,e,a),r.m(e,null),i=!0},p(o,[a]){a&4&&Pe(n,n=o[2])?(ea(),Xe(r,1,1,Ae),ta(),r=yl(o),r.c(),He(r,1),r.m(e,null)):r.p(o,a)},i(o){i||(He(r),i=!0)},o(o){Xe(r),i=!1},d(o){o&&X(e),r.d(o)}}}function Dc(t){return!0}function Sc(t,e,n){let{params:i}=e,r,o=[],a=[],s=0,l={},u=[{name:"save",label:z.translate("Save","labels"),style:"primary"},{name:"cancel",label:z.translate("Cancel","labels")}];function f(){n(2,s++,s)}c();function c(){let h=i.list??[],p=0;for(let v=0;v<h.length;v++){let g=h[v];typeof g=="string"&&(ce.get(["scopes",g,"tab"])&&o.push({name:g,label:z.translate(g,"scopeNamesPlural"),sortOrder:p}),p++)}Object.entries(ce.get(["scopes"])).forEach(([v,g])=>{g.disabled||g.emHidden||!g.tab||o.find(y=>y.name===v)||a.push({name:v,label:z.translate(v,"scopeNamesPlural")})}),a.sort((v,g)=>v.label.localeCompare(g.label))}function d(h){ze[h?"unshift":"push"](()=>{r=h,n(1,r)})}return t.$$set=h=>{"params"in h&&n(0,i=h.params)},[i,r,s,o,a,l,u,f,d]}class Cc extends Ge{constructor(e){super(),qe(this,e,Sc,kc,Pe,{params:0})}}function wl(t,{delay:e=0,duration:n=400,easing:i=No}={}){const r=+getComputedStyle(t).opacity;return{delay:e,duration:n,easing:i,css:o=>`opacity: ${o*r}`}}function _l(t,e,n){const i=t.slice();return i[65]=e[n],i}function El(t,e,n){const i=t.slice();return i[68]=e[n],i}function Tc(t){let e,n,i,r,o,a,s=_e(t[5]),l=[];for(let f=0;f<s.length;f+=1)l[f]=kl(El(t,s,f));let u=t[1]&&Dl(t);return{c(){e=C("div"),n=C("div");for(let f=0;f<l.length;f+=1)l[f].c();i=j(),r=C("hr"),o=j(),u&&u.c(),a=hi(),b(n,"class","btn-group"),b(e,"class","panel-group"),se(e,"margin-bottom","10px"),se(e,"margin-top","-10px"),se(r,"margin","0 -10px")},m(f,c){Y(f,e,c),E(e,n);for(let d=0;d<l.length;d+=1)l[d]&&l[d].m(n,null);Y(f,i,c),Y(f,r,c),Y(f,o,c),u&&u.m(f,c),Y(f,a,c)},p(f,c){if(c[0]&131106){s=_e(f[5]);let d;for(d=0;d<s.length;d+=1){const h=El(f,s,d);l[d]?l[d].p(h,c):(l[d]=kl(h),l[d].c(),l[d].m(n,null))}for(;d<l.length;d+=1)l[d].d(1);l.length=s.length}f[1]?u?u.p(f,c):(u=Dl(f),u.c(),u.m(a.parentNode,a)):u&&(u.d(1),u=null)},d(f){f&&(X(e),X(i),X(r),X(o),X(a)),un(l,f),u&&u.d(f)}}}function kl(t){let e,n=t[68].label+"",i,r,o,a;function s(){return t[42](t[68])}return{c(){e=C("a"),i=Ee(n),r=j(),b(e,"href","javascript:"),b(e,"class","btn btn-link tree-item svelte-1y8n9cg"),ne(e,"active",t[68].name===t[1].name)},m(l,u){Y(l,e,u),E(e,i),E(e,r),o||(a=fe(e,"click",s),o=!0)},p(l,u){t=l,u[0]&32&&n!==(n=t[68].label+"")&&Fe(i,n),u[0]&34&&ne(e,"active",t[68].name===t[1].name)},d(l){l&&X(e),o=!1,a()}}}function Dl(t){let e,n,i=t[1].label+"",r,o,a,s,l,u,f,c,d,h,p,v,g,y,_,D,m,A,k,L,S,w,T,P,N,B=_e(t[11]),F=[];for(let I=0;I<B.length;I+=1)F[I]=Sl(_l(t,B,I));return{c(){e=C("div"),n=C("h5"),r=Ee(i),o=j(),a=C("div"),s=C("input"),l=j(),u=C("button"),f=j(),c=C("button"),d=j(),h=C("div"),p=C("button"),v=Ee("Unset selection"),y=j(),_=C("div"),D=C("button"),m=C("i"),L=j(),S=C("select");for(let I=0;I<F.length;I+=1)F[I].c();w=j(),T=C("div"),T.innerHTML="",se(n,"margin","20px 0"),se(n,"font-weight","bold"),se(n,"font-size","16px"),b(s,"type","text"),b(s,"class","form-control category-search search-in-tree-input"),b(s,"tabindex","1"),b(s,"placeholder","Type and press Enter..."),b(u,"class","fas fa-times reset-search-in-tree-button"),ne(u,"hidden",!t[6]),b(c,"class","fas fa-search search-in-tree-button"),b(a,"class","field"),b(a,"data-name","category-search"),b(p,"type","button"),se(p,"margin-bottom","5px"),p.disabled=g=!t[7]||!t[12],b(p,"class","btn btn-default"),b(m,"class",A=zo("fas "+(t[9]?"fa-sort-amount-up":"fa-sort-amount-down"))+" svelte-1y8n9cg"),b(D,"type","button"),b(D,"class","btn btn-default sort-btn svelte-1y8n9cg"),b(D,"data-tippy","true"),b(D,"title",k=z.translateOption(t[9]?"asc":"desc","sortDirection","Entity")),b(S,"class","form-control"),se(S,"width","auto"),se(S,"max-width","120px"),t[10]===void 0&&hn(()=>t[45].call(S)),b(_,"class","btn-group"),se(h,"margin-top","20px"),se(h,"display","flex"),se(h,"justify-content","space-between"),se(h,"flex-wrap","wrap"),b(e,"class","panel-group category-search"),se(e,"margin-bottom","20px"),b(T,"class","panel-group category-tree")},m(I,M){Y(I,e,M),E(e,n),E(n,r),E(e,o),E(e,a),E(a,s),t[43](s),E(a,l),E(a,u),E(a,f),E(a,c),E(e,d),E(e,h),E(h,p),E(p,v),E(h,y),E(h,_),E(_,D),E(D,m),E(_,L),E(_,S);for(let V=0;V<F.length;V+=1)F[V]&&F[V].m(S,null);Xo(S,t[10],!0),Y(I,w,M),Y(I,T,M),t[46](T),P||(N=[fe(s,"keydown",t[44]),fe(u,"click",t[18]),fe(c,"click",t[19]),fe(p,"click",t[16]),fe(D,"click",t[21]),fe(S,"change",t[20]),fe(S,"change",t[45])],P=!0)},p(I,M){if(M[0]&2&&i!==(i=I[1].label+"")&&Fe(r,i),M[0]&64&&ne(u,"hidden",!I[6]),M[0]&4224&&g!==(g=!I[7]||!I[12])&&(p.disabled=g),M[0]&512&&A!==(A=zo("fas "+(I[9]?"fa-sort-amount-up":"fa-sort-amount-down"))+" svelte-1y8n9cg")&&b(m,"class",A),M[0]&512&&k!==(k=z.translateOption(I[9]?"asc":"desc","sortDirection","Entity"))&&b(D,"title",k),M[0]&2048){B=_e(I[11]);let V;for(V=0;V<B.length;V+=1){const $=_l(I,B,V);F[V]?F[V].p($,M):(F[V]=Sl($),F[V].c(),F[V].m(S,null))}for(;V<F.length;V+=1)F[V].d(1);F.length=B.length}M[0]&3072&&Xo(S,I[10])},d(I){I&&(X(e),X(w),X(T)),t[43](null),un(F,I),t[46](null),P=!1,at(N)}}}function Sl(t){let e,n=t[65].label+"",i,r,o;return{c(){e=C("option"),i=Ee(n),r=j(),e.__value=o=t[65].name,Uo(e,e.__value)},m(a,s){Y(a,e,s),E(e,i),E(e,r)},p(a,s){s[0]&2048&&n!==(n=a[65].label+"")&&Fe(i,n),s[0]&2048&&o!==(o=a[65].name)&&(e.__value=o,Uo(e,e.__value))},d(a){a&&X(e)}}}function Cl(t){let e,n,i;return{c(){e=C("div"),b(e,"class","category-panel-resizer svelte-1y8n9cg")},m(r,o){Y(r,e,o),n||(i=fe(e,"mousedown",t[15]),n=!0)},p:Ae,d(r){r&&X(e),n=!1,i()}}}function Ac(t){let e,n,i,r,o,a,s,l,u,f,c,d,h,p,v;function g(m,A){if(m[5].length>0)return Tc}let y=g(t),_=y&&y(t),D=!t[0]&&Cl(t);return{c(){e=C("aside"),n=C("button"),i=C("span"),r=j(),o=C("span"),a=j(),s=C("div"),l=C("div"),u=C("div"),f=j(),_&&_.c(),c=j(),D&&D.c(),b(i,"class","toggle-icon-left fas fa-angle-left"),ne(i,"hidden",t[0]),b(o,"class","toggle-icon-right fas fa-angle-right"),ne(o,"hidden",!t[0]),b(n,"type","button"),b(n,"class","btn btn-link collapse-panel"),ne(n,"collapsed",t[0]),se(u,"margin-right","20px"),b(u,"class","layout-editor-container"),se(l,"display","flex"),se(l,"flex-direction","row-reverse"),se(l,"align-items","center"),se(l,"height","35px"),b(s,"class","category-panel"),ne(s,"hidden",t[0]),b(e,"class","catalog-tree-panel"),se(e,"width",t[13]),ne(e,"collapsed",t[0]),ne(e,"catalog-tree-panel-hidden",t[0]),ne(e,"hidden",t[8])},m(m,A){Y(m,e,A),E(e,n),E(n,i),E(n,r),E(n,o),E(e,a),E(e,s),E(s,l),E(l,u),t[41](u),E(s,f),_&&_.m(s,null),E(s,c),D&&D.m(s,null),h=!0,p||(v=fe(n,"click",t[14]),p=!0)},p(m,A){(!h||A[0]&1)&&ne(i,"hidden",m[0]),(!h||A[0]&1)&&ne(o,"hidden",!m[0]),(!h||A[0]&1)&&ne(n,"collapsed",m[0]),y===(y=g(m))&&_?_.p(m,A):(_&&_.d(1),_=y&&y(m),_&&(_.c(),_.m(s,c))),m[0]?D&&(D.d(1),D=null):D?D.p(m,A):(D=Cl(m),D.c(),D.m(s,null)),(!h||A[0]&1)&&ne(s,"hidden",m[0]),(!h||A[0]&8192)&&se(e,"width",m[13]),(!h||A[0]&1)&&ne(e,"collapsed",m[0]),(!h||A[0]&1)&&ne(e,"catalog-tree-panel-hidden",m[0]),(!h||A[0]&256)&&ne(e,"hidden",m[8])},i(m){h||(m&&hn(()=>{h&&(d||(d=na(e,wl,{},!0)),d.run(1))}),h=!0)},o(m){m&&(d||(d=na(e,wl,{},!1)),d.run(0)),h=!1},d(m){m&&X(e),t[41](null),_&&_.d(),D&&D.d(),m&&d&&d.end(),p=!1,v()}}}function Oc(t){let e=[];return(t||"").split("|").forEach(n=>{n&&e.push(n)}),e}function Lc(t,e,n){((n||t.tree("getTree")).children||[]).findIndex(o=>e.id===o.id)===-1&&t.tree("appendNode",e,n)}function Ic(t,e,n){((n||t.tree("getTree")).children||[]).findIndex(o=>e.id===o.id)===-1&&t.tree("prependNode",e,n)}function Pr(t,e,n){if(!Array.isArray(e)||e.length===0){n();return}const i=e[0];let r=t.find(`.jqtree-title[data-id="${i}"]`);r.length>0&&r.each((o,a)=>{if(a=window.$(a),a.parent().parent().hasClass("jqtree-closed")){let l=t.tree("getNodeByHtmlElement",a);t.tree("openNode",l,!1,()=>Pr(t,e.slice(1),n))}else Pr(t,e.slice(1),n)})}function Pc(t,e,n){let i,r,{scope:o}=e,{model:a}=e,{collection:s}=e,{callbacks:l}=e,{minWidth:u=220}=e,{maxWidth:f=600}=e,{currentWidth:c=u}=e,{isCollapsed:d=!1}=e,{mode:h}=e,{maxSize:p=la.get("recordsPerPageSmall")||20}=e,{renderLayoutEditor:v}=e;lr();let g,y,_,D=!1,m,A,k=[],L,S="",w,T,P,N=!1,B=!0,F=null,I=[];function M(R){s&&R.name===o&&ve.set("treeWhereData",o,R.where),d||we()}function V(){n(0,d=!d),d?(window.$(".page-header").addClass("collapsed").removeClass("not-collapsed"),window.$("#tree-list-table").addClass("collapsed")):(window.$(".page-header").removeClass("collapsed").addClass("not-collapsed"),window.$("#tree-list-table").removeClass("collapsed")),ve.set("catalog-tree-panel",o,d?"collapsed":""),d||we()}function $(R){if(!D)return;R.preventDefault();const re=A+(R.pageX-m);re>=u&&re<=f&&n(22,c=re)}function ee(R){D=!0,m=R.pageX,A=c,document.addEventListener("mousemove",$),document.addEventListener("mouseup",ke,{once:!0}),document.body.style.userSelect="none"}function ke(){D&&(D=!1,ve.set("panelWidth",o,c.toString()),document.removeEventListener("mousemove",$),document.body.style.userSelect="")}function we(){Re(),De()}function Re(){let R=window.$(g);R&&R.tree("destroy")}function Ke(){let R=ve.get("treeWhereData",o)||[];return["_self","_bookmark"].includes(L.name)||(R=[]),R}function De(R=null){if(!L)return;let re=window.$(g),K=Ke();if(R===null&&S&&ce.get(["scopes",w,"type"])==="Hierarchy"&&!ce.get(["scopes",w,"hierarchyDisabled"])){K.push({type:"textFilter",value:S}),Espo.ajax.getRequest(`${w}/action/TreeData`,{where:K,scope:o,link:L.name,sortBy:F,asc:!!B}).then(O=>{De(O.tree)});return}let he={dataUrl:rt(),dataFilter:(function(O){return G(O)}).bind(this),selectable:!0,saveState:!1,autoOpen:!1,dragAndDrop:ce.get(["scopes",w,"multiParents"])!==!0&&ce.get(["scopes",w,"dragAndDrop"])&&F==="sortOrder",useContextMenu:!1,closedIcon:window.$('<i class="fa fa-angle-right"></i>'),openedIcon:window.$('<i class="fa fa-angle-down"></i>'),onCreateLi:(function(O,H,U){O.disabled?H.addClass("disabled"):H.removeClass("disabled");const oe=H.find(".jqtree-title");if(S){let de=S.replace(/\*/g,"");if(de.length>0){let je=oe.html(),Qe=je.match(new RegExp(de,"ig"));if(Qe){let Ft=[];Qe.forEach(en=>{Ft.includes(en)||(Ft.push(en),oe.html(je.replace(new RegExp(en,"g"),`<b>${en}</b>`)))})}}}["_self","_bookmark"].includes(L.name)&&a&&a.get("id")===O.id&&(re.tree("addToSelection",O),H.addClass("jqtree-selected")),!["_self","_bookmark"].includes(L.name)&&P===O.id&&(re.tree("addToSelection",O),H.addClass("jqtree-selected")),oe.attr("data-id",O.id),he.dragAndDrop&&!O.showMoreDirection&&oe.attr("title",z.translate("useDragAndDrop")),O.showMoreDirection&&(H.addClass("show-more"),H.addClass("show-more-"+O.showMoreDirection),H.find(".jqtree-title").addClass("more-label"))}).bind(this)};R&&(he.data=R,he.autoOpen=!0,he.dragAndDrop=!1,delete he.dataUrl,delete he.dataFilter),re.tree(he),re.on("tree.load_data",O=>{tt.notify(!1),l!=null&&l.treeLoad&&l.treeLoad(w,he)}),re.on("tree.refresh",O=>{if(ve.get("selectedNodeId",o)&&h==="list"){const H=ve.get("selectedNodeId",o),U=ve.get("selectedNodeRoute",o);l!=null&&l.selectNode&&l.selectNode({id:H,route:U},!0)}h==="detail"&&(a&&["_self","_bookmark"].includes(L.name)?mt(a.get("id"),Object.keys(a.get("hierarchyRoute")??[]).reverse()):ve.get("selectedNodeId",o)&&mt(ve.get("selectedNodeId",o),Oc(ve.get("selectedNodeRoute",o))))}),re.on("tree.move",O=>{O.preventDefault();const H="parent";let U=O.move_info,oe={_position:U.position,_sortAsc:B,_target:U.target_node.id};oe[H+"Id"]=null,oe[H+"Name"]=null,U.position==="inside"?(oe[H+"Id"]=U.target_node.id,oe[H+"Name"]=U.target_node.name):U.target_node.parent.id&&(oe[H+"Id"]=U.target_node.parent.id,oe[H+"Name"]=U.target_node.parent.name),Espo.ajax.patchRequest(`${w}/${U.moved_node.id}`,oe).success(de=>{U.do_move()})}),re.on("tree.click",O=>{if(O.preventDefault(),O.node.disabled)return!1;const H=window.$(O.click_event.target);if(H.hasClass("jqtree-title")||H.parent().hasClass("jqtree-title")){let U=O.node;if(U.showMoreDirection)return Le(U);let oe=[];for(;U.parent.id;)oe.push(U.parent.id),U=U.parent;let de={id:O.node.id,route:"",click:!0};oe.length>0&&(de.route="|"+oe.reverse().join("|")+"|"),l!=null&&l.selectNode&&l.selectNode(de)}})}function Le(R){tt.notify("Loading..."),Espo.ajax.getRequest(rt(R)).then(re=>{if(re.list){const K=window.$(g);R.showMoreDirection==="up"?G(JSON.parse(JSON.stringify(re)),"up").reverse().forEach(he=>{Ic(K,he,R.getParent())}):R.showMoreDirection==="down"&&G(JSON.parse(JSON.stringify(re)),"down").forEach(he=>{Lc(K,he,R.getParent())}),K.tree("removeNode",R)}})}function rt(R){let re=w+`/action/Tree?isTreePanel=1&scope=${o}&link=${L.name}`;if(F&&(re+=`&sortBy=${F}&asc=${B?"true":"false"}`),R&&R.showMoreDirection){let he=R.offset,O=p;if(R.showMoreDirection==="up"){let H=R.offset-O;he=R.offset-O,H<0?(he=0,O=O+H):he=H}else R.showMoreDirection==="down"&&(he=he+1);re+="&offset="+he+"&maxSize="+O,R.getParent()&&(re+="&node="+R.getParent().id)}else R&&R.id?re+="&node="+R.id+"&offset=0&maxSize="+p:a&&a.id&&[a.urlRoot,"Bookmark"].includes(w)&&(re+="&selectedId="+a.id);let K=Ke();return S&&(K=[...K,{type:"textFilter",value:S}]),K.length>0&&(re+="&",re+=window.$.param({where:K})),re}function mt(R,re){const K=window.$(g);Pr(K,re,()=>{let O=K.tree("getNodeById",R);O&&(K.tree("addToSelection",O),n(7,P=R)),K.find(".jqtree-title").each((H,U)=>{U=window.$(U);let oe=U.parent().parent();U.data("id")!==R&&K.tree("getNodeById",U.data("id"))?(K.tree("removeFromSelection",K.tree("getNodeById",U.data("id"))),oe.removeClass("jqtree-selected")):oe.hasClass("jqtree-selected")||oe.addClass("jqtree-selected")})})}function ut(){l!=null&&l.selectNode&&l.selectNode({id:P})}function W(R){const re=x(),K=re.tree("getNodeById",R);n(7,P=null),K&&re.tree("removeFromSelection",K)}function x(){return window.$(g)}function G(R,re=null){return R.list?(Z(R.list,re),R.list):R}function Z(R,re){if(!re||re==="up"){let K=JSON.parse(JSON.stringify(R)).shift();K&&K.offset&&K.offset!==0&&R.unshift({id:"show-more-"+K.offset,offset:K.offset,showMoreDirection:"up",name:z.translate("Show more")})}if(!re||re==="down"){let K=JSON.parse(JSON.stringify(R)).pop();K&&K.offset&&K.total-1!==K.offset&&R.push({id:"show-more-"+K.offset,offset:K.offset,showMoreDirection:"down",name:z.translate("Show more")})}R.forEach(K=>{K.children&&Z(K.children)})}function le(R){return R==="_self"?o:R==="_bookmark"?"Bookmark":ce.get(["entityDefs",o,"links",R,"entity"])||ce.get(["entityDefs",o,"fields",R,"entity"])}function ye(R){L&&L.name===R.name||(n(6,S=""),n(4,_.value="",_),ve.clear("treeSearchValue",w),h==="list"?P&&(l!=null&&l.selectNode&&l.selectNode({id:P}),n(7,P=null)):n(7,P=null),n(1,L=R),_t(!1),ve.set("treeItem",o,R.name),tt.notify("Loading..."),pn().then(()=>{we()}))}function Ce(){n(4,_.value="",_),h==="detail"&&ve.clear("treeWhereData",o),Ue()}function Ue(){n(6,S=_.value),S?ve.set("treeSearchValue",o,S):ve.clear("treeSearchValue",o),tt.notify("Loading..."),we()}function te(){w==="Bookmark"&&we()}function pe(){return T}function be(R){n(10,F=R.target.value),ve.set("treeItemSorting",o,{sortBy:F,sortAsc:B}),we()}function Ie(R){R.preventDefault(),n(9,B=!B),ve.set("treeItemSorting",o,{sortBy:F,sortAsc:B}),we()}function We(R){Pt.get(o,"leftSidebar",null,null,re=>{T=re,n(5,k=re.layout.map(he=>{const O=ce.get(["entityDefs",o,"fields",he.name,"type"]);let H="";if(he.name==="_self")H=z.get("Global","scopeNamesPlural",o);else if(he.name==="_bookmark")H=z.get("Global","scopeNamesPlural","Bookmark");else{if(O=="link"){const U=le(he.name);H=z.get("Global","scopeNamesPlural",U)}H||(H=z.get(o,"links",he.name)||z.get(o,"fields",he.name)||z.get("Global","fields",he.name))}return{name:he.name,label:H}}));const K=ve.get("treeItem",o);k.length>0&&(!K||!k.find(he=>he.name===K)?(ve.set("treeItem",o,k[0].name),n(1,L=k[0])):n(1,L=k.find(he=>he.name===K)),_t(!0)),R()})}function _t(R){var re;if(n(40,w=le(L.name)),w==="Bookmark"&&n(40,w=o),R&&L.name===ve.get("treeItem",o)){const K=ve.get("treeItemSorting",o);if(K&&typeof K=="object"&&ce.get(["entityDefs",w,"fields",K.sortBy])){n(9,B=K.sortAsc),n(10,F=K.sortBy);return}}ce.get(["scopes",w,"type"])==="Hierarchy"&&!ce.get(["scopes",w,"hierarchyDisabled"])&&L.name!=="_bookmark"?n(10,F="sortOrder"):n(10,F=ce.get(["entityDefs",w,"collection","sortBy"])||"name"),ce.get(["entityDefs",w,"fields",F])||n(10,F=(re=I[0])==null?void 0:re.name),n(9,B=!!ce.get(["entityDefs",w,"collection","asc"])),ve.set("treeItemSorting",o,{sortBy:F,sortAsc:B})}function Bt(){We(()=>{pn().then(()=>{we()})})}fn(()=>{const R=ve.get("panelWidth",o);return R&&n(22,c=parseInt(R)||u),(window.innerWidth<=767||ve.get("catalog-tree-panel",o))&&n(0,d=!0),We(()=>{var re,K;k.length===0&&(n(0,d=!0),(K=(re=wi.get())==null?void 0:re.user)!=null&&K.isAdmin||n(8,N=!0)),pn().then(()=>{n(6,S=ve.get("treeSearchValue",o)||null),S&&n(4,_.value=S,_),d||De()}),v&&v(y)}),()=>{D&&ke()}});function $t(R){ze[R?"unshift":"push"](()=>{y=R,n(3,y)})}const kn=R=>ye(R);function Dn(R){ze[R?"unshift":"push"](()=>{_=R,n(4,_)})}const Sn=R=>R.key==="Enter"&&Ue();function Cn(){F=Fu(this),n(10,F),n(11,I),n(40,w),n(23,o),n(1,L)}function Mr(R){ze[R?"unshift":"push"](()=>{g=R,n(2,g)})}return t.$$set=R=>{"scope"in R&&n(23,o=R.scope),"model"in R&&n(24,a=R.model),"collection"in R&&n(25,s=R.collection),"callbacks"in R&&n(26,l=R.callbacks),"minWidth"in R&&n(27,u=R.minWidth),"maxWidth"in R&&n(28,f=R.maxWidth),"currentWidth"in R&&n(22,c=R.currentWidth),"isCollapsed"in R&&n(0,d=R.isCollapsed),"mode"in R&&n(29,h=R.mode),"maxSize"in R&&n(30,p=R.maxSize),"renderLayoutEditor"in R&&n(31,v=R.renderLayoutEditor)},t.$$.update=()=>{if(t.$$.dirty[0]&71303168&&c&&l!=null&&l.treeWidthChanged&&l.treeWidthChanged(c),t.$$.dirty[0]&4194305&&n(13,i=d?"auto":`${c}px`),t.$$.dirty[0]&2&&n(40,w=L?le(L.name):null),t.$$.dirty[0]&536870914&&n(12,r=L&&!["_self","_bookmark"].includes(L.name)&&h==="list"),t.$$.dirty[0]&8388608|t.$$.dirty[1]&512)if(!w)n(11,I=[]);else{const R=w==="Bookmark"?o:w,re=ce.get(["entityDefs",R,"fields"]);n(11,I=Object.keys(re).filter(function(K){return["varchar","text","int","float","date","datetime"].includes(re[K].type)&&!re[K].notStorable}).sort(function(K,he){return z.translate(K,"fields",R).localeCompare(z.translate(he,"fields",R))}).map(K=>({name:K,label:z.translate(K,"fields",R)})))}},[d,L,g,y,_,k,S,P,N,B,F,I,r,i,V,ee,ut,ye,Ce,Ue,be,Ie,c,o,a,s,l,u,f,h,p,v,M,we,mt,W,x,te,pe,Bt,w,$t,kn,Dn,Sn,Cn,Mr]}class Mc extends Ge{constructor(e){super(),qe(this,e,Pc,Ac,Pe,{scope:23,model:24,collection:25,callbacks:26,minWidth:27,maxWidth:28,currentWidth:22,isCollapsed:0,mode:29,maxSize:30,renderLayoutEditor:31,handleCollectionSearch:32,rebuildTree:33,selectTreeNode:34,unSelectTreeNode:35,getTreeEl:36,reloadBookmarks:37,getLayoutData:38,refreshLayout:39},null,[-1,-1,-1])}get handleCollectionSearch(){return this.$$.ctx[32]}get rebuildTree(){return this.$$.ctx[33]}get selectTreeNode(){return this.$$.ctx[34]}get unSelectTreeNode(){return this.$$.ctx[35]}get getTreeEl(){return this.$$.ctx[36]}get reloadBookmarks(){return this.$$.ctx[37]}get getLayoutData(){return this.$$.ctx[38]}get refreshLayout(){return this.$$.ctx[39]}}const Nc="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20height='24px'%20viewBox='0%20-960%20960%20960'%20width='24px'%20fill='%23000'%3e%3cpath%20d='M200-120q-33%200-56.5-23.5T120-200v-560q0-33%2023.5-56.5T200-840h560q33%200%2056.5%2023.5T840-760v560q0%2033-23.5%2056.5T760-120H200Zm0-80h560v-560H200v560Zm40-80h480L570-480%20450-320l-90-120-120%20160Zm-40%2080v-560%20560Z'/%3e%3c/svg%3e",Rc="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20height='24px'%20viewBox='0%20-960%20960%20960'%20width='24px'%20fill='%23000'%3e%3cpath%20d='m840-234-80-80v-446H314l-80-80h526q33%200%2056.5%2023.5T840-760v526ZM792-56l-64-64H200q-33%200-56.5-23.5T120-200v-528l-64-64%2056-56%20736%20736-56%2056ZM240-280l120-160%2090%20120%2033-44-283-283v447h447l-80-80H240Zm297-257ZM424-424Z'/%3e%3c/svg%3e";function Tl(t,e,n){const i=t.slice();return i[32]=e[n],i}function Al(t){let e,n=t[32].label+"",i,r,o;function a(){return t[18](t[32])}return{c(){e=C("a"),i=Ee(n),b(e,"href","javascript:"),b(e,"class","btn btn-link item svelte-667qfp")},m(s,l){Y(s,e,l),E(e,i),r||(o=fe(e,"click",a),r=!0)},p(s,l){t=s,l[0]&8&&n!==(n=t[32].label+"")&&Fe(i,n)},d(s){s&&X(e),r=!1,o()}}}function Ol(t){let e,n=t[32].name!==t[4].name&&Al(t);return{c(){n&&n.c(),e=hi()},m(i,r){n&&n.m(i,r),Y(i,e,r)},p(i,r){i[32].name!==i[4].name?n?n.p(i,r):(n=Al(i),n.c(),n.m(e.parentNode,e)):n&&(n.d(1),n=null)},d(i){i&&X(e),n&&n.d(i)}}}function Ll(t){let e,n,i,r,o,a,s,l,u;return{c(){e=C("button"),n=C("img"),r=j(),o=C("img"),pi(n.src,i=Nc)||b(n,"src",i),b(n,"alt","image"),ne(n,"hidden",!t[2]),pi(o.src,a=Rc)||b(o,"src",a),b(o,"alt","hide_image"),ne(o,"hidden",t[2]),b(e,"class","btn btn-link"),se(e,"padding","0"),se(e,"border","0"),se(e,"margin-left","-2px"),b(e,"title",s=z.translate(t[2]?"enableAutomaticClosing":"disableAutomaticClosing"))},m(f,c){Y(f,e,c),E(e,n),E(e,r),E(e,o),l||(u=fe(e,"click",t[11]),l=!0)},p(f,c){c[0]&4&&ne(n,"hidden",!f[2]),c[0]&4&&ne(o,"hidden",f[2]),c[0]&4&&s!==(s=z.translate(f[2]?"enableAutomaticClosing":"disableAutomaticClosing"))&&b(e,"title",s)},d(f){f&&X(e),l=!1,u()}}}function Il(t){let e,n,i;return{c(){e=C("div"),b(e,"class","side-panel-resizer svelte-667qfp")},m(r,o){Y(r,e,o),n||(i=fe(e,"mousedown",t[6]),n=!0)},p:Ae,d(r){r&&X(e),n=!1,i()}}}function Bc(t){let e,n,i,r,o,a,s,l,u,f,c,d,h,p,v,g,y=t[4].label+"",_,D,m,A,k,L,S,w,T,P,N=_e(t[3]),B=[];for(let M=0;M<N.length;M+=1)B[M]=Ol(Tl(t,N,M));let F=!t[1]&&Ll(t),I=!t[0]&&Il(t);return{c(){e=C("div"),n=j(),i=C("aside"),r=C("div"),o=j(),a=C("button"),s=C("span"),l=j(),u=C("span"),f=j(),c=C("div"),d=C("div");for(let M=0;M<B.length;M+=1)B[M].c();h=j(),F&&F.c(),p=j(),v=C("div"),g=C("h5"),_=Ee(y),D=j(),m=C("div"),A=j(),k=C("div"),k.innerHTML="",L=j(),S=C("div"),S.innerHTML="",w=j(),I&&I.c(),b(e,"class","svelte-667qfp"),ne(e,"expanded",!t[0]),ne(e,"not-pinned",!t[2]||t[1]),b(r,"class","collapse-strip svelte-667qfp"),b(s,"class","toggle-icon-left fas fa-angle-left"),ne(s,"hidden",!t[0]),b(u,"class","toggle-icon-right fas fa-angle-right"),ne(u,"hidden",t[0]),b(a,"type","button"),b(a,"class","btn btn-link collapse-panel svelte-667qfp"),b(d,"class","btn-group svelte-667qfp"),se(g,"font-weight","bold"),se(g,"margin-right","10px"),se(g,"font-size","16px"),b(m,"class","layout-editor-container"),ne(m,"hidden",t[4].name!=="summary"),se(v,"display","flex"),se(v,"align-items","center"),b(k,"class","summary"),ne(k,"hidden",t[4].name!=="summary"),b(S,"class","activities"),ne(S,"hidden",t[4].name!=="activities"),b(c,"class","content svelte-667qfp"),b(i,"class","right-side-view svelte-667qfp"),se(i,"width",t[5]),ne(i,"collapsed",t[0]),ne(i,"expanded",!t[0]),ne(i,"pinned",t[2]&&!t[1])},m(M,V){Y(M,e,V),Y(M,n,V),Y(M,i,V),E(i,r),E(i,o),E(i,a),E(a,s),E(a,l),E(a,u),E(i,f),E(i,c),E(c,d);for(let $=0;$<B.length;$+=1)B[$]&&B[$].m(d,null);E(d,h),F&&F.m(d,null),E(c,p),E(c,v),E(v,g),E(g,_),E(v,D),E(v,m),E(c,A),E(c,k),E(c,L),E(c,S),E(c,w),I&&I.m(c,null),T||(P=[fe(r,"click",Nu(t[8])),fe(a,"click",t[8]),fe(i,"mouseenter",t[10]),fe(i,"mouseleave",t[9])],T=!0)},p(M,V){if(V[0]&1&&ne(e,"expanded",!M[0]),V[0]&6&&ne(e,"not-pinned",!M[2]||M[1]),V[0]&1&&ne(s,"hidden",!M[0]),V[0]&1&&ne(u,"hidden",M[0]),V[0]&152){N=_e(M[3]);let $;for($=0;$<N.length;$+=1){const ee=Tl(M,N,$);B[$]?B[$].p(ee,V):(B[$]=Ol(ee),B[$].c(),B[$].m(d,h))}for(;$<B.length;$+=1)B[$].d(1);B.length=N.length}M[1]?F&&(F.d(1),F=null):F?F.p(M,V):(F=Ll(M),F.c(),F.m(d,null)),V[0]&16&&y!==(y=M[4].label+"")&&Fe(_,y),V[0]&16&&ne(m,"hidden",M[4].name!=="summary"),V[0]&16&&ne(k,"hidden",M[4].name!=="summary"),V[0]&16&&ne(S,"hidden",M[4].name!=="activities"),M[0]?I&&(I.d(1),I=null):I?I.p(M,V):(I=Il(M),I.c(),I.m(c,null)),V[0]&32&&se(i,"width",M[5]),V[0]&1&&ne(i,"collapsed",M[0]),V[0]&1&&ne(i,"expanded",!M[0]),V[0]&6&&ne(i,"pinned",M[2]&&!M[1])},i:Ae,o:Ae,d(M){M&&(X(e),X(n),X(i)),un(B,M),F&&F.d(),I&&I.d(),T=!1,at(P)}}}function Fc(t,e,n){let i,{scope:r}=e,{minWidth:o=300}=e,{maxWidth:a=600}=e,{currentWidth:s=o}=e,{loadSummary:l}=e,{loadActivities:u}=e,{isCollapsed:f=!1}=e,c=!1,d,h,p,v,g=!1,y=!0,_,D=[{name:"summary",label:z.translate("Summary")}],m=D[0],A=!1;const k=()=>{n(1,A=window.innerWidth<=768)};function L(){return ce.get(["scopes",r,"stream"])===!0}function S(ee){if(!c)return;ee.preventDefault();const ke=h+(d-ee.pageX);ke>=o&&ke<=a&&n(12,s=ke)}function w(ee){c=!0,d=ee.pageX,h=s,document.addEventListener("mousemove",S),document.addEventListener("mouseup",T,{once:!0}),document.body.style.userSelect="none"}function T(){c&&(c=!1,ve.set("rightSideView",r,s.toString()),document.removeEventListener("mousemove",S),document.body.style.userSelect="")}function P(ee){m&&m.name===ee.name||(n(4,m=ee),m.name==="activities"&&V(),ve.set("right-side-view-active-item",r,m.name))}function N(ee){B(!f)}function B(ee){n(0,f=ee),ve.set("right-side-view-collapse",r,f?"collapsed":""),m.name==="activities"&&V()}function F(){y||(g=!1,v!==null&&clearTimeout(v),v=null,p=setTimeout(()=>{g||B(!0)},500))}function I(){y||(g=!0,p!==null&&clearTimeout(p),p=null,f&&(v=setTimeout(()=>{g&&B(!1)},500)))}function M(ee){n(2,y=!y),ve.set("right-side-view-pin",r,y?"pin":"not-pinned")}function V(){f||(_==null?u(ee=>{_=ee}):_==null||_.refresh())}fn(()=>{const ee=ve.get("rightSideView",r);ee&&n(12,s=parseInt(ee)||o),k(),n(0,f=ve.get("right-side-view-collapse",r)==="collapsed"||A),n(2,y=ve.get("right-side-view-pin",r)!=="not-pinned"),window.addEventListener("resize",k),l(),L()&&n(3,D=[...D,{name:"activities",label:z.translate("Activities")}]);let ke=ve.get("right-side-view-active-item",r);return ke&&D.map(we=>we.name).includes(ke)&&P(D.find(we=>we.name===ke)),()=>{p!==null&&clearTimeout(p),v!==null&&clearTimeout(v),window.removeEventListener("resize",k)}});const $=ee=>P(ee);return t.$$set=ee=>{"scope"in ee&&n(13,r=ee.scope),"minWidth"in ee&&n(14,o=ee.minWidth),"maxWidth"in ee&&n(15,a=ee.maxWidth),"currentWidth"in ee&&n(12,s=ee.currentWidth),"loadSummary"in ee&&n(16,l=ee.loadSummary),"loadActivities"in ee&&n(17,u=ee.loadActivities),"isCollapsed"in ee&&n(0,f=ee.isCollapsed)},t.$$.update=()=>{t.$$.dirty[0]&4099&&n(5,i=A?`${window.innerWidth*.9}px`:f?"auto":`${s}px`)},[f,A,y,D,m,i,w,P,N,F,I,M,s,r,o,a,l,u,$]}class xc extends Ge{constructor(e){super(),qe(this,e,Fc,Bc,Pe,{scope:13,minWidth:14,maxWidth:15,currentWidth:12,loadSummary:16,loadActivities:17,isCollapsed:0},null,[-1,-1])}}window.SvelteLanguage=z,window.SvelteUserData=wi,window.SvelteNotifier=tt,window.SvelteLayoutManager=Pt,window.SvelteMetadata=ce,window.SvelteModelFactory=pr,window.SvelteConfig=la,window.SvelteStorage=ve,window.driver=$l,window.tippy=Fn,Be.ApiRequestComponent=fc,Be.Favorites=Cc,Be.JobManagerIcon=nf,Be.LayoutComponent=lc,Be.Navigation=Ec,Be.RightSideView=xc,Be.TreePanel=Mc,Be.UpdatePanel=ff,Object.defineProperty(Be,Symbol.toStringTag,{value:"Module"})});
