(function(pe,he){typeof exports=="object"&&typeof module<"u"?he(exports):typeof define=="function"&&define.amd?define(["exports"],he):(pe=typeof globalThis<"u"?globalThis:pe||self,he(pe.Svelte={}))})(this,function(pe){"use strict";var ur=Object.defineProperty;var cr=(pe,he,Ke)=>he in pe?ur(pe,he,{enumerable:!0,configurable:!0,writable:!0,value:Ke}):pe[he]=Ke;var Hn=(pe,he,Ke)=>cr(pe,typeof he!="symbol"?he+"":he,Ke);let he={};function Ke(t={}){he={animate:!0,allowClose:!0,overlayOpacity:.7,smoothScroll:!1,disableActiveInteraction:!1,showProgress:!1,stagePadding:10,stageRadius:5,popoverOffset:10,showButtons:["next","previous","close"],disableButtons:[],overlayColor:"#000",...t}}function I(t){return t?he[t]:he}function Nt(t,e,n,i){return(t/=i/2)<1?n/2*t*t+e:-n/2*(--t*(t-2)-1)+e}function Wn(t){const e='a[href]:not([disabled]), button:not([disabled]), textarea:not([disabled]), input[type="text"]:not([disabled]), input[type="radio"]:not([disabled]), input[type="checkbox"]:not([disabled]), select:not([disabled])';return t.flatMap(n=>{const i=n.matches(e),o=Array.from(n.querySelectorAll(e));return[...i?[n]:[],...o]}).filter(n=>getComputedStyle(n).pointerEvents!=="none"&&uo(n))}function qn(t){if(!t||so(t))return;const e=I("smoothScroll");t.scrollIntoView({behavior:!e||ao(t)?"auto":"smooth",inline:"center",block:"center"})}function ao(t){if(!t||!t.parentElement)return;const e=t.parentElement;return e.scrollHeight>e.clientHeight}function so(t){const e=t.getBoundingClientRect();return e.top>=0&&e.left>=0&&e.bottom<=(window.innerHeight||document.documentElement.clientHeight)&&e.right<=(window.innerWidth||document.documentElement.clientWidth)}function uo(t){return!!(t.offsetWidth||t.offsetHeight||t.getClientRects().length)}let xt={};function se(t,e){xt[t]=e}function O(t){return t?xt[t]:xt}function zn(){xt={}}let Bt={};function Rt(t,e){Bt[t]=e}function it(t){var e;(e=Bt[t])==null||e.call(Bt)}function co(){Bt={}}function fo(t,e,n,i){let o=O("__activeStagePosition");const l=o||n.getBoundingClientRect(),r=i.getBoundingClientRect(),s=Nt(t,l.x,r.x-l.x,e),a=Nt(t,l.y,r.y-l.y,e),u=Nt(t,l.width,r.width-l.width,e),c=Nt(t,l.height,r.height-l.height,e);o={x:s,y:a,width:u,height:c},Xn(o),se("__activeStagePosition",o)}function Yn(t){if(!t)return;const e=t.getBoundingClientRect(),n={x:e.x,y:e.y,width:e.width,height:e.height};se("__activeStagePosition",n),Xn(n)}function po(){const t=O("__activeStagePosition"),e=O("__overlaySvg");if(!t)return;if(!e){console.warn("No stage svg found.");return}const n=window.innerWidth,i=window.innerHeight;e.setAttribute("viewBox",`0 0 ${n} ${i}`)}function ho(t){const e=mo(t);document.body.appendChild(e),Vn(e,n=>{n.target.tagName==="path"&&it("overlayClick")}),se("__overlaySvg",e)}function Xn(t){const e=O("__overlaySvg");if(!e){ho(t);return}const n=e.firstElementChild;if((n==null?void 0:n.tagName)!=="path")throw new Error("no path element found in stage svg");n.setAttribute("d",jn(t))}function mo(t){const e=window.innerWidth,n=window.innerHeight,i=document.createElementNS("http://www.w3.org/2000/svg","svg");i.classList.add("driver-overlay","driver-overlay-animated"),i.setAttribute("viewBox",`0 0 ${e} ${n}`),i.setAttribute("xmlSpace","preserve"),i.setAttribute("xmlnsXlink","http://www.w3.org/1999/xlink"),i.setAttribute("version","1.1"),i.setAttribute("preserveAspectRatio","xMinYMin slice"),i.style.fillRule="evenodd",i.style.clipRule="evenodd",i.style.strokeLinejoin="round",i.style.strokeMiterlimit="2",i.style.zIndex="10000",i.style.position="fixed",i.style.top="0",i.style.left="0",i.style.width="100%",i.style.height="100%";const o=document.createElementNS("http://www.w3.org/2000/svg","path");return o.setAttribute("d",jn(t)),o.style.fill=I("overlayColor")||"rgb(0,0,0)",o.style.opacity=`${I("overlayOpacity")}`,o.style.pointerEvents="auto",o.style.cursor="auto",i.appendChild(o),i}function jn(t){const e=window.innerWidth,n=window.innerHeight,i=I("stagePadding")||0,o=I("stageRadius")||0,l=t.width+i*2,r=t.height+i*2,s=Math.min(o,l/2,r/2),a=Math.floor(Math.max(s,0)),u=t.x-i+a,c=t.y-i,d=l-a*2,p=r-a*2;return`M${e},0L0,0L0,${n}L${e},${n}L${e},0Z
    M${u},${c} h${d} a${a},${a} 0 0 1 ${a},${a} v${p} a${a},${a} 0 0 1 -${a},${a} h-${d} a${a},${a} 0 0 1 -${a},-${a} v-${p} a${a},${a} 0 0 1 ${a},-${a} z`}function go(){const t=O("__overlaySvg");t&&t.remove()}function vo(){const t=document.getElementById("driver-dummy-element");if(t)return t;let e=document.createElement("div");return e.id="driver-dummy-element",e.style.width="0",e.style.height="0",e.style.pointerEvents="none",e.style.opacity="0",e.style.position="fixed",e.style.top="50%",e.style.left="50%",document.body.appendChild(e),e}function Gn(t){const{element:e}=t;let n=typeof e=="string"?document.querySelector(e):e;n||(n=vo()),yo(n,t)}function bo(){const t=O("__activeElement"),e=O("__activeStep");t&&(Yn(t),po(),$n(t,e))}function yo(t,e){const n=Date.now(),i=O("__activeStep"),o=O("__activeElement")||t,l=!o||o===t,r=t.id==="driver-dummy-element",s=o.id==="driver-dummy-element",a=I("animate"),u=e.onHighlightStarted||I("onHighlightStarted"),c=(e==null?void 0:e.onHighlighted)||I("onHighlighted"),d=(i==null?void 0:i.onDeselected)||I("onDeselected"),p=I(),f=O();!l&&d&&d(s?void 0:o,i,{config:p,state:f}),u&&u(r?void 0:t,e,{config:p,state:f});const h=!l&&a;let v=!1;So(),se("previousStep",i),se("previousElement",o),se("activeStep",e),se("activeElement",t);const g=()=>{if(O("__transitionCallback")!==g)return;const y=Date.now()-n,k=400-y<=400/2;e.popover&&k&&!v&&h&&(Jn(t,e),v=!0),I("animate")&&y<400?fo(y,400,o,t):(Yn(t),c&&c(r?void 0:t,e,{config:I(),state:O()}),se("__transitionCallback",void 0),se("__previousStep",i),se("__previousElement",o),se("__activeStep",e),se("__activeElement",t)),window.requestAnimationFrame(g)};se("__transitionCallback",g),window.requestAnimationFrame(g),qn(t),!h&&e.popover&&Jn(t,e),o.classList.remove("driver-active-element","driver-no-interaction"),o.removeAttribute("aria-haspopup"),o.removeAttribute("aria-expanded"),o.removeAttribute("aria-controls"),I("disableActiveInteraction")&&t.classList.add("driver-no-interaction"),t.classList.add("driver-active-element"),t.setAttribute("aria-haspopup","dialog"),t.setAttribute("aria-expanded","true"),t.setAttribute("aria-controls","driver-popover-content")}function wo(){var t;(t=document.getElementById("driver-dummy-element"))==null||t.remove(),document.querySelectorAll(".driver-active-element").forEach(e=>{e.classList.remove("driver-active-element","driver-no-interaction"),e.removeAttribute("aria-haspopup"),e.removeAttribute("aria-expanded"),e.removeAttribute("aria-controls")})}function wt(){const t=O("__resizeTimeout");t&&window.cancelAnimationFrame(t),se("__resizeTimeout",window.requestAnimationFrame(bo))}function _o(t){var e;if(!O("isInitialized")||!(t.key==="Tab"||t.keyCode===9))return;const n=O("__activeElement"),i=(e=O("popover"))==null?void 0:e.wrapper,o=Wn([...i?[i]:[],...n?[n]:[]]),l=o[0],r=o[o.length-1];if(t.preventDefault(),t.shiftKey){const s=o[o.indexOf(document.activeElement)-1]||r;s==null||s.focus()}else{const s=o[o.indexOf(document.activeElement)+1]||l;s==null||s.focus()}}function Un(t){var e;((e=I("allowKeyboardControl"))==null||e)&&(t.key==="Escape"?it("escapePress"):t.key==="ArrowRight"?it("arrowRightPress"):t.key==="ArrowLeft"&&it("arrowLeftPress"))}function Vn(t,e,n){const i=(o,l)=>{const r=o.target;t.contains(r)&&((!n||n(r))&&(o.preventDefault(),o.stopPropagation(),o.stopImmediatePropagation()),l==null||l(o))};document.addEventListener("pointerdown",i,!0),document.addEventListener("mousedown",i,!0),document.addEventListener("pointerup",i,!0),document.addEventListener("mouseup",i,!0),document.addEventListener("click",o=>{i(o,e)},!0)}function Eo(){window.addEventListener("keyup",Un,!1),window.addEventListener("keydown",_o,!1),window.addEventListener("resize",wt),window.addEventListener("scroll",wt)}function Do(){window.removeEventListener("keyup",Un),window.removeEventListener("resize",wt),window.removeEventListener("scroll",wt)}function So(){const t=O("popover");t&&(t.wrapper.style.display="none")}function Jn(t,e){var n,i;let o=O("popover");o&&document.body.removeChild(o.wrapper),o=ko(),document.body.appendChild(o.wrapper);const{title:l,description:r,showButtons:s,disableButtons:a,showProgress:u,nextBtnText:c=I("nextBtnText")||"Next &rarr;",prevBtnText:d=I("prevBtnText")||"&larr; Previous",progressText:p=I("progressText")||"{current} of {total}"}=e.popover||{};o.nextButton.innerHTML=c,o.previousButton.innerHTML=d,o.progress.innerHTML=p,l?(o.title.innerHTML=l,o.title.style.display="block"):o.title.style.display="none",r?(o.description.innerHTML=r,o.description.style.display="block"):o.description.style.display="none";const f=s||I("showButtons"),h=u||I("showProgress")||!1,v=(f==null?void 0:f.includes("next"))||(f==null?void 0:f.includes("previous"))||h;o.closeButton.style.display=f.includes("close")?"block":"none",v?(o.footer.style.display="flex",o.progress.style.display=h?"block":"none",o.nextButton.style.display=f.includes("next")?"block":"none",o.previousButton.style.display=f.includes("previous")?"block":"none"):o.footer.style.display="none";const g=a||I("disableButtons")||[];g!=null&&g.includes("next")&&(o.nextButton.disabled=!0,o.nextButton.classList.add("driver-popover-btn-disabled")),g!=null&&g.includes("previous")&&(o.previousButton.disabled=!0,o.previousButton.classList.add("driver-popover-btn-disabled")),g!=null&&g.includes("close")&&(o.closeButton.disabled=!0,o.closeButton.classList.add("driver-popover-btn-disabled"));const y=o.wrapper;y.style.display="block",y.style.left="",y.style.top="",y.style.bottom="",y.style.right="",y.id="driver-popover-content",y.setAttribute("role","dialog"),y.setAttribute("aria-labelledby","driver-popover-title"),y.setAttribute("aria-describedby","driver-popover-description");const k=o.arrow;k.className="driver-popover-arrow";const _=((n=e.popover)==null?void 0:n.popoverClass)||I("popoverClass")||"";y.className=`driver-popover ${_}`.trim(),Vn(o.wrapper,C=>{var R,L,Z;const Q=C.target,z=((R=e.popover)==null?void 0:R.onNextClick)||I("onNextClick"),G=((L=e.popover)==null?void 0:L.onPrevClick)||I("onPrevClick"),J=((Z=e.popover)==null?void 0:Z.onCloseClick)||I("onCloseClick");if(Q.classList.contains("driver-popover-next-btn"))return z?z(t,e,{config:I(),state:O()}):it("nextClick");if(Q.classList.contains("driver-popover-prev-btn"))return G?G(t,e,{config:I(),state:O()}):it("prevClick");if(Q.classList.contains("driver-popover-close-btn"))return J?J(t,e,{config:I(),state:O()}):it("closeClick")},C=>!(o!=null&&o.description.contains(C))&&!(o!=null&&o.title.contains(C))&&typeof C.className=="string"&&C.className.includes("driver-popover")),se("popover",o);const E=((i=e.popover)==null?void 0:i.onPopoverRender)||I("onPopoverRender");E&&E(o,{config:I(),state:O()}),$n(t,e),qn(y);const b=t.classList.contains("driver-dummy-element"),D=Wn([y,...b?[]:[t]]);D.length>0&&D[0].focus()}function Kn(){const t=O("popover");if(!(t!=null&&t.wrapper))return;const e=t.wrapper.getBoundingClientRect(),n=I("stagePadding")||0,i=I("popoverOffset")||0;return{width:e.width+n+i,height:e.height+n+i,realWidth:e.width,realHeight:e.height}}function Qn(t,e){const{elementDimensions:n,popoverDimensions:i,popoverPadding:o,popoverArrowDimensions:l}=e;return t==="start"?Math.max(Math.min(n.top-o,window.innerHeight-i.realHeight-l.width),l.width):t==="end"?Math.max(Math.min(n.top-(i==null?void 0:i.realHeight)+n.height+o,window.innerHeight-(i==null?void 0:i.realHeight)-l.width),l.width):t==="center"?Math.max(Math.min(n.top+n.height/2-(i==null?void 0:i.realHeight)/2,window.innerHeight-(i==null?void 0:i.realHeight)-l.width),l.width):0}function Zn(t,e){const{elementDimensions:n,popoverDimensions:i,popoverPadding:o,popoverArrowDimensions:l}=e;return t==="start"?Math.max(Math.min(n.left-o,window.innerWidth-i.realWidth-l.width),l.width):t==="end"?Math.max(Math.min(n.left-(i==null?void 0:i.realWidth)+n.width+o,window.innerWidth-(i==null?void 0:i.realWidth)-l.width),l.width):t==="center"?Math.max(Math.min(n.left+n.width/2-(i==null?void 0:i.realWidth)/2,window.innerWidth-(i==null?void 0:i.realWidth)-l.width),l.width):0}function $n(t,e){const n=O("popover");if(!n)return;const{align:i="start",side:o="left"}=(e==null?void 0:e.popover)||{},l=i,r=t.id==="driver-dummy-element"?"over":o,s=I("stagePadding")||0,a=Kn(),u=n.arrow.getBoundingClientRect(),c=t.getBoundingClientRect(),d=c.top-a.height;let p=d>=0;const f=window.innerHeight-(c.bottom+a.height);let h=f>=0;const v=c.left-a.width;let g=v>=0;const y=window.innerWidth-(c.right+a.width);let k=y>=0;const _=!p&&!h&&!g&&!k;let E=r;if(r==="top"&&p?k=g=h=!1:r==="bottom"&&h?k=g=p=!1:r==="left"&&g?k=p=h=!1:r==="right"&&k&&(g=p=h=!1),r==="over"){const b=window.innerWidth/2-a.realWidth/2,D=window.innerHeight/2-a.realHeight/2;n.wrapper.style.left=`${b}px`,n.wrapper.style.right="auto",n.wrapper.style.top=`${D}px`,n.wrapper.style.bottom="auto"}else if(_){const b=window.innerWidth/2-(a==null?void 0:a.realWidth)/2,D=10;n.wrapper.style.left=`${b}px`,n.wrapper.style.right="auto",n.wrapper.style.bottom=`${D}px`,n.wrapper.style.top="auto"}else if(g){const b=Math.min(v,window.innerWidth-(a==null?void 0:a.realWidth)-u.width),D=Qn(l,{elementDimensions:c,popoverDimensions:a,popoverPadding:s,popoverArrowDimensions:u});n.wrapper.style.left=`${b}px`,n.wrapper.style.top=`${D}px`,n.wrapper.style.bottom="auto",n.wrapper.style.right="auto",E="left"}else if(k){const b=Math.min(y,window.innerWidth-(a==null?void 0:a.realWidth)-u.width),D=Qn(l,{elementDimensions:c,popoverDimensions:a,popoverPadding:s,popoverArrowDimensions:u});n.wrapper.style.right=`${b}px`,n.wrapper.style.top=`${D}px`,n.wrapper.style.bottom="auto",n.wrapper.style.left="auto",E="right"}else if(p){const b=Math.min(d,window.innerHeight-a.realHeight-u.width);let D=Zn(l,{elementDimensions:c,popoverDimensions:a,popoverPadding:s,popoverArrowDimensions:u});n.wrapper.style.top=`${b}px`,n.wrapper.style.left=`${D}px`,n.wrapper.style.bottom="auto",n.wrapper.style.right="auto",E="top"}else if(h){const b=Math.min(f,window.innerHeight-(a==null?void 0:a.realHeight)-u.width);let D=Zn(l,{elementDimensions:c,popoverDimensions:a,popoverPadding:s,popoverArrowDimensions:u});n.wrapper.style.left=`${D}px`,n.wrapper.style.bottom=`${b}px`,n.wrapper.style.top="auto",n.wrapper.style.right="auto",E="bottom"}_?n.arrow.classList.add("driver-popover-arrow-none"):Co(l,E,t)}function Co(t,e,n){const i=O("popover");if(!i)return;const o=n.getBoundingClientRect(),l=Kn(),r=i.arrow,s=l.width,a=window.innerWidth,u=o.width,c=o.left,d=l.height,p=window.innerHeight,f=o.top,h=o.height;r.className="driver-popover-arrow";let v=e,g=t;e==="top"?(c+u<=0?(v="right",g="end"):c+u-s<=0&&(v="top",g="start"),c>=a?(v="left",g="end"):c+s>=a&&(v="top",g="end")):e==="bottom"?(c+u<=0?(v="right",g="start"):c+u-s<=0&&(v="bottom",g="start"),c>=a?(v="left",g="start"):c+s>=a&&(v="bottom",g="end")):e==="left"?(f+h<=0?(v="bottom",g="end"):f+h-d<=0&&(v="left",g="start"),f>=p?(v="top",g="end"):f+d>=p&&(v="left",g="end")):e==="right"&&(f+h<=0?(v="bottom",g="start"):f+h-d<=0&&(v="right",g="start"),f>=p?(v="top",g="start"):f+d>=p&&(v="right",g="end")),v?(r.classList.add(`driver-popover-arrow-side-${v}`),r.classList.add(`driver-popover-arrow-align-${g}`)):r.classList.add("driver-popover-arrow-none")}function ko(){const t=document.createElement("div");t.classList.add("driver-popover");const e=document.createElement("div");e.classList.add("driver-popover-arrow");const n=document.createElement("header");n.id="driver-popover-title",n.classList.add("driver-popover-title"),n.style.display="none",n.innerText="Popover Title";const i=document.createElement("div");i.id="driver-popover-description",i.classList.add("driver-popover-description"),i.style.display="none",i.innerText="Popover description is here";const o=document.createElement("button");o.type="button",o.classList.add("driver-popover-close-btn"),o.setAttribute("aria-label","Close"),o.innerHTML="&times;";const l=document.createElement("footer");l.classList.add("driver-popover-footer");const r=document.createElement("span");r.classList.add("driver-popover-progress-text"),r.innerText="";const s=document.createElement("span");s.classList.add("driver-popover-navigation-btns");const a=document.createElement("button");a.type="button",a.classList.add("driver-popover-prev-btn"),a.innerHTML="&larr; Previous";const u=document.createElement("button");return u.type="button",u.classList.add("driver-popover-next-btn"),u.innerHTML="Next &rarr;",s.appendChild(a),s.appendChild(u),l.appendChild(r),l.appendChild(s),t.appendChild(o),t.appendChild(e),t.appendChild(n),t.appendChild(i),t.appendChild(l),{wrapper:t,arrow:e,title:n,description:i,footer:l,previousButton:a,nextButton:u,closeButton:o,footerButtons:s,progress:r}}function Po(){var t;const e=O("popover");e&&((t=e.wrapper.parentElement)==null||t.removeChild(e.wrapper))}function Lo(t={}){Ke(t);function e(){I("allowClose")&&u()}function n(){const c=O("activeIndex"),d=I("steps")||[];if(typeof c>"u")return;const p=c+1;d[p]?a(p):u()}function i(){const c=O("activeIndex"),d=I("steps")||[];if(typeof c>"u")return;const p=c-1;d[p]?a(p):u()}function o(c){(I("steps")||[])[c]?a(c):u()}function l(){var c;if(O("__transitionCallback"))return;const d=O("activeIndex"),p=O("__activeStep"),f=O("__activeElement");if(typeof d>"u"||typeof p>"u"||typeof O("activeIndex")>"u")return;const h=((c=p.popover)==null?void 0:c.onPrevClick)||I("onPrevClick");if(h)return h(f,p,{config:I(),state:O()});i()}function r(){var c;if(O("__transitionCallback"))return;const d=O("activeIndex"),p=O("__activeStep"),f=O("__activeElement");if(typeof d>"u"||typeof p>"u")return;const h=((c=p.popover)==null?void 0:c.onNextClick)||I("onNextClick");if(h)return h(f,p,{config:I(),state:O()});n()}function s(){O("isInitialized")||(se("isInitialized",!0),document.body.classList.add("driver-active",I("animate")?"driver-fade":"driver-simple"),Eo(),Rt("overlayClick",e),Rt("escapePress",e),Rt("arrowLeftPress",l),Rt("arrowRightPress",r))}function a(c=0){var d,p,f,h,v,g,y,k;const _=I("steps");if(!_){console.error("No steps to drive through"),u();return}if(!_[c]){u();return}se("__activeOnDestroyed",document.activeElement),se("activeIndex",c);const E=_[c],b=_[c+1],D=_[c-1],C=((d=E.popover)==null?void 0:d.doneBtnText)||I("doneBtnText")||"Done",R=I("allowClose"),L=typeof((p=E.popover)==null?void 0:p.showProgress)<"u"?(f=E.popover)==null?void 0:f.showProgress:I("showProgress"),Z=(((h=E.popover)==null?void 0:h.progressText)||I("progressText")||"{{current}} of {{total}}").replace("{{current}}",`${c+1}`).replace("{{total}}",`${_.length}`),Q=((v=E.popover)==null?void 0:v.showButtons)||I("showButtons"),z=["next","previous",...R?["close"]:[]].filter(Y=>!(Q!=null&&Q.length)||Q.includes(Y)),G=((g=E.popover)==null?void 0:g.onNextClick)||I("onNextClick"),J=((y=E.popover)==null?void 0:y.onPrevClick)||I("onPrevClick"),M=((k=E.popover)==null?void 0:k.onCloseClick)||I("onCloseClick");Gn({...E,popover:{showButtons:z,nextBtnText:b?void 0:C,disableButtons:[...D?[]:["previous"]],showProgress:L,progressText:Z,onNextClick:G||(()=>{b?a(c+1):u()}),onPrevClick:J||(()=>{a(c-1)}),onCloseClick:M||(()=>{u()}),...(E==null?void 0:E.popover)||{}}})}function u(c=!0){const d=O("__activeElement"),p=O("__activeStep"),f=O("__activeOnDestroyed"),h=I("onDestroyStarted");if(c&&h){const y=!d||(d==null?void 0:d.id)==="driver-dummy-element";h(y?void 0:d,p,{config:I(),state:O()});return}const v=(p==null?void 0:p.onDeselected)||I("onDeselected"),g=I("onDestroyed");if(document.body.classList.remove("driver-active","driver-fade","driver-simple"),Do(),Po(),wo(),go(),co(),zn(),d&&p){const y=d.id==="driver-dummy-element";v&&v(y?void 0:d,p,{config:I(),state:O()}),g&&g(y?void 0:d,p,{config:I(),state:O()})}f&&f.focus()}return{isActive:()=>O("isInitialized")||!1,refresh:wt,drive:(c=0)=>{s(),a(c)},setConfig:Ke,setSteps:c=>{zn(),Ke({...I(),steps:c})},getConfig:I,getState:O,getActiveIndex:()=>O("activeIndex"),isFirstStep:()=>O("activeIndex")===0,isLastStep:()=>{const c=I("steps")||[],d=O("activeIndex");return d!==void 0&&d===c.length-1},getActiveStep:()=>O("activeStep"),getActiveElement:()=>O("activeElement"),getPreviousElement:()=>O("previousElement"),getPreviousStep:()=>O("previousStep"),moveNext:n,movePrevious:i,moveTo:o,hasNextStep:()=>{const c=I("steps")||[],d=O("activeIndex");return d!==void 0&&c[d+1]},hasPreviousStep:()=>{const c=I("steps")||[],d=O("activeIndex");return d!==void 0&&c[d-1]},highlight:c=>{s(),Gn({...c,popover:c.popover?{showButtons:[],showProgress:!1,progressText:"",...c.popover}:void 0})},destroy:()=>{u(!1)}}}function ge(){}function cn(t,e){for(const n in e)t[n]=e[n];return t}function ei(t){return t()}function ti(){return Object.create(null)}function Re(t){t.forEach(ei)}function dn(t){return typeof t=="function"}function _e(t,e){return t!=t?e==e:t!==e||t&&typeof t=="object"||typeof t=="function"}let Ht;function ni(t,e){return t===e?!0:(Ht||(Ht=document.createElement("a")),Ht.href=e,t===Ht.href)}function To(t){return Object.keys(t).length===0}function Ao(t,e,n,i){if(t){const o=ii(t,e,n,i);return t[0](o)}}function ii(t,e,n,i){return t[1]&&i?cn(n.ctx.slice(),t[1](i(e))):n.ctx}function Io(t,e,n,i){if(t[2]&&i){const o=t[2](i(n));if(e.dirty===void 0)return o;if(typeof o=="object"){const l=[],r=Math.max(e.dirty.length,o.length);for(let s=0;s<r;s+=1)l[s]=e.dirty[s]|o[s];return l}return e.dirty|o}return e.dirty}function Oo(t,e,n,i,o,l){if(o){const r=ii(e,n,i,l);t.p(r,o)}}function Mo(t){if(t.ctx.length>32){const e=[],n=t.ctx.length/32;for(let i=0;i<n;i++)e[i]=-1;return e}return-1}function w(t,e){t.appendChild(e)}function K(t,e,n){t.insertBefore(e,n||null)}function V(t){t.parentNode&&t.parentNode.removeChild(t)}function fn(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}function S(t){return document.createElement(t)}function ue(t){return document.createTextNode(t)}function W(){return ue(" ")}function oi(){return ue("")}function oe(t,e,n,i){return t.addEventListener(e,n,i),()=>t.removeEventListener(e,n,i)}function Qe(t){return function(e){return e.preventDefault(),t.call(this,e)}}function pn(t){return function(e){return e.stopPropagation(),t.call(this,e)}}function m(t,e,n){n==null?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}const Fo=["width","height"];function Wt(t,e){const n=Object.getOwnPropertyDescriptors(t.__proto__);for(const i in e)e[i]==null?t.removeAttribute(i):i==="style"?t.style.cssText=e[i]:i==="__value"?t.value=t[i]=e[i]:n[i]&&n[i].set&&Fo.indexOf(i)===-1?t[i]=e[i]:m(t,i,e[i])}function No(t){return Array.from(t.childNodes)}function He(t,e){e=""+e,t.data!==e&&(t.data=e)}function Le(t,e,n,i){n==null?t.style.removeProperty(e):t.style.setProperty(e,n,"")}function qt(t,e,n){t.classList.toggle(e,!!n)}function xo(t,e,{bubbles:n=!1,cancelable:i=!1}={}){return new CustomEvent(t,{detail:e,bubbles:n,cancelable:i})}let _t;function Et(t){_t=t}function zt(){if(!_t)throw new Error("Function called outside component initialization");return _t}function Yt(t){zt().$$.on_mount.push(t)}function Bo(t){zt().$$.after_update.push(t)}function li(t){zt().$$.on_destroy.push(t)}function Ro(){const t=zt();return(e,n,{cancelable:i=!1}={})=>{const o=t.$$.callbacks[e];if(o){const l=xo(e,n,{cancelable:i});return o.slice().forEach(r=>{r.call(t,l)}),!l.defaultPrevented}return!0}}const st=[],Me=[];let ut=[];const ri=[],ai=Promise.resolve();let hn=!1;function si(){hn||(hn=!0,ai.then(ui))}function mn(){return si(),ai}function gn(t){ut.push(t)}const vn=new Set;let ct=0;function ui(){if(ct!==0)return;const t=_t;do{try{for(;ct<st.length;){const e=st[ct];ct++,Et(e),Ho(e.$$)}}catch(e){throw st.length=0,ct=0,e}for(Et(null),st.length=0,ct=0;Me.length;)Me.pop()();for(let e=0;e<ut.length;e+=1){const n=ut[e];vn.has(n)||(vn.add(n),n())}ut.length=0}while(st.length);for(;ri.length;)ri.pop()();hn=!1,vn.clear(),Et(t)}function Ho(t){if(t.fragment!==null){t.update(),Re(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(gn)}}function Wo(t){const e=[],n=[];ut.forEach(i=>t.indexOf(i)===-1?e.push(i):n.push(i)),n.forEach(i=>i()),ut=e}const Xt=new Set;let qo;function Te(t,e){t&&t.i&&(Xt.delete(t),t.i(e))}function We(t,e,n,i){if(t&&t.o){if(Xt.has(t))return;Xt.add(t),qo.c.push(()=>{Xt.delete(t)}),t.o(e)}}function ve(t){return(t==null?void 0:t.length)!==void 0?t:Array.from(t)}function jt(t,e){t.d(1),e.delete(t.key)}function Gt(t,e,n,i,o,l,r,s,a,u,c,d){let p=t.length,f=l.length,h=p;const v={};for(;h--;)v[t[h].key]=h;const g=[],y=new Map,k=new Map,_=[];for(h=f;h--;){const C=d(o,l,h),R=n(C);let L=r.get(R);L?_.push(()=>L.p(C,e)):(L=u(R,C),L.c()),y.set(R,g[h]=L),R in v&&k.set(R,Math.abs(h-v[R]))}const E=new Set,b=new Set;function D(C){Te(C,1),C.m(s,c),r.set(C.key,C),c=C.first,f--}for(;p&&f;){const C=g[f-1],R=t[p-1],L=C.key,Z=R.key;C===R?(c=C.first,p--,f--):y.has(Z)?!r.has(L)||E.has(L)?D(C):b.has(Z)?p--:k.get(L)>k.get(Z)?(b.add(L),D(C)):(E.add(Z),p--):(a(R,r),p--)}for(;p--;){const C=t[p];y.has(C.key)||a(C,r)}for(;f;)D(g[f-1]);return Re(_),g}function ci(t,e){const n={},i={},o={$$scope:1};let l=t.length;for(;l--;){const r=t[l],s=e[l];if(s){for(const a in r)a in s||(i[a]=1);for(const a in s)o[a]||(n[a]=s[a],o[a]=1);t[l]=s}else for(const a in r)o[a]=1}for(const r in i)r in n||(n[r]=void 0);return n}function Ze(t){t&&t.c()}function qe(t,e,n){const{fragment:i,after_update:o}=t.$$;i&&i.m(e,n),gn(()=>{const l=t.$$.on_mount.map(ei).filter(dn);t.$$.on_destroy?t.$$.on_destroy.push(...l):Re(l),t.$$.on_mount=[]}),o.forEach(gn)}function ze(t,e){const n=t.$$;n.fragment!==null&&(Wo(n.after_update),Re(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function zo(t,e){t.$$.dirty[0]===-1&&(st.push(t),si(),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function Se(t,e,n,i,o,l,r=null,s=[-1]){const a=_t;Et(t);const u=t.$$={fragment:null,ctx:[],props:l,update:ge,not_equal:o,bound:ti(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(a?a.$$.context:[])),callbacks:ti(),dirty:s,skip_bound:!1,root:e.target||a.$$.root};r&&r(u.root);let c=!1;if(u.ctx=n?n(t,e.props||{},(d,p,...f)=>{const h=f.length?f[0]:p;return u.ctx&&o(u.ctx[d],u.ctx[d]=h)&&(!u.skip_bound&&u.bound[d]&&u.bound[d](h),c&&zo(t,d)),p}):[],u.update(),c=!0,Re(u.before_update),u.fragment=i?i(u.ctx):!1,e.target){if(e.hydrate){const d=No(e.target);u.fragment&&u.fragment.l(d),d.forEach(V)}else u.fragment&&u.fragment.c();e.intro&&Te(t.$$.fragment),qe(t,e.target,e.anchor),ui()}Et(a)}class Ce{constructor(){Hn(this,"$$");Hn(this,"$$set")}$destroy(){ze(this,1),this.$destroy=ge}$on(e,n){if(!dn(n))return ge;const i=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return i.push(n),()=>{const o=i.indexOf(n);o!==-1&&i.splice(o,1)}}$set(e){this.$$set&&!To(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}const Yo="4",dt=[];function ft(t,e=ge){let n;const i=new Set;function o(s){if(_e(t,s)&&(t=s,n)){const a=!dt.length;for(const u of i)u[1](),dt.push(u,t);if(a){for(let u=0;u<dt.length;u+=2)dt[u][0](dt[u+1]);dt.length=0}}}function l(s){o(s(t))}function r(s,a=ge){const u=[s,a];return i.add(u),i.size===1&&(n=e(o,l)||ge),s(t),()=>{i.delete(u),i.size===0&&n&&(n(),n=null)}}return{set:o,update:l,subscribe:r}}const bn=ft({}),N={setTranslations(t){bn.set(t)},has(t,e,n){let i=!1;return bn.subscribe(o=>{if(n in o&&e in o[n]&&t in o[n][e]){i=!0;return}})(),i},get(t,e,n){let i=n;return bn.subscribe(o=>{if(t in o&&e in o[t]&&n in o[t][e]){i=o[t][e][n];return}if(t in o&&e in o[t]&&n in o[t][e]){i=o[t][e][n];return}if(t=="Global"){i=n;return}i=null})(),i},translate(t,e=null,n=null){n=n||"Global",e=e||"labels";let i=N.get(n,e,t);return i===null&&n!="Global"&&(i=N.get("Global",e,t)),i},translateOption(t,e,n=null){let i=N.translate(e,"options",n);return i===null?"":typeof i=="object"?i[t]:t}},di=ft({}),yn={set(t){di.set(t)},get(){let t=null;return di.subscribe(e=>{e&&(t=e)})(),t}},wn=ft(),Ye={setNotifier(t){wn.set(t)},notify(t,e=null,n=2e3){wn.subscribe(i=>{i&&i.notify(t,e,2e3)})()},confirm(t=null,e=null,n){wn.subscribe(i=>{if(i){let o=null,l=null,r=null;typeof t=="string"||t instanceof String?(l=t,r=N.translate("Yes")):(t=t||{},l=t.message,r=t.confirmText,o=t.confirmStyle||null),i.confirm(l,{confirmText:r,cancelText:N.translate("Cancel"),confirmStyle:o},e,n)}})()}},Ut=ft(),Xe={setLayoutManager(t){Ut.set(t)},resetToDefault(t,e,n,i,o){let l=null;return Ut.subscribe(r=>{r&&(l=r.resetToDefault(t,e,n,i,o))})(),l},get:function(t,e,n,i,o,l){let r=null;return Ut.subscribe(s=>{s&&(r=s.get(t,e,n,i,o,l))})(),r},set:function(t,e,n,i,o,l){let r=null;return Ut.subscribe(s=>{s&&(r=s.set(t,e,n,i,o,l))})(),r}},fi=ft(),Fe={setMetadata(t){fi.set(t)},get(t){let e=null;return fi.subscribe(n=>{n&&(e=n.get(t))})(),e}},pi=ft(),Dt={setModelFactory(t){pi.set(t)},create(t,e){pi.subscribe(n=>{n&&n.create(t,e)})()}};typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(Yo);function hi(t){let e,n,i,o,l,r,s,a,u,c,d,p,f,h,v;function g(_,E){return _[2]?jo:Xo}let y=g(t),k=y(t);return{c(){e=S("div"),n=S("div"),i=S("div"),o=S("span"),o.textContent=`${N.translate("jobManager")}`,l=W(),r=S("span"),s=S("a"),s.innerHTML='<span aria-hidden="true">×</span>',a=W(),k.c(),u=W(),c=S("a"),c.textContent=`${N.translate("View List")}`,d=W(),p=S("div"),f=S("div"),f.textContent=`${N.translate("Loading...")}`,m(o,"class","panel-heading-title"),m(s,"href","/"),m(s,"class","close svelte-1p6ppx8"),m(c,"href","#Job"),m(c,"title",N.translate("View List")),m(c,"class","qp-view-list svelte-1p6ppx8"),m(r,"class","pull-right"),m(i,"class","panel-heading clearfix"),m(f,"class","list-container"),m(p,"class","panel-body"),m(n,"class","panel panel-default"),m(e,"class","queue-panel-container")},m(_,E){K(_,e,E),w(e,n),w(n,i),w(i,o),w(i,l),w(i,r),w(r,s),w(r,a),k.m(r,null),w(r,u),w(r,c),w(n,d),w(n,p),w(p,f),t[9](e),h||(v=oe(s,"click",t[6]),h=!0)},p(_,E){y===(y=g(_))&&k?k.p(_,E):(k.d(1),k=y(_),k&&(k.c(),k.m(r,u)))},d(_){_&&V(e),k.d(),t[9](null),h=!1,v()}}}function Xo(t){let e,n,i;return{c(){e=S("a"),e.textContent=`${N.translate("Pause")}`,m(e,"href","/"),m(e,"title",N.translate("Pause")),m(e,"class","qm-button")},m(o,l){K(o,e,l),n||(i=oe(e,"click",t[8]),n=!0)},p:ge,d(o){o&&V(e),n=!1,i()}}}function jo(t){let e,n,i;return{c(){e=S("a"),e.textContent=`${N.translate("Start")}`,m(e,"href","/"),m(e,"title",N.translate("Start")),m(e,"class","qm-button")},m(o,l){K(o,e,l),n||(i=oe(e,"click",t[7]),n=!0)},p:ge,d(o){o&&V(e),n=!1,i()}}}function Go(t){let e,n=t[0]&&hi(t);return{c(){n&&n.c(),e=oi()},m(i,o){n&&n.m(i,o),K(i,e,o)},p(i,[o]){i[0]?n?n.p(i,o):(n=hi(i),n.c(),n.m(e.parentNode,e)):n&&(n.d(1),n=null)},i:ge,o:ge,d(i){i&&V(e),n&&n.d(i)}}}function Uo(t,e,n){let{isOpen:i=!1}=e,{close:o}=e,{icon:l}=e,r=!1;window.addEventListener("publicDataFetched",h=>{n(2,r=!!h.detail.qmPaused)});let s;function a(h){s&&!s.contains(h.target)&&l&&!l.contains(h.target)&&i===!0&&o()}Yt(()=>{document.addEventListener("click",a)}),li(()=>{document.removeEventListener("click",a)});async function u(h){let v=yn.get();if(v)try{const g=await fetch("/api/v1/App/action/QueueManagerUpdate",{method:"POST",headers:{"Content-Type":"application/json","Authorization-Token":btoa(v.user.userName+":"+v.token)},body:JSON.stringify({pause:h})});if(!g.ok)throw new Error("Network response was not ok");await g.json(),Ye.notify("Done","success")}catch(g){console.error("Error:",g)}}const c=h=>{h.preventDefault(),o()},d=h=>{h.preventDefault(),u(!1)},p=h=>{h.preventDefault(),u(!0)};function f(h){Me[h?"unshift":"push"](()=>{s=h,n(3,s)})}return t.$$set=h=>{"isOpen"in h&&n(0,i=h.isOpen),"close"in h&&n(1,o=h.close),"icon"in h&&n(5,l=h.icon)},[i,o,r,s,u,l,c,d,p,f]}class Vo extends Ce{constructor(e){super(),Se(this,e,Uo,Go,_e,{isOpen:0,close:1,icon:5})}}function mi(t){let e;return{c(){e=S("span"),m(e,"class","fas fa-pause-circle pause-icon")},m(n,i){K(n,e,i)},d(n){n&&V(e)}}}function Jo(t){let e,n,i,o,l,r,s,a,u=t[2]&&mi();return l=new Vo({props:{icon:t[0],isOpen:t[1],close:t[4]}}),{c(){e=S("a"),n=S("span"),i=W(),u&&u.c(),o=W(),Ze(l.$$.fragment),m(n,"class","fas fa-tasks"),m(e,"href","/"),m(e,"class","notifications-button")},m(c,d){K(c,e,d),w(e,n),w(e,i),u&&u.m(e,null),t[6](e),K(c,o,d),qe(l,c,d),r=!0,s||(a=oe(e,"click",t[7]),s=!0)},p(c,[d]){c[2]?u||(u=mi(),u.c(),u.m(e,null)):u&&(u.d(1),u=null);const p={};d&1&&(p.icon=c[0]),d&2&&(p.isOpen=c[1]),l.$set(p)},i(c){r||(Te(l.$$.fragment,c),r=!0)},o(c){We(l.$$.fragment,c),r=!1},d(c){c&&(V(e),V(o)),u&&u.d(),t[6](null),ze(l,c),s=!1,a()}}}function Ko(t,e,n){let{renderTable:i=()=>{}}=e,o,l=!1,r=!1;window.addEventListener("publicDataFetched",d=>{n(2,r=!!d.detail.qmPaused)});function s(){l||(n(1,l=!0),i())}function a(){n(1,l=!1),window.dispatchEvent(new Event("jobManagerPanelClosed"))}function u(d){Me[d?"unshift":"push"](()=>{o=d,n(0,o)})}const c=d=>{d.preventDefault(),s()};return t.$$set=d=>{"renderTable"in d&&n(5,i=d.renderTable)},[o,l,r,s,a,i,u,c]}class Qo extends Ce{constructor(e){super(),Se(this,e,Ko,Jo,_e,{renderTable:5})}}function Zo(t){let e,n=`${t[0]}px`,i=`${t[0]}px`,o=`${t[1]}px`;return{c(){e=S("div"),m(e,"class","loading-icon spinner svelte-yw8t7l"),Le(e,"width",n),Le(e,"height",i),Le(e,"border-width",o)},m(l,r){K(l,e,r)},p(l,[r]){r&1&&n!==(n=`${l[0]}px`)&&Le(e,"width",n),r&1&&i!==(i=`${l[0]}px`)&&Le(e,"height",i),r&2&&o!==(o=`${l[1]}px`)&&Le(e,"border-width",o)},i:ge,o:ge,d(l){l&&V(e)}}}function $o(t,e,n){let{size:i=40}=e,{thickness:o=4}=e;return t.$$set=l=>{"size"in l&&n(0,i=l.size),"thickness"in l&&n(1,o=l.thickness)},[i,o]}class el extends Ce{constructor(e){super(),Se(this,e,$o,Zo,_e,{size:0,thickness:1})}}function gi(t){let e,n;return{c(){e=S("img"),ni(e.src,n=t[1])||m(e,"src",n),m(e,"class","logo"),m(e,"alt",t[0])},m(i,o){K(i,e,o)},p(i,o){o&2&&!ni(e.src,n=i[1])&&m(e,"src",n),o&1&&m(e,"alt",i[0])},d(i){i&&V(e)}}}function vi(t){let e,n,i;return{c(){e=S("a"),n=S("i"),i=ue("Recovery Instructions"),m(n,"class","fa fa-history svelte-1qmezxs"),m(e,"href",t[2]),m(e,"target","_blank"),m(e,"class","btn btn-default svelte-1qmezxs"),m(e,"role","button"),Le(e,"float","right")},m(o,l){K(o,e,l),w(e,n),w(e,i)},p(o,l){l&4&&m(e,"href",o[2])},d(o){o&&V(e)}}}function bi(t){let e,n,i,o,l,r;return{c(){e=S("hr"),n=W(),i=S("pre"),o=ue(t[3]),m(i,"class","logs-container svelte-1qmezxs")},m(s,a){K(s,e,a),K(s,n,a),K(s,i,a),w(i,o),t[11](i),l||(r=oe(i,"scroll",t[8]),l=!0)},p(s,a){a&8&&He(o,s[3])},d(s){s&&(V(e),V(n),V(i)),t[11](null),l=!1,r()}}}function tl(t){let e,n,i,o,l,r,s,a,u,c,d,p,f,h,v,g,y,k,_=t[4]?"Hide":"Show",E,b,D,C,R,L,Z,Q,z=t[1]&&gi(t);c=new el({props:{size:"40",thickness:"5"}});let G=t[2]&&vi(t),J=t[4]&&t[3]&&bi(t);return{c(){e=S("div"),n=S("div"),i=S("div"),z&&z.c(),o=W(),l=S("div"),r=S("div"),s=S("h3"),s.textContent="System is updating...",a=W(),u=S("section"),Ze(c.$$.fragment),d=W(),p=S("h5"),f=ue(t[5]),h=W(),v=S("section"),g=S("div"),y=S("button"),k=S("i"),E=ue(_),b=ue(" logs"),C=W(),G&&G.c(),R=W(),J&&J.c(),m(i,"class","logo-container"),m(n,"class","panel-heading"),m(p,"class","svelte-1qmezxs"),m(u,"class","progress-section svelte-1qmezxs"),m(k,"class","fa fa-list svelte-1qmezxs"),m(y,"class","btn btn-default svelte-1qmezxs"),y.disabled=D=!t[3],m(g,"class","buttons"),m(v,"class","logs-section"),m(r,"class","form-group"),m(l,"class","panel-body"),m(e,"id","login"),m(e,"class","panel panel-default panel-updating")},m(M,Y){K(M,e,Y),w(e,n),w(n,i),z&&z.m(i,null),w(e,o),w(e,l),w(l,r),w(r,s),w(r,a),w(r,u),qe(c,u,null),w(u,d),w(u,p),w(p,f),w(r,h),w(r,v),w(v,g),w(g,y),w(y,k),w(y,E),w(y,b),w(g,C),G&&G.m(g,null),w(v,R),J&&J.m(v,null),L=!0,Z||(Q=oe(y,"click",t[7]),Z=!0)},p(M,[Y]){M[1]?z?z.p(M,Y):(z=gi(M),z.c(),z.m(i,null)):z&&(z.d(1),z=null),(!L||Y&32)&&He(f,M[5]),(!L||Y&16)&&_!==(_=M[4]?"Hide":"Show")&&He(E,_),(!L||Y&8&&D!==(D=!M[3]))&&(y.disabled=D),M[2]?G?G.p(M,Y):(G=vi(M),G.c(),G.m(g,null)):G&&(G.d(1),G=null),M[4]&&M[3]?J?J.p(M,Y):(J=bi(M),J.c(),J.m(v,null)):J&&(J.d(1),J=null)},i(M){L||(Te(c.$$.fragment,M),L=!0)},o(M){We(c.$$.fragment,M),L=!1},d(M){M&&V(e),z&&z.d(),ze(c),G&&G.d(),J&&J.d(),Z=!1,Q()}}}function nl(t){return t.replace(/^\d{2,4}.\d{2}.\d{2,4} \d{2}:\d{2}:\d{2}/g,"").replace(/^[\-\|\s]+/,"")}function il(t,e,n){let{applicationName:i="AtroCore"}=e,{logoPath:o=null}=e,{logFilePath:l}=e,{restoreLink:r=null}=e,s=!1,a=!1,u=0,c=!0,d="",p,f;Bo(()=>{f&&c&&f.scrollTo(0,f.scrollHeight)});function h(){n(4,s=!s),s||(c=!0)}function v(y){const k=y.currentTarget;c=k.scrollHeight-k.scrollTop===k.clientHeight}setInterval(async()=>{try{const y=await fetch(l,{cache:"no-store"});u+=1,y.ok?(n(3,d=(await y.text()).trim()),d.search("composer")>=0&&n(10,a=!0),u>65&&!a&&n(3,d="Something wrong. Please, reboot the server.")):a?setTimeout(()=>{location.reload()},2e3):u>65&&n(3,d="Something wrong. Please, reboot the server.")}catch(y){console.error("Error: ",y)}},1e3);function g(y){Me[y?"unshift":"push"](()=>{f=y,n(6,f)})}return t.$$set=y=>{"applicationName"in y&&n(0,i=y.applicationName),"logoPath"in y&&n(1,o=y.logoPath),"logFilePath"in y&&n(9,l=y.logFilePath),"restoreLink"in y&&n(2,r=y.restoreLink)},t.$$.update=()=>{if(t.$$.dirty&1032)if(d){const y=d.trim().split(`
`);n(5,p=nl(y.pop()))}else a?n(5,p=""):n(5,p="Starting...")},[i,o,r,d,s,p,f,h,v,l,a,g]}class ol extends Ce{constructor(e){super(),Se(this,e,il,tl,_e,{applicationName:0,logoPath:1,logFilePath:9,restoreLink:2})}}function yi(t,e,n){const i=t.slice();return i[19]=e[n],i}function wi(t){let e,n=t[19].label+"",i,o,l,r,s,a;function u(){return t[12](t[19])}return{c(){e=S("button"),i=ue(n),o=W(),m(e,"data-action",l=t[19].name),e.disabled=t[1],m(e,"type","button"),m(e,"class",r=`btn action btn-${t[19].style??"default"}`)},m(c,d){K(c,e,d),w(e,i),w(e,o),s||(a=oe(e,"click",u),s=!0)},p(c,d){t=c,d&1&&n!==(n=t[19].label+"")&&He(i,n),d&1&&l!==(l=t[19].name)&&m(e,"data-action",l),d&2&&(e.disabled=t[1]),d&1&&r!==(r=`btn action btn-${t[19].style??"default"}`)&&m(e,"class",r)},d(c){c&&V(e),s=!1,a()}}}function ll(t){let e,n,i,o=ve(t[0]),l=[];for(let a=0;a<o.length;a+=1)l[a]=wi(yi(t,o,a));const r=t[11].default,s=Ao(r,t,t[10],null);return{c(){e=S("div");for(let a=0;a<l.length;a+=1)l[a].c();n=W(),s&&s.c(),m(e,"class","button-container"),Le(e,"padding-top","10px")},m(a,u){K(a,e,u);for(let c=0;c<l.length;c+=1)l[c]&&l[c].m(e,null);t[13](e),K(a,n,u),s&&s.m(a,u),i=!0},p(a,[u]){if(u&11){o=ve(a[0]);let c;for(c=0;c<o.length;c+=1){const d=yi(a,o,c);l[c]?l[c].p(d,u):(l[c]=wi(d),l[c].c(),l[c].m(e,null))}for(;c<l.length;c+=1)l[c].d(1);l.length=o.length}s&&s.p&&(!i||u&1024)&&Oo(s,r,a,a[10],i?Io(r,a[10],u,null):Mo(a[10]),null)},i(a){i||(Te(s,a),i=!0)},o(a){We(s,a),i=!1},d(a){a&&(V(e),V(n)),fn(l,a),t[13](null),s&&s.d(a)}}}function rl(t,e,n){let{$$slots:i={},$$scope:o}=e,{params:l}=e,{fetch:r}=e,s,{loadLayout:a=()=>{Xe.get(scope,type,layoutProfileId,b=>{n(9,s=b.layout)},!1)}}=e,{validate:u=()=>!0}=e,c=!1,d=[],p;l.layoutProfiles,Yt(async()=>{var D;f(),await mn();const b=document.querySelector("#layout-buttons");p&&b&&l.inModal&&((D=b.closest(".modal-body"))==null||D.classList.add("modal-layout-manager"),b.appendChild(p))});function f(){Ye.notify("Loading..."),a(b=>{n(9,s=b),Ye.notify(!1),l.afterRender&&l.afterRender()})}function h(){n(1,c=!0);const b=r();if(!u(b)){n(1,c=!1);debugger;return}if(Ye.notify("Saving..."),l.inModal&&!l.getActiveLayoutProfileId()){v(!0);return}Xe.set(l.scope,l.type,l.relatedScope,l.layoutProfileId,b,()=>{Ye.notify("Saved","success",2e3),v(!1),n(1,c=!1)})}function v(b){l.onUpdate&&l.onUpdate(b)}function g(){a()}function y(){Ye.confirm("Are you sure you want to reset this layout?",()=>{var b;Xe.resetToDefault(l.scope,l.type,l.relatedScope,(b=s.storedProfile)==null?void 0:b.id,()=>{v(!0),g()})})}function k(b){switch(b.name){case"save":h();break;case"cancel":g();break;case"reset":y();break;case"fullEdit":window.open(`#Admin/layouts/scope=${l.scope}&type=${l.type}${l.relatedScope?"&relatedScope="+l.relatedScope:""}${l.layoutProfileId?"&layoutProfileId="+l.layoutProfileId:""}`,"_blank");break}}const _=b=>k(b);function E(b){Me[b?"unshift":"push"](()=>{p=b,n(2,p)})}return t.$$set=b=>{"params"in b&&n(4,l=b.params),"fetch"in b&&n(5,r=b.fetch),"loadLayout"in b&&n(6,a=b.loadLayout),"validate"in b&&n(7,u=b.validate),"$$scope"in b&&n(10,o=b.$$scope)},t.$$.update=()=>{t.$$.dirty&529&&(n(0,d=[{name:"cancel",label:N.translate("Cancel","labels")}]),l.inModal&&(yn.get().user.isAdmin&&d.push({name:"fullEdit",label:N.translate("Full Edit","labels","LayoutManager")}),s!=null&&s.canEdit&&d.unshift({name:"save",label:N.translate("Save","labels"),style:"primary"})),s&&s.storedProfile&&s.storedProfile.id===l.layoutProfileId&&s.canEdit&&d.push({name:"reset",label:N.translate("reset","labels","LayoutManager")}))},[d,c,p,k,l,r,a,u,h,s,o,i,_,E]}class _i extends Ce{constructor(e){super(),Se(this,e,rl,ll,_e,{params:4,fetch:5,loadLayout:6,validate:7,save:8})}get save(){return this.$$.ctx[8]}}/**!
 * Sortable 1.15.6
 * @author	RubaXa   <trash@rubaxa.org>
 * @author	owenm    <owen23355@gmail.com>
 * @license MIT
 */function Ei(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(o){return Object.getOwnPropertyDescriptor(t,o).enumerable})),n.push.apply(n,i)}return n}function Ne(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Ei(Object(n),!0).forEach(function(i){al(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Ei(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function Vt(t){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Vt=function(e){return typeof e}:Vt=function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Vt(t)}function al(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function je(){return je=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},je.apply(this,arguments)}function sl(t,e){if(t==null)return{};var n={},i=Object.keys(t),o,l;for(l=0;l<i.length;l++)o=i[l],!(e.indexOf(o)>=0)&&(n[o]=t[o]);return n}function ul(t,e){if(t==null)return{};var n=sl(t,e),i,o;if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(t);for(o=0;o<l.length;o++)i=l[o],!(e.indexOf(i)>=0)&&Object.prototype.propertyIsEnumerable.call(t,i)&&(n[i]=t[i])}return n}var cl="1.15.6";function Ge(t){if(typeof window<"u"&&window.navigator)return!!navigator.userAgent.match(t)}var Ue=Ge(/(?:Trident.*rv[ :]?11\.|msie|iemobile|Windows Phone)/i),St=Ge(/Edge/i),Di=Ge(/firefox/i),Ct=Ge(/safari/i)&&!Ge(/chrome/i)&&!Ge(/android/i),_n=Ge(/iP(ad|od|hone)/i),Si=Ge(/chrome/i)&&Ge(/android/i),Ci={capture:!1,passive:!1};function U(t,e,n){t.addEventListener(e,n,!Ue&&Ci)}function j(t,e,n){t.removeEventListener(e,n,!Ue&&Ci)}function Jt(t,e){if(e){if(e[0]===">"&&(e=e.substring(1)),t)try{if(t.matches)return t.matches(e);if(t.msMatchesSelector)return t.msMatchesSelector(e);if(t.webkitMatchesSelector)return t.webkitMatchesSelector(e)}catch{return!1}return!1}}function ki(t){return t.host&&t!==document&&t.host.nodeType?t.host:t.parentNode}function Ae(t,e,n,i){if(t){n=n||document;do{if(e!=null&&(e[0]===">"?t.parentNode===n&&Jt(t,e):Jt(t,e))||i&&t===n)return t;if(t===n)break}while(t=ki(t))}return null}var Pi=/\s+/g;function Ee(t,e,n){if(t&&e)if(t.classList)t.classList[n?"add":"remove"](e);else{var i=(" "+t.className+" ").replace(Pi," ").replace(" "+e+" "," ");t.className=(i+(n?" "+e:"")).replace(Pi," ")}}function B(t,e,n){var i=t&&t.style;if(i){if(n===void 0)return document.defaultView&&document.defaultView.getComputedStyle?n=document.defaultView.getComputedStyle(t,""):t.currentStyle&&(n=t.currentStyle),e===void 0?n:n[e];!(e in i)&&e.indexOf("webkit")===-1&&(e="-webkit-"+e),i[e]=n+(typeof n=="string"?"":"px")}}function pt(t,e){var n="";if(typeof t=="string")n=t;else do{var i=B(t,"transform");i&&i!=="none"&&(n=i+" "+n)}while(!e&&(t=t.parentNode));var o=window.DOMMatrix||window.WebKitCSSMatrix||window.CSSMatrix||window.MSCSSMatrix;return o&&new o(n)}function Li(t,e,n){if(t){var i=t.getElementsByTagName(e),o=0,l=i.length;if(n)for(;o<l;o++)n(i[o],o);return i}return[]}function xe(){var t=document.scrollingElement;return t||document.documentElement}function re(t,e,n,i,o){if(!(!t.getBoundingClientRect&&t!==window)){var l,r,s,a,u,c,d;if(t!==window&&t.parentNode&&t!==xe()?(l=t.getBoundingClientRect(),r=l.top,s=l.left,a=l.bottom,u=l.right,c=l.height,d=l.width):(r=0,s=0,a=window.innerHeight,u=window.innerWidth,c=window.innerHeight,d=window.innerWidth),(e||n)&&t!==window&&(o=o||t.parentNode,!Ue))do if(o&&o.getBoundingClientRect&&(B(o,"transform")!=="none"||n&&B(o,"position")!=="static")){var p=o.getBoundingClientRect();r-=p.top+parseInt(B(o,"border-top-width")),s-=p.left+parseInt(B(o,"border-left-width")),a=r+l.height,u=s+l.width;break}while(o=o.parentNode);if(i&&t!==window){var f=pt(o||t),h=f&&f.a,v=f&&f.d;f&&(r/=v,s/=h,d/=h,c/=v,a=r+c,u=s+d)}return{top:r,left:s,bottom:a,right:u,width:d,height:c}}}function Ti(t,e,n){for(var i=$e(t,!0),o=re(t)[e];i;){var l=re(i)[n],r=void 0;if(r=o>=l,!r)return i;if(i===xe())break;i=$e(i,!1)}return!1}function ht(t,e,n,i){for(var o=0,l=0,r=t.children;l<r.length;){if(r[l].style.display!=="none"&&r[l]!==x.ghost&&(i||r[l]!==x.dragged)&&Ae(r[l],n.draggable,t,!1)){if(o===e)return r[l];o++}l++}return null}function En(t,e){for(var n=t.lastElementChild;n&&(n===x.ghost||B(n,"display")==="none"||e&&!Jt(n,e));)n=n.previousElementSibling;return n||null}function ke(t,e){var n=0;if(!t||!t.parentNode)return-1;for(;t=t.previousElementSibling;)t.nodeName.toUpperCase()!=="TEMPLATE"&&t!==x.clone&&(!e||Jt(t,e))&&n++;return n}function Ai(t){var e=0,n=0,i=xe();if(t)do{var o=pt(t),l=o.a,r=o.d;e+=t.scrollLeft*l,n+=t.scrollTop*r}while(t!==i&&(t=t.parentNode));return[e,n]}function dl(t,e){for(var n in t)if(t.hasOwnProperty(n)){for(var i in e)if(e.hasOwnProperty(i)&&e[i]===t[n][i])return Number(n)}return-1}function $e(t,e){if(!t||!t.getBoundingClientRect)return xe();var n=t,i=!1;do if(n.clientWidth<n.scrollWidth||n.clientHeight<n.scrollHeight){var o=B(n);if(n.clientWidth<n.scrollWidth&&(o.overflowX=="auto"||o.overflowX=="scroll")||n.clientHeight<n.scrollHeight&&(o.overflowY=="auto"||o.overflowY=="scroll")){if(!n.getBoundingClientRect||n===document.body)return xe();if(i||e)return n;i=!0}}while(n=n.parentNode);return xe()}function fl(t,e){if(t&&e)for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t}function Dn(t,e){return Math.round(t.top)===Math.round(e.top)&&Math.round(t.left)===Math.round(e.left)&&Math.round(t.height)===Math.round(e.height)&&Math.round(t.width)===Math.round(e.width)}var kt;function Ii(t,e){return function(){if(!kt){var n=arguments,i=this;n.length===1?t.call(i,n[0]):t.apply(i,n),kt=setTimeout(function(){kt=void 0},e)}}}function pl(){clearTimeout(kt),kt=void 0}function Oi(t,e,n){t.scrollLeft+=e,t.scrollTop+=n}function Mi(t){var e=window.Polymer,n=window.jQuery||window.Zepto;return e&&e.dom?e.dom(t).cloneNode(!0):n?n(t).clone(!0)[0]:t.cloneNode(!0)}function Fi(t,e,n){var i={};return Array.from(t.children).forEach(function(o){var l,r,s,a;if(!(!Ae(o,e.draggable,t,!1)||o.animated||o===n)){var u=re(o);i.left=Math.min((l=i.left)!==null&&l!==void 0?l:1/0,u.left),i.top=Math.min((r=i.top)!==null&&r!==void 0?r:1/0,u.top),i.right=Math.max((s=i.right)!==null&&s!==void 0?s:-1/0,u.right),i.bottom=Math.max((a=i.bottom)!==null&&a!==void 0?a:-1/0,u.bottom)}}),i.width=i.right-i.left,i.height=i.bottom-i.top,i.x=i.left,i.y=i.top,i}var be="Sortable"+new Date().getTime();function hl(){var t=[],e;return{captureAnimationState:function(){if(t=[],!!this.options.animation){var i=[].slice.call(this.el.children);i.forEach(function(o){if(!(B(o,"display")==="none"||o===x.ghost)){t.push({target:o,rect:re(o)});var l=Ne({},t[t.length-1].rect);if(o.thisAnimationDuration){var r=pt(o,!0);r&&(l.top-=r.f,l.left-=r.e)}o.fromRect=l}})}},addAnimationState:function(i){t.push(i)},removeAnimationState:function(i){t.splice(dl(t,{target:i}),1)},animateAll:function(i){var o=this;if(!this.options.animation){clearTimeout(e),typeof i=="function"&&i();return}var l=!1,r=0;t.forEach(function(s){var a=0,u=s.target,c=u.fromRect,d=re(u),p=u.prevFromRect,f=u.prevToRect,h=s.rect,v=pt(u,!0);v&&(d.top-=v.f,d.left-=v.e),u.toRect=d,u.thisAnimationDuration&&Dn(p,d)&&!Dn(c,d)&&(h.top-d.top)/(h.left-d.left)===(c.top-d.top)/(c.left-d.left)&&(a=gl(h,p,f,o.options)),Dn(d,c)||(u.prevFromRect=c,u.prevToRect=d,a||(a=o.options.animation),o.animate(u,h,d,a)),a&&(l=!0,r=Math.max(r,a),clearTimeout(u.animationResetTimer),u.animationResetTimer=setTimeout(function(){u.animationTime=0,u.prevFromRect=null,u.fromRect=null,u.prevToRect=null,u.thisAnimationDuration=null},a),u.thisAnimationDuration=a)}),clearTimeout(e),l?e=setTimeout(function(){typeof i=="function"&&i()},r):typeof i=="function"&&i(),t=[]},animate:function(i,o,l,r){if(r){B(i,"transition",""),B(i,"transform","");var s=pt(this.el),a=s&&s.a,u=s&&s.d,c=(o.left-l.left)/(a||1),d=(o.top-l.top)/(u||1);i.animatingX=!!c,i.animatingY=!!d,B(i,"transform","translate3d("+c+"px,"+d+"px,0)"),this.forRepaintDummy=ml(i),B(i,"transition","transform "+r+"ms"+(this.options.easing?" "+this.options.easing:"")),B(i,"transform","translate3d(0,0,0)"),typeof i.animated=="number"&&clearTimeout(i.animated),i.animated=setTimeout(function(){B(i,"transition",""),B(i,"transform",""),i.animated=!1,i.animatingX=!1,i.animatingY=!1},r)}}}}function ml(t){return t.offsetWidth}function gl(t,e,n,i){return Math.sqrt(Math.pow(e.top-t.top,2)+Math.pow(e.left-t.left,2))/Math.sqrt(Math.pow(e.top-n.top,2)+Math.pow(e.left-n.left,2))*i.animation}var mt=[],Sn={initializeByDefault:!0},Pt={mount:function(e){for(var n in Sn)Sn.hasOwnProperty(n)&&!(n in e)&&(e[n]=Sn[n]);mt.forEach(function(i){if(i.pluginName===e.pluginName)throw"Sortable: Cannot mount plugin ".concat(e.pluginName," more than once")}),mt.push(e)},pluginEvent:function(e,n,i){var o=this;this.eventCanceled=!1,i.cancel=function(){o.eventCanceled=!0};var l=e+"Global";mt.forEach(function(r){n[r.pluginName]&&(n[r.pluginName][l]&&n[r.pluginName][l](Ne({sortable:n},i)),n.options[r.pluginName]&&n[r.pluginName][e]&&n[r.pluginName][e](Ne({sortable:n},i)))})},initializePlugins:function(e,n,i,o){mt.forEach(function(s){var a=s.pluginName;if(!(!e.options[a]&&!s.initializeByDefault)){var u=new s(e,n,e.options);u.sortable=e,u.options=e.options,e[a]=u,je(i,u.defaults)}});for(var l in e.options)if(e.options.hasOwnProperty(l)){var r=this.modifyOption(e,l,e.options[l]);typeof r<"u"&&(e.options[l]=r)}},getEventProperties:function(e,n){var i={};return mt.forEach(function(o){typeof o.eventProperties=="function"&&je(i,o.eventProperties.call(n[o.pluginName],e))}),i},modifyOption:function(e,n,i){var o;return mt.forEach(function(l){e[l.pluginName]&&l.optionListeners&&typeof l.optionListeners[n]=="function"&&(o=l.optionListeners[n].call(e[l.pluginName],i))}),o}};function vl(t){var e=t.sortable,n=t.rootEl,i=t.name,o=t.targetEl,l=t.cloneEl,r=t.toEl,s=t.fromEl,a=t.oldIndex,u=t.newIndex,c=t.oldDraggableIndex,d=t.newDraggableIndex,p=t.originalEvent,f=t.putSortable,h=t.extraEventProperties;if(e=e||n&&n[be],!!e){var v,g=e.options,y="on"+i.charAt(0).toUpperCase()+i.substr(1);window.CustomEvent&&!Ue&&!St?v=new CustomEvent(i,{bubbles:!0,cancelable:!0}):(v=document.createEvent("Event"),v.initEvent(i,!0,!0)),v.to=r||n,v.from=s||n,v.item=o||n,v.clone=l,v.oldIndex=a,v.newIndex=u,v.oldDraggableIndex=c,v.newDraggableIndex=d,v.originalEvent=p,v.pullMode=f?f.lastPutMode:void 0;var k=Ne(Ne({},h),Pt.getEventProperties(i,e));for(var _ in k)v[_]=k[_];n&&n.dispatchEvent(v),g[y]&&g[y].call(e,v)}}var bl=["evt"],ye=function(e,n){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},o=i.evt,l=ul(i,bl);Pt.pluginEvent.bind(x)(e,n,Ne({dragEl:P,parentEl:le,ghostEl:H,rootEl:te,nextEl:ot,lastDownEl:Kt,cloneEl:ne,cloneHidden:et,dragStarted:Tt,putSortable:ce,activeSortable:x.active,originalEvent:o,oldIndex:gt,oldDraggableIndex:Lt,newIndex:De,newDraggableIndex:tt,hideGhostForTarget:qi,unhideGhostForTarget:zi,cloneNowHidden:function(){et=!0},cloneNowShown:function(){et=!1},dispatchSortableEvent:function(s){me({sortable:n,name:s,originalEvent:o})}},l))};function me(t){vl(Ne({putSortable:ce,cloneEl:ne,targetEl:P,rootEl:te,oldIndex:gt,oldDraggableIndex:Lt,newIndex:De,newDraggableIndex:tt},t))}var P,le,H,te,ot,Kt,ne,et,gt,De,Lt,tt,Qt,ce,vt=!1,Zt=!1,$t=[],lt,Ie,Cn,kn,Ni,xi,Tt,bt,At,It=!1,en=!1,tn,fe,Pn=[],Ln=!1,nn=[],on=typeof document<"u",ln=_n,Bi=St||Ue?"cssFloat":"float",yl=on&&!Si&&!_n&&"draggable"in document.createElement("div"),Ri=function(){if(on){if(Ue)return!1;var t=document.createElement("x");return t.style.cssText="pointer-events:auto",t.style.pointerEvents==="auto"}}(),Hi=function(e,n){var i=B(e),o=parseInt(i.width)-parseInt(i.paddingLeft)-parseInt(i.paddingRight)-parseInt(i.borderLeftWidth)-parseInt(i.borderRightWidth),l=ht(e,0,n),r=ht(e,1,n),s=l&&B(l),a=r&&B(r),u=s&&parseInt(s.marginLeft)+parseInt(s.marginRight)+re(l).width,c=a&&parseInt(a.marginLeft)+parseInt(a.marginRight)+re(r).width;if(i.display==="flex")return i.flexDirection==="column"||i.flexDirection==="column-reverse"?"vertical":"horizontal";if(i.display==="grid")return i.gridTemplateColumns.split(" ").length<=1?"vertical":"horizontal";if(l&&s.float&&s.float!=="none"){var d=s.float==="left"?"left":"right";return r&&(a.clear==="both"||a.clear===d)?"vertical":"horizontal"}return l&&(s.display==="block"||s.display==="flex"||s.display==="table"||s.display==="grid"||u>=o&&i[Bi]==="none"||r&&i[Bi]==="none"&&u+c>o)?"vertical":"horizontal"},wl=function(e,n,i){var o=i?e.left:e.top,l=i?e.right:e.bottom,r=i?e.width:e.height,s=i?n.left:n.top,a=i?n.right:n.bottom,u=i?n.width:n.height;return o===s||l===a||o+r/2===s+u/2},_l=function(e,n){var i;return $t.some(function(o){var l=o[be].options.emptyInsertThreshold;if(!(!l||En(o))){var r=re(o),s=e>=r.left-l&&e<=r.right+l,a=n>=r.top-l&&n<=r.bottom+l;if(s&&a)return i=o}}),i},Wi=function(e){function n(l,r){return function(s,a,u,c){var d=s.options.group.name&&a.options.group.name&&s.options.group.name===a.options.group.name;if(l==null&&(r||d))return!0;if(l==null||l===!1)return!1;if(r&&l==="clone")return l;if(typeof l=="function")return n(l(s,a,u,c),r)(s,a,u,c);var p=(r?s:a).options.group.name;return l===!0||typeof l=="string"&&l===p||l.join&&l.indexOf(p)>-1}}var i={},o=e.group;(!o||Vt(o)!="object")&&(o={name:o}),i.name=o.name,i.checkPull=n(o.pull,!0),i.checkPut=n(o.put),i.revertClone=o.revertClone,e.group=i},qi=function(){!Ri&&H&&B(H,"display","none")},zi=function(){!Ri&&H&&B(H,"display","")};on&&!Si&&document.addEventListener("click",function(t){if(Zt)return t.preventDefault(),t.stopPropagation&&t.stopPropagation(),t.stopImmediatePropagation&&t.stopImmediatePropagation(),Zt=!1,!1},!0);var rt=function(e){if(P){e=e.touches?e.touches[0]:e;var n=_l(e.clientX,e.clientY);if(n){var i={};for(var o in e)e.hasOwnProperty(o)&&(i[o]=e[o]);i.target=i.rootEl=n,i.preventDefault=void 0,i.stopPropagation=void 0,n[be]._onDragOver(i)}}},El=function(e){P&&P.parentNode[be]._isOutsideThisEl(e.target)};function x(t,e){if(!(t&&t.nodeType&&t.nodeType===1))throw"Sortable: `el` must be an HTMLElement, not ".concat({}.toString.call(t));this.el=t,this.options=e=je({},e),t[be]=this;var n={group:null,sort:!0,disabled:!1,store:null,handle:null,draggable:/^[uo]l$/i.test(t.nodeName)?">li":">*",swapThreshold:1,invertSwap:!1,invertedSwapThreshold:null,removeCloneOnHide:!0,direction:function(){return Hi(t,this.options)},ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",dragClass:"sortable-drag",ignore:"a, img",filter:null,preventOnFilter:!0,animation:0,easing:null,setData:function(r,s){r.setData("Text",s.textContent)},dropBubble:!1,dragoverBubble:!1,dataIdAttr:"data-id",delay:0,delayOnTouchOnly:!1,touchStartThreshold:(Number.parseInt?Number:window).parseInt(window.devicePixelRatio,10)||1,forceFallback:!1,fallbackClass:"sortable-fallback",fallbackOnBody:!1,fallbackTolerance:0,fallbackOffset:{x:0,y:0},supportPointer:x.supportPointer!==!1&&"PointerEvent"in window&&(!Ct||_n),emptyInsertThreshold:5};Pt.initializePlugins(this,t,n);for(var i in n)!(i in e)&&(e[i]=n[i]);Wi(e);for(var o in this)o.charAt(0)==="_"&&typeof this[o]=="function"&&(this[o]=this[o].bind(this));this.nativeDraggable=e.forceFallback?!1:yl,this.nativeDraggable&&(this.options.touchStartThreshold=1),e.supportPointer?U(t,"pointerdown",this._onTapStart):(U(t,"mousedown",this._onTapStart),U(t,"touchstart",this._onTapStart)),this.nativeDraggable&&(U(t,"dragover",this),U(t,"dragenter",this)),$t.push(this.el),e.store&&e.store.get&&this.sort(e.store.get(this)||[]),je(this,hl())}x.prototype={constructor:x,_isOutsideThisEl:function(e){!this.el.contains(e)&&e!==this.el&&(bt=null)},_getDirection:function(e,n){return typeof this.options.direction=="function"?this.options.direction.call(this,e,n,P):this.options.direction},_onTapStart:function(e){if(e.cancelable){var n=this,i=this.el,o=this.options,l=o.preventOnFilter,r=e.type,s=e.touches&&e.touches[0]||e.pointerType&&e.pointerType==="touch"&&e,a=(s||e).target,u=e.target.shadowRoot&&(e.path&&e.path[0]||e.composedPath&&e.composedPath()[0])||a,c=o.filter;if(Al(i),!P&&!(/mousedown|pointerdown/.test(r)&&e.button!==0||o.disabled)&&!u.isContentEditable&&!(!this.nativeDraggable&&Ct&&a&&a.tagName.toUpperCase()==="SELECT")&&(a=Ae(a,o.draggable,i,!1),!(a&&a.animated)&&Kt!==a)){if(gt=ke(a),Lt=ke(a,o.draggable),typeof c=="function"){if(c.call(this,e,a,this)){me({sortable:n,rootEl:u,name:"filter",targetEl:a,toEl:i,fromEl:i}),ye("filter",n,{evt:e}),l&&e.preventDefault();return}}else if(c&&(c=c.split(",").some(function(d){if(d=Ae(u,d.trim(),i,!1),d)return me({sortable:n,rootEl:d,name:"filter",targetEl:a,fromEl:i,toEl:i}),ye("filter",n,{evt:e}),!0}),c)){l&&e.preventDefault();return}o.handle&&!Ae(u,o.handle,i,!1)||this._prepareDragStart(e,s,a)}}},_prepareDragStart:function(e,n,i){var o=this,l=o.el,r=o.options,s=l.ownerDocument,a;if(i&&!P&&i.parentNode===l){var u=re(i);if(te=l,P=i,le=P.parentNode,ot=P.nextSibling,Kt=i,Qt=r.group,x.dragged=P,lt={target:P,clientX:(n||e).clientX,clientY:(n||e).clientY},Ni=lt.clientX-u.left,xi=lt.clientY-u.top,this._lastX=(n||e).clientX,this._lastY=(n||e).clientY,P.style["will-change"]="all",a=function(){if(ye("delayEnded",o,{evt:e}),x.eventCanceled){o._onDrop();return}o._disableDelayedDragEvents(),!Di&&o.nativeDraggable&&(P.draggable=!0),o._triggerDragStart(e,n),me({sortable:o,name:"choose",originalEvent:e}),Ee(P,r.chosenClass,!0)},r.ignore.split(",").forEach(function(c){Li(P,c.trim(),Tn)}),U(s,"dragover",rt),U(s,"mousemove",rt),U(s,"touchmove",rt),r.supportPointer?(U(s,"pointerup",o._onDrop),!this.nativeDraggable&&U(s,"pointercancel",o._onDrop)):(U(s,"mouseup",o._onDrop),U(s,"touchend",o._onDrop),U(s,"touchcancel",o._onDrop)),Di&&this.nativeDraggable&&(this.options.touchStartThreshold=4,P.draggable=!0),ye("delayStart",this,{evt:e}),r.delay&&(!r.delayOnTouchOnly||n)&&(!this.nativeDraggable||!(St||Ue))){if(x.eventCanceled){this._onDrop();return}r.supportPointer?(U(s,"pointerup",o._disableDelayedDrag),U(s,"pointercancel",o._disableDelayedDrag)):(U(s,"mouseup",o._disableDelayedDrag),U(s,"touchend",o._disableDelayedDrag),U(s,"touchcancel",o._disableDelayedDrag)),U(s,"mousemove",o._delayedDragTouchMoveHandler),U(s,"touchmove",o._delayedDragTouchMoveHandler),r.supportPointer&&U(s,"pointermove",o._delayedDragTouchMoveHandler),o._dragStartTimer=setTimeout(a,r.delay)}else a()}},_delayedDragTouchMoveHandler:function(e){var n=e.touches?e.touches[0]:e;Math.max(Math.abs(n.clientX-this._lastX),Math.abs(n.clientY-this._lastY))>=Math.floor(this.options.touchStartThreshold/(this.nativeDraggable&&window.devicePixelRatio||1))&&this._disableDelayedDrag()},_disableDelayedDrag:function(){P&&Tn(P),clearTimeout(this._dragStartTimer),this._disableDelayedDragEvents()},_disableDelayedDragEvents:function(){var e=this.el.ownerDocument;j(e,"mouseup",this._disableDelayedDrag),j(e,"touchend",this._disableDelayedDrag),j(e,"touchcancel",this._disableDelayedDrag),j(e,"pointerup",this._disableDelayedDrag),j(e,"pointercancel",this._disableDelayedDrag),j(e,"mousemove",this._delayedDragTouchMoveHandler),j(e,"touchmove",this._delayedDragTouchMoveHandler),j(e,"pointermove",this._delayedDragTouchMoveHandler)},_triggerDragStart:function(e,n){n=n||e.pointerType=="touch"&&e,!this.nativeDraggable||n?this.options.supportPointer?U(document,"pointermove",this._onTouchMove):n?U(document,"touchmove",this._onTouchMove):U(document,"mousemove",this._onTouchMove):(U(P,"dragend",this),U(te,"dragstart",this._onDragStart));try{document.selection?an(function(){document.selection.empty()}):window.getSelection().removeAllRanges()}catch{}},_dragStarted:function(e,n){if(vt=!1,te&&P){ye("dragStarted",this,{evt:n}),this.nativeDraggable&&U(document,"dragover",El);var i=this.options;!e&&Ee(P,i.dragClass,!1),Ee(P,i.ghostClass,!0),x.active=this,e&&this._appendGhost(),me({sortable:this,name:"start",originalEvent:n})}else this._nulling()},_emulateDragOver:function(){if(Ie){this._lastX=Ie.clientX,this._lastY=Ie.clientY,qi();for(var e=document.elementFromPoint(Ie.clientX,Ie.clientY),n=e;e&&e.shadowRoot&&(e=e.shadowRoot.elementFromPoint(Ie.clientX,Ie.clientY),e!==n);)n=e;if(P.parentNode[be]._isOutsideThisEl(e),n)do{if(n[be]){var i=void 0;if(i=n[be]._onDragOver({clientX:Ie.clientX,clientY:Ie.clientY,target:e,rootEl:n}),i&&!this.options.dragoverBubble)break}e=n}while(n=ki(n));zi()}},_onTouchMove:function(e){if(lt){var n=this.options,i=n.fallbackTolerance,o=n.fallbackOffset,l=e.touches?e.touches[0]:e,r=H&&pt(H,!0),s=H&&r&&r.a,a=H&&r&&r.d,u=ln&&fe&&Ai(fe),c=(l.clientX-lt.clientX+o.x)/(s||1)+(u?u[0]-Pn[0]:0)/(s||1),d=(l.clientY-lt.clientY+o.y)/(a||1)+(u?u[1]-Pn[1]:0)/(a||1);if(!x.active&&!vt){if(i&&Math.max(Math.abs(l.clientX-this._lastX),Math.abs(l.clientY-this._lastY))<i)return;this._onDragStart(e,!0)}if(H){r?(r.e+=c-(Cn||0),r.f+=d-(kn||0)):r={a:1,b:0,c:0,d:1,e:c,f:d};var p="matrix(".concat(r.a,",").concat(r.b,",").concat(r.c,",").concat(r.d,",").concat(r.e,",").concat(r.f,")");B(H,"webkitTransform",p),B(H,"mozTransform",p),B(H,"msTransform",p),B(H,"transform",p),Cn=c,kn=d,Ie=l}e.cancelable&&e.preventDefault()}},_appendGhost:function(){if(!H){var e=this.options.fallbackOnBody?document.body:te,n=re(P,!0,ln,!0,e),i=this.options;if(ln){for(fe=e;B(fe,"position")==="static"&&B(fe,"transform")==="none"&&fe!==document;)fe=fe.parentNode;fe!==document.body&&fe!==document.documentElement?(fe===document&&(fe=xe()),n.top+=fe.scrollTop,n.left+=fe.scrollLeft):fe=xe(),Pn=Ai(fe)}H=P.cloneNode(!0),Ee(H,i.ghostClass,!1),Ee(H,i.fallbackClass,!0),Ee(H,i.dragClass,!0),B(H,"transition",""),B(H,"transform",""),B(H,"box-sizing","border-box"),B(H,"margin",0),B(H,"top",n.top),B(H,"left",n.left),B(H,"width",n.width),B(H,"height",n.height),B(H,"opacity","0.8"),B(H,"position",ln?"absolute":"fixed"),B(H,"zIndex","100000"),B(H,"pointerEvents","none"),x.ghost=H,e.appendChild(H),B(H,"transform-origin",Ni/parseInt(H.style.width)*100+"% "+xi/parseInt(H.style.height)*100+"%")}},_onDragStart:function(e,n){var i=this,o=e.dataTransfer,l=i.options;if(ye("dragStart",this,{evt:e}),x.eventCanceled){this._onDrop();return}ye("setupClone",this),x.eventCanceled||(ne=Mi(P),ne.removeAttribute("id"),ne.draggable=!1,ne.style["will-change"]="",this._hideClone(),Ee(ne,this.options.chosenClass,!1),x.clone=ne),i.cloneId=an(function(){ye("clone",i),!x.eventCanceled&&(i.options.removeCloneOnHide||te.insertBefore(ne,P),i._hideClone(),me({sortable:i,name:"clone"}))}),!n&&Ee(P,l.dragClass,!0),n?(Zt=!0,i._loopId=setInterval(i._emulateDragOver,50)):(j(document,"mouseup",i._onDrop),j(document,"touchend",i._onDrop),j(document,"touchcancel",i._onDrop),o&&(o.effectAllowed="move",l.setData&&l.setData.call(i,o,P)),U(document,"drop",i),B(P,"transform","translateZ(0)")),vt=!0,i._dragStartId=an(i._dragStarted.bind(i,n,e)),U(document,"selectstart",i),Tt=!0,window.getSelection().removeAllRanges(),Ct&&B(document.body,"user-select","none")},_onDragOver:function(e){var n=this.el,i=e.target,o,l,r,s=this.options,a=s.group,u=x.active,c=Qt===a,d=s.sort,p=ce||u,f,h=this,v=!1;if(Ln)return;function g(Be,yt){ye(Be,h,Ne({evt:e,isOwner:c,axis:f?"vertical":"horizontal",revert:r,dragRect:o,targetRect:l,canSort:d,fromSortable:p,target:i,completed:k,onMove:function(Ve,at){return rn(te,n,P,o,Ve,re(Ve),e,at)},changed:_},yt))}function y(){g("dragOverAnimationCapture"),h.captureAnimationState(),h!==p&&p.captureAnimationState()}function k(Be){return g("dragOverCompleted",{insertion:Be}),Be&&(c?u._hideClone():u._showClone(h),h!==p&&(Ee(P,ce?ce.options.ghostClass:u.options.ghostClass,!1),Ee(P,s.ghostClass,!0)),ce!==h&&h!==x.active?ce=h:h===x.active&&ce&&(ce=null),p===h&&(h._ignoreWhileAnimating=i),h.animateAll(function(){g("dragOverAnimationComplete"),h._ignoreWhileAnimating=null}),h!==p&&(p.animateAll(),p._ignoreWhileAnimating=null)),(i===P&&!P.animated||i===n&&!i.animated)&&(bt=null),!s.dragoverBubble&&!e.rootEl&&i!==document&&(P.parentNode[be]._isOutsideThisEl(e.target),!Be&&rt(e)),!s.dragoverBubble&&e.stopPropagation&&e.stopPropagation(),v=!0}function _(){De=ke(P),tt=ke(P,s.draggable),me({sortable:h,name:"change",toEl:n,newIndex:De,newDraggableIndex:tt,originalEvent:e})}if(e.preventDefault!==void 0&&e.cancelable&&e.preventDefault(),i=Ae(i,s.draggable,n,!0),g("dragOver"),x.eventCanceled)return v;if(P.contains(e.target)||i.animated&&i.animatingX&&i.animatingY||h._ignoreWhileAnimating===i)return k(!1);if(Zt=!1,u&&!s.disabled&&(c?d||(r=le!==te):ce===this||(this.lastPutMode=Qt.checkPull(this,u,P,e))&&a.checkPut(this,u,P,e))){if(f=this._getDirection(e,i)==="vertical",o=re(P),g("dragOverValid"),x.eventCanceled)return v;if(r)return le=te,y(),this._hideClone(),g("revert"),x.eventCanceled||(ot?te.insertBefore(P,ot):te.appendChild(P)),k(!0);var E=En(n,s.draggable);if(!E||kl(e,f,this)&&!E.animated){if(E===P)return k(!1);if(E&&n===e.target&&(i=E),i&&(l=re(i)),rn(te,n,P,o,i,l,e,!!i)!==!1)return y(),E&&E.nextSibling?n.insertBefore(P,E.nextSibling):n.appendChild(P),le=n,_(),k(!0)}else if(E&&Cl(e,f,this)){var b=ht(n,0,s,!0);if(b===P)return k(!1);if(i=b,l=re(i),rn(te,n,P,o,i,l,e,!1)!==!1)return y(),n.insertBefore(P,b),le=n,_(),k(!0)}else if(i.parentNode===n){l=re(i);var D=0,C,R=P.parentNode!==n,L=!wl(P.animated&&P.toRect||o,i.animated&&i.toRect||l,f),Z=f?"top":"left",Q=Ti(i,"top","top")||Ti(P,"top","top"),z=Q?Q.scrollTop:void 0;bt!==i&&(C=l[Z],It=!1,en=!L&&s.invertSwap||R),D=Pl(e,i,l,f,L?1:s.swapThreshold,s.invertedSwapThreshold==null?s.swapThreshold:s.invertedSwapThreshold,en,bt===i);var G;if(D!==0){var J=ke(P);do J-=D,G=le.children[J];while(G&&(B(G,"display")==="none"||G===H))}if(D===0||G===i)return k(!1);bt=i,At=D;var M=i.nextElementSibling,Y=!1;Y=D===1;var de=rn(te,n,P,o,i,l,e,Y);if(de!==!1)return(de===1||de===-1)&&(Y=de===1),Ln=!0,setTimeout(Sl,30),y(),Y&&!M?n.appendChild(P):i.parentNode.insertBefore(P,Y?M:i),Q&&Oi(Q,0,z-Q.scrollTop),le=P.parentNode,C!==void 0&&!en&&(tn=Math.abs(C-re(i)[Z])),_(),k(!0)}if(n.contains(P))return k(!1)}return!1},_ignoreWhileAnimating:null,_offMoveEvents:function(){j(document,"mousemove",this._onTouchMove),j(document,"touchmove",this._onTouchMove),j(document,"pointermove",this._onTouchMove),j(document,"dragover",rt),j(document,"mousemove",rt),j(document,"touchmove",rt)},_offUpEvents:function(){var e=this.el.ownerDocument;j(e,"mouseup",this._onDrop),j(e,"touchend",this._onDrop),j(e,"pointerup",this._onDrop),j(e,"pointercancel",this._onDrop),j(e,"touchcancel",this._onDrop),j(document,"selectstart",this)},_onDrop:function(e){var n=this.el,i=this.options;if(De=ke(P),tt=ke(P,i.draggable),ye("drop",this,{evt:e}),le=P&&P.parentNode,De=ke(P),tt=ke(P,i.draggable),x.eventCanceled){this._nulling();return}vt=!1,en=!1,It=!1,clearInterval(this._loopId),clearTimeout(this._dragStartTimer),An(this.cloneId),An(this._dragStartId),this.nativeDraggable&&(j(document,"drop",this),j(n,"dragstart",this._onDragStart)),this._offMoveEvents(),this._offUpEvents(),Ct&&B(document.body,"user-select",""),B(P,"transform",""),e&&(Tt&&(e.cancelable&&e.preventDefault(),!i.dropBubble&&e.stopPropagation()),H&&H.parentNode&&H.parentNode.removeChild(H),(te===le||ce&&ce.lastPutMode!=="clone")&&ne&&ne.parentNode&&ne.parentNode.removeChild(ne),P&&(this.nativeDraggable&&j(P,"dragend",this),Tn(P),P.style["will-change"]="",Tt&&!vt&&Ee(P,ce?ce.options.ghostClass:this.options.ghostClass,!1),Ee(P,this.options.chosenClass,!1),me({sortable:this,name:"unchoose",toEl:le,newIndex:null,newDraggableIndex:null,originalEvent:e}),te!==le?(De>=0&&(me({rootEl:le,name:"add",toEl:le,fromEl:te,originalEvent:e}),me({sortable:this,name:"remove",toEl:le,originalEvent:e}),me({rootEl:le,name:"sort",toEl:le,fromEl:te,originalEvent:e}),me({sortable:this,name:"sort",toEl:le,originalEvent:e})),ce&&ce.save()):De!==gt&&De>=0&&(me({sortable:this,name:"update",toEl:le,originalEvent:e}),me({sortable:this,name:"sort",toEl:le,originalEvent:e})),x.active&&((De==null||De===-1)&&(De=gt,tt=Lt),me({sortable:this,name:"end",toEl:le,originalEvent:e}),this.save()))),this._nulling()},_nulling:function(){ye("nulling",this),te=P=le=H=ot=ne=Kt=et=lt=Ie=Tt=De=tt=gt=Lt=bt=At=ce=Qt=x.dragged=x.ghost=x.clone=x.active=null,nn.forEach(function(e){e.checked=!0}),nn.length=Cn=kn=0},handleEvent:function(e){switch(e.type){case"drop":case"dragend":this._onDrop(e);break;case"dragenter":case"dragover":P&&(this._onDragOver(e),Dl(e));break;case"selectstart":e.preventDefault();break}},toArray:function(){for(var e=[],n,i=this.el.children,o=0,l=i.length,r=this.options;o<l;o++)n=i[o],Ae(n,r.draggable,this.el,!1)&&e.push(n.getAttribute(r.dataIdAttr)||Tl(n));return e},sort:function(e,n){var i={},o=this.el;this.toArray().forEach(function(l,r){var s=o.children[r];Ae(s,this.options.draggable,o,!1)&&(i[l]=s)},this),n&&this.captureAnimationState(),e.forEach(function(l){i[l]&&(o.removeChild(i[l]),o.appendChild(i[l]))}),n&&this.animateAll()},save:function(){var e=this.options.store;e&&e.set&&e.set(this)},closest:function(e,n){return Ae(e,n||this.options.draggable,this.el,!1)},option:function(e,n){var i=this.options;if(n===void 0)return i[e];var o=Pt.modifyOption(this,e,n);typeof o<"u"?i[e]=o:i[e]=n,e==="group"&&Wi(i)},destroy:function(){ye("destroy",this);var e=this.el;e[be]=null,j(e,"mousedown",this._onTapStart),j(e,"touchstart",this._onTapStart),j(e,"pointerdown",this._onTapStart),this.nativeDraggable&&(j(e,"dragover",this),j(e,"dragenter",this)),Array.prototype.forEach.call(e.querySelectorAll("[draggable]"),function(n){n.removeAttribute("draggable")}),this._onDrop(),this._disableDelayedDragEvents(),$t.splice($t.indexOf(this.el),1),this.el=e=null},_hideClone:function(){if(!et){if(ye("hideClone",this),x.eventCanceled)return;B(ne,"display","none"),this.options.removeCloneOnHide&&ne.parentNode&&ne.parentNode.removeChild(ne),et=!0}},_showClone:function(e){if(e.lastPutMode!=="clone"){this._hideClone();return}if(et){if(ye("showClone",this),x.eventCanceled)return;P.parentNode==te&&!this.options.group.revertClone?te.insertBefore(ne,P):ot?te.insertBefore(ne,ot):te.appendChild(ne),this.options.group.revertClone&&this.animate(P,ne),B(ne,"display",""),et=!1}}};function Dl(t){t.dataTransfer&&(t.dataTransfer.dropEffect="move"),t.cancelable&&t.preventDefault()}function rn(t,e,n,i,o,l,r,s){var a,u=t[be],c=u.options.onMove,d;return window.CustomEvent&&!Ue&&!St?a=new CustomEvent("move",{bubbles:!0,cancelable:!0}):(a=document.createEvent("Event"),a.initEvent("move",!0,!0)),a.to=e,a.from=t,a.dragged=n,a.draggedRect=i,a.related=o||e,a.relatedRect=l||re(e),a.willInsertAfter=s,a.originalEvent=r,t.dispatchEvent(a),c&&(d=c.call(u,a,r)),d}function Tn(t){t.draggable=!1}function Sl(){Ln=!1}function Cl(t,e,n){var i=re(ht(n.el,0,n.options,!0)),o=Fi(n.el,n.options,H),l=10;return e?t.clientX<o.left-l||t.clientY<i.top&&t.clientX<i.right:t.clientY<o.top-l||t.clientY<i.bottom&&t.clientX<i.left}function kl(t,e,n){var i=re(En(n.el,n.options.draggable)),o=Fi(n.el,n.options,H),l=10;return e?t.clientX>o.right+l||t.clientY>i.bottom&&t.clientX>i.left:t.clientY>o.bottom+l||t.clientX>i.right&&t.clientY>i.top}function Pl(t,e,n,i,o,l,r,s){var a=i?t.clientY:t.clientX,u=i?n.height:n.width,c=i?n.top:n.left,d=i?n.bottom:n.right,p=!1;if(!r){if(s&&tn<u*o){if(!It&&(At===1?a>c+u*l/2:a<d-u*l/2)&&(It=!0),It)p=!0;else if(At===1?a<c+tn:a>d-tn)return-At}else if(a>c+u*(1-o)/2&&a<d-u*(1-o)/2)return Ll(e)}return p=p||r,p&&(a<c+u*l/2||a>d-u*l/2)?a>c+u/2?1:-1:0}function Ll(t){return ke(P)<ke(t)?1:-1}function Tl(t){for(var e=t.tagName+t.className+t.src+t.href+t.textContent,n=e.length,i=0;n--;)i+=e.charCodeAt(n);return i.toString(36)}function Al(t){nn.length=0;for(var e=t.getElementsByTagName("input"),n=e.length;n--;){var i=e[n];i.checked&&nn.push(i)}}function an(t){return setTimeout(t,0)}function An(t){return clearTimeout(t)}on&&U(document,"touchmove",function(t){(x.active||vt)&&t.cancelable&&t.preventDefault()}),x.utils={on:U,off:j,css:B,find:Li,is:function(e,n){return!!Ae(e,n,e,!1)},extend:fl,throttle:Ii,closest:Ae,toggleClass:Ee,clone:Mi,index:ke,nextTick:an,cancelNextTick:An,detectDirection:Hi,getChild:ht,expando:be},x.get=function(t){return t[be]},x.mount=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];e[0].constructor===Array&&(e=e[0]),e.forEach(function(i){if(!i.prototype||!i.prototype.constructor)throw"Sortable: Mounted plugin must be a constructor function, not ".concat({}.toString.call(i));i.utils&&(x.utils=Ne(Ne({},x.utils),i.utils)),Pt.mount(i)})},x.create=function(t,e){return new x(t,e)},x.version=cl;var ae=[],Ot,In,On=!1,Mn,Fn,sn,Mt;function Il(){function t(){this.defaults={scroll:!0,forceAutoScrollFallback:!1,scrollSensitivity:30,scrollSpeed:10,bubbleScroll:!0};for(var e in this)e.charAt(0)==="_"&&typeof this[e]=="function"&&(this[e]=this[e].bind(this))}return t.prototype={dragStarted:function(n){var i=n.originalEvent;this.sortable.nativeDraggable?U(document,"dragover",this._handleAutoScroll):this.options.supportPointer?U(document,"pointermove",this._handleFallbackAutoScroll):i.touches?U(document,"touchmove",this._handleFallbackAutoScroll):U(document,"mousemove",this._handleFallbackAutoScroll)},dragOverCompleted:function(n){var i=n.originalEvent;!this.options.dragOverBubble&&!i.rootEl&&this._handleAutoScroll(i)},drop:function(){this.sortable.nativeDraggable?j(document,"dragover",this._handleAutoScroll):(j(document,"pointermove",this._handleFallbackAutoScroll),j(document,"touchmove",this._handleFallbackAutoScroll),j(document,"mousemove",this._handleFallbackAutoScroll)),Yi(),un(),pl()},nulling:function(){sn=In=Ot=On=Mt=Mn=Fn=null,ae.length=0},_handleFallbackAutoScroll:function(n){this._handleAutoScroll(n,!0)},_handleAutoScroll:function(n,i){var o=this,l=(n.touches?n.touches[0]:n).clientX,r=(n.touches?n.touches[0]:n).clientY,s=document.elementFromPoint(l,r);if(sn=n,i||this.options.forceAutoScrollFallback||St||Ue||Ct){Nn(n,this.options,s,i);var a=$e(s,!0);On&&(!Mt||l!==Mn||r!==Fn)&&(Mt&&Yi(),Mt=setInterval(function(){var u=$e(document.elementFromPoint(l,r),!0);u!==a&&(a=u,un()),Nn(n,o.options,u,i)},10),Mn=l,Fn=r)}else{if(!this.options.bubbleScroll||$e(s,!0)===xe()){un();return}Nn(n,this.options,$e(s,!1),!1)}}},je(t,{pluginName:"scroll",initializeByDefault:!0})}function un(){ae.forEach(function(t){clearInterval(t.pid)}),ae=[]}function Yi(){clearInterval(Mt)}var Nn=Ii(function(t,e,n,i){if(e.scroll){var o=(t.touches?t.touches[0]:t).clientX,l=(t.touches?t.touches[0]:t).clientY,r=e.scrollSensitivity,s=e.scrollSpeed,a=xe(),u=!1,c;In!==n&&(In=n,un(),Ot=e.scroll,c=e.scrollFn,Ot===!0&&(Ot=$e(n,!0)));var d=0,p=Ot;do{var f=p,h=re(f),v=h.top,g=h.bottom,y=h.left,k=h.right,_=h.width,E=h.height,b=void 0,D=void 0,C=f.scrollWidth,R=f.scrollHeight,L=B(f),Z=f.scrollLeft,Q=f.scrollTop;f===a?(b=_<C&&(L.overflowX==="auto"||L.overflowX==="scroll"||L.overflowX==="visible"),D=E<R&&(L.overflowY==="auto"||L.overflowY==="scroll"||L.overflowY==="visible")):(b=_<C&&(L.overflowX==="auto"||L.overflowX==="scroll"),D=E<R&&(L.overflowY==="auto"||L.overflowY==="scroll"));var z=b&&(Math.abs(k-o)<=r&&Z+_<C)-(Math.abs(y-o)<=r&&!!Z),G=D&&(Math.abs(g-l)<=r&&Q+E<R)-(Math.abs(v-l)<=r&&!!Q);if(!ae[d])for(var J=0;J<=d;J++)ae[J]||(ae[J]={});(ae[d].vx!=z||ae[d].vy!=G||ae[d].el!==f)&&(ae[d].el=f,ae[d].vx=z,ae[d].vy=G,clearInterval(ae[d].pid),(z!=0||G!=0)&&(u=!0,ae[d].pid=setInterval((function(){i&&this.layer===0&&x.active._onTouchMove(sn);var M=ae[this.layer].vy?ae[this.layer].vy*s:0,Y=ae[this.layer].vx?ae[this.layer].vx*s:0;typeof c=="function"&&c.call(x.dragged.parentNode[be],Y,M,t,sn,ae[this.layer].el)!=="continue"||Oi(ae[this.layer].el,Y,M)}).bind({layer:d}),24))),d++}while(e.bubbleScroll&&p!==a&&(p=$e(p,!1)));On=u}},30),Xi=function(e){var n=e.originalEvent,i=e.putSortable,o=e.dragEl,l=e.activeSortable,r=e.dispatchSortableEvent,s=e.hideGhostForTarget,a=e.unhideGhostForTarget;if(n){var u=i||l;s();var c=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:n,d=document.elementFromPoint(c.clientX,c.clientY);a(),u&&!u.el.contains(d)&&(r("spill"),this.onSpill({dragEl:o,putSortable:i}))}};function xn(){}xn.prototype={startIndex:null,dragStart:function(e){var n=e.oldDraggableIndex;this.startIndex=n},onSpill:function(e){var n=e.dragEl,i=e.putSortable;this.sortable.captureAnimationState(),i&&i.captureAnimationState();var o=ht(this.sortable.el,this.startIndex,this.options);o?this.sortable.el.insertBefore(n,o):this.sortable.el.appendChild(n),this.sortable.animateAll(),i&&i.animateAll()},drop:Xi},je(xn,{pluginName:"revertOnSpill"});function Bn(){}Bn.prototype={onSpill:function(e){var n=e.dragEl,i=e.putSortable,o=i||this.sortable;o.captureAnimationState(),n.parentNode&&n.parentNode.removeChild(n),o.animateAll()},drop:Xi},je(Bn,{pluginName:"removeOnSpill"}),x.mount(new Il),x.mount(Bn,xn);function ji(t,e,n){const i=t.slice();return i[16]=e[n],i}function Gi(t,e,n){const i=t.slice();return i[19]=e[n],i}function Ui(t){let e,n,i,o;function l(){return t[10](t[19])}return{c(){e=S("div"),n=S("a"),n.innerHTML='<i class="fas fa-pencil-alt fa-sm"></i>',m(n,"href","javascript:"),m(n,"data-action","editField"),m(n,"class","edit-field svelte-1cweu58"),m(e,"class","right svelte-1cweu58")},m(r,s){K(r,e,s),w(e,n),i||(o=oe(n,"click",l),i=!0)},p(r,s){t=r},d(r){r&&V(e),i=!1,o()}}}function Vi(t,e){let n,i,o,l=e[19].label+"",r,s,a,u=e[2].editable&&Ui(e),c=[e[9](e[19])],d={};for(let p=0;p<c.length;p+=1)d=cn(d,c[p]);return{key:t,first:null,c(){n=S("li"),i=S("div"),o=S("label"),r=ue(l),s=W(),u&&u.c(),a=W(),m(o,"class","svelte-1cweu58"),m(i,"class","left svelte-1cweu58"),Wt(n,d),qt(n,"svelte-1cweu58",!0),this.first=n},m(p,f){K(p,n,f),w(n,i),w(i,o),w(o,r),w(n,s),u&&u.m(n,null),w(n,a)},p(p,f){e=p,f&1&&l!==(l=e[19].label+"")&&He(r,l),e[2].editable?u?u.p(e,f):(u=Ui(e),u.c(),u.m(n,a)):u&&(u.d(1),u=null),Wt(n,d=ci(c,[f&1&&e[9](e[19])])),qt(n,"svelte-1cweu58",!0)},d(p){p&&V(n),u&&u.d()}}}function Ji(t,e){let n,i,o,l=e[16].label+"",r,s,a=[e[9](e[16])],u={};for(let c=0;c<a.length;c+=1)u=cn(u,a[c]);return{key:t,first:null,c(){n=S("li"),i=S("div"),o=S("label"),r=ue(l),s=W(),m(o,"class","svelte-1cweu58"),m(i,"class","left svelte-1cweu58"),Wt(n,u),qt(n,"svelte-1cweu58",!0),this.first=n},m(c,d){K(c,n,d),w(n,i),w(i,o),w(o,r),w(n,s)},p(c,d){e=c,d&2&&l!==(l=e[16].label+"")&&He(r,l),Wt(n,u=ci(a,[d&2&&e[9](e[16])])),qt(n,"svelte-1cweu58",!0)},d(c){c&&V(n)}}}function Ol(t){let e,n,i,o,l,r,s=[],a=new Map,u,c,d,p,f,h,v=[],g=new Map,y=ve(t[0].sort(Qi));const k=b=>b[19].name;for(let b=0;b<y.length;b+=1){let D=Gi(t,y,b),C=k(D);a.set(C,s[b]=Vi(C,D))}let _=ve(t[1]);const E=b=>b[16].name;for(let b=0;b<_.length;b+=1){let D=ji(t,_,b),C=E(D);g.set(C,v[b]=Ji(C,D))}return{c(){e=S("div"),n=S("div"),i=S("div"),o=S("header"),o.textContent=`${N.translate("Selected","labels","Admin")}`,l=W(),r=S("ul");for(let b=0;b<s.length;b+=1)s[b].c();u=W(),c=S("div"),d=S("div"),p=S("header"),p.textContent=`${N.translate("Available","labels","Admin")}`,f=W(),h=S("ul");for(let b=0;b<v.length;b+=1)v[b].c();m(o,"class","svelte-1cweu58"),m(r,"class","enabled connected svelte-1cweu58"),m(i,"class","well"),m(n,"class","col-sm-5"),m(p,"class","svelte-1cweu58"),m(h,"class","disabled connected svelte-1cweu58"),m(d,"class","well"),m(c,"class","col-sm-5"),m(e,"id","layout"),m(e,"class","row")},m(b,D){K(b,e,D),w(e,n),w(n,i),w(i,o),w(i,l),w(i,r);for(let C=0;C<s.length;C+=1)s[C]&&s[C].m(r,null);w(e,u),w(e,c),w(c,d),w(d,p),w(d,f),w(d,h);for(let C=0;C<v.length;C+=1)v[C]&&v[C].m(h,null);t[11](e)},p(b,D){D&645&&(y=ve(b[0].sort(Qi)),s=Gt(s,D,k,1,b,y,a,r,jt,Vi,null,Gi)),D&514&&(_=ve(b[1]),v=Gt(v,D,E,1,b,_,g,h,jt,Ji,null,ji))},d(b){b&&V(e);for(let D=0;D<s.length;D+=1)s[D].d();for(let D=0;D<v.length;D+=1)v[D].d();t[11](null)}}}function Ml(t){let e,n,i={params:t[2],validate:t[8],fetch:t[4],loadLayout:t[3],$$slots:{default:[Ol]},$$scope:{ctx:t}};return e=new _i({props:i}),t[12](e),{c(){Ze(e.$$.fragment)},m(o,l){qe(e,o,l),n=!0},p(o,[l]){const r={};l&4&&(r.params=o[2]),l&16&&(r.fetch=o[4]),l&8&&(r.loadLayout=o[3]),l&4194343&&(r.$$scope={dirty:l,ctx:o}),e.$set(r)},i(o){n||(Te(e.$$.fragment,o),n=!0)},o(o){We(e.$$.fragment,o),n=!1},d(o){t[12](null),ze(e,o)}}}function Fl(t){return t.toLowerCase()}function Ki(t,e){return t[e]}const Qi=(t,e)=>t.sortOrder-e.sortOrder;function Nl(t,e,n){let i,o,l,{params:r}=e,{enabledFields:s=[]}=e,{disabledFields:a=[]}=e,{loadLayout:u}=e,c;Yt(()=>{d()}),li(()=>{o&&o.destroy(),l&&l.destroy()});function d(){const _={group:"fields",draggable:"li",animation:150};o=x.create(i.querySelector("ul.enabled"),{..._,onEnd(E){if(E.to.closest(".connected").classList.contains("enabled")){const[b]=s.splice(E.oldIndex,1);s.splice(E.newIndex,0,b)}else{const b=s[E.oldIndex];s.splice(E.oldIndex,1),a.splice(E.newIndex,0,b),n(1,a=[...a])}n(0,s=[...s])}}),l=x.create(i.querySelector("ul.disabled"),{..._,onEnd(E){if(E.to.closest(".connected").classList.contains("disabled")){const[b]=a.splice(E.oldIndex,1);a.splice(E.newIndex,0,b)}else{const b=a[E.oldIndex];a.splice(E.oldIndex,1),s.splice(E.newIndex,0,b),n(0,s=[...s])}n(1,a=[...a])}})}function p(_){r.openEditDialog(_,r.scope,r.dataAttributeList,r.dataAttributesDefs,E=>{n(0,s=s.map(b=>{if(b.name===_.name)for(let D in E)b[D]=E[D];return b}))})}let{fetch:f=()=>s}=e;function h(_){return _.length===0?(Ye.notify("Layout cannot be empty","error"),!1):!0}function v(_){const E={};return r.dataAttributeList.forEach(b=>{Ki(_,b)!=null&&(E[`data-${Fl(b)}`]=Ki(_,b))}),E}const g=_=>p(_);function y(_){Me[_?"unshift":"push"](()=>{i=_,n(5,i)})}function k(_){Me[_?"unshift":"push"](()=>{c=_,n(6,c)})}return t.$$set=_=>{"params"in _&&n(2,r=_.params),"enabledFields"in _&&n(0,s=_.enabledFields),"disabledFields"in _&&n(1,a=_.disabledFields),"loadLayout"in _&&n(3,u=_.loadLayout),"fetch"in _&&n(4,f=_.fetch)},[s,a,r,u,f,i,c,p,h,v,g,y,k]}class Rn extends Ce{constructor(e){super(),Se(this,e,Nl,Ml,_e,{params:2,enabledFields:0,disabledFields:1,loadLayout:3,fetch:4})}}function xl(t){let e,n,i={params:t[0],enabledFields:t[2],disabledFields:t[3],editable:Bl,loadLayout:t[4]};return e=new Rn({props:i}),t[5](e),{c(){Ze(e.$$.fragment)},m(o,l){qe(e,o,l),n=!0},p(o,[l]){const r={};l&1&&(r.params=o[0]),l&4&&(r.enabledFields=o[2]),l&8&&(r.disabledFields=o[3]),e.$set(r)},i(o){n||(Te(e.$$.fragment,o),n=!0)},o(o){We(e.$$.fragment,o),n=!1},d(o){t[5](null),ze(e,o)}}}let Bl=!0;function Rl(t){return!0}function Hl(t,e,n){let{params:i}=e;i.dataAttributeList||(i.dataAttributeList=["id","name","width","widthPx","link","notSortable","align","view","customLabel","editable"]),i.dataAttributesDefs||(i.dataAttributesDefs={link:{type:"bool"},width:{type:"float"},notSortable:{type:"bool"},align:{type:"enum",options:["left","right"]},view:{type:"varchar",readOnly:!0},customLabel:{type:"varchar",readOnly:!0},widthPx:{type:"float"},name:{type:"varchar",readOnly:!0},editable:{type:"bool"}});let o,l=[],r=[];const s=[],a=[];function u(f){Dt.create(i.scope,h=>{Xe.get(i.scope,i.type,i.relatedScope,i.layoutProfileId,v=>{f&&(c(h,v.layout),f(v))},!1)})}function c(f,h){const v=Object.keys(f.defs.fields).filter(_=>Rl(f.getFieldParam(_,"type"))&&d(f,_)).sort((_,E)=>N.translate(_,"fields",i.scope).localeCompare(N.translate(E,"fields",i.scope))),g=[],y=[],k=[];n(2,l=h.map(_=>{const E=N.translate(_.name,"fields",i.scope);return y.includes(E)&&k.push(E),y.push(E),g.push(_.name),{..._,label:_.label||E}})),n(3,r=v.filter(_=>!g.includes(_)).map(_=>{const E=N.translate(_,"fields",i.scope);y.includes(E)&&k.push(E),y.push(E);const b={name:_,label:E},D=Fe.get(["entityDefs",i.scope,"fields",_,"type"]);return D&&Fe.get(["fields",D,"notSortable"])&&(b.notSortable=!0),b})),[l,r].forEach(_=>{_.forEach(E=>{k.includes(E.label)&&(E.label+=` (${E.name})`)})})}function d(f,h){if(s.includes(h)||a.includes(f.getFieldParam(h,"type")))return!1;const v=["disabled",`layout${Espo.utils.upperCaseFirst(i.type)}Disabled`];i.reelType&&v.push(`layout${Espo.utils.upperCaseFirst(i.reelType)}Disabled`);for(let g of v)if(f.getFieldParam(h,g))return!1;return!0}function p(f){Me[f?"unshift":"push"](()=>{o=f,n(1,o)})}return t.$$set=f=>{"params"in f&&n(0,i=f.params)},[i,o,l,r,u,p]}class Zi extends Ce{constructor(e){super(),Se(this,e,Hl,xl,_e,{params:0})}}function Wl(t){let e,n,i={params:t[0],enabledFields:t[2],disabledFields:t[3],loadLayout:t[5],fetch:t[4]};return e=new Rn({props:i}),t[7](e),{c(){Ze(e.$$.fragment)},m(o,l){qe(e,o,l),n=!0},p(o,[l]){const r={};l&1&&(r.params=o[0]),l&4&&(r.enabledFields=o[2]),l&8&&(r.disabledFields=o[3]),e.$set(r)},i(o){n||(Te(e.$$.fragment,o),n=!0)},o(o){We(e.$$.fragment,o),n=!1},d(o){t[7](null),ze(e,o)}}}function ql(t,e,n){let{params:i}=e,{viewType:o="detail"}=e;i.dataAttributeList||(i.dataAttributeList=["id","name","style","sticked"]),i.dataAttributesDefs||(i.dataAttributesDefs={style:{type:"enum",options:["default","success","danger","primary","info","warning"],translation:"LayoutManager.options.style"},sticked:{type:"bool"},name:{readOnly:!0}});let l,r=[],s=[],a=()=>{let p={};return r.forEach(f=>{p[f.name]=f}),s.forEach(f=>{p[f.name]={...f,disabled:!0}}),p};function u(p){Xe.get(i.scope,i.type,null,i.layoutProfileId,f=>{p&&(c(f.layout),p(f))},!1)}function c(p){let f=[],h={},v={};Fe.get(["clientDefs",i.scope,"defaultSidePanel",o])!==!1&&!Fe.get(["clientDefs",i.scope,"defaultSidePanelDisabled"])&&(f.push("default"),h.default="Default"),(Fe.get(["clientDefs",i.scope,"sidePanels",o])||[]).forEach(g=>{g.name&&(f.push(g.name),g.label&&(h[g.name]=g.label),v[g.name]=g)}),n(3,s=[]),p=p||{},n(2,r=[]),f.forEach((g,y)=>{let k=!1,_=p[g]||{};_.disabled&&(k=!0);let E;if(h[g]?E=N.translate(h[g],"labels",i.scope):E=N.translate(g,"panels",i.scope),k)s.push({name:g,label:E});else{let b={name:g,label:E};b.name in v&&i.dataAttributeList.forEach(D=>{if(D==="name")return;let C=v[b.name]||{};D in C&&(b[D]=C[D])});for(let D in _)b[D]=_[D];b.index="index"in _?_.index:y,r.push(b)}}),r.sort((g,y)=>g.index-y.index)}function d(p){Me[p?"unshift":"push"](()=>{l=p,n(1,l)})}return t.$$set=p=>{"params"in p&&n(0,i=p.params),"viewType"in p&&n(6,o=p.viewType)},[i,l,r,s,a,u,o,d]}class zl extends Ce{constructor(e){super(),Se(this,e,ql,Wl,_e,{params:0,viewType:6})}}function Yl(t){let e,n;return e=new Rn({props:{params:t[0],enabledFields:t[1],disabledFields:t[2],loadLayout:t[3]}}),{c(){Ze(e.$$.fragment)},m(i,o){qe(e,i,o),n=!0},p(i,[o]){const l={};o&1&&(l.params=i[0]),o&2&&(l.enabledFields=i[1]),o&4&&(l.disabledFields=i[2]),e.$set(l)},i(i){n||(Te(e.$$.fragment,i),n=!0)},o(i){We(e.$$.fragment,i),n=!1},d(i){ze(e,i)}}}function Xl(t,e){return!t.getLinkParam(e,"disabled")&&!t.getLinkParam(e,"layoutRelationshipsDisabled")}function jl(t,e,n){let{params:i}=e;i.dataAttributeList||(i.dataAttributeList=["id","name","style","hiddenPerDefault"]),i.dataAttributesDefs||(i.dataAttributesDefs={style:{type:"enum",options:["default","success","danger","primary","info","warning"],translation:"LayoutManager.options.style"},hiddenPerDefault:{type:"bool"},name:{readOnly:!0}});let o=[],l=[];function r(a){Dt.create(i.scope,function(u){Xe.get(i.scope,i.type,null,i.layoutProfileId,c=>{a&&(s(u,c.layout),a(c))},!1)})}function s(a,u){let c=[];for(let f in a.defs.links)["belongsTo","hasMany","hasChildren"].includes(a.defs.links[f].type)&&Xl(a,f)&&c.push(f);const d=Fe.get(["clientDefs",i.scope,"bottomPanels","detail"])||[];for(let f of d)f.layoutRelationshipsDisabled||c.push(f.name);c.sort(function(f,h){let v,g,y=d.find(_=>_.name===f),k=d.find(_=>_.name===h);return f in a.defs.links?v=N.translate(f,"links",i.scope):y&&(v=N.translate(y.label,"labels",i.scope)),h in a.defs.links?g=N.translate(h,"links",i.scope):k&&(g=N.translate(k.label,"labels",i.scope)),v.localeCompare(g)});let p=[];n(1,o=[]),n(2,l=[]);for(let f in u){let h=u[f],v,g=d.find(y=>y.name===h.name);typeof h=="string"||h instanceof String?v={name:h,label:g?N.translate(g.label,"labels",i.scope):N.translate(h,"links",i.scope)}:(v=h,v.label=g?N.translate(g.label,"labels",i.scope):N.translate(v.name,"links",i.scope)),i.dataAttributeList.forEach(y=>{if(y==="name"||y in v)return;let k=Fe.get(["clientDefs",i.scope,"relationshipPanels",v.name,y]);k!==null&&(v[y]=k)}),o.push(v),p.push(v.name)}for(let f of c)if(!p.includes(f)){let h=d.find(v=>v.name===f);l.push({name:f,label:h?N.translate(h.label,"labels",i.scope):N.translate(f,"links",i.scope)})}}return t.$$set=a=>{"params"in a&&n(0,i=a.params)},[i,o,l,r]}class Gl extends Ce{constructor(e){super(),Se(this,e,jl,Yl,_e,{params:0})}}function $i(t,e,n){const i=t.slice();return i[39]=e[n],i}function eo(t,e,n){const i=t.slice();return i[42]=e[n],i}function to(t,e,n){const i=t.slice();return i[45]=e[n],i}function no(t,e,n){const i=t.slice();return i[48]=e[n],i[50]=n,i}function Ul(t){let e,n,i,o,l;function r(){return t[20](t[42],t[45],t[50])}function s(...a){return t[21](t[42],t[45],t[50],...a)}return{c(){e=S("li"),n=S("a"),n.innerHTML='<i class="fas fa-minus"></i>',i=W(),m(n,"href","#"),m(n,"data-action","minusCell"),m(n,"class","remove-field svelte-fp3tbt"),m(e,"class","empty cell svelte-fp3tbt")},m(a,u){K(a,e,u),w(e,n),w(e,i),o||(l=[oe(n,"click",Qe(r)),oe(e,"dragover",Qe(Zl)),oe(e,"drop",s)],o=!0)},p(a,u){t=a},d(a){a&&V(e),o=!1,Re(l)}}}function Vl(t){let e,n=t[48].label+"",i,o,l,r,s,a,u,c,d,p,f;function h(){return t[18](t[42],t[45],t[50])}function v(...g){return t[19](t[48],...g)}return{c(){e=S("li"),i=ue(n),o=W(),l=S("a"),l.innerHTML='<i class="fas fa-times"></i>',r=W(),m(l,"href","#"),m(l,"data-action","removeField"),m(l,"class","remove-field svelte-fp3tbt"),m(e,"class","cell svelte-fp3tbt"),m(e,"draggable","true"),m(e,"data-id",s=t[48].id),m(e,"data-name",a=t[48].name),m(e,"data-full-width",u=t[48].fullWidth?"true":void 0),m(e,"data-custom-label",c=t[48].customLabel?t[48].customLabel:void 0),m(e,"data-no-label",d=t[48].noLabel)},m(g,y){K(g,e,y),w(e,i),w(e,o),w(e,l),w(e,r),p||(f=[oe(l,"click",Qe(h)),oe(e,"dragstart",pn(v))],p=!0)},p(g,y){t=g,y[0]&2&&n!==(n=t[48].label+"")&&He(i,n),y[0]&2&&s!==(s=t[48].id)&&m(e,"data-id",s),y[0]&2&&a!==(a=t[48].name)&&m(e,"data-name",a),y[0]&2&&u!==(u=t[48].fullWidth?"true":void 0)&&m(e,"data-full-width",u),y[0]&2&&c!==(c=t[48].customLabel?t[48].customLabel:void 0)&&m(e,"data-custom-label",c),y[0]&2&&d!==(d=t[48].noLabel)&&m(e,"data-no-label",d)},d(g){g&&V(e),p=!1,Re(f)}}}function io(t){let e;function n(l,r){return l[48]?Vl:Ul}let i=n(t),o=i(t);return{c(){o.c(),e=oi()},m(l,r){o.m(l,r),K(l,e,r)},p(l,r){i===(i=n(l))&&o?o.p(l,r):(o.d(1),o=i(l),o&&(o.c(),o.m(e.parentNode,e)))},d(l){l&&V(e),o.d(l)}}}function oo(t,e){let n,i,o,l,r,s,a,u,c;function d(){return e[17](e[42],e[45])}let p=ve(e[45].cells),f=[];for(let h=0;h<p.length;h+=1)f[h]=io(no(e,p,h));return{key:t,first:null,c(){n=S("li"),i=S("div"),o=S("a"),o.innerHTML='<i class="fas fa-times"></i>',l=W(),r=S("ul");for(let h=0;h<f.length;h+=1)f[h].c();s=W(),m(o,"href","#"),m(o,"data-action","removeRow"),m(o,"class","remove-row pull-right svelte-fp3tbt"),m(i,"class","svelte-fp3tbt"),m(r,"class","cells svelte-fp3tbt"),m(n,"class","row svelte-fp3tbt"),m(n,"data-number",a=e[45].number),this.first=n},m(h,v){K(h,n,v),w(n,i),w(i,o),w(n,l),w(n,r);for(let g=0;g<f.length;g+=1)f[g]&&f[g].m(r,null);w(n,s),u||(c=[oe(o,"click",Qe(d)),oe(r,"mousedown",pn($l))],u=!0)},p(h,v){if(e=h,v[0]&5634){p=ve(e[45].cells);let g;for(g=0;g<p.length;g+=1){const y=no(e,p,g);f[g]?f[g].p(y,v):(f[g]=io(y),f[g].c(),f[g].m(r,null))}for(;g<f.length;g+=1)f[g].d(1);f.length=p.length}v[0]&2&&a!==(a=e[45].number)&&m(n,"data-number",a)},d(h){h&&V(n),fn(f,h),u=!1,Re(c)}}}function lo(t,e){let n,i,o,l=(e[42].customLabel||e[42].label||"")+"",r,s,a,u,c,d,p,f,h,v,g,y=[],k=new Map,_,E,b,D,C,R,L;function Z(){return e[15](e[42])}function Q(){return e[16](e[42])}let z=ve(e[42].rows);const G=M=>M[45].number;for(let M=0;M<z.length;M+=1){let Y=to(e,z,M),de=G(Y);k.set(de,y[M]=oo(de,Y))}function J(){return e[22](e[42])}return{key:t,first:null,c(){n=S("li"),i=S("header"),o=S("label"),r=ue(l),a=ue(` \r
                                `),u=S("a"),u.innerHTML='<i class="fas fa-pencil-alt fa-sm"></i>',c=W(),d=S("a"),p=S("i"),v=W(),g=S("ul");for(let M=0;M<y.length;M+=1)y[M].c();_=W(),E=S("div"),b=S("a"),b.innerHTML='<i class="fas fa-plus"></i>',D=W(),m(o,"data-is-custom",s=e[42].customLabel?"true":void 0),m(o,"class","svelte-fp3tbt"),m(u,"href","#"),m(u,"data-action","edit-panel-label"),m(u,"class","edit-panel-label svelte-fp3tbt"),m(p,"class","fas fa-times"),m(d,"href","#"),Le(d,"float","right"),m(d,"data-action","removePanel"),m(d,"class","remove-panel svelte-fp3tbt"),m(d,"data-number",f=e[42].number),m(i,"data-name",h=e[42].name),m(i,"class","svelte-fp3tbt"),m(g,"class","rows svelte-fp3tbt"),m(b,"href","#"),m(b,"data-action","addRow"),m(b,"class","svelte-fp3tbt"),m(E,"class","svelte-fp3tbt"),m(n,"data-number",C=e[42].number),m(n,"class","panel-layout svelte-fp3tbt"),this.first=n},m(M,Y){K(M,n,Y),w(n,i),w(i,o),w(o,r),w(i,a),w(i,u),w(i,c),w(i,d),w(d,p),w(n,v),w(n,g);for(let de=0;de<y.length;de+=1)y[de]&&y[de].m(g,null);w(n,_),w(n,E),w(E,b),w(n,D),R||(L=[oe(u,"click",Qe(Z)),oe(d,"click",Qe(Q)),oe(g,"mousedown",pn(er)),oe(b,"click",Qe(J))],R=!0)},p(M,Y){e=M,Y[0]&2&&l!==(l=(e[42].customLabel||e[42].label||"")+"")&&He(r,l),Y[0]&2&&s!==(s=e[42].customLabel?"true":void 0)&&m(o,"data-is-custom",s),Y[0]&2&&f!==(f=e[42].number)&&m(d,"data-number",f),Y[0]&2&&h!==(h=e[42].name)&&m(i,"data-name",h),Y[0]&5890&&(z=ve(e[42].rows),y=Gt(y,Y,G,1,e,z,k,g,jt,oo,null,to)),Y[0]&2&&C!==(C=e[42].number)&&m(n,"data-number",C)},d(M){M&&V(n);for(let Y=0;Y<y.length;Y+=1)y[Y].d();R=!1,Re(L)}}}function ro(t){let e,n=t[39].label+"",i,o,l,r,s;function a(...u){return t[23](t[39],...u)}return{c(){e=S("li"),i=ue(n),o=W(),m(e,"class","cell svelte-fp3tbt"),m(e,"data-name",l=t[39].name)},m(u,c){K(u,e,c),w(e,i),w(e,o),r||(s=oe(e,"dragstart",a),r=!0)},p(u,c){t=u,c[0]&4&&n!==(n=t[39].label+"")&&He(i,n),c[0]&4&&l!==(l=t[39].name)&&m(e,"data-name",l)},d(u){u&&V(e),r=!1,s()}}}function Jl(t){let e,n,i,o,l,r,s,a,u=[],c=new Map,d,p,f,h,v,g,y,k,_=ve(t[1]);const E=C=>C[42].number;for(let C=0;C<_.length;C+=1){let R=eo(t,_,C),L=E(R);c.set(L,u[C]=lo(L,R))}let b=ve(t[2]),D=[];for(let C=0;C<b.length;C+=1)D[C]=ro($i(t,b,C));return{c(){e=S("div"),n=S("div"),i=S("div"),o=S("header"),o.textContent=`${N.translate("Layout","LayoutManager")}`,l=W(),r=S("a"),r.textContent=`${N.translate("Add Panel","Admin")}`,s=W(),a=S("ul");for(let C=0;C<u.length;C+=1)u[C].c();d=W(),p=S("div"),f=S("div"),h=S("header"),h.textContent=`${N.translate("Available Fields","Admin")}`,v=W(),g=S("ul");for(let C=0;C<D.length;C+=1)D[C].c();m(o,"class","svelte-fp3tbt"),m(r,"href","#"),m(r,"class","svelte-fp3tbt"),m(a,"class","panels svelte-fp3tbt"),m(i,"class","well svelte-fp3tbt"),m(n,"class","col-md-8 svelte-fp3tbt"),m(h,"class","svelte-fp3tbt"),m(g,"class","disabled cells clearfix svelte-fp3tbt"),m(f,"class","well svelte-fp3tbt"),m(p,"class","col-md-4 svelte-fp3tbt"),m(e,"id","layout"),m(e,"class","row svelte-fp3tbt")},m(C,R){K(C,e,R),w(e,n),w(n,i),w(i,o),w(i,l),w(i,r),w(i,s),w(i,a);for(let L=0;L<u.length;L+=1)u[L]&&u[L].m(a,null);w(e,d),w(e,p),w(p,f),w(f,h),w(f,v),w(f,g);for(let L=0;L<D.length;L+=1)D[L]&&D[L].m(g,null);y||(k=oe(r,"click",Qe(t[5])),y=!0)},p(C,R){if(R[0]&8130&&(_=ve(C[1]),u=Gt(u,R,E,1,C,_,c,a,jt,lo,null,eo)),R[0]&4){b=ve(C[2]);let L;for(L=0;L<b.length;L+=1){const Z=$i(C,b,L);D[L]?D[L].p(Z,R):(D[L]=ro(Z),D[L].c(),D[L].m(g,null))}for(;L<D.length;L+=1)D[L].d(1);D.length=b.length}},d(C){C&&V(e);for(let R=0;R<u.length;R+=1)u[R].d();fn(D,C),y=!1,k()}}}function Kl(t){let e,n;return e=new _i({props:{params:t[0],validate:t[13],fetch:t[4],loadLayout:t[3],$$slots:{default:[Jl]},$$scope:{ctx:t}}}),{c(){Ze(e.$$.fragment)},m(i,o){qe(e,i,o),n=!0},p(i,o){const l={};o[0]&1&&(l.params=i[0]),o[0]&6|o[1]&1048576&&(l.$$scope={dirty:o,ctx:i}),e.$set(l)},i(i){n||(Te(e.$$.fragment,i),n=!0)},o(i){We(e.$$.fragment,i),n=!1},d(i){ze(e,i)}}}function Ql(t,e){return e.some(n=>n.name===t)}const Zl=t=>t.dataTransfer.dropEffect="move",$l=()=>{},er=()=>{};function tr(t,e,n){let{params:i}=e,{columnCount:o=2}=e,l=["id","label","style"],r={label:{type:"varchar"},style:{type:"enum",options:["default","success","danger","primary","info","warning"],translation:"LayoutManager.options.style"},dynamicLogicVisible:{type:"base",view:"views/admin/field-manager/fields/dynamic-logic-conditions"}},s=["modifiedAt","createdAt","modifiedBy","createdBy","assignedUser","ownerUser","teams"],a=[],u=[],c=-1,d=-1,p;Ro();function f(A){let T,F;const q=[];q.push(new Promise(X=>{Dt.create(i.scope,ee=>{Xe.get(i.scope,i.type,i.relatedScope,i.layoutProfileId,$=>{T=$,F=ee,X()},!1)})})),i.type==="detail"&&q.push(new Promise(X=>{Xe.get(i.scope,"sidePanelsDetail",null,i.layoutProfileId,ee=>{p=ee.layout,X()},!1)})),Promise.all(q).then(()=>{A&&(h(F,T.layout),k(),mn().then(()=>{E()}),A(T))})}function h(A,T){let F=[];const q=[];for(const $ in A.defs.fields)v(A,$)&&(q.push(N.translate($,"fields",i.scope)),F.push($));const X=q.filter(($,we)=>q.indexOf($)!==we);let ee=[];n(2,u=[]),n(1,a=T),T.forEach(($,we)=>{$.rows.forEach((ie,Oe)=>{ie&&ie.forEach((Pe,Je)=>{if(Je==o||!Pe)return;let nt=N.translate(Pe.name,"fields",i.scope);X.includes(nt)&&(nt+=` (${Pe.name})`),ee.push({name:Pe.name,label:nt}),n(1,a[we].rows[Oe][Je].label=nt,a)})})}),F.sort(($,we)=>N.translate($,"fields",i.scope).localeCompare(N.translate(we,"fields",i.scope)));for(const $ in F)if(!Ql(F[$],ee)){const we=F[$];let ie=N.translate(we,"fields",i.scope);X.includes(ie)&&(ie+=` (${we})`),u.push({name:we,label:ie})}}function v(A,T){if(g()&&s.includes(T))return!1;const F=["disabled",`layout${Espo.utils.upperCaseFirst(i.type)}Disabled`];i.reelType&&F.push(`layout${Espo.utils.upperCaseFirst(i.reelType)}Disabled`);for(let q of F)if(A.getFieldParam(T,q))return!1;return!0}function g(){if(Fe.get(["clientDefs",i.scope,"defaultSidePanelDisabled"]))return!1;if(p){for(const A in p)if(A==="default"&&p[A].disabled)return!1}return!0}function y(){return a.map(A=>({...A,rows:A.rows.map(T=>T.cells)}))}function k(){c=-1,d=-1,n(1,a=a.map((A,T)=>(A.number=T,c=T,A.rows=A.rows.map(F=>({number:d++,cells:F})),A)))}function _(A){x.create(A,{animation:150,group:"rows",draggable:"li.row",onEnd(T){const F=parseInt(T.to.closest(".panel-layout").getAttribute("data-number")),q=parseInt(T.from.closest(".panel-layout").getAttribute("data-number"));if(q===F)n(1,a=a.map(X=>{if(X.number===F){const[ee]=X.rows.splice(T.oldIndex,1);X.rows.splice(T.newIndex,0,ee)}return X}));else{const ee=a.find($=>$.number===q).rows[T.oldIndex];n(1,a=a.map($=>($.number===q&&$.rows.splice(T.oldIndex,1),$.number===F&&$.rows.splice(T.newIndex,0,ee),$)))}}})}function E(){const A=document.querySelector("ul.panels");A&&x.create(A,{animation:150,group:"panels",draggable:"li.panel-layout",onEnd(T){const F=Array.from(T.to.children);n(1,a=F.map(q=>{const X=parseInt(q.getAttribute("data-number"));return a.find(ee=>ee.number===X)}))}}),document.querySelectorAll("ul.rows").forEach(T=>{_(T)}),document.querySelectorAll("ul.cells.disabled").forEach(T=>{x.create(T,{animation:150,group:"cells",draggable:"li.cell"})})}function b(){c++;const A={label:"New panel",rows:[{number:d++,cells:[!1,!1]}],number:c,name:`panel${c}`,isCustomLabel:!0};n(1,a=[...a,A]),mn().then(()=>{const T=document.querySelector(`.panel-layout[data-number="${A.number}"] > .rows`);_(T)})}function D(A){const T=a.find(q=>q.number===A);n(1,a=a.filter(q=>q!==T));let F=[];T.rows.forEach(q=>{q.cells.forEach(X=>{X&&F.push(X)})}),n(2,u=[...u,...F])}function C(A){n(1,a=a.map(T=>(T.number===A&&(T.rows=[...T.rows,{number:d++,cells:Array(o).fill(!1)}]),T)))}function R(A,T){n(1,a=a.map(F=>{if(F.number===A){const q=F.rows.find(X=>X.number===T);F.rows=F.rows.filter(X=>X!=q),n(2,u=[...u,...q.cells.filter(X=>!!X)])}return F}))}function L(A,T,F){n(1,a=a.map(q=>(q.number===A&&(q.rows=q.rows.map((X,ee)=>{if(X.number===T){const $=X.cells[F];$&&n(2,u=[...u,$]),X.cells[F]=!1}return X})),q)))}function Z(A,T,F,q){const X=A.dataTransfer.getData("name");let ee=u.find(ie=>ie.name===X),$=null,we=null;if(ee)n(2,u=u.filter(ie=>ie!==ee));else{if(a.forEach(ie=>{ie.rows.forEach((Oe,Pe)=>{Oe.cells.forEach(Je=>{Je&&Je.name===X&&(ee=Je,$=Oe.number,we=ie.number)})})}),!ee)return;n(1,a=a.map((ie,Oe)=>(we===ie.number&&(ie.rows=ie.rows.map((Pe,Je)=>(Pe.number===$&&(Pe.cells=Pe.cells.map((nt,dr)=>nt&&nt.name===X?!1:nt)),Pe))),ie)))}n(1,a=a.map(ie=>(T===ie.number&&(ie.rows=ie.rows.map(Oe=>(F===Oe.number&&(Oe.cells=Oe.cells.map((Pe,Je)=>Je===q?(ee.fullWidth&&Oe.cells.length>1&&delete ee.fullWidth,ee):Pe)),Oe))),ie)))}function Q(A){i.onEditPanel(A,l,r,T=>{n(1,a=a.map(F=>(F.number===A.number&&l.forEach(q=>{A[q]=T[q]}),F)))})}function z(A,T,F){n(1,a=a.map(q=>(A===q.number&&(q.rows=q.rows.map(X=>{if(T===X.number){const ee=X.cells.filter(($,we)=>we!==F);ee.length===1&&ee[0]&&(ee[0].fullWidth=!0),X.cells=ee}return X})),q)))}function G(A){let T=0;return A.forEach(F=>{F.rows.forEach(q=>{q.forEach(X=>{X&&T++})})}),T===0?(Ye.notify("Layout cannot be empty.","error"),!1):!0}const J=A=>Q(A),M=A=>D(A.number),Y=(A,T)=>R(A.number,T.number),de=(A,T,F)=>L(A.number,T.number,F),Be=(A,T)=>{T.dataTransfer.setData("name",A.name)},yt=(A,T,F)=>z(A.number,T.number,F),Ft=(A,T,F,q)=>Z(q,A.number,T.number,F),Ve=A=>C(A.number),at=(A,T)=>{T.dataTransfer.setData("name",A.name)};return t.$$set=A=>{"params"in A&&n(0,i=A.params),"columnCount"in A&&n(14,o=A.columnCount)},[i,a,u,f,y,b,D,C,R,L,Z,Q,z,G,o,J,M,Y,de,Be,yt,Ft,Ve,at]}class nr extends Ce{constructor(e){super(),Se(this,e,tr,Kl,_e,{params:0,columnCount:14},null,[-1,-1])}}function ir(t){let e,n;return e=new t[1]({props:{params:t[0],viewType:t[2]}}),{c(){Ze(e.$$.fragment)},m(i,o){qe(e,i,o),n=!0},p(i,[o]){const l={};o&1&&(l.params=i[0]),o&4&&(l.viewType=i[2]),e.$set(l)},i(i){n||(Te(e.$$.fragment,i),n=!0)},o(i){We(e.$$.fragment,i),n=!1},d(i){ze(e,i)}}}function or(t,e,n){let{params:i}=e,o,l;const r=Fe.get(["clientDefs",i.scope,"additionalLayouts",i.type])||i.type;switch(r&&(i.reelType=r),t.$$set=s=>{"params"in s&&n(0,i=s.params)},r){case"list":n(1,o=Zi);break;case"kanban":n(1,o=Zi),n(0,i.dataAttributeList=["id","name","link","align","view","isLarge","cssStyle"],i),n(0,i.dataAttributesDefs={link:{type:"bool"},isLarge:{type:"bool"},width:{type:"float"},cssStyle:{type:"varchar"},align:{type:"enum",options:["left","right"]},view:{type:"varchar",readOnly:!0},name:{type:"varchar",readOnly:!0}},i);break;case"relationships":n(1,o=Gl);break;case"detail":n(1,o=nr);break;case"sidePanelsDetail":n(2,l="detail"),n(1,o=zl);break}return[i,o,l]}class lr extends Ce{constructor(e){super(),Se(this,e,or,ir,_e,{params:0})}}function rr(t){let e,n,i,o,l,r=N.translate("apiRequest","labels","Admin")+"",s,a,u,c,d,p,f,h,v,g,y,k,_,E,b,D,C,R,L,Z,Q,z,G=N.translate("response","fields","Admin")+"",J,M,Y=N.translate("status","labels","Admin")+"",de,Be,yt,Ft,Ve,at,A;return{c(){e=S("div"),n=S("h3"),i=S("div"),o=S("div"),l=S("a"),l.textContent=`${N.translate("Administration")}`,s=ue(r),a=W(),u=S("div"),u.textContent=`${N.translate("apiRequest","labels","Admin")}`,c=W(),d=S("button"),d.textContent=`${N.translate("execute","labels","Admin")}`,p=W(),f=S("div"),h=S("div"),v=S("div"),g=S("div"),y=S("label"),y.textContent=`${N.translate("Type","fields","Admin")}`,k=W(),_=S("div"),E=W(),b=S("div"),D=S("div"),C=S("label"),C.textContent=`${N.translate("request","fields","Admin")}`,R=W(),L=S("div"),Z=W(),Q=S("div"),z=S("label"),J=ue(G),M=S("span"),de=ue(Y),Be=ue(": "),yt=S("span"),Ft=W(),Ve=S("div"),m(l,"href","#Admin"),m(o,"class","breadcrumbs-wrapper"),m(i,"class","header-breadcrumbs fixed-header-breadcrumbs"),m(u,"class","header-title"),Le(d,"margin","10px 7px 10px 5px"),m(d,"class","btn btn-primary action"),m(d,"data-action","execute"),m(d,"type","button"),m(e,"class","page-header"),m(y,"class","control-label"),m(y,"data-name","type"),m(_,"class","field"),m(_,"data-name","type"),m(g,"class","col-xs-12 cell form-group"),m(v,"class","row"),m(h,"class","col-sm-3"),m(f,"class","row"),m(C,"class","control-label"),m(C,"data-name","request"),m(L,"class","field"),m(L,"data-name","request"),m(D,"class","col-sm-12 col-md-6 cell form-group"),m(M,"class","pull-right status hidden"),Le(z,"width","100%"),m(z,"class","control-label"),m(z,"data-name","response"),m(Ve,"class","field"),m(Ve,"data-name","response"),m(Q,"class","col-sm-12 col-md-6 cell form-group"),m(b,"class","row")},m(T,F){K(T,e,F),w(e,n),w(n,i),w(i,o),w(o,l),w(o,s),w(n,a),w(n,u),w(e,c),w(e,d),K(T,p,F),K(T,f,F),w(f,h),w(h,v),w(v,g),w(g,y),w(g,k),w(g,_),K(T,E,F),K(T,b,F),w(b,D),w(D,C),w(D,R),w(D,L),w(b,Z),w(b,Q),w(Q,z),w(z,J),w(z,M),w(M,de),w(M,Be),w(M,yt),w(Q,Ft),w(Q,Ve),at||(A=oe(d,"click",function(){dn(t[0](t[1]))&&t[0](t[1]).apply(this,arguments)}),at=!0)},p(T,[F]){t=T},i:ge,o:ge,d(T){T&&(V(e),V(p),V(f),V(E),V(b)),at=!1,A()}}}function ar(t,e,n){let{afterOnMount:i=()=>null}=e,{sendRequest:o=()=>null}=e,l=null;return Yt(()=>{Dt.create("",function(r){n(1,l=r),i(l)})}),t.$$set=r=>{"afterOnMount"in r&&n(2,i=r.afterOnMount),"sendRequest"in r&&n(0,o=r.sendRequest)},[o,l,i]}class sr extends Ce{constructor(e){super(),Se(this,e,ar,rr,_e,{afterOnMount:2,sendRequest:0})}}window.SvelteLanguage=N,window.SvelteUserData=yn,window.SvelteNotifier=Ye,window.SvelteLayoutManager=Xe,window.SvelteMetadata=Fe,window.SvelteModelFactory=Dt,window.driver=Lo,pe.ApiRequestComponent=sr,pe.JobManagerIcon=Qo,pe.LayoutComponent=lr,pe.UpdatePanel=ol,Object.defineProperty(pe,Symbol.toStringTag,{value:"Module"})});
