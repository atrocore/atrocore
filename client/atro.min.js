(function(fe,K){typeof exports=="object"&&typeof module<"u"?K(exports):typeof define=="function"&&define.amd?define(["exports"],K):(fe=typeof globalThis<"u"?globalThis:fe||self,K(fe.Svelte={}))})(this,function(fe){"use strict";var ca=Object.defineProperty;var da=(fe,K,Xe)=>K in fe?ca(fe,K,{enumerable:!0,configurable:!0,writable:!0,value:Xe}):fe[K]=Xe;var yn=(fe,K,Xe)=>da(fe,typeof K!="symbol"?K+"":K,Xe);function K(){}function Xe(t,e){for(const n in e)t[n]=e[n];return t}function wn(t){return t()}function En(){return Object.create(null)}function Ie(t){t.forEach(wn)}function Dn(t){return typeof t=="function"}function ve(t,e){return t!=t?e==e:t!==e||t&&typeof t=="object"||typeof t=="function"}let kt;function Sn(t,e){return t===e?!0:(kt||(kt=document.createElement("a")),kt.href=e,t===kt.href)}function Ml(t){return Object.keys(t).length===0}function Rl(t,e,n,l){if(t){const i=kn(t,e,n,l);return t[0](i)}}function kn(t,e,n,l){return t[1]&&l?Xe(n.ctx.slice(),t[1](l(e))):n.ctx}function Hl(t,e,n,l){if(t[2]&&l){const i=t[2](l(n));if(e.dirty===void 0)return i;if(typeof i=="object"){const a=[],o=Math.max(e.dirty.length,i.length);for(let s=0;s<o;s+=1)a[s]=e.dirty[s]|i[s];return a}return e.dirty|i}return e.dirty}function Bl(t,e,n,l,i,a){if(i){const o=kn(e,n,l,a);t.p(o,i)}}function Yl(t){if(t.ctx.length>32){const e=[],n=t.ctx.length/32;for(let l=0;l<n;l++)e[l]=-1;return e}return-1}function y(t,e){t.appendChild(e)}function G(t,e,n){t.insertBefore(e,n||null)}function W(t){t.parentNode&&t.parentNode.removeChild(t)}function dt(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}function D(t){return document.createElement(t)}function ce(t){return document.createTextNode(t)}function q(){return ce(" ")}function Tn(){return ce("")}function te(t,e,n,l){return t.addEventListener(e,n,l),()=>t.removeEventListener(e,n,l)}function je(t){return function(e){return e.preventDefault(),t.call(this,e)}}function Vt(t){return function(e){return e.stopPropagation(),t.call(this,e)}}function h(t,e,n){n==null?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}const ql=["width","height"];function Tt(t,e){const n=Object.getOwnPropertyDescriptors(t.__proto__);for(const l in e)e[l]==null?t.removeAttribute(l):l==="style"?t.style.cssText=e[l]:l==="__value"?t.value=t[l]=e[l]:n[l]&&n[l].set&&ql.indexOf(l)===-1?t[l]=e[l]:h(t,l,e[l])}function zl(t){return Array.from(t.childNodes)}function Oe(t,e){e=""+e,t.data!==e&&(t.data=e)}function We(t,e,n,l){n==null?t.style.removeProperty(e):t.style.setProperty(e,n,"")}function Pt(t,e,n){t.classList.toggle(e,!!n)}function Xl(t,e,{bubbles:n=!1,cancelable:l=!1}={}){return new CustomEvent(t,{detail:e,bubbles:n,cancelable:l})}let ht;function mt(t){ht=t}function Lt(){if(!ht)throw new Error("Function called outside component initialization");return ht}function Kt(t){Lt().$$.on_mount.push(t)}function jl(t){Lt().$$.after_update.push(t)}function Pn(t){Lt().$$.on_destroy.push(t)}function Ln(){const t=Lt();return(e,n,{cancelable:l=!1}={})=>{const i=t.$$.callbacks[e];if(i){const a=Xl(e,n,{cancelable:l});return i.slice().forEach(o=>{o.call(t,a)}),!a.defaultPrevented}return!0}}const tt=[],Pe=[];let nt=[];const Cn=[],An=Promise.resolve();let Zt=!1;function In(){Zt||(Zt=!0,An.then(Fn))}function On(){return In(),An}function Jt(t){nt.push(t)}const xt=new Set;let lt=0;function Fn(){if(lt!==0)return;const t=ht;do{try{for(;lt<tt.length;){const e=tt[lt];lt++,mt(e),Wl(e.$$)}}catch(e){throw tt.length=0,lt=0,e}for(mt(null),tt.length=0,lt=0;Pe.length;)Pe.pop()();for(let e=0;e<nt.length;e+=1){const n=nt[e];xt.has(n)||(xt.add(n),n())}nt.length=0}while(tt.length);for(;Cn.length;)Cn.pop()();Zt=!1,xt.clear(),mt(t)}function Wl(t){if(t.fragment!==null){t.update(),Ie(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(Jt)}}function Gl(t){const e=[],n=[];nt.forEach(l=>t.indexOf(l)===-1?e.push(l):n.push(l)),n.forEach(l=>l()),nt=e}const Ct=new Set;let Ul;function Ee(t,e){t&&t.i&&(Ct.delete(t),t.i(e))}function Fe(t,e,n,l){if(t&&t.o){if(Ct.has(t))return;Ct.add(t),Ul.c.push(()=>{Ct.delete(t)}),t.o(e)}}function de(t){return(t==null?void 0:t.length)!==void 0?t:Array.from(t)}function Nn(t,e){t.d(1),e.delete(t.key)}function Mn(t,e,n,l,i,a,o,s,r,u,c,f){let m=t.length,b=a.length,d=m;const v={};for(;d--;)v[t[d].key]=d;const p=[],g=new Map,k=new Map,_=[];for(d=b;d--;){const S=f(i,a,d),M=n(S);let C=o.get(M);C?_.push(()=>C.p(S,e)):(C=u(M,S),C.c()),g.set(M,p[d]=C),M in v&&k.set(M,Math.abs(d-v[M]))}const w=new Set,L=new Set;function T(S){Ee(S,1),S.m(s,c),o.set(S.key,S),c=S.first,b--}for(;m&&b;){const S=p[b-1],M=t[m-1],C=S.key,le=M.key;S===M?(c=S.first,m--,b--):g.has(le)?!o.has(C)||w.has(C)?T(S):L.has(le)?m--:k.get(C)>k.get(le)?(L.add(C),T(S)):(w.add(le),m--):(r(M,o),m--)}for(;m--;){const S=t[m];g.has(S.key)||r(S,o)}for(;b;)T(p[b-1]);return Ie(_),p}function Rn(t,e){const n={},l={},i={$$scope:1};let a=t.length;for(;a--;){const o=t[a],s=e[a];if(s){for(const r in o)r in s||(l[r]=1);for(const r in s)i[r]||(n[r]=s[r],i[r]=1);t[a]=s}else for(const r in o)i[r]=1}for(const o in l)o in n||(n[o]=void 0);return n}function Ge(t){t&&t.c()}function Ne(t,e,n){const{fragment:l,after_update:i}=t.$$;l&&l.m(e,n),Jt(()=>{const a=t.$$.on_mount.map(wn).filter(Dn);t.$$.on_destroy?t.$$.on_destroy.push(...a):Ie(a),t.$$.on_mount=[]}),i.forEach(Jt)}function Me(t,e){const n=t.$$;n.fragment!==null&&(Gl(n.after_update),Ie(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function Ql(t,e){t.$$.dirty[0]===-1&&(tt.push(t),In(),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function De(t,e,n,l,i,a,o=null,s=[-1]){const r=ht;mt(t);const u=t.$$={fragment:null,ctx:[],props:a,update:K,not_equal:i,bound:En(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(r?r.$$.context:[])),callbacks:En(),dirty:s,skip_bound:!1,root:e.target||r.$$.root};o&&o(u.root);let c=!1;if(u.ctx=n?n(t,e.props||{},(f,m,...b)=>{const d=b.length?b[0]:m;return u.ctx&&i(u.ctx[f],u.ctx[f]=d)&&(!u.skip_bound&&u.bound[f]&&u.bound[f](d),c&&Ql(t,f)),m}):[],u.update(),c=!0,Ie(u.before_update),u.fragment=l?l(u.ctx):!1,e.target){if(e.hydrate){const f=zl(e.target);u.fragment&&u.fragment.l(f),f.forEach(W)}else u.fragment&&u.fragment.c();e.intro&&Ee(t.$$.fragment),Ne(t,e.target,e.anchor),Fn()}mt(r)}class Se{constructor(){yn(this,"$$");yn(this,"$$set")}$destroy(){Me(this,1),this.$destroy=K}$on(e,n){if(!Dn(n))return K;const l=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return l.push(n),()=>{const i=l.indexOf(n);i!==-1&&l.splice(i,1)}}$set(e){this.$$set&&!Ml(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}const Vl="4",it=[];function at(t,e=K){let n;const l=new Set;function i(s){if(ve(t,s)&&(t=s,n)){const r=!it.length;for(const u of l)u[1](),it.push(u,t);if(r){for(let u=0;u<it.length;u+=2)it[u][0](it[u+1]);it.length=0}}}function a(s){i(s(t))}function o(s,r=K){const u=[s,r];return l.add(u),l.size===1&&(n=e(i,a)||K),s(t),()=>{l.delete(u),l.size===0&&n&&(n(),n=null)}}return{set:i,update:a,subscribe:o}}const $t=at({}),Y={setTranslations(t){$t.set(t)},has(t,e,n){let l=!1;return $t.subscribe(i=>{if(n in i&&e in i[n]&&t in i[n][e]){l=!0;return}})(),l},get(t,e,n){let l=n;return $t.subscribe(i=>{if(t in i&&e in i[t]&&n in i[t][e]){l=i[t][e][n];return}if(t in i&&e in i[t]&&n in i[t][e]){l=i[t][e][n];return}if(t=="Global"){l=n;return}l=null})(),l},translate(t,e=null,n=null){n=n||"Global",e=e||"labels";let l=Y.get(n,e,t);return l===null&&n!="Global"&&(l=Y.get("Global",e,t)),l},translateOption(t,e,n=null){let l=Y.translate(e,"options",n);return l===null?"":typeof l=="object"?l[t]:t}},Hn=at({}),Bn={set(t){Hn.set(t)},get(){let t=null;return Hn.subscribe(e=>{e&&(t=e)})(),t}},en=at(),Re={setNotifier(t){en.set(t)},notify(t,e=null,n=2e3){en.subscribe(l=>{l&&l.notify(t,e,2e3)})()},confirm(t=null,e=null,n){en.subscribe(l=>{if(l){let i=null,a=null,o=null;typeof t=="string"||t instanceof String?(a=t,o=Y.translate("Yes")):(t=t||{},a=t.message,o=t.confirmText,i=t.confirmStyle||null),l.confirm(a,{confirmText:o,cancelText:Y.translate("Cancel"),confirmStyle:i},e,n)}})()}},At=at(),He={setLayoutManager(t){At.set(t)},resetToDefault(t,e,n,l){let i=null;return At.subscribe(a=>{a&&(i=a.resetToDefault(t,e,n,l))})(),i},get:function(t,e,n,l,i){let a=null;return At.subscribe(o=>{o&&(a=o.get(t,e,n,l,i))})(),a},set:function(t,e,n,l,i){let a=null;return At.subscribe(o=>{o&&(a=o.set(t,e,n,l,i))})(),a}},Yn=at(),Ue={setMetadata(t){Yn.set(t)},get(t){Yn.subscribe(e=>{e&&e.get(t)})()}},qn=at(),It={setModelFactory(t){qn.set(t)},create(t,e){qn.subscribe(n=>{n&&n.create(t,e)})()}};typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(Vl);function zn(t){let e,n,l,i,a,o,s,r,u,c,f,m,b,d,v;function p(_,w){return _[2]?Zl:Kl}let g=p(t),k=g(t);return{c(){e=D("div"),n=D("div"),l=D("div"),i=D("span"),i.textContent=`${Y.translate("queueManager","labels","QueueItem")}`,a=q(),o=D("span"),s=D("a"),s.innerHTML='<span aria-hidden="true">Ã—</span>',r=q(),k.c(),u=q(),c=D("a"),c.textContent=`${Y.translate("View List")}`,f=q(),m=D("div"),b=D("div"),b.textContent=`${Y.translate("Loading...")}`,h(i,"class","panel-heading-title"),h(s,"href","/"),h(s,"class","close svelte-1p6ppx8"),h(c,"href","#QueueItem"),h(c,"title",Y.translate("View List")),h(c,"class","qp-view-list svelte-1p6ppx8"),h(o,"class","pull-right"),h(l,"class","panel-heading clearfix"),h(b,"class","list-container"),h(m,"class","panel-body"),h(n,"class","panel panel-default"),h(e,"class","queue-panel-container")},m(_,w){G(_,e,w),y(e,n),y(n,l),y(l,i),y(l,a),y(l,o),y(o,s),y(o,r),k.m(o,null),y(o,u),y(o,c),y(n,f),y(n,m),y(m,b),t[9](e),d||(v=te(s,"click",t[6]),d=!0)},p(_,w){g===(g=p(_))&&k?k.p(_,w):(k.d(1),k=g(_),k&&(k.c(),k.m(o,u)))},d(_){_&&W(e),k.d(),t[9](null),d=!1,v()}}}function Kl(t){let e,n,l;return{c(){e=D("a"),e.textContent=`${Y.translate("Pause")}`,h(e,"href","/"),h(e,"title",Y.translate("Pause")),h(e,"class","qm-button")},m(i,a){G(i,e,a),n||(l=te(e,"click",t[8]),n=!0)},p:K,d(i){i&&W(e),n=!1,l()}}}function Zl(t){let e,n,l;return{c(){e=D("a"),e.textContent=`${Y.translate("Start")}`,h(e,"href","/"),h(e,"title",Y.translate("Start")),h(e,"class","qm-button")},m(i,a){G(i,e,a),n||(l=te(e,"click",t[7]),n=!0)},p:K,d(i){i&&W(e),n=!1,l()}}}function Jl(t){let e,n=t[0]&&zn(t);return{c(){n&&n.c(),e=Tn()},m(l,i){n&&n.m(l,i),G(l,e,i)},p(l,[i]){l[0]?n?n.p(l,i):(n=zn(l),n.c(),n.m(e.parentNode,e)):n&&(n.d(1),n=null)},i:K,o:K,d(l){l&&W(e),n&&n.d(l)}}}function xl(t,e,n){let{isOpen:l=!1}=e,{close:i}=e,{icon:a}=e,o=!1;window.addEventListener("publicDataFetched",d=>{n(2,o=!!d.detail.qmPaused)});let s;function r(d){s&&!s.contains(d.target)&&a&&!a.contains(d.target)&&l===!0&&i()}Kt(()=>{document.addEventListener("click",r)}),Pn(()=>{document.removeEventListener("click",r)});async function u(d){let v=Bn.get();if(v)try{const p=await fetch("/api/v1/App/action/QueueManagerUpdate",{method:"POST",headers:{"Content-Type":"application/json","Authorization-Token":btoa(v.user.userName+":"+v.token)},body:JSON.stringify({pause:d})});if(!p.ok)throw new Error("Network response was not ok");await p.json(),Re.notify("Done","success")}catch(p){console.error("Error:",p)}}const c=d=>{d.preventDefault(),i()},f=d=>{d.preventDefault(),u(!1)},m=d=>{d.preventDefault(),u(!0)};function b(d){Pe[d?"unshift":"push"](()=>{s=d,n(3,s)})}return t.$$set=d=>{"isOpen"in d&&n(0,l=d.isOpen),"close"in d&&n(1,i=d.close),"icon"in d&&n(5,a=d.icon)},[l,i,o,s,u,a,c,f,m,b]}class $l extends Se{constructor(e){super(),De(this,e,xl,Jl,ve,{isOpen:0,close:1,icon:5})}}function Xn(t){let e;return{c(){e=D("span"),h(e,"class","fas fa-pause-circle pause-icon")},m(n,l){G(n,e,l)},d(n){n&&W(e)}}}function ei(t){let e,n,l,i,a,o,s,r,u=t[2]&&Xn();return a=new $l({props:{icon:t[0],isOpen:t[1],close:t[4]}}),{c(){e=D("a"),n=D("span"),l=q(),u&&u.c(),i=q(),Ge(a.$$.fragment),h(n,"class","fas fa-tasks"),h(e,"href","/"),h(e,"class","notifications-button")},m(c,f){G(c,e,f),y(e,n),y(e,l),u&&u.m(e,null),t[6](e),G(c,i,f),Ne(a,c,f),o=!0,s||(r=te(e,"click",t[7]),s=!0)},p(c,[f]){c[2]?u||(u=Xn(),u.c(),u.m(e,null)):u&&(u.d(1),u=null);const m={};f&1&&(m.icon=c[0]),f&2&&(m.isOpen=c[1]),a.$set(m)},i(c){o||(Ee(a.$$.fragment,c),o=!0)},o(c){Fe(a.$$.fragment,c),o=!1},d(c){c&&(W(e),W(i)),u&&u.d(),t[6](null),Me(a,c),s=!1,r()}}}function ti(t,e,n){let{renderTable:l=()=>{}}=e,i,a=!1,o=!1;window.addEventListener("publicDataFetched",f=>{n(2,o=!!f.detail.qmPaused)});function s(){a||(n(1,a=!0),l())}function r(){n(1,a=!1),window.dispatchEvent(new Event("qmPanelClosed"))}function u(f){Pe[f?"unshift":"push"](()=>{i=f,n(0,i)})}const c=f=>{f.preventDefault(),s()};return t.$$set=f=>{"renderTable"in f&&n(5,l=f.renderTable)},[i,a,o,s,r,l,u,c]}class ni extends Se{constructor(e){super(),De(this,e,ti,ei,ve,{renderTable:5})}}function li(t){let e,n=`${t[0]}px`,l=`${t[0]}px`,i=`${t[1]}px`;return{c(){e=D("div"),h(e,"class","loading-icon spinner svelte-yw8t7l"),We(e,"width",n),We(e,"height",l),We(e,"border-width",i)},m(a,o){G(a,e,o)},p(a,[o]){o&1&&n!==(n=`${a[0]}px`)&&We(e,"width",n),o&1&&l!==(l=`${a[0]}px`)&&We(e,"height",l),o&2&&i!==(i=`${a[1]}px`)&&We(e,"border-width",i)},i:K,o:K,d(a){a&&W(e)}}}function ii(t,e,n){let{size:l=40}=e,{thickness:i=4}=e;return t.$$set=a=>{"size"in a&&n(0,l=a.size),"thickness"in a&&n(1,i=a.thickness)},[l,i]}class ai extends Se{constructor(e){super(),De(this,e,ii,li,ve,{size:0,thickness:1})}}function jn(t){let e,n;return{c(){e=D("img"),Sn(e.src,n=t[1])||h(e,"src",n),h(e,"class","logo"),h(e,"alt",t[0])},m(l,i){G(l,e,i)},p(l,i){i&2&&!Sn(e.src,n=l[1])&&h(e,"src",n),i&1&&h(e,"alt",l[0])},d(l){l&&W(e)}}}function Wn(t){let e,n,l;return{c(){e=D("a"),n=D("i"),l=ce("Recovery Instructions"),h(n,"class","fa fa-history svelte-1qmezxs"),h(e,"href",t[2]),h(e,"target","_blank"),h(e,"class","btn btn-default svelte-1qmezxs"),h(e,"role","button"),We(e,"float","right")},m(i,a){G(i,e,a),y(e,n),y(e,l)},p(i,a){a&4&&h(e,"href",i[2])},d(i){i&&W(e)}}}function Gn(t){let e,n,l,i,a,o;return{c(){e=D("hr"),n=q(),l=D("pre"),i=ce(t[3]),h(l,"class","logs-container svelte-1qmezxs")},m(s,r){G(s,e,r),G(s,n,r),G(s,l,r),y(l,i),t[11](l),a||(o=te(l,"scroll",t[8]),a=!0)},p(s,r){r&8&&Oe(i,s[3])},d(s){s&&(W(e),W(n),W(l)),t[11](null),a=!1,o()}}}function oi(t){let e,n,l,i,a,o,s,r,u,c,f,m,b,d,v,p,g,k,_=t[4]?"Hide":"Show",w,L,T,S,M,C,le,ue,V=t[1]&&jn(t);c=new ai({props:{size:"40",thickness:"5"}});let U=t[2]&&Wn(t),Z=t[4]&&t[3]&&Gn(t);return{c(){e=D("div"),n=D("div"),l=D("div"),V&&V.c(),i=q(),a=D("div"),o=D("div"),s=D("h3"),s.textContent="System is updating...",r=q(),u=D("section"),Ge(c.$$.fragment),f=q(),m=D("h5"),b=ce(t[5]),d=q(),v=D("section"),p=D("div"),g=D("button"),k=D("i"),w=ce(_),L=ce(" logs"),S=q(),U&&U.c(),M=q(),Z&&Z.c(),h(l,"class","logo-container"),h(n,"class","panel-heading"),h(m,"class","svelte-1qmezxs"),h(u,"class","progress-section svelte-1qmezxs"),h(k,"class","fa fa-list svelte-1qmezxs"),h(g,"class","btn btn-default svelte-1qmezxs"),g.disabled=T=!t[3],h(p,"class","buttons"),h(v,"class","logs-section"),h(o,"class","form-group"),h(a,"class","panel-body"),h(e,"id","login"),h(e,"class","panel panel-default panel-updating")},m(F,z){G(F,e,z),y(e,n),y(n,l),V&&V.m(l,null),y(e,i),y(e,a),y(a,o),y(o,s),y(o,r),y(o,u),Ne(c,u,null),y(u,f),y(u,m),y(m,b),y(o,d),y(o,v),y(v,p),y(p,g),y(g,k),y(g,w),y(g,L),y(p,S),U&&U.m(p,null),y(v,M),Z&&Z.m(v,null),C=!0,le||(ue=te(g,"click",t[7]),le=!0)},p(F,[z]){F[1]?V?V.p(F,z):(V=jn(F),V.c(),V.m(l,null)):V&&(V.d(1),V=null),(!C||z&32)&&Oe(b,F[5]),(!C||z&16)&&_!==(_=F[4]?"Hide":"Show")&&Oe(w,_),(!C||z&8&&T!==(T=!F[3]))&&(g.disabled=T),F[2]?U?U.p(F,z):(U=Wn(F),U.c(),U.m(p,null)):U&&(U.d(1),U=null),F[4]&&F[3]?Z?Z.p(F,z):(Z=Gn(F),Z.c(),Z.m(v,null)):Z&&(Z.d(1),Z=null)},i(F){C||(Ee(c.$$.fragment,F),C=!0)},o(F){Fe(c.$$.fragment,F),C=!1},d(F){F&&W(e),V&&V.d(),Me(c),U&&U.d(),Z&&Z.d(),le=!1,ue()}}}function ri(t){return t.replace(/^\d{2,4}.\d{2}.\d{2,4} \d{2}:\d{2}:\d{2}/g,"").replace(/^[\-\|\s]+/,"")}function si(t,e,n){let{applicationName:l="AtroCore"}=e,{logoPath:i=null}=e,{logFilePath:a}=e,{restoreLink:o=null}=e,s=!1,r=!1,u=0,c=!0,f="",m,b;jl(()=>{b&&c&&b.scrollTo(0,b.scrollHeight)});function d(){n(4,s=!s),s||(c=!0)}function v(g){const k=g.currentTarget;c=k.scrollHeight-k.scrollTop===k.clientHeight}setInterval(async()=>{try{const g=await fetch(a,{cache:"no-store"});u+=1,g.ok?(n(3,f=(await g.text()).trim()),f.search("composer")>=0&&n(10,r=!0),u>65&&!r&&n(3,f="Something wrong. Please, reboot the server.")):r?setTimeout(()=>{location.reload()},2e3):u>65&&n(3,f="Something wrong. Please, reboot the server.")}catch(g){console.error("Error: ",g)}},1e3);function p(g){Pe[g?"unshift":"push"](()=>{b=g,n(6,b)})}return t.$$set=g=>{"applicationName"in g&&n(0,l=g.applicationName),"logoPath"in g&&n(1,i=g.logoPath),"logFilePath"in g&&n(9,a=g.logFilePath),"restoreLink"in g&&n(2,o=g.restoreLink)},t.$$.update=()=>{if(t.$$.dirty&1032)if(f){const g=f.trim().split(`
`);n(5,m=ri(g.pop()))}else r?n(5,m=""):n(5,m="Starting...")},[l,i,o,f,s,m,b,d,v,a,r,p]}class ui extends Se{constructor(e){super(),De(this,e,si,oi,ve,{applicationName:0,logoPath:1,logFilePath:9,restoreLink:2})}}function Un(t,e,n){const l=t.slice();return l[17]=e[n],l}function Qn(t){let e,n=t[17].label+"",l,i,a,o,s,r,u;function c(){return t[10](t[17])}return{c(){e=D("button"),l=ce(n),i=q(),h(e,"data-action",a=t[17].name),e.disabled=o=t[17].disabled,h(e,"type","button"),h(e,"class",s=`btn action btn-${t[17].style??"default"}`)},m(f,m){G(f,e,m),y(e,l),y(e,i),r||(u=te(e,"click",c),r=!0)},p(f,m){t=f,m&1&&n!==(n=t[17].label+"")&&Oe(l,n),m&1&&a!==(a=t[17].name)&&h(e,"data-action",a),m&1&&o!==(o=t[17].disabled)&&(e.disabled=o),m&1&&s!==(s=`btn action btn-${t[17].style??"default"}`)&&h(e,"class",s)},d(f){f&&W(e),r=!1,u()}}}function fi(t){let e,n,l,i=de(t[0]),a=[];for(let r=0;r<i.length;r+=1)a[r]=Qn(Un(t,i,r));const o=t[9].default,s=Rl(o,t,t[8],null);return{c(){e=D("div");for(let r=0;r<a.length;r+=1)a[r].c();n=q(),s&&s.c(),h(e,"class","button-container")},m(r,u){G(r,e,u);for(let c=0;c<a.length;c+=1)a[c]&&a[c].m(e,null);G(r,n,u),s&&s.m(r,u),l=!0},p(r,[u]){if(u&3){i=de(r[0]);let c;for(c=0;c<i.length;c+=1){const f=Un(r,i,c);a[c]?a[c].p(f,u):(a[c]=Qn(f),a[c].c(),a[c].m(e,null))}for(;c<a.length;c+=1)a[c].d(1);a.length=i.length}s&&s.p&&(!l||u&256)&&Bl(s,o,r,r[8],l?Hl(o,r[8],u,null):Yl(r[8]),null)},i(r){l||(Ee(s,r),l=!0)},o(r){Fe(s,r),l=!1},d(r){r&&(W(e),W(n)),dt(a,r),s&&s.d(r)}}}function ci(t,e,n){let{$$slots:l={},$$scope:i}=e,{params:a}=e,{fetch:o}=e,{loadLayout:s=()=>{He.get(scope,type,layoutProfileId,w=>{layout=w},!1)}}=e,{validate:r=()=>!0}=e;function u(w){c("openEditDialog",w)}const c=Ln();let f=[{name:"save",label:"Save",style:"primary"},{name:"cancel",label:"Cancel"},{name:"resetToDefault",label:"Reset to Default"}];Kt(()=>{Re.notify("Loading..."),s(()=>{Re.notify(!1),a.afterRender&&a.afterRender()})});function m(){p();const w=o();if(!r(w)){g();return}Re.notify("Saving..."),He.set(a.scope,a.type,a.layoutProfileId,w,()=>{Re.notify("Saved","success",2e3),b(),g()})}function b(){console.log("emit update");const w=new CustomEvent("layoutUpdated",{detail:{scope:a.scope,type:a.type,layoutProfileId:a.layoutProfileId}});window.dispatchEvent(w)}function d(){s()}function v(){Re.confirm("Are you sure you want to reset to default?",()=>{He.resetToDefault(a.scope,a.type,a.layoutProfileId,()=>{b(),d()})})}function p(){n(0,f=f.map(w=>({...w,disabled:!0})))}function g(){n(0,f=f.map(w=>({...w,disabled:!1})))}function k(w){switch(w.name){case"save":m();break;case"cancel":d();break;case"resetToDefault":v();break}}const _=w=>k(w);return t.$$set=w=>{"params"in w&&n(2,a=w.params),"fetch"in w&&n(3,o=w.fetch),"loadLayout"in w&&n(4,s=w.loadLayout),"validate"in w&&n(5,r=w.validate),"$$scope"in w&&n(8,i=w.$$scope)},[f,k,a,o,s,r,u,m,i,l,_]}class Vn extends Se{constructor(e){super(),De(this,e,ci,fi,ve,{params:2,fetch:3,loadLayout:4,validate:5,openEditDialog:6,save:7})}get openEditDialog(){return this.$$.ctx[6]}get save(){return this.$$.ctx[7]}}/**!
 * Sortable 1.15.2
 * @author	RubaXa   <trash@rubaxa.org>
 * @author	owenm    <owen23355@gmail.com>
 * @license MIT
 */function Kn(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(t);e&&(l=l.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,l)}return n}function Le(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Kn(Object(n),!0).forEach(function(l){di(t,l,n[l])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Kn(Object(n)).forEach(function(l){Object.defineProperty(t,l,Object.getOwnPropertyDescriptor(n,l))})}return t}function Ot(t){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Ot=function(e){return typeof e}:Ot=function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ot(t)}function di(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Be(){return Be=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var l in n)Object.prototype.hasOwnProperty.call(n,l)&&(t[l]=n[l])}return t},Be.apply(this,arguments)}function hi(t,e){if(t==null)return{};var n={},l=Object.keys(t),i,a;for(a=0;a<l.length;a++)i=l[a],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}function mi(t,e){if(t==null)return{};var n=hi(t,e),l,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)l=a[i],!(e.indexOf(l)>=0)&&Object.prototype.propertyIsEnumerable.call(t,l)&&(n[l]=t[l])}return n}var pi="1.15.2";function Ye(t){if(typeof window<"u"&&window.navigator)return!!navigator.userAgent.match(t)}var qe=Ye(/(?:Trident.*rv[ :]?11\.|msie|iemobile|Windows Phone)/i),pt=Ye(/Edge/i),Zn=Ye(/firefox/i),gt=Ye(/safari/i)&&!Ye(/chrome/i)&&!Ye(/android/i),Jn=Ye(/iP(ad|od|hone)/i),xn=Ye(/chrome/i)&&Ye(/android/i),$n={capture:!1,passive:!1};function j(t,e,n){t.addEventListener(e,n,!qe&&$n)}function X(t,e,n){t.removeEventListener(e,n,!qe&&$n)}function Ft(t,e){if(e){if(e[0]===">"&&(e=e.substring(1)),t)try{if(t.matches)return t.matches(e);if(t.msMatchesSelector)return t.msMatchesSelector(e);if(t.webkitMatchesSelector)return t.webkitMatchesSelector(e)}catch{return!1}return!1}}function gi(t){return t.host&&t!==document&&t.host.nodeType?t.host:t.parentNode}function ke(t,e,n,l){if(t){n=n||document;do{if(e!=null&&(e[0]===">"?t.parentNode===n&&Ft(t,e):Ft(t,e))||l&&t===n)return t;if(t===n)break}while(t=gi(t))}return null}var el=/\s+/g;function ge(t,e,n){if(t&&e)if(t.classList)t.classList[n?"add":"remove"](e);else{var l=(" "+t.className+" ").replace(el," ").replace(" "+e+" "," ");t.className=(l+(n?" "+e:"")).replace(el," ")}}function O(t,e,n){var l=t&&t.style;if(l){if(n===void 0)return document.defaultView&&document.defaultView.getComputedStyle?n=document.defaultView.getComputedStyle(t,""):t.currentStyle&&(n=t.currentStyle),e===void 0?n:n[e];!(e in l)&&e.indexOf("webkit")===-1&&(e="-webkit-"+e),l[e]=n+(typeof n=="string"?"":"px")}}function ot(t,e){var n="";if(typeof t=="string")n=t;else do{var l=O(t,"transform");l&&l!=="none"&&(n=l+" "+n)}while(!e&&(t=t.parentNode));var i=window.DOMMatrix||window.WebKitCSSMatrix||window.CSSMatrix||window.MSCSSMatrix;return i&&new i(n)}function tl(t,e,n){if(t){var l=t.getElementsByTagName(e),i=0,a=l.length;if(n)for(;i<a;i++)n(l[i],i);return l}return[]}function Ce(){var t=document.scrollingElement;return t||document.documentElement}function ie(t,e,n,l,i){if(!(!t.getBoundingClientRect&&t!==window)){var a,o,s,r,u,c,f;if(t!==window&&t.parentNode&&t!==Ce()?(a=t.getBoundingClientRect(),o=a.top,s=a.left,r=a.bottom,u=a.right,c=a.height,f=a.width):(o=0,s=0,r=window.innerHeight,u=window.innerWidth,c=window.innerHeight,f=window.innerWidth),(e||n)&&t!==window&&(i=i||t.parentNode,!qe))do if(i&&i.getBoundingClientRect&&(O(i,"transform")!=="none"||n&&O(i,"position")!=="static")){var m=i.getBoundingClientRect();o-=m.top+parseInt(O(i,"border-top-width")),s-=m.left+parseInt(O(i,"border-left-width")),r=o+a.height,u=s+a.width;break}while(i=i.parentNode);if(l&&t!==window){var b=ot(i||t),d=b&&b.a,v=b&&b.d;b&&(o/=v,s/=d,f/=d,c/=v,r=o+c,u=s+f)}return{top:o,left:s,bottom:r,right:u,width:f,height:c}}}function nl(t,e,n){for(var l=Qe(t,!0),i=ie(t)[e];l;){var a=ie(l)[n],o=void 0;if(o=i>=a,!o)return l;if(l===Ce())break;l=Qe(l,!1)}return!1}function rt(t,e,n,l){for(var i=0,a=0,o=t.children;a<o.length;){if(o[a].style.display!=="none"&&o[a]!==I.ghost&&(l||o[a]!==I.dragged)&&ke(o[a],n.draggable,t,!1)){if(i===e)return o[a];i++}a++}return null}function tn(t,e){for(var n=t.lastElementChild;n&&(n===I.ghost||O(n,"display")==="none"||e&&!Ft(n,e));)n=n.previousElementSibling;return n||null}function ye(t,e){var n=0;if(!t||!t.parentNode)return-1;for(;t=t.previousElementSibling;)t.nodeName.toUpperCase()!=="TEMPLATE"&&t!==I.clone&&(!e||Ft(t,e))&&n++;return n}function ll(t){var e=0,n=0,l=Ce();if(t)do{var i=ot(t),a=i.a,o=i.d;e+=t.scrollLeft*a,n+=t.scrollTop*o}while(t!==l&&(t=t.parentNode));return[e,n]}function bi(t,e){for(var n in t)if(t.hasOwnProperty(n)){for(var l in e)if(e.hasOwnProperty(l)&&e[l]===t[n][l])return Number(n)}return-1}function Qe(t,e){if(!t||!t.getBoundingClientRect)return Ce();var n=t,l=!1;do if(n.clientWidth<n.scrollWidth||n.clientHeight<n.scrollHeight){var i=O(n);if(n.clientWidth<n.scrollWidth&&(i.overflowX=="auto"||i.overflowX=="scroll")||n.clientHeight<n.scrollHeight&&(i.overflowY=="auto"||i.overflowY=="scroll")){if(!n.getBoundingClientRect||n===document.body)return Ce();if(l||e)return n;l=!0}}while(n=n.parentNode);return Ce()}function _i(t,e){if(t&&e)for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t}function nn(t,e){return Math.round(t.top)===Math.round(e.top)&&Math.round(t.left)===Math.round(e.left)&&Math.round(t.height)===Math.round(e.height)&&Math.round(t.width)===Math.round(e.width)}var bt;function il(t,e){return function(){if(!bt){var n=arguments,l=this;n.length===1?t.call(l,n[0]):t.apply(l,n),bt=setTimeout(function(){bt=void 0},e)}}}function vi(){clearTimeout(bt),bt=void 0}function al(t,e,n){t.scrollLeft+=e,t.scrollTop+=n}function ol(t){var e=window.Polymer,n=window.jQuery||window.Zepto;return e&&e.dom?e.dom(t).cloneNode(!0):n?n(t).clone(!0)[0]:t.cloneNode(!0)}function rl(t,e,n){var l={};return Array.from(t.children).forEach(function(i){var a,o,s,r;if(!(!ke(i,e.draggable,t,!1)||i.animated||i===n)){var u=ie(i);l.left=Math.min((a=l.left)!==null&&a!==void 0?a:1/0,u.left),l.top=Math.min((o=l.top)!==null&&o!==void 0?o:1/0,u.top),l.right=Math.max((s=l.right)!==null&&s!==void 0?s:-1/0,u.right),l.bottom=Math.max((r=l.bottom)!==null&&r!==void 0?r:-1/0,u.bottom)}}),l.width=l.right-l.left,l.height=l.bottom-l.top,l.x=l.left,l.y=l.top,l}var be="Sortable"+new Date().getTime();function yi(){var t=[],e;return{captureAnimationState:function(){if(t=[],!!this.options.animation){var l=[].slice.call(this.el.children);l.forEach(function(i){if(!(O(i,"display")==="none"||i===I.ghost)){t.push({target:i,rect:ie(i)});var a=Le({},t[t.length-1].rect);if(i.thisAnimationDuration){var o=ot(i,!0);o&&(a.top-=o.f,a.left-=o.e)}i.fromRect=a}})}},addAnimationState:function(l){t.push(l)},removeAnimationState:function(l){t.splice(bi(t,{target:l}),1)},animateAll:function(l){var i=this;if(!this.options.animation){clearTimeout(e),typeof l=="function"&&l();return}var a=!1,o=0;t.forEach(function(s){var r=0,u=s.target,c=u.fromRect,f=ie(u),m=u.prevFromRect,b=u.prevToRect,d=s.rect,v=ot(u,!0);v&&(f.top-=v.f,f.left-=v.e),u.toRect=f,u.thisAnimationDuration&&nn(m,f)&&!nn(c,f)&&(d.top-f.top)/(d.left-f.left)===(c.top-f.top)/(c.left-f.left)&&(r=Ei(d,m,b,i.options)),nn(f,c)||(u.prevFromRect=c,u.prevToRect=f,r||(r=i.options.animation),i.animate(u,d,f,r)),r&&(a=!0,o=Math.max(o,r),clearTimeout(u.animationResetTimer),u.animationResetTimer=setTimeout(function(){u.animationTime=0,u.prevFromRect=null,u.fromRect=null,u.prevToRect=null,u.thisAnimationDuration=null},r),u.thisAnimationDuration=r)}),clearTimeout(e),a?e=setTimeout(function(){typeof l=="function"&&l()},o):typeof l=="function"&&l(),t=[]},animate:function(l,i,a,o){if(o){O(l,"transition",""),O(l,"transform","");var s=ot(this.el),r=s&&s.a,u=s&&s.d,c=(i.left-a.left)/(r||1),f=(i.top-a.top)/(u||1);l.animatingX=!!c,l.animatingY=!!f,O(l,"transform","translate3d("+c+"px,"+f+"px,0)"),this.forRepaintDummy=wi(l),O(l,"transition","transform "+o+"ms"+(this.options.easing?" "+this.options.easing:"")),O(l,"transform","translate3d(0,0,0)"),typeof l.animated=="number"&&clearTimeout(l.animated),l.animated=setTimeout(function(){O(l,"transition",""),O(l,"transform",""),l.animated=!1,l.animatingX=!1,l.animatingY=!1},o)}}}}function wi(t){return t.offsetWidth}function Ei(t,e,n,l){return Math.sqrt(Math.pow(e.top-t.top,2)+Math.pow(e.left-t.left,2))/Math.sqrt(Math.pow(e.top-n.top,2)+Math.pow(e.left-n.left,2))*l.animation}var st=[],ln={initializeByDefault:!0},_t={mount:function(e){for(var n in ln)ln.hasOwnProperty(n)&&!(n in e)&&(e[n]=ln[n]);st.forEach(function(l){if(l.pluginName===e.pluginName)throw"Sortable: Cannot mount plugin ".concat(e.pluginName," more than once")}),st.push(e)},pluginEvent:function(e,n,l){var i=this;this.eventCanceled=!1,l.cancel=function(){i.eventCanceled=!0};var a=e+"Global";st.forEach(function(o){n[o.pluginName]&&(n[o.pluginName][a]&&n[o.pluginName][a](Le({sortable:n},l)),n.options[o.pluginName]&&n[o.pluginName][e]&&n[o.pluginName][e](Le({sortable:n},l)))})},initializePlugins:function(e,n,l,i){st.forEach(function(s){var r=s.pluginName;if(!(!e.options[r]&&!s.initializeByDefault)){var u=new s(e,n,e.options);u.sortable=e,u.options=e.options,e[r]=u,Be(l,u.defaults)}});for(var a in e.options)if(e.options.hasOwnProperty(a)){var o=this.modifyOption(e,a,e.options[a]);typeof o<"u"&&(e.options[a]=o)}},getEventProperties:function(e,n){var l={};return st.forEach(function(i){typeof i.eventProperties=="function"&&Be(l,i.eventProperties.call(n[i.pluginName],e))}),l},modifyOption:function(e,n,l){var i;return st.forEach(function(a){e[a.pluginName]&&a.optionListeners&&typeof a.optionListeners[n]=="function"&&(i=a.optionListeners[n].call(e[a.pluginName],l))}),i}};function Di(t){var e=t.sortable,n=t.rootEl,l=t.name,i=t.targetEl,a=t.cloneEl,o=t.toEl,s=t.fromEl,r=t.oldIndex,u=t.newIndex,c=t.oldDraggableIndex,f=t.newDraggableIndex,m=t.originalEvent,b=t.putSortable,d=t.extraEventProperties;if(e=e||n&&n[be],!!e){var v,p=e.options,g="on"+l.charAt(0).toUpperCase()+l.substr(1);window.CustomEvent&&!qe&&!pt?v=new CustomEvent(l,{bubbles:!0,cancelable:!0}):(v=document.createEvent("Event"),v.initEvent(l,!0,!0)),v.to=o||n,v.from=s||n,v.item=i||n,v.clone=a,v.oldIndex=r,v.newIndex=u,v.oldDraggableIndex=c,v.newDraggableIndex=f,v.originalEvent=m,v.pullMode=b?b.lastPutMode:void 0;var k=Le(Le({},d),_t.getEventProperties(l,e));for(var _ in k)v[_]=k[_];n&&n.dispatchEvent(v),p[g]&&p[g].call(e,v)}}var Si=["evt"],he=function(e,n){var l=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},i=l.evt,a=mi(l,Si);_t.pluginEvent.bind(I)(e,n,Le({dragEl:E,parentEl:ne,ghostEl:N,rootEl:J,nextEl:Je,lastDownEl:Nt,cloneEl:x,cloneHidden:Ve,dragStarted:yt,putSortable:oe,activeSortable:I.active,originalEvent:i,oldIndex:ut,oldDraggableIndex:vt,newIndex:_e,newDraggableIndex:Ke,hideGhostForTarget:ml,unhideGhostForTarget:pl,cloneNowHidden:function(){Ve=!0},cloneNowShown:function(){Ve=!1},dispatchSortableEvent:function(s){se({sortable:n,name:s,originalEvent:i})}},a))};function se(t){Di(Le({putSortable:oe,cloneEl:x,targetEl:E,rootEl:J,oldIndex:ut,oldDraggableIndex:vt,newIndex:_e,newDraggableIndex:Ke},t))}var E,ne,N,J,Je,Nt,x,Ve,ut,_e,vt,Ke,Mt,oe,ft=!1,Rt=!1,Ht=[],xe,Te,an,on,sl,ul,yt,ct,wt,Et=!1,Bt=!1,Yt,re,rn=[],sn=!1,qt=[],zt=typeof document<"u",Xt=Jn,fl=pt||qe?"cssFloat":"float",ki=zt&&!xn&&!Jn&&"draggable"in document.createElement("div"),cl=function(){if(zt){if(qe)return!1;var t=document.createElement("x");return t.style.cssText="pointer-events:auto",t.style.pointerEvents==="auto"}}(),dl=function(e,n){var l=O(e),i=parseInt(l.width)-parseInt(l.paddingLeft)-parseInt(l.paddingRight)-parseInt(l.borderLeftWidth)-parseInt(l.borderRightWidth),a=rt(e,0,n),o=rt(e,1,n),s=a&&O(a),r=o&&O(o),u=s&&parseInt(s.marginLeft)+parseInt(s.marginRight)+ie(a).width,c=r&&parseInt(r.marginLeft)+parseInt(r.marginRight)+ie(o).width;if(l.display==="flex")return l.flexDirection==="column"||l.flexDirection==="column-reverse"?"vertical":"horizontal";if(l.display==="grid")return l.gridTemplateColumns.split(" ").length<=1?"vertical":"horizontal";if(a&&s.float&&s.float!=="none"){var f=s.float==="left"?"left":"right";return o&&(r.clear==="both"||r.clear===f)?"vertical":"horizontal"}return a&&(s.display==="block"||s.display==="flex"||s.display==="table"||s.display==="grid"||u>=i&&l[fl]==="none"||o&&l[fl]==="none"&&u+c>i)?"vertical":"horizontal"},Ti=function(e,n,l){var i=l?e.left:e.top,a=l?e.right:e.bottom,o=l?e.width:e.height,s=l?n.left:n.top,r=l?n.right:n.bottom,u=l?n.width:n.height;return i===s||a===r||i+o/2===s+u/2},Pi=function(e,n){var l;return Ht.some(function(i){var a=i[be].options.emptyInsertThreshold;if(!(!a||tn(i))){var o=ie(i),s=e>=o.left-a&&e<=o.right+a,r=n>=o.top-a&&n<=o.bottom+a;if(s&&r)return l=i}}),l},hl=function(e){function n(a,o){return function(s,r,u,c){var f=s.options.group.name&&r.options.group.name&&s.options.group.name===r.options.group.name;if(a==null&&(o||f))return!0;if(a==null||a===!1)return!1;if(o&&a==="clone")return a;if(typeof a=="function")return n(a(s,r,u,c),o)(s,r,u,c);var m=(o?s:r).options.group.name;return a===!0||typeof a=="string"&&a===m||a.join&&a.indexOf(m)>-1}}var l={},i=e.group;(!i||Ot(i)!="object")&&(i={name:i}),l.name=i.name,l.checkPull=n(i.pull,!0),l.checkPut=n(i.put),l.revertClone=i.revertClone,e.group=l},ml=function(){!cl&&N&&O(N,"display","none")},pl=function(){!cl&&N&&O(N,"display","")};zt&&!xn&&document.addEventListener("click",function(t){if(Rt)return t.preventDefault(),t.stopPropagation&&t.stopPropagation(),t.stopImmediatePropagation&&t.stopImmediatePropagation(),Rt=!1,!1},!0);var $e=function(e){if(E){e=e.touches?e.touches[0]:e;var n=Pi(e.clientX,e.clientY);if(n){var l={};for(var i in e)e.hasOwnProperty(i)&&(l[i]=e[i]);l.target=l.rootEl=n,l.preventDefault=void 0,l.stopPropagation=void 0,n[be]._onDragOver(l)}}},Li=function(e){E&&E.parentNode[be]._isOutsideThisEl(e.target)};function I(t,e){if(!(t&&t.nodeType&&t.nodeType===1))throw"Sortable: `el` must be an HTMLElement, not ".concat({}.toString.call(t));this.el=t,this.options=e=Be({},e),t[be]=this;var n={group:null,sort:!0,disabled:!1,store:null,handle:null,draggable:/^[uo]l$/i.test(t.nodeName)?">li":">*",swapThreshold:1,invertSwap:!1,invertedSwapThreshold:null,removeCloneOnHide:!0,direction:function(){return dl(t,this.options)},ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",dragClass:"sortable-drag",ignore:"a, img",filter:null,preventOnFilter:!0,animation:0,easing:null,setData:function(o,s){o.setData("Text",s.textContent)},dropBubble:!1,dragoverBubble:!1,dataIdAttr:"data-id",delay:0,delayOnTouchOnly:!1,touchStartThreshold:(Number.parseInt?Number:window).parseInt(window.devicePixelRatio,10)||1,forceFallback:!1,fallbackClass:"sortable-fallback",fallbackOnBody:!1,fallbackTolerance:0,fallbackOffset:{x:0,y:0},supportPointer:I.supportPointer!==!1&&"PointerEvent"in window&&!gt,emptyInsertThreshold:5};_t.initializePlugins(this,t,n);for(var l in n)!(l in e)&&(e[l]=n[l]);hl(e);for(var i in this)i.charAt(0)==="_"&&typeof this[i]=="function"&&(this[i]=this[i].bind(this));this.nativeDraggable=e.forceFallback?!1:ki,this.nativeDraggable&&(this.options.touchStartThreshold=1),e.supportPointer?j(t,"pointerdown",this._onTapStart):(j(t,"mousedown",this._onTapStart),j(t,"touchstart",this._onTapStart)),this.nativeDraggable&&(j(t,"dragover",this),j(t,"dragenter",this)),Ht.push(this.el),e.store&&e.store.get&&this.sort(e.store.get(this)||[]),Be(this,yi())}I.prototype={constructor:I,_isOutsideThisEl:function(e){!this.el.contains(e)&&e!==this.el&&(ct=null)},_getDirection:function(e,n){return typeof this.options.direction=="function"?this.options.direction.call(this,e,n,E):this.options.direction},_onTapStart:function(e){if(e.cancelable){var n=this,l=this.el,i=this.options,a=i.preventOnFilter,o=e.type,s=e.touches&&e.touches[0]||e.pointerType&&e.pointerType==="touch"&&e,r=(s||e).target,u=e.target.shadowRoot&&(e.path&&e.path[0]||e.composedPath&&e.composedPath()[0])||r,c=i.filter;if(Ri(l),!E&&!(/mousedown|pointerdown/.test(o)&&e.button!==0||i.disabled)&&!u.isContentEditable&&!(!this.nativeDraggable&&gt&&r&&r.tagName.toUpperCase()==="SELECT")&&(r=ke(r,i.draggable,l,!1),!(r&&r.animated)&&Nt!==r)){if(ut=ye(r),vt=ye(r,i.draggable),typeof c=="function"){if(c.call(this,e,r,this)){se({sortable:n,rootEl:u,name:"filter",targetEl:r,toEl:l,fromEl:l}),he("filter",n,{evt:e}),a&&e.cancelable&&e.preventDefault();return}}else if(c&&(c=c.split(",").some(function(f){if(f=ke(u,f.trim(),l,!1),f)return se({sortable:n,rootEl:f,name:"filter",targetEl:r,fromEl:l,toEl:l}),he("filter",n,{evt:e}),!0}),c)){a&&e.cancelable&&e.preventDefault();return}i.handle&&!ke(u,i.handle,l,!1)||this._prepareDragStart(e,s,r)}}},_prepareDragStart:function(e,n,l){var i=this,a=i.el,o=i.options,s=a.ownerDocument,r;if(l&&!E&&l.parentNode===a){var u=ie(l);if(J=a,E=l,ne=E.parentNode,Je=E.nextSibling,Nt=l,Mt=o.group,I.dragged=E,xe={target:E,clientX:(n||e).clientX,clientY:(n||e).clientY},sl=xe.clientX-u.left,ul=xe.clientY-u.top,this._lastX=(n||e).clientX,this._lastY=(n||e).clientY,E.style["will-change"]="all",r=function(){if(he("delayEnded",i,{evt:e}),I.eventCanceled){i._onDrop();return}i._disableDelayedDragEvents(),!Zn&&i.nativeDraggable&&(E.draggable=!0),i._triggerDragStart(e,n),se({sortable:i,name:"choose",originalEvent:e}),ge(E,o.chosenClass,!0)},o.ignore.split(",").forEach(function(c){tl(E,c.trim(),un)}),j(s,"dragover",$e),j(s,"mousemove",$e),j(s,"touchmove",$e),j(s,"mouseup",i._onDrop),j(s,"touchend",i._onDrop),j(s,"touchcancel",i._onDrop),Zn&&this.nativeDraggable&&(this.options.touchStartThreshold=4,E.draggable=!0),he("delayStart",this,{evt:e}),o.delay&&(!o.delayOnTouchOnly||n)&&(!this.nativeDraggable||!(pt||qe))){if(I.eventCanceled){this._onDrop();return}j(s,"mouseup",i._disableDelayedDrag),j(s,"touchend",i._disableDelayedDrag),j(s,"touchcancel",i._disableDelayedDrag),j(s,"mousemove",i._delayedDragTouchMoveHandler),j(s,"touchmove",i._delayedDragTouchMoveHandler),o.supportPointer&&j(s,"pointermove",i._delayedDragTouchMoveHandler),i._dragStartTimer=setTimeout(r,o.delay)}else r()}},_delayedDragTouchMoveHandler:function(e){var n=e.touches?e.touches[0]:e;Math.max(Math.abs(n.clientX-this._lastX),Math.abs(n.clientY-this._lastY))>=Math.floor(this.options.touchStartThreshold/(this.nativeDraggable&&window.devicePixelRatio||1))&&this._disableDelayedDrag()},_disableDelayedDrag:function(){E&&un(E),clearTimeout(this._dragStartTimer),this._disableDelayedDragEvents()},_disableDelayedDragEvents:function(){var e=this.el.ownerDocument;X(e,"mouseup",this._disableDelayedDrag),X(e,"touchend",this._disableDelayedDrag),X(e,"touchcancel",this._disableDelayedDrag),X(e,"mousemove",this._delayedDragTouchMoveHandler),X(e,"touchmove",this._delayedDragTouchMoveHandler),X(e,"pointermove",this._delayedDragTouchMoveHandler)},_triggerDragStart:function(e,n){n=n||e.pointerType=="touch"&&e,!this.nativeDraggable||n?this.options.supportPointer?j(document,"pointermove",this._onTouchMove):n?j(document,"touchmove",this._onTouchMove):j(document,"mousemove",this._onTouchMove):(j(E,"dragend",this),j(J,"dragstart",this._onDragStart));try{document.selection?Wt(function(){document.selection.empty()}):window.getSelection().removeAllRanges()}catch{}},_dragStarted:function(e,n){if(ft=!1,J&&E){he("dragStarted",this,{evt:n}),this.nativeDraggable&&j(document,"dragover",Li);var l=this.options;!e&&ge(E,l.dragClass,!1),ge(E,l.ghostClass,!0),I.active=this,e&&this._appendGhost(),se({sortable:this,name:"start",originalEvent:n})}else this._nulling()},_emulateDragOver:function(){if(Te){this._lastX=Te.clientX,this._lastY=Te.clientY,ml();for(var e=document.elementFromPoint(Te.clientX,Te.clientY),n=e;e&&e.shadowRoot&&(e=e.shadowRoot.elementFromPoint(Te.clientX,Te.clientY),e!==n);)n=e;if(E.parentNode[be]._isOutsideThisEl(e),n)do{if(n[be]){var l=void 0;if(l=n[be]._onDragOver({clientX:Te.clientX,clientY:Te.clientY,target:e,rootEl:n}),l&&!this.options.dragoverBubble)break}e=n}while(n=n.parentNode);pl()}},_onTouchMove:function(e){if(xe){var n=this.options,l=n.fallbackTolerance,i=n.fallbackOffset,a=e.touches?e.touches[0]:e,o=N&&ot(N,!0),s=N&&o&&o.a,r=N&&o&&o.d,u=Xt&&re&&ll(re),c=(a.clientX-xe.clientX+i.x)/(s||1)+(u?u[0]-rn[0]:0)/(s||1),f=(a.clientY-xe.clientY+i.y)/(r||1)+(u?u[1]-rn[1]:0)/(r||1);if(!I.active&&!ft){if(l&&Math.max(Math.abs(a.clientX-this._lastX),Math.abs(a.clientY-this._lastY))<l)return;this._onDragStart(e,!0)}if(N){o?(o.e+=c-(an||0),o.f+=f-(on||0)):o={a:1,b:0,c:0,d:1,e:c,f};var m="matrix(".concat(o.a,",").concat(o.b,",").concat(o.c,",").concat(o.d,",").concat(o.e,",").concat(o.f,")");O(N,"webkitTransform",m),O(N,"mozTransform",m),O(N,"msTransform",m),O(N,"transform",m),an=c,on=f,Te=a}e.cancelable&&e.preventDefault()}},_appendGhost:function(){if(!N){var e=this.options.fallbackOnBody?document.body:J,n=ie(E,!0,Xt,!0,e),l=this.options;if(Xt){for(re=e;O(re,"position")==="static"&&O(re,"transform")==="none"&&re!==document;)re=re.parentNode;re!==document.body&&re!==document.documentElement?(re===document&&(re=Ce()),n.top+=re.scrollTop,n.left+=re.scrollLeft):re=Ce(),rn=ll(re)}N=E.cloneNode(!0),ge(N,l.ghostClass,!1),ge(N,l.fallbackClass,!0),ge(N,l.dragClass,!0),O(N,"transition",""),O(N,"transform",""),O(N,"box-sizing","border-box"),O(N,"margin",0),O(N,"top",n.top),O(N,"left",n.left),O(N,"width",n.width),O(N,"height",n.height),O(N,"opacity","0.8"),O(N,"position",Xt?"absolute":"fixed"),O(N,"zIndex","100000"),O(N,"pointerEvents","none"),I.ghost=N,e.appendChild(N),O(N,"transform-origin",sl/parseInt(N.style.width)*100+"% "+ul/parseInt(N.style.height)*100+"%")}},_onDragStart:function(e,n){var l=this,i=e.dataTransfer,a=l.options;if(he("dragStart",this,{evt:e}),I.eventCanceled){this._onDrop();return}he("setupClone",this),I.eventCanceled||(x=ol(E),x.removeAttribute("id"),x.draggable=!1,x.style["will-change"]="",this._hideClone(),ge(x,this.options.chosenClass,!1),I.clone=x),l.cloneId=Wt(function(){he("clone",l),!I.eventCanceled&&(l.options.removeCloneOnHide||J.insertBefore(x,E),l._hideClone(),se({sortable:l,name:"clone"}))}),!n&&ge(E,a.dragClass,!0),n?(Rt=!0,l._loopId=setInterval(l._emulateDragOver,50)):(X(document,"mouseup",l._onDrop),X(document,"touchend",l._onDrop),X(document,"touchcancel",l._onDrop),i&&(i.effectAllowed="move",a.setData&&a.setData.call(l,i,E)),j(document,"drop",l),O(E,"transform","translateZ(0)")),ft=!0,l._dragStartId=Wt(l._dragStarted.bind(l,n,e)),j(document,"selectstart",l),yt=!0,gt&&O(document.body,"user-select","none")},_onDragOver:function(e){var n=this.el,l=e.target,i,a,o,s=this.options,r=s.group,u=I.active,c=Mt===r,f=s.sort,m=oe||u,b,d=this,v=!1;if(sn)return;function p(et,vn){he(et,d,Le({evt:e,isOwner:c,axis:b?"vertical":"horizontal",revert:o,dragRect:i,targetRect:a,canSort:f,fromSortable:m,target:l,completed:k,onMove:function(P,A){return jt(J,n,E,i,P,ie(P),e,A)},changed:_},vn))}function g(){p("dragOverAnimationCapture"),d.captureAnimationState(),d!==m&&m.captureAnimationState()}function k(et){return p("dragOverCompleted",{insertion:et}),et&&(c?u._hideClone():u._showClone(d),d!==m&&(ge(E,oe?oe.options.ghostClass:u.options.ghostClass,!1),ge(E,s.ghostClass,!0)),oe!==d&&d!==I.active?oe=d:d===I.active&&oe&&(oe=null),m===d&&(d._ignoreWhileAnimating=l),d.animateAll(function(){p("dragOverAnimationComplete"),d._ignoreWhileAnimating=null}),d!==m&&(m.animateAll(),m._ignoreWhileAnimating=null)),(l===E&&!E.animated||l===n&&!l.animated)&&(ct=null),!s.dragoverBubble&&!e.rootEl&&l!==document&&(E.parentNode[be]._isOutsideThisEl(e.target),!et&&$e(e)),!s.dragoverBubble&&e.stopPropagation&&e.stopPropagation(),v=!0}function _(){_e=ye(E),Ke=ye(E,s.draggable),se({sortable:d,name:"change",toEl:n,newIndex:_e,newDraggableIndex:Ke,originalEvent:e})}if(e.preventDefault!==void 0&&e.cancelable&&e.preventDefault(),l=ke(l,s.draggable,n,!0),p("dragOver"),I.eventCanceled)return v;if(E.contains(e.target)||l.animated&&l.animatingX&&l.animatingY||d._ignoreWhileAnimating===l)return k(!1);if(Rt=!1,u&&!s.disabled&&(c?f||(o=ne!==J):oe===this||(this.lastPutMode=Mt.checkPull(this,u,E,e))&&r.checkPut(this,u,E,e))){if(b=this._getDirection(e,l)==="vertical",i=ie(E),p("dragOverValid"),I.eventCanceled)return v;if(o)return ne=J,g(),this._hideClone(),p("revert"),I.eventCanceled||(Je?J.insertBefore(E,Je):J.appendChild(E)),k(!0);var w=tn(n,s.draggable);if(!w||Oi(e,b,this)&&!w.animated){if(w===E)return k(!1);if(w&&n===e.target&&(l=w),l&&(a=ie(l)),jt(J,n,E,i,l,a,e,!!l)!==!1)return g(),w&&w.nextSibling?n.insertBefore(E,w.nextSibling):n.appendChild(E),ne=n,_(),k(!0)}else if(w&&Ii(e,b,this)){var L=rt(n,0,s,!0);if(L===E)return k(!1);if(l=L,a=ie(l),jt(J,n,E,i,l,a,e,!1)!==!1)return g(),n.insertBefore(E,L),ne=n,_(),k(!0)}else if(l.parentNode===n){a=ie(l);var T=0,S,M=E.parentNode!==n,C=!Ti(E.animated&&E.toRect||i,l.animated&&l.toRect||a,b),le=b?"top":"left",ue=nl(l,"top","top")||nl(E,"top","top"),V=ue?ue.scrollTop:void 0;ct!==l&&(S=a[le],Et=!1,Bt=!C&&s.invertSwap||M),T=Fi(e,l,a,b,C?1:s.swapThreshold,s.invertedSwapThreshold==null?s.swapThreshold:s.invertedSwapThreshold,Bt,ct===l);var U;if(T!==0){var Z=ye(E);do Z-=T,U=ne.children[Z];while(U&&(O(U,"display")==="none"||U===N))}if(T===0||U===l)return k(!1);ct=l,wt=T;var F=l.nextElementSibling,z=!1;z=T===1;var me=jt(J,n,E,i,l,a,e,z);if(me!==!1)return(me===1||me===-1)&&(z=me===1),sn=!0,setTimeout(Ai,30),g(),z&&!F?n.appendChild(E):l.parentNode.insertBefore(E,z?F:l),ue&&al(ue,0,V-ue.scrollTop),ne=E.parentNode,S!==void 0&&!Bt&&(Yt=Math.abs(S-ie(l)[le])),_(),k(!0)}if(n.contains(E))return k(!1)}return!1},_ignoreWhileAnimating:null,_offMoveEvents:function(){X(document,"mousemove",this._onTouchMove),X(document,"touchmove",this._onTouchMove),X(document,"pointermove",this._onTouchMove),X(document,"dragover",$e),X(document,"mousemove",$e),X(document,"touchmove",$e)},_offUpEvents:function(){var e=this.el.ownerDocument;X(e,"mouseup",this._onDrop),X(e,"touchend",this._onDrop),X(e,"pointerup",this._onDrop),X(e,"touchcancel",this._onDrop),X(document,"selectstart",this)},_onDrop:function(e){var n=this.el,l=this.options;if(_e=ye(E),Ke=ye(E,l.draggable),he("drop",this,{evt:e}),ne=E&&E.parentNode,_e=ye(E),Ke=ye(E,l.draggable),I.eventCanceled){this._nulling();return}ft=!1,Bt=!1,Et=!1,clearInterval(this._loopId),clearTimeout(this._dragStartTimer),fn(this.cloneId),fn(this._dragStartId),this.nativeDraggable&&(X(document,"drop",this),X(n,"dragstart",this._onDragStart)),this._offMoveEvents(),this._offUpEvents(),gt&&O(document.body,"user-select",""),O(E,"transform",""),e&&(yt&&(e.cancelable&&e.preventDefault(),!l.dropBubble&&e.stopPropagation()),N&&N.parentNode&&N.parentNode.removeChild(N),(J===ne||oe&&oe.lastPutMode!=="clone")&&x&&x.parentNode&&x.parentNode.removeChild(x),E&&(this.nativeDraggable&&X(E,"dragend",this),un(E),E.style["will-change"]="",yt&&!ft&&ge(E,oe?oe.options.ghostClass:this.options.ghostClass,!1),ge(E,this.options.chosenClass,!1),se({sortable:this,name:"unchoose",toEl:ne,newIndex:null,newDraggableIndex:null,originalEvent:e}),J!==ne?(_e>=0&&(se({rootEl:ne,name:"add",toEl:ne,fromEl:J,originalEvent:e}),se({sortable:this,name:"remove",toEl:ne,originalEvent:e}),se({rootEl:ne,name:"sort",toEl:ne,fromEl:J,originalEvent:e}),se({sortable:this,name:"sort",toEl:ne,originalEvent:e})),oe&&oe.save()):_e!==ut&&_e>=0&&(se({sortable:this,name:"update",toEl:ne,originalEvent:e}),se({sortable:this,name:"sort",toEl:ne,originalEvent:e})),I.active&&((_e==null||_e===-1)&&(_e=ut,Ke=vt),se({sortable:this,name:"end",toEl:ne,originalEvent:e}),this.save()))),this._nulling()},_nulling:function(){he("nulling",this),J=E=ne=N=Je=x=Nt=Ve=xe=Te=yt=_e=Ke=ut=vt=ct=wt=oe=Mt=I.dragged=I.ghost=I.clone=I.active=null,qt.forEach(function(e){e.checked=!0}),qt.length=an=on=0},handleEvent:function(e){switch(e.type){case"drop":case"dragend":this._onDrop(e);break;case"dragenter":case"dragover":E&&(this._onDragOver(e),Ci(e));break;case"selectstart":e.preventDefault();break}},toArray:function(){for(var e=[],n,l=this.el.children,i=0,a=l.length,o=this.options;i<a;i++)n=l[i],ke(n,o.draggable,this.el,!1)&&e.push(n.getAttribute(o.dataIdAttr)||Mi(n));return e},sort:function(e,n){var l={},i=this.el;this.toArray().forEach(function(a,o){var s=i.children[o];ke(s,this.options.draggable,i,!1)&&(l[a]=s)},this),n&&this.captureAnimationState(),e.forEach(function(a){l[a]&&(i.removeChild(l[a]),i.appendChild(l[a]))}),n&&this.animateAll()},save:function(){var e=this.options.store;e&&e.set&&e.set(this)},closest:function(e,n){return ke(e,n||this.options.draggable,this.el,!1)},option:function(e,n){var l=this.options;if(n===void 0)return l[e];var i=_t.modifyOption(this,e,n);typeof i<"u"?l[e]=i:l[e]=n,e==="group"&&hl(l)},destroy:function(){he("destroy",this);var e=this.el;e[be]=null,X(e,"mousedown",this._onTapStart),X(e,"touchstart",this._onTapStart),X(e,"pointerdown",this._onTapStart),this.nativeDraggable&&(X(e,"dragover",this),X(e,"dragenter",this)),Array.prototype.forEach.call(e.querySelectorAll("[draggable]"),function(n){n.removeAttribute("draggable")}),this._onDrop(),this._disableDelayedDragEvents(),Ht.splice(Ht.indexOf(this.el),1),this.el=e=null},_hideClone:function(){if(!Ve){if(he("hideClone",this),I.eventCanceled)return;O(x,"display","none"),this.options.removeCloneOnHide&&x.parentNode&&x.parentNode.removeChild(x),Ve=!0}},_showClone:function(e){if(e.lastPutMode!=="clone"){this._hideClone();return}if(Ve){if(he("showClone",this),I.eventCanceled)return;E.parentNode==J&&!this.options.group.revertClone?J.insertBefore(x,E):Je?J.insertBefore(x,Je):J.appendChild(x),this.options.group.revertClone&&this.animate(E,x),O(x,"display",""),Ve=!1}}};function Ci(t){t.dataTransfer&&(t.dataTransfer.dropEffect="move"),t.cancelable&&t.preventDefault()}function jt(t,e,n,l,i,a,o,s){var r,u=t[be],c=u.options.onMove,f;return window.CustomEvent&&!qe&&!pt?r=new CustomEvent("move",{bubbles:!0,cancelable:!0}):(r=document.createEvent("Event"),r.initEvent("move",!0,!0)),r.to=e,r.from=t,r.dragged=n,r.draggedRect=l,r.related=i||e,r.relatedRect=a||ie(e),r.willInsertAfter=s,r.originalEvent=o,t.dispatchEvent(r),c&&(f=c.call(u,r,o)),f}function un(t){t.draggable=!1}function Ai(){sn=!1}function Ii(t,e,n){var l=ie(rt(n.el,0,n.options,!0)),i=rl(n.el,n.options,N),a=10;return e?t.clientX<i.left-a||t.clientY<l.top&&t.clientX<l.right:t.clientY<i.top-a||t.clientY<l.bottom&&t.clientX<l.left}function Oi(t,e,n){var l=ie(tn(n.el,n.options.draggable)),i=rl(n.el,n.options,N),a=10;return e?t.clientX>i.right+a||t.clientY>l.bottom&&t.clientX>l.left:t.clientY>i.bottom+a||t.clientX>l.right&&t.clientY>l.top}function Fi(t,e,n,l,i,a,o,s){var r=l?t.clientY:t.clientX,u=l?n.height:n.width,c=l?n.top:n.left,f=l?n.bottom:n.right,m=!1;if(!o){if(s&&Yt<u*i){if(!Et&&(wt===1?r>c+u*a/2:r<f-u*a/2)&&(Et=!0),Et)m=!0;else if(wt===1?r<c+Yt:r>f-Yt)return-wt}else if(r>c+u*(1-i)/2&&r<f-u*(1-i)/2)return Ni(e)}return m=m||o,m&&(r<c+u*a/2||r>f-u*a/2)?r>c+u/2?1:-1:0}function Ni(t){return ye(E)<ye(t)?1:-1}function Mi(t){for(var e=t.tagName+t.className+t.src+t.href+t.textContent,n=e.length,l=0;n--;)l+=e.charCodeAt(n);return l.toString(36)}function Ri(t){qt.length=0;for(var e=t.getElementsByTagName("input"),n=e.length;n--;){var l=e[n];l.checked&&qt.push(l)}}function Wt(t){return setTimeout(t,0)}function fn(t){return clearTimeout(t)}zt&&j(document,"touchmove",function(t){(I.active||ft)&&t.cancelable&&t.preventDefault()}),I.utils={on:j,off:X,css:O,find:tl,is:function(e,n){return!!ke(e,n,e,!1)},extend:_i,throttle:il,closest:ke,toggleClass:ge,clone:ol,index:ye,nextTick:Wt,cancelNextTick:fn,detectDirection:dl,getChild:rt},I.get=function(t){return t[be]},I.mount=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];e[0].constructor===Array&&(e=e[0]),e.forEach(function(l){if(!l.prototype||!l.prototype.constructor)throw"Sortable: Mounted plugin must be a constructor function, not ".concat({}.toString.call(l));l.utils&&(I.utils=Le(Le({},I.utils),l.utils)),_t.mount(l)})},I.create=function(t,e){return new I(t,e)},I.version=pi;var ae=[],Dt,cn,dn=!1,hn,mn,Gt,St;function Hi(){function t(){this.defaults={scroll:!0,forceAutoScrollFallback:!1,scrollSensitivity:30,scrollSpeed:10,bubbleScroll:!0};for(var e in this)e.charAt(0)==="_"&&typeof this[e]=="function"&&(this[e]=this[e].bind(this))}return t.prototype={dragStarted:function(n){var l=n.originalEvent;this.sortable.nativeDraggable?j(document,"dragover",this._handleAutoScroll):this.options.supportPointer?j(document,"pointermove",this._handleFallbackAutoScroll):l.touches?j(document,"touchmove",this._handleFallbackAutoScroll):j(document,"mousemove",this._handleFallbackAutoScroll)},dragOverCompleted:function(n){var l=n.originalEvent;!this.options.dragOverBubble&&!l.rootEl&&this._handleAutoScroll(l)},drop:function(){this.sortable.nativeDraggable?X(document,"dragover",this._handleAutoScroll):(X(document,"pointermove",this._handleFallbackAutoScroll),X(document,"touchmove",this._handleFallbackAutoScroll),X(document,"mousemove",this._handleFallbackAutoScroll)),gl(),Ut(),vi()},nulling:function(){Gt=cn=Dt=dn=St=hn=mn=null,ae.length=0},_handleFallbackAutoScroll:function(n){this._handleAutoScroll(n,!0)},_handleAutoScroll:function(n,l){var i=this,a=(n.touches?n.touches[0]:n).clientX,o=(n.touches?n.touches[0]:n).clientY,s=document.elementFromPoint(a,o);if(Gt=n,l||this.options.forceAutoScrollFallback||pt||qe||gt){pn(n,this.options,s,l);var r=Qe(s,!0);dn&&(!St||a!==hn||o!==mn)&&(St&&gl(),St=setInterval(function(){var u=Qe(document.elementFromPoint(a,o),!0);u!==r&&(r=u,Ut()),pn(n,i.options,u,l)},10),hn=a,mn=o)}else{if(!this.options.bubbleScroll||Qe(s,!0)===Ce()){Ut();return}pn(n,this.options,Qe(s,!1),!1)}}},Be(t,{pluginName:"scroll",initializeByDefault:!0})}function Ut(){ae.forEach(function(t){clearInterval(t.pid)}),ae=[]}function gl(){clearInterval(St)}var pn=il(function(t,e,n,l){if(e.scroll){var i=(t.touches?t.touches[0]:t).clientX,a=(t.touches?t.touches[0]:t).clientY,o=e.scrollSensitivity,s=e.scrollSpeed,r=Ce(),u=!1,c;cn!==n&&(cn=n,Ut(),Dt=e.scroll,c=e.scrollFn,Dt===!0&&(Dt=Qe(n,!0)));var f=0,m=Dt;do{var b=m,d=ie(b),v=d.top,p=d.bottom,g=d.left,k=d.right,_=d.width,w=d.height,L=void 0,T=void 0,S=b.scrollWidth,M=b.scrollHeight,C=O(b),le=b.scrollLeft,ue=b.scrollTop;b===r?(L=_<S&&(C.overflowX==="auto"||C.overflowX==="scroll"||C.overflowX==="visible"),T=w<M&&(C.overflowY==="auto"||C.overflowY==="scroll"||C.overflowY==="visible")):(L=_<S&&(C.overflowX==="auto"||C.overflowX==="scroll"),T=w<M&&(C.overflowY==="auto"||C.overflowY==="scroll"));var V=L&&(Math.abs(k-i)<=o&&le+_<S)-(Math.abs(g-i)<=o&&!!le),U=T&&(Math.abs(p-a)<=o&&ue+w<M)-(Math.abs(v-a)<=o&&!!ue);if(!ae[f])for(var Z=0;Z<=f;Z++)ae[Z]||(ae[Z]={});(ae[f].vx!=V||ae[f].vy!=U||ae[f].el!==b)&&(ae[f].el=b,ae[f].vx=V,ae[f].vy=U,clearInterval(ae[f].pid),(V!=0||U!=0)&&(u=!0,ae[f].pid=setInterval((function(){l&&this.layer===0&&I.active._onTouchMove(Gt);var F=ae[this.layer].vy?ae[this.layer].vy*s:0,z=ae[this.layer].vx?ae[this.layer].vx*s:0;typeof c=="function"&&c.call(I.dragged.parentNode[be],z,F,t,Gt,ae[this.layer].el)!=="continue"||al(ae[this.layer].el,z,F)}).bind({layer:f}),24))),f++}while(e.bubbleScroll&&m!==r&&(m=Qe(m,!1)));dn=u}},30),bl=function(e){var n=e.originalEvent,l=e.putSortable,i=e.dragEl,a=e.activeSortable,o=e.dispatchSortableEvent,s=e.hideGhostForTarget,r=e.unhideGhostForTarget;if(n){var u=l||a;s();var c=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:n,f=document.elementFromPoint(c.clientX,c.clientY);r(),u&&!u.el.contains(f)&&(o("spill"),this.onSpill({dragEl:i,putSortable:l}))}};function gn(){}gn.prototype={startIndex:null,dragStart:function(e){var n=e.oldDraggableIndex;this.startIndex=n},onSpill:function(e){var n=e.dragEl,l=e.putSortable;this.sortable.captureAnimationState(),l&&l.captureAnimationState();var i=rt(this.sortable.el,this.startIndex,this.options);i?this.sortable.el.insertBefore(n,i):this.sortable.el.appendChild(n),this.sortable.animateAll(),l&&l.animateAll()},drop:bl},Be(gn,{pluginName:"revertOnSpill"});function bn(){}bn.prototype={onSpill:function(e){var n=e.dragEl,l=e.putSortable,i=l||this.sortable;i.captureAnimationState(),n.parentNode&&n.parentNode.removeChild(n),i.animateAll()},drop:bl},Be(bn,{pluginName:"removeOnSpill"}),I.mount(new Hi),I.mount(bn,gn);function _l(t,e,n){const l=t.slice();return l[16]=e[n],l}function vl(t,e,n){const l=t.slice();return l[19]=e[n],l}function yl(t){let e,n,l,i;return{c(){e=D("div"),n=D("a"),n.innerHTML='<i class="fas fa-pencil-alt fa-sm"></i>',h(n,"href","javascript:"),h(n,"data-action","editField"),h(n,"class","edit-field svelte-1mx8y43"),h(e,"class","right svelte-1mx8y43")},m(a,o){G(a,e,o),y(e,n),l||(i=te(n,"click",t[6]),l=!0)},p:K,d(a){a&&W(e),l=!1,i()}}}function wl(t){let e,n,l,i=t[19].label+"",a,o,s,r=t[0].editable&&yl(t),u=[t[9](t[19])],c={};for(let f=0;f<u.length;f+=1)c=Xe(c,u[f]);return{c(){e=D("li"),n=D("div"),l=D("label"),a=ce(i),o=q(),r&&r.c(),s=q(),h(l,"class","svelte-1mx8y43"),h(n,"class","left svelte-1mx8y43"),Tt(e,c),Pt(e,"svelte-1mx8y43",!0)},m(f,m){G(f,e,m),y(e,n),y(n,l),y(l,a),y(e,o),r&&r.m(e,null),y(e,s)},p(f,m){m&4&&i!==(i=f[19].label+"")&&Oe(a,i),f[0].editable?r?r.p(f,m):(r=yl(f),r.c(),r.m(e,s)):r&&(r.d(1),r=null),Tt(e,c=Rn(u,[m&4&&f[9](f[19])])),Pt(e,"svelte-1mx8y43",!0)},d(f){f&&W(e),r&&r.d()}}}function El(t){let e,n,l,i;return{c(){e=D("div"),n=D("a"),n.innerHTML='<i class="fas fa-pencil-alt fa-sm"></i>',h(n,"href","javascript:"),h(n,"data-action","editField"),h(n,"class","edit-field svelte-1mx8y43"),h(e,"class","right svelte-1mx8y43")},m(a,o){G(a,e,o),y(e,n),l||(i=te(n,"click",t[6]),l=!0)},p:K,d(a){a&&W(e),l=!1,i()}}}function Dl(t){let e,n,l,i=t[16].label+"",a,o,s,r=t[0].editable&&El(t),u=[t[9](t[16])],c={};for(let f=0;f<u.length;f+=1)c=Xe(c,u[f]);return{c(){e=D("li"),n=D("div"),l=D("label"),a=ce(i),o=q(),r&&r.c(),s=q(),h(l,"class","svelte-1mx8y43"),h(n,"class","left svelte-1mx8y43"),Tt(e,c),Pt(e,"svelte-1mx8y43",!0)},m(f,m){G(f,e,m),y(e,n),y(n,l),y(l,a),y(e,o),r&&r.m(e,null),y(e,s)},p(f,m){m&2&&i!==(i=f[16].label+"")&&Oe(a,i),f[0].editable?r?r.p(f,m):(r=El(f),r.c(),r.m(e,s)):r&&(r.d(1),r=null),Tt(e,c=Rn(u,[m&2&&f[9](f[16])])),Pt(e,"svelte-1mx8y43",!0)},d(f){f&&W(e),r&&r.d()}}}function Bi(t){let e,n,l,i,a,o,s,r,u,c,f,m,b=de(t[2]),d=[];for(let g=0;g<b.length;g+=1)d[g]=wl(vl(t,b,g));let v=de(t[1]),p=[];for(let g=0;g<v.length;g+=1)p[g]=Dl(_l(t,v,g));return{c(){e=D("div"),n=D("div"),l=D("div"),i=D("header"),i.textContent=`${Y.translate("Enabled","labels","Admin")}`,a=q(),o=D("ul");for(let g=0;g<d.length;g+=1)d[g].c();s=q(),r=D("div"),u=D("div"),c=D("header"),c.textContent=`${Y.translate("Disabled","labels","Admin")}`,f=q(),m=D("ul");for(let g=0;g<p.length;g+=1)p[g].c();h(o,"class","enabled connected svelte-1mx8y43"),h(l,"class","well"),h(n,"class","col-sm-5"),h(m,"class","disabled connected svelte-1mx8y43"),h(u,"class","well"),h(r,"class","col-sm-5"),h(e,"id","layout"),h(e,"class","row")},m(g,k){G(g,e,k),y(e,n),y(n,l),y(l,i),y(l,a),y(l,o);for(let _=0;_<d.length;_+=1)d[_]&&d[_].m(o,null);y(e,s),y(e,r),y(r,u),y(u,c),y(u,f),y(u,m);for(let _=0;_<p.length;_+=1)p[_]&&p[_].m(m,null);t[11](e)},p(g,k){if(k&581){b=de(g[2]);let _;for(_=0;_<b.length;_+=1){const w=vl(g,b,_);d[_]?d[_].p(w,k):(d[_]=wl(w),d[_].c(),d[_].m(o,null))}for(;_<d.length;_+=1)d[_].d(1);d.length=b.length}if(k&579){v=de(g[1]);let _;for(_=0;_<v.length;_+=1){const w=_l(g,v,_);p[_]?p[_].p(w,k):(p[_]=Dl(w),p[_].c(),p[_].m(m,null))}for(;_<p.length;_+=1)p[_].d(1);p.length=v.length}},d(g){g&&W(e),dt(d,g),dt(p,g),t[11](null)}}}function Yi(t){let e,n,l={params:t[0],validate:t[8],fetch:t[7],loadLayout:t[3],$$slots:{default:[Bi]},$$scope:{ctx:t}};return e=new Vn({props:l}),t[12](e),{c(){Ge(e.$$.fragment)},m(i,a){Ne(e,i,a),n=!0},p(i,[a]){const o={};a&1&&(o.params=i[0]),a&8&&(o.loadLayout=i[3]),a&4194327&&(o.$$scope={dirty:a,ctx:i}),e.$set(o)},i(i){n||(Ee(e.$$.fragment,i),n=!0)},o(i){Fe(e.$$.fragment,i),n=!1},d(i){t[12](null),Me(e,i)}}}function qi(t){return t.toLowerCase()}function Sl(t,e){return t[e]}function zi(t,e,n){let l,i,a,{params:o}=e,{enabledFields:s=[]}=e,{disabledFields:r=[]}=e,{rowLayout:u=[]}=e,{loadLayout:c}=e,f;Kt(()=>{m()}),Pn(()=>{i&&i.destroy(),a&&a.destroy()});function m(){const _={group:"fields",draggable:"li",animation:150};i=I.create(l.querySelector("ul.enabled"),{..._}),a=I.create(l.querySelector("ul.disabled"),{..._})}function b(_){const L=_.target.closest("li");if(!L)return;const T={};o.dataAttributeList.forEach(S=>{T[S]=L.dataset[S]||null}),f.openEditDialog(T)}function d(){const _=[];for(let w of l.querySelector("ul.enabled").children){const L={};o.dataAttributeList.forEach(T=>{const S=w.dataset[T];S&&(L[T]=S)}),_.push(L)}return _}function v(_){return _.length===0?(Re.notify("Layout cannot be empty","error"),!1):!0}function p(_){const w={};return o.dataAttributeList.forEach(L=>{Sl(_,L)!=null&&(w[`data-${qi(L)}`]=Sl(_,L))}),w}function g(_){Pe[_?"unshift":"push"](()=>{l=_,n(4,l)})}function k(_){Pe[_?"unshift":"push"](()=>{f=_,n(5,f)})}return t.$$set=_=>{"params"in _&&n(0,o=_.params),"enabledFields"in _&&n(10,s=_.enabledFields),"disabledFields"in _&&n(1,r=_.disabledFields),"rowLayout"in _&&n(2,u=_.rowLayout),"loadLayout"in _&&n(3,c=_.loadLayout)},[o,r,u,c,l,f,b,d,v,p,s,g,k]}class _n extends Se{constructor(e){super(),De(this,e,zi,Yi,ve,{params:0,enabledFields:10,disabledFields:1,rowLayout:2,loadLayout:3})}}function Xi(t){let e,n,l={params:t[0],enabledFields:t[2],disabledFields:t[3],rowLayout:t[4],editable:ji,loadLayout:t[5]};return e=new _n({props:l}),t[7](e),{c(){Ge(e.$$.fragment)},m(i,a){Ne(e,i,a),n=!0},p(i,[a]){const o={};a&1&&(o.params=i[0]),a&4&&(o.enabledFields=i[2]),a&8&&(o.disabledFields=i[3]),a&16&&(o.rowLayout=i[4]),e.$set(o)},i(i){n||(Ee(e.$$.fragment,i),n=!0)},o(i){Fe(e.$$.fragment,i),n=!1},d(i){t[7](null),Me(e,i)}}}let ji=!0;function Wi(t){return!0}function Gi(t,e,n){let{params:l}=e;l.dataAttributeList||(l.dataAttributeList=["id","name","width","widthPx","link","notSortable","align","view","customLabel"]),l.dataAttributeDefs||(l.dataAttributesDefs={link:{type:"bool"},width:{type:"float"},notSortable:{type:"bool"},align:{type:"enum",options:["left","right"]},view:{type:"varchar",readOnly:!0},customLabel:{type:"varchar",readOnly:!0},widthPx:{type:"float"},name:{type:"varchar",readOnly:!0}});let{layoutDisabledParameter:i="layoutListDisabled"}=e,a,o=[],s=[],r=[];const u=[],c=[];function f(v){It.create(l.scope,p=>{He.get(l.scope,l.type,l.layoutProfileId,g=>{m(p,g),v&&v()},!1)})}function m(v,p){const g=Object.keys(v.defs.fields).filter(L=>Wi(v.getFieldParam(L,"type"))&&b(v,L)).sort((L,T)=>Y.translate(L,"fields",l.scope).localeCompare(Y.translate(T,"fields",l.scope))),k=[],_=[],w=[];n(2,o=p.map(L=>{const T=Y.translate(L.name,"fields",l.scope);return _.includes(T)&&w.push(T),_.push(T),k.push(L.name),{name:L.name,label:T}})),n(3,s=g.filter(L=>!k.includes(L)).map(L=>{const T=Y.translate(L,"fields",l.scope);_.includes(T)&&w.push(T),_.push(T);const S={name:L,label:T},M=Ue.get(["entityDefs",l.scope,"fields",L,"type"]);return M&&Ue.get(["fields",M,"notSortable"])&&(S.notSortable=!0),S})),[o,s].forEach(L=>{L.forEach(T=>{w.includes(T.label)&&(T.label+=` (${T.name})`)})}),n(4,r=p.map(L=>{var T;return{...L,label:((T=o.find(S=>S.name===L.name))==null?void 0:T.label)||Y.translate(L.name,"fields",l.scope)}}))}function b(v,p){return u.includes(p)||c.includes(v.getFieldParam(p,"type"))?!1:!v.getFieldParam(p,"disabled")&&!v.getFieldParam(p,i)}function d(v){Pe[v?"unshift":"push"](()=>{a=v,n(1,a)})}return t.$$set=v=>{"params"in v&&n(0,l=v.params),"layoutDisabledParameter"in v&&n(6,i=v.layoutDisabledParameter)},[l,a,o,s,r,f,i,d]}class kl extends Se{constructor(e){super(),De(this,e,Gi,Xi,ve,{params:0,layoutDisabledParameter:6})}}function Ui(t){let e,n,l={params:t[0],enabledFields:t[4],disabledFields:t[2],rowLayout:t[3],loadLayout:t[5]};return e=new _n({props:l}),t[7](e),{c(){Ge(e.$$.fragment)},m(i,a){Ne(e,i,a),n=!0},p(i,[a]){const o={};a&1&&(o.params=i[0]),a&4&&(o.disabledFields=i[2]),a&8&&(o.rowLayout=i[3]),e.$set(o)},i(i){n||(Ee(e.$$.fragment,i),n=!0)},o(i){Fe(e.$$.fragment,i),n=!1},d(i){t[7](null),Me(e,i)}}}function Qi(t,e,n){let{params:l}=e,{viewType:i="detail"}=e;l.dataAttributeList||(l.dataAttributeList=["id","name","style","sticked"]),l.dataAttributeDefs||(l.dataAttributeDefs={style:{type:"enum",options:["default","success","danger","primary","info","warning"],translation:"LayoutManager.options.style"},sticked:{type:"bool"},name:{readOnly:!0}});let a,o=[],s=[],r=[];function u(m){He.get(l.scope,l.type,l.layoutProfileId,b=>{c(b),m&&m()},!1)}function c(m){let b=[],d={},v={};Ue.get(["clientDefs",v.scope,"defaultSidePanel",i])!==!1&&!Ue.get(["clientDefs",v.scope,"defaultSidePanelDisabled"])&&(b.push("default"),d.default="Default"),(Ue.get(["clientDefs",v.scope,"sidePanels",i])||[]).forEach(p=>{p.name&&(b.push(p.name),p.label&&(d[p.name]=p.label),v[p.name]=p)}),n(2,s=[]),m=m||{},n(3,r=[]),b.forEach((p,g)=>{let k=!1,_=m[p]||{};_.disabled&&(k=!0);let w;if(d[p]?w=Y.translate(d[p],"labels",v.scope):w=Y.translate(p,"panels",v.scope),k)s.push({name:p,label:w});else{let L={name:p,label:w};L.name in v&&dataAttributeList.forEach(T=>{if(T==="name")return;let S=v[L.name]||{};T in S&&(L[T]=S[T])});for(let T in _)L[T]=_[T];L.index="index"in _?_.index:g,r.push(L)}}),r.sort((p,g)=>p.index-g.index)}function f(m){Pe[m?"unshift":"push"](()=>{a=m,n(1,a)})}return t.$$set=m=>{"params"in m&&n(0,l=m.params),"viewType"in m&&n(6,i=m.viewType)},[l,a,s,r,o,u,i,f]}class Qt extends Se{constructor(e){super(),De(this,e,Qi,Ui,ve,{params:0,viewType:6})}}function Vi(t){let e,n,l={params:t[0],enabledFields:t[2],disabledFields:t[3],rowLayout:t[4],loadLayout:t[5]};return e=new _n({props:l}),t[7](e),{c(){Ge(e.$$.fragment)},m(i,a){Ne(e,i,a),n=!0},p(i,[a]){const o={};a&1&&(o.params=i[0]),a&4&&(o.enabledFields=i[2]),a&8&&(o.disabledFields=i[3]),a&16&&(o.rowLayout=i[4]),e.$set(o)},i(i){n||(Ee(e.$$.fragment,i),n=!0)},o(i){Fe(e.$$.fragment,i),n=!1},d(i){t[7](null),Me(e,i)}}}function Ki(t,e){return!t.getLinkParam(e,"disabled")&&!t.getLinkParam(e,"layoutRelationshipsDisabled")}function Zi(t,e,n){let{params:l}=e;l.dataAttributeList||(l.dataAttributeList=["id","name","style","hiddenPerDefault"]),l.dataAttributesDefs||(l.dataAttributesDefs={style:{type:"enum",options:["default","success","danger","primary","info","warning"],translation:"LayoutManager.options.style"},hiddenPerDefault:{type:"bool"},name:{readOnly:!0}});let{afterRender:i}=e,a,o=[],s=[],r=[],u=[];function c(b){It.create(l.scope,function(d){He.get(l.scope,l.type,l.layoutProfileId,v=>{f(d,v),b&&b()},!1)})}function f(b,d){let v=[];for(let p in b.defs.links)["hasMany","hasChildren"].includes(b.defs.links[p].type)&&Ki(b,p)&&v.push(p);v.sort((p,g)=>Y.translate(p,"links","scope").localeCompare(Y.translate(g,"links","scope"))),s=[],n(2,o=[]),n(3,r=[]);for(let p in d){let g=d[p],k;typeof g=="string"?k={name:g,label:Y.translate(g,"links","scope")}:(k=g,k.label=Y.translate(k.name,"links","scope")),dataAttributeList.forEach(_=>{if(_==="name"||_ in k)return;let w=Ue.get(["clientDefs","scope","relationshipPanels",k.name,_]);w!==null&&(k[_]=w)}),o.push(k),s.push(k.name)}for(let p of v)s.includes(p)||r.push({name:p,label:Y.translate(p,"links","scope")});n(4,u=o);for(let p of u)p.label=Y.translate(p.name,"links","scope")}function m(b){Pe[b?"unshift":"push"](()=>{a=b,n(1,a)})}return t.$$set=b=>{"params"in b&&n(0,l=b.params),"afterRender"in b&&n(6,i=b.afterRender)},[l,a,o,r,u,c,i,m]}class Ji extends Se{constructor(e){super(),De(this,e,Zi,Vi,ve,{params:0,afterRender:6})}}function Tl(t,e,n){const l=t.slice();return l[39]=e[n],l}function Pl(t,e,n){const l=t.slice();return l[42]=e[n],l}function Ll(t,e,n){const l=t.slice();return l[45]=e[n],l}function Cl(t,e,n){const l=t.slice();return l[48]=e[n],l[50]=n,l}function xi(t){let e,n,l,i,a;function o(){return t[20](t[42],t[45],t[50])}function s(...r){return t[21](t[42],t[45],t[50],...r)}return{c(){e=D("li"),n=D("a"),n.innerHTML='<i class="fas fa-minus"></i>',l=q(),h(n,"href","#"),h(n,"data-action","minusCell"),h(n,"class","remove-field svelte-fp3tbt"),h(e,"class","empty cell svelte-fp3tbt")},m(r,u){G(r,e,u),y(e,n),y(e,l),i||(a=[te(n,"click",je(o)),te(e,"dragover",je(la)),te(e,"drop",s)],i=!0)},p(r,u){t=r},d(r){r&&W(e),i=!1,Ie(a)}}}function $i(t){let e,n=t[48].label+"",l,i,a,o,s,r,u,c,f,m,b;function d(){return t[18](t[42],t[45],t[50])}function v(...p){return t[19](t[48],...p)}return{c(){e=D("li"),l=ce(n),i=q(),a=D("a"),a.innerHTML='<i class="fas fa-times"></i>',o=q(),h(a,"href","#"),h(a,"data-action","removeField"),h(a,"class","remove-field svelte-fp3tbt"),h(e,"class","cell svelte-fp3tbt"),h(e,"draggable","true"),h(e,"data-id",s=t[48].id),h(e,"data-name",r=t[48].name),h(e,"data-full-width",u=t[48].fullWidth?"true":void 0),h(e,"data-custom-label",c=t[48].customLabel?t[48].customLabel:void 0),h(e,"data-no-label",f=t[48].noLabel)},m(p,g){G(p,e,g),y(e,l),y(e,i),y(e,a),y(e,o),m||(b=[te(a,"click",je(d)),te(e,"dragstart",Vt(v))],m=!0)},p(p,g){t=p,g[0]&2&&n!==(n=t[48].label+"")&&Oe(l,n),g[0]&2&&s!==(s=t[48].id)&&h(e,"data-id",s),g[0]&2&&r!==(r=t[48].name)&&h(e,"data-name",r),g[0]&2&&u!==(u=t[48].fullWidth?"true":void 0)&&h(e,"data-full-width",u),g[0]&2&&c!==(c=t[48].customLabel?t[48].customLabel:void 0)&&h(e,"data-custom-label",c),g[0]&2&&f!==(f=t[48].noLabel)&&h(e,"data-no-label",f)},d(p){p&&W(e),m=!1,Ie(b)}}}function Al(t){let e;function n(a,o){return a[48]?$i:xi}let l=n(t),i=l(t);return{c(){i.c(),e=Tn()},m(a,o){i.m(a,o),G(a,e,o)},p(a,o){l===(l=n(a))&&i?i.p(a,o):(i.d(1),i=l(a),i&&(i.c(),i.m(e.parentNode,e)))},d(a){a&&W(e),i.d(a)}}}function Il(t,e){let n,l,i,a,o,s,r,u,c;function f(){return e[17](e[42],e[45])}let m=de(e[45].cells),b=[];for(let d=0;d<m.length;d+=1)b[d]=Al(Cl(e,m,d));return{key:t,first:null,c(){n=D("li"),l=D("div"),i=D("a"),i.innerHTML='<i class="fas fa-times"></i>',a=q(),o=D("ul");for(let d=0;d<b.length;d+=1)b[d].c();s=q(),h(i,"href","#"),h(i,"data-action","removeRow"),h(i,"class","remove-row pull-right svelte-fp3tbt"),h(l,"class","svelte-fp3tbt"),h(o,"class","cells svelte-fp3tbt"),h(n,"class","row svelte-fp3tbt"),h(n,"data-number",r=e[45].number),this.first=n},m(d,v){G(d,n,v),y(n,l),y(l,i),y(n,a),y(n,o);for(let p=0;p<b.length;p+=1)b[p]&&b[p].m(o,null);y(n,s),u||(c=[te(i,"click",je(f)),te(o,"mousedown",Vt(ia))],u=!0)},p(d,v){if(e=d,v[0]&3586){m=de(e[45].cells);let p;for(p=0;p<m.length;p+=1){const g=Cl(e,m,p);b[p]?b[p].p(g,v):(b[p]=Al(g),b[p].c(),b[p].m(o,null))}for(;p<b.length;p+=1)b[p].d(1);b.length=m.length}v[0]&2&&r!==(r=e[45].number)&&h(n,"data-number",r)},d(d){d&&W(n),dt(b,d),u=!1,Ie(c)}}}function Ol(t,e){let n,l,i,a=(e[42].customLabel||e[42].label||"")+"",o,s,r,u,c,f,m,b,d,v,p,g=[],k=new Map,_,w,L,T,S,M,C;function le(){return e[15](e[42])}function ue(){return e[16](e[42])}let V=de(e[42].rows);const U=F=>F[45].number;for(let F=0;F<V.length;F+=1){let z=Ll(e,V,F),me=U(z);k.set(me,g[F]=Il(me,z))}function Z(){return e[22](e[42])}return{key:t,first:null,c(){n=D("li"),l=D("header"),i=D("label"),o=ce(a),r=ce(`Â \r
                                `),u=D("a"),u.innerHTML='<i class="fas fa-pencil-alt fa-sm"></i>',c=q(),f=D("a"),m=D("i"),v=q(),p=D("ul");for(let F=0;F<g.length;F+=1)g[F].c();_=q(),w=D("div"),L=D("a"),L.innerHTML='<i class="fas fa-plus"></i>',T=q(),h(i,"data-is-custom",s=e[42].customLabel?"true":void 0),h(i,"class","svelte-fp3tbt"),h(u,"href","#"),h(u,"data-action","edit-panel-label"),h(u,"class","edit-panel-label svelte-fp3tbt"),h(m,"class","fas fa-times"),h(f,"href","#"),We(f,"float","right"),h(f,"data-action","removePanel"),h(f,"class","remove-panel svelte-fp3tbt"),h(f,"data-number",b=e[42].number),h(l,"data-name",d=e[42].name),h(l,"class","svelte-fp3tbt"),h(p,"class","rows svelte-fp3tbt"),h(L,"href","#"),h(L,"data-action","addRow"),h(L,"class","svelte-fp3tbt"),h(w,"class","svelte-fp3tbt"),h(n,"data-number",S=e[42].number),h(n,"class","panel-layout svelte-fp3tbt"),this.first=n},m(F,z){G(F,n,z),y(n,l),y(l,i),y(i,o),y(l,r),y(l,u),y(l,c),y(l,f),y(f,m),y(n,v),y(n,p);for(let me=0;me<g.length;me+=1)g[me]&&g[me].m(p,null);y(n,_),y(n,w),y(w,L),y(n,T),M||(C=[te(u,"click",je(le)),te(f,"click",je(ue)),te(p,"mousedown",Vt(aa)),te(L,"click",je(Z))],M=!0)},p(F,z){e=F,z[0]&2&&a!==(a=(e[42].customLabel||e[42].label||"")+"")&&Oe(o,a),z[0]&2&&s!==(s=e[42].customLabel?"true":void 0)&&h(i,"data-is-custom",s),z[0]&2&&b!==(b=e[42].number)&&h(f,"data-number",b),z[0]&2&&d!==(d=e[42].name)&&h(l,"data-name",d),z[0]&3842&&(V=de(e[42].rows),g=Mn(g,z,U,1,e,V,k,p,Nn,Il,null,Ll)),z[0]&2&&S!==(S=e[42].number)&&h(n,"data-number",S)},d(F){F&&W(n);for(let z=0;z<g.length;z+=1)g[z].d();M=!1,Ie(C)}}}function Fl(t){let e,n=t[39].label+"",l,i,a,o,s;function r(...u){return t[23](t[39],...u)}return{c(){e=D("li"),l=ce(n),i=q(),h(e,"class","cell svelte-fp3tbt"),h(e,"data-name",a=t[39].name)},m(u,c){G(u,e,c),y(e,l),y(e,i),o||(s=te(e,"dragstart",r),o=!0)},p(u,c){t=u,c[0]&4&&n!==(n=t[39].label+"")&&Oe(l,n),c[0]&4&&a!==(a=t[39].name)&&h(e,"data-name",a)},d(u){u&&W(e),o=!1,s()}}}function ea(t){let e,n,l,i,a,o,s,r,u=[],c=new Map,f,m,b,d,v,p,g,k,_=de(t[1]);const w=S=>S[42].number;for(let S=0;S<_.length;S+=1){let M=Pl(t,_,S),C=w(M);c.set(C,u[S]=Ol(C,M))}let L=de(t[2]),T=[];for(let S=0;S<L.length;S+=1)T[S]=Fl(Tl(t,L,S));return{c(){e=D("div"),n=D("div"),l=D("div"),i=D("header"),i.textContent=`${Y.translate("Layout","LayoutManager")}`,a=q(),o=D("a"),o.textContent=`${Y.translate("Add Panel","Admin")}`,s=q(),r=D("ul");for(let S=0;S<u.length;S+=1)u[S].c();f=q(),m=D("div"),b=D("div"),d=D("header"),d.textContent=`${Y.translate("Available Fields","Admin")}`,v=q(),p=D("ul");for(let S=0;S<T.length;S+=1)T[S].c();h(i,"class","svelte-fp3tbt"),h(o,"href","#"),h(o,"class","svelte-fp3tbt"),h(r,"class","panels svelte-fp3tbt"),h(l,"class","well svelte-fp3tbt"),h(n,"class","col-md-8 svelte-fp3tbt"),h(d,"class","svelte-fp3tbt"),h(p,"class","disabled cells clearfix svelte-fp3tbt"),h(b,"class","well svelte-fp3tbt"),h(m,"class","col-md-4 svelte-fp3tbt"),h(e,"id","layout"),h(e,"class","row svelte-fp3tbt")},m(S,M){G(S,e,M),y(e,n),y(n,l),y(l,i),y(l,a),y(l,o),y(l,s),y(l,r);for(let C=0;C<u.length;C+=1)u[C]&&u[C].m(r,null);y(e,f),y(e,m),y(m,b),y(b,d),y(b,v),y(b,p);for(let C=0;C<T.length;C+=1)T[C]&&T[C].m(p,null);g||(k=te(o,"click",je(t[5])),g=!0)},p(S,M){if(M[0]&4034&&(_=de(S[1]),u=Mn(u,M,w,1,S,_,c,r,Nn,Ol,null,Pl)),M[0]&4){L=de(S[2]);let C;for(C=0;C<L.length;C+=1){const le=Tl(S,L,C);T[C]?T[C].p(le,M):(T[C]=Fl(le),T[C].c(),T[C].m(p,null))}for(;C<T.length;C+=1)T[C].d(1);T.length=L.length}},d(S){S&&W(e);for(let M=0;M<u.length;M+=1)u[M].d();dt(T,S),g=!1,k()}}}function ta(t){let e,n;return e=new Vn({props:{params:t[0],validate:t[12],fetch:t[4],loadLayout:t[3],$$slots:{default:[ea]},$$scope:{ctx:t}}}),{c(){Ge(e.$$.fragment)},m(l,i){Ne(e,l,i),n=!0},p(l,i){const a={};i[0]&1&&(a.params=l[0]),i[0]&6|i[1]&1048576&&(a.$$scope={dirty:i,ctx:l}),e.$set(a)},i(l){n||(Ee(e.$$.fragment,l),n=!0)},o(l){Fe(e.$$.fragment,l),n=!1},d(l){Me(e,l)}}}function na(t,e){return e.some(n=>n.name===t)}function ha(t){}const la=t=>t.dataTransfer.dropEffect="move",ia=()=>{},aa=()=>{};function oa(t,e,n){let{params:l}=e,{columnCount:i=2}=e,{layoutDisabledParameter:a="layoutDetailDisabled"}=e,o=["modifiedAt","createdAt","modifiedBy","createdBy","assignedUser","ownerUser","teams"],s=[],r=[],u=-1,c=-1,f;Ln();function m(P){let A,R;const B=[];B.push(new Promise(H=>{It.create(l.scope,$=>{He.get(l.scope,l.type,l.layoutProfileId,Q=>{A=Q,R=$,H()},!1)})})),["detail","detailSmall"].includes(l.type)&&B.push(new Promise(H=>{He.get(l.scope,"sidePanels"+Espo.utils.upperCaseFirst(l.type),l.layoutProfileId,$=>{f=$,H()},!1)})),Promise.all(B).then(()=>{b(R,A),g(),On().then(()=>{_()}),P&&P()})}function b(P,A){let R=[];const B=[];for(const Q in P.defs.fields)d(P,Q)&&(B.push(Y.translate(Q,"fields",l.scope)),R.push(Q));const H=B.filter((Q,pe)=>B.indexOf(Q)!==pe);let $=[];n(2,r=[]),n(1,s=A),A.forEach((Q,pe)=>{Q.rows.forEach((ee,Ae)=>{ee&&ee.forEach((we,ze)=>{if(ze==i||!we)return;let Ze=Y.translate(we.name,"fields",l.scope);H.includes(Ze)&&(Ze+=` (${we.name})`),$.push({name:we.name,label:Ze}),n(1,s[pe].rows[Ae][ze].label=Ze,s)})})}),R.sort((Q,pe)=>Y.translate(Q,"fields",l.scope).localeCompare(Y.translate(pe,"fields",l.scope)));for(const Q in R)if(!na(R[Q],$)){const pe=R[Q];let ee=Y.translate(pe,"fields",l.scope);H.includes(ee)&&(ee+=` (${pe})`),r.push({name:pe,label:ee})}}function d(P,A){return v()&&o.includes(A)?!1:!P.getFieldParam(A,"disabled")&&!P.getFieldParam(A,a)}function v(){if(Ue.get(["clientDefs",l.scope,"defaultSidePanelDisabled"]))return!1;if(f){for(const P in f)if(P==="default"&&f[P].disabled)return!1}return!0}function p(){return s.map(P=>({...P,rows:P.rows.map(A=>A.cells)}))}function g(){u=-1,c=-1,n(1,s=s.map((P,A)=>(P.number=A,u=A,P.rows=P.rows.map(R=>({number:c++,cells:R})),P)))}function k(P){I.create(P,{animation:150,group:"rows",draggable:"li.row",onEnd(A){const R=parseInt(A.to.closest(".panel-layout").getAttribute("data-number")),B=parseInt(A.from.closest(".panel-layout").getAttribute("data-number"));if(B===R)n(1,s=s.map(H=>{if(H.number===R){const[$]=H.rows.splice(A.oldIndex,1);H.rows.splice(A.newIndex,0,$)}return H}));else{const $=s.find(Q=>Q.number===B).rows[A.oldIndex];n(1,s=s.map(Q=>(Q.number===B&&Q.rows.splice(A.oldIndex,1),Q.number===R&&Q.rows.splice(A.newIndex,0,$),Q)))}console.log(s)}})}function _(){I.create(document.querySelector("ul.panels"),{animation:150,group:"panels",draggable:"li.panel-layout",onEnd(P){const A=Array.from(P.to.children);n(1,s=A.map(R=>{const B=parseInt(R.getAttribute("data-number"));return s.find(H=>H.number===B)})),console.log(s)}}),document.querySelectorAll("ul.rows").forEach(P=>{k(P)}),document.querySelectorAll("ul.cells.disabled").forEach(P=>{I.create(P,{animation:150,group:"cells",draggable:"li.cell"})})}function w(){u++;const P={label:"New panel",rows:[{number:c++,cells:[!1,!1]}],number:u,name:`panel${u}`,isCustomLabel:!0};n(1,s=[...s,P]),On().then(()=>{const A=document.querySelector(`.panel-layout[data-number="${P.number}"] > .rows`);k(A)})}function L(P){const A=s.find(B=>B.number===P);n(1,s=s.filter(B=>B!==A));let R=[];A.rows.forEach(B=>{B.cells.forEach(H=>{H&&R.push(H)})}),n(2,r=[...r,...R])}function T(P){n(1,s=s.map(A=>(A.number===P&&(A.rows=[...A.rows,{number:c++,cells:Array(i).fill(!1)}]),A)))}function S(P,A){n(1,s=s.map(R=>{if(R.number===P){const B=R.rows.find(H=>H.number===A);R.rows=R.rows.filter(H=>H!=B),n(2,r=[...r,...B.cells.filter(H=>!!H)])}return R}))}function M(P,A,R){n(1,s=s.map(B=>(B.number===P&&(B.rows=B.rows.map((H,$)=>{if(H.number===A){const Q=H.cells[R];Q&&n(2,r=[...r,Q]),H.cells[R]=!1}return H})),B)))}function C(P,A,R,B){const H=P.dataTransfer.getData("name");let $=r.find(ee=>ee.name===H),Q=null,pe=null;if($)n(2,r=r.filter(ee=>ee!==$));else{if(s.forEach(ee=>{ee.rows.forEach((Ae,we)=>{Ae.cells.forEach(ze=>{ze&&ze.name===H&&($=ze,Q=Ae.number,pe=ee.number)})})}),!$)return;n(1,s=s.map((ee,Ae)=>(pe===ee.number&&(ee.rows=ee.rows.map((we,ze)=>(we.number===Q&&(we.cells=we.cells.map((Ze,ma)=>Ze&&Ze.name===H?!1:Ze)),we))),ee)))}n(1,s=s.map(ee=>(A===ee.number&&(ee.rows=ee.rows.map(Ae=>(R===Ae.number&&(Ae.cells=Ae.cells.map((we,ze)=>ze===B?($.fullWidth&&delete $.fullWidth,$):we)),Ae))),ee))),console.log(s)}function le(P,A,R){i<2||(n(1,s=s.map(B=>(P===B.number&&(B.rows=B.rows.map(H=>{if(A===H.number){const $=H.cells.filter((Q,pe)=>pe!==R);$.length===1&&($[0].fullWidth=!0),H.cells=$}return H})),B))),n(13,i--,i))}function ue(P){let A=0;return P.forEach(R=>{R.rows.forEach(B=>{B.forEach(H=>{H&&A++})})}),A===0?(Re.notify("Layout cannot be empty.","error"),!1):!0}const V=P=>(P.number,void 0),U=P=>L(P.number),Z=(P,A)=>S(P.number,A.number),F=(P,A,R)=>M(P.number,A.number,R),z=(P,A)=>{A.dataTransfer.setData("name",P.name)},me=(P,A,R)=>le(P.number,A.number,R),et=(P,A,R,B)=>C(B,P.number,A.number,R),vn=P=>T(P.number),Nl=(P,A)=>{A.dataTransfer.setData("name",P.name)};return t.$$set=P=>{"params"in P&&n(0,l=P.params),"columnCount"in P&&n(13,i=P.columnCount),"layoutDisabledParameter"in P&&n(14,a=P.layoutDisabledParameter)},[l,s,r,m,p,w,L,T,S,M,C,le,ue,i,a,V,U,Z,F,z,me,et,vn,Nl]}class ra extends Se{constructor(e){super(),De(this,e,oa,ta,ve,{params:0,columnCount:13,layoutDisabledParameter:14},null,[-1,-1])}}function sa(t){let e,n;return e=new t[1]({props:{params:t[0],layoutDisabledParameter:t[2],viewType:t[3]}}),{c(){Ge(e.$$.fragment)},m(l,i){Ne(e,l,i),n=!0},p(l,[i]){const a={};i&1&&(a.params=l[0]),i&4&&(a.layoutDisabledParameter=l[2]),i&8&&(a.viewType=l[3]),e.$set(a)},i(l){n||(Ee(e.$$.fragment,l),n=!0)},o(l){Fe(e.$$.fragment,l),n=!1},d(l){Me(e,l)}}}function ua(t,e,n){let{params:l}=e,i,a,o;return t.$$set=s=>{"params"in s&&n(0,l=s.params)},t.$$.update=()=>{if(t.$$.dirty&1)switch(l.type){case"list":case"listSmall":n(2,a=l.type==="list"?"layoutListDisabled":"layoutListSmallDisabled"),n(1,i=kl);break;case"kanban":n(1,i=kl),n(0,l.dataAttributeList=["id","name","link","align","view","isLarge","cssStyle"],l),n(0,l.dataAttributesDefs={link:{type:"bool"},isLarge:{type:"bool"},width:{type:"float"},cssStyle:{type:"varchar"},align:{type:"enum",options:["left","right"]},view:{type:"varchar",readOnly:!0},name:{type:"varchar",readOnly:!0}},l);break;case"relationships":n(1,i=Ji);break;case"detail":case"detailSmall":n(1,i=ra);break;case"sidePanelsDetail":n(3,o="detail"),n(1,i=Qt);break;case"sidePanelsDetailSmall":n(3,o="detailSmall"),n(1,i=Qt);break;case"sidePanelsEdit":n(3,o="edit"),n(1,i=Qt);break;case"sidePanelsEditSmall":n(3,o="editSmall"),n(1,i=Qt);break}},[l,i,a,o]}class fa extends Se{constructor(e){super(),De(this,e,ua,sa,ve,{params:0})}}window.SvelteLanguage=Y,window.SvelteUserData=Bn,window.SvelteNotifier=Re,window.SvelteLayoutManager=He,window.SvelteMetadata=Ue,window.SvelteModelFactory=It,fe.LayoutComponent=fa,fe.QueueManagerIcon=ni,fe.UpdatePanel=ui,Object.defineProperty(fe,Symbol.toStringTag,{value:"Module"})});
