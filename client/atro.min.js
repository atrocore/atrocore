(function(fe,K){typeof exports=="object"&&typeof module<"u"?K(exports):typeof define=="function"&&define.amd?define(["exports"],K):(fe=typeof globalThis<"u"?globalThis:fe||self,K(fe.Svelte={}))})(this,function(fe){"use strict";var ca=Object.defineProperty;var da=(fe,K,Xe)=>K in fe?ca(fe,K,{enumerable:!0,configurable:!0,writable:!0,value:Xe}):fe[K]=Xe;var wn=(fe,K,Xe)=>da(fe,typeof K!="symbol"?K+"":K,Xe);function K(){}function Xe(t,e){for(const n in e)t[n]=e[n];return t}function En(t){return t()}function Dn(){return Object.create(null)}function Oe(t){t.forEach(En)}function Sn(t){return typeof t=="function"}function ye(t,e){return t!=t?e==e:t!==e||t&&typeof t=="object"||typeof t=="function"}let kt;function kn(t,e){return t===e?!0:(kt||(kt=document.createElement("a")),kt.href=e,t===kt.href)}function Ml(t){return Object.keys(t).length===0}function Rl(t,e,n,l){if(t){const i=Tn(t,e,n,l);return t[0](i)}}function Tn(t,e,n,l){return t[1]&&l?Xe(n.ctx.slice(),t[1](l(e))):n.ctx}function Hl(t,e,n,l){if(t[2]&&l){const i=t[2](l(n));if(e.dirty===void 0)return i;if(typeof i=="object"){const a=[],o=Math.max(e.dirty.length,i.length);for(let r=0;r<o;r+=1)a[r]=e.dirty[r]|i[r];return a}return e.dirty|i}return e.dirty}function Bl(t,e,n,l,i,a){if(i){const o=Tn(e,n,l,a);t.p(o,i)}}function Yl(t){if(t.ctx.length>32){const e=[],n=t.ctx.length/32;for(let l=0;l<n;l++)e[l]=-1;return e}return-1}function v(t,e){t.appendChild(e)}function G(t,e,n){t.insertBefore(e,n||null)}function W(t){t.parentNode&&t.parentNode.removeChild(t)}function dt(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}function k(t){return document.createElement(t)}function ce(t){return document.createTextNode(t)}function q(){return ce(" ")}function Pn(){return ce("")}function ne(t,e,n,l){return t.addEventListener(e,n,l),()=>t.removeEventListener(e,n,l)}function je(t){return function(e){return e.preventDefault(),t.call(this,e)}}function Vt(t){return function(e){return e.stopPropagation(),t.call(this,e)}}function m(t,e,n){n==null?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}const ql=["width","height"];function Tt(t,e){const n=Object.getOwnPropertyDescriptors(t.__proto__);for(const l in e)e[l]==null?t.removeAttribute(l):l==="style"?t.style.cssText=e[l]:l==="__value"?t.value=t[l]=e[l]:n[l]&&n[l].set&&ql.indexOf(l)===-1?t[l]=e[l]:m(t,l,e[l])}function zl(t){return Array.from(t.childNodes)}function Fe(t,e){e=""+e,t.data!==e&&(t.data=e)}function We(t,e,n,l){n==null?t.style.removeProperty(e):t.style.setProperty(e,n,"")}function Pt(t,e,n){t.classList.toggle(e,!!n)}function Xl(t,e,{bubbles:n=!1,cancelable:l=!1}={}){return new CustomEvent(t,{detail:e,bubbles:n,cancelable:l})}let ht;function mt(t){ht=t}function Lt(){if(!ht)throw new Error("Function called outside component initialization");return ht}function Kt(t){Lt().$$.on_mount.push(t)}function jl(t){Lt().$$.after_update.push(t)}function Ln(t){Lt().$$.on_destroy.push(t)}function Cn(){const t=Lt();return(e,n,{cancelable:l=!1}={})=>{const i=t.$$.callbacks[e];if(i){const a=Xl(e,n,{cancelable:l});return i.slice().forEach(o=>{o.call(t,a)}),!a.defaultPrevented}return!0}}const tt=[],Le=[];let nt=[];const In=[],An=Promise.resolve();let Zt=!1;function On(){Zt||(Zt=!0,An.then(Nn))}function Fn(){return On(),An}function Jt(t){nt.push(t)}const xt=new Set;let lt=0;function Nn(){if(lt!==0)return;const t=ht;do{try{for(;lt<tt.length;){const e=tt[lt];lt++,mt(e),Wl(e.$$)}}catch(e){throw tt.length=0,lt=0,e}for(mt(null),tt.length=0,lt=0;Le.length;)Le.pop()();for(let e=0;e<nt.length;e+=1){const n=nt[e];xt.has(n)||(xt.add(n),n())}nt.length=0}while(tt.length);for(;In.length;)In.pop()();Zt=!1,xt.clear(),mt(t)}function Wl(t){if(t.fragment!==null){t.update(),Oe(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(Jt)}}function Gl(t){const e=[],n=[];nt.forEach(l=>t.indexOf(l)===-1?e.push(l):n.push(l)),n.forEach(l=>l()),nt=e}const Ct=new Set;let Ul;function De(t,e){t&&t.i&&(Ct.delete(t),t.i(e))}function Ne(t,e,n,l){if(t&&t.o){if(Ct.has(t))return;Ct.add(t),Ul.c.push(()=>{Ct.delete(t)}),t.o(e)}}function de(t){return(t==null?void 0:t.length)!==void 0?t:Array.from(t)}function Mn(t,e){t.d(1),e.delete(t.key)}function Rn(t,e,n,l,i,a,o,r,s,u,c,f){let p=t.length,g=a.length,d=p;const w={};for(;d--;)w[t[d].key]=d;const b=[],h=new Map,y=new Map,E=[];for(d=g;d--;){const _=f(i,a,d),L=n(_);let P=o.get(L);P?E.push(()=>P.p(_,e)):(P=u(L,_),P.c()),h.set(L,b[d]=P),L in w&&y.set(L,Math.abs(d-w[L]))}const D=new Set,T=new Set;function I(_){De(_,1),_.m(r,c),o.set(_.key,_),c=_.first,g--}for(;p&&g;){const _=b[g-1],L=t[p-1],P=_.key,J=L.key;_===L?(c=_.first,p--,g--):h.has(J)?!o.has(P)||D.has(P)?I(_):T.has(J)?p--:y.get(P)>y.get(J)?(T.add(P),I(_)):(D.add(J),p--):(s(L,o),p--)}for(;p--;){const _=t[p];h.has(_.key)||s(_,o)}for(;g;)I(b[g-1]);return Oe(E),b}function Hn(t,e){const n={},l={},i={$$scope:1};let a=t.length;for(;a--;){const o=t[a],r=e[a];if(r){for(const s in o)s in r||(l[s]=1);for(const s in r)i[s]||(n[s]=r[s],i[s]=1);t[a]=r}else for(const s in o)i[s]=1}for(const o in l)o in n||(n[o]=void 0);return n}function Ge(t){t&&t.c()}function Me(t,e,n){const{fragment:l,after_update:i}=t.$$;l&&l.m(e,n),Jt(()=>{const a=t.$$.on_mount.map(En).filter(Sn);t.$$.on_destroy?t.$$.on_destroy.push(...a):Oe(a),t.$$.on_mount=[]}),i.forEach(Jt)}function Re(t,e){const n=t.$$;n.fragment!==null&&(Gl(n.after_update),Oe(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function Ql(t,e){t.$$.dirty[0]===-1&&(tt.push(t),On(),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function Se(t,e,n,l,i,a,o=null,r=[-1]){const s=ht;mt(t);const u=t.$$={fragment:null,ctx:[],props:a,update:K,not_equal:i,bound:Dn(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(s?s.$$.context:[])),callbacks:Dn(),dirty:r,skip_bound:!1,root:e.target||s.$$.root};o&&o(u.root);let c=!1;if(u.ctx=n?n(t,e.props||{},(f,p,...g)=>{const d=g.length?g[0]:p;return u.ctx&&i(u.ctx[f],u.ctx[f]=d)&&(!u.skip_bound&&u.bound[f]&&u.bound[f](d),c&&Ql(t,f)),p}):[],u.update(),c=!0,Oe(u.before_update),u.fragment=l?l(u.ctx):!1,e.target){if(e.hydrate){const f=zl(e.target);u.fragment&&u.fragment.l(f),f.forEach(W)}else u.fragment&&u.fragment.c();e.intro&&De(t.$$.fragment),Me(t,e.target,e.anchor),Nn()}mt(s)}class ke{constructor(){wn(this,"$$");wn(this,"$$set")}$destroy(){Re(this,1),this.$destroy=K}$on(e,n){if(!Sn(n))return K;const l=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return l.push(n),()=>{const i=l.indexOf(n);i!==-1&&l.splice(i,1)}}$set(e){this.$$set&&!Ml(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}const Vl="4",it=[];function at(t,e=K){let n;const l=new Set;function i(r){if(ye(t,r)&&(t=r,n)){const s=!it.length;for(const u of l)u[1](),it.push(u,t);if(s){for(let u=0;u<it.length;u+=2)it[u][0](it[u+1]);it.length=0}}}function a(r){i(r(t))}function o(r,s=K){const u=[r,s];return l.add(u),l.size===1&&(n=e(i,a)||K),r(t),()=>{l.delete(u),l.size===0&&n&&(n(),n=null)}}return{set:i,update:a,subscribe:o}}const $t=at({}),Y={setTranslations(t){$t.set(t)},has(t,e,n){let l=!1;return $t.subscribe(i=>{if(n in i&&e in i[n]&&t in i[n][e]){l=!0;return}})(),l},get(t,e,n){let l=n;return $t.subscribe(i=>{if(t in i&&e in i[t]&&n in i[t][e]){l=i[t][e][n];return}if(t in i&&e in i[t]&&n in i[t][e]){l=i[t][e][n];return}if(t=="Global"){l=n;return}l=null})(),l},translate(t,e=null,n=null){n=n||"Global",e=e||"labels";let l=Y.get(n,e,t);return l===null&&n!="Global"&&(l=Y.get("Global",e,t)),l},translateOption(t,e,n=null){let l=Y.translate(e,"options",n);return l===null?"":typeof l=="object"?l[t]:t}},Bn=at({}),Yn={set(t){Bn.set(t)},get(){let t=null;return Bn.subscribe(e=>{e&&(t=e)})(),t}},en=at(),ge={setNotifier(t){en.set(t)},notify(t,e=null,n=2e3){en.subscribe(l=>{l&&l.notify(t,e,2e3)})()},confirm(t=null,e=null,n){en.subscribe(l=>{if(l){let i=null,a=null,o=null;typeof t=="string"||t instanceof String?(a=t,o=Y.translate("Yes")):(t=t||{},a=t.message,o=t.confirmText,i=t.confirmStyle||null),l.confirm(a,{confirmText:o,cancelText:Y.translate("Cancel"),confirmStyle:i},e,n)}})()}},It=at(),He={setLayoutManager(t){It.set(t)},resetToDefault(t,e,n,l){let i=null;return It.subscribe(a=>{a&&(i=a.resetToDefault(t,e,n,l))})(),i},get:function(t,e,n,l,i){let a=null;return It.subscribe(o=>{o&&(a=o.get(t,e,n,l,i))})(),a},set:function(t,e,n,l,i){let a=null;return It.subscribe(o=>{o&&(a=o.set(t,e,n,l,i))})(),a}},qn=at(),Ue={setMetadata(t){qn.set(t)},get(t){qn.subscribe(e=>{e&&e.get(t)})()}},zn=at(),At={setModelFactory(t){zn.set(t)},create(t,e){zn.subscribe(n=>{n&&n.create(t,e)})()}};typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(Vl);function Xn(t){let e,n,l,i,a,o,r,s,u,c,f,p,g,d,w;function b(E,D){return E[2]?Zl:Kl}let h=b(t),y=h(t);return{c(){e=k("div"),n=k("div"),l=k("div"),i=k("span"),i.textContent=`${Y.translate("queueManager","labels","QueueItem")}`,a=q(),o=k("span"),r=k("a"),r.innerHTML='<span aria-hidden="true">Ã—</span>',s=q(),y.c(),u=q(),c=k("a"),c.textContent=`${Y.translate("View List")}`,f=q(),p=k("div"),g=k("div"),g.textContent=`${Y.translate("Loading...")}`,m(i,"class","panel-heading-title"),m(r,"href","/"),m(r,"class","close svelte-1p6ppx8"),m(c,"href","#QueueItem"),m(c,"title",Y.translate("View List")),m(c,"class","qp-view-list svelte-1p6ppx8"),m(o,"class","pull-right"),m(l,"class","panel-heading clearfix"),m(g,"class","list-container"),m(p,"class","panel-body"),m(n,"class","panel panel-default"),m(e,"class","queue-panel-container")},m(E,D){G(E,e,D),v(e,n),v(n,l),v(l,i),v(l,a),v(l,o),v(o,r),v(o,s),y.m(o,null),v(o,u),v(o,c),v(n,f),v(n,p),v(p,g),t[9](e),d||(w=ne(r,"click",t[6]),d=!0)},p(E,D){h===(h=b(E))&&y?y.p(E,D):(y.d(1),y=h(E),y&&(y.c(),y.m(o,u)))},d(E){E&&W(e),y.d(),t[9](null),d=!1,w()}}}function Kl(t){let e,n,l;return{c(){e=k("a"),e.textContent=`${Y.translate("Pause")}`,m(e,"href","/"),m(e,"title",Y.translate("Pause")),m(e,"class","qm-button")},m(i,a){G(i,e,a),n||(l=ne(e,"click",t[8]),n=!0)},p:K,d(i){i&&W(e),n=!1,l()}}}function Zl(t){let e,n,l;return{c(){e=k("a"),e.textContent=`${Y.translate("Start")}`,m(e,"href","/"),m(e,"title",Y.translate("Start")),m(e,"class","qm-button")},m(i,a){G(i,e,a),n||(l=ne(e,"click",t[7]),n=!0)},p:K,d(i){i&&W(e),n=!1,l()}}}function Jl(t){let e,n=t[0]&&Xn(t);return{c(){n&&n.c(),e=Pn()},m(l,i){n&&n.m(l,i),G(l,e,i)},p(l,[i]){l[0]?n?n.p(l,i):(n=Xn(l),n.c(),n.m(e.parentNode,e)):n&&(n.d(1),n=null)},i:K,o:K,d(l){l&&W(e),n&&n.d(l)}}}function xl(t,e,n){let{isOpen:l=!1}=e,{close:i}=e,{icon:a}=e,o=!1;window.addEventListener("publicDataFetched",d=>{n(2,o=!!d.detail.qmPaused)});let r;function s(d){r&&!r.contains(d.target)&&a&&!a.contains(d.target)&&l===!0&&i()}Kt(()=>{document.addEventListener("click",s)}),Ln(()=>{document.removeEventListener("click",s)});async function u(d){let w=Yn.get();if(w)try{const b=await fetch("/api/v1/App/action/QueueManagerUpdate",{method:"POST",headers:{"Content-Type":"application/json","Authorization-Token":btoa(w.user.userName+":"+w.token)},body:JSON.stringify({pause:d})});if(!b.ok)throw new Error("Network response was not ok");await b.json(),ge.notify("Done","success")}catch(b){console.error("Error:",b)}}const c=d=>{d.preventDefault(),i()},f=d=>{d.preventDefault(),u(!1)},p=d=>{d.preventDefault(),u(!0)};function g(d){Le[d?"unshift":"push"](()=>{r=d,n(3,r)})}return t.$$set=d=>{"isOpen"in d&&n(0,l=d.isOpen),"close"in d&&n(1,i=d.close),"icon"in d&&n(5,a=d.icon)},[l,i,o,r,u,a,c,f,p,g]}class $l extends ke{constructor(e){super(),Se(this,e,xl,Jl,ye,{isOpen:0,close:1,icon:5})}}function jn(t){let e;return{c(){e=k("span"),m(e,"class","fas fa-pause-circle pause-icon")},m(n,l){G(n,e,l)},d(n){n&&W(e)}}}function ei(t){let e,n,l,i,a,o,r,s,u=t[2]&&jn();return a=new $l({props:{icon:t[0],isOpen:t[1],close:t[4]}}),{c(){e=k("a"),n=k("span"),l=q(),u&&u.c(),i=q(),Ge(a.$$.fragment),m(n,"class","fas fa-tasks"),m(e,"href","/"),m(e,"class","notifications-button")},m(c,f){G(c,e,f),v(e,n),v(e,l),u&&u.m(e,null),t[6](e),G(c,i,f),Me(a,c,f),o=!0,r||(s=ne(e,"click",t[7]),r=!0)},p(c,[f]){c[2]?u||(u=jn(),u.c(),u.m(e,null)):u&&(u.d(1),u=null);const p={};f&1&&(p.icon=c[0]),f&2&&(p.isOpen=c[1]),a.$set(p)},i(c){o||(De(a.$$.fragment,c),o=!0)},o(c){Ne(a.$$.fragment,c),o=!1},d(c){c&&(W(e),W(i)),u&&u.d(),t[6](null),Re(a,c),r=!1,s()}}}function ti(t,e,n){let{renderTable:l=()=>{}}=e,i,a=!1,o=!1;window.addEventListener("publicDataFetched",f=>{n(2,o=!!f.detail.qmPaused)});function r(){a||(n(1,a=!0),l())}function s(){n(1,a=!1),window.dispatchEvent(new Event("qmPanelClosed"))}function u(f){Le[f?"unshift":"push"](()=>{i=f,n(0,i)})}const c=f=>{f.preventDefault(),r()};return t.$$set=f=>{"renderTable"in f&&n(5,l=f.renderTable)},[i,a,o,r,s,l,u,c]}class ni extends ke{constructor(e){super(),Se(this,e,ti,ei,ye,{renderTable:5})}}function li(t){let e,n=`${t[0]}px`,l=`${t[0]}px`,i=`${t[1]}px`;return{c(){e=k("div"),m(e,"class","loading-icon spinner svelte-yw8t7l"),We(e,"width",n),We(e,"height",l),We(e,"border-width",i)},m(a,o){G(a,e,o)},p(a,[o]){o&1&&n!==(n=`${a[0]}px`)&&We(e,"width",n),o&1&&l!==(l=`${a[0]}px`)&&We(e,"height",l),o&2&&i!==(i=`${a[1]}px`)&&We(e,"border-width",i)},i:K,o:K,d(a){a&&W(e)}}}function ii(t,e,n){let{size:l=40}=e,{thickness:i=4}=e;return t.$$set=a=>{"size"in a&&n(0,l=a.size),"thickness"in a&&n(1,i=a.thickness)},[l,i]}class ai extends ke{constructor(e){super(),Se(this,e,ii,li,ye,{size:0,thickness:1})}}function Wn(t){let e,n;return{c(){e=k("img"),kn(e.src,n=t[1])||m(e,"src",n),m(e,"class","logo"),m(e,"alt",t[0])},m(l,i){G(l,e,i)},p(l,i){i&2&&!kn(e.src,n=l[1])&&m(e,"src",n),i&1&&m(e,"alt",l[0])},d(l){l&&W(e)}}}function Gn(t){let e,n,l;return{c(){e=k("a"),n=k("i"),l=ce("Recovery Instructions"),m(n,"class","fa fa-history svelte-1qmezxs"),m(e,"href",t[2]),m(e,"target","_blank"),m(e,"class","btn btn-default svelte-1qmezxs"),m(e,"role","button"),We(e,"float","right")},m(i,a){G(i,e,a),v(e,n),v(e,l)},p(i,a){a&4&&m(e,"href",i[2])},d(i){i&&W(e)}}}function Un(t){let e,n,l,i,a,o;return{c(){e=k("hr"),n=q(),l=k("pre"),i=ce(t[3]),m(l,"class","logs-container svelte-1qmezxs")},m(r,s){G(r,e,s),G(r,n,s),G(r,l,s),v(l,i),t[11](l),a||(o=ne(l,"scroll",t[8]),a=!0)},p(r,s){s&8&&Fe(i,r[3])},d(r){r&&(W(e),W(n),W(l)),t[11](null),a=!1,o()}}}function oi(t){let e,n,l,i,a,o,r,s,u,c,f,p,g,d,w,b,h,y,E=t[4]?"Hide":"Show",D,T,I,_,L,P,J,ue,V=t[1]&&Wn(t);c=new ai({props:{size:"40",thickness:"5"}});let U=t[2]&&Gn(t),Z=t[4]&&t[3]&&Un(t);return{c(){e=k("div"),n=k("div"),l=k("div"),V&&V.c(),i=q(),a=k("div"),o=k("div"),r=k("h3"),r.textContent="System is updating...",s=q(),u=k("section"),Ge(c.$$.fragment),f=q(),p=k("h5"),g=ce(t[5]),d=q(),w=k("section"),b=k("div"),h=k("button"),y=k("i"),D=ce(E),T=ce(" logs"),_=q(),U&&U.c(),L=q(),Z&&Z.c(),m(l,"class","logo-container"),m(n,"class","panel-heading"),m(p,"class","svelte-1qmezxs"),m(u,"class","progress-section svelte-1qmezxs"),m(y,"class","fa fa-list svelte-1qmezxs"),m(h,"class","btn btn-default svelte-1qmezxs"),h.disabled=I=!t[3],m(b,"class","buttons"),m(w,"class","logs-section"),m(o,"class","form-group"),m(a,"class","panel-body"),m(e,"id","login"),m(e,"class","panel panel-default panel-updating")},m(N,z){G(N,e,z),v(e,n),v(n,l),V&&V.m(l,null),v(e,i),v(e,a),v(a,o),v(o,r),v(o,s),v(o,u),Me(c,u,null),v(u,f),v(u,p),v(p,g),v(o,d),v(o,w),v(w,b),v(b,h),v(h,y),v(h,D),v(h,T),v(b,_),U&&U.m(b,null),v(w,L),Z&&Z.m(w,null),P=!0,J||(ue=ne(h,"click",t[7]),J=!0)},p(N,[z]){N[1]?V?V.p(N,z):(V=Wn(N),V.c(),V.m(l,null)):V&&(V.d(1),V=null),(!P||z&32)&&Fe(g,N[5]),(!P||z&16)&&E!==(E=N[4]?"Hide":"Show")&&Fe(D,E),(!P||z&8&&I!==(I=!N[3]))&&(h.disabled=I),N[2]?U?U.p(N,z):(U=Gn(N),U.c(),U.m(b,null)):U&&(U.d(1),U=null),N[4]&&N[3]?Z?Z.p(N,z):(Z=Un(N),Z.c(),Z.m(w,null)):Z&&(Z.d(1),Z=null)},i(N){P||(De(c.$$.fragment,N),P=!0)},o(N){Ne(c.$$.fragment,N),P=!1},d(N){N&&W(e),V&&V.d(),Re(c),U&&U.d(),Z&&Z.d(),J=!1,ue()}}}function ri(t){return t.replace(/^\d{2,4}.\d{2}.\d{2,4} \d{2}:\d{2}:\d{2}/g,"").replace(/^[\-\|\s]+/,"")}function si(t,e,n){let{applicationName:l="AtroCore"}=e,{logoPath:i=null}=e,{logFilePath:a}=e,{restoreLink:o=null}=e,r=!1,s=!1,u=0,c=!0,f="",p,g;jl(()=>{g&&c&&g.scrollTo(0,g.scrollHeight)});function d(){n(4,r=!r),r||(c=!0)}function w(h){const y=h.currentTarget;c=y.scrollHeight-y.scrollTop===y.clientHeight}setInterval(async()=>{try{const h=await fetch(a,{cache:"no-store"});u+=1,h.ok?(n(3,f=(await h.text()).trim()),f.search("composer")>=0&&n(10,s=!0),u>65&&!s&&n(3,f="Something wrong. Please, reboot the server.")):s?setTimeout(()=>{location.reload()},2e3):u>65&&n(3,f="Something wrong. Please, reboot the server.")}catch(h){console.error("Error: ",h)}},1e3);function b(h){Le[h?"unshift":"push"](()=>{g=h,n(6,g)})}return t.$$set=h=>{"applicationName"in h&&n(0,l=h.applicationName),"logoPath"in h&&n(1,i=h.logoPath),"logFilePath"in h&&n(9,a=h.logFilePath),"restoreLink"in h&&n(2,o=h.restoreLink)},t.$$.update=()=>{if(t.$$.dirty&1032)if(f){const h=f.trim().split(`
`);n(5,p=ri(h.pop()))}else s?n(5,p=""):n(5,p="Starting...")},[l,i,o,f,r,p,g,d,w,a,s,b]}class ui extends ke{constructor(e){super(),Se(this,e,si,oi,ye,{applicationName:0,logoPath:1,logFilePath:9,restoreLink:2})}}function Qn(t,e,n){const l=t.slice();return l[17]=e[n],l}function Vn(t){let e,n=t[17].label+"",l,i,a,o,r,s,u;function c(){return t[10](t[17])}return{c(){e=k("button"),l=ce(n),i=q(),m(e,"data-action",a=t[17].name),e.disabled=o=t[17].disabled,m(e,"type","button"),m(e,"class",r=`btn action btn-${t[17].style??"default"}`)},m(f,p){G(f,e,p),v(e,l),v(e,i),s||(u=ne(e,"click",c),s=!0)},p(f,p){t=f,p&1&&n!==(n=t[17].label+"")&&Fe(l,n),p&1&&a!==(a=t[17].name)&&m(e,"data-action",a),p&1&&o!==(o=t[17].disabled)&&(e.disabled=o),p&1&&r!==(r=`btn action btn-${t[17].style??"default"}`)&&m(e,"class",r)},d(f){f&&W(e),s=!1,u()}}}function fi(t){let e,n,l,i=de(t[0]),a=[];for(let s=0;s<i.length;s+=1)a[s]=Vn(Qn(t,i,s));const o=t[9].default,r=Rl(o,t,t[8],null);return{c(){e=k("div");for(let s=0;s<a.length;s+=1)a[s].c();n=q(),r&&r.c(),m(e,"class","button-container")},m(s,u){G(s,e,u);for(let c=0;c<a.length;c+=1)a[c]&&a[c].m(e,null);G(s,n,u),r&&r.m(s,u),l=!0},p(s,[u]){if(u&3){i=de(s[0]);let c;for(c=0;c<i.length;c+=1){const f=Qn(s,i,c);a[c]?a[c].p(f,u):(a[c]=Vn(f),a[c].c(),a[c].m(e,null))}for(;c<a.length;c+=1)a[c].d(1);a.length=i.length}r&&r.p&&(!l||u&256)&&Bl(r,o,s,s[8],l?Hl(o,s[8],u,null):Yl(s[8]),null)},i(s){l||(De(r,s),l=!0)},o(s){Ne(r,s),l=!1},d(s){s&&(W(e),W(n)),dt(a,s),r&&r.d(s)}}}function ci(t,e,n){let{$$slots:l={},$$scope:i}=e,{params:a}=e,{fetch:o}=e,{loadLayout:r=()=>{He.get(scope,type,layoutProfileId,D=>{layout=D},!1)}}=e,{validate:s=()=>!0}=e;function u(D){c("openEditDialog",D)}const c=Cn();let f=[{name:"save",label:"Save",style:"primary"},{name:"cancel",label:"Cancel"},{name:"resetToDefault",label:"Reset to Default"}];Kt(()=>{r()});function p(){b();const D=o();if(!s(D)){h();return}ge.notify("Saving..."),He.set(a.scope,a.type,a.layoutProfileId,D,()=>{ge.notify("Saved","success",2e3),g(),h()})}function g(){console.log("emit update");const D=new CustomEvent("layoutUpdated",{detail:{scope:a.scope,type:a.type,layoutProfileId:a.layoutProfileId}});window.dispatchEvent(D)}function d(){r()}function w(){ge.confirm("Are you sure you want to reset to default?",()=>{He.resetToDefault(a.scope,a.type,a.layoutProfileId,()=>{g(),d()})})}function b(){n(0,f=f.map(D=>({...D,disabled:!0})))}function h(){n(0,f=f.map(D=>({...D,disabled:!1})))}function y(D){switch(D.name){case"save":p();break;case"cancel":d();break;case"resetToDefault":w();break}}const E=D=>y(D);return t.$$set=D=>{"params"in D&&n(2,a=D.params),"fetch"in D&&n(3,o=D.fetch),"loadLayout"in D&&n(4,r=D.loadLayout),"validate"in D&&n(5,s=D.validate),"$$scope"in D&&n(8,i=D.$$scope)},[f,y,a,o,r,s,u,p,i,l,E]}class Kn extends ke{constructor(e){super(),Se(this,e,ci,fi,ye,{params:2,fetch:3,loadLayout:4,validate:5,openEditDialog:6,save:7})}get openEditDialog(){return this.$$.ctx[6]}get save(){return this.$$.ctx[7]}}/**!
 * Sortable 1.15.2
 * @author	RubaXa   <trash@rubaxa.org>
 * @author	owenm    <owen23355@gmail.com>
 * @license MIT
 */function Zn(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(t);e&&(l=l.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,l)}return n}function Ce(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Zn(Object(n),!0).forEach(function(l){di(t,l,n[l])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Zn(Object(n)).forEach(function(l){Object.defineProperty(t,l,Object.getOwnPropertyDescriptor(n,l))})}return t}function Ot(t){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Ot=function(e){return typeof e}:Ot=function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ot(t)}function di(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Be(){return Be=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var l in n)Object.prototype.hasOwnProperty.call(n,l)&&(t[l]=n[l])}return t},Be.apply(this,arguments)}function hi(t,e){if(t==null)return{};var n={},l=Object.keys(t),i,a;for(a=0;a<l.length;a++)i=l[a],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}function mi(t,e){if(t==null)return{};var n=hi(t,e),l,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)l=a[i],!(e.indexOf(l)>=0)&&Object.prototype.propertyIsEnumerable.call(t,l)&&(n[l]=t[l])}return n}var pi="1.15.2";function Ye(t){if(typeof window<"u"&&window.navigator)return!!navigator.userAgent.match(t)}var qe=Ye(/(?:Trident.*rv[ :]?11\.|msie|iemobile|Windows Phone)/i),pt=Ye(/Edge/i),Jn=Ye(/firefox/i),gt=Ye(/safari/i)&&!Ye(/chrome/i)&&!Ye(/android/i),xn=Ye(/iP(ad|od|hone)/i),$n=Ye(/chrome/i)&&Ye(/android/i),el={capture:!1,passive:!1};function j(t,e,n){t.addEventListener(e,n,!qe&&el)}function X(t,e,n){t.removeEventListener(e,n,!qe&&el)}function Ft(t,e){if(e){if(e[0]===">"&&(e=e.substring(1)),t)try{if(t.matches)return t.matches(e);if(t.msMatchesSelector)return t.msMatchesSelector(e);if(t.webkitMatchesSelector)return t.webkitMatchesSelector(e)}catch{return!1}return!1}}function gi(t){return t.host&&t!==document&&t.host.nodeType?t.host:t.parentNode}function Te(t,e,n,l){if(t){n=n||document;do{if(e!=null&&(e[0]===">"?t.parentNode===n&&Ft(t,e):Ft(t,e))||l&&t===n)return t;if(t===n)break}while(t=gi(t))}return null}var tl=/\s+/g;function be(t,e,n){if(t&&e)if(t.classList)t.classList[n?"add":"remove"](e);else{var l=(" "+t.className+" ").replace(tl," ").replace(" "+e+" "," ");t.className=(l+(n?" "+e:"")).replace(tl," ")}}function F(t,e,n){var l=t&&t.style;if(l){if(n===void 0)return document.defaultView&&document.defaultView.getComputedStyle?n=document.defaultView.getComputedStyle(t,""):t.currentStyle&&(n=t.currentStyle),e===void 0?n:n[e];!(e in l)&&e.indexOf("webkit")===-1&&(e="-webkit-"+e),l[e]=n+(typeof n=="string"?"":"px")}}function ot(t,e){var n="";if(typeof t=="string")n=t;else do{var l=F(t,"transform");l&&l!=="none"&&(n=l+" "+n)}while(!e&&(t=t.parentNode));var i=window.DOMMatrix||window.WebKitCSSMatrix||window.CSSMatrix||window.MSCSSMatrix;return i&&new i(n)}function nl(t,e,n){if(t){var l=t.getElementsByTagName(e),i=0,a=l.length;if(n)for(;i<a;i++)n(l[i],i);return l}return[]}function Ie(){var t=document.scrollingElement;return t||document.documentElement}function ie(t,e,n,l,i){if(!(!t.getBoundingClientRect&&t!==window)){var a,o,r,s,u,c,f;if(t!==window&&t.parentNode&&t!==Ie()?(a=t.getBoundingClientRect(),o=a.top,r=a.left,s=a.bottom,u=a.right,c=a.height,f=a.width):(o=0,r=0,s=window.innerHeight,u=window.innerWidth,c=window.innerHeight,f=window.innerWidth),(e||n)&&t!==window&&(i=i||t.parentNode,!qe))do if(i&&i.getBoundingClientRect&&(F(i,"transform")!=="none"||n&&F(i,"position")!=="static")){var p=i.getBoundingClientRect();o-=p.top+parseInt(F(i,"border-top-width")),r-=p.left+parseInt(F(i,"border-left-width")),s=o+a.height,u=r+a.width;break}while(i=i.parentNode);if(l&&t!==window){var g=ot(i||t),d=g&&g.a,w=g&&g.d;g&&(o/=w,r/=d,f/=d,c/=w,s=o+c,u=r+f)}return{top:o,left:r,bottom:s,right:u,width:f,height:c}}}function ll(t,e,n){for(var l=Qe(t,!0),i=ie(t)[e];l;){var a=ie(l)[n],o=void 0;if(o=i>=a,!o)return l;if(l===Ie())break;l=Qe(l,!1)}return!1}function rt(t,e,n,l){for(var i=0,a=0,o=t.children;a<o.length;){if(o[a].style.display!=="none"&&o[a]!==O.ghost&&(l||o[a]!==O.dragged)&&Te(o[a],n.draggable,t,!1)){if(i===e)return o[a];i++}a++}return null}function tn(t,e){for(var n=t.lastElementChild;n&&(n===O.ghost||F(n,"display")==="none"||e&&!Ft(n,e));)n=n.previousElementSibling;return n||null}function we(t,e){var n=0;if(!t||!t.parentNode)return-1;for(;t=t.previousElementSibling;)t.nodeName.toUpperCase()!=="TEMPLATE"&&t!==O.clone&&(!e||Ft(t,e))&&n++;return n}function il(t){var e=0,n=0,l=Ie();if(t)do{var i=ot(t),a=i.a,o=i.d;e+=t.scrollLeft*a,n+=t.scrollTop*o}while(t!==l&&(t=t.parentNode));return[e,n]}function bi(t,e){for(var n in t)if(t.hasOwnProperty(n)){for(var l in e)if(e.hasOwnProperty(l)&&e[l]===t[n][l])return Number(n)}return-1}function Qe(t,e){if(!t||!t.getBoundingClientRect)return Ie();var n=t,l=!1;do if(n.clientWidth<n.scrollWidth||n.clientHeight<n.scrollHeight){var i=F(n);if(n.clientWidth<n.scrollWidth&&(i.overflowX=="auto"||i.overflowX=="scroll")||n.clientHeight<n.scrollHeight&&(i.overflowY=="auto"||i.overflowY=="scroll")){if(!n.getBoundingClientRect||n===document.body)return Ie();if(l||e)return n;l=!0}}while(n=n.parentNode);return Ie()}function _i(t,e){if(t&&e)for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t}function nn(t,e){return Math.round(t.top)===Math.round(e.top)&&Math.round(t.left)===Math.round(e.left)&&Math.round(t.height)===Math.round(e.height)&&Math.round(t.width)===Math.round(e.width)}var bt;function al(t,e){return function(){if(!bt){var n=arguments,l=this;n.length===1?t.call(l,n[0]):t.apply(l,n),bt=setTimeout(function(){bt=void 0},e)}}}function vi(){clearTimeout(bt),bt=void 0}function ol(t,e,n){t.scrollLeft+=e,t.scrollTop+=n}function rl(t){var e=window.Polymer,n=window.jQuery||window.Zepto;return e&&e.dom?e.dom(t).cloneNode(!0):n?n(t).clone(!0)[0]:t.cloneNode(!0)}function sl(t,e,n){var l={};return Array.from(t.children).forEach(function(i){var a,o,r,s;if(!(!Te(i,e.draggable,t,!1)||i.animated||i===n)){var u=ie(i);l.left=Math.min((a=l.left)!==null&&a!==void 0?a:1/0,u.left),l.top=Math.min((o=l.top)!==null&&o!==void 0?o:1/0,u.top),l.right=Math.max((r=l.right)!==null&&r!==void 0?r:-1/0,u.right),l.bottom=Math.max((s=l.bottom)!==null&&s!==void 0?s:-1/0,u.bottom)}}),l.width=l.right-l.left,l.height=l.bottom-l.top,l.x=l.left,l.y=l.top,l}var _e="Sortable"+new Date().getTime();function yi(){var t=[],e;return{captureAnimationState:function(){if(t=[],!!this.options.animation){var l=[].slice.call(this.el.children);l.forEach(function(i){if(!(F(i,"display")==="none"||i===O.ghost)){t.push({target:i,rect:ie(i)});var a=Ce({},t[t.length-1].rect);if(i.thisAnimationDuration){var o=ot(i,!0);o&&(a.top-=o.f,a.left-=o.e)}i.fromRect=a}})}},addAnimationState:function(l){t.push(l)},removeAnimationState:function(l){t.splice(bi(t,{target:l}),1)},animateAll:function(l){var i=this;if(!this.options.animation){clearTimeout(e),typeof l=="function"&&l();return}var a=!1,o=0;t.forEach(function(r){var s=0,u=r.target,c=u.fromRect,f=ie(u),p=u.prevFromRect,g=u.prevToRect,d=r.rect,w=ot(u,!0);w&&(f.top-=w.f,f.left-=w.e),u.toRect=f,u.thisAnimationDuration&&nn(p,f)&&!nn(c,f)&&(d.top-f.top)/(d.left-f.left)===(c.top-f.top)/(c.left-f.left)&&(s=Ei(d,p,g,i.options)),nn(f,c)||(u.prevFromRect=c,u.prevToRect=f,s||(s=i.options.animation),i.animate(u,d,f,s)),s&&(a=!0,o=Math.max(o,s),clearTimeout(u.animationResetTimer),u.animationResetTimer=setTimeout(function(){u.animationTime=0,u.prevFromRect=null,u.fromRect=null,u.prevToRect=null,u.thisAnimationDuration=null},s),u.thisAnimationDuration=s)}),clearTimeout(e),a?e=setTimeout(function(){typeof l=="function"&&l()},o):typeof l=="function"&&l(),t=[]},animate:function(l,i,a,o){if(o){F(l,"transition",""),F(l,"transform","");var r=ot(this.el),s=r&&r.a,u=r&&r.d,c=(i.left-a.left)/(s||1),f=(i.top-a.top)/(u||1);l.animatingX=!!c,l.animatingY=!!f,F(l,"transform","translate3d("+c+"px,"+f+"px,0)"),this.forRepaintDummy=wi(l),F(l,"transition","transform "+o+"ms"+(this.options.easing?" "+this.options.easing:"")),F(l,"transform","translate3d(0,0,0)"),typeof l.animated=="number"&&clearTimeout(l.animated),l.animated=setTimeout(function(){F(l,"transition",""),F(l,"transform",""),l.animated=!1,l.animatingX=!1,l.animatingY=!1},o)}}}}function wi(t){return t.offsetWidth}function Ei(t,e,n,l){return Math.sqrt(Math.pow(e.top-t.top,2)+Math.pow(e.left-t.left,2))/Math.sqrt(Math.pow(e.top-n.top,2)+Math.pow(e.left-n.left,2))*l.animation}var st=[],ln={initializeByDefault:!0},_t={mount:function(e){for(var n in ln)ln.hasOwnProperty(n)&&!(n in e)&&(e[n]=ln[n]);st.forEach(function(l){if(l.pluginName===e.pluginName)throw"Sortable: Cannot mount plugin ".concat(e.pluginName," more than once")}),st.push(e)},pluginEvent:function(e,n,l){var i=this;this.eventCanceled=!1,l.cancel=function(){i.eventCanceled=!0};var a=e+"Global";st.forEach(function(o){n[o.pluginName]&&(n[o.pluginName][a]&&n[o.pluginName][a](Ce({sortable:n},l)),n.options[o.pluginName]&&n[o.pluginName][e]&&n[o.pluginName][e](Ce({sortable:n},l)))})},initializePlugins:function(e,n,l,i){st.forEach(function(r){var s=r.pluginName;if(!(!e.options[s]&&!r.initializeByDefault)){var u=new r(e,n,e.options);u.sortable=e,u.options=e.options,e[s]=u,Be(l,u.defaults)}});for(var a in e.options)if(e.options.hasOwnProperty(a)){var o=this.modifyOption(e,a,e.options[a]);typeof o<"u"&&(e.options[a]=o)}},getEventProperties:function(e,n){var l={};return st.forEach(function(i){typeof i.eventProperties=="function"&&Be(l,i.eventProperties.call(n[i.pluginName],e))}),l},modifyOption:function(e,n,l){var i;return st.forEach(function(a){e[a.pluginName]&&a.optionListeners&&typeof a.optionListeners[n]=="function"&&(i=a.optionListeners[n].call(e[a.pluginName],l))}),i}};function Di(t){var e=t.sortable,n=t.rootEl,l=t.name,i=t.targetEl,a=t.cloneEl,o=t.toEl,r=t.fromEl,s=t.oldIndex,u=t.newIndex,c=t.oldDraggableIndex,f=t.newDraggableIndex,p=t.originalEvent,g=t.putSortable,d=t.extraEventProperties;if(e=e||n&&n[_e],!!e){var w,b=e.options,h="on"+l.charAt(0).toUpperCase()+l.substr(1);window.CustomEvent&&!qe&&!pt?w=new CustomEvent(l,{bubbles:!0,cancelable:!0}):(w=document.createEvent("Event"),w.initEvent(l,!0,!0)),w.to=o||n,w.from=r||n,w.item=i||n,w.clone=a,w.oldIndex=s,w.newIndex=u,w.oldDraggableIndex=c,w.newDraggableIndex=f,w.originalEvent=p,w.pullMode=g?g.lastPutMode:void 0;var y=Ce(Ce({},d),_t.getEventProperties(l,e));for(var E in y)w[E]=y[E];n&&n.dispatchEvent(w),b[h]&&b[h].call(e,w)}}var Si=["evt"],he=function(e,n){var l=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},i=l.evt,a=mi(l,Si);_t.pluginEvent.bind(O)(e,n,Ce({dragEl:S,parentEl:le,ghostEl:M,rootEl:x,nextEl:Je,lastDownEl:Nt,cloneEl:$,cloneHidden:Ve,dragStarted:yt,putSortable:oe,activeSortable:O.active,originalEvent:i,oldIndex:ut,oldDraggableIndex:vt,newIndex:ve,newDraggableIndex:Ke,hideGhostForTarget:pl,unhideGhostForTarget:gl,cloneNowHidden:function(){Ve=!0},cloneNowShown:function(){Ve=!1},dispatchSortableEvent:function(r){se({sortable:n,name:r,originalEvent:i})}},a))};function se(t){Di(Ce({putSortable:oe,cloneEl:$,targetEl:S,rootEl:x,oldIndex:ut,oldDraggableIndex:vt,newIndex:ve,newDraggableIndex:Ke},t))}var S,le,M,x,Je,Nt,$,Ve,ut,ve,vt,Ke,Mt,oe,ft=!1,Rt=!1,Ht=[],xe,Pe,an,on,ul,fl,yt,ct,wt,Et=!1,Bt=!1,Yt,re,rn=[],sn=!1,qt=[],zt=typeof document<"u",Xt=xn,cl=pt||qe?"cssFloat":"float",ki=zt&&!$n&&!xn&&"draggable"in document.createElement("div"),dl=function(){if(zt){if(qe)return!1;var t=document.createElement("x");return t.style.cssText="pointer-events:auto",t.style.pointerEvents==="auto"}}(),hl=function(e,n){var l=F(e),i=parseInt(l.width)-parseInt(l.paddingLeft)-parseInt(l.paddingRight)-parseInt(l.borderLeftWidth)-parseInt(l.borderRightWidth),a=rt(e,0,n),o=rt(e,1,n),r=a&&F(a),s=o&&F(o),u=r&&parseInt(r.marginLeft)+parseInt(r.marginRight)+ie(a).width,c=s&&parseInt(s.marginLeft)+parseInt(s.marginRight)+ie(o).width;if(l.display==="flex")return l.flexDirection==="column"||l.flexDirection==="column-reverse"?"vertical":"horizontal";if(l.display==="grid")return l.gridTemplateColumns.split(" ").length<=1?"vertical":"horizontal";if(a&&r.float&&r.float!=="none"){var f=r.float==="left"?"left":"right";return o&&(s.clear==="both"||s.clear===f)?"vertical":"horizontal"}return a&&(r.display==="block"||r.display==="flex"||r.display==="table"||r.display==="grid"||u>=i&&l[cl]==="none"||o&&l[cl]==="none"&&u+c>i)?"vertical":"horizontal"},Ti=function(e,n,l){var i=l?e.left:e.top,a=l?e.right:e.bottom,o=l?e.width:e.height,r=l?n.left:n.top,s=l?n.right:n.bottom,u=l?n.width:n.height;return i===r||a===s||i+o/2===r+u/2},Pi=function(e,n){var l;return Ht.some(function(i){var a=i[_e].options.emptyInsertThreshold;if(!(!a||tn(i))){var o=ie(i),r=e>=o.left-a&&e<=o.right+a,s=n>=o.top-a&&n<=o.bottom+a;if(r&&s)return l=i}}),l},ml=function(e){function n(a,o){return function(r,s,u,c){var f=r.options.group.name&&s.options.group.name&&r.options.group.name===s.options.group.name;if(a==null&&(o||f))return!0;if(a==null||a===!1)return!1;if(o&&a==="clone")return a;if(typeof a=="function")return n(a(r,s,u,c),o)(r,s,u,c);var p=(o?r:s).options.group.name;return a===!0||typeof a=="string"&&a===p||a.join&&a.indexOf(p)>-1}}var l={},i=e.group;(!i||Ot(i)!="object")&&(i={name:i}),l.name=i.name,l.checkPull=n(i.pull,!0),l.checkPut=n(i.put),l.revertClone=i.revertClone,e.group=l},pl=function(){!dl&&M&&F(M,"display","none")},gl=function(){!dl&&M&&F(M,"display","")};zt&&!$n&&document.addEventListener("click",function(t){if(Rt)return t.preventDefault(),t.stopPropagation&&t.stopPropagation(),t.stopImmediatePropagation&&t.stopImmediatePropagation(),Rt=!1,!1},!0);var $e=function(e){if(S){e=e.touches?e.touches[0]:e;var n=Pi(e.clientX,e.clientY);if(n){var l={};for(var i in e)e.hasOwnProperty(i)&&(l[i]=e[i]);l.target=l.rootEl=n,l.preventDefault=void 0,l.stopPropagation=void 0,n[_e]._onDragOver(l)}}},Li=function(e){S&&S.parentNode[_e]._isOutsideThisEl(e.target)};function O(t,e){if(!(t&&t.nodeType&&t.nodeType===1))throw"Sortable: `el` must be an HTMLElement, not ".concat({}.toString.call(t));this.el=t,this.options=e=Be({},e),t[_e]=this;var n={group:null,sort:!0,disabled:!1,store:null,handle:null,draggable:/^[uo]l$/i.test(t.nodeName)?">li":">*",swapThreshold:1,invertSwap:!1,invertedSwapThreshold:null,removeCloneOnHide:!0,direction:function(){return hl(t,this.options)},ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",dragClass:"sortable-drag",ignore:"a, img",filter:null,preventOnFilter:!0,animation:0,easing:null,setData:function(o,r){o.setData("Text",r.textContent)},dropBubble:!1,dragoverBubble:!1,dataIdAttr:"data-id",delay:0,delayOnTouchOnly:!1,touchStartThreshold:(Number.parseInt?Number:window).parseInt(window.devicePixelRatio,10)||1,forceFallback:!1,fallbackClass:"sortable-fallback",fallbackOnBody:!1,fallbackTolerance:0,fallbackOffset:{x:0,y:0},supportPointer:O.supportPointer!==!1&&"PointerEvent"in window&&!gt,emptyInsertThreshold:5};_t.initializePlugins(this,t,n);for(var l in n)!(l in e)&&(e[l]=n[l]);ml(e);for(var i in this)i.charAt(0)==="_"&&typeof this[i]=="function"&&(this[i]=this[i].bind(this));this.nativeDraggable=e.forceFallback?!1:ki,this.nativeDraggable&&(this.options.touchStartThreshold=1),e.supportPointer?j(t,"pointerdown",this._onTapStart):(j(t,"mousedown",this._onTapStart),j(t,"touchstart",this._onTapStart)),this.nativeDraggable&&(j(t,"dragover",this),j(t,"dragenter",this)),Ht.push(this.el),e.store&&e.store.get&&this.sort(e.store.get(this)||[]),Be(this,yi())}O.prototype={constructor:O,_isOutsideThisEl:function(e){!this.el.contains(e)&&e!==this.el&&(ct=null)},_getDirection:function(e,n){return typeof this.options.direction=="function"?this.options.direction.call(this,e,n,S):this.options.direction},_onTapStart:function(e){if(e.cancelable){var n=this,l=this.el,i=this.options,a=i.preventOnFilter,o=e.type,r=e.touches&&e.touches[0]||e.pointerType&&e.pointerType==="touch"&&e,s=(r||e).target,u=e.target.shadowRoot&&(e.path&&e.path[0]||e.composedPath&&e.composedPath()[0])||s,c=i.filter;if(Ri(l),!S&&!(/mousedown|pointerdown/.test(o)&&e.button!==0||i.disabled)&&!u.isContentEditable&&!(!this.nativeDraggable&&gt&&s&&s.tagName.toUpperCase()==="SELECT")&&(s=Te(s,i.draggable,l,!1),!(s&&s.animated)&&Nt!==s)){if(ut=we(s),vt=we(s,i.draggable),typeof c=="function"){if(c.call(this,e,s,this)){se({sortable:n,rootEl:u,name:"filter",targetEl:s,toEl:l,fromEl:l}),he("filter",n,{evt:e}),a&&e.cancelable&&e.preventDefault();return}}else if(c&&(c=c.split(",").some(function(f){if(f=Te(u,f.trim(),l,!1),f)return se({sortable:n,rootEl:f,name:"filter",targetEl:s,fromEl:l,toEl:l}),he("filter",n,{evt:e}),!0}),c)){a&&e.cancelable&&e.preventDefault();return}i.handle&&!Te(u,i.handle,l,!1)||this._prepareDragStart(e,r,s)}}},_prepareDragStart:function(e,n,l){var i=this,a=i.el,o=i.options,r=a.ownerDocument,s;if(l&&!S&&l.parentNode===a){var u=ie(l);if(x=a,S=l,le=S.parentNode,Je=S.nextSibling,Nt=l,Mt=o.group,O.dragged=S,xe={target:S,clientX:(n||e).clientX,clientY:(n||e).clientY},ul=xe.clientX-u.left,fl=xe.clientY-u.top,this._lastX=(n||e).clientX,this._lastY=(n||e).clientY,S.style["will-change"]="all",s=function(){if(he("delayEnded",i,{evt:e}),O.eventCanceled){i._onDrop();return}i._disableDelayedDragEvents(),!Jn&&i.nativeDraggable&&(S.draggable=!0),i._triggerDragStart(e,n),se({sortable:i,name:"choose",originalEvent:e}),be(S,o.chosenClass,!0)},o.ignore.split(",").forEach(function(c){nl(S,c.trim(),un)}),j(r,"dragover",$e),j(r,"mousemove",$e),j(r,"touchmove",$e),j(r,"mouseup",i._onDrop),j(r,"touchend",i._onDrop),j(r,"touchcancel",i._onDrop),Jn&&this.nativeDraggable&&(this.options.touchStartThreshold=4,S.draggable=!0),he("delayStart",this,{evt:e}),o.delay&&(!o.delayOnTouchOnly||n)&&(!this.nativeDraggable||!(pt||qe))){if(O.eventCanceled){this._onDrop();return}j(r,"mouseup",i._disableDelayedDrag),j(r,"touchend",i._disableDelayedDrag),j(r,"touchcancel",i._disableDelayedDrag),j(r,"mousemove",i._delayedDragTouchMoveHandler),j(r,"touchmove",i._delayedDragTouchMoveHandler),o.supportPointer&&j(r,"pointermove",i._delayedDragTouchMoveHandler),i._dragStartTimer=setTimeout(s,o.delay)}else s()}},_delayedDragTouchMoveHandler:function(e){var n=e.touches?e.touches[0]:e;Math.max(Math.abs(n.clientX-this._lastX),Math.abs(n.clientY-this._lastY))>=Math.floor(this.options.touchStartThreshold/(this.nativeDraggable&&window.devicePixelRatio||1))&&this._disableDelayedDrag()},_disableDelayedDrag:function(){S&&un(S),clearTimeout(this._dragStartTimer),this._disableDelayedDragEvents()},_disableDelayedDragEvents:function(){var e=this.el.ownerDocument;X(e,"mouseup",this._disableDelayedDrag),X(e,"touchend",this._disableDelayedDrag),X(e,"touchcancel",this._disableDelayedDrag),X(e,"mousemove",this._delayedDragTouchMoveHandler),X(e,"touchmove",this._delayedDragTouchMoveHandler),X(e,"pointermove",this._delayedDragTouchMoveHandler)},_triggerDragStart:function(e,n){n=n||e.pointerType=="touch"&&e,!this.nativeDraggable||n?this.options.supportPointer?j(document,"pointermove",this._onTouchMove):n?j(document,"touchmove",this._onTouchMove):j(document,"mousemove",this._onTouchMove):(j(S,"dragend",this),j(x,"dragstart",this._onDragStart));try{document.selection?Wt(function(){document.selection.empty()}):window.getSelection().removeAllRanges()}catch{}},_dragStarted:function(e,n){if(ft=!1,x&&S){he("dragStarted",this,{evt:n}),this.nativeDraggable&&j(document,"dragover",Li);var l=this.options;!e&&be(S,l.dragClass,!1),be(S,l.ghostClass,!0),O.active=this,e&&this._appendGhost(),se({sortable:this,name:"start",originalEvent:n})}else this._nulling()},_emulateDragOver:function(){if(Pe){this._lastX=Pe.clientX,this._lastY=Pe.clientY,pl();for(var e=document.elementFromPoint(Pe.clientX,Pe.clientY),n=e;e&&e.shadowRoot&&(e=e.shadowRoot.elementFromPoint(Pe.clientX,Pe.clientY),e!==n);)n=e;if(S.parentNode[_e]._isOutsideThisEl(e),n)do{if(n[_e]){var l=void 0;if(l=n[_e]._onDragOver({clientX:Pe.clientX,clientY:Pe.clientY,target:e,rootEl:n}),l&&!this.options.dragoverBubble)break}e=n}while(n=n.parentNode);gl()}},_onTouchMove:function(e){if(xe){var n=this.options,l=n.fallbackTolerance,i=n.fallbackOffset,a=e.touches?e.touches[0]:e,o=M&&ot(M,!0),r=M&&o&&o.a,s=M&&o&&o.d,u=Xt&&re&&il(re),c=(a.clientX-xe.clientX+i.x)/(r||1)+(u?u[0]-rn[0]:0)/(r||1),f=(a.clientY-xe.clientY+i.y)/(s||1)+(u?u[1]-rn[1]:0)/(s||1);if(!O.active&&!ft){if(l&&Math.max(Math.abs(a.clientX-this._lastX),Math.abs(a.clientY-this._lastY))<l)return;this._onDragStart(e,!0)}if(M){o?(o.e+=c-(an||0),o.f+=f-(on||0)):o={a:1,b:0,c:0,d:1,e:c,f};var p="matrix(".concat(o.a,",").concat(o.b,",").concat(o.c,",").concat(o.d,",").concat(o.e,",").concat(o.f,")");F(M,"webkitTransform",p),F(M,"mozTransform",p),F(M,"msTransform",p),F(M,"transform",p),an=c,on=f,Pe=a}e.cancelable&&e.preventDefault()}},_appendGhost:function(){if(!M){var e=this.options.fallbackOnBody?document.body:x,n=ie(S,!0,Xt,!0,e),l=this.options;if(Xt){for(re=e;F(re,"position")==="static"&&F(re,"transform")==="none"&&re!==document;)re=re.parentNode;re!==document.body&&re!==document.documentElement?(re===document&&(re=Ie()),n.top+=re.scrollTop,n.left+=re.scrollLeft):re=Ie(),rn=il(re)}M=S.cloneNode(!0),be(M,l.ghostClass,!1),be(M,l.fallbackClass,!0),be(M,l.dragClass,!0),F(M,"transition",""),F(M,"transform",""),F(M,"box-sizing","border-box"),F(M,"margin",0),F(M,"top",n.top),F(M,"left",n.left),F(M,"width",n.width),F(M,"height",n.height),F(M,"opacity","0.8"),F(M,"position",Xt?"absolute":"fixed"),F(M,"zIndex","100000"),F(M,"pointerEvents","none"),O.ghost=M,e.appendChild(M),F(M,"transform-origin",ul/parseInt(M.style.width)*100+"% "+fl/parseInt(M.style.height)*100+"%")}},_onDragStart:function(e,n){var l=this,i=e.dataTransfer,a=l.options;if(he("dragStart",this,{evt:e}),O.eventCanceled){this._onDrop();return}he("setupClone",this),O.eventCanceled||($=rl(S),$.removeAttribute("id"),$.draggable=!1,$.style["will-change"]="",this._hideClone(),be($,this.options.chosenClass,!1),O.clone=$),l.cloneId=Wt(function(){he("clone",l),!O.eventCanceled&&(l.options.removeCloneOnHide||x.insertBefore($,S),l._hideClone(),se({sortable:l,name:"clone"}))}),!n&&be(S,a.dragClass,!0),n?(Rt=!0,l._loopId=setInterval(l._emulateDragOver,50)):(X(document,"mouseup",l._onDrop),X(document,"touchend",l._onDrop),X(document,"touchcancel",l._onDrop),i&&(i.effectAllowed="move",a.setData&&a.setData.call(l,i,S)),j(document,"drop",l),F(S,"transform","translateZ(0)")),ft=!0,l._dragStartId=Wt(l._dragStarted.bind(l,n,e)),j(document,"selectstart",l),yt=!0,gt&&F(document.body,"user-select","none")},_onDragOver:function(e){var n=this.el,l=e.target,i,a,o,r=this.options,s=r.group,u=O.active,c=Mt===s,f=r.sort,p=oe||u,g,d=this,w=!1;if(sn)return;function b(et,yn){he(et,d,Ce({evt:e,isOwner:c,axis:g?"vertical":"horizontal",revert:o,dragRect:i,targetRect:a,canSort:f,fromSortable:p,target:l,completed:y,onMove:function(C,A){return jt(x,n,S,i,C,ie(C),e,A)},changed:E},yn))}function h(){b("dragOverAnimationCapture"),d.captureAnimationState(),d!==p&&p.captureAnimationState()}function y(et){return b("dragOverCompleted",{insertion:et}),et&&(c?u._hideClone():u._showClone(d),d!==p&&(be(S,oe?oe.options.ghostClass:u.options.ghostClass,!1),be(S,r.ghostClass,!0)),oe!==d&&d!==O.active?oe=d:d===O.active&&oe&&(oe=null),p===d&&(d._ignoreWhileAnimating=l),d.animateAll(function(){b("dragOverAnimationComplete"),d._ignoreWhileAnimating=null}),d!==p&&(p.animateAll(),p._ignoreWhileAnimating=null)),(l===S&&!S.animated||l===n&&!l.animated)&&(ct=null),!r.dragoverBubble&&!e.rootEl&&l!==document&&(S.parentNode[_e]._isOutsideThisEl(e.target),!et&&$e(e)),!r.dragoverBubble&&e.stopPropagation&&e.stopPropagation(),w=!0}function E(){ve=we(S),Ke=we(S,r.draggable),se({sortable:d,name:"change",toEl:n,newIndex:ve,newDraggableIndex:Ke,originalEvent:e})}if(e.preventDefault!==void 0&&e.cancelable&&e.preventDefault(),l=Te(l,r.draggable,n,!0),b("dragOver"),O.eventCanceled)return w;if(S.contains(e.target)||l.animated&&l.animatingX&&l.animatingY||d._ignoreWhileAnimating===l)return y(!1);if(Rt=!1,u&&!r.disabled&&(c?f||(o=le!==x):oe===this||(this.lastPutMode=Mt.checkPull(this,u,S,e))&&s.checkPut(this,u,S,e))){if(g=this._getDirection(e,l)==="vertical",i=ie(S),b("dragOverValid"),O.eventCanceled)return w;if(o)return le=x,h(),this._hideClone(),b("revert"),O.eventCanceled||(Je?x.insertBefore(S,Je):x.appendChild(S)),y(!0);var D=tn(n,r.draggable);if(!D||Oi(e,g,this)&&!D.animated){if(D===S)return y(!1);if(D&&n===e.target&&(l=D),l&&(a=ie(l)),jt(x,n,S,i,l,a,e,!!l)!==!1)return h(),D&&D.nextSibling?n.insertBefore(S,D.nextSibling):n.appendChild(S),le=n,E(),y(!0)}else if(D&&Ai(e,g,this)){var T=rt(n,0,r,!0);if(T===S)return y(!1);if(l=T,a=ie(l),jt(x,n,S,i,l,a,e,!1)!==!1)return h(),n.insertBefore(S,T),le=n,E(),y(!0)}else if(l.parentNode===n){a=ie(l);var I=0,_,L=S.parentNode!==n,P=!Ti(S.animated&&S.toRect||i,l.animated&&l.toRect||a,g),J=g?"top":"left",ue=ll(l,"top","top")||ll(S,"top","top"),V=ue?ue.scrollTop:void 0;ct!==l&&(_=a[J],Et=!1,Bt=!P&&r.invertSwap||L),I=Fi(e,l,a,g,P?1:r.swapThreshold,r.invertedSwapThreshold==null?r.swapThreshold:r.invertedSwapThreshold,Bt,ct===l);var U;if(I!==0){var Z=we(S);do Z-=I,U=le.children[Z];while(U&&(F(U,"display")==="none"||U===M))}if(I===0||U===l)return y(!1);ct=l,wt=I;var N=l.nextElementSibling,z=!1;z=I===1;var me=jt(x,n,S,i,l,a,e,z);if(me!==!1)return(me===1||me===-1)&&(z=me===1),sn=!0,setTimeout(Ii,30),h(),z&&!N?n.appendChild(S):l.parentNode.insertBefore(S,z?N:l),ue&&ol(ue,0,V-ue.scrollTop),le=S.parentNode,_!==void 0&&!Bt&&(Yt=Math.abs(_-ie(l)[J])),E(),y(!0)}if(n.contains(S))return y(!1)}return!1},_ignoreWhileAnimating:null,_offMoveEvents:function(){X(document,"mousemove",this._onTouchMove),X(document,"touchmove",this._onTouchMove),X(document,"pointermove",this._onTouchMove),X(document,"dragover",$e),X(document,"mousemove",$e),X(document,"touchmove",$e)},_offUpEvents:function(){var e=this.el.ownerDocument;X(e,"mouseup",this._onDrop),X(e,"touchend",this._onDrop),X(e,"pointerup",this._onDrop),X(e,"touchcancel",this._onDrop),X(document,"selectstart",this)},_onDrop:function(e){var n=this.el,l=this.options;if(ve=we(S),Ke=we(S,l.draggable),he("drop",this,{evt:e}),le=S&&S.parentNode,ve=we(S),Ke=we(S,l.draggable),O.eventCanceled){this._nulling();return}ft=!1,Bt=!1,Et=!1,clearInterval(this._loopId),clearTimeout(this._dragStartTimer),fn(this.cloneId),fn(this._dragStartId),this.nativeDraggable&&(X(document,"drop",this),X(n,"dragstart",this._onDragStart)),this._offMoveEvents(),this._offUpEvents(),gt&&F(document.body,"user-select",""),F(S,"transform",""),e&&(yt&&(e.cancelable&&e.preventDefault(),!l.dropBubble&&e.stopPropagation()),M&&M.parentNode&&M.parentNode.removeChild(M),(x===le||oe&&oe.lastPutMode!=="clone")&&$&&$.parentNode&&$.parentNode.removeChild($),S&&(this.nativeDraggable&&X(S,"dragend",this),un(S),S.style["will-change"]="",yt&&!ft&&be(S,oe?oe.options.ghostClass:this.options.ghostClass,!1),be(S,this.options.chosenClass,!1),se({sortable:this,name:"unchoose",toEl:le,newIndex:null,newDraggableIndex:null,originalEvent:e}),x!==le?(ve>=0&&(se({rootEl:le,name:"add",toEl:le,fromEl:x,originalEvent:e}),se({sortable:this,name:"remove",toEl:le,originalEvent:e}),se({rootEl:le,name:"sort",toEl:le,fromEl:x,originalEvent:e}),se({sortable:this,name:"sort",toEl:le,originalEvent:e})),oe&&oe.save()):ve!==ut&&ve>=0&&(se({sortable:this,name:"update",toEl:le,originalEvent:e}),se({sortable:this,name:"sort",toEl:le,originalEvent:e})),O.active&&((ve==null||ve===-1)&&(ve=ut,Ke=vt),se({sortable:this,name:"end",toEl:le,originalEvent:e}),this.save()))),this._nulling()},_nulling:function(){he("nulling",this),x=S=le=M=Je=$=Nt=Ve=xe=Pe=yt=ve=Ke=ut=vt=ct=wt=oe=Mt=O.dragged=O.ghost=O.clone=O.active=null,qt.forEach(function(e){e.checked=!0}),qt.length=an=on=0},handleEvent:function(e){switch(e.type){case"drop":case"dragend":this._onDrop(e);break;case"dragenter":case"dragover":S&&(this._onDragOver(e),Ci(e));break;case"selectstart":e.preventDefault();break}},toArray:function(){for(var e=[],n,l=this.el.children,i=0,a=l.length,o=this.options;i<a;i++)n=l[i],Te(n,o.draggable,this.el,!1)&&e.push(n.getAttribute(o.dataIdAttr)||Mi(n));return e},sort:function(e,n){var l={},i=this.el;this.toArray().forEach(function(a,o){var r=i.children[o];Te(r,this.options.draggable,i,!1)&&(l[a]=r)},this),n&&this.captureAnimationState(),e.forEach(function(a){l[a]&&(i.removeChild(l[a]),i.appendChild(l[a]))}),n&&this.animateAll()},save:function(){var e=this.options.store;e&&e.set&&e.set(this)},closest:function(e,n){return Te(e,n||this.options.draggable,this.el,!1)},option:function(e,n){var l=this.options;if(n===void 0)return l[e];var i=_t.modifyOption(this,e,n);typeof i<"u"?l[e]=i:l[e]=n,e==="group"&&ml(l)},destroy:function(){he("destroy",this);var e=this.el;e[_e]=null,X(e,"mousedown",this._onTapStart),X(e,"touchstart",this._onTapStart),X(e,"pointerdown",this._onTapStart),this.nativeDraggable&&(X(e,"dragover",this),X(e,"dragenter",this)),Array.prototype.forEach.call(e.querySelectorAll("[draggable]"),function(n){n.removeAttribute("draggable")}),this._onDrop(),this._disableDelayedDragEvents(),Ht.splice(Ht.indexOf(this.el),1),this.el=e=null},_hideClone:function(){if(!Ve){if(he("hideClone",this),O.eventCanceled)return;F($,"display","none"),this.options.removeCloneOnHide&&$.parentNode&&$.parentNode.removeChild($),Ve=!0}},_showClone:function(e){if(e.lastPutMode!=="clone"){this._hideClone();return}if(Ve){if(he("showClone",this),O.eventCanceled)return;S.parentNode==x&&!this.options.group.revertClone?x.insertBefore($,S):Je?x.insertBefore($,Je):x.appendChild($),this.options.group.revertClone&&this.animate(S,$),F($,"display",""),Ve=!1}}};function Ci(t){t.dataTransfer&&(t.dataTransfer.dropEffect="move"),t.cancelable&&t.preventDefault()}function jt(t,e,n,l,i,a,o,r){var s,u=t[_e],c=u.options.onMove,f;return window.CustomEvent&&!qe&&!pt?s=new CustomEvent("move",{bubbles:!0,cancelable:!0}):(s=document.createEvent("Event"),s.initEvent("move",!0,!0)),s.to=e,s.from=t,s.dragged=n,s.draggedRect=l,s.related=i||e,s.relatedRect=a||ie(e),s.willInsertAfter=r,s.originalEvent=o,t.dispatchEvent(s),c&&(f=c.call(u,s,o)),f}function un(t){t.draggable=!1}function Ii(){sn=!1}function Ai(t,e,n){var l=ie(rt(n.el,0,n.options,!0)),i=sl(n.el,n.options,M),a=10;return e?t.clientX<i.left-a||t.clientY<l.top&&t.clientX<l.right:t.clientY<i.top-a||t.clientY<l.bottom&&t.clientX<l.left}function Oi(t,e,n){var l=ie(tn(n.el,n.options.draggable)),i=sl(n.el,n.options,M),a=10;return e?t.clientX>i.right+a||t.clientY>l.bottom&&t.clientX>l.left:t.clientY>i.bottom+a||t.clientX>l.right&&t.clientY>l.top}function Fi(t,e,n,l,i,a,o,r){var s=l?t.clientY:t.clientX,u=l?n.height:n.width,c=l?n.top:n.left,f=l?n.bottom:n.right,p=!1;if(!o){if(r&&Yt<u*i){if(!Et&&(wt===1?s>c+u*a/2:s<f-u*a/2)&&(Et=!0),Et)p=!0;else if(wt===1?s<c+Yt:s>f-Yt)return-wt}else if(s>c+u*(1-i)/2&&s<f-u*(1-i)/2)return Ni(e)}return p=p||o,p&&(s<c+u*a/2||s>f-u*a/2)?s>c+u/2?1:-1:0}function Ni(t){return we(S)<we(t)?1:-1}function Mi(t){for(var e=t.tagName+t.className+t.src+t.href+t.textContent,n=e.length,l=0;n--;)l+=e.charCodeAt(n);return l.toString(36)}function Ri(t){qt.length=0;for(var e=t.getElementsByTagName("input"),n=e.length;n--;){var l=e[n];l.checked&&qt.push(l)}}function Wt(t){return setTimeout(t,0)}function fn(t){return clearTimeout(t)}zt&&j(document,"touchmove",function(t){(O.active||ft)&&t.cancelable&&t.preventDefault()}),O.utils={on:j,off:X,css:F,find:nl,is:function(e,n){return!!Te(e,n,e,!1)},extend:_i,throttle:al,closest:Te,toggleClass:be,clone:rl,index:we,nextTick:Wt,cancelNextTick:fn,detectDirection:hl,getChild:rt},O.get=function(t){return t[_e]},O.mount=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];e[0].constructor===Array&&(e=e[0]),e.forEach(function(l){if(!l.prototype||!l.prototype.constructor)throw"Sortable: Mounted plugin must be a constructor function, not ".concat({}.toString.call(l));l.utils&&(O.utils=Ce(Ce({},O.utils),l.utils)),_t.mount(l)})},O.create=function(t,e){return new O(t,e)},O.version=pi;var ae=[],Dt,cn,dn=!1,hn,mn,Gt,St;function Hi(){function t(){this.defaults={scroll:!0,forceAutoScrollFallback:!1,scrollSensitivity:30,scrollSpeed:10,bubbleScroll:!0};for(var e in this)e.charAt(0)==="_"&&typeof this[e]=="function"&&(this[e]=this[e].bind(this))}return t.prototype={dragStarted:function(n){var l=n.originalEvent;this.sortable.nativeDraggable?j(document,"dragover",this._handleAutoScroll):this.options.supportPointer?j(document,"pointermove",this._handleFallbackAutoScroll):l.touches?j(document,"touchmove",this._handleFallbackAutoScroll):j(document,"mousemove",this._handleFallbackAutoScroll)},dragOverCompleted:function(n){var l=n.originalEvent;!this.options.dragOverBubble&&!l.rootEl&&this._handleAutoScroll(l)},drop:function(){this.sortable.nativeDraggable?X(document,"dragover",this._handleAutoScroll):(X(document,"pointermove",this._handleFallbackAutoScroll),X(document,"touchmove",this._handleFallbackAutoScroll),X(document,"mousemove",this._handleFallbackAutoScroll)),bl(),Ut(),vi()},nulling:function(){Gt=cn=Dt=dn=St=hn=mn=null,ae.length=0},_handleFallbackAutoScroll:function(n){this._handleAutoScroll(n,!0)},_handleAutoScroll:function(n,l){var i=this,a=(n.touches?n.touches[0]:n).clientX,o=(n.touches?n.touches[0]:n).clientY,r=document.elementFromPoint(a,o);if(Gt=n,l||this.options.forceAutoScrollFallback||pt||qe||gt){pn(n,this.options,r,l);var s=Qe(r,!0);dn&&(!St||a!==hn||o!==mn)&&(St&&bl(),St=setInterval(function(){var u=Qe(document.elementFromPoint(a,o),!0);u!==s&&(s=u,Ut()),pn(n,i.options,u,l)},10),hn=a,mn=o)}else{if(!this.options.bubbleScroll||Qe(r,!0)===Ie()){Ut();return}pn(n,this.options,Qe(r,!1),!1)}}},Be(t,{pluginName:"scroll",initializeByDefault:!0})}function Ut(){ae.forEach(function(t){clearInterval(t.pid)}),ae=[]}function bl(){clearInterval(St)}var pn=al(function(t,e,n,l){if(e.scroll){var i=(t.touches?t.touches[0]:t).clientX,a=(t.touches?t.touches[0]:t).clientY,o=e.scrollSensitivity,r=e.scrollSpeed,s=Ie(),u=!1,c;cn!==n&&(cn=n,Ut(),Dt=e.scroll,c=e.scrollFn,Dt===!0&&(Dt=Qe(n,!0)));var f=0,p=Dt;do{var g=p,d=ie(g),w=d.top,b=d.bottom,h=d.left,y=d.right,E=d.width,D=d.height,T=void 0,I=void 0,_=g.scrollWidth,L=g.scrollHeight,P=F(g),J=g.scrollLeft,ue=g.scrollTop;g===s?(T=E<_&&(P.overflowX==="auto"||P.overflowX==="scroll"||P.overflowX==="visible"),I=D<L&&(P.overflowY==="auto"||P.overflowY==="scroll"||P.overflowY==="visible")):(T=E<_&&(P.overflowX==="auto"||P.overflowX==="scroll"),I=D<L&&(P.overflowY==="auto"||P.overflowY==="scroll"));var V=T&&(Math.abs(y-i)<=o&&J+E<_)-(Math.abs(h-i)<=o&&!!J),U=I&&(Math.abs(b-a)<=o&&ue+D<L)-(Math.abs(w-a)<=o&&!!ue);if(!ae[f])for(var Z=0;Z<=f;Z++)ae[Z]||(ae[Z]={});(ae[f].vx!=V||ae[f].vy!=U||ae[f].el!==g)&&(ae[f].el=g,ae[f].vx=V,ae[f].vy=U,clearInterval(ae[f].pid),(V!=0||U!=0)&&(u=!0,ae[f].pid=setInterval((function(){l&&this.layer===0&&O.active._onTouchMove(Gt);var N=ae[this.layer].vy?ae[this.layer].vy*r:0,z=ae[this.layer].vx?ae[this.layer].vx*r:0;typeof c=="function"&&c.call(O.dragged.parentNode[_e],z,N,t,Gt,ae[this.layer].el)!=="continue"||ol(ae[this.layer].el,z,N)}).bind({layer:f}),24))),f++}while(e.bubbleScroll&&p!==s&&(p=Qe(p,!1)));dn=u}},30),_l=function(e){var n=e.originalEvent,l=e.putSortable,i=e.dragEl,a=e.activeSortable,o=e.dispatchSortableEvent,r=e.hideGhostForTarget,s=e.unhideGhostForTarget;if(n){var u=l||a;r();var c=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:n,f=document.elementFromPoint(c.clientX,c.clientY);s(),u&&!u.el.contains(f)&&(o("spill"),this.onSpill({dragEl:i,putSortable:l}))}};function gn(){}gn.prototype={startIndex:null,dragStart:function(e){var n=e.oldDraggableIndex;this.startIndex=n},onSpill:function(e){var n=e.dragEl,l=e.putSortable;this.sortable.captureAnimationState(),l&&l.captureAnimationState();var i=rt(this.sortable.el,this.startIndex,this.options);i?this.sortable.el.insertBefore(n,i):this.sortable.el.appendChild(n),this.sortable.animateAll(),l&&l.animateAll()},drop:_l},Be(gn,{pluginName:"revertOnSpill"});function bn(){}bn.prototype={onSpill:function(e){var n=e.dragEl,l=e.putSortable,i=l||this.sortable;i.captureAnimationState(),n.parentNode&&n.parentNode.removeChild(n),i.animateAll()},drop:_l},Be(bn,{pluginName:"removeOnSpill"}),O.mount(new Hi),O.mount(bn,gn);function vl(t,e,n){const l=t.slice();return l[18]=e[n],l}function yl(t,e,n){const l=t.slice();return l[21]=e[n],l}function wl(t){let e,n,l,i;return{c(){e=k("div"),n=k("a"),n.innerHTML='<i class="fas fa-pencil-alt fa-sm"></i>',m(n,"href","javascript:"),m(n,"data-action","editField"),m(n,"class","edit-field svelte-1mx8y43"),m(e,"class","right svelte-1mx8y43")},m(a,o){G(a,e,o),v(e,n),l||(i=ne(n,"click",t[6]),l=!0)},p:K,d(a){a&&W(e),l=!1,i()}}}function El(t){let e,n,l,i=t[21].label+"",a,o,r,s=t[0].editable&&wl(t),u=[t[9](t[21])],c={};for(let f=0;f<u.length;f+=1)c=Xe(c,u[f]);return{c(){e=k("li"),n=k("div"),l=k("label"),a=ce(i),o=q(),s&&s.c(),r=q(),m(l,"class","svelte-1mx8y43"),m(n,"class","left svelte-1mx8y43"),Tt(e,c),Pt(e,"svelte-1mx8y43",!0)},m(f,p){G(f,e,p),v(e,n),v(n,l),v(l,a),v(e,o),s&&s.m(e,null),v(e,r)},p(f,p){p&4&&i!==(i=f[21].label+"")&&Fe(a,i),f[0].editable?s?s.p(f,p):(s=wl(f),s.c(),s.m(e,r)):s&&(s.d(1),s=null),Tt(e,c=Hn(u,[p&4&&f[9](f[21])])),Pt(e,"svelte-1mx8y43",!0)},d(f){f&&W(e),s&&s.d()}}}function Dl(t){let e,n,l,i;return{c(){e=k("div"),n=k("a"),n.innerHTML='<i class="fas fa-pencil-alt fa-sm"></i>',m(n,"href","javascript:"),m(n,"data-action","editField"),m(n,"class","edit-field svelte-1mx8y43"),m(e,"class","right svelte-1mx8y43")},m(a,o){G(a,e,o),v(e,n),l||(i=ne(n,"click",t[6]),l=!0)},p:K,d(a){a&&W(e),l=!1,i()}}}function Sl(t){let e,n,l,i=t[18].label+"",a,o,r,s=t[0].editable&&Dl(t),u=[t[9](t[18])],c={};for(let f=0;f<u.length;f+=1)c=Xe(c,u[f]);return{c(){e=k("li"),n=k("div"),l=k("label"),a=ce(i),o=q(),s&&s.c(),r=q(),m(l,"class","svelte-1mx8y43"),m(n,"class","left svelte-1mx8y43"),Tt(e,c),Pt(e,"svelte-1mx8y43",!0)},m(f,p){G(f,e,p),v(e,n),v(n,l),v(l,a),v(e,o),s&&s.m(e,null),v(e,r)},p(f,p){p&2&&i!==(i=f[18].label+"")&&Fe(a,i),f[0].editable?s?s.p(f,p):(s=Dl(f),s.c(),s.m(e,r)):s&&(s.d(1),s=null),Tt(e,c=Hn(u,[p&2&&f[9](f[18])])),Pt(e,"svelte-1mx8y43",!0)},d(f){f&&W(e),s&&s.d()}}}function Bi(t){let e,n,l,i,a,o,r,s,u,c,f,p,g=de(t[2]),d=[];for(let h=0;h<g.length;h+=1)d[h]=El(yl(t,g,h));let w=de(t[1]),b=[];for(let h=0;h<w.length;h+=1)b[h]=Sl(vl(t,w,h));return{c(){e=k("div"),n=k("div"),l=k("div"),i=k("header"),i.textContent=`${Y.translate("Enabled","labels","Admin")}`,a=q(),o=k("ul");for(let h=0;h<d.length;h+=1)d[h].c();r=q(),s=k("div"),u=k("div"),c=k("header"),c.textContent=`${Y.translate("Disabled","labels","Admin")}`,f=q(),p=k("ul");for(let h=0;h<b.length;h+=1)b[h].c();m(o,"class","enabled connected svelte-1mx8y43"),m(l,"class","well"),m(n,"class","col-sm-5"),m(p,"class","disabled connected svelte-1mx8y43"),m(u,"class","well"),m(s,"class","col-sm-5"),m(e,"id","layout"),m(e,"class","row")},m(h,y){G(h,e,y),v(e,n),v(n,l),v(l,i),v(l,a),v(l,o);for(let E=0;E<d.length;E+=1)d[E]&&d[E].m(o,null);v(e,r),v(e,s),v(s,u),v(u,c),v(u,f),v(u,p);for(let E=0;E<b.length;E+=1)b[E]&&b[E].m(p,null);t[13](e)},p(h,y){if(y&581){g=de(h[2]);let E;for(E=0;E<g.length;E+=1){const D=yl(h,g,E);d[E]?d[E].p(D,y):(d[E]=El(D),d[E].c(),d[E].m(o,null))}for(;E<d.length;E+=1)d[E].d(1);d.length=g.length}if(y&579){w=de(h[1]);let E;for(E=0;E<w.length;E+=1){const D=vl(h,w,E);b[E]?b[E].p(D,y):(b[E]=Sl(D),b[E].c(),b[E].m(p,null))}for(;E<b.length;E+=1)b[E].d(1);b.length=w.length}},d(h){h&&W(e),dt(d,h),dt(b,h),t[13](null)}}}function Yi(t){let e,n,l={params:t[0],validate:t[8],fetch:t[7],loadLayout:t[3],$$slots:{default:[Bi]},$$scope:{ctx:t}};return e=new Kn({props:l}),t[14](e),{c(){Ge(e.$$.fragment)},m(i,a){Me(e,i,a),n=!0},p(i,[a]){const o={};a&1&&(o.params=i[0]),a&8&&(o.loadLayout=i[3]),a&16777239&&(o.$$scope={dirty:a,ctx:i}),e.$set(o)},i(i){n||(De(e.$$.fragment,i),n=!0)},o(i){Ne(e.$$.fragment,i),n=!1},d(i){t[14](null),Re(e,i)}}}function qi(t){return t.toLowerCase()}function kl(t,e){return t[e]}function zi(t,e,n){let l,i,a,{params:o}=e,{dataAttributeList:r=[]}=e,{dataAttributeDefs:s}=e,{enabledFields:u=[]}=e,{disabledFields:c=[]}=e,{rowLayout:f=[]}=e,{loadLayout:p}=e,g;Kt(()=>{d()}),Ln(()=>{i&&i.destroy(),a&&a.destroy()});function d(){const T={group:"fields",draggable:"li",animation:150};i=O.create(l.querySelector("ul.enabled"),{...T}),a=O.create(l.querySelector("ul.disabled"),{...T})}function w(T){const _=T.target.closest("li");if(!_)return;const L={};r.forEach(P=>{L[P]=_.dataset[P]||null}),g.openEditDialog(L)}function b(){const T=[];for(let I of l.querySelector("ul.enabled").children){const _={};r.forEach(L=>{const P=I.dataset[L];P&&(_[L]=P)}),T.push(_)}return T}function h(T){return T.length===0?(ge.notify("Layout cannot be empty","error"),!1):!0}function y(T){const I={};return r.forEach(_=>{kl(T,_)!=null&&(I[`data-${qi(_)}`]=kl(T,_))}),I}function E(T){Le[T?"unshift":"push"](()=>{l=T,n(4,l)})}function D(T){Le[T?"unshift":"push"](()=>{g=T,n(5,g)})}return t.$$set=T=>{"params"in T&&n(0,o=T.params),"dataAttributeList"in T&&n(10,r=T.dataAttributeList),"dataAttributeDefs"in T&&n(11,s=T.dataAttributeDefs),"enabledFields"in T&&n(12,u=T.enabledFields),"disabledFields"in T&&n(1,c=T.disabledFields),"rowLayout"in T&&n(2,f=T.rowLayout),"loadLayout"in T&&n(3,p=T.loadLayout)},[o,c,f,p,l,g,w,b,h,y,r,s,u,E,D]}class _n extends ke{constructor(e){super(),Se(this,e,zi,Yi,ye,{params:0,dataAttributeList:10,dataAttributeDefs:11,enabledFields:12,disabledFields:1,rowLayout:2,loadLayout:3})}}function Xi(t){let e,n,l={params:t[0],enabledFields:t[2],disabledFields:t[3],rowLayout:t[4],editable:ji,dataAttributeList:t[5],loadLayout:t[6]};return e=new _n({props:l}),t[9](e),{c(){Ge(e.$$.fragment)},m(i,a){Me(e,i,a),n=!0},p(i,[a]){const o={};a&1&&(o.params=i[0]),a&4&&(o.enabledFields=i[2]),a&8&&(o.disabledFields=i[3]),a&16&&(o.rowLayout=i[4]),e.$set(o)},i(i){n||(De(e.$$.fragment,i),n=!0)},o(i){Ne(e.$$.fragment,i),n=!1},d(i){t[9](null),Re(e,i)}}}let ji=!0;function Wi(t){return!0}function Gi(t,e,n){let{params:l}=e;const i=["id","name","width","widthPx","link","notSortable","align","view","customLabel"];let{layoutDisabledParameter:a="layoutListDisabled"}=e,{afterRender:o}=e,r,s=[],u=[],c=[];const f=[],p=[];function g(){At.create(l.scope,h=>{ge.notify("Loading..."),He.get(l.scope,l.type,l.layoutProfileId,y=>{d(h,y),ge.notify(!1),o&&o()},!1)})}function d(h,y){const E=Object.keys(h.defs.fields).filter(_=>Wi(h.getFieldParam(_,"type"))&&w(h,_)).sort((_,L)=>Y.translate(_,"fields",scope).localeCompare(Y.translate(L,"fields",scope))),D=[],T=[],I=[];n(2,s=y.map(_=>{const L=Y.translate(_.name,"fields",scope);return T.includes(L)&&I.push(L),T.push(L),D.push(_.name),{name:_.name,label:L}})),n(3,u=E.filter(_=>!D.includes(_)).map(_=>{const L=Y.translate(_,"fields",scope);T.includes(L)&&I.push(L),T.push(L);const P={name:_,label:L},J=Ue.get(["entityDefs",scope,"fields",_,"type"]);return J&&Ue.get(["fields",J,"notSortable"])&&(P.notSortable=!0),P})),[s,u].forEach(_=>{_.forEach(L=>{I.includes(L.label)&&(L.label+=` (${L.name})`)})}),n(4,c=y.map(_=>{var L;return{..._,label:((L=s.find(P=>P.name===_.name))==null?void 0:L.label)||Y.translate(_.name,"fields",scope)}}))}function w(h,y){return f.includes(y)||p.includes(h.getFieldParam(y,"type"))?!1:!h.getFieldParam(y,"disabled")&&!h.getFieldParam(y,a)}function b(h){Le[h?"unshift":"push"](()=>{r=h,n(1,r)})}return t.$$set=h=>{"params"in h&&n(0,l=h.params),"layoutDisabledParameter"in h&&n(7,a=h.layoutDisabledParameter),"afterRender"in h&&n(8,o=h.afterRender)},[l,r,s,u,c,i,g,a,o,b]}class vn extends ke{constructor(e){super(),Se(this,e,Gi,Xi,ye,{params:0,layoutDisabledParameter:7,afterRender:8})}}function Ui(t){let e,n,l={params:t[0],enabledFields:t[6],disabledFields:t[2],rowLayout:t[3],dataAttributeList:t[4],dataAttributesDefs:t[5],loadLayout:t[7]};return e=new _n({props:l}),t[9](e),{c(){Ge(e.$$.fragment)},m(i,a){Me(e,i,a),n=!0},p(i,[a]){const o={};a&1&&(o.params=i[0]),a&4&&(o.disabledFields=i[2]),a&8&&(o.rowLayout=i[3]),e.$set(o)},i(i){n||(De(e.$$.fragment,i),n=!0)},o(i){Ne(e.$$.fragment,i),n=!1},d(i){t[9](null),Re(e,i)}}}function Qi(t,e,n){let{params:l}=e,{viewType:i="detail"}=e;const a=["id","name","style","sticked"],o={style:{type:"enum",options:["default","success","danger","primary","info","warning"],translation:"LayoutManager.options.style"},sticked:{type:"bool"},name:{readOnly:!0}};let r,s=[],u=[],c=[];function f(){ge.notify("Loading..."),He.get(l.scope,l.type,l.layoutProfileId,d=>{p(d),ge.notify(!1),l.afterRender&&l.afterRender()},!1)}function p(d){let w=[],b={},h={};Ue.get(["clientDefs",h.scope,"defaultSidePanel",i])!==!1&&!Ue.get(["clientDefs",h.scope,"defaultSidePanelDisabled"])&&(w.push("default"),b.default="Default"),(Ue.get(["clientDefs",h.scope,"sidePanels",i])||[]).forEach(y=>{y.name&&(w.push(y.name),y.label&&(b[y.name]=y.label),h[y.name]=y)}),n(2,u=[]),d=d||{},n(3,c=[]),w.forEach((y,E)=>{let D=!1,T=d[y]||{};T.disabled&&(D=!0);let I;if(b[y]?I=Y.translate(b[y],"labels",h.scope):I=Y.translate(y,"panels",h.scope),D)u.push({name:y,label:I});else{let _={name:y,label:I};_.name in h&&a.forEach(L=>{if(L==="name")return;let P=h[_.name]||{};L in P&&(_[L]=P[L])});for(let L in T)_[L]=T[L];_.index="index"in T?T.index:E,c.push(_)}}),c.sort((y,E)=>y.index-E.index)}function g(d){Le[d?"unshift":"push"](()=>{r=d,n(1,r)})}return t.$$set=d=>{"params"in d&&n(0,l=d.params),"viewType"in d&&n(8,i=d.viewType)},[l,r,u,c,a,o,s,f,i,g]}class Qt extends ke{constructor(e){super(),Se(this,e,Qi,Ui,ye,{params:0,viewType:8})}}function Vi(t){let e,n,l={params:t[0],enabledFields:t[2],disabledFields:t[3],rowLayout:t[4],dataAttributeList:t[5],dataAttributesDefs:t[6],loadLayout:t[7]};return e=new _n({props:l}),t[9](e),{c(){Ge(e.$$.fragment)},m(i,a){Me(e,i,a),n=!0},p(i,[a]){const o={};a&1&&(o.params=i[0]),a&4&&(o.enabledFields=i[2]),a&8&&(o.disabledFields=i[3]),a&16&&(o.rowLayout=i[4]),e.$set(o)},i(i){n||(De(e.$$.fragment,i),n=!0)},o(i){Ne(e.$$.fragment,i),n=!1},d(i){t[9](null),Re(e,i)}}}function Ki(t,e){return!t.getLinkParam(e,"disabled")&&!t.getLinkParam(e,"layoutRelationshipsDisabled")}function Zi(t,e,n){let{params:l}=e;const i=["id","name","style","hiddenPerDefault"],a={style:{type:"enum",options:["default","success","danger","primary","info","warning"],translation:"LayoutManager.options.style"},hiddenPerDefault:{type:"bool"},name:{readOnly:!0}};let{afterRender:o}=e,r,s=[],u=[],c=[],f=[];function p(){ge.notify("Loading..."),At.create(l.scope,function(w){He.get(l.scope,l.type,l.layoutProfileId,b=>{g(w,b),ge.notify(!1),o&&o()},!1)})}function g(w,b){let h=[];for(let y in w.defs.links)["hasMany","hasChildren"].includes(w.defs.links[y].type)&&Ki(w,y)&&h.push(y);h.sort((y,E)=>Y.translate(y,"links","scope").localeCompare(Y.translate(E,"links","scope"))),u=[],n(2,s=[]),n(3,c=[]);for(let y in b){let E=b[y],D;typeof E=="string"?D={name:E,label:Y.translate(E,"links","scope")}:(D=E,D.label=Y.translate(D.name,"links","scope")),i.forEach(T=>{if(T==="name"||T in D)return;let I=Ue.get(["clientDefs","scope","relationshipPanels",D.name,T]);I!==null&&(D[T]=I)}),s.push(D),u.push(D.name)}for(let y of h)u.includes(y)||c.push({name:y,label:Y.translate(y,"links","scope")});n(4,f=s);for(let y of f)y.label=Y.translate(y.name,"links","scope")}function d(w){Le[w?"unshift":"push"](()=>{r=w,n(1,r)})}return t.$$set=w=>{"params"in w&&n(0,l=w.params),"afterRender"in w&&n(8,o=w.afterRender)},[l,r,s,c,f,i,a,p,o,d]}class Ji extends ke{constructor(e){super(),Se(this,e,Zi,Vi,ye,{params:0,afterRender:8})}}function Tl(t,e,n){const l=t.slice();return l[39]=e[n],l}function Pl(t,e,n){const l=t.slice();return l[42]=e[n],l}function Ll(t,e,n){const l=t.slice();return l[45]=e[n],l}function Cl(t,e,n){const l=t.slice();return l[48]=e[n],l[50]=n,l}function xi(t){let e,n,l,i,a;function o(){return t[20](t[42],t[45],t[50])}function r(...s){return t[21](t[42],t[45],t[50],...s)}return{c(){e=k("li"),n=k("a"),n.innerHTML='<i class="fas fa-minus"></i>',l=q(),m(n,"href","#"),m(n,"data-action","minusCell"),m(n,"class","remove-field svelte-fp3tbt"),m(e,"class","empty cell svelte-fp3tbt")},m(s,u){G(s,e,u),v(e,n),v(e,l),i||(a=[ne(n,"click",je(o)),ne(e,"dragover",je(la)),ne(e,"drop",r)],i=!0)},p(s,u){t=s},d(s){s&&W(e),i=!1,Oe(a)}}}function $i(t){let e,n=t[48].label+"",l,i,a,o,r,s,u,c,f,p,g;function d(){return t[18](t[42],t[45],t[50])}function w(...b){return t[19](t[48],...b)}return{c(){e=k("li"),l=ce(n),i=q(),a=k("a"),a.innerHTML='<i class="fas fa-times"></i>',o=q(),m(a,"href","#"),m(a,"data-action","removeField"),m(a,"class","remove-field svelte-fp3tbt"),m(e,"class","cell svelte-fp3tbt"),m(e,"draggable","true"),m(e,"data-id",r=t[48].id),m(e,"data-name",s=t[48].name),m(e,"data-full-width",u=t[48].fullWidth?"true":void 0),m(e,"data-custom-label",c=t[48].customLabel?t[48].customLabel:void 0),m(e,"data-no-label",f=t[48].noLabel)},m(b,h){G(b,e,h),v(e,l),v(e,i),v(e,a),v(e,o),p||(g=[ne(a,"click",je(d)),ne(e,"dragstart",Vt(w))],p=!0)},p(b,h){t=b,h[0]&2&&n!==(n=t[48].label+"")&&Fe(l,n),h[0]&2&&r!==(r=t[48].id)&&m(e,"data-id",r),h[0]&2&&s!==(s=t[48].name)&&m(e,"data-name",s),h[0]&2&&u!==(u=t[48].fullWidth?"true":void 0)&&m(e,"data-full-width",u),h[0]&2&&c!==(c=t[48].customLabel?t[48].customLabel:void 0)&&m(e,"data-custom-label",c),h[0]&2&&f!==(f=t[48].noLabel)&&m(e,"data-no-label",f)},d(b){b&&W(e),p=!1,Oe(g)}}}function Il(t){let e;function n(a,o){return a[48]?$i:xi}let l=n(t),i=l(t);return{c(){i.c(),e=Pn()},m(a,o){i.m(a,o),G(a,e,o)},p(a,o){l===(l=n(a))&&i?i.p(a,o):(i.d(1),i=l(a),i&&(i.c(),i.m(e.parentNode,e)))},d(a){a&&W(e),i.d(a)}}}function Al(t,e){let n,l,i,a,o,r,s,u,c;function f(){return e[17](e[42],e[45])}let p=de(e[45].cells),g=[];for(let d=0;d<p.length;d+=1)g[d]=Il(Cl(e,p,d));return{key:t,first:null,c(){n=k("li"),l=k("div"),i=k("a"),i.innerHTML='<i class="fas fa-times"></i>',a=q(),o=k("ul");for(let d=0;d<g.length;d+=1)g[d].c();r=q(),m(i,"href","#"),m(i,"data-action","removeRow"),m(i,"class","remove-row pull-right svelte-fp3tbt"),m(l,"class","svelte-fp3tbt"),m(o,"class","cells svelte-fp3tbt"),m(n,"class","row svelte-fp3tbt"),m(n,"data-number",s=e[45].number),this.first=n},m(d,w){G(d,n,w),v(n,l),v(l,i),v(n,a),v(n,o);for(let b=0;b<g.length;b+=1)g[b]&&g[b].m(o,null);v(n,r),u||(c=[ne(i,"click",je(f)),ne(o,"mousedown",Vt(ia))],u=!0)},p(d,w){if(e=d,w[0]&3586){p=de(e[45].cells);let b;for(b=0;b<p.length;b+=1){const h=Cl(e,p,b);g[b]?g[b].p(h,w):(g[b]=Il(h),g[b].c(),g[b].m(o,null))}for(;b<g.length;b+=1)g[b].d(1);g.length=p.length}w[0]&2&&s!==(s=e[45].number)&&m(n,"data-number",s)},d(d){d&&W(n),dt(g,d),u=!1,Oe(c)}}}function Ol(t,e){let n,l,i,a=(e[42].customLabel||e[42].label||"")+"",o,r,s,u,c,f,p,g,d,w,b,h=[],y=new Map,E,D,T,I,_,L,P;function J(){return e[15](e[42])}function ue(){return e[16](e[42])}let V=de(e[42].rows);const U=N=>N[45].number;for(let N=0;N<V.length;N+=1){let z=Ll(e,V,N),me=U(z);y.set(me,h[N]=Al(me,z))}function Z(){return e[22](e[42])}return{key:t,first:null,c(){n=k("li"),l=k("header"),i=k("label"),o=ce(a),s=ce(`Â \r
                                `),u=k("a"),u.innerHTML='<i class="fas fa-pencil-alt fa-sm"></i>',c=q(),f=k("a"),p=k("i"),w=q(),b=k("ul");for(let N=0;N<h.length;N+=1)h[N].c();E=q(),D=k("div"),T=k("a"),T.innerHTML='<i class="fas fa-plus"></i>',I=q(),m(i,"data-is-custom",r=e[42].customLabel?"true":void 0),m(i,"class","svelte-fp3tbt"),m(u,"href","#"),m(u,"data-action","edit-panel-label"),m(u,"class","edit-panel-label svelte-fp3tbt"),m(p,"class","fas fa-times"),m(f,"href","#"),We(f,"float","right"),m(f,"data-action","removePanel"),m(f,"class","remove-panel svelte-fp3tbt"),m(f,"data-number",g=e[42].number),m(l,"data-name",d=e[42].name),m(l,"class","svelte-fp3tbt"),m(b,"class","rows svelte-fp3tbt"),m(T,"href","#"),m(T,"data-action","addRow"),m(T,"class","svelte-fp3tbt"),m(D,"class","svelte-fp3tbt"),m(n,"data-number",_=e[42].number),m(n,"class","panel-layout svelte-fp3tbt"),this.first=n},m(N,z){G(N,n,z),v(n,l),v(l,i),v(i,o),v(l,s),v(l,u),v(l,c),v(l,f),v(f,p),v(n,w),v(n,b);for(let me=0;me<h.length;me+=1)h[me]&&h[me].m(b,null);v(n,E),v(n,D),v(D,T),v(n,I),L||(P=[ne(u,"click",je(J)),ne(f,"click",je(ue)),ne(b,"mousedown",Vt(aa)),ne(T,"click",je(Z))],L=!0)},p(N,z){e=N,z[0]&2&&a!==(a=(e[42].customLabel||e[42].label||"")+"")&&Fe(o,a),z[0]&2&&r!==(r=e[42].customLabel?"true":void 0)&&m(i,"data-is-custom",r),z[0]&2&&g!==(g=e[42].number)&&m(f,"data-number",g),z[0]&2&&d!==(d=e[42].name)&&m(l,"data-name",d),z[0]&3842&&(V=de(e[42].rows),h=Rn(h,z,U,1,e,V,y,b,Mn,Al,null,Ll)),z[0]&2&&_!==(_=e[42].number)&&m(n,"data-number",_)},d(N){N&&W(n);for(let z=0;z<h.length;z+=1)h[z].d();L=!1,Oe(P)}}}function Fl(t){let e,n=t[39].label+"",l,i,a,o,r;function s(...u){return t[23](t[39],...u)}return{c(){e=k("li"),l=ce(n),i=q(),m(e,"class","cell svelte-fp3tbt"),m(e,"data-name",a=t[39].name)},m(u,c){G(u,e,c),v(e,l),v(e,i),o||(r=ne(e,"dragstart",s),o=!0)},p(u,c){t=u,c[0]&4&&n!==(n=t[39].label+"")&&Fe(l,n),c[0]&4&&a!==(a=t[39].name)&&m(e,"data-name",a)},d(u){u&&W(e),o=!1,r()}}}function ea(t){let e,n,l,i,a,o,r,s,u=[],c=new Map,f,p,g,d,w,b,h,y,E=de(t[1]);const D=_=>_[42].number;for(let _=0;_<E.length;_+=1){let L=Pl(t,E,_),P=D(L);c.set(P,u[_]=Ol(P,L))}let T=de(t[2]),I=[];for(let _=0;_<T.length;_+=1)I[_]=Fl(Tl(t,T,_));return{c(){e=k("div"),n=k("div"),l=k("div"),i=k("header"),i.textContent=`${Y.translate("Layout","LayoutManager")}`,a=q(),o=k("a"),o.textContent=`${Y.translate("Add Panel","Admin")}`,r=q(),s=k("ul");for(let _=0;_<u.length;_+=1)u[_].c();f=q(),p=k("div"),g=k("div"),d=k("header"),d.textContent=`${Y.translate("Available Fields","Admin")}`,w=q(),b=k("ul");for(let _=0;_<I.length;_+=1)I[_].c();m(i,"class","svelte-fp3tbt"),m(o,"href","#"),m(o,"class","svelte-fp3tbt"),m(s,"class","panels svelte-fp3tbt"),m(l,"class","well svelte-fp3tbt"),m(n,"class","col-md-8 svelte-fp3tbt"),m(d,"class","svelte-fp3tbt"),m(b,"class","disabled cells clearfix svelte-fp3tbt"),m(g,"class","well svelte-fp3tbt"),m(p,"class","col-md-4 svelte-fp3tbt"),m(e,"id","layout"),m(e,"class","row svelte-fp3tbt")},m(_,L){G(_,e,L),v(e,n),v(n,l),v(l,i),v(l,a),v(l,o),v(l,r),v(l,s);for(let P=0;P<u.length;P+=1)u[P]&&u[P].m(s,null);v(e,f),v(e,p),v(p,g),v(g,d),v(g,w),v(g,b);for(let P=0;P<I.length;P+=1)I[P]&&I[P].m(b,null);h||(y=ne(o,"click",je(t[5])),h=!0)},p(_,L){if(L[0]&4034&&(E=de(_[1]),u=Rn(u,L,D,1,_,E,c,s,Mn,Ol,null,Pl)),L[0]&4){T=de(_[2]);let P;for(P=0;P<T.length;P+=1){const J=Tl(_,T,P);I[P]?I[P].p(J,L):(I[P]=Fl(J),I[P].c(),I[P].m(b,null))}for(;P<I.length;P+=1)I[P].d(1);I.length=T.length}},d(_){_&&W(e);for(let L=0;L<u.length;L+=1)u[L].d();dt(I,_),h=!1,y()}}}function ta(t){let e,n;return e=new Kn({props:{params:t[0],validate:t[12],fetch:t[4],loadLayout:t[3],$$slots:{default:[ea]},$$scope:{ctx:t}}}),{c(){Ge(e.$$.fragment)},m(l,i){Me(e,l,i),n=!0},p(l,i){const a={};i[0]&1&&(a.params=l[0]),i[0]&6|i[1]&1048576&&(a.$$scope={dirty:i,ctx:l}),e.$set(a)},i(l){n||(De(e.$$.fragment,l),n=!0)},o(l){Ne(e.$$.fragment,l),n=!1},d(l){Re(e,l)}}}function na(t,e){return e.some(n=>n.name===t)}function ha(t){}const la=t=>t.dataTransfer.dropEffect="move",ia=()=>{},aa=()=>{};function oa(t,e,n){let{params:l}=e,{columnCount:i=2}=e,{layoutDisabledParameter:a="layoutDetailDisabled"}=e,o=["modifiedAt","createdAt","modifiedBy","createdBy","assignedUser","ownerUser","teams"],r=[],s=[],u=-1,c=-1,f;Cn();function p(C){let A,R;const B=[];B.push(new Promise(H=>{At.create(l.scope,ee=>{He.get(l.scope,l.type,l.layoutProfileId,Q=>{A=Q,R=ee,H()},!1)})})),["detail","detailSmall"].includes(l.type)&&B.push(new Promise(H=>{He.get(l.scope,"sidePanels"+Espo.utils.upperCaseFirst(l.type),l.layoutProfileId,ee=>{f=ee,H()},!1)})),Promise.all(B).then(()=>{g(R,A),h(),Fn().then(()=>{E()}),C&&C()})}function g(C,A){let R=[];const B=[];for(const Q in C.defs.fields)d(C,Q)&&(B.push(Y.translate(Q,"fields",l.scope)),R.push(Q));const H=B.filter((Q,pe)=>B.indexOf(Q)!==pe);let ee=[];n(2,s=[]),n(1,r=A),A.forEach((Q,pe)=>{Q.rows.forEach((te,Ae)=>{te&&te.forEach((Ee,ze)=>{if(ze==i||!Ee)return;let Ze=Y.translate(Ee.name,"fields",l.scope);H.includes(Ze)&&(Ze+=` (${Ee.name})`),ee.push({name:Ee.name,label:Ze}),n(1,r[pe].rows[Ae][ze].label=Ze,r)})})}),R.sort((Q,pe)=>Y.translate(Q,"fields",l.scope).localeCompare(Y.translate(pe,"fields",l.scope)));for(const Q in R)if(!na(R[Q],ee)){const pe=R[Q];let te=Y.translate(pe,"fields",l.scope);H.includes(te)&&(te+=` (${pe})`),s.push({name:pe,label:te})}}function d(C,A){return w()&&o.includes(A)?!1:!C.getFieldParam(A,"disabled")&&!C.getFieldParam(A,a)}function w(){if(Ue.get(["clientDefs",l.scope,"defaultSidePanelDisabled"]))return!1;if(f){for(const C in f)if(C==="default"&&f[C].disabled)return!1}return!0}function b(){return r.map(C=>({...C,rows:C.rows.map(A=>A.cells)}))}function h(){u=-1,c=-1,n(1,r=r.map((C,A)=>(C.number=A,u=A,C.rows=C.rows.map(R=>({number:c++,cells:R})),C)))}function y(C){O.create(C,{animation:150,group:"rows",draggable:"li.row",onEnd(A){const R=parseInt(A.to.closest(".panel-layout").getAttribute("data-number")),B=parseInt(A.from.closest(".panel-layout").getAttribute("data-number"));if(B===R)n(1,r=r.map(H=>{if(H.number===R){const[ee]=H.rows.splice(A.oldIndex,1);H.rows.splice(A.newIndex,0,ee)}return H}));else{const ee=r.find(Q=>Q.number===B).rows[A.oldIndex];n(1,r=r.map(Q=>(Q.number===B&&Q.rows.splice(A.oldIndex,1),Q.number===R&&Q.rows.splice(A.newIndex,0,ee),Q)))}console.log(r)}})}function E(){O.create(document.querySelector("ul.panels"),{animation:150,group:"panels",draggable:"li.panel-layout",onEnd(C){const A=Array.from(C.to.children);n(1,r=A.map(R=>{const B=parseInt(R.getAttribute("data-number"));return r.find(H=>H.number===B)})),console.log(r)}}),document.querySelectorAll("ul.rows").forEach(C=>{y(C)}),document.querySelectorAll("ul.cells.disabled").forEach(C=>{O.create(C,{animation:150,group:"cells",draggable:"li.cell"})})}function D(){u++;const C={customLabel:"New panel",rows:[{number:c++,cells:[[!1,!1]]}],number:u,name:`panel${u}`,isCustomLabel:!0};n(1,r=[...r,C]),Fn().then(()=>{const A=document.querySelector(`.panel-layout[data-number="${C.number}"] > .rows`);y(A)})}function T(C){const A=r.find(B=>B.number===C);n(1,r=r.filter(B=>B!==A));let R=[];A.rows.forEach(B=>{B.cells.forEach(H=>{H&&R.push(H)})}),n(2,s=[...s,...R])}function I(C){n(1,r=r.map(A=>(A.number===C&&(A.rows=[...A.rows,{number:c++,cells:Array(i).fill(!1)}]),A)))}function _(C,A){n(1,r=r.map(R=>{if(R.number===C){const B=R.rows.find(H=>H.number===A);R.rows=R.rows.filter(H=>H!=B),n(2,s=[...s,...B.cells.filter(H=>!!H)])}return R}))}function L(C,A,R){n(1,r=r.map(B=>(B.number===C&&(B.rows=B.rows.map((H,ee)=>{if(H.number===A){const Q=H.cells[R];Q&&n(2,s=[...s,Q]),H.cells[R]=!1}return H})),B)))}function P(C,A,R,B){const H=C.dataTransfer.getData("name");let ee=s.find(te=>te.name===H),Q=null,pe=null;if(ee)n(2,s=s.filter(te=>te!==ee));else{if(r.forEach(te=>{te.rows.forEach((Ae,Ee)=>{Ae.cells.forEach(ze=>{ze&&ze.name===H&&(ee=ze,Q=Ae.number,pe=te.number)})})}),!ee)return;n(1,r=r.map((te,Ae)=>(pe===te.number&&(te.rows=te.rows.map((Ee,ze)=>(Ee.number===Q&&(Ee.cells=Ee.cells.map((Ze,ma)=>Ze&&Ze.name===H?!1:Ze)),Ee))),te)))}n(1,r=r.map(te=>(A===te.number&&(te.rows=te.rows.map(Ae=>(R===Ae.number&&(Ae.cells=Ae.cells.map((Ee,ze)=>ze===B?(ee.fullWidth&&delete ee.fullWidth,ee):Ee)),Ae))),te))),console.log(r)}function J(C,A,R){i<2||(n(1,r=r.map(B=>(C===B.number&&(B.rows=B.rows.map(H=>{if(A===H.number){const ee=H.cells.filter((Q,pe)=>pe!==R);ee.length===1&&(ee[0].fullWidth=!0),H.cells=ee}return H})),B))),n(13,i--,i))}function ue(C){let A=0;return C.forEach(R=>{R.rows.forEach(B=>{B.forEach(H=>{H&&A++})})}),A===0?(ge.notify("Layout cannot be empty.","error"),!1):!0}const V=C=>(C.number,void 0),U=C=>T(C.number),Z=(C,A)=>_(C.number,A.number),N=(C,A,R)=>L(C.number,A.number,R),z=(C,A)=>{A.dataTransfer.setData("name",C.name)},me=(C,A,R)=>J(C.number,A.number,R),et=(C,A,R,B)=>P(B,C.number,A.number,R),yn=C=>I(C.number),Nl=(C,A)=>{A.dataTransfer.setData("name",C.name)};return t.$$set=C=>{"params"in C&&n(0,l=C.params),"columnCount"in C&&n(13,i=C.columnCount),"layoutDisabledParameter"in C&&n(14,a=C.layoutDisabledParameter)},[l,r,s,p,b,D,T,I,_,L,P,J,ue,i,a,V,U,Z,N,z,me,et,yn,Nl]}class ra extends ke{constructor(e){super(),Se(this,e,oa,ta,ye,{params:0,columnCount:13,layoutDisabledParameter:14},null,[-1,-1])}}function sa(t){let e,n;return e=new t[1]({props:{params:t[0],layoutDisabledParameter:t[2],viewType:t[3]}}),{c(){Ge(e.$$.fragment)},m(l,i){Me(e,l,i),n=!0},p(l,[i]){const a={};i&1&&(a.params=l[0]),i&4&&(a.layoutDisabledParameter=l[2]),i&8&&(a.viewType=l[3]),e.$set(a)},i(l){n||(De(e.$$.fragment,l),n=!0)},o(l){Ne(e.$$.fragment,l),n=!1},d(l){Re(e,l)}}}function ua(t,e,n){let{params:l}=e,i,a,o;return t.$$set=r=>{"params"in r&&n(0,l=r.params)},t.$$.update=()=>{if(t.$$.dirty&1)switch(l.type){case"list":n(2,a="layoutListDisabled"),n(1,i=vn);break;case"listSmall":n(2,a="layoutListSmallDisabled"),n(1,i=vn);break;case"kanban":n(1,i=vn);break;case"relationships":n(1,i=Ji);break;case"detail":case"detailSmall":n(1,i=ra);break;case"sidePanelsDetail":n(3,o="detail"),n(1,i=Qt);break;case"sidePanelsDetailSmall":n(3,o="detailSmall"),n(1,i=Qt);break;case"sidePanelsEdit":n(3,o="edit"),n(1,i=Qt);break;case"sidePanelsEditSmall":n(3,o="editSmall"),n(1,i=Qt);break}},[l,i,a,o]}class fa extends ke{constructor(e){super(),Se(this,e,ua,sa,ye,{params:0})}}window.SvelteLanguage=Y,window.SvelteUserData=Yn,window.SvelteNotifier=ge,window.SvelteLayoutManager=He,window.SvelteMetadata=Ue,window.SvelteModelFactory=At,fe.LayoutComponent=fa,fe.QueueManagerIcon=ni,fe.UpdatePanel=ui,Object.defineProperty(fe,Symbol.toStringTag,{value:"Module"})});
