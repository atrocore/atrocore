(function(fe,J){typeof exports=="object"&&typeof module<"u"?J(exports):typeof define=="function"&&define.amd?define(["exports"],J):(fe=typeof globalThis<"u"?globalThis:fe||self,J(fe.Svelte={}))})(this,function(fe){"use strict";var ha=Object.defineProperty;var ma=(fe,J,je)=>J in fe?ha(fe,J,{enumerable:!0,configurable:!0,writable:!0,value:je}):fe[J]=je;var Sn=(fe,J,je)=>ma(fe,typeof J!="symbol"?J+"":J,je);function J(){}function je(t,e){for(const n in e)t[n]=e[n];return t}function kn(t){return t()}function Pn(){return Object.create(null)}function Ie(t){t.forEach(kn)}function Tn(t){return typeof t=="function"}function ve(t,e){return t!=t?e==e:t!==e||t&&typeof t=="object"||typeof t=="function"}let St;function Ln(t,e){return t===e?!0:(St||(St=document.createElement("a")),St.href=e,t===St.href)}function Ml(t){return Object.keys(t).length===0}function Rl(t,e,n,l){if(t){const i=Cn(t,e,n,l);return t[0](i)}}function Cn(t,e,n,l){return t[1]&&l?je(n.ctx.slice(),t[1](l(e))):n.ctx}function Hl(t,e,n,l){if(t[2]&&l){const i=t[2](l(n));if(e.dirty===void 0)return i;if(typeof i=="object"){const a=[],o=Math.max(e.dirty.length,i.length);for(let s=0;s<o;s+=1)a[s]=e.dirty[s]|i[s];return a}return e.dirty|i}return e.dirty}function Bl(t,e,n,l,i,a){if(i){const o=Cn(e,n,l,a);t.p(o,i)}}function Yl(t){if(t.ctx.length>32){const e=[],n=t.ctx.length/32;for(let l=0;l<n;l++)e[l]=-1;return e}return-1}function v(t,e){t.appendChild(e)}function Q(t,e,n){t.insertBefore(e,n||null)}function G(t){t.parentNode&&t.parentNode.removeChild(t)}function Zt(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}function P(t){return document.createElement(t)}function ce(t){return document.createTextNode(t)}function X(){return ce(" ")}function In(){return ce("")}function le(t,e,n,l){return t.addEventListener(e,n,l),()=>t.removeEventListener(e,n,l)}function We(t){return function(e){return e.preventDefault(),t.call(this,e)}}function Jt(t){return function(e){return e.stopPropagation(),t.call(this,e)}}function p(t,e,n){n==null?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}const zl=["width","height"];function kt(t,e){const n=Object.getOwnPropertyDescriptors(t.__proto__);for(const l in e)e[l]==null?t.removeAttribute(l):l==="style"?t.style.cssText=e[l]:l==="__value"?t.value=t[l]=e[l]:n[l]&&n[l].set&&zl.indexOf(l)===-1?t[l]=e[l]:p(t,l,e[l])}function Xl(t){return Array.from(t.childNodes)}function Ae(t,e){e=""+e,t.data!==e&&(t.data=e)}function Ge(t,e,n,l){n==null?t.style.removeProperty(e):t.style.setProperty(e,n,"")}function Pt(t,e,n){t.classList.toggle(e,!!n)}function ql(t,e,{bubbles:n=!1,cancelable:l=!1}={}){return new CustomEvent(t,{detail:e,bubbles:n,cancelable:l})}let dt;function ht(t){dt=t}function Tt(){if(!dt)throw new Error("Function called outside component initialization");return dt}function xt(t){Tt().$$.on_mount.push(t)}function jl(t){Tt().$$.after_update.push(t)}function An(t){Tt().$$.on_destroy.push(t)}function Wl(){const t=Tt();return(e,n,{cancelable:l=!1}={})=>{const i=t.$$.callbacks[e];if(i){const a=ql(e,n,{cancelable:l});return i.slice().forEach(o=>{o.call(t,a)}),!a.defaultPrevented}return!0}}const tt=[],Oe=[];let nt=[];const On=[],Fn=Promise.resolve();let $t=!1;function Nn(){$t||($t=!0,Fn.then(Rn))}function Mn(){return Nn(),Fn}function en(t){nt.push(t)}const tn=new Set;let lt=0;function Rn(){if(lt!==0)return;const t=dt;do{try{for(;lt<tt.length;){const e=tt[lt];lt++,ht(e),Gl(e.$$)}}catch(e){throw tt.length=0,lt=0,e}for(ht(null),tt.length=0,lt=0;Oe.length;)Oe.pop()();for(let e=0;e<nt.length;e+=1){const n=nt[e];tn.has(n)||(tn.add(n),n())}nt.length=0}while(tt.length);for(;On.length;)On.pop()();$t=!1,tn.clear(),ht(t)}function Gl(t){if(t.fragment!==null){t.update(),Ie(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(en)}}function Ul(t){const e=[],n=[];nt.forEach(l=>t.indexOf(l)===-1?e.push(l):n.push(l)),n.forEach(l=>l()),nt=e}const Lt=new Set;let Ql;function Ee(t,e){t&&t.i&&(Lt.delete(t),t.i(e))}function Fe(t,e,n,l){if(t&&t.o){if(Lt.has(t))return;Lt.add(t),Ql.c.push(()=>{Lt.delete(t)}),t.o(e)}}function de(t){return(t==null?void 0:t.length)!==void 0?t:Array.from(t)}function Ct(t,e){t.d(1),e.delete(t.key)}function It(t,e,n,l,i,a,o,s,u,r,f,c){let h=t.length,m=a.length,d=h;const b={};for(;d--;)b[t[d].key]=d;const g=[],_=new Map,w=new Map,D=[];for(d=m;d--;){const E=c(i,a,d),B=n(E);let C=o.get(B);C?D.push(()=>C.p(E,e)):(C=r(B,E),C.c()),_.set(B,g[d]=C),B in b&&w.set(B,Math.abs(d-b[B]))}const k=new Set,y=new Set;function T(E){Ee(E,1),E.m(s,f),o.set(E.key,E),f=E.first,m--}for(;h&&m;){const E=g[m-1],B=t[h-1],C=E.key,ne=B.key;E===B?(f=E.first,h--,m--):_.has(ne)?!o.has(C)||k.has(C)?T(E):y.has(ne)?h--:w.get(C)>w.get(ne)?(y.add(C),T(E)):(k.add(ne),h--):(u(B,o),h--)}for(;h--;){const E=t[h];_.has(E.key)||u(E,o)}for(;m;)T(g[m-1]);return Ie(D),g}function Hn(t,e){const n={},l={},i={$$scope:1};let a=t.length;for(;a--;){const o=t[a],s=e[a];if(s){for(const u in o)u in s||(l[u]=1);for(const u in s)i[u]||(n[u]=s[u],i[u]=1);t[a]=s}else for(const u in o)i[u]=1}for(const o in l)o in n||(n[o]=void 0);return n}function Ue(t){t&&t.c()}function Ne(t,e,n){const{fragment:l,after_update:i}=t.$$;l&&l.m(e,n),en(()=>{const a=t.$$.on_mount.map(kn).filter(Tn);t.$$.on_destroy?t.$$.on_destroy.push(...a):Ie(a),t.$$.on_mount=[]}),i.forEach(en)}function Me(t,e){const n=t.$$;n.fragment!==null&&(Ul(n.after_update),Ie(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function Vl(t,e){t.$$.dirty[0]===-1&&(tt.push(t),Nn(),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function De(t,e,n,l,i,a,o=null,s=[-1]){const u=dt;ht(t);const r=t.$$={fragment:null,ctx:[],props:a,update:J,not_equal:i,bound:Pn(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(u?u.$$.context:[])),callbacks:Pn(),dirty:s,skip_bound:!1,root:e.target||u.$$.root};o&&o(r.root);let f=!1;if(r.ctx=n?n(t,e.props||{},(c,h,...m)=>{const d=m.length?m[0]:h;return r.ctx&&i(r.ctx[c],r.ctx[c]=d)&&(!r.skip_bound&&r.bound[c]&&r.bound[c](d),f&&Vl(t,c)),h}):[],r.update(),f=!0,Ie(r.before_update),r.fragment=l?l(r.ctx):!1,e.target){if(e.hydrate){const c=Xl(e.target);r.fragment&&r.fragment.l(c),c.forEach(G)}else r.fragment&&r.fragment.c();e.intro&&Ee(t.$$.fragment),Ne(t,e.target,e.anchor),Rn()}ht(u)}class Se{constructor(){Sn(this,"$$");Sn(this,"$$set")}$destroy(){Me(this,1),this.$destroy=J}$on(e,n){if(!Tn(n))return J;const l=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return l.push(n),()=>{const i=l.indexOf(n);i!==-1&&l.splice(i,1)}}$set(e){this.$$set&&!Ml(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}const Kl="4",it=[];function at(t,e=J){let n;const l=new Set;function i(s){if(ve(t,s)&&(t=s,n)){const u=!it.length;for(const r of l)r[1](),it.push(r,t);if(u){for(let r=0;r<it.length;r+=2)it[r][0](it[r+1]);it.length=0}}}function a(s){i(s(t))}function o(s,u=J){const r=[s,u];return l.add(r),l.size===1&&(n=e(i,a)||J),s(t),()=>{l.delete(r),l.size===0&&n&&(n(),n=null)}}return{set:i,update:a,subscribe:o}}const nn=at({}),H={setTranslations(t){nn.set(t)},has(t,e,n){let l=!1;return nn.subscribe(i=>{if(n in i&&e in i[n]&&t in i[n][e]){l=!0;return}})(),l},get(t,e,n){let l=n;return nn.subscribe(i=>{if(t in i&&e in i[t]&&n in i[t][e]){l=i[t][e][n];return}if(t in i&&e in i[t]&&n in i[t][e]){l=i[t][e][n];return}if(t=="Global"){l=n;return}l=null})(),l},translate(t,e=null,n=null){n=n||"Global",e=e||"labels";let l=H.get(n,e,t);return l===null&&n!="Global"&&(l=H.get("Global",e,t)),l},translateOption(t,e,n=null){let l=H.translate(e,"options",n);return l===null?"":typeof l=="object"?l[t]:t}},Bn=at({}),Yn={set(t){Bn.set(t)},get(){let t=null;return Bn.subscribe(e=>{e&&(t=e)})(),t}},ln=at(),Re={setNotifier(t){ln.set(t)},notify(t,e=null,n=2e3){ln.subscribe(l=>{l&&l.notify(t,e,2e3)})()},confirm(t=null,e=null,n){ln.subscribe(l=>{if(l){let i=null,a=null,o=null;typeof t=="string"||t instanceof String?(a=t,o=H.translate("Yes")):(t=t||{},a=t.message,o=t.confirmText,i=t.confirmStyle||null),l.confirm(a,{confirmText:o,cancelText:H.translate("Cancel"),confirmStyle:i},e,n)}})()}},At=at(),He={setLayoutManager(t){At.set(t)},resetToDefault(t,e,n,l){let i=null;return At.subscribe(a=>{a&&(i=a.resetToDefault(t,e,n,l))})(),i},get:function(t,e,n,l,i){let a=null;return At.subscribe(o=>{o&&(a=o.get(t,e,n,l,i))})(),a},set:function(t,e,n,l,i){let a=null;return At.subscribe(o=>{o&&(a=o.set(t,e,n,l,i))})(),a}},zn=at(),Be={setMetadata(t){zn.set(t)},get(t){let e=null;return zn.subscribe(n=>{n&&(e=n.get(t))})(),e}},Xn=at(),Ot={setModelFactory(t){Xn.set(t)},create(t,e){Xn.subscribe(n=>{n&&n.create(t,e)})()}};typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(Kl);function qn(t){let e,n,l,i,a,o,s,u,r,f,c,h,m,d,b;function g(D,k){return D[2]?Jl:Zl}let _=g(t),w=_(t);return{c(){e=P("div"),n=P("div"),l=P("div"),i=P("span"),i.textContent=`${H.translate("queueManager","labels","QueueItem")}`,a=X(),o=P("span"),s=P("a"),s.innerHTML='<span aria-hidden="true">Ã—</span>',u=X(),w.c(),r=X(),f=P("a"),f.textContent=`${H.translate("View List")}`,c=X(),h=P("div"),m=P("div"),m.textContent=`${H.translate("Loading...")}`,p(i,"class","panel-heading-title"),p(s,"href","/"),p(s,"class","close svelte-1p6ppx8"),p(f,"href","#QueueItem"),p(f,"title",H.translate("View List")),p(f,"class","qp-view-list svelte-1p6ppx8"),p(o,"class","pull-right"),p(l,"class","panel-heading clearfix"),p(m,"class","list-container"),p(h,"class","panel-body"),p(n,"class","panel panel-default"),p(e,"class","queue-panel-container")},m(D,k){Q(D,e,k),v(e,n),v(n,l),v(l,i),v(l,a),v(l,o),v(o,s),v(o,u),w.m(o,null),v(o,r),v(o,f),v(n,c),v(n,h),v(h,m),t[9](e),d||(b=le(s,"click",t[6]),d=!0)},p(D,k){_===(_=g(D))&&w?w.p(D,k):(w.d(1),w=_(D),w&&(w.c(),w.m(o,r)))},d(D){D&&G(e),w.d(),t[9](null),d=!1,b()}}}function Zl(t){let e,n,l;return{c(){e=P("a"),e.textContent=`${H.translate("Pause")}`,p(e,"href","/"),p(e,"title",H.translate("Pause")),p(e,"class","qm-button")},m(i,a){Q(i,e,a),n||(l=le(e,"click",t[8]),n=!0)},p:J,d(i){i&&G(e),n=!1,l()}}}function Jl(t){let e,n,l;return{c(){e=P("a"),e.textContent=`${H.translate("Start")}`,p(e,"href","/"),p(e,"title",H.translate("Start")),p(e,"class","qm-button")},m(i,a){Q(i,e,a),n||(l=le(e,"click",t[7]),n=!0)},p:J,d(i){i&&G(e),n=!1,l()}}}function xl(t){let e,n=t[0]&&qn(t);return{c(){n&&n.c(),e=In()},m(l,i){n&&n.m(l,i),Q(l,e,i)},p(l,[i]){l[0]?n?n.p(l,i):(n=qn(l),n.c(),n.m(e.parentNode,e)):n&&(n.d(1),n=null)},i:J,o:J,d(l){l&&G(e),n&&n.d(l)}}}function $l(t,e,n){let{isOpen:l=!1}=e,{close:i}=e,{icon:a}=e,o=!1;window.addEventListener("publicDataFetched",d=>{n(2,o=!!d.detail.qmPaused)});let s;function u(d){s&&!s.contains(d.target)&&a&&!a.contains(d.target)&&l===!0&&i()}xt(()=>{document.addEventListener("click",u)}),An(()=>{document.removeEventListener("click",u)});async function r(d){let b=Yn.get();if(b)try{const g=await fetch("/api/v1/App/action/QueueManagerUpdate",{method:"POST",headers:{"Content-Type":"application/json","Authorization-Token":btoa(b.user.userName+":"+b.token)},body:JSON.stringify({pause:d})});if(!g.ok)throw new Error("Network response was not ok");await g.json(),Re.notify("Done","success")}catch(g){console.error("Error:",g)}}const f=d=>{d.preventDefault(),i()},c=d=>{d.preventDefault(),r(!1)},h=d=>{d.preventDefault(),r(!0)};function m(d){Oe[d?"unshift":"push"](()=>{s=d,n(3,s)})}return t.$$set=d=>{"isOpen"in d&&n(0,l=d.isOpen),"close"in d&&n(1,i=d.close),"icon"in d&&n(5,a=d.icon)},[l,i,o,s,r,a,f,c,h,m]}class ei extends Se{constructor(e){super(),De(this,e,$l,xl,ve,{isOpen:0,close:1,icon:5})}}function jn(t){let e;return{c(){e=P("span"),p(e,"class","fas fa-pause-circle pause-icon")},m(n,l){Q(n,e,l)},d(n){n&&G(e)}}}function ti(t){let e,n,l,i,a,o,s,u,r=t[2]&&jn();return a=new ei({props:{icon:t[0],isOpen:t[1],close:t[4]}}),{c(){e=P("a"),n=P("span"),l=X(),r&&r.c(),i=X(),Ue(a.$$.fragment),p(n,"class","fas fa-tasks"),p(e,"href","/"),p(e,"class","notifications-button")},m(f,c){Q(f,e,c),v(e,n),v(e,l),r&&r.m(e,null),t[6](e),Q(f,i,c),Ne(a,f,c),o=!0,s||(u=le(e,"click",t[7]),s=!0)},p(f,[c]){f[2]?r||(r=jn(),r.c(),r.m(e,null)):r&&(r.d(1),r=null);const h={};c&1&&(h.icon=f[0]),c&2&&(h.isOpen=f[1]),a.$set(h)},i(f){o||(Ee(a.$$.fragment,f),o=!0)},o(f){Fe(a.$$.fragment,f),o=!1},d(f){f&&(G(e),G(i)),r&&r.d(),t[6](null),Me(a,f),s=!1,u()}}}function ni(t,e,n){let{renderTable:l=()=>{}}=e,i,a=!1,o=!1;window.addEventListener("publicDataFetched",c=>{n(2,o=!!c.detail.qmPaused)});function s(){a||(n(1,a=!0),l())}function u(){n(1,a=!1),window.dispatchEvent(new Event("qmPanelClosed"))}function r(c){Oe[c?"unshift":"push"](()=>{i=c,n(0,i)})}const f=c=>{c.preventDefault(),s()};return t.$$set=c=>{"renderTable"in c&&n(5,l=c.renderTable)},[i,a,o,s,u,l,r,f]}class li extends Se{constructor(e){super(),De(this,e,ni,ti,ve,{renderTable:5})}}function ii(t){let e,n=`${t[0]}px`,l=`${t[0]}px`,i=`${t[1]}px`;return{c(){e=P("div"),p(e,"class","loading-icon spinner svelte-yw8t7l"),Ge(e,"width",n),Ge(e,"height",l),Ge(e,"border-width",i)},m(a,o){Q(a,e,o)},p(a,[o]){o&1&&n!==(n=`${a[0]}px`)&&Ge(e,"width",n),o&1&&l!==(l=`${a[0]}px`)&&Ge(e,"height",l),o&2&&i!==(i=`${a[1]}px`)&&Ge(e,"border-width",i)},i:J,o:J,d(a){a&&G(e)}}}function ai(t,e,n){let{size:l=40}=e,{thickness:i=4}=e;return t.$$set=a=>{"size"in a&&n(0,l=a.size),"thickness"in a&&n(1,i=a.thickness)},[l,i]}class oi extends Se{constructor(e){super(),De(this,e,ai,ii,ve,{size:0,thickness:1})}}function Wn(t){let e,n;return{c(){e=P("img"),Ln(e.src,n=t[1])||p(e,"src",n),p(e,"class","logo"),p(e,"alt",t[0])},m(l,i){Q(l,e,i)},p(l,i){i&2&&!Ln(e.src,n=l[1])&&p(e,"src",n),i&1&&p(e,"alt",l[0])},d(l){l&&G(e)}}}function Gn(t){let e,n,l;return{c(){e=P("a"),n=P("i"),l=ce("Recovery Instructions"),p(n,"class","fa fa-history svelte-1qmezxs"),p(e,"href",t[2]),p(e,"target","_blank"),p(e,"class","btn btn-default svelte-1qmezxs"),p(e,"role","button"),Ge(e,"float","right")},m(i,a){Q(i,e,a),v(e,n),v(e,l)},p(i,a){a&4&&p(e,"href",i[2])},d(i){i&&G(e)}}}function Un(t){let e,n,l,i,a,o;return{c(){e=P("hr"),n=X(),l=P("pre"),i=ce(t[3]),p(l,"class","logs-container svelte-1qmezxs")},m(s,u){Q(s,e,u),Q(s,n,u),Q(s,l,u),v(l,i),t[11](l),a||(o=le(l,"scroll",t[8]),a=!0)},p(s,u){u&8&&Ae(i,s[3])},d(s){s&&(G(e),G(n),G(l)),t[11](null),a=!1,o()}}}function ri(t){let e,n,l,i,a,o,s,u,r,f,c,h,m,d,b,g,_,w,D=t[4]?"Hide":"Show",k,y,T,E,B,C,ne,se,V=t[1]&&Wn(t);f=new oi({props:{size:"40",thickness:"5"}});let W=t[2]&&Gn(t),K=t[4]&&t[3]&&Un(t);return{c(){e=P("div"),n=P("div"),l=P("div"),V&&V.c(),i=X(),a=P("div"),o=P("div"),s=P("h3"),s.textContent="System is updating...",u=X(),r=P("section"),Ue(f.$$.fragment),c=X(),h=P("h5"),m=ce(t[5]),d=X(),b=P("section"),g=P("div"),_=P("button"),w=P("i"),k=ce(D),y=ce(" logs"),E=X(),W&&W.c(),B=X(),K&&K.c(),p(l,"class","logo-container"),p(n,"class","panel-heading"),p(h,"class","svelte-1qmezxs"),p(r,"class","progress-section svelte-1qmezxs"),p(w,"class","fa fa-list svelte-1qmezxs"),p(_,"class","btn btn-default svelte-1qmezxs"),_.disabled=T=!t[3],p(g,"class","buttons"),p(b,"class","logs-section"),p(o,"class","form-group"),p(a,"class","panel-body"),p(e,"id","login"),p(e,"class","panel panel-default panel-updating")},m(F,z){Q(F,e,z),v(e,n),v(n,l),V&&V.m(l,null),v(e,i),v(e,a),v(a,o),v(o,s),v(o,u),v(o,r),Ne(f,r,null),v(r,c),v(r,h),v(h,m),v(o,d),v(o,b),v(b,g),v(g,_),v(_,w),v(_,k),v(_,y),v(g,E),W&&W.m(g,null),v(b,B),K&&K.m(b,null),C=!0,ne||(se=le(_,"click",t[7]),ne=!0)},p(F,[z]){F[1]?V?V.p(F,z):(V=Wn(F),V.c(),V.m(l,null)):V&&(V.d(1),V=null),(!C||z&32)&&Ae(m,F[5]),(!C||z&16)&&D!==(D=F[4]?"Hide":"Show")&&Ae(k,D),(!C||z&8&&T!==(T=!F[3]))&&(_.disabled=T),F[2]?W?W.p(F,z):(W=Gn(F),W.c(),W.m(g,null)):W&&(W.d(1),W=null),F[4]&&F[3]?K?K.p(F,z):(K=Un(F),K.c(),K.m(b,null)):K&&(K.d(1),K=null)},i(F){C||(Ee(f.$$.fragment,F),C=!0)},o(F){Fe(f.$$.fragment,F),C=!1},d(F){F&&G(e),V&&V.d(),Me(f),W&&W.d(),K&&K.d(),ne=!1,se()}}}function si(t){return t.replace(/^\d{2,4}.\d{2}.\d{2,4} \d{2}:\d{2}:\d{2}/g,"").replace(/^[\-\|\s]+/,"")}function ui(t,e,n){let{applicationName:l="AtroCore"}=e,{logoPath:i=null}=e,{logFilePath:a}=e,{restoreLink:o=null}=e,s=!1,u=!1,r=0,f=!0,c="",h,m;jl(()=>{m&&f&&m.scrollTo(0,m.scrollHeight)});function d(){n(4,s=!s),s||(f=!0)}function b(_){const w=_.currentTarget;f=w.scrollHeight-w.scrollTop===w.clientHeight}setInterval(async()=>{try{const _=await fetch(a,{cache:"no-store"});r+=1,_.ok?(n(3,c=(await _.text()).trim()),c.search("composer")>=0&&n(10,u=!0),r>65&&!u&&n(3,c="Something wrong. Please, reboot the server.")):u?setTimeout(()=>{location.reload()},2e3):r>65&&n(3,c="Something wrong. Please, reboot the server.")}catch(_){console.error("Error: ",_)}},1e3);function g(_){Oe[_?"unshift":"push"](()=>{m=_,n(6,m)})}return t.$$set=_=>{"applicationName"in _&&n(0,l=_.applicationName),"logoPath"in _&&n(1,i=_.logoPath),"logFilePath"in _&&n(9,a=_.logFilePath),"restoreLink"in _&&n(2,o=_.restoreLink)},t.$$.update=()=>{if(t.$$.dirty&1032)if(c){const _=c.trim().split(`
`);n(5,h=si(_.pop()))}else u?n(5,h=""):n(5,h="Starting...")},[l,i,o,c,s,h,m,d,b,a,u,g]}class fi extends Se{constructor(e){super(),De(this,e,ui,ri,ve,{applicationName:0,logoPath:1,logFilePath:9,restoreLink:2})}}function Qn(t,e,n){const l=t.slice();return l[15]=e[n],l}function Vn(t){let e,n=t[15].label+"",l,i,a,o,s,u,r;function f(){return t[9](t[15])}return{c(){e=P("button"),l=ce(n),i=X(),p(e,"data-action",a=t[15].name),e.disabled=o=t[15].disabled,p(e,"type","button"),p(e,"class",s=`btn action btn-${t[15].style??"default"}`)},m(c,h){Q(c,e,h),v(e,l),v(e,i),u||(r=le(e,"click",f),u=!0)},p(c,h){t=c,h&1&&n!==(n=t[15].label+"")&&Ae(l,n),h&1&&a!==(a=t[15].name)&&p(e,"data-action",a),h&1&&o!==(o=t[15].disabled)&&(e.disabled=o),h&1&&s!==(s=`btn action btn-${t[15].style??"default"}`)&&p(e,"class",s)},d(c){c&&G(e),u=!1,r()}}}function ci(t){let e,n,l,i=de(t[0]),a=[];for(let u=0;u<i.length;u+=1)a[u]=Vn(Qn(t,i,u));const o=t[8].default,s=Rl(o,t,t[7],null);return{c(){e=P("div");for(let u=0;u<a.length;u+=1)a[u].c();n=X(),s&&s.c(),p(e,"class","button-container")},m(u,r){Q(u,e,r);for(let f=0;f<a.length;f+=1)a[f]&&a[f].m(e,null);Q(u,n,r),s&&s.m(u,r),l=!0},p(u,[r]){if(r&3){i=de(u[0]);let f;for(f=0;f<i.length;f+=1){const c=Qn(u,i,f);a[f]?a[f].p(c,r):(a[f]=Vn(c),a[f].c(),a[f].m(e,null))}for(;f<a.length;f+=1)a[f].d(1);a.length=i.length}s&&s.p&&(!l||r&128)&&Bl(s,o,u,u[7],l?Hl(o,u[7],r,null):Yl(u[7]),null)},i(u){l||(Ee(s,u),l=!0)},o(u){Fe(s,u),l=!1},d(u){u&&(G(e),G(n)),Zt(a,u),s&&s.d(u)}}}function di(t,e,n){let{$$slots:l={},$$scope:i}=e,{params:a}=e,{fetch:o}=e,{loadLayout:s=()=>{He.get(scope,type,layoutProfileId,w=>{layout=w},!1)}}=e,{validate:u=()=>!0}=e,r=[{name:"save",label:"Save",style:"primary"},{name:"cancel",label:"Cancel"},{name:"resetToDefault",label:"Reset to Default"}];xt(()=>{Re.notify("Loading..."),s(()=>{Re.notify(!1),a.afterRender&&a.afterRender()})});function f(){d();const w=o();if(!u(w)){b();return}Re.notify("Saving..."),He.set(a.scope,a.type,a.layoutProfileId,w,()=>{Re.notify("Saved","success",2e3),c(),b()})}function c(){a.onUpdate&&a.onUpdate({scope:a.scope,type:a.type,layoutProfileId:a.layoutProfileId})}function h(){s()}function m(){Re.confirm("Are you sure you want to reset to default?",()=>{He.resetToDefault(a.scope,a.type,a.layoutProfileId,()=>{c(),h()})})}function d(){n(0,r=r.map(w=>({...w,disabled:!0})))}function b(){n(0,r=r.map(w=>({...w,disabled:!1})))}function g(w){switch(w.name){case"save":f();break;case"cancel":h();break;case"resetToDefault":m();break}}const _=w=>g(w);return t.$$set=w=>{"params"in w&&n(2,a=w.params),"fetch"in w&&n(3,o=w.fetch),"loadLayout"in w&&n(4,s=w.loadLayout),"validate"in w&&n(5,u=w.validate),"$$scope"in w&&n(7,i=w.$$scope)},[r,g,a,o,s,u,f,i,l,_]}class Kn extends Se{constructor(e){super(),De(this,e,di,ci,ve,{params:2,fetch:3,loadLayout:4,validate:5,save:6})}get save(){return this.$$.ctx[6]}}/**!
 * Sortable 1.15.2
 * @author	RubaXa   <trash@rubaxa.org>
 * @author	owenm    <owen23355@gmail.com>
 * @license MIT
 */function Zn(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(t);e&&(l=l.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,l)}return n}function Te(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Zn(Object(n),!0).forEach(function(l){hi(t,l,n[l])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Zn(Object(n)).forEach(function(l){Object.defineProperty(t,l,Object.getOwnPropertyDescriptor(n,l))})}return t}function Ft(t){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Ft=function(e){return typeof e}:Ft=function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ft(t)}function hi(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Ye(){return Ye=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var l in n)Object.prototype.hasOwnProperty.call(n,l)&&(t[l]=n[l])}return t},Ye.apply(this,arguments)}function mi(t,e){if(t==null)return{};var n={},l=Object.keys(t),i,a;for(a=0;a<l.length;a++)i=l[a],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}function pi(t,e){if(t==null)return{};var n=mi(t,e),l,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)l=a[i],!(e.indexOf(l)>=0)&&Object.prototype.propertyIsEnumerable.call(t,l)&&(n[l]=t[l])}return n}var gi="1.15.2";function ze(t){if(typeof window<"u"&&window.navigator)return!!navigator.userAgent.match(t)}var Xe=ze(/(?:Trident.*rv[ :]?11\.|msie|iemobile|Windows Phone)/i),mt=ze(/Edge/i),Jn=ze(/firefox/i),pt=ze(/safari/i)&&!ze(/chrome/i)&&!ze(/android/i),xn=ze(/iP(ad|od|hone)/i),$n=ze(/chrome/i)&&ze(/android/i),el={capture:!1,passive:!1};function j(t,e,n){t.addEventListener(e,n,!Xe&&el)}function q(t,e,n){t.removeEventListener(e,n,!Xe&&el)}function Nt(t,e){if(e){if(e[0]===">"&&(e=e.substring(1)),t)try{if(t.matches)return t.matches(e);if(t.msMatchesSelector)return t.msMatchesSelector(e);if(t.webkitMatchesSelector)return t.webkitMatchesSelector(e)}catch{return!1}return!1}}function bi(t){return t.host&&t!==document&&t.host.nodeType?t.host:t.parentNode}function ke(t,e,n,l){if(t){n=n||document;do{if(e!=null&&(e[0]===">"?t.parentNode===n&&Nt(t,e):Nt(t,e))||l&&t===n)return t;if(t===n)break}while(t=bi(t))}return null}var tl=/\s+/g;function ge(t,e,n){if(t&&e)if(t.classList)t.classList[n?"add":"remove"](e);else{var l=(" "+t.className+" ").replace(tl," ").replace(" "+e+" "," ");t.className=(l+(n?" "+e:"")).replace(tl," ")}}function O(t,e,n){var l=t&&t.style;if(l){if(n===void 0)return document.defaultView&&document.defaultView.getComputedStyle?n=document.defaultView.getComputedStyle(t,""):t.currentStyle&&(n=t.currentStyle),e===void 0?n:n[e];!(e in l)&&e.indexOf("webkit")===-1&&(e="-webkit-"+e),l[e]=n+(typeof n=="string"?"":"px")}}function ot(t,e){var n="";if(typeof t=="string")n=t;else do{var l=O(t,"transform");l&&l!=="none"&&(n=l+" "+n)}while(!e&&(t=t.parentNode));var i=window.DOMMatrix||window.WebKitCSSMatrix||window.CSSMatrix||window.MSCSSMatrix;return i&&new i(n)}function nl(t,e,n){if(t){var l=t.getElementsByTagName(e),i=0,a=l.length;if(n)for(;i<a;i++)n(l[i],i);return l}return[]}function Le(){var t=document.scrollingElement;return t||document.documentElement}function ie(t,e,n,l,i){if(!(!t.getBoundingClientRect&&t!==window)){var a,o,s,u,r,f,c;if(t!==window&&t.parentNode&&t!==Le()?(a=t.getBoundingClientRect(),o=a.top,s=a.left,u=a.bottom,r=a.right,f=a.height,c=a.width):(o=0,s=0,u=window.innerHeight,r=window.innerWidth,f=window.innerHeight,c=window.innerWidth),(e||n)&&t!==window&&(i=i||t.parentNode,!Xe))do if(i&&i.getBoundingClientRect&&(O(i,"transform")!=="none"||n&&O(i,"position")!=="static")){var h=i.getBoundingClientRect();o-=h.top+parseInt(O(i,"border-top-width")),s-=h.left+parseInt(O(i,"border-left-width")),u=o+a.height,r=s+a.width;break}while(i=i.parentNode);if(l&&t!==window){var m=ot(i||t),d=m&&m.a,b=m&&m.d;m&&(o/=b,s/=d,c/=d,f/=b,u=o+f,r=s+c)}return{top:o,left:s,bottom:u,right:r,width:c,height:f}}}function ll(t,e,n){for(var l=Qe(t,!0),i=ie(t)[e];l;){var a=ie(l)[n],o=void 0;if(o=i>=a,!o)return l;if(l===Le())break;l=Qe(l,!1)}return!1}function rt(t,e,n,l){for(var i=0,a=0,o=t.children;a<o.length;){if(o[a].style.display!=="none"&&o[a]!==A.ghost&&(l||o[a]!==A.dragged)&&ke(o[a],n.draggable,t,!1)){if(i===e)return o[a];i++}a++}return null}function an(t,e){for(var n=t.lastElementChild;n&&(n===A.ghost||O(n,"display")==="none"||e&&!Nt(n,e));)n=n.previousElementSibling;return n||null}function ye(t,e){var n=0;if(!t||!t.parentNode)return-1;for(;t=t.previousElementSibling;)t.nodeName.toUpperCase()!=="TEMPLATE"&&t!==A.clone&&(!e||Nt(t,e))&&n++;return n}function il(t){var e=0,n=0,l=Le();if(t)do{var i=ot(t),a=i.a,o=i.d;e+=t.scrollLeft*a,n+=t.scrollTop*o}while(t!==l&&(t=t.parentNode));return[e,n]}function _i(t,e){for(var n in t)if(t.hasOwnProperty(n)){for(var l in e)if(e.hasOwnProperty(l)&&e[l]===t[n][l])return Number(n)}return-1}function Qe(t,e){if(!t||!t.getBoundingClientRect)return Le();var n=t,l=!1;do if(n.clientWidth<n.scrollWidth||n.clientHeight<n.scrollHeight){var i=O(n);if(n.clientWidth<n.scrollWidth&&(i.overflowX=="auto"||i.overflowX=="scroll")||n.clientHeight<n.scrollHeight&&(i.overflowY=="auto"||i.overflowY=="scroll")){if(!n.getBoundingClientRect||n===document.body)return Le();if(l||e)return n;l=!0}}while(n=n.parentNode);return Le()}function vi(t,e){if(t&&e)for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t}function on(t,e){return Math.round(t.top)===Math.round(e.top)&&Math.round(t.left)===Math.round(e.left)&&Math.round(t.height)===Math.round(e.height)&&Math.round(t.width)===Math.round(e.width)}var gt;function al(t,e){return function(){if(!gt){var n=arguments,l=this;n.length===1?t.call(l,n[0]):t.apply(l,n),gt=setTimeout(function(){gt=void 0},e)}}}function yi(){clearTimeout(gt),gt=void 0}function ol(t,e,n){t.scrollLeft+=e,t.scrollTop+=n}function rl(t){var e=window.Polymer,n=window.jQuery||window.Zepto;return e&&e.dom?e.dom(t).cloneNode(!0):n?n(t).clone(!0)[0]:t.cloneNode(!0)}function sl(t,e,n){var l={};return Array.from(t.children).forEach(function(i){var a,o,s,u;if(!(!ke(i,e.draggable,t,!1)||i.animated||i===n)){var r=ie(i);l.left=Math.min((a=l.left)!==null&&a!==void 0?a:1/0,r.left),l.top=Math.min((o=l.top)!==null&&o!==void 0?o:1/0,r.top),l.right=Math.max((s=l.right)!==null&&s!==void 0?s:-1/0,r.right),l.bottom=Math.max((u=l.bottom)!==null&&u!==void 0?u:-1/0,r.bottom)}}),l.width=l.right-l.left,l.height=l.bottom-l.top,l.x=l.left,l.y=l.top,l}var be="Sortable"+new Date().getTime();function wi(){var t=[],e;return{captureAnimationState:function(){if(t=[],!!this.options.animation){var l=[].slice.call(this.el.children);l.forEach(function(i){if(!(O(i,"display")==="none"||i===A.ghost)){t.push({target:i,rect:ie(i)});var a=Te({},t[t.length-1].rect);if(i.thisAnimationDuration){var o=ot(i,!0);o&&(a.top-=o.f,a.left-=o.e)}i.fromRect=a}})}},addAnimationState:function(l){t.push(l)},removeAnimationState:function(l){t.splice(_i(t,{target:l}),1)},animateAll:function(l){var i=this;if(!this.options.animation){clearTimeout(e),typeof l=="function"&&l();return}var a=!1,o=0;t.forEach(function(s){var u=0,r=s.target,f=r.fromRect,c=ie(r),h=r.prevFromRect,m=r.prevToRect,d=s.rect,b=ot(r,!0);b&&(c.top-=b.f,c.left-=b.e),r.toRect=c,r.thisAnimationDuration&&on(h,c)&&!on(f,c)&&(d.top-c.top)/(d.left-c.left)===(f.top-c.top)/(f.left-c.left)&&(u=Di(d,h,m,i.options)),on(c,f)||(r.prevFromRect=f,r.prevToRect=c,u||(u=i.options.animation),i.animate(r,d,c,u)),u&&(a=!0,o=Math.max(o,u),clearTimeout(r.animationResetTimer),r.animationResetTimer=setTimeout(function(){r.animationTime=0,r.prevFromRect=null,r.fromRect=null,r.prevToRect=null,r.thisAnimationDuration=null},u),r.thisAnimationDuration=u)}),clearTimeout(e),a?e=setTimeout(function(){typeof l=="function"&&l()},o):typeof l=="function"&&l(),t=[]},animate:function(l,i,a,o){if(o){O(l,"transition",""),O(l,"transform","");var s=ot(this.el),u=s&&s.a,r=s&&s.d,f=(i.left-a.left)/(u||1),c=(i.top-a.top)/(r||1);l.animatingX=!!f,l.animatingY=!!c,O(l,"transform","translate3d("+f+"px,"+c+"px,0)"),this.forRepaintDummy=Ei(l),O(l,"transition","transform "+o+"ms"+(this.options.easing?" "+this.options.easing:"")),O(l,"transform","translate3d(0,0,0)"),typeof l.animated=="number"&&clearTimeout(l.animated),l.animated=setTimeout(function(){O(l,"transition",""),O(l,"transform",""),l.animated=!1,l.animatingX=!1,l.animatingY=!1},o)}}}}function Ei(t){return t.offsetWidth}function Di(t,e,n,l){return Math.sqrt(Math.pow(e.top-t.top,2)+Math.pow(e.left-t.left,2))/Math.sqrt(Math.pow(e.top-n.top,2)+Math.pow(e.left-n.left,2))*l.animation}var st=[],rn={initializeByDefault:!0},bt={mount:function(e){for(var n in rn)rn.hasOwnProperty(n)&&!(n in e)&&(e[n]=rn[n]);st.forEach(function(l){if(l.pluginName===e.pluginName)throw"Sortable: Cannot mount plugin ".concat(e.pluginName," more than once")}),st.push(e)},pluginEvent:function(e,n,l){var i=this;this.eventCanceled=!1,l.cancel=function(){i.eventCanceled=!0};var a=e+"Global";st.forEach(function(o){n[o.pluginName]&&(n[o.pluginName][a]&&n[o.pluginName][a](Te({sortable:n},l)),n.options[o.pluginName]&&n[o.pluginName][e]&&n[o.pluginName][e](Te({sortable:n},l)))})},initializePlugins:function(e,n,l,i){st.forEach(function(s){var u=s.pluginName;if(!(!e.options[u]&&!s.initializeByDefault)){var r=new s(e,n,e.options);r.sortable=e,r.options=e.options,e[u]=r,Ye(l,r.defaults)}});for(var a in e.options)if(e.options.hasOwnProperty(a)){var o=this.modifyOption(e,a,e.options[a]);typeof o<"u"&&(e.options[a]=o)}},getEventProperties:function(e,n){var l={};return st.forEach(function(i){typeof i.eventProperties=="function"&&Ye(l,i.eventProperties.call(n[i.pluginName],e))}),l},modifyOption:function(e,n,l){var i;return st.forEach(function(a){e[a.pluginName]&&a.optionListeners&&typeof a.optionListeners[n]=="function"&&(i=a.optionListeners[n].call(e[a.pluginName],l))}),i}};function Si(t){var e=t.sortable,n=t.rootEl,l=t.name,i=t.targetEl,a=t.cloneEl,o=t.toEl,s=t.fromEl,u=t.oldIndex,r=t.newIndex,f=t.oldDraggableIndex,c=t.newDraggableIndex,h=t.originalEvent,m=t.putSortable,d=t.extraEventProperties;if(e=e||n&&n[be],!!e){var b,g=e.options,_="on"+l.charAt(0).toUpperCase()+l.substr(1);window.CustomEvent&&!Xe&&!mt?b=new CustomEvent(l,{bubbles:!0,cancelable:!0}):(b=document.createEvent("Event"),b.initEvent(l,!0,!0)),b.to=o||n,b.from=s||n,b.item=i||n,b.clone=a,b.oldIndex=u,b.newIndex=r,b.oldDraggableIndex=f,b.newDraggableIndex=c,b.originalEvent=h,b.pullMode=m?m.lastPutMode:void 0;var w=Te(Te({},d),bt.getEventProperties(l,e));for(var D in w)b[D]=w[D];n&&n.dispatchEvent(b),g[_]&&g[_].call(e,b)}}var ki=["evt"],he=function(e,n){var l=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},i=l.evt,a=pi(l,ki);bt.pluginEvent.bind(A)(e,n,Te({dragEl:S,parentEl:te,ghostEl:N,rootEl:x,nextEl:Je,lastDownEl:Mt,cloneEl:$,cloneHidden:Ve,dragStarted:vt,putSortable:oe,activeSortable:A.active,originalEvent:i,oldIndex:ut,oldDraggableIndex:_t,newIndex:_e,newDraggableIndex:Ke,hideGhostForTarget:pl,unhideGhostForTarget:gl,cloneNowHidden:function(){Ve=!0},cloneNowShown:function(){Ve=!1},dispatchSortableEvent:function(s){ue({sortable:n,name:s,originalEvent:i})}},a))};function ue(t){Si(Te({putSortable:oe,cloneEl:$,targetEl:S,rootEl:x,oldIndex:ut,oldDraggableIndex:_t,newIndex:_e,newDraggableIndex:Ke},t))}var S,te,N,x,Je,Mt,$,Ve,ut,_e,_t,Ke,Rt,oe,ft=!1,Ht=!1,Bt=[],xe,Pe,sn,un,ul,fl,vt,ct,yt,wt=!1,Yt=!1,zt,re,fn=[],cn=!1,Xt=[],qt=typeof document<"u",jt=xn,cl=mt||Xe?"cssFloat":"float",Pi=qt&&!$n&&!xn&&"draggable"in document.createElement("div"),dl=function(){if(qt){if(Xe)return!1;var t=document.createElement("x");return t.style.cssText="pointer-events:auto",t.style.pointerEvents==="auto"}}(),hl=function(e,n){var l=O(e),i=parseInt(l.width)-parseInt(l.paddingLeft)-parseInt(l.paddingRight)-parseInt(l.borderLeftWidth)-parseInt(l.borderRightWidth),a=rt(e,0,n),o=rt(e,1,n),s=a&&O(a),u=o&&O(o),r=s&&parseInt(s.marginLeft)+parseInt(s.marginRight)+ie(a).width,f=u&&parseInt(u.marginLeft)+parseInt(u.marginRight)+ie(o).width;if(l.display==="flex")return l.flexDirection==="column"||l.flexDirection==="column-reverse"?"vertical":"horizontal";if(l.display==="grid")return l.gridTemplateColumns.split(" ").length<=1?"vertical":"horizontal";if(a&&s.float&&s.float!=="none"){var c=s.float==="left"?"left":"right";return o&&(u.clear==="both"||u.clear===c)?"vertical":"horizontal"}return a&&(s.display==="block"||s.display==="flex"||s.display==="table"||s.display==="grid"||r>=i&&l[cl]==="none"||o&&l[cl]==="none"&&r+f>i)?"vertical":"horizontal"},Ti=function(e,n,l){var i=l?e.left:e.top,a=l?e.right:e.bottom,o=l?e.width:e.height,s=l?n.left:n.top,u=l?n.right:n.bottom,r=l?n.width:n.height;return i===s||a===u||i+o/2===s+r/2},Li=function(e,n){var l;return Bt.some(function(i){var a=i[be].options.emptyInsertThreshold;if(!(!a||an(i))){var o=ie(i),s=e>=o.left-a&&e<=o.right+a,u=n>=o.top-a&&n<=o.bottom+a;if(s&&u)return l=i}}),l},ml=function(e){function n(a,o){return function(s,u,r,f){var c=s.options.group.name&&u.options.group.name&&s.options.group.name===u.options.group.name;if(a==null&&(o||c))return!0;if(a==null||a===!1)return!1;if(o&&a==="clone")return a;if(typeof a=="function")return n(a(s,u,r,f),o)(s,u,r,f);var h=(o?s:u).options.group.name;return a===!0||typeof a=="string"&&a===h||a.join&&a.indexOf(h)>-1}}var l={},i=e.group;(!i||Ft(i)!="object")&&(i={name:i}),l.name=i.name,l.checkPull=n(i.pull,!0),l.checkPut=n(i.put),l.revertClone=i.revertClone,e.group=l},pl=function(){!dl&&N&&O(N,"display","none")},gl=function(){!dl&&N&&O(N,"display","")};qt&&!$n&&document.addEventListener("click",function(t){if(Ht)return t.preventDefault(),t.stopPropagation&&t.stopPropagation(),t.stopImmediatePropagation&&t.stopImmediatePropagation(),Ht=!1,!1},!0);var $e=function(e){if(S){e=e.touches?e.touches[0]:e;var n=Li(e.clientX,e.clientY);if(n){var l={};for(var i in e)e.hasOwnProperty(i)&&(l[i]=e[i]);l.target=l.rootEl=n,l.preventDefault=void 0,l.stopPropagation=void 0,n[be]._onDragOver(l)}}},Ci=function(e){S&&S.parentNode[be]._isOutsideThisEl(e.target)};function A(t,e){if(!(t&&t.nodeType&&t.nodeType===1))throw"Sortable: `el` must be an HTMLElement, not ".concat({}.toString.call(t));this.el=t,this.options=e=Ye({},e),t[be]=this;var n={group:null,sort:!0,disabled:!1,store:null,handle:null,draggable:/^[uo]l$/i.test(t.nodeName)?">li":">*",swapThreshold:1,invertSwap:!1,invertedSwapThreshold:null,removeCloneOnHide:!0,direction:function(){return hl(t,this.options)},ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",dragClass:"sortable-drag",ignore:"a, img",filter:null,preventOnFilter:!0,animation:0,easing:null,setData:function(o,s){o.setData("Text",s.textContent)},dropBubble:!1,dragoverBubble:!1,dataIdAttr:"data-id",delay:0,delayOnTouchOnly:!1,touchStartThreshold:(Number.parseInt?Number:window).parseInt(window.devicePixelRatio,10)||1,forceFallback:!1,fallbackClass:"sortable-fallback",fallbackOnBody:!1,fallbackTolerance:0,fallbackOffset:{x:0,y:0},supportPointer:A.supportPointer!==!1&&"PointerEvent"in window&&!pt,emptyInsertThreshold:5};bt.initializePlugins(this,t,n);for(var l in n)!(l in e)&&(e[l]=n[l]);ml(e);for(var i in this)i.charAt(0)==="_"&&typeof this[i]=="function"&&(this[i]=this[i].bind(this));this.nativeDraggable=e.forceFallback?!1:Pi,this.nativeDraggable&&(this.options.touchStartThreshold=1),e.supportPointer?j(t,"pointerdown",this._onTapStart):(j(t,"mousedown",this._onTapStart),j(t,"touchstart",this._onTapStart)),this.nativeDraggable&&(j(t,"dragover",this),j(t,"dragenter",this)),Bt.push(this.el),e.store&&e.store.get&&this.sort(e.store.get(this)||[]),Ye(this,wi())}A.prototype={constructor:A,_isOutsideThisEl:function(e){!this.el.contains(e)&&e!==this.el&&(ct=null)},_getDirection:function(e,n){return typeof this.options.direction=="function"?this.options.direction.call(this,e,n,S):this.options.direction},_onTapStart:function(e){if(e.cancelable){var n=this,l=this.el,i=this.options,a=i.preventOnFilter,o=e.type,s=e.touches&&e.touches[0]||e.pointerType&&e.pointerType==="touch"&&e,u=(s||e).target,r=e.target.shadowRoot&&(e.path&&e.path[0]||e.composedPath&&e.composedPath()[0])||u,f=i.filter;if(Hi(l),!S&&!(/mousedown|pointerdown/.test(o)&&e.button!==0||i.disabled)&&!r.isContentEditable&&!(!this.nativeDraggable&&pt&&u&&u.tagName.toUpperCase()==="SELECT")&&(u=ke(u,i.draggable,l,!1),!(u&&u.animated)&&Mt!==u)){if(ut=ye(u),_t=ye(u,i.draggable),typeof f=="function"){if(f.call(this,e,u,this)){ue({sortable:n,rootEl:r,name:"filter",targetEl:u,toEl:l,fromEl:l}),he("filter",n,{evt:e}),a&&e.cancelable&&e.preventDefault();return}}else if(f&&(f=f.split(",").some(function(c){if(c=ke(r,c.trim(),l,!1),c)return ue({sortable:n,rootEl:c,name:"filter",targetEl:u,fromEl:l,toEl:l}),he("filter",n,{evt:e}),!0}),f)){a&&e.cancelable&&e.preventDefault();return}i.handle&&!ke(r,i.handle,l,!1)||this._prepareDragStart(e,s,u)}}},_prepareDragStart:function(e,n,l){var i=this,a=i.el,o=i.options,s=a.ownerDocument,u;if(l&&!S&&l.parentNode===a){var r=ie(l);if(x=a,S=l,te=S.parentNode,Je=S.nextSibling,Mt=l,Rt=o.group,A.dragged=S,xe={target:S,clientX:(n||e).clientX,clientY:(n||e).clientY},ul=xe.clientX-r.left,fl=xe.clientY-r.top,this._lastX=(n||e).clientX,this._lastY=(n||e).clientY,S.style["will-change"]="all",u=function(){if(he("delayEnded",i,{evt:e}),A.eventCanceled){i._onDrop();return}i._disableDelayedDragEvents(),!Jn&&i.nativeDraggable&&(S.draggable=!0),i._triggerDragStart(e,n),ue({sortable:i,name:"choose",originalEvent:e}),ge(S,o.chosenClass,!0)},o.ignore.split(",").forEach(function(f){nl(S,f.trim(),dn)}),j(s,"dragover",$e),j(s,"mousemove",$e),j(s,"touchmove",$e),j(s,"mouseup",i._onDrop),j(s,"touchend",i._onDrop),j(s,"touchcancel",i._onDrop),Jn&&this.nativeDraggable&&(this.options.touchStartThreshold=4,S.draggable=!0),he("delayStart",this,{evt:e}),o.delay&&(!o.delayOnTouchOnly||n)&&(!this.nativeDraggable||!(mt||Xe))){if(A.eventCanceled){this._onDrop();return}j(s,"mouseup",i._disableDelayedDrag),j(s,"touchend",i._disableDelayedDrag),j(s,"touchcancel",i._disableDelayedDrag),j(s,"mousemove",i._delayedDragTouchMoveHandler),j(s,"touchmove",i._delayedDragTouchMoveHandler),o.supportPointer&&j(s,"pointermove",i._delayedDragTouchMoveHandler),i._dragStartTimer=setTimeout(u,o.delay)}else u()}},_delayedDragTouchMoveHandler:function(e){var n=e.touches?e.touches[0]:e;Math.max(Math.abs(n.clientX-this._lastX),Math.abs(n.clientY-this._lastY))>=Math.floor(this.options.touchStartThreshold/(this.nativeDraggable&&window.devicePixelRatio||1))&&this._disableDelayedDrag()},_disableDelayedDrag:function(){S&&dn(S),clearTimeout(this._dragStartTimer),this._disableDelayedDragEvents()},_disableDelayedDragEvents:function(){var e=this.el.ownerDocument;q(e,"mouseup",this._disableDelayedDrag),q(e,"touchend",this._disableDelayedDrag),q(e,"touchcancel",this._disableDelayedDrag),q(e,"mousemove",this._delayedDragTouchMoveHandler),q(e,"touchmove",this._delayedDragTouchMoveHandler),q(e,"pointermove",this._delayedDragTouchMoveHandler)},_triggerDragStart:function(e,n){n=n||e.pointerType=="touch"&&e,!this.nativeDraggable||n?this.options.supportPointer?j(document,"pointermove",this._onTouchMove):n?j(document,"touchmove",this._onTouchMove):j(document,"mousemove",this._onTouchMove):(j(S,"dragend",this),j(x,"dragstart",this._onDragStart));try{document.selection?Gt(function(){document.selection.empty()}):window.getSelection().removeAllRanges()}catch{}},_dragStarted:function(e,n){if(ft=!1,x&&S){he("dragStarted",this,{evt:n}),this.nativeDraggable&&j(document,"dragover",Ci);var l=this.options;!e&&ge(S,l.dragClass,!1),ge(S,l.ghostClass,!0),A.active=this,e&&this._appendGhost(),ue({sortable:this,name:"start",originalEvent:n})}else this._nulling()},_emulateDragOver:function(){if(Pe){this._lastX=Pe.clientX,this._lastY=Pe.clientY,pl();for(var e=document.elementFromPoint(Pe.clientX,Pe.clientY),n=e;e&&e.shadowRoot&&(e=e.shadowRoot.elementFromPoint(Pe.clientX,Pe.clientY),e!==n);)n=e;if(S.parentNode[be]._isOutsideThisEl(e),n)do{if(n[be]){var l=void 0;if(l=n[be]._onDragOver({clientX:Pe.clientX,clientY:Pe.clientY,target:e,rootEl:n}),l&&!this.options.dragoverBubble)break}e=n}while(n=n.parentNode);gl()}},_onTouchMove:function(e){if(xe){var n=this.options,l=n.fallbackTolerance,i=n.fallbackOffset,a=e.touches?e.touches[0]:e,o=N&&ot(N,!0),s=N&&o&&o.a,u=N&&o&&o.d,r=jt&&re&&il(re),f=(a.clientX-xe.clientX+i.x)/(s||1)+(r?r[0]-fn[0]:0)/(s||1),c=(a.clientY-xe.clientY+i.y)/(u||1)+(r?r[1]-fn[1]:0)/(u||1);if(!A.active&&!ft){if(l&&Math.max(Math.abs(a.clientX-this._lastX),Math.abs(a.clientY-this._lastY))<l)return;this._onDragStart(e,!0)}if(N){o?(o.e+=f-(sn||0),o.f+=c-(un||0)):o={a:1,b:0,c:0,d:1,e:f,f:c};var h="matrix(".concat(o.a,",").concat(o.b,",").concat(o.c,",").concat(o.d,",").concat(o.e,",").concat(o.f,")");O(N,"webkitTransform",h),O(N,"mozTransform",h),O(N,"msTransform",h),O(N,"transform",h),sn=f,un=c,Pe=a}e.cancelable&&e.preventDefault()}},_appendGhost:function(){if(!N){var e=this.options.fallbackOnBody?document.body:x,n=ie(S,!0,jt,!0,e),l=this.options;if(jt){for(re=e;O(re,"position")==="static"&&O(re,"transform")==="none"&&re!==document;)re=re.parentNode;re!==document.body&&re!==document.documentElement?(re===document&&(re=Le()),n.top+=re.scrollTop,n.left+=re.scrollLeft):re=Le(),fn=il(re)}N=S.cloneNode(!0),ge(N,l.ghostClass,!1),ge(N,l.fallbackClass,!0),ge(N,l.dragClass,!0),O(N,"transition",""),O(N,"transform",""),O(N,"box-sizing","border-box"),O(N,"margin",0),O(N,"top",n.top),O(N,"left",n.left),O(N,"width",n.width),O(N,"height",n.height),O(N,"opacity","0.8"),O(N,"position",jt?"absolute":"fixed"),O(N,"zIndex","100000"),O(N,"pointerEvents","none"),A.ghost=N,e.appendChild(N),O(N,"transform-origin",ul/parseInt(N.style.width)*100+"% "+fl/parseInt(N.style.height)*100+"%")}},_onDragStart:function(e,n){var l=this,i=e.dataTransfer,a=l.options;if(he("dragStart",this,{evt:e}),A.eventCanceled){this._onDrop();return}he("setupClone",this),A.eventCanceled||($=rl(S),$.removeAttribute("id"),$.draggable=!1,$.style["will-change"]="",this._hideClone(),ge($,this.options.chosenClass,!1),A.clone=$),l.cloneId=Gt(function(){he("clone",l),!A.eventCanceled&&(l.options.removeCloneOnHide||x.insertBefore($,S),l._hideClone(),ue({sortable:l,name:"clone"}))}),!n&&ge(S,a.dragClass,!0),n?(Ht=!0,l._loopId=setInterval(l._emulateDragOver,50)):(q(document,"mouseup",l._onDrop),q(document,"touchend",l._onDrop),q(document,"touchcancel",l._onDrop),i&&(i.effectAllowed="move",a.setData&&a.setData.call(l,i,S)),j(document,"drop",l),O(S,"transform","translateZ(0)")),ft=!0,l._dragStartId=Gt(l._dragStarted.bind(l,n,e)),j(document,"selectstart",l),vt=!0,pt&&O(document.body,"user-select","none")},_onDragOver:function(e){var n=this.el,l=e.target,i,a,o,s=this.options,u=s.group,r=A.active,f=Rt===u,c=s.sort,h=oe||r,m,d=this,b=!1;if(cn)return;function g(et,En){he(et,d,Te({evt:e,isOwner:f,axis:m?"vertical":"horizontal",revert:o,dragRect:i,targetRect:a,canSort:c,fromSortable:h,target:l,completed:w,onMove:function(Kt,Dn){return Wt(x,n,S,i,Kt,ie(Kt),e,Dn)},changed:D},En))}function _(){g("dragOverAnimationCapture"),d.captureAnimationState(),d!==h&&h.captureAnimationState()}function w(et){return g("dragOverCompleted",{insertion:et}),et&&(f?r._hideClone():r._showClone(d),d!==h&&(ge(S,oe?oe.options.ghostClass:r.options.ghostClass,!1),ge(S,s.ghostClass,!0)),oe!==d&&d!==A.active?oe=d:d===A.active&&oe&&(oe=null),h===d&&(d._ignoreWhileAnimating=l),d.animateAll(function(){g("dragOverAnimationComplete"),d._ignoreWhileAnimating=null}),d!==h&&(h.animateAll(),h._ignoreWhileAnimating=null)),(l===S&&!S.animated||l===n&&!l.animated)&&(ct=null),!s.dragoverBubble&&!e.rootEl&&l!==document&&(S.parentNode[be]._isOutsideThisEl(e.target),!et&&$e(e)),!s.dragoverBubble&&e.stopPropagation&&e.stopPropagation(),b=!0}function D(){_e=ye(S),Ke=ye(S,s.draggable),ue({sortable:d,name:"change",toEl:n,newIndex:_e,newDraggableIndex:Ke,originalEvent:e})}if(e.preventDefault!==void 0&&e.cancelable&&e.preventDefault(),l=ke(l,s.draggable,n,!0),g("dragOver"),A.eventCanceled)return b;if(S.contains(e.target)||l.animated&&l.animatingX&&l.animatingY||d._ignoreWhileAnimating===l)return w(!1);if(Ht=!1,r&&!s.disabled&&(f?c||(o=te!==x):oe===this||(this.lastPutMode=Rt.checkPull(this,r,S,e))&&u.checkPut(this,r,S,e))){if(m=this._getDirection(e,l)==="vertical",i=ie(S),g("dragOverValid"),A.eventCanceled)return b;if(o)return te=x,_(),this._hideClone(),g("revert"),A.eventCanceled||(Je?x.insertBefore(S,Je):x.appendChild(S)),w(!0);var k=an(n,s.draggable);if(!k||Fi(e,m,this)&&!k.animated){if(k===S)return w(!1);if(k&&n===e.target&&(l=k),l&&(a=ie(l)),Wt(x,n,S,i,l,a,e,!!l)!==!1)return _(),k&&k.nextSibling?n.insertBefore(S,k.nextSibling):n.appendChild(S),te=n,D(),w(!0)}else if(k&&Oi(e,m,this)){var y=rt(n,0,s,!0);if(y===S)return w(!1);if(l=y,a=ie(l),Wt(x,n,S,i,l,a,e,!1)!==!1)return _(),n.insertBefore(S,y),te=n,D(),w(!0)}else if(l.parentNode===n){a=ie(l);var T=0,E,B=S.parentNode!==n,C=!Ti(S.animated&&S.toRect||i,l.animated&&l.toRect||a,m),ne=m?"top":"left",se=ll(l,"top","top")||ll(S,"top","top"),V=se?se.scrollTop:void 0;ct!==l&&(E=a[ne],wt=!1,Yt=!C&&s.invertSwap||B),T=Ni(e,l,a,m,C?1:s.swapThreshold,s.invertedSwapThreshold==null?s.swapThreshold:s.invertedSwapThreshold,Yt,ct===l);var W;if(T!==0){var K=ye(S);do K-=T,W=te.children[K];while(W&&(O(W,"display")==="none"||W===N))}if(T===0||W===l)return w(!1);ct=l,yt=T;var F=l.nextElementSibling,z=!1;z=T===1;var me=Wt(x,n,S,i,l,a,e,z);if(me!==!1)return(me===1||me===-1)&&(z=me===1),cn=!0,setTimeout(Ai,30),_(),z&&!F?n.appendChild(S):l.parentNode.insertBefore(S,z?F:l),se&&ol(se,0,V-se.scrollTop),te=S.parentNode,E!==void 0&&!Yt&&(zt=Math.abs(E-ie(l)[ne])),D(),w(!0)}if(n.contains(S))return w(!1)}return!1},_ignoreWhileAnimating:null,_offMoveEvents:function(){q(document,"mousemove",this._onTouchMove),q(document,"touchmove",this._onTouchMove),q(document,"pointermove",this._onTouchMove),q(document,"dragover",$e),q(document,"mousemove",$e),q(document,"touchmove",$e)},_offUpEvents:function(){var e=this.el.ownerDocument;q(e,"mouseup",this._onDrop),q(e,"touchend",this._onDrop),q(e,"pointerup",this._onDrop),q(e,"touchcancel",this._onDrop),q(document,"selectstart",this)},_onDrop:function(e){var n=this.el,l=this.options;if(_e=ye(S),Ke=ye(S,l.draggable),he("drop",this,{evt:e}),te=S&&S.parentNode,_e=ye(S),Ke=ye(S,l.draggable),A.eventCanceled){this._nulling();return}ft=!1,Yt=!1,wt=!1,clearInterval(this._loopId),clearTimeout(this._dragStartTimer),hn(this.cloneId),hn(this._dragStartId),this.nativeDraggable&&(q(document,"drop",this),q(n,"dragstart",this._onDragStart)),this._offMoveEvents(),this._offUpEvents(),pt&&O(document.body,"user-select",""),O(S,"transform",""),e&&(vt&&(e.cancelable&&e.preventDefault(),!l.dropBubble&&e.stopPropagation()),N&&N.parentNode&&N.parentNode.removeChild(N),(x===te||oe&&oe.lastPutMode!=="clone")&&$&&$.parentNode&&$.parentNode.removeChild($),S&&(this.nativeDraggable&&q(S,"dragend",this),dn(S),S.style["will-change"]="",vt&&!ft&&ge(S,oe?oe.options.ghostClass:this.options.ghostClass,!1),ge(S,this.options.chosenClass,!1),ue({sortable:this,name:"unchoose",toEl:te,newIndex:null,newDraggableIndex:null,originalEvent:e}),x!==te?(_e>=0&&(ue({rootEl:te,name:"add",toEl:te,fromEl:x,originalEvent:e}),ue({sortable:this,name:"remove",toEl:te,originalEvent:e}),ue({rootEl:te,name:"sort",toEl:te,fromEl:x,originalEvent:e}),ue({sortable:this,name:"sort",toEl:te,originalEvent:e})),oe&&oe.save()):_e!==ut&&_e>=0&&(ue({sortable:this,name:"update",toEl:te,originalEvent:e}),ue({sortable:this,name:"sort",toEl:te,originalEvent:e})),A.active&&((_e==null||_e===-1)&&(_e=ut,Ke=_t),ue({sortable:this,name:"end",toEl:te,originalEvent:e}),this.save()))),this._nulling()},_nulling:function(){he("nulling",this),x=S=te=N=Je=$=Mt=Ve=xe=Pe=vt=_e=Ke=ut=_t=ct=yt=oe=Rt=A.dragged=A.ghost=A.clone=A.active=null,Xt.forEach(function(e){e.checked=!0}),Xt.length=sn=un=0},handleEvent:function(e){switch(e.type){case"drop":case"dragend":this._onDrop(e);break;case"dragenter":case"dragover":S&&(this._onDragOver(e),Ii(e));break;case"selectstart":e.preventDefault();break}},toArray:function(){for(var e=[],n,l=this.el.children,i=0,a=l.length,o=this.options;i<a;i++)n=l[i],ke(n,o.draggable,this.el,!1)&&e.push(n.getAttribute(o.dataIdAttr)||Ri(n));return e},sort:function(e,n){var l={},i=this.el;this.toArray().forEach(function(a,o){var s=i.children[o];ke(s,this.options.draggable,i,!1)&&(l[a]=s)},this),n&&this.captureAnimationState(),e.forEach(function(a){l[a]&&(i.removeChild(l[a]),i.appendChild(l[a]))}),n&&this.animateAll()},save:function(){var e=this.options.store;e&&e.set&&e.set(this)},closest:function(e,n){return ke(e,n||this.options.draggable,this.el,!1)},option:function(e,n){var l=this.options;if(n===void 0)return l[e];var i=bt.modifyOption(this,e,n);typeof i<"u"?l[e]=i:l[e]=n,e==="group"&&ml(l)},destroy:function(){he("destroy",this);var e=this.el;e[be]=null,q(e,"mousedown",this._onTapStart),q(e,"touchstart",this._onTapStart),q(e,"pointerdown",this._onTapStart),this.nativeDraggable&&(q(e,"dragover",this),q(e,"dragenter",this)),Array.prototype.forEach.call(e.querySelectorAll("[draggable]"),function(n){n.removeAttribute("draggable")}),this._onDrop(),this._disableDelayedDragEvents(),Bt.splice(Bt.indexOf(this.el),1),this.el=e=null},_hideClone:function(){if(!Ve){if(he("hideClone",this),A.eventCanceled)return;O($,"display","none"),this.options.removeCloneOnHide&&$.parentNode&&$.parentNode.removeChild($),Ve=!0}},_showClone:function(e){if(e.lastPutMode!=="clone"){this._hideClone();return}if(Ve){if(he("showClone",this),A.eventCanceled)return;S.parentNode==x&&!this.options.group.revertClone?x.insertBefore($,S):Je?x.insertBefore($,Je):x.appendChild($),this.options.group.revertClone&&this.animate(S,$),O($,"display",""),Ve=!1}}};function Ii(t){t.dataTransfer&&(t.dataTransfer.dropEffect="move"),t.cancelable&&t.preventDefault()}function Wt(t,e,n,l,i,a,o,s){var u,r=t[be],f=r.options.onMove,c;return window.CustomEvent&&!Xe&&!mt?u=new CustomEvent("move",{bubbles:!0,cancelable:!0}):(u=document.createEvent("Event"),u.initEvent("move",!0,!0)),u.to=e,u.from=t,u.dragged=n,u.draggedRect=l,u.related=i||e,u.relatedRect=a||ie(e),u.willInsertAfter=s,u.originalEvent=o,t.dispatchEvent(u),f&&(c=f.call(r,u,o)),c}function dn(t){t.draggable=!1}function Ai(){cn=!1}function Oi(t,e,n){var l=ie(rt(n.el,0,n.options,!0)),i=sl(n.el,n.options,N),a=10;return e?t.clientX<i.left-a||t.clientY<l.top&&t.clientX<l.right:t.clientY<i.top-a||t.clientY<l.bottom&&t.clientX<l.left}function Fi(t,e,n){var l=ie(an(n.el,n.options.draggable)),i=sl(n.el,n.options,N),a=10;return e?t.clientX>i.right+a||t.clientY>l.bottom&&t.clientX>l.left:t.clientY>i.bottom+a||t.clientX>l.right&&t.clientY>l.top}function Ni(t,e,n,l,i,a,o,s){var u=l?t.clientY:t.clientX,r=l?n.height:n.width,f=l?n.top:n.left,c=l?n.bottom:n.right,h=!1;if(!o){if(s&&zt<r*i){if(!wt&&(yt===1?u>f+r*a/2:u<c-r*a/2)&&(wt=!0),wt)h=!0;else if(yt===1?u<f+zt:u>c-zt)return-yt}else if(u>f+r*(1-i)/2&&u<c-r*(1-i)/2)return Mi(e)}return h=h||o,h&&(u<f+r*a/2||u>c-r*a/2)?u>f+r/2?1:-1:0}function Mi(t){return ye(S)<ye(t)?1:-1}function Ri(t){for(var e=t.tagName+t.className+t.src+t.href+t.textContent,n=e.length,l=0;n--;)l+=e.charCodeAt(n);return l.toString(36)}function Hi(t){Xt.length=0;for(var e=t.getElementsByTagName("input"),n=e.length;n--;){var l=e[n];l.checked&&Xt.push(l)}}function Gt(t){return setTimeout(t,0)}function hn(t){return clearTimeout(t)}qt&&j(document,"touchmove",function(t){(A.active||ft)&&t.cancelable&&t.preventDefault()}),A.utils={on:j,off:q,css:O,find:nl,is:function(e,n){return!!ke(e,n,e,!1)},extend:vi,throttle:al,closest:ke,toggleClass:ge,clone:rl,index:ye,nextTick:Gt,cancelNextTick:hn,detectDirection:hl,getChild:rt},A.get=function(t){return t[be]},A.mount=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];e[0].constructor===Array&&(e=e[0]),e.forEach(function(l){if(!l.prototype||!l.prototype.constructor)throw"Sortable: Mounted plugin must be a constructor function, not ".concat({}.toString.call(l));l.utils&&(A.utils=Te(Te({},A.utils),l.utils)),bt.mount(l)})},A.create=function(t,e){return new A(t,e)},A.version=gi;var ae=[],Et,mn,pn=!1,gn,bn,Ut,Dt;function Bi(){function t(){this.defaults={scroll:!0,forceAutoScrollFallback:!1,scrollSensitivity:30,scrollSpeed:10,bubbleScroll:!0};for(var e in this)e.charAt(0)==="_"&&typeof this[e]=="function"&&(this[e]=this[e].bind(this))}return t.prototype={dragStarted:function(n){var l=n.originalEvent;this.sortable.nativeDraggable?j(document,"dragover",this._handleAutoScroll):this.options.supportPointer?j(document,"pointermove",this._handleFallbackAutoScroll):l.touches?j(document,"touchmove",this._handleFallbackAutoScroll):j(document,"mousemove",this._handleFallbackAutoScroll)},dragOverCompleted:function(n){var l=n.originalEvent;!this.options.dragOverBubble&&!l.rootEl&&this._handleAutoScroll(l)},drop:function(){this.sortable.nativeDraggable?q(document,"dragover",this._handleAutoScroll):(q(document,"pointermove",this._handleFallbackAutoScroll),q(document,"touchmove",this._handleFallbackAutoScroll),q(document,"mousemove",this._handleFallbackAutoScroll)),bl(),Qt(),yi()},nulling:function(){Ut=mn=Et=pn=Dt=gn=bn=null,ae.length=0},_handleFallbackAutoScroll:function(n){this._handleAutoScroll(n,!0)},_handleAutoScroll:function(n,l){var i=this,a=(n.touches?n.touches[0]:n).clientX,o=(n.touches?n.touches[0]:n).clientY,s=document.elementFromPoint(a,o);if(Ut=n,l||this.options.forceAutoScrollFallback||mt||Xe||pt){_n(n,this.options,s,l);var u=Qe(s,!0);pn&&(!Dt||a!==gn||o!==bn)&&(Dt&&bl(),Dt=setInterval(function(){var r=Qe(document.elementFromPoint(a,o),!0);r!==u&&(u=r,Qt()),_n(n,i.options,r,l)},10),gn=a,bn=o)}else{if(!this.options.bubbleScroll||Qe(s,!0)===Le()){Qt();return}_n(n,this.options,Qe(s,!1),!1)}}},Ye(t,{pluginName:"scroll",initializeByDefault:!0})}function Qt(){ae.forEach(function(t){clearInterval(t.pid)}),ae=[]}function bl(){clearInterval(Dt)}var _n=al(function(t,e,n,l){if(e.scroll){var i=(t.touches?t.touches[0]:t).clientX,a=(t.touches?t.touches[0]:t).clientY,o=e.scrollSensitivity,s=e.scrollSpeed,u=Le(),r=!1,f;mn!==n&&(mn=n,Qt(),Et=e.scroll,f=e.scrollFn,Et===!0&&(Et=Qe(n,!0)));var c=0,h=Et;do{var m=h,d=ie(m),b=d.top,g=d.bottom,_=d.left,w=d.right,D=d.width,k=d.height,y=void 0,T=void 0,E=m.scrollWidth,B=m.scrollHeight,C=O(m),ne=m.scrollLeft,se=m.scrollTop;m===u?(y=D<E&&(C.overflowX==="auto"||C.overflowX==="scroll"||C.overflowX==="visible"),T=k<B&&(C.overflowY==="auto"||C.overflowY==="scroll"||C.overflowY==="visible")):(y=D<E&&(C.overflowX==="auto"||C.overflowX==="scroll"),T=k<B&&(C.overflowY==="auto"||C.overflowY==="scroll"));var V=y&&(Math.abs(w-i)<=o&&ne+D<E)-(Math.abs(_-i)<=o&&!!ne),W=T&&(Math.abs(g-a)<=o&&se+k<B)-(Math.abs(b-a)<=o&&!!se);if(!ae[c])for(var K=0;K<=c;K++)ae[K]||(ae[K]={});(ae[c].vx!=V||ae[c].vy!=W||ae[c].el!==m)&&(ae[c].el=m,ae[c].vx=V,ae[c].vy=W,clearInterval(ae[c].pid),(V!=0||W!=0)&&(r=!0,ae[c].pid=setInterval((function(){l&&this.layer===0&&A.active._onTouchMove(Ut);var F=ae[this.layer].vy?ae[this.layer].vy*s:0,z=ae[this.layer].vx?ae[this.layer].vx*s:0;typeof f=="function"&&f.call(A.dragged.parentNode[be],z,F,t,Ut,ae[this.layer].el)!=="continue"||ol(ae[this.layer].el,z,F)}).bind({layer:c}),24))),c++}while(e.bubbleScroll&&h!==u&&(h=Qe(h,!1)));pn=r}},30),_l=function(e){var n=e.originalEvent,l=e.putSortable,i=e.dragEl,a=e.activeSortable,o=e.dispatchSortableEvent,s=e.hideGhostForTarget,u=e.unhideGhostForTarget;if(n){var r=l||a;s();var f=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:n,c=document.elementFromPoint(f.clientX,f.clientY);u(),r&&!r.el.contains(c)&&(o("spill"),this.onSpill({dragEl:i,putSortable:l}))}};function vn(){}vn.prototype={startIndex:null,dragStart:function(e){var n=e.oldDraggableIndex;this.startIndex=n},onSpill:function(e){var n=e.dragEl,l=e.putSortable;this.sortable.captureAnimationState(),l&&l.captureAnimationState();var i=rt(this.sortable.el,this.startIndex,this.options);i?this.sortable.el.insertBefore(n,i):this.sortable.el.appendChild(n),this.sortable.animateAll(),l&&l.animateAll()},drop:_l},Ye(vn,{pluginName:"revertOnSpill"});function yn(){}yn.prototype={onSpill:function(e){var n=e.dragEl,l=e.putSortable,i=l||this.sortable;i.captureAnimationState(),n.parentNode&&n.parentNode.removeChild(n),i.animateAll()},drop:_l},Ye(yn,{pluginName:"removeOnSpill"}),A.mount(new Bi),A.mount(yn,vn);function vl(t,e,n){const l=t.slice();return l[16]=e[n],l}function yl(t,e,n){const l=t.slice();return l[19]=e[n],l}function wl(t){let e,n,l,i;function a(){return t[10](t[19])}return{c(){e=P("div"),n=P("a"),n.innerHTML='<i class="fas fa-pencil-alt fa-sm"></i>',p(n,"href","javascript:"),p(n,"data-action","editField"),p(n,"class","edit-field svelte-1mx8y43"),p(e,"class","right svelte-1mx8y43")},m(o,s){Q(o,e,s),v(e,n),l||(i=le(n,"click",a),l=!0)},p(o,s){t=o},d(o){o&&G(e),l=!1,i()}}}function El(t,e){let n,l,i,a=e[19].label+"",o,s,u,r=e[2].editable&&wl(e),f=[e[9](e[19])],c={};for(let h=0;h<f.length;h+=1)c=je(c,f[h]);return{key:t,first:null,c(){n=P("li"),l=P("div"),i=P("label"),o=ce(a),s=X(),r&&r.c(),u=X(),p(i,"class","svelte-1mx8y43"),p(l,"class","left svelte-1mx8y43"),kt(n,c),Pt(n,"svelte-1mx8y43",!0),this.first=n},m(h,m){Q(h,n,m),v(n,l),v(l,i),v(i,o),v(n,s),r&&r.m(n,null),v(n,u)},p(h,m){e=h,m&1&&a!==(a=e[19].label+"")&&Ae(o,a),e[2].editable?r?r.p(e,m):(r=wl(e),r.c(),r.m(n,u)):r&&(r.d(1),r=null),kt(n,c=Hn(f,[m&1&&e[9](e[19])])),Pt(n,"svelte-1mx8y43",!0)},d(h){h&&G(n),r&&r.d()}}}function Dl(t,e){let n,l,i,a=e[16].label+"",o,s,u=[e[9](e[16])],r={};for(let f=0;f<u.length;f+=1)r=je(r,u[f]);return{key:t,first:null,c(){n=P("li"),l=P("div"),i=P("label"),o=ce(a),s=X(),p(i,"class","svelte-1mx8y43"),p(l,"class","left svelte-1mx8y43"),kt(n,r),Pt(n,"svelte-1mx8y43",!0),this.first=n},m(f,c){Q(f,n,c),v(n,l),v(l,i),v(i,o),v(n,s)},p(f,c){e=f,c&2&&a!==(a=e[16].label+"")&&Ae(o,a),kt(n,r=Hn(u,[c&2&&e[9](e[16])])),Pt(n,"svelte-1mx8y43",!0)},d(f){f&&G(n)}}}function Yi(t){let e,n,l,i,a,o,s=[],u=new Map,r,f,c,h,m,d,b=[],g=new Map,_=de(t[0]);const w=y=>y[19].name;for(let y=0;y<_.length;y+=1){let T=yl(t,_,y),E=w(T);u.set(E,s[y]=El(E,T))}let D=de(t[1]);const k=y=>y[16].name;for(let y=0;y<D.length;y+=1){let T=vl(t,D,y),E=k(T);g.set(E,b[y]=Dl(E,T))}return{c(){e=P("div"),n=P("div"),l=P("div"),i=P("header"),i.textContent=`${H.translate("Enabled","labels","Admin")}`,a=X(),o=P("ul");for(let y=0;y<s.length;y+=1)s[y].c();r=X(),f=P("div"),c=P("div"),h=P("header"),h.textContent=`${H.translate("Disabled","labels","Admin")}`,m=X(),d=P("ul");for(let y=0;y<b.length;y+=1)b[y].c();p(o,"class","enabled connected svelte-1mx8y43"),p(l,"class","well"),p(n,"class","col-sm-5"),p(d,"class","disabled connected svelte-1mx8y43"),p(c,"class","well"),p(f,"class","col-sm-5"),p(e,"id","layout"),p(e,"class","row")},m(y,T){Q(y,e,T),v(e,n),v(n,l),v(l,i),v(l,a),v(l,o);for(let E=0;E<s.length;E+=1)s[E]&&s[E].m(o,null);v(e,r),v(e,f),v(f,c),v(c,h),v(c,m),v(c,d);for(let E=0;E<b.length;E+=1)b[E]&&b[E].m(d,null);t[11](e)},p(y,T){T&645&&(_=de(y[0]),s=It(s,T,w,1,y,_,u,o,Ct,El,null,yl)),T&514&&(D=de(y[1]),b=It(b,T,k,1,y,D,g,d,Ct,Dl,null,vl))},d(y){y&&G(e);for(let T=0;T<s.length;T+=1)s[T].d();for(let T=0;T<b.length;T+=1)b[T].d();t[11](null)}}}function zi(t){let e,n,l={params:t[2],validate:t[8],fetch:t[4],loadLayout:t[3],$$slots:{default:[Yi]},$$scope:{ctx:t}};return e=new Kn({props:l}),t[12](e),{c(){Ue(e.$$.fragment)},m(i,a){Ne(e,i,a),n=!0},p(i,[a]){const o={};a&4&&(o.params=i[2]),a&16&&(o.fetch=i[4]),a&8&&(o.loadLayout=i[3]),a&4194343&&(o.$$scope={dirty:a,ctx:i}),e.$set(o)},i(i){n||(Ee(e.$$.fragment,i),n=!0)},o(i){Fe(e.$$.fragment,i),n=!1},d(i){t[12](null),Me(e,i)}}}function Xi(t){return t.toLowerCase()}function Sl(t,e){return t[e]}function qi(t,e,n){let l,i,a,{params:o}=e,{enabledFields:s=[]}=e,{disabledFields:u=[]}=e,{loadLayout:r}=e,f;xt(()=>{c()}),An(()=>{i&&i.destroy(),a&&a.destroy()});function c(){const D={group:"fields",draggable:"li",animation:150};i=A.create(l.querySelector("ul.enabled"),{...D,onEnd(k){if(k.to.closest(".connected").classList.contains("enabled")){const[y]=s.splice(k.oldIndex,1);s.splice(k.newIndex,0,y)}else{const y=s[k.oldIndex];s.splice(k.oldIndex,1),u.splice(k.newIndex,0,y),n(1,u=[...u])}n(0,s=[...s])}}),a=A.create(l.querySelector("ul.disabled"),{...D,onEnd(k){if(k.to.closest(".connected").classList.contains("disabled")){const[y]=u.splice(k.oldIndex,1);u.splice(k.newIndex,0,y)}else{const y=u[k.oldIndex];u.splice(k.oldIndex,1),s.splice(k.newIndex,0,y),n(0,s=[...s])}n(1,u=[...u])}})}function h(D){o.openEditDialog(D,o.scope,o.dataAttributeList,o.dataAttributesDefs,k=>{n(0,s=s.map(y=>{if(y.name===D.name)for(let T in k)y[T]=k[T];return y}))})}let{fetch:m=()=>s}=e;function d(D){return D.length===0?(Re.notify("Layout cannot be empty","error"),!1):!0}function b(D){const k={};return o.dataAttributeList.forEach(y=>{Sl(D,y)!=null&&(k[`data-${Xi(y)}`]=Sl(D,y))}),k}const g=D=>h(D);function _(D){Oe[D?"unshift":"push"](()=>{l=D,n(5,l)})}function w(D){Oe[D?"unshift":"push"](()=>{f=D,n(6,f)})}return t.$$set=D=>{"params"in D&&n(2,o=D.params),"enabledFields"in D&&n(0,s=D.enabledFields),"disabledFields"in D&&n(1,u=D.disabledFields),"loadLayout"in D&&n(3,r=D.loadLayout),"fetch"in D&&n(4,m=D.fetch)},[s,u,o,r,m,l,f,h,d,b,g,_,w]}class wn extends Se{constructor(e){super(),De(this,e,qi,zi,ve,{params:2,enabledFields:0,disabledFields:1,loadLayout:3,fetch:4})}}function ji(t){let e,n,l={params:t[0],enabledFields:t[2],disabledFields:t[3],editable:Wi,loadLayout:t[4]};return e=new wn({props:l}),t[6](e),{c(){Ue(e.$$.fragment)},m(i,a){Ne(e,i,a),n=!0},p(i,[a]){const o={};a&1&&(o.params=i[0]),a&4&&(o.enabledFields=i[2]),a&8&&(o.disabledFields=i[3]),e.$set(o)},i(i){n||(Ee(e.$$.fragment,i),n=!0)},o(i){Fe(e.$$.fragment,i),n=!1},d(i){t[6](null),Me(e,i)}}}let Wi=!0;function Gi(t){return!0}function Ui(t,e,n){let{params:l}=e;l.dataAttributeList||(l.dataAttributeList=["id","name","width","widthPx","link","notSortable","align","view","customLabel"]),l.dataAttributesDefs||(l.dataAttributesDefs={link:{type:"bool"},width:{type:"float"},notSortable:{type:"bool"},align:{type:"enum",options:["left","right"]},view:{type:"varchar",readOnly:!0},customLabel:{type:"varchar",readOnly:!0},widthPx:{type:"float"},name:{type:"varchar",readOnly:!0}});let{layoutDisabledParameter:i="layoutListDisabled"}=e,a,o=[],s=[];const u=[],r=[];function f(d){Ot.create(l.scope,b=>{He.get(l.scope,l.type,l.layoutProfileId,g=>{d&&(c(b,g),d())},!1)})}function c(d,b){const g=Object.keys(d.defs.fields).filter(k=>Gi(d.getFieldParam(k,"type"))&&h(d,k)).sort((k,y)=>H.translate(k,"fields",l.scope).localeCompare(H.translate(y,"fields",l.scope))),_=[],w=[],D=[];n(2,o=b.map(k=>{const y=H.translate(k.name,"fields",l.scope);return w.includes(y)&&D.push(y),w.push(y),_.push(k.name),{...k,label:k.label||y}})),n(3,s=g.filter(k=>!_.includes(k)).map(k=>{const y=H.translate(k,"fields",l.scope);w.includes(y)&&D.push(y),w.push(y);const T={name:k,label:y},E=Be.get(["entityDefs",l.scope,"fields",k,"type"]);return E&&Be.get(["fields",E,"notSortable"])&&(T.notSortable=!0),T})),[o,s].forEach(k=>{k.forEach(y=>{D.includes(y.label)&&(y.label+=` (${y.name})`)})})}function h(d,b){return u.includes(b)||r.includes(d.getFieldParam(b,"type"))?!1:!d.getFieldParam(b,"disabled")&&!d.getFieldParam(b,i)}function m(d){Oe[d?"unshift":"push"](()=>{a=d,n(1,a)})}return t.$$set=d=>{"params"in d&&n(0,l=d.params),"layoutDisabledParameter"in d&&n(5,i=d.layoutDisabledParameter)},[l,a,o,s,f,i,m]}class kl extends Se{constructor(e){super(),De(this,e,Ui,ji,ve,{params:0,layoutDisabledParameter:5})}}function Qi(t){let e,n,l={params:t[0],enabledFields:t[2],disabledFields:t[3],loadLayout:t[5],fetch:t[4]};return e=new wn({props:l}),t[7](e),{c(){Ue(e.$$.fragment)},m(i,a){Ne(e,i,a),n=!0},p(i,[a]){const o={};a&1&&(o.params=i[0]),a&4&&(o.enabledFields=i[2]),a&8&&(o.disabledFields=i[3]),e.$set(o)},i(i){n||(Ee(e.$$.fragment,i),n=!0)},o(i){Fe(e.$$.fragment,i),n=!1},d(i){t[7](null),Me(e,i)}}}function Vi(t,e,n){let{params:l}=e,{viewType:i="detail"}=e;l.dataAttributeList||(l.dataAttributeList=["id","name","style","sticked"]),l.dataAttributesDefs||(l.dataAttributesDefs={style:{type:"enum",options:["default","success","danger","primary","info","warning"],translation:"LayoutManager.options.style"},sticked:{type:"bool"},name:{readOnly:!0}});let a,o=[],s=[],u=()=>{let h={};return o.forEach(m=>{h[m.name]=m}),s.forEach(m=>{h[m.name]={...m,disabled:!0}}),h};function r(h){He.get(l.scope,l.type,l.layoutProfileId,m=>{h&&(f(m),h())},!1)}function f(h){let m=[],d={},b={};Be.get(["clientDefs",l.scope,"defaultSidePanel",i])!==!1&&!Be.get(["clientDefs",l.scope,"defaultSidePanelDisabled"])&&(m.push("default"),d.default="Default"),(Be.get(["clientDefs",l.scope,"sidePanels",i])||[]).forEach(g=>{g.name&&(m.push(g.name),g.label&&(d[g.name]=g.label),b[g.name]=g)}),n(3,s=[]),h=h||{},n(2,o=[]),m.forEach((g,_)=>{let w=!1,D=h[g]||{};D.disabled&&(w=!0);let k;if(d[g]?k=H.translate(d[g],"labels",l.scope):k=H.translate(g,"panels",l.scope),w)s.push({name:g,label:k});else{let y={name:g,label:k};y.name in b&&l.dataAttributeList.forEach(T=>{if(T==="name")return;let E=b[y.name]||{};T in E&&(y[T]=E[T])});for(let T in D)y[T]=D[T];y.index="index"in D?D.index:_,o.push(y)}}),o.sort((g,_)=>g.index-_.index)}function c(h){Oe[h?"unshift":"push"](()=>{a=h,n(1,a)})}return t.$$set=h=>{"params"in h&&n(0,l=h.params),"viewType"in h&&n(6,i=h.viewType)},[l,a,o,s,u,r,i,c]}class Vt extends Se{constructor(e){super(),De(this,e,Vi,Qi,ve,{params:0,viewType:6})}}function Ki(t){let e,n;return e=new wn({props:{params:t[0],enabledFields:t[1],disabledFields:t[2],loadLayout:t[3]}}),{c(){Ue(e.$$.fragment)},m(l,i){Ne(e,l,i),n=!0},p(l,[i]){const a={};i&1&&(a.params=l[0]),i&2&&(a.enabledFields=l[1]),i&4&&(a.disabledFields=l[2]),e.$set(a)},i(l){n||(Ee(e.$$.fragment,l),n=!0)},o(l){Fe(e.$$.fragment,l),n=!1},d(l){Me(e,l)}}}function Zi(t,e){return!t.getLinkParam(e,"disabled")&&!t.getLinkParam(e,"layoutRelationshipsDisabled")}function Ji(t,e,n){let{params:l}=e;l.dataAttributeList||(l.dataAttributeList=["id","name","style","hiddenPerDefault"]),l.dataAttributesDefs||(l.dataAttributesDefs={style:{type:"enum",options:["default","success","danger","primary","info","warning"],translation:"LayoutManager.options.style"},hiddenPerDefault:{type:"bool"},name:{readOnly:!0}});let i=[],a=[];function o(u){Ot.create(l.scope,function(r){He.get(l.scope,l.type,l.layoutProfileId,f=>{u&&(s(r,f),u())},!1)})}function s(u,r){let f=[];for(let m in u.defs.links)["belongsTo","hasMany","hasChildren"].includes(u.defs.links[m].type)&&Zi(u,m)&&f.push(m);const c=Be.get(["clientDefs",l.scope,"bottomPanels","detail"])||[];for(let m of c)m.layoutRelationshipsDisabled||f.push(m.name);f.sort(function(m,d){let b,g,_=c.find(D=>D.name===m),w=c.find(D=>D.name===d);return m in u.defs.links?b=H.translate(m,"links",l.scope):_&&(b=H.translate(_.label,"labels",l.scope)),d in u.defs.links?g=H.translate(d,"links",l.scope):w&&(g=H.translate(w.label,"labels",l.scope)),b.localeCompare(g)});let h=[];n(1,i=[]),n(2,a=[]);for(let m in r){let d=r[m],b,g=c.find(_=>_.name===d.name);typeof d=="string"||d instanceof String?b={name:d,label:g?H.translate(g.label,"labels",l.scope):H.translate(d,"links",l.scope)}:(b=d,b.label=g?H.translate(g.label,"labels",l.scope):H.translate(b.name,"links",l.scope)),l.dataAttributeList.forEach(_=>{if(_==="name"||_ in b)return;let w=Be.get(["clientDefs",l.scope,"relationshipPanels",b.name,_]);w!==null&&(b[_]=w)}),i.push(b),h.push(b.name)}for(let m of f)if(!h.includes(m)){let d=c.find(b=>b.name===m);a.push({name:m,label:d?H.translate(d.label,"labels",l.scope):H.translate(m,"links",l.scope)})}}return t.$$set=u=>{"params"in u&&n(0,l=u.params)},[l,i,a,o]}class xi extends Se{constructor(e){super(),De(this,e,Ji,Ki,ve,{params:0})}}function Pl(t,e,n){const l=t.slice();return l[40]=e[n],l}function Tl(t,e,n){const l=t.slice();return l[43]=e[n],l}function Ll(t,e,n){const l=t.slice();return l[46]=e[n],l}function Cl(t,e,n){const l=t.slice();return l[49]=e[n],l[51]=n,l}function $i(t){let e,n,l,i,a;function o(){return t[21](t[43],t[46],t[51])}function s(...u){return t[22](t[43],t[46],t[51],...u)}return{c(){e=P("li"),n=P("a"),n.innerHTML='<i class="fas fa-minus"></i>',l=X(),p(n,"href","#"),p(n,"data-action","minusCell"),p(n,"class","remove-field svelte-fp3tbt"),p(e,"class","empty cell svelte-fp3tbt")},m(u,r){Q(u,e,r),v(e,n),v(e,l),i||(a=[le(n,"click",We(o)),le(e,"dragover",We(ia)),le(e,"drop",s)],i=!0)},p(u,r){t=u},d(u){u&&G(e),i=!1,Ie(a)}}}function ea(t){let e,n=t[49].label+"",l,i,a,o,s,u,r,f,c,h,m;function d(){return t[19](t[43],t[46],t[51])}function b(...g){return t[20](t[49],...g)}return{c(){e=P("li"),l=ce(n),i=X(),a=P("a"),a.innerHTML='<i class="fas fa-times"></i>',o=X(),p(a,"href","#"),p(a,"data-action","removeField"),p(a,"class","remove-field svelte-fp3tbt"),p(e,"class","cell svelte-fp3tbt"),p(e,"draggable","true"),p(e,"data-id",s=t[49].id),p(e,"data-name",u=t[49].name),p(e,"data-full-width",r=t[49].fullWidth?"true":void 0),p(e,"data-custom-label",f=t[49].customLabel?t[49].customLabel:void 0),p(e,"data-no-label",c=t[49].noLabel)},m(g,_){Q(g,e,_),v(e,l),v(e,i),v(e,a),v(e,o),h||(m=[le(a,"click",We(d)),le(e,"dragstart",Jt(b))],h=!0)},p(g,_){t=g,_[0]&2&&n!==(n=t[49].label+"")&&Ae(l,n),_[0]&2&&s!==(s=t[49].id)&&p(e,"data-id",s),_[0]&2&&u!==(u=t[49].name)&&p(e,"data-name",u),_[0]&2&&r!==(r=t[49].fullWidth?"true":void 0)&&p(e,"data-full-width",r),_[0]&2&&f!==(f=t[49].customLabel?t[49].customLabel:void 0)&&p(e,"data-custom-label",f),_[0]&2&&c!==(c=t[49].noLabel)&&p(e,"data-no-label",c)},d(g){g&&G(e),h=!1,Ie(m)}}}function Il(t){let e;function n(a,o){return a[49]?ea:$i}let l=n(t),i=l(t);return{c(){i.c(),e=In()},m(a,o){i.m(a,o),Q(a,e,o)},p(a,o){l===(l=n(a))&&i?i.p(a,o):(i.d(1),i=l(a),i&&(i.c(),i.m(e.parentNode,e)))},d(a){a&&G(e),i.d(a)}}}function Al(t,e){let n,l,i,a,o,s,u,r,f;function c(){return e[18](e[43],e[46])}let h=de(e[46].cells),m=[];for(let d=0;d<h.length;d+=1)m[d]=Il(Cl(e,h,d));return{key:t,first:null,c(){n=P("li"),l=P("div"),i=P("a"),i.innerHTML='<i class="fas fa-times"></i>',a=X(),o=P("ul");for(let d=0;d<m.length;d+=1)m[d].c();s=X(),p(i,"href","#"),p(i,"data-action","removeRow"),p(i,"class","remove-row pull-right svelte-fp3tbt"),p(l,"class","svelte-fp3tbt"),p(o,"class","cells svelte-fp3tbt"),p(n,"class","row svelte-fp3tbt"),p(n,"data-number",u=e[46].number),this.first=n},m(d,b){Q(d,n,b),v(n,l),v(l,i),v(n,a),v(n,o);for(let g=0;g<m.length;g+=1)m[g]&&m[g].m(o,null);v(n,s),r||(f=[le(i,"click",We(c)),le(o,"mousedown",Jt(aa))],r=!0)},p(d,b){if(e=d,b[0]&5634){h=de(e[46].cells);let g;for(g=0;g<h.length;g+=1){const _=Cl(e,h,g);m[g]?m[g].p(_,b):(m[g]=Il(_),m[g].c(),m[g].m(o,null))}for(;g<m.length;g+=1)m[g].d(1);m.length=h.length}b[0]&2&&u!==(u=e[46].number)&&p(n,"data-number",u)},d(d){d&&G(n),Zt(m,d),r=!1,Ie(f)}}}function Ol(t,e){let n,l,i,a=(e[43].customLabel||e[43].label||"")+"",o,s,u,r,f,c,h,m,d,b,g,_=[],w=new Map,D,k,y,T,E,B,C;function ne(){return e[16](e[43])}function se(){return e[17](e[43])}let V=de(e[43].rows);const W=F=>F[46].number;for(let F=0;F<V.length;F+=1){let z=Ll(e,V,F),me=W(z);w.set(me,_[F]=Al(me,z))}function K(){return e[23](e[43])}return{key:t,first:null,c(){n=P("li"),l=P("header"),i=P("label"),o=ce(a),u=ce(`Â \r
                                `),r=P("a"),r.innerHTML='<i class="fas fa-pencil-alt fa-sm"></i>',f=X(),c=P("a"),h=P("i"),b=X(),g=P("ul");for(let F=0;F<_.length;F+=1)_[F].c();D=X(),k=P("div"),y=P("a"),y.innerHTML='<i class="fas fa-plus"></i>',T=X(),p(i,"data-is-custom",s=e[43].customLabel?"true":void 0),p(i,"class","svelte-fp3tbt"),p(r,"href","#"),p(r,"data-action","edit-panel-label"),p(r,"class","edit-panel-label svelte-fp3tbt"),p(h,"class","fas fa-times"),p(c,"href","#"),Ge(c,"float","right"),p(c,"data-action","removePanel"),p(c,"class","remove-panel svelte-fp3tbt"),p(c,"data-number",m=e[43].number),p(l,"data-name",d=e[43].name),p(l,"class","svelte-fp3tbt"),p(g,"class","rows svelte-fp3tbt"),p(y,"href","#"),p(y,"data-action","addRow"),p(y,"class","svelte-fp3tbt"),p(k,"class","svelte-fp3tbt"),p(n,"data-number",E=e[43].number),p(n,"class","panel-layout svelte-fp3tbt"),this.first=n},m(F,z){Q(F,n,z),v(n,l),v(l,i),v(i,o),v(l,u),v(l,r),v(l,f),v(l,c),v(c,h),v(n,b),v(n,g);for(let me=0;me<_.length;me+=1)_[me]&&_[me].m(g,null);v(n,D),v(n,k),v(k,y),v(n,T),B||(C=[le(r,"click",We(ne)),le(c,"click",We(se)),le(g,"mousedown",Jt(oa)),le(y,"click",We(K))],B=!0)},p(F,z){e=F,z[0]&2&&a!==(a=(e[43].customLabel||e[43].label||"")+"")&&Ae(o,a),z[0]&2&&s!==(s=e[43].customLabel?"true":void 0)&&p(i,"data-is-custom",s),z[0]&2&&m!==(m=e[43].number)&&p(c,"data-number",m),z[0]&2&&d!==(d=e[43].name)&&p(l,"data-name",d),z[0]&5890&&(V=de(e[43].rows),_=It(_,z,W,1,e,V,w,g,Ct,Al,null,Ll)),z[0]&2&&E!==(E=e[43].number)&&p(n,"data-number",E)},d(F){F&&G(n);for(let z=0;z<_.length;z+=1)_[z].d();B=!1,Ie(C)}}}function Fl(t){let e,n=t[40].label+"",l,i,a,o,s;function u(...r){return t[24](t[40],...r)}return{c(){e=P("li"),l=ce(n),i=X(),p(e,"class","cell svelte-fp3tbt"),p(e,"data-name",a=t[40].name)},m(r,f){Q(r,e,f),v(e,l),v(e,i),o||(s=le(e,"dragstart",u),o=!0)},p(r,f){t=r,f[0]&4&&n!==(n=t[40].label+"")&&Ae(l,n),f[0]&4&&a!==(a=t[40].name)&&p(e,"data-name",a)},d(r){r&&G(e),o=!1,s()}}}function ta(t){let e,n,l,i,a,o,s,u,r=[],f=new Map,c,h,m,d,b,g,_,w,D=de(t[1]);const k=E=>E[43].number;for(let E=0;E<D.length;E+=1){let B=Tl(t,D,E),C=k(B);f.set(C,r[E]=Ol(C,B))}let y=de(t[2]),T=[];for(let E=0;E<y.length;E+=1)T[E]=Fl(Pl(t,y,E));return{c(){e=P("div"),n=P("div"),l=P("div"),i=P("header"),i.textContent=`${H.translate("Layout","LayoutManager")}`,a=X(),o=P("a"),o.textContent=`${H.translate("Add Panel","Admin")}`,s=X(),u=P("ul");for(let E=0;E<r.length;E+=1)r[E].c();c=X(),h=P("div"),m=P("div"),d=P("header"),d.textContent=`${H.translate("Available Fields","Admin")}`,b=X(),g=P("ul");for(let E=0;E<T.length;E+=1)T[E].c();p(i,"class","svelte-fp3tbt"),p(o,"href","#"),p(o,"class","svelte-fp3tbt"),p(u,"class","panels svelte-fp3tbt"),p(l,"class","well svelte-fp3tbt"),p(n,"class","col-md-8 svelte-fp3tbt"),p(d,"class","svelte-fp3tbt"),p(g,"class","disabled cells clearfix svelte-fp3tbt"),p(m,"class","well svelte-fp3tbt"),p(h,"class","col-md-4 svelte-fp3tbt"),p(e,"id","layout"),p(e,"class","row svelte-fp3tbt")},m(E,B){Q(E,e,B),v(e,n),v(n,l),v(l,i),v(l,a),v(l,o),v(l,s),v(l,u);for(let C=0;C<r.length;C+=1)r[C]&&r[C].m(u,null);v(e,c),v(e,h),v(h,m),v(m,d),v(m,b),v(m,g);for(let C=0;C<T.length;C+=1)T[C]&&T[C].m(g,null);_||(w=le(o,"click",We(t[5])),_=!0)},p(E,B){if(B[0]&8130&&(D=de(E[1]),r=It(r,B,k,1,E,D,f,u,Ct,Ol,null,Tl)),B[0]&4){y=de(E[2]);let C;for(C=0;C<y.length;C+=1){const ne=Pl(E,y,C);T[C]?T[C].p(ne,B):(T[C]=Fl(ne),T[C].c(),T[C].m(g,null))}for(;C<T.length;C+=1)T[C].d(1);T.length=y.length}},d(E){E&&G(e);for(let B=0;B<r.length;B+=1)r[B].d();Zt(T,E),_=!1,w()}}}function na(t){let e,n;return e=new Kn({props:{params:t[0],validate:t[13],fetch:t[4],loadLayout:t[3],$$slots:{default:[ta]},$$scope:{ctx:t}}}),{c(){Ue(e.$$.fragment)},m(l,i){Ne(e,l,i),n=!0},p(l,i){const a={};i[0]&1&&(a.params=l[0]),i[0]&6|i[1]&2097152&&(a.$$scope={dirty:i,ctx:l}),e.$set(a)},i(l){n||(Ee(e.$$.fragment,l),n=!0)},o(l){Fe(e.$$.fragment,l),n=!1},d(l){Me(e,l)}}}function la(t,e){return e.some(n=>n.name===t)}const ia=t=>t.dataTransfer.dropEffect="move",aa=()=>{},oa=()=>{};function ra(t,e,n){let{params:l}=e,{columnCount:i=2}=e,{layoutDisabledParameter:a="layoutDetailDisabled"}=e,o=["id","label","style"],s={label:{type:"varchar"},style:{type:"enum",options:["default","success","danger","primary","info","warning"],translation:"LayoutManager.options.style"},dynamicLogicVisible:{type:"base",view:"views/admin/field-manager/fields/dynamic-logic-conditions"}},u=["modifiedAt","createdAt","modifiedBy","createdBy","assignedUser","ownerUser","teams"],r=[],f=[],c=-1,h=-1,m;Wl();function d(L){let I,M;const R=[];R.push(new Promise(Y=>{Ot.create(l.scope,Z=>{He.get(l.scope,l.type,l.layoutProfileId,U=>{I=U,M=Z,Y()},!1)})})),["detail","detailSmall"].includes(l.type)&&R.push(new Promise(Y=>{He.get(l.scope,"sidePanels"+Espo.utils.upperCaseFirst(l.type),l.layoutProfileId,Z=>{m=Z,Y()},!1)})),Promise.all(R).then(()=>{L&&(b(M,I),D(),Mn().then(()=>{y()}),L())})}function b(L,I){let M=[];const R=[];for(const U in L.defs.fields)g(L,U)&&(R.push(H.translate(U,"fields",l.scope)),M.push(U));const Y=R.filter((U,pe)=>R.indexOf(U)!==pe);let Z=[];n(2,f=[]),n(1,r=I),I.forEach((U,pe)=>{U.rows.forEach((ee,Ce)=>{ee&&ee.forEach((we,qe)=>{if(qe==i||!we)return;let Ze=H.translate(we.name,"fields",l.scope);Y.includes(Ze)&&(Ze+=` (${we.name})`),Z.push({name:we.name,label:Ze}),n(1,r[pe].rows[Ce][qe].label=Ze,r)})})}),M.sort((U,pe)=>H.translate(U,"fields",l.scope).localeCompare(H.translate(pe,"fields",l.scope)));for(const U in M)if(!la(M[U],Z)){const pe=M[U];let ee=H.translate(pe,"fields",l.scope);Y.includes(ee)&&(ee+=` (${pe})`),f.push({name:pe,label:ee})}}function g(L,I){return _()&&u.includes(I)?!1:!L.getFieldParam(I,"disabled")&&!L.getFieldParam(I,a)}function _(){if(Be.get(["clientDefs",l.scope,"defaultSidePanelDisabled"]))return!1;if(m){for(const L in m)if(L==="default"&&m[L].disabled)return!1}return!0}function w(){return r.map(L=>({...L,rows:L.rows.map(I=>I.cells)}))}function D(){c=-1,h=-1,n(1,r=r.map((L,I)=>(L.number=I,c=I,L.rows=L.rows.map(M=>({number:h++,cells:M})),L)))}function k(L){A.create(L,{animation:150,group:"rows",draggable:"li.row",onEnd(I){const M=parseInt(I.to.closest(".panel-layout").getAttribute("data-number")),R=parseInt(I.from.closest(".panel-layout").getAttribute("data-number"));if(R===M)n(1,r=r.map(Y=>{if(Y.number===M){const[Z]=Y.rows.splice(I.oldIndex,1);Y.rows.splice(I.newIndex,0,Z)}return Y}));else{const Z=r.find(U=>U.number===R).rows[I.oldIndex];n(1,r=r.map(U=>(U.number===R&&U.rows.splice(I.oldIndex,1),U.number===M&&U.rows.splice(I.newIndex,0,Z),U)))}}})}function y(){const L=document.querySelector("ul.panels");L&&A.create(L,{animation:150,group:"panels",draggable:"li.panel-layout",onEnd(I){const M=Array.from(I.to.children);n(1,r=M.map(R=>{const Y=parseInt(R.getAttribute("data-number"));return r.find(Z=>Z.number===Y)}))}}),document.querySelectorAll("ul.rows").forEach(I=>{k(I)}),document.querySelectorAll("ul.cells.disabled").forEach(I=>{A.create(I,{animation:150,group:"cells",draggable:"li.cell"})})}function T(){c++;const L={label:"New panel",rows:[{number:h++,cells:[!1,!1]}],number:c,name:`panel${c}`,isCustomLabel:!0};n(1,r=[...r,L]),Mn().then(()=>{const I=document.querySelector(`.panel-layout[data-number="${L.number}"] > .rows`);k(I)})}function E(L){const I=r.find(R=>R.number===L);n(1,r=r.filter(R=>R!==I));let M=[];I.rows.forEach(R=>{R.cells.forEach(Y=>{Y&&M.push(Y)})}),n(2,f=[...f,...M])}function B(L){n(1,r=r.map(I=>(I.number===L&&(I.rows=[...I.rows,{number:h++,cells:Array(i).fill(!1)}]),I)))}function C(L,I){n(1,r=r.map(M=>{if(M.number===L){const R=M.rows.find(Y=>Y.number===I);M.rows=M.rows.filter(Y=>Y!=R),n(2,f=[...f,...R.cells.filter(Y=>!!Y)])}return M}))}function ne(L,I,M){n(1,r=r.map(R=>(R.number===L&&(R.rows=R.rows.map((Y,Z)=>{if(Y.number===I){const U=Y.cells[M];U&&n(2,f=[...f,U]),Y.cells[M]=!1}return Y})),R)))}function se(L,I,M,R){const Y=L.dataTransfer.getData("name");let Z=f.find(ee=>ee.name===Y),U=null,pe=null;if(Z)n(2,f=f.filter(ee=>ee!==Z));else{if(r.forEach(ee=>{ee.rows.forEach((Ce,we)=>{Ce.cells.forEach(qe=>{qe&&qe.name===Y&&(Z=qe,U=Ce.number,pe=ee.number)})})}),!Z)return;n(1,r=r.map((ee,Ce)=>(pe===ee.number&&(ee.rows=ee.rows.map((we,qe)=>(we.number===U&&(we.cells=we.cells.map((Ze,pa)=>Ze&&Ze.name===Y?!1:Ze)),we))),ee)))}n(1,r=r.map(ee=>(I===ee.number&&(ee.rows=ee.rows.map(Ce=>(M===Ce.number&&(Ce.cells=Ce.cells.map((we,qe)=>qe===R?(Z.fullWidth&&delete Z.fullWidth,Z):we)),Ce))),ee)))}function V(L){l.onEditPanel(L,o,s,I=>{n(1,r=r.map(M=>(M.number===L.number&&o.forEach(R=>{L[R]=I[R]}),M)))})}function W(L,I,M){i<2||(n(1,r=r.map(R=>(L===R.number&&(R.rows=R.rows.map(Y=>{if(I===Y.number){const Z=Y.cells.filter((U,pe)=>pe!==M);Z.length===1&&(Z[0].fullWidth=!0),Y.cells=Z}return Y})),R))),n(14,i--,i))}function K(L){let I=0;return L.forEach(M=>{M.rows.forEach(R=>{R.forEach(Y=>{Y&&I++})})}),I===0?(Re.notify("Layout cannot be empty.","error"),!1):!0}const F=L=>V(L),z=L=>E(L.number),me=(L,I)=>C(L.number,I.number),et=(L,I,M)=>ne(L.number,I.number,M),En=(L,I)=>{I.dataTransfer.setData("name",L.name)},Nl=(L,I,M)=>W(L.number,I.number,M),Kt=(L,I,M,R)=>se(R,L.number,I.number,M),Dn=L=>B(L.number),da=(L,I)=>{I.dataTransfer.setData("name",L.name)};return t.$$set=L=>{"params"in L&&n(0,l=L.params),"columnCount"in L&&n(14,i=L.columnCount),"layoutDisabledParameter"in L&&n(15,a=L.layoutDisabledParameter)},[l,r,f,d,w,T,E,B,C,ne,se,V,W,K,i,a,F,z,me,et,En,Nl,Kt,Dn,da]}class sa extends Se{constructor(e){super(),De(this,e,ra,na,ve,{params:0,columnCount:14,layoutDisabledParameter:15},null,[-1,-1])}}function ua(t){let e,n;return e=new t[1]({props:{params:t[0],layoutDisabledParameter:t[2],viewType:t[3]}}),{c(){Ue(e.$$.fragment)},m(l,i){Ne(e,l,i),n=!0},p(l,[i]){const a={};i&1&&(a.params=l[0]),i&4&&(a.layoutDisabledParameter=l[2]),i&8&&(a.viewType=l[3]),e.$set(a)},i(l){n||(Ee(e.$$.fragment,l),n=!0)},o(l){Fe(e.$$.fragment,l),n=!1},d(l){Me(e,l)}}}function fa(t,e,n){let{params:l}=e,i,a,o;return t.$$set=s=>{"params"in s&&n(0,l=s.params)},t.$$.update=()=>{if(t.$$.dirty&1)switch(l.type){case"list":case"listSmall":n(2,a=l.type==="list"?"layoutListDisabled":"layoutListSmallDisabled"),n(1,i=kl);break;case"kanban":n(1,i=kl),n(0,l.dataAttributeList=["id","name","link","align","view","isLarge","cssStyle"],l),n(0,l.dataAttributesDefs={link:{type:"bool"},isLarge:{type:"bool"},width:{type:"float"},cssStyle:{type:"varchar"},align:{type:"enum",options:["left","right"]},view:{type:"varchar",readOnly:!0},name:{type:"varchar",readOnly:!0}},l);break;case"relationships":n(1,i=xi);break;case"detail":case"detailSmall":n(1,i=sa);break;case"sidePanelsDetail":n(3,o="detail"),n(1,i=Vt);break;case"sidePanelsDetailSmall":n(3,o="detailSmall"),n(1,i=Vt);break;case"sidePanelsEdit":n(3,o="edit"),n(1,i=Vt);break;case"sidePanelsEditSmall":n(3,o="editSmall"),n(1,i=Vt);break}},[l,i,a,o]}class ca extends Se{constructor(e){super(),De(this,e,fa,ua,ve,{params:0})}}window.SvelteLanguage=H,window.SvelteUserData=Yn,window.SvelteNotifier=Re,window.SvelteLayoutManager=He,window.SvelteMetadata=Be,window.SvelteModelFactory=Ot,fe.LayoutComponent=ca,fe.QueueManagerIcon=li,fe.UpdatePanel=fi,Object.defineProperty(fe,Symbol.toStringTag,{value:"Module"})});
