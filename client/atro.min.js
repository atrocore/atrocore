(function(re,U){typeof exports=="object"&&typeof module<"u"?U(exports):typeof define=="function"&&define.amd?define(["exports"],U):(re=typeof globalThis<"u"?globalThis:re||self,U(re.Svelte={}))})(this,function(re){"use strict";var ia=Object.defineProperty;var aa=(re,U,Ne)=>U in re?ia(re,U,{enumerable:!0,configurable:!0,writable:!0,value:Ne}):re[U]=Ne;var pn=(re,U,Ne)=>aa(re,typeof U!="symbol"?U+"":U,Ne);function U(){}function Ne(t,e){for(const n in e)t[n]=e[n];return t}function mn(t){return t()}function gn(){return Object.create(null)}function Xe(t){t.forEach(mn)}function bn(t){return typeof t=="function"}function ge(t,e){return t!=t?e==e:t!==e||t&&typeof t=="object"||typeof t=="function"}let bt;function _n(t,e){return t===e?!0:(bt||(bt=document.createElement("a")),bt.href=e,t===bt.href)}function Pl(t){return Object.keys(t).length===0}function Ll(t,e,n,l){if(t){const i=vn(t,e,n,l);return t[0](i)}}function vn(t,e,n,l){return t[1]&&l?Ne(n.ctx.slice(),t[1](l(e))):n.ctx}function Cl(t,e,n,l){if(t[2]&&l){const i=t[2](l(n));if(e.dirty===void 0)return i;if(typeof i=="object"){const a=[],o=Math.max(e.dirty.length,i.length);for(let r=0;r<o;r+=1)a[r]=e.dirty[r]|i[r];return a}return e.dirty|i}return e.dirty}function Al(t,e,n,l,i,a){if(i){const o=vn(e,n,l,a);t.p(o,i)}}function Ol(t){if(t.ctx.length>32){const e=[],n=t.ctx.length/32;for(let l=0;l<n;l++)e[l]=-1;return e}return-1}function g(t,e){t.appendChild(e)}function j(t,e,n){t.insertBefore(e,n||null)}function Y(t){t.parentNode&&t.parentNode.removeChild(t)}function Qe(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}function k(t){return document.createElement(t)}function se(t){return document.createTextNode(t)}function R(){return se(" ")}function yn(){return se("")}function te(t,e,n,l){return t.addEventListener(e,n,l),()=>t.removeEventListener(e,n,l)}function Me(t){return function(e){return e.preventDefault(),t.call(this,e)}}function wn(t){return function(e){return e.stopPropagation(),t.call(this,e)}}function p(t,e,n){n==null?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}const Fl=["width","height"];function _t(t,e){const n=Object.getOwnPropertyDescriptors(t.__proto__);for(const l in e)e[l]==null?t.removeAttribute(l):l==="style"?t.style.cssText=e[l]:l==="__value"?t.value=t[l]=e[l]:n[l]&&n[l].set&&Fl.indexOf(l)===-1?t[l]=e[l]:p(t,l,e[l])}function Il(t){return Array.from(t.childNodes)}function Te(t,e){e=""+e,t.data!==e&&(t.data=e)}function Re(t,e,n,l){n==null?t.style.removeProperty(e):t.style.setProperty(e,n,"")}function vt(t,e,n){t.classList.toggle(e,!!n)}function Nl(t,e,{bubbles:n=!1,cancelable:l=!1}={}){return new CustomEvent(t,{detail:e,bubbles:n,cancelable:l})}let at;function ot(t){at=t}function yt(){if(!at)throw new Error("Function called outside component initialization");return at}function Xt(t){yt().$$.on_mount.push(t)}function Ml(t){yt().$$.after_update.push(t)}function En(t){yt().$$.on_destroy.push(t)}function Dn(){const t=yt();return(e,n,{cancelable:l=!1}={})=>{const i=t.$$.callbacks[e];if(i){const a=Nl(e,n,{cancelable:l});return i.slice().forEach(o=>{o.call(t,a)}),!a.defaultPrevented}return!0}}const Ve=[],De=[];let Ke=[];const Sn=[],kn=Promise.resolve();let jt=!1;function Tn(){jt||(jt=!0,kn.then(Ln))}function Pn(){return Tn(),kn}function Gt(t){Ke.push(t)}const Wt=new Set;let Ze=0;function Ln(){if(Ze!==0)return;const t=at;do{try{for(;Ze<Ve.length;){const e=Ve[Ze];Ze++,ot(e),Rl(e.$$)}}catch(e){throw Ve.length=0,Ze=0,e}for(ot(null),Ve.length=0,Ze=0;De.length;)De.pop()();for(let e=0;e<Ke.length;e+=1){const n=Ke[e];Wt.has(n)||(Wt.add(n),n())}Ke.length=0}while(Ve.length);for(;Sn.length;)Sn.pop()();jt=!1,Wt.clear(),ot(t)}function Rl(t){if(t.fragment!==null){t.update(),Xe(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(Gt)}}function Hl(t){const e=[],n=[];Ke.forEach(l=>t.indexOf(l)===-1?e.push(l):n.push(l)),n.forEach(l=>l()),Ke=e}const wt=new Set;let ql;function _e(t,e){t&&t.i&&(wt.delete(t),t.i(e))}function Pe(t,e,n,l){if(t&&t.o){if(wt.has(t))return;wt.add(t),ql.c.push(()=>{wt.delete(t)}),t.o(e)}}function ue(t){return(t==null?void 0:t.length)!==void 0?t:Array.from(t)}function zl(t,e){t.d(1),e.delete(t.key)}function Bl(t,e,n,l,i,a,o,r,s,u,c,f){let h=t.length,y=a.length,d=h;const w={};for(;d--;)w[t[d].key]=d;const D=[],m=new Map,b=new Map,E=[];for(d=y;d--;){const v=f(i,a,d),C=n(v);let L=o.get(C);L?E.push(()=>L.p(v,e)):(L=u(C,v),L.c()),m.set(C,D[d]=L),C in w&&b.set(C,Math.abs(d-w[C]))}const S=new Set,P=new Set;function A(v){_e(v,1),v.m(r,c),o.set(v.key,v),c=v.first,y--}for(;h&&y;){const v=D[y-1],C=t[h-1],L=v.key,G=C.key;v===C?(c=v.first,h--,y--):m.has(G)?!o.has(L)||S.has(L)?A(v):P.has(G)?h--:b.get(L)>b.get(G)?(P.add(L),A(v)):(S.add(G),h--):(s(C,o),h--)}for(;h--;){const v=t[h];m.has(v.key)||s(v,o)}for(;y;)A(D[y-1]);return Xe(E),D}function Cn(t,e){const n={},l={},i={$$scope:1};let a=t.length;for(;a--;){const o=t[a],r=e[a];if(r){for(const s in o)s in r||(l[s]=1);for(const s in r)i[s]||(n[s]=r[s],i[s]=1);t[a]=r}else for(const s in o)i[s]=1}for(const o in l)o in n||(n[o]=void 0);return n}function He(t){t&&t.c()}function Le(t,e,n){const{fragment:l,after_update:i}=t.$$;l&&l.m(e,n),Gt(()=>{const a=t.$$.on_mount.map(mn).filter(bn);t.$$.on_destroy?t.$$.on_destroy.push(...a):Xe(a),t.$$.on_mount=[]}),i.forEach(Gt)}function Ce(t,e){const n=t.$$;n.fragment!==null&&(Hl(n.after_update),Xe(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function Yl(t,e){t.$$.dirty[0]===-1&&(Ve.push(t),Tn(),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function ve(t,e,n,l,i,a,o=null,r=[-1]){const s=at;ot(t);const u=t.$$={fragment:null,ctx:[],props:a,update:U,not_equal:i,bound:gn(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(s?s.$$.context:[])),callbacks:gn(),dirty:r,skip_bound:!1,root:e.target||s.$$.root};o&&o(u.root);let c=!1;if(u.ctx=n?n(t,e.props||{},(f,h,...y)=>{const d=y.length?y[0]:h;return u.ctx&&i(u.ctx[f],u.ctx[f]=d)&&(!u.skip_bound&&u.bound[f]&&u.bound[f](d),c&&Yl(t,f)),h}):[],u.update(),c=!0,Xe(u.before_update),u.fragment=l?l(u.ctx):!1,e.target){if(e.hydrate){const f=Il(e.target);u.fragment&&u.fragment.l(f),f.forEach(Y)}else u.fragment&&u.fragment.c();e.intro&&_e(t.$$.fragment),Le(t,e.target,e.anchor),Ln()}ot(s)}class ye{constructor(){pn(this,"$$");pn(this,"$$set")}$destroy(){Ce(this,1),this.$destroy=U}$on(e,n){if(!bn(n))return U;const l=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return l.push(n),()=>{const i=l.indexOf(n);i!==-1&&l.splice(i,1)}}$set(e){this.$$set&&!Pl(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}const Xl="4",Je=[];function xe(t,e=U){let n;const l=new Set;function i(r){if(ge(t,r)&&(t=r,n)){const s=!Je.length;for(const u of l)u[1](),Je.push(u,t);if(s){for(let u=0;u<Je.length;u+=2)Je[u][0](Je[u+1]);Je.length=0}}}function a(r){i(r(t))}function o(r,s=U){const u=[r,s];return l.add(u),l.size===1&&(n=e(i,a)||U),r(t),()=>{l.delete(u),l.size===0&&n&&(n(),n=null)}}return{set:i,update:a,subscribe:o}}const Ut=xe({}),H={setTranslations(t){Ut.set(t)},has(t,e,n){let l=!1;return Ut.subscribe(i=>{if(n in i&&e in i[n]&&t in i[n][e]){l=!0;return}})(),l},get(t,e,n){let l=n;return Ut.subscribe(i=>{if(t in i&&e in i[t]&&n in i[t][e]){l=i[t][e][n];return}if(t in i&&e in i[t]&&n in i[t][e]){l=i[t][e][n];return}if(t=="Global"){l=n;return}l=null})(),l},translate(t,e=null,n=null){n=n||"Global",e=e||"labels";let l=H.get(n,e,t);return l===null&&n!="Global"&&(l=H.get("Global",e,t)),l},translateOption(t,e,n=null){let l=H.translate(e,"options",n);return l===null?"":typeof l=="object"?l[t]:t}},An=xe({}),On={set(t){An.set(t)},get(){let t=null;return An.subscribe(e=>{e&&(t=e)})(),t}},Qt=xe(),de={setNotifier(t){Qt.set(t)},notify(t,e=null,n=2e3){Qt.subscribe(l=>{l&&l.notify(t,e,2e3)})()},confirm(t=null,e=null,n){Qt.subscribe(l=>{if(l){let i=null,a=null,o=null;typeof t=="string"||t instanceof String?(a=t,o=H.translate("Yes")):(t=t||{},a=t.message,o=t.confirmText,i=t.confirmStyle||null),l.confirm(a,{confirmText:o,cancelText:H.translate("Cancel"),confirmStyle:i},e,n)}})()}},Et=xe(),Ae={setLayoutManager(t){Et.set(t)},resetToDefault(t,e,n,l){let i=null;return Et.subscribe(a=>{a&&(i=a.resetToDefault(t,e,n,l))})(),i},get:function(t,e,n,l,i){let a=null;return Et.subscribe(o=>{o&&(a=o.get(t,e,n,l,i))})(),a},set:function(t,e,n,l,i){let a=null;return Et.subscribe(o=>{o&&(a=o.set(t,e,n,l,i))})(),a}},Fn=xe(),qe={setMetadata(t){Fn.set(t)},get(t){Fn.subscribe(e=>{e&&e.get(t)})()}},In=xe(),Dt={setModelFactory(t){In.set(t)},create(t,e){In.subscribe(n=>{n&&n.create(t,e)})()}};typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(Xl);function Nn(t){let e,n,l,i,a,o,r,s,u,c,f,h,y,d,w;function D(E,S){return E[2]?Gl:jl}let m=D(t),b=m(t);return{c(){e=k("div"),n=k("div"),l=k("div"),i=k("span"),i.textContent=`${H.translate("queueManager","labels","QueueItem")}`,a=R(),o=k("span"),r=k("a"),r.innerHTML='<span aria-hidden="true">Ã—</span>',s=R(),b.c(),u=R(),c=k("a"),c.textContent=`${H.translate("View List")}`,f=R(),h=k("div"),y=k("div"),y.textContent=`${H.translate("Loading...")}`,p(i,"class","panel-heading-title"),p(r,"href","/"),p(r,"class","close svelte-1p6ppx8"),p(c,"href","#QueueItem"),p(c,"title",H.translate("View List")),p(c,"class","qp-view-list svelte-1p6ppx8"),p(o,"class","pull-right"),p(l,"class","panel-heading clearfix"),p(y,"class","list-container"),p(h,"class","panel-body"),p(n,"class","panel panel-default"),p(e,"class","queue-panel-container")},m(E,S){j(E,e,S),g(e,n),g(n,l),g(l,i),g(l,a),g(l,o),g(o,r),g(o,s),b.m(o,null),g(o,u),g(o,c),g(n,f),g(n,h),g(h,y),t[9](e),d||(w=te(r,"click",t[6]),d=!0)},p(E,S){m===(m=D(E))&&b?b.p(E,S):(b.d(1),b=m(E),b&&(b.c(),b.m(o,u)))},d(E){E&&Y(e),b.d(),t[9](null),d=!1,w()}}}function jl(t){let e,n,l;return{c(){e=k("a"),e.textContent=`${H.translate("Pause")}`,p(e,"href","/"),p(e,"title",H.translate("Pause")),p(e,"class","qm-button")},m(i,a){j(i,e,a),n||(l=te(e,"click",t[8]),n=!0)},p:U,d(i){i&&Y(e),n=!1,l()}}}function Gl(t){let e,n,l;return{c(){e=k("a"),e.textContent=`${H.translate("Start")}`,p(e,"href","/"),p(e,"title",H.translate("Start")),p(e,"class","qm-button")},m(i,a){j(i,e,a),n||(l=te(e,"click",t[7]),n=!0)},p:U,d(i){i&&Y(e),n=!1,l()}}}function Wl(t){let e,n=t[0]&&Nn(t);return{c(){n&&n.c(),e=yn()},m(l,i){n&&n.m(l,i),j(l,e,i)},p(l,[i]){l[0]?n?n.p(l,i):(n=Nn(l),n.c(),n.m(e.parentNode,e)):n&&(n.d(1),n=null)},i:U,o:U,d(l){l&&Y(e),n&&n.d(l)}}}function Ul(t,e,n){let{isOpen:l=!1}=e,{close:i}=e,{icon:a}=e,o=!1;window.addEventListener("publicDataFetched",d=>{n(2,o=!!d.detail.qmPaused)});let r;function s(d){r&&!r.contains(d.target)&&a&&!a.contains(d.target)&&l===!0&&i()}Xt(()=>{document.addEventListener("click",s)}),En(()=>{document.removeEventListener("click",s)});async function u(d){let w=On.get();if(w)try{const D=await fetch("/api/v1/App/action/QueueManagerUpdate",{method:"POST",headers:{"Content-Type":"application/json","Authorization-Token":btoa(w.user.userName+":"+w.token)},body:JSON.stringify({pause:d})});if(!D.ok)throw new Error("Network response was not ok");await D.json(),de.notify("Done","success")}catch(D){console.error("Error:",D)}}const c=d=>{d.preventDefault(),i()},f=d=>{d.preventDefault(),u(!1)},h=d=>{d.preventDefault(),u(!0)};function y(d){De[d?"unshift":"push"](()=>{r=d,n(3,r)})}return t.$$set=d=>{"isOpen"in d&&n(0,l=d.isOpen),"close"in d&&n(1,i=d.close),"icon"in d&&n(5,a=d.icon)},[l,i,o,r,u,a,c,f,h,y]}class Ql extends ye{constructor(e){super(),ve(this,e,Ul,Wl,ge,{isOpen:0,close:1,icon:5})}}function Mn(t){let e;return{c(){e=k("span"),p(e,"class","fas fa-pause-circle pause-icon")},m(n,l){j(n,e,l)},d(n){n&&Y(e)}}}function Vl(t){let e,n,l,i,a,o,r,s,u=t[2]&&Mn();return a=new Ql({props:{icon:t[0],isOpen:t[1],close:t[4]}}),{c(){e=k("a"),n=k("span"),l=R(),u&&u.c(),i=R(),He(a.$$.fragment),p(n,"class","fas fa-tasks"),p(e,"href","/"),p(e,"class","notifications-button")},m(c,f){j(c,e,f),g(e,n),g(e,l),u&&u.m(e,null),t[6](e),j(c,i,f),Le(a,c,f),o=!0,r||(s=te(e,"click",t[7]),r=!0)},p(c,[f]){c[2]?u||(u=Mn(),u.c(),u.m(e,null)):u&&(u.d(1),u=null);const h={};f&1&&(h.icon=c[0]),f&2&&(h.isOpen=c[1]),a.$set(h)},i(c){o||(_e(a.$$.fragment,c),o=!0)},o(c){Pe(a.$$.fragment,c),o=!1},d(c){c&&(Y(e),Y(i)),u&&u.d(),t[6](null),Ce(a,c),r=!1,s()}}}function Kl(t,e,n){let{renderTable:l=()=>{}}=e,i,a=!1,o=!1;window.addEventListener("publicDataFetched",f=>{n(2,o=!!f.detail.qmPaused)});function r(){a||(n(1,a=!0),l())}function s(){n(1,a=!1),window.dispatchEvent(new Event("qmPanelClosed"))}function u(f){De[f?"unshift":"push"](()=>{i=f,n(0,i)})}const c=f=>{f.preventDefault(),r()};return t.$$set=f=>{"renderTable"in f&&n(5,l=f.renderTable)},[i,a,o,r,s,l,u,c]}class Zl extends ye{constructor(e){super(),ve(this,e,Kl,Vl,ge,{renderTable:5})}}function Jl(t){let e,n=`${t[0]}px`,l=`${t[0]}px`,i=`${t[1]}px`;return{c(){e=k("div"),p(e,"class","loading-icon spinner svelte-yw8t7l"),Re(e,"width",n),Re(e,"height",l),Re(e,"border-width",i)},m(a,o){j(a,e,o)},p(a,[o]){o&1&&n!==(n=`${a[0]}px`)&&Re(e,"width",n),o&1&&l!==(l=`${a[0]}px`)&&Re(e,"height",l),o&2&&i!==(i=`${a[1]}px`)&&Re(e,"border-width",i)},i:U,o:U,d(a){a&&Y(e)}}}function xl(t,e,n){let{size:l=40}=e,{thickness:i=4}=e;return t.$$set=a=>{"size"in a&&n(0,l=a.size),"thickness"in a&&n(1,i=a.thickness)},[l,i]}class $l extends ye{constructor(e){super(),ve(this,e,xl,Jl,ge,{size:0,thickness:1})}}function Rn(t){let e,n;return{c(){e=k("img"),_n(e.src,n=t[1])||p(e,"src",n),p(e,"class","logo"),p(e,"alt",t[0])},m(l,i){j(l,e,i)},p(l,i){i&2&&!_n(e.src,n=l[1])&&p(e,"src",n),i&1&&p(e,"alt",l[0])},d(l){l&&Y(e)}}}function Hn(t){let e,n,l;return{c(){e=k("a"),n=k("i"),l=se("Recovery Instructions"),p(n,"class","fa fa-history svelte-1qmezxs"),p(e,"href",t[2]),p(e,"target","_blank"),p(e,"class","btn btn-default svelte-1qmezxs"),p(e,"role","button"),Re(e,"float","right")},m(i,a){j(i,e,a),g(e,n),g(e,l)},p(i,a){a&4&&p(e,"href",i[2])},d(i){i&&Y(e)}}}function qn(t){let e,n,l,i,a,o;return{c(){e=k("hr"),n=R(),l=k("pre"),i=se(t[3]),p(l,"class","logs-container svelte-1qmezxs")},m(r,s){j(r,e,s),j(r,n,s),j(r,l,s),g(l,i),t[11](l),a||(o=te(l,"scroll",t[8]),a=!0)},p(r,s){s&8&&Te(i,r[3])},d(r){r&&(Y(e),Y(n),Y(l)),t[11](null),a=!1,o()}}}function ei(t){let e,n,l,i,a,o,r,s,u,c,f,h,y,d,w,D,m,b,E=t[4]?"Hide":"Show",S,P,A,v,C,L,G,W,K=t[1]&&Rn(t);c=new $l({props:{size:"40",thickness:"5"}});let M=t[2]&&Hn(t),q=t[4]&&t[3]&&qn(t);return{c(){e=k("div"),n=k("div"),l=k("div"),K&&K.c(),i=R(),a=k("div"),o=k("div"),r=k("h3"),r.textContent="System is updating...",s=R(),u=k("section"),He(c.$$.fragment),f=R(),h=k("h5"),y=se(t[5]),d=R(),w=k("section"),D=k("div"),m=k("button"),b=k("i"),S=se(E),P=se(" logs"),v=R(),M&&M.c(),C=R(),q&&q.c(),p(l,"class","logo-container"),p(n,"class","panel-heading"),p(h,"class","svelte-1qmezxs"),p(u,"class","progress-section svelte-1qmezxs"),p(b,"class","fa fa-list svelte-1qmezxs"),p(m,"class","btn btn-default svelte-1qmezxs"),m.disabled=A=!t[3],p(D,"class","buttons"),p(w,"class","logs-section"),p(o,"class","form-group"),p(a,"class","panel-body"),p(e,"id","login"),p(e,"class","panel panel-default panel-updating")},m(_,O){j(_,e,O),g(e,n),g(n,l),K&&K.m(l,null),g(e,i),g(e,a),g(a,o),g(o,r),g(o,s),g(o,u),Le(c,u,null),g(u,f),g(u,h),g(h,y),g(o,d),g(o,w),g(w,D),g(D,m),g(m,b),g(m,S),g(m,P),g(D,v),M&&M.m(D,null),g(w,C),q&&q.m(w,null),L=!0,G||(W=te(m,"click",t[7]),G=!0)},p(_,[O]){_[1]?K?K.p(_,O):(K=Rn(_),K.c(),K.m(l,null)):K&&(K.d(1),K=null),(!L||O&32)&&Te(y,_[5]),(!L||O&16)&&E!==(E=_[4]?"Hide":"Show")&&Te(S,E),(!L||O&8&&A!==(A=!_[3]))&&(m.disabled=A),_[2]?M?M.p(_,O):(M=Hn(_),M.c(),M.m(D,null)):M&&(M.d(1),M=null),_[4]&&_[3]?q?q.p(_,O):(q=qn(_),q.c(),q.m(w,null)):q&&(q.d(1),q=null)},i(_){L||(_e(c.$$.fragment,_),L=!0)},o(_){Pe(c.$$.fragment,_),L=!1},d(_){_&&Y(e),K&&K.d(),Ce(c),M&&M.d(),q&&q.d(),G=!1,W()}}}function ti(t){return t.replace(/^\d{2,4}.\d{2}.\d{2,4} \d{2}:\d{2}:\d{2}/g,"").replace(/^[\-\|\s]+/,"")}function ni(t,e,n){let{applicationName:l="AtroCore"}=e,{logoPath:i=null}=e,{logFilePath:a}=e,{restoreLink:o=null}=e,r=!1,s=!1,u=0,c=!0,f="",h,y;Ml(()=>{y&&c&&y.scrollTo(0,y.scrollHeight)});function d(){n(4,r=!r),r||(c=!0)}function w(m){const b=m.currentTarget;c=b.scrollHeight-b.scrollTop===b.clientHeight}setInterval(async()=>{try{const m=await fetch(a,{cache:"no-store"});u+=1,m.ok?(n(3,f=(await m.text()).trim()),f.search("composer")>=0&&n(10,s=!0),u>65&&!s&&n(3,f="Something wrong. Please, reboot the server.")):s?setTimeout(()=>{location.reload()},2e3):u>65&&n(3,f="Something wrong. Please, reboot the server.")}catch(m){console.error("Error: ",m)}},1e3);function D(m){De[m?"unshift":"push"](()=>{y=m,n(6,y)})}return t.$$set=m=>{"applicationName"in m&&n(0,l=m.applicationName),"logoPath"in m&&n(1,i=m.logoPath),"logFilePath"in m&&n(9,a=m.logFilePath),"restoreLink"in m&&n(2,o=m.restoreLink)},t.$$.update=()=>{if(t.$$.dirty&1032)if(f){const m=f.trim().split(`
`);n(5,h=ti(m.pop()))}else s?n(5,h=""):n(5,h="Starting...")},[l,i,o,f,r,h,y,d,w,a,s,D]}class li extends ye{constructor(e){super(),ve(this,e,ni,ei,ge,{applicationName:0,logoPath:1,logFilePath:9,restoreLink:2})}}function zn(t,e,n){const l=t.slice();return l[17]=e[n],l}function Bn(t){let e,n=t[17].label+"",l,i,a,o,r,s,u;function c(){return t[10](t[17])}return{c(){e=k("button"),l=se(n),i=R(),p(e,"data-action",a=t[17].name),e.disabled=o=t[17].disabled,p(e,"type","button"),p(e,"class",r=`btn action btn-${t[17].style??"default"}`)},m(f,h){j(f,e,h),g(e,l),g(e,i),s||(u=te(e,"click",c),s=!0)},p(f,h){t=f,h&1&&n!==(n=t[17].label+"")&&Te(l,n),h&1&&a!==(a=t[17].name)&&p(e,"data-action",a),h&1&&o!==(o=t[17].disabled)&&(e.disabled=o),h&1&&r!==(r=`btn action btn-${t[17].style??"default"}`)&&p(e,"class",r)},d(f){f&&Y(e),s=!1,u()}}}function ii(t){let e,n,l,i=ue(t[0]),a=[];for(let s=0;s<i.length;s+=1)a[s]=Bn(zn(t,i,s));const o=t[9].default,r=Ll(o,t,t[8],null);return{c(){e=k("div");for(let s=0;s<a.length;s+=1)a[s].c();n=R(),r&&r.c(),p(e,"class","button-container")},m(s,u){j(s,e,u);for(let c=0;c<a.length;c+=1)a[c]&&a[c].m(e,null);j(s,n,u),r&&r.m(s,u),l=!0},p(s,[u]){if(u&3){i=ue(s[0]);let c;for(c=0;c<i.length;c+=1){const f=zn(s,i,c);a[c]?a[c].p(f,u):(a[c]=Bn(f),a[c].c(),a[c].m(e,null))}for(;c<a.length;c+=1)a[c].d(1);a.length=i.length}r&&r.p&&(!l||u&256)&&Al(r,o,s,s[8],l?Cl(o,s[8],u,null):Ol(s[8]),null)},i(s){l||(_e(r,s),l=!0)},o(s){Pe(r,s),l=!1},d(s){s&&(Y(e),Y(n)),Qe(a,s),r&&r.d(s)}}}function ai(t,e,n){let{$$slots:l={},$$scope:i}=e,{params:a}=e,{fetch:o}=e,{loadLayout:r=()=>{Ae.get(scope,type,layoutProfileId,S=>{layout=S},!1)}}=e,{validate:s=()=>!0}=e;function u(S){c("openEditDialog",S)}const c=Dn();let f=[{name:"save",label:"Save",style:"primary"},{name:"cancel",label:"Cancel"},{name:"resetToDefault",label:"Reset to Default"}];Xt(()=>{r()});function h(){D();const S=o();if(!s(S)){m();return}de.notify("Saving..."),Ae.set(a.scope,a.type,a.layoutProfileId,S,()=>{de.notify("Saved","success",2e3),y(),m()})}function y(){console.log("emit update");const S=new CustomEvent("layoutUpdated",{detail:{scope:a.scope,type:a.type,layoutProfileId:a.layoutProfileId}});window.dispatchEvent(S)}function d(){r()}function w(){de.confirm("Are you sure you want to reset to default?",()=>{Ae.resetToDefault(a.scope,a.type,a.layoutProfileId,()=>{y(),d()})})}function D(){n(0,f=f.map(S=>({...S,disabled:!0})))}function m(){n(0,f=f.map(S=>({...S,disabled:!1})))}function b(S){switch(S.name){case"save":h();break;case"cancel":d();break;case"resetToDefault":w();break}}const E=S=>b(S);return t.$$set=S=>{"params"in S&&n(2,a=S.params),"fetch"in S&&n(3,o=S.fetch),"loadLayout"in S&&n(4,r=S.loadLayout),"validate"in S&&n(5,s=S.validate),"$$scope"in S&&n(8,i=S.$$scope)},[f,b,a,o,r,s,u,h,i,l,E]}class Yn extends ye{constructor(e){super(),ve(this,e,ai,ii,ge,{params:2,fetch:3,loadLayout:4,validate:5,openEditDialog:6,save:7})}get openEditDialog(){return this.$$.ctx[6]}get save(){return this.$$.ctx[7]}}/**!
 * Sortable 1.15.2
 * @author	RubaXa   <trash@rubaxa.org>
 * @author	owenm    <owen23355@gmail.com>
 * @license MIT
 */function Xn(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(t);e&&(l=l.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,l)}return n}function Se(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Xn(Object(n),!0).forEach(function(l){oi(t,l,n[l])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Xn(Object(n)).forEach(function(l){Object.defineProperty(t,l,Object.getOwnPropertyDescriptor(n,l))})}return t}function St(t){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?St=function(e){return typeof e}:St=function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},St(t)}function oi(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Oe(){return Oe=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var l in n)Object.prototype.hasOwnProperty.call(n,l)&&(t[l]=n[l])}return t},Oe.apply(this,arguments)}function ri(t,e){if(t==null)return{};var n={},l=Object.keys(t),i,a;for(a=0;a<l.length;a++)i=l[a],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}function si(t,e){if(t==null)return{};var n=ri(t,e),l,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)l=a[i],!(e.indexOf(l)>=0)&&Object.prototype.propertyIsEnumerable.call(t,l)&&(n[l]=t[l])}return n}var ui="1.15.2";function Fe(t){if(typeof window<"u"&&window.navigator)return!!navigator.userAgent.match(t)}var Ie=Fe(/(?:Trident.*rv[ :]?11\.|msie|iemobile|Windows Phone)/i),rt=Fe(/Edge/i),jn=Fe(/firefox/i),st=Fe(/safari/i)&&!Fe(/chrome/i)&&!Fe(/android/i),Gn=Fe(/iP(ad|od|hone)/i),Wn=Fe(/chrome/i)&&Fe(/android/i),Un={capture:!1,passive:!1};function B(t,e,n){t.addEventListener(e,n,!Ie&&Un)}function z(t,e,n){t.removeEventListener(e,n,!Ie&&Un)}function kt(t,e){if(e){if(e[0]===">"&&(e=e.substring(1)),t)try{if(t.matches)return t.matches(e);if(t.msMatchesSelector)return t.msMatchesSelector(e);if(t.webkitMatchesSelector)return t.webkitMatchesSelector(e)}catch{return!1}return!1}}function fi(t){return t.host&&t!==document&&t.host.nodeType?t.host:t.parentNode}function we(t,e,n,l){if(t){n=n||document;do{if(e!=null&&(e[0]===">"?t.parentNode===n&&kt(t,e):kt(t,e))||l&&t===n)return t;if(t===n)break}while(t=fi(t))}return null}var Qn=/\s+/g;function he(t,e,n){if(t&&e)if(t.classList)t.classList[n?"add":"remove"](e);else{var l=(" "+t.className+" ").replace(Qn," ").replace(" "+e+" "," ");t.className=(l+(n?" "+e:"")).replace(Qn," ")}}function I(t,e,n){var l=t&&t.style;if(l){if(n===void 0)return document.defaultView&&document.defaultView.getComputedStyle?n=document.defaultView.getComputedStyle(t,""):t.currentStyle&&(n=t.currentStyle),e===void 0?n:n[e];!(e in l)&&e.indexOf("webkit")===-1&&(e="-webkit-"+e),l[e]=n+(typeof n=="string"?"":"px")}}function $e(t,e){var n="";if(typeof t=="string")n=t;else do{var l=I(t,"transform");l&&l!=="none"&&(n=l+" "+n)}while(!e&&(t=t.parentNode));var i=window.DOMMatrix||window.WebKitCSSMatrix||window.CSSMatrix||window.MSCSSMatrix;return i&&new i(n)}function Vn(t,e,n){if(t){var l=t.getElementsByTagName(e),i=0,a=l.length;if(n)for(;i<a;i++)n(l[i],i);return l}return[]}function ke(){var t=document.scrollingElement;return t||document.documentElement}function $(t,e,n,l,i){if(!(!t.getBoundingClientRect&&t!==window)){var a,o,r,s,u,c,f;if(t!==window&&t.parentNode&&t!==ke()?(a=t.getBoundingClientRect(),o=a.top,r=a.left,s=a.bottom,u=a.right,c=a.height,f=a.width):(o=0,r=0,s=window.innerHeight,u=window.innerWidth,c=window.innerHeight,f=window.innerWidth),(e||n)&&t!==window&&(i=i||t.parentNode,!Ie))do if(i&&i.getBoundingClientRect&&(I(i,"transform")!=="none"||n&&I(i,"position")!=="static")){var h=i.getBoundingClientRect();o-=h.top+parseInt(I(i,"border-top-width")),r-=h.left+parseInt(I(i,"border-left-width")),s=o+a.height,u=r+a.width;break}while(i=i.parentNode);if(l&&t!==window){var y=$e(i||t),d=y&&y.a,w=y&&y.d;y&&(o/=w,r/=d,f/=d,c/=w,s=o+c,u=r+f)}return{top:o,left:r,bottom:s,right:u,width:f,height:c}}}function Kn(t,e,n){for(var l=ze(t,!0),i=$(t)[e];l;){var a=$(l)[n],o=void 0;if(o=i>=a,!o)return l;if(l===ke())break;l=ze(l,!1)}return!1}function et(t,e,n,l){for(var i=0,a=0,o=t.children;a<o.length;){if(o[a].style.display!=="none"&&o[a]!==F.ghost&&(l||o[a]!==F.dragged)&&we(o[a],n.draggable,t,!1)){if(i===e)return o[a];i++}a++}return null}function Vt(t,e){for(var n=t.lastElementChild;n&&(n===F.ghost||I(n,"display")==="none"||e&&!kt(n,e));)n=n.previousElementSibling;return n||null}function be(t,e){var n=0;if(!t||!t.parentNode)return-1;for(;t=t.previousElementSibling;)t.nodeName.toUpperCase()!=="TEMPLATE"&&t!==F.clone&&(!e||kt(t,e))&&n++;return n}function Zn(t){var e=0,n=0,l=ke();if(t)do{var i=$e(t),a=i.a,o=i.d;e+=t.scrollLeft*a,n+=t.scrollTop*o}while(t!==l&&(t=t.parentNode));return[e,n]}function ci(t,e){for(var n in t)if(t.hasOwnProperty(n)){for(var l in e)if(e.hasOwnProperty(l)&&e[l]===t[n][l])return Number(n)}return-1}function ze(t,e){if(!t||!t.getBoundingClientRect)return ke();var n=t,l=!1;do if(n.clientWidth<n.scrollWidth||n.clientHeight<n.scrollHeight){var i=I(n);if(n.clientWidth<n.scrollWidth&&(i.overflowX=="auto"||i.overflowX=="scroll")||n.clientHeight<n.scrollHeight&&(i.overflowY=="auto"||i.overflowY=="scroll")){if(!n.getBoundingClientRect||n===document.body)return ke();if(l||e)return n;l=!0}}while(n=n.parentNode);return ke()}function di(t,e){if(t&&e)for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t}function Kt(t,e){return Math.round(t.top)===Math.round(e.top)&&Math.round(t.left)===Math.round(e.left)&&Math.round(t.height)===Math.round(e.height)&&Math.round(t.width)===Math.round(e.width)}var ut;function Jn(t,e){return function(){if(!ut){var n=arguments,l=this;n.length===1?t.call(l,n[0]):t.apply(l,n),ut=setTimeout(function(){ut=void 0},e)}}}function hi(){clearTimeout(ut),ut=void 0}function xn(t,e,n){t.scrollLeft+=e,t.scrollTop+=n}function $n(t){var e=window.Polymer,n=window.jQuery||window.Zepto;return e&&e.dom?e.dom(t).cloneNode(!0):n?n(t).clone(!0)[0]:t.cloneNode(!0)}function el(t,e,n){var l={};return Array.from(t.children).forEach(function(i){var a,o,r,s;if(!(!we(i,e.draggable,t,!1)||i.animated||i===n)){var u=$(i);l.left=Math.min((a=l.left)!==null&&a!==void 0?a:1/0,u.left),l.top=Math.min((o=l.top)!==null&&o!==void 0?o:1/0,u.top),l.right=Math.max((r=l.right)!==null&&r!==void 0?r:-1/0,u.right),l.bottom=Math.max((s=l.bottom)!==null&&s!==void 0?s:-1/0,u.bottom)}}),l.width=l.right-l.left,l.height=l.bottom-l.top,l.x=l.left,l.y=l.top,l}var pe="Sortable"+new Date().getTime();function pi(){var t=[],e;return{captureAnimationState:function(){if(t=[],!!this.options.animation){var l=[].slice.call(this.el.children);l.forEach(function(i){if(!(I(i,"display")==="none"||i===F.ghost)){t.push({target:i,rect:$(i)});var a=Se({},t[t.length-1].rect);if(i.thisAnimationDuration){var o=$e(i,!0);o&&(a.top-=o.f,a.left-=o.e)}i.fromRect=a}})}},addAnimationState:function(l){t.push(l)},removeAnimationState:function(l){t.splice(ci(t,{target:l}),1)},animateAll:function(l){var i=this;if(!this.options.animation){clearTimeout(e),typeof l=="function"&&l();return}var a=!1,o=0;t.forEach(function(r){var s=0,u=r.target,c=u.fromRect,f=$(u),h=u.prevFromRect,y=u.prevToRect,d=r.rect,w=$e(u,!0);w&&(f.top-=w.f,f.left-=w.e),u.toRect=f,u.thisAnimationDuration&&Kt(h,f)&&!Kt(c,f)&&(d.top-f.top)/(d.left-f.left)===(c.top-f.top)/(c.left-f.left)&&(s=gi(d,h,y,i.options)),Kt(f,c)||(u.prevFromRect=c,u.prevToRect=f,s||(s=i.options.animation),i.animate(u,d,f,s)),s&&(a=!0,o=Math.max(o,s),clearTimeout(u.animationResetTimer),u.animationResetTimer=setTimeout(function(){u.animationTime=0,u.prevFromRect=null,u.fromRect=null,u.prevToRect=null,u.thisAnimationDuration=null},s),u.thisAnimationDuration=s)}),clearTimeout(e),a?e=setTimeout(function(){typeof l=="function"&&l()},o):typeof l=="function"&&l(),t=[]},animate:function(l,i,a,o){if(o){I(l,"transition",""),I(l,"transform","");var r=$e(this.el),s=r&&r.a,u=r&&r.d,c=(i.left-a.left)/(s||1),f=(i.top-a.top)/(u||1);l.animatingX=!!c,l.animatingY=!!f,I(l,"transform","translate3d("+c+"px,"+f+"px,0)"),this.forRepaintDummy=mi(l),I(l,"transition","transform "+o+"ms"+(this.options.easing?" "+this.options.easing:"")),I(l,"transform","translate3d(0,0,0)"),typeof l.animated=="number"&&clearTimeout(l.animated),l.animated=setTimeout(function(){I(l,"transition",""),I(l,"transform",""),l.animated=!1,l.animatingX=!1,l.animatingY=!1},o)}}}}function mi(t){return t.offsetWidth}function gi(t,e,n,l){return Math.sqrt(Math.pow(e.top-t.top,2)+Math.pow(e.left-t.left,2))/Math.sqrt(Math.pow(e.top-n.top,2)+Math.pow(e.left-n.left,2))*l.animation}var tt=[],Zt={initializeByDefault:!0},ft={mount:function(e){for(var n in Zt)Zt.hasOwnProperty(n)&&!(n in e)&&(e[n]=Zt[n]);tt.forEach(function(l){if(l.pluginName===e.pluginName)throw"Sortable: Cannot mount plugin ".concat(e.pluginName," more than once")}),tt.push(e)},pluginEvent:function(e,n,l){var i=this;this.eventCanceled=!1,l.cancel=function(){i.eventCanceled=!0};var a=e+"Global";tt.forEach(function(o){n[o.pluginName]&&(n[o.pluginName][a]&&n[o.pluginName][a](Se({sortable:n},l)),n.options[o.pluginName]&&n[o.pluginName][e]&&n[o.pluginName][e](Se({sortable:n},l)))})},initializePlugins:function(e,n,l,i){tt.forEach(function(r){var s=r.pluginName;if(!(!e.options[s]&&!r.initializeByDefault)){var u=new r(e,n,e.options);u.sortable=e,u.options=e.options,e[s]=u,Oe(l,u.defaults)}});for(var a in e.options)if(e.options.hasOwnProperty(a)){var o=this.modifyOption(e,a,e.options[a]);typeof o<"u"&&(e.options[a]=o)}},getEventProperties:function(e,n){var l={};return tt.forEach(function(i){typeof i.eventProperties=="function"&&Oe(l,i.eventProperties.call(n[i.pluginName],e))}),l},modifyOption:function(e,n,l){var i;return tt.forEach(function(a){e[a.pluginName]&&a.optionListeners&&typeof a.optionListeners[n]=="function"&&(i=a.optionListeners[n].call(e[a.pluginName],l))}),i}};function bi(t){var e=t.sortable,n=t.rootEl,l=t.name,i=t.targetEl,a=t.cloneEl,o=t.toEl,r=t.fromEl,s=t.oldIndex,u=t.newIndex,c=t.oldDraggableIndex,f=t.newDraggableIndex,h=t.originalEvent,y=t.putSortable,d=t.extraEventProperties;if(e=e||n&&n[pe],!!e){var w,D=e.options,m="on"+l.charAt(0).toUpperCase()+l.substr(1);window.CustomEvent&&!Ie&&!rt?w=new CustomEvent(l,{bubbles:!0,cancelable:!0}):(w=document.createEvent("Event"),w.initEvent(l,!0,!0)),w.to=o||n,w.from=r||n,w.item=i||n,w.clone=a,w.oldIndex=s,w.newIndex=u,w.oldDraggableIndex=c,w.newDraggableIndex=f,w.originalEvent=h,w.pullMode=y?y.lastPutMode:void 0;var b=Se(Se({},d),ft.getEventProperties(l,e));for(var E in b)w[E]=b[E];n&&n.dispatchEvent(w),D[m]&&D[m].call(e,w)}}var _i=["evt"],fe=function(e,n){var l=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},i=l.evt,a=si(l,_i);ft.pluginEvent.bind(F)(e,n,Se({dragEl:T,parentEl:J,ghostEl:N,rootEl:V,nextEl:je,lastDownEl:Tt,cloneEl:Z,cloneHidden:Be,dragStarted:dt,putSortable:ne,activeSortable:F.active,originalEvent:i,oldIndex:nt,oldDraggableIndex:ct,newIndex:me,newDraggableIndex:Ye,hideGhostForTarget:rl,unhideGhostForTarget:sl,cloneNowHidden:function(){Be=!0},cloneNowShown:function(){Be=!1},dispatchSortableEvent:function(r){ae({sortable:n,name:r,originalEvent:i})}},a))};function ae(t){bi(Se({putSortable:ne,cloneEl:Z,targetEl:T,rootEl:V,oldIndex:nt,oldDraggableIndex:ct,newIndex:me,newDraggableIndex:Ye},t))}var T,J,N,V,je,Tt,Z,Be,nt,me,ct,Ye,Pt,ne,lt=!1,Lt=!1,Ct=[],Ge,Ee,Jt,xt,tl,nl,dt,it,ht,pt=!1,At=!1,Ot,ie,$t=[],en=!1,Ft=[],It=typeof document<"u",Nt=Gn,ll=rt||Ie?"cssFloat":"float",vi=It&&!Wn&&!Gn&&"draggable"in document.createElement("div"),il=function(){if(It){if(Ie)return!1;var t=document.createElement("x");return t.style.cssText="pointer-events:auto",t.style.pointerEvents==="auto"}}(),al=function(e,n){var l=I(e),i=parseInt(l.width)-parseInt(l.paddingLeft)-parseInt(l.paddingRight)-parseInt(l.borderLeftWidth)-parseInt(l.borderRightWidth),a=et(e,0,n),o=et(e,1,n),r=a&&I(a),s=o&&I(o),u=r&&parseInt(r.marginLeft)+parseInt(r.marginRight)+$(a).width,c=s&&parseInt(s.marginLeft)+parseInt(s.marginRight)+$(o).width;if(l.display==="flex")return l.flexDirection==="column"||l.flexDirection==="column-reverse"?"vertical":"horizontal";if(l.display==="grid")return l.gridTemplateColumns.split(" ").length<=1?"vertical":"horizontal";if(a&&r.float&&r.float!=="none"){var f=r.float==="left"?"left":"right";return o&&(s.clear==="both"||s.clear===f)?"vertical":"horizontal"}return a&&(r.display==="block"||r.display==="flex"||r.display==="table"||r.display==="grid"||u>=i&&l[ll]==="none"||o&&l[ll]==="none"&&u+c>i)?"vertical":"horizontal"},yi=function(e,n,l){var i=l?e.left:e.top,a=l?e.right:e.bottom,o=l?e.width:e.height,r=l?n.left:n.top,s=l?n.right:n.bottom,u=l?n.width:n.height;return i===r||a===s||i+o/2===r+u/2},wi=function(e,n){var l;return Ct.some(function(i){var a=i[pe].options.emptyInsertThreshold;if(!(!a||Vt(i))){var o=$(i),r=e>=o.left-a&&e<=o.right+a,s=n>=o.top-a&&n<=o.bottom+a;if(r&&s)return l=i}}),l},ol=function(e){function n(a,o){return function(r,s,u,c){var f=r.options.group.name&&s.options.group.name&&r.options.group.name===s.options.group.name;if(a==null&&(o||f))return!0;if(a==null||a===!1)return!1;if(o&&a==="clone")return a;if(typeof a=="function")return n(a(r,s,u,c),o)(r,s,u,c);var h=(o?r:s).options.group.name;return a===!0||typeof a=="string"&&a===h||a.join&&a.indexOf(h)>-1}}var l={},i=e.group;(!i||St(i)!="object")&&(i={name:i}),l.name=i.name,l.checkPull=n(i.pull,!0),l.checkPut=n(i.put),l.revertClone=i.revertClone,e.group=l},rl=function(){!il&&N&&I(N,"display","none")},sl=function(){!il&&N&&I(N,"display","")};It&&!Wn&&document.addEventListener("click",function(t){if(Lt)return t.preventDefault(),t.stopPropagation&&t.stopPropagation(),t.stopImmediatePropagation&&t.stopImmediatePropagation(),Lt=!1,!1},!0);var We=function(e){if(T){e=e.touches?e.touches[0]:e;var n=wi(e.clientX,e.clientY);if(n){var l={};for(var i in e)e.hasOwnProperty(i)&&(l[i]=e[i]);l.target=l.rootEl=n,l.preventDefault=void 0,l.stopPropagation=void 0,n[pe]._onDragOver(l)}}},Ei=function(e){T&&T.parentNode[pe]._isOutsideThisEl(e.target)};function F(t,e){if(!(t&&t.nodeType&&t.nodeType===1))throw"Sortable: `el` must be an HTMLElement, not ".concat({}.toString.call(t));this.el=t,this.options=e=Oe({},e),t[pe]=this;var n={group:null,sort:!0,disabled:!1,store:null,handle:null,draggable:/^[uo]l$/i.test(t.nodeName)?">li":">*",swapThreshold:1,invertSwap:!1,invertedSwapThreshold:null,removeCloneOnHide:!0,direction:function(){return al(t,this.options)},ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",dragClass:"sortable-drag",ignore:"a, img",filter:null,preventOnFilter:!0,animation:0,easing:null,setData:function(o,r){o.setData("Text",r.textContent)},dropBubble:!1,dragoverBubble:!1,dataIdAttr:"data-id",delay:0,delayOnTouchOnly:!1,touchStartThreshold:(Number.parseInt?Number:window).parseInt(window.devicePixelRatio,10)||1,forceFallback:!1,fallbackClass:"sortable-fallback",fallbackOnBody:!1,fallbackTolerance:0,fallbackOffset:{x:0,y:0},supportPointer:F.supportPointer!==!1&&"PointerEvent"in window&&!st,emptyInsertThreshold:5};ft.initializePlugins(this,t,n);for(var l in n)!(l in e)&&(e[l]=n[l]);ol(e);for(var i in this)i.charAt(0)==="_"&&typeof this[i]=="function"&&(this[i]=this[i].bind(this));this.nativeDraggable=e.forceFallback?!1:vi,this.nativeDraggable&&(this.options.touchStartThreshold=1),e.supportPointer?B(t,"pointerdown",this._onTapStart):(B(t,"mousedown",this._onTapStart),B(t,"touchstart",this._onTapStart)),this.nativeDraggable&&(B(t,"dragover",this),B(t,"dragenter",this)),Ct.push(this.el),e.store&&e.store.get&&this.sort(e.store.get(this)||[]),Oe(this,pi())}F.prototype={constructor:F,_isOutsideThisEl:function(e){!this.el.contains(e)&&e!==this.el&&(it=null)},_getDirection:function(e,n){return typeof this.options.direction=="function"?this.options.direction.call(this,e,n,T):this.options.direction},_onTapStart:function(e){if(e.cancelable){var n=this,l=this.el,i=this.options,a=i.preventOnFilter,o=e.type,r=e.touches&&e.touches[0]||e.pointerType&&e.pointerType==="touch"&&e,s=(r||e).target,u=e.target.shadowRoot&&(e.path&&e.path[0]||e.composedPath&&e.composedPath()[0])||s,c=i.filter;if(Ai(l),!T&&!(/mousedown|pointerdown/.test(o)&&e.button!==0||i.disabled)&&!u.isContentEditable&&!(!this.nativeDraggable&&st&&s&&s.tagName.toUpperCase()==="SELECT")&&(s=we(s,i.draggable,l,!1),!(s&&s.animated)&&Tt!==s)){if(nt=be(s),ct=be(s,i.draggable),typeof c=="function"){if(c.call(this,e,s,this)){ae({sortable:n,rootEl:u,name:"filter",targetEl:s,toEl:l,fromEl:l}),fe("filter",n,{evt:e}),a&&e.cancelable&&e.preventDefault();return}}else if(c&&(c=c.split(",").some(function(f){if(f=we(u,f.trim(),l,!1),f)return ae({sortable:n,rootEl:f,name:"filter",targetEl:s,fromEl:l,toEl:l}),fe("filter",n,{evt:e}),!0}),c)){a&&e.cancelable&&e.preventDefault();return}i.handle&&!we(u,i.handle,l,!1)||this._prepareDragStart(e,r,s)}}},_prepareDragStart:function(e,n,l){var i=this,a=i.el,o=i.options,r=a.ownerDocument,s;if(l&&!T&&l.parentNode===a){var u=$(l);if(V=a,T=l,J=T.parentNode,je=T.nextSibling,Tt=l,Pt=o.group,F.dragged=T,Ge={target:T,clientX:(n||e).clientX,clientY:(n||e).clientY},tl=Ge.clientX-u.left,nl=Ge.clientY-u.top,this._lastX=(n||e).clientX,this._lastY=(n||e).clientY,T.style["will-change"]="all",s=function(){if(fe("delayEnded",i,{evt:e}),F.eventCanceled){i._onDrop();return}i._disableDelayedDragEvents(),!jn&&i.nativeDraggable&&(T.draggable=!0),i._triggerDragStart(e,n),ae({sortable:i,name:"choose",originalEvent:e}),he(T,o.chosenClass,!0)},o.ignore.split(",").forEach(function(c){Vn(T,c.trim(),tn)}),B(r,"dragover",We),B(r,"mousemove",We),B(r,"touchmove",We),B(r,"mouseup",i._onDrop),B(r,"touchend",i._onDrop),B(r,"touchcancel",i._onDrop),jn&&this.nativeDraggable&&(this.options.touchStartThreshold=4,T.draggable=!0),fe("delayStart",this,{evt:e}),o.delay&&(!o.delayOnTouchOnly||n)&&(!this.nativeDraggable||!(rt||Ie))){if(F.eventCanceled){this._onDrop();return}B(r,"mouseup",i._disableDelayedDrag),B(r,"touchend",i._disableDelayedDrag),B(r,"touchcancel",i._disableDelayedDrag),B(r,"mousemove",i._delayedDragTouchMoveHandler),B(r,"touchmove",i._delayedDragTouchMoveHandler),o.supportPointer&&B(r,"pointermove",i._delayedDragTouchMoveHandler),i._dragStartTimer=setTimeout(s,o.delay)}else s()}},_delayedDragTouchMoveHandler:function(e){var n=e.touches?e.touches[0]:e;Math.max(Math.abs(n.clientX-this._lastX),Math.abs(n.clientY-this._lastY))>=Math.floor(this.options.touchStartThreshold/(this.nativeDraggable&&window.devicePixelRatio||1))&&this._disableDelayedDrag()},_disableDelayedDrag:function(){T&&tn(T),clearTimeout(this._dragStartTimer),this._disableDelayedDragEvents()},_disableDelayedDragEvents:function(){var e=this.el.ownerDocument;z(e,"mouseup",this._disableDelayedDrag),z(e,"touchend",this._disableDelayedDrag),z(e,"touchcancel",this._disableDelayedDrag),z(e,"mousemove",this._delayedDragTouchMoveHandler),z(e,"touchmove",this._delayedDragTouchMoveHandler),z(e,"pointermove",this._delayedDragTouchMoveHandler)},_triggerDragStart:function(e,n){n=n||e.pointerType=="touch"&&e,!this.nativeDraggable||n?this.options.supportPointer?B(document,"pointermove",this._onTouchMove):n?B(document,"touchmove",this._onTouchMove):B(document,"mousemove",this._onTouchMove):(B(T,"dragend",this),B(V,"dragstart",this._onDragStart));try{document.selection?Rt(function(){document.selection.empty()}):window.getSelection().removeAllRanges()}catch{}},_dragStarted:function(e,n){if(lt=!1,V&&T){fe("dragStarted",this,{evt:n}),this.nativeDraggable&&B(document,"dragover",Ei);var l=this.options;!e&&he(T,l.dragClass,!1),he(T,l.ghostClass,!0),F.active=this,e&&this._appendGhost(),ae({sortable:this,name:"start",originalEvent:n})}else this._nulling()},_emulateDragOver:function(){if(Ee){this._lastX=Ee.clientX,this._lastY=Ee.clientY,rl();for(var e=document.elementFromPoint(Ee.clientX,Ee.clientY),n=e;e&&e.shadowRoot&&(e=e.shadowRoot.elementFromPoint(Ee.clientX,Ee.clientY),e!==n);)n=e;if(T.parentNode[pe]._isOutsideThisEl(e),n)do{if(n[pe]){var l=void 0;if(l=n[pe]._onDragOver({clientX:Ee.clientX,clientY:Ee.clientY,target:e,rootEl:n}),l&&!this.options.dragoverBubble)break}e=n}while(n=n.parentNode);sl()}},_onTouchMove:function(e){if(Ge){var n=this.options,l=n.fallbackTolerance,i=n.fallbackOffset,a=e.touches?e.touches[0]:e,o=N&&$e(N,!0),r=N&&o&&o.a,s=N&&o&&o.d,u=Nt&&ie&&Zn(ie),c=(a.clientX-Ge.clientX+i.x)/(r||1)+(u?u[0]-$t[0]:0)/(r||1),f=(a.clientY-Ge.clientY+i.y)/(s||1)+(u?u[1]-$t[1]:0)/(s||1);if(!F.active&&!lt){if(l&&Math.max(Math.abs(a.clientX-this._lastX),Math.abs(a.clientY-this._lastY))<l)return;this._onDragStart(e,!0)}if(N){o?(o.e+=c-(Jt||0),o.f+=f-(xt||0)):o={a:1,b:0,c:0,d:1,e:c,f};var h="matrix(".concat(o.a,",").concat(o.b,",").concat(o.c,",").concat(o.d,",").concat(o.e,",").concat(o.f,")");I(N,"webkitTransform",h),I(N,"mozTransform",h),I(N,"msTransform",h),I(N,"transform",h),Jt=c,xt=f,Ee=a}e.cancelable&&e.preventDefault()}},_appendGhost:function(){if(!N){var e=this.options.fallbackOnBody?document.body:V,n=$(T,!0,Nt,!0,e),l=this.options;if(Nt){for(ie=e;I(ie,"position")==="static"&&I(ie,"transform")==="none"&&ie!==document;)ie=ie.parentNode;ie!==document.body&&ie!==document.documentElement?(ie===document&&(ie=ke()),n.top+=ie.scrollTop,n.left+=ie.scrollLeft):ie=ke(),$t=Zn(ie)}N=T.cloneNode(!0),he(N,l.ghostClass,!1),he(N,l.fallbackClass,!0),he(N,l.dragClass,!0),I(N,"transition",""),I(N,"transform",""),I(N,"box-sizing","border-box"),I(N,"margin",0),I(N,"top",n.top),I(N,"left",n.left),I(N,"width",n.width),I(N,"height",n.height),I(N,"opacity","0.8"),I(N,"position",Nt?"absolute":"fixed"),I(N,"zIndex","100000"),I(N,"pointerEvents","none"),F.ghost=N,e.appendChild(N),I(N,"transform-origin",tl/parseInt(N.style.width)*100+"% "+nl/parseInt(N.style.height)*100+"%")}},_onDragStart:function(e,n){var l=this,i=e.dataTransfer,a=l.options;if(fe("dragStart",this,{evt:e}),F.eventCanceled){this._onDrop();return}fe("setupClone",this),F.eventCanceled||(Z=$n(T),Z.removeAttribute("id"),Z.draggable=!1,Z.style["will-change"]="",this._hideClone(),he(Z,this.options.chosenClass,!1),F.clone=Z),l.cloneId=Rt(function(){fe("clone",l),!F.eventCanceled&&(l.options.removeCloneOnHide||V.insertBefore(Z,T),l._hideClone(),ae({sortable:l,name:"clone"}))}),!n&&he(T,a.dragClass,!0),n?(Lt=!0,l._loopId=setInterval(l._emulateDragOver,50)):(z(document,"mouseup",l._onDrop),z(document,"touchend",l._onDrop),z(document,"touchcancel",l._onDrop),i&&(i.effectAllowed="move",a.setData&&a.setData.call(l,i,T)),B(document,"drop",l),I(T,"transform","translateZ(0)")),lt=!0,l._dragStartId=Rt(l._dragStarted.bind(l,n,e)),B(document,"selectstart",l),dt=!0,st&&I(document.body,"user-select","none")},_onDragOver:function(e){var n=this.el,l=e.target,i,a,o,r=this.options,s=r.group,u=F.active,c=Pt===s,f=r.sort,h=ne||u,y,d=this,w=!1;if(en)return;function D(Q,le){fe(Q,d,Se({evt:e,isOwner:c,axis:y?"vertical":"horizontal",revert:o,dragRect:i,targetRect:a,canSort:f,fromSortable:h,target:l,completed:b,onMove:function(x,oe){return Mt(V,n,T,i,x,$(x),e,oe)},changed:E},le))}function m(){D("dragOverAnimationCapture"),d.captureAnimationState(),d!==h&&h.captureAnimationState()}function b(Q){return D("dragOverCompleted",{insertion:Q}),Q&&(c?u._hideClone():u._showClone(d),d!==h&&(he(T,ne?ne.options.ghostClass:u.options.ghostClass,!1),he(T,r.ghostClass,!0)),ne!==d&&d!==F.active?ne=d:d===F.active&&ne&&(ne=null),h===d&&(d._ignoreWhileAnimating=l),d.animateAll(function(){D("dragOverAnimationComplete"),d._ignoreWhileAnimating=null}),d!==h&&(h.animateAll(),h._ignoreWhileAnimating=null)),(l===T&&!T.animated||l===n&&!l.animated)&&(it=null),!r.dragoverBubble&&!e.rootEl&&l!==document&&(T.parentNode[pe]._isOutsideThisEl(e.target),!Q&&We(e)),!r.dragoverBubble&&e.stopPropagation&&e.stopPropagation(),w=!0}function E(){me=be(T),Ye=be(T,r.draggable),ae({sortable:d,name:"change",toEl:n,newIndex:me,newDraggableIndex:Ye,originalEvent:e})}if(e.preventDefault!==void 0&&e.cancelable&&e.preventDefault(),l=we(l,r.draggable,n,!0),D("dragOver"),F.eventCanceled)return w;if(T.contains(e.target)||l.animated&&l.animatingX&&l.animatingY||d._ignoreWhileAnimating===l)return b(!1);if(Lt=!1,u&&!r.disabled&&(c?f||(o=J!==V):ne===this||(this.lastPutMode=Pt.checkPull(this,u,T,e))&&s.checkPut(this,u,T,e))){if(y=this._getDirection(e,l)==="vertical",i=$(T),D("dragOverValid"),F.eventCanceled)return w;if(o)return J=V,m(),this._hideClone(),D("revert"),F.eventCanceled||(je?V.insertBefore(T,je):V.appendChild(T)),b(!0);var S=Vt(n,r.draggable);if(!S||Ti(e,y,this)&&!S.animated){if(S===T)return b(!1);if(S&&n===e.target&&(l=S),l&&(a=$(l)),Mt(V,n,T,i,l,a,e,!!l)!==!1)return m(),S&&S.nextSibling?n.insertBefore(T,S.nextSibling):n.appendChild(T),J=n,E(),b(!0)}else if(S&&ki(e,y,this)){var P=et(n,0,r,!0);if(P===T)return b(!1);if(l=P,a=$(l),Mt(V,n,T,i,l,a,e,!1)!==!1)return m(),n.insertBefore(T,P),J=n,E(),b(!0)}else if(l.parentNode===n){a=$(l);var A=0,v,C=T.parentNode!==n,L=!yi(T.animated&&T.toRect||i,l.animated&&l.toRect||a,y),G=y?"top":"left",W=Kn(l,"top","top")||Kn(T,"top","top"),K=W?W.scrollTop:void 0;it!==l&&(v=a[G],pt=!1,At=!L&&r.invertSwap||C),A=Pi(e,l,a,y,L?1:r.swapThreshold,r.invertedSwapThreshold==null?r.swapThreshold:r.invertedSwapThreshold,At,it===l);var M;if(A!==0){var q=be(T);do q-=A,M=J.children[q];while(M&&(I(M,"display")==="none"||M===N))}if(A===0||M===l)return b(!1);it=l,ht=A;var _=l.nextElementSibling,O=!1;O=A===1;var X=Mt(V,n,T,i,l,a,e,O);if(X!==!1)return(X===1||X===-1)&&(O=X===1),en=!0,setTimeout(Si,30),m(),O&&!_?n.appendChild(T):l.parentNode.insertBefore(T,O?_:l),W&&xn(W,0,K-W.scrollTop),J=T.parentNode,v!==void 0&&!At&&(Ot=Math.abs(v-$(l)[G])),E(),b(!0)}if(n.contains(T))return b(!1)}return!1},_ignoreWhileAnimating:null,_offMoveEvents:function(){z(document,"mousemove",this._onTouchMove),z(document,"touchmove",this._onTouchMove),z(document,"pointermove",this._onTouchMove),z(document,"dragover",We),z(document,"mousemove",We),z(document,"touchmove",We)},_offUpEvents:function(){var e=this.el.ownerDocument;z(e,"mouseup",this._onDrop),z(e,"touchend",this._onDrop),z(e,"pointerup",this._onDrop),z(e,"touchcancel",this._onDrop),z(document,"selectstart",this)},_onDrop:function(e){var n=this.el,l=this.options;if(me=be(T),Ye=be(T,l.draggable),fe("drop",this,{evt:e}),J=T&&T.parentNode,me=be(T),Ye=be(T,l.draggable),F.eventCanceled){this._nulling();return}lt=!1,At=!1,pt=!1,clearInterval(this._loopId),clearTimeout(this._dragStartTimer),nn(this.cloneId),nn(this._dragStartId),this.nativeDraggable&&(z(document,"drop",this),z(n,"dragstart",this._onDragStart)),this._offMoveEvents(),this._offUpEvents(),st&&I(document.body,"user-select",""),I(T,"transform",""),e&&(dt&&(e.cancelable&&e.preventDefault(),!l.dropBubble&&e.stopPropagation()),N&&N.parentNode&&N.parentNode.removeChild(N),(V===J||ne&&ne.lastPutMode!=="clone")&&Z&&Z.parentNode&&Z.parentNode.removeChild(Z),T&&(this.nativeDraggable&&z(T,"dragend",this),tn(T),T.style["will-change"]="",dt&&!lt&&he(T,ne?ne.options.ghostClass:this.options.ghostClass,!1),he(T,this.options.chosenClass,!1),ae({sortable:this,name:"unchoose",toEl:J,newIndex:null,newDraggableIndex:null,originalEvent:e}),V!==J?(me>=0&&(ae({rootEl:J,name:"add",toEl:J,fromEl:V,originalEvent:e}),ae({sortable:this,name:"remove",toEl:J,originalEvent:e}),ae({rootEl:J,name:"sort",toEl:J,fromEl:V,originalEvent:e}),ae({sortable:this,name:"sort",toEl:J,originalEvent:e})),ne&&ne.save()):me!==nt&&me>=0&&(ae({sortable:this,name:"update",toEl:J,originalEvent:e}),ae({sortable:this,name:"sort",toEl:J,originalEvent:e})),F.active&&((me==null||me===-1)&&(me=nt,Ye=ct),ae({sortable:this,name:"end",toEl:J,originalEvent:e}),this.save()))),this._nulling()},_nulling:function(){fe("nulling",this),V=T=J=N=je=Z=Tt=Be=Ge=Ee=dt=me=Ye=nt=ct=it=ht=ne=Pt=F.dragged=F.ghost=F.clone=F.active=null,Ft.forEach(function(e){e.checked=!0}),Ft.length=Jt=xt=0},handleEvent:function(e){switch(e.type){case"drop":case"dragend":this._onDrop(e);break;case"dragenter":case"dragover":T&&(this._onDragOver(e),Di(e));break;case"selectstart":e.preventDefault();break}},toArray:function(){for(var e=[],n,l=this.el.children,i=0,a=l.length,o=this.options;i<a;i++)n=l[i],we(n,o.draggable,this.el,!1)&&e.push(n.getAttribute(o.dataIdAttr)||Ci(n));return e},sort:function(e,n){var l={},i=this.el;this.toArray().forEach(function(a,o){var r=i.children[o];we(r,this.options.draggable,i,!1)&&(l[a]=r)},this),n&&this.captureAnimationState(),e.forEach(function(a){l[a]&&(i.removeChild(l[a]),i.appendChild(l[a]))}),n&&this.animateAll()},save:function(){var e=this.options.store;e&&e.set&&e.set(this)},closest:function(e,n){return we(e,n||this.options.draggable,this.el,!1)},option:function(e,n){var l=this.options;if(n===void 0)return l[e];var i=ft.modifyOption(this,e,n);typeof i<"u"?l[e]=i:l[e]=n,e==="group"&&ol(l)},destroy:function(){fe("destroy",this);var e=this.el;e[pe]=null,z(e,"mousedown",this._onTapStart),z(e,"touchstart",this._onTapStart),z(e,"pointerdown",this._onTapStart),this.nativeDraggable&&(z(e,"dragover",this),z(e,"dragenter",this)),Array.prototype.forEach.call(e.querySelectorAll("[draggable]"),function(n){n.removeAttribute("draggable")}),this._onDrop(),this._disableDelayedDragEvents(),Ct.splice(Ct.indexOf(this.el),1),this.el=e=null},_hideClone:function(){if(!Be){if(fe("hideClone",this),F.eventCanceled)return;I(Z,"display","none"),this.options.removeCloneOnHide&&Z.parentNode&&Z.parentNode.removeChild(Z),Be=!0}},_showClone:function(e){if(e.lastPutMode!=="clone"){this._hideClone();return}if(Be){if(fe("showClone",this),F.eventCanceled)return;T.parentNode==V&&!this.options.group.revertClone?V.insertBefore(Z,T):je?V.insertBefore(Z,je):V.appendChild(Z),this.options.group.revertClone&&this.animate(T,Z),I(Z,"display",""),Be=!1}}};function Di(t){t.dataTransfer&&(t.dataTransfer.dropEffect="move"),t.cancelable&&t.preventDefault()}function Mt(t,e,n,l,i,a,o,r){var s,u=t[pe],c=u.options.onMove,f;return window.CustomEvent&&!Ie&&!rt?s=new CustomEvent("move",{bubbles:!0,cancelable:!0}):(s=document.createEvent("Event"),s.initEvent("move",!0,!0)),s.to=e,s.from=t,s.dragged=n,s.draggedRect=l,s.related=i||e,s.relatedRect=a||$(e),s.willInsertAfter=r,s.originalEvent=o,t.dispatchEvent(s),c&&(f=c.call(u,s,o)),f}function tn(t){t.draggable=!1}function Si(){en=!1}function ki(t,e,n){var l=$(et(n.el,0,n.options,!0)),i=el(n.el,n.options,N),a=10;return e?t.clientX<i.left-a||t.clientY<l.top&&t.clientX<l.right:t.clientY<i.top-a||t.clientY<l.bottom&&t.clientX<l.left}function Ti(t,e,n){var l=$(Vt(n.el,n.options.draggable)),i=el(n.el,n.options,N),a=10;return e?t.clientX>i.right+a||t.clientY>l.bottom&&t.clientX>l.left:t.clientY>i.bottom+a||t.clientX>l.right&&t.clientY>l.top}function Pi(t,e,n,l,i,a,o,r){var s=l?t.clientY:t.clientX,u=l?n.height:n.width,c=l?n.top:n.left,f=l?n.bottom:n.right,h=!1;if(!o){if(r&&Ot<u*i){if(!pt&&(ht===1?s>c+u*a/2:s<f-u*a/2)&&(pt=!0),pt)h=!0;else if(ht===1?s<c+Ot:s>f-Ot)return-ht}else if(s>c+u*(1-i)/2&&s<f-u*(1-i)/2)return Li(e)}return h=h||o,h&&(s<c+u*a/2||s>f-u*a/2)?s>c+u/2?1:-1:0}function Li(t){return be(T)<be(t)?1:-1}function Ci(t){for(var e=t.tagName+t.className+t.src+t.href+t.textContent,n=e.length,l=0;n--;)l+=e.charCodeAt(n);return l.toString(36)}function Ai(t){Ft.length=0;for(var e=t.getElementsByTagName("input"),n=e.length;n--;){var l=e[n];l.checked&&Ft.push(l)}}function Rt(t){return setTimeout(t,0)}function nn(t){return clearTimeout(t)}It&&B(document,"touchmove",function(t){(F.active||lt)&&t.cancelable&&t.preventDefault()}),F.utils={on:B,off:z,css:I,find:Vn,is:function(e,n){return!!we(e,n,e,!1)},extend:di,throttle:Jn,closest:we,toggleClass:he,clone:$n,index:be,nextTick:Rt,cancelNextTick:nn,detectDirection:al,getChild:et},F.get=function(t){return t[pe]},F.mount=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];e[0].constructor===Array&&(e=e[0]),e.forEach(function(l){if(!l.prototype||!l.prototype.constructor)throw"Sortable: Mounted plugin must be a constructor function, not ".concat({}.toString.call(l));l.utils&&(F.utils=Se(Se({},F.utils),l.utils)),ft.mount(l)})},F.create=function(t,e){return new F(t,e)},F.version=ui;var ee=[],mt,ln,an=!1,on,rn,Ht,gt;function Oi(){function t(){this.defaults={scroll:!0,forceAutoScrollFallback:!1,scrollSensitivity:30,scrollSpeed:10,bubbleScroll:!0};for(var e in this)e.charAt(0)==="_"&&typeof this[e]=="function"&&(this[e]=this[e].bind(this))}return t.prototype={dragStarted:function(n){var l=n.originalEvent;this.sortable.nativeDraggable?B(document,"dragover",this._handleAutoScroll):this.options.supportPointer?B(document,"pointermove",this._handleFallbackAutoScroll):l.touches?B(document,"touchmove",this._handleFallbackAutoScroll):B(document,"mousemove",this._handleFallbackAutoScroll)},dragOverCompleted:function(n){var l=n.originalEvent;!this.options.dragOverBubble&&!l.rootEl&&this._handleAutoScroll(l)},drop:function(){this.sortable.nativeDraggable?z(document,"dragover",this._handleAutoScroll):(z(document,"pointermove",this._handleFallbackAutoScroll),z(document,"touchmove",this._handleFallbackAutoScroll),z(document,"mousemove",this._handleFallbackAutoScroll)),ul(),qt(),hi()},nulling:function(){Ht=ln=mt=an=gt=on=rn=null,ee.length=0},_handleFallbackAutoScroll:function(n){this._handleAutoScroll(n,!0)},_handleAutoScroll:function(n,l){var i=this,a=(n.touches?n.touches[0]:n).clientX,o=(n.touches?n.touches[0]:n).clientY,r=document.elementFromPoint(a,o);if(Ht=n,l||this.options.forceAutoScrollFallback||rt||Ie||st){sn(n,this.options,r,l);var s=ze(r,!0);an&&(!gt||a!==on||o!==rn)&&(gt&&ul(),gt=setInterval(function(){var u=ze(document.elementFromPoint(a,o),!0);u!==s&&(s=u,qt()),sn(n,i.options,u,l)},10),on=a,rn=o)}else{if(!this.options.bubbleScroll||ze(r,!0)===ke()){qt();return}sn(n,this.options,ze(r,!1),!1)}}},Oe(t,{pluginName:"scroll",initializeByDefault:!0})}function qt(){ee.forEach(function(t){clearInterval(t.pid)}),ee=[]}function ul(){clearInterval(gt)}var sn=Jn(function(t,e,n,l){if(e.scroll){var i=(t.touches?t.touches[0]:t).clientX,a=(t.touches?t.touches[0]:t).clientY,o=e.scrollSensitivity,r=e.scrollSpeed,s=ke(),u=!1,c;ln!==n&&(ln=n,qt(),mt=e.scroll,c=e.scrollFn,mt===!0&&(mt=ze(n,!0)));var f=0,h=mt;do{var y=h,d=$(y),w=d.top,D=d.bottom,m=d.left,b=d.right,E=d.width,S=d.height,P=void 0,A=void 0,v=y.scrollWidth,C=y.scrollHeight,L=I(y),G=y.scrollLeft,W=y.scrollTop;y===s?(P=E<v&&(L.overflowX==="auto"||L.overflowX==="scroll"||L.overflowX==="visible"),A=S<C&&(L.overflowY==="auto"||L.overflowY==="scroll"||L.overflowY==="visible")):(P=E<v&&(L.overflowX==="auto"||L.overflowX==="scroll"),A=S<C&&(L.overflowY==="auto"||L.overflowY==="scroll"));var K=P&&(Math.abs(b-i)<=o&&G+E<v)-(Math.abs(m-i)<=o&&!!G),M=A&&(Math.abs(D-a)<=o&&W+S<C)-(Math.abs(w-a)<=o&&!!W);if(!ee[f])for(var q=0;q<=f;q++)ee[q]||(ee[q]={});(ee[f].vx!=K||ee[f].vy!=M||ee[f].el!==y)&&(ee[f].el=y,ee[f].vx=K,ee[f].vy=M,clearInterval(ee[f].pid),(K!=0||M!=0)&&(u=!0,ee[f].pid=setInterval((function(){l&&this.layer===0&&F.active._onTouchMove(Ht);var _=ee[this.layer].vy?ee[this.layer].vy*r:0,O=ee[this.layer].vx?ee[this.layer].vx*r:0;typeof c=="function"&&c.call(F.dragged.parentNode[pe],O,_,t,Ht,ee[this.layer].el)!=="continue"||xn(ee[this.layer].el,O,_)}).bind({layer:f}),24))),f++}while(e.bubbleScroll&&h!==s&&(h=ze(h,!1)));an=u}},30),fl=function(e){var n=e.originalEvent,l=e.putSortable,i=e.dragEl,a=e.activeSortable,o=e.dispatchSortableEvent,r=e.hideGhostForTarget,s=e.unhideGhostForTarget;if(n){var u=l||a;r();var c=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:n,f=document.elementFromPoint(c.clientX,c.clientY);s(),u&&!u.el.contains(f)&&(o("spill"),this.onSpill({dragEl:i,putSortable:l}))}};function un(){}un.prototype={startIndex:null,dragStart:function(e){var n=e.oldDraggableIndex;this.startIndex=n},onSpill:function(e){var n=e.dragEl,l=e.putSortable;this.sortable.captureAnimationState(),l&&l.captureAnimationState();var i=et(this.sortable.el,this.startIndex,this.options);i?this.sortable.el.insertBefore(n,i):this.sortable.el.appendChild(n),this.sortable.animateAll(),l&&l.animateAll()},drop:fl},Oe(un,{pluginName:"revertOnSpill"});function fn(){}fn.prototype={onSpill:function(e){var n=e.dragEl,l=e.putSortable,i=l||this.sortable;i.captureAnimationState(),n.parentNode&&n.parentNode.removeChild(n),i.animateAll()},drop:fl},Oe(fn,{pluginName:"removeOnSpill"}),F.mount(new Oi),F.mount(fn,un);function cl(t,e,n){const l=t.slice();return l[18]=e[n],l}function dl(t,e,n){const l=t.slice();return l[21]=e[n],l}function hl(t){let e,n,l,i;return{c(){e=k("div"),n=k("a"),n.innerHTML='<i class="fas fa-pencil-alt fa-sm"></i>',p(n,"href","javascript:"),p(n,"data-action","editField"),p(n,"class","edit-field svelte-1mx8y43"),p(e,"class","right svelte-1mx8y43")},m(a,o){j(a,e,o),g(e,n),l||(i=te(n,"click",t[6]),l=!0)},p:U,d(a){a&&Y(e),l=!1,i()}}}function pl(t){let e,n,l,i=t[21].label+"",a,o,r,s=t[0].editable&&hl(t),u=[t[9](t[21])],c={};for(let f=0;f<u.length;f+=1)c=Ne(c,u[f]);return{c(){e=k("li"),n=k("div"),l=k("label"),a=se(i),o=R(),s&&s.c(),r=R(),p(l,"class","svelte-1mx8y43"),p(n,"class","left svelte-1mx8y43"),_t(e,c),vt(e,"svelte-1mx8y43",!0)},m(f,h){j(f,e,h),g(e,n),g(n,l),g(l,a),g(e,o),s&&s.m(e,null),g(e,r)},p(f,h){h&4&&i!==(i=f[21].label+"")&&Te(a,i),f[0].editable?s?s.p(f,h):(s=hl(f),s.c(),s.m(e,r)):s&&(s.d(1),s=null),_t(e,c=Cn(u,[h&4&&f[9](f[21])])),vt(e,"svelte-1mx8y43",!0)},d(f){f&&Y(e),s&&s.d()}}}function ml(t){let e,n,l,i;return{c(){e=k("div"),n=k("a"),n.innerHTML='<i class="fas fa-pencil-alt fa-sm"></i>',p(n,"href","javascript:"),p(n,"data-action","editField"),p(n,"class","edit-field svelte-1mx8y43"),p(e,"class","right svelte-1mx8y43")},m(a,o){j(a,e,o),g(e,n),l||(i=te(n,"click",t[6]),l=!0)},p:U,d(a){a&&Y(e),l=!1,i()}}}function gl(t){let e,n,l,i=t[18].label+"",a,o,r,s=t[0].editable&&ml(t),u=[t[9](t[18])],c={};for(let f=0;f<u.length;f+=1)c=Ne(c,u[f]);return{c(){e=k("li"),n=k("div"),l=k("label"),a=se(i),o=R(),s&&s.c(),r=R(),p(l,"class","svelte-1mx8y43"),p(n,"class","left svelte-1mx8y43"),_t(e,c),vt(e,"svelte-1mx8y43",!0)},m(f,h){j(f,e,h),g(e,n),g(n,l),g(l,a),g(e,o),s&&s.m(e,null),g(e,r)},p(f,h){h&2&&i!==(i=f[18].label+"")&&Te(a,i),f[0].editable?s?s.p(f,h):(s=ml(f),s.c(),s.m(e,r)):s&&(s.d(1),s=null),_t(e,c=Cn(u,[h&2&&f[9](f[18])])),vt(e,"svelte-1mx8y43",!0)},d(f){f&&Y(e),s&&s.d()}}}function Fi(t){let e,n,l,i,a,o,r,s,u,c,f,h,y=ue(t[2]),d=[];for(let m=0;m<y.length;m+=1)d[m]=pl(dl(t,y,m));let w=ue(t[1]),D=[];for(let m=0;m<w.length;m+=1)D[m]=gl(cl(t,w,m));return{c(){e=k("div"),n=k("div"),l=k("div"),i=k("header"),i.textContent=`${H.translate("Enabled","labels","Admin")}`,a=R(),o=k("ul");for(let m=0;m<d.length;m+=1)d[m].c();r=R(),s=k("div"),u=k("div"),c=k("header"),c.textContent=`${H.translate("Disabled","labels","Admin")}`,f=R(),h=k("ul");for(let m=0;m<D.length;m+=1)D[m].c();p(o,"class","enabled connected svelte-1mx8y43"),p(l,"class","well"),p(n,"class","col-sm-5"),p(h,"class","disabled connected svelte-1mx8y43"),p(u,"class","well"),p(s,"class","col-sm-5"),p(e,"id","layout"),p(e,"class","row")},m(m,b){j(m,e,b),g(e,n),g(n,l),g(l,i),g(l,a),g(l,o);for(let E=0;E<d.length;E+=1)d[E]&&d[E].m(o,null);g(e,r),g(e,s),g(s,u),g(u,c),g(u,f),g(u,h);for(let E=0;E<D.length;E+=1)D[E]&&D[E].m(h,null);t[13](e)},p(m,b){if(b&581){y=ue(m[2]);let E;for(E=0;E<y.length;E+=1){const S=dl(m,y,E);d[E]?d[E].p(S,b):(d[E]=pl(S),d[E].c(),d[E].m(o,null))}for(;E<d.length;E+=1)d[E].d(1);d.length=y.length}if(b&579){w=ue(m[1]);let E;for(E=0;E<w.length;E+=1){const S=cl(m,w,E);D[E]?D[E].p(S,b):(D[E]=gl(S),D[E].c(),D[E].m(h,null))}for(;E<D.length;E+=1)D[E].d(1);D.length=w.length}},d(m){m&&Y(e),Qe(d,m),Qe(D,m),t[13](null)}}}function Ii(t){let e,n,l={params:t[0],validate:t[8],fetch:t[7],loadLayout:t[3],$$slots:{default:[Fi]},$$scope:{ctx:t}};return e=new Yn({props:l}),t[14](e),{c(){He(e.$$.fragment)},m(i,a){Le(e,i,a),n=!0},p(i,[a]){const o={};a&1&&(o.params=i[0]),a&8&&(o.loadLayout=i[3]),a&16777239&&(o.$$scope={dirty:a,ctx:i}),e.$set(o)},i(i){n||(_e(e.$$.fragment,i),n=!0)},o(i){Pe(e.$$.fragment,i),n=!1},d(i){t[14](null),Ce(e,i)}}}function Ni(t){return t.toLowerCase()}function bl(t,e){return t[e]}function Mi(t,e,n){let l,i,a,{params:o}=e,{dataAttributeList:r=[]}=e,{dataAttributeDefs:s}=e,{enabledFields:u=[]}=e,{disabledFields:c=[]}=e,{rowLayout:f=[]}=e,{loadLayout:h}=e,y;Xt(()=>{d()}),En(()=>{i&&i.destroy(),a&&a.destroy()});function d(){const P={group:"fields",draggable:"li",animation:150};i=F.create(l.querySelector("ul.enabled"),{...P}),a=F.create(l.querySelector("ul.disabled"),{...P})}function w(P){const v=P.target.closest("li");if(!v)return;const C={};r.forEach(L=>{C[L]=v.dataset[L]||null}),y.openEditDialog(C)}function D(){const P=[];for(let A of l.querySelector("ul.enabled").children){const v={};r.forEach(C=>{const L=A.dataset[C];L&&(v[C]=L)}),P.push(v)}return P}function m(P){return P.length===0?(de.notify("Layout cannot be empty","error"),!1):!0}function b(P){const A={};return r.forEach(v=>{bl(P,v)!=null&&(A[`data-${Ni(v)}`]=bl(P,v))}),A}function E(P){De[P?"unshift":"push"](()=>{l=P,n(4,l)})}function S(P){De[P?"unshift":"push"](()=>{y=P,n(5,y)})}return t.$$set=P=>{"params"in P&&n(0,o=P.params),"dataAttributeList"in P&&n(10,r=P.dataAttributeList),"dataAttributeDefs"in P&&n(11,s=P.dataAttributeDefs),"enabledFields"in P&&n(12,u=P.enabledFields),"disabledFields"in P&&n(1,c=P.disabledFields),"rowLayout"in P&&n(2,f=P.rowLayout),"loadLayout"in P&&n(3,h=P.loadLayout)},[o,c,f,h,l,y,w,D,m,b,r,s,u,E,S]}class cn extends ye{constructor(e){super(),ve(this,e,Mi,Ii,ge,{params:0,dataAttributeList:10,dataAttributeDefs:11,enabledFields:12,disabledFields:1,rowLayout:2,loadLayout:3})}}function Ri(t){let e,n,l={params:t[0],enabledFields:t[2],disabledFields:t[3],rowLayout:t[4],editable:Hi,dataAttributeList:t[5],loadLayout:t[6]};return e=new cn({props:l}),t[9](e),{c(){He(e.$$.fragment)},m(i,a){Le(e,i,a),n=!0},p(i,[a]){const o={};a&1&&(o.params=i[0]),a&4&&(o.enabledFields=i[2]),a&8&&(o.disabledFields=i[3]),a&16&&(o.rowLayout=i[4]),e.$set(o)},i(i){n||(_e(e.$$.fragment,i),n=!0)},o(i){Pe(e.$$.fragment,i),n=!1},d(i){t[9](null),Ce(e,i)}}}let Hi=!0;function qi(t){return!0}function zi(t,e,n){let{params:l}=e;const i=["id","name","width","widthPx","link","notSortable","align","view","customLabel"];let{layoutDisabledParameter:a="layoutListDisabled"}=e,{afterRender:o}=e,r,s=[],u=[],c=[];const f=[],h=[];function y(){Dt.create(scope,m=>{de.notify("Loading..."),Ae.get(l.scope,l.type,l.layoutProfileId,b=>{d(m,b),de.notify(!1),o&&o()},!1)})}function d(m,b){const E=Object.keys(m.defs.fields).filter(v=>qi(m.getFieldParam(v,"type"))&&w(m,v)).sort((v,C)=>H.translate(v,"fields",scope).localeCompare(H.translate(C,"fields",scope))),S=[],P=[],A=[];n(2,s=b.map(v=>{const C=H.translate(v.name,"fields",scope);return P.includes(C)&&A.push(C),P.push(C),S.push(v.name),{name:v.name,label:C}})),n(3,u=E.filter(v=>!S.includes(v)).map(v=>{const C=H.translate(v,"fields",scope);P.includes(C)&&A.push(C),P.push(C);const L={name:v,label:C},G=qe.get(["entityDefs",scope,"fields",v,"type"]);return G&&qe.get(["fields",G,"notSortable"])&&(L.notSortable=!0),L})),[s,u].forEach(v=>{v.forEach(C=>{A.includes(C.label)&&(C.label+=` (${C.name})`)})}),n(4,c=b.map(v=>{var C;return{...v,label:((C=s.find(L=>L.name===v.name))==null?void 0:C.label)||H.translate(v.name,"fields",scope)}}))}function w(m,b){return f.includes(b)||h.includes(m.getFieldParam(b,"type"))?!1:!m.getFieldParam(b,"disabled")&&!m.getFieldParam(b,a)}function D(m){De[m?"unshift":"push"](()=>{r=m,n(1,r)})}return t.$$set=m=>{"params"in m&&n(0,l=m.params),"layoutDisabledParameter"in m&&n(7,a=m.layoutDisabledParameter),"afterRender"in m&&n(8,o=m.afterRender)},[l,r,s,u,c,i,y,a,o,D]}class dn extends ye{constructor(e){super(),ve(this,e,zi,Ri,ge,{params:0,layoutDisabledParameter:7,afterRender:8})}}function Bi(t){let e,n,l={params:t[0],enabledFields:t[6],disabledFields:t[2],rowLayout:t[3],dataAttributeList:t[4],dataAttributesDefs:t[5],loadLayout:t[7]};return e=new cn({props:l}),t[9](e),{c(){He(e.$$.fragment)},m(i,a){Le(e,i,a),n=!0},p(i,[a]){const o={};a&1&&(o.params=i[0]),a&4&&(o.disabledFields=i[2]),a&8&&(o.rowLayout=i[3]),e.$set(o)},i(i){n||(_e(e.$$.fragment,i),n=!0)},o(i){Pe(e.$$.fragment,i),n=!1},d(i){t[9](null),Ce(e,i)}}}function Yi(t,e,n){let{params:l}=e,{viewType:i="detail"}=e;const a=["id","name","style","sticked"],o={style:{type:"enum",options:["default","success","danger","primary","info","warning"],translation:"LayoutManager.options.style"},sticked:{type:"bool"},name:{readOnly:!0}};let r,s=[],u=[],c=[];function f(){de.notify("Loading..."),Ae.get(l.scope,l.type,l.layoutProfileId,d=>{h(d),de.notify(!1),l.afterRender&&l.afterRender()},!1)}function h(d){let w=[],D={},m={};qe.get(["clientDefs",m.scope,"defaultSidePanel",i])!==!1&&!qe.get(["clientDefs",m.scope,"defaultSidePanelDisabled"])&&(w.push("default"),D.default="Default"),(qe.get(["clientDefs",m.scope,"sidePanels",i])||[]).forEach(b=>{b.name&&(w.push(b.name),b.label&&(D[b.name]=b.label),m[b.name]=b)}),n(2,u=[]),d=d||{},n(3,c=[]),w.forEach((b,E)=>{let S=!1,P=d[b]||{};P.disabled&&(S=!0);let A;if(D[b]?A=H.translate(D[b],"labels",m.scope):A=H.translate(b,"panels",m.scope),S)u.push({name:b,label:A});else{let v={name:b,label:A};v.name in m&&a.forEach(C=>{if(C==="name")return;let L=m[v.name]||{};C in L&&(v[C]=L[C])});for(let C in P)v[C]=P[C];v.index="index"in P?P.index:E,c.push(v)}}),c.sort((b,E)=>b.index-E.index)}function y(d){De[d?"unshift":"push"](()=>{r=d,n(1,r)})}return t.$$set=d=>{"params"in d&&n(0,l=d.params),"viewType"in d&&n(8,i=d.viewType)},[l,r,u,c,a,o,s,f,i,y]}class zt extends ye{constructor(e){super(),ve(this,e,Yi,Bi,ge,{params:0,viewType:8})}}function Xi(t){let e,n,l={params:t[0],enabledFields:t[2],disabledFields:t[3],rowLayout:t[4],dataAttributeList:t[5],dataAttributesDefs:t[6],loadLayout:t[7]};return e=new cn({props:l}),t[9](e),{c(){He(e.$$.fragment)},m(i,a){Le(e,i,a),n=!0},p(i,[a]){const o={};a&1&&(o.params=i[0]),a&4&&(o.enabledFields=i[2]),a&8&&(o.disabledFields=i[3]),a&16&&(o.rowLayout=i[4]),e.$set(o)},i(i){n||(_e(e.$$.fragment,i),n=!0)},o(i){Pe(e.$$.fragment,i),n=!1},d(i){t[9](null),Ce(e,i)}}}function ji(t,e){return!t.getLinkParam(e,"disabled")&&!t.getLinkParam(e,"layoutRelationshipsDisabled")}function Gi(t,e,n){let{params:l}=e;const i=["id","name","style","hiddenPerDefault"],a={style:{type:"enum",options:["default","success","danger","primary","info","warning"],translation:"LayoutManager.options.style"},hiddenPerDefault:{type:"bool"},name:{readOnly:!0}};let{afterRender:o}=e,r,s=[],u=[],c=[],f=[];function h(){de.notify("Loading..."),Dt.create(scope,function(w){Ae.get(scope,type,layoutProfileId,D=>{y(w,D),de.notify(!1),o&&o()},!1)})}function y(w,D){let m=[];for(let b in w.defs.links)["hasMany","hasChildren"].includes(w.defs.links[b].type)&&ji(w,b)&&m.push(b);m.sort((b,E)=>H.translate(b,"links","scope").localeCompare(H.translate(E,"links","scope"))),u=[],n(2,s=[]),n(3,c=[]);for(let b in D){let E=D[b],S;typeof E=="string"?S={name:E,label:H.translate(E,"links","scope")}:(S=E,S.label=H.translate(S.name,"links","scope")),i.forEach(P=>{if(P==="name"||P in S)return;let A=qe.get(["clientDefs","scope","relationshipPanels",S.name,P]);A!==null&&(S[P]=A)}),s.push(S),u.push(S.name)}for(let b of m)u.includes(b)||c.push({name:b,label:H.translate(b,"links","scope")});n(4,f=s);for(let b of f)b.label=H.translate(b.name,"links","scope")}function d(w){De[w?"unshift":"push"](()=>{r=w,n(1,r)})}return t.$$set=w=>{"params"in w&&n(0,l=w.params),"afterRender"in w&&n(8,o=w.afterRender)},[l,r,s,c,f,i,a,h,o,d]}class Wi extends ye{constructor(e){super(),ve(this,e,Gi,Xi,ge,{params:0,afterRender:8})}}function _l(t,e,n){const l=t.slice();return l[33]=e[n],l}function vl(t,e,n){const l=t.slice();return l[36]=e[n],l}function yl(t,e,n){const l=t.slice();return l[39]=e[n],l[41]=n,l}function wl(t,e,n){const l=t.slice();return l[42]=e[n],l[44]=n,l}function Ui(t){let e,n,l,i,a;function o(){return t[17](t[36],t[41],t[44])}return{c(){e=k("li"),n=k("a"),n.innerHTML='<i class="fas fa-minus"></i>',l=R(),p(n,"href","#"),p(n,"data-action","minusCell"),p(n,"class","remove-field svelte-fp3tbt"),p(e,"class","empty cell svelte-fp3tbt")},m(r,s){j(r,e,s),g(e,n),g(e,l),i||(a=te(n,"click",Me(o)),i=!0)},p(r,s){t=r},d(r){r&&Y(e),i=!1,a()}}}function Qi(t){let e,n=t[42].label+"",l,i,a,o,r,s,u,c,f,h,y;function d(){return t[16](t[36],t[41],t[44])}return{c(){e=k("li"),l=se(n),i=R(),a=k("a"),a.innerHTML='<i class="fas fa-times"></i>',o=R(),p(a,"href","#"),p(a,"data-action","removeField"),p(a,"class","remove-field svelte-fp3tbt"),p(e,"class","cell svelte-fp3tbt"),p(e,"draggable","true"),p(e,"data-id",r=t[42].id),p(e,"data-name",s=t[42].name),p(e,"data-full-width",u=t[42].fullWidth?"true":void 0),p(e,"data-custom-label",c=t[42].customLabel?t[42].customLabel:void 0),p(e,"data-no-label",f=t[42].noLabel)},m(w,D){j(w,e,D),g(e,l),g(e,i),g(e,a),g(e,o),h||(y=te(a,"click",Me(d)),h=!0)},p(w,D){t=w,D[0]&2&&n!==(n=t[42].label+"")&&Te(l,n),D[0]&2&&r!==(r=t[42].id)&&p(e,"data-id",r),D[0]&2&&s!==(s=t[42].name)&&p(e,"data-name",s),D[0]&2&&u!==(u=t[42].fullWidth?"true":void 0)&&p(e,"data-full-width",u),D[0]&2&&c!==(c=t[42].customLabel?t[42].customLabel:void 0)&&p(e,"data-custom-label",c),D[0]&2&&f!==(f=t[42].noLabel)&&p(e,"data-no-label",f)},d(w){w&&Y(e),h=!1,y()}}}function El(t){let e;function n(a,o){return a[42]?Qi:Ui}let l=n(t),i=l(t);return{c(){i.c(),e=yn()},m(a,o){i.m(a,o),j(a,e,o)},p(a,o){l===(l=n(a))&&i?i.p(a,o):(i.d(1),i=l(a),i&&(i.c(),i.m(e.parentNode,e)))},d(a){a&&Y(e),i.d(a)}}}function Dl(t){let e,n,l,i,a,o,r,s;function u(){return t[15](t[36],t[41])}let c=ue(t[39]),f=[];for(let h=0;h<c.length;h+=1)f[h]=El(wl(t,c,h));return{c(){e=k("li"),n=k("div"),l=k("a"),l.innerHTML='<i class="fas fa-times"></i>',i=R(),a=k("ul");for(let h=0;h<f.length;h+=1)f[h].c();o=R(),p(l,"href","#"),p(l,"data-action","removeRow"),p(l,"class","remove-row pull-right svelte-fp3tbt"),p(n,"class","svelte-fp3tbt"),p(a,"class","cells svelte-fp3tbt"),p(e,"class","row svelte-fp3tbt")},m(h,y){j(h,e,y),g(e,n),g(n,l),g(e,i),g(e,a);for(let d=0;d<f.length;d+=1)f[d]&&f[d].m(a,null);g(e,o),r||(s=[te(l,"click",Me(u)),te(a,"mousedown",wn(Ji))],r=!0)},p(h,y){if(t=h,y[0]&770){c=ue(t[39]);let d;for(d=0;d<c.length;d+=1){const w=wl(t,c,d);f[d]?f[d].p(w,y):(f[d]=El(w),f[d].c(),f[d].m(a,null))}for(;d<f.length;d+=1)f[d].d(1);f.length=c.length}},d(h){h&&Y(e),Qe(f,h),r=!1,Xe(s)}}}function Sl(t,e){let n,l,i,a=(e[36].customLabel||e[36].label)+"",o,r,s,u,c,f,h,y,d,w,D,m,b,E,S,P,A,v;function C(){return e[13](e[36])}function L(){return e[14](e[36])}let G=ue(e[36].rows),W=[];for(let M=0;M<G.length;M+=1)W[M]=Dl(yl(e,G,M));function K(){return e[18](e[36])}return{key:t,first:null,c(){n=k("li"),l=k("header"),i=k("label"),o=se(a),s=se(`Â \r
                                `),u=k("a"),u.innerHTML='<i class="fas fa-pencil-alt fa-sm"></i>',c=R(),f=k("a"),h=k("i"),w=R(),D=k("ul");for(let M=0;M<W.length;M+=1)W[M].c();m=R(),b=k("div"),E=k("a"),E.innerHTML='<i class="fas fa-plus"></i>',S=R(),p(i,"data-is-custom",r=e[36].isCustomLabel?"true":void 0),p(i,"class","svelte-fp3tbt"),p(u,"href","#"),p(u,"data-action","edit-panel-label"),p(u,"class","edit-panel-label svelte-fp3tbt"),p(h,"class","fas fa-times"),p(f,"href","#"),Re(f,"float","right"),p(f,"data-action","removePanel"),p(f,"class","remove-panel svelte-fp3tbt"),p(f,"data-number",y=e[36].number),p(l,"data-name",d=e[36].name),p(l,"class","svelte-fp3tbt"),p(D,"class","rows svelte-fp3tbt"),p(E,"href","#"),p(E,"data-action","addRow"),p(E,"class","svelte-fp3tbt"),p(b,"class","svelte-fp3tbt"),p(n,"data-number",P=e[36].number),p(n,"class","panel-layout svelte-fp3tbt"),this.first=n},m(M,q){j(M,n,q),g(n,l),g(l,i),g(i,o),g(l,s),g(l,u),g(l,c),g(l,f),g(f,h),g(n,w),g(n,D);for(let _=0;_<W.length;_+=1)W[_]&&W[_].m(D,null);g(n,m),g(n,b),g(b,E),g(n,S),A||(v=[te(u,"click",Me(C)),te(f,"click",Me(L)),te(D,"mousedown",wn(xi)),te(E,"click",Me(K))],A=!0)},p(M,q){if(e=M,q[0]&2&&a!==(a=(e[36].customLabel||e[36].label)+"")&&Te(o,a),q[0]&2&&r!==(r=e[36].isCustomLabel?"true":void 0)&&p(i,"data-is-custom",r),q[0]&2&&y!==(y=e[36].number)&&p(f,"data-number",y),q[0]&2&&d!==(d=e[36].name)&&p(l,"data-name",d),q[0]&898){G=ue(e[36].rows);let _;for(_=0;_<G.length;_+=1){const O=yl(e,G,_);W[_]?W[_].p(O,q):(W[_]=Dl(O),W[_].c(),W[_].m(D,null))}for(;_<W.length;_+=1)W[_].d(1);W.length=G.length}q[0]&2&&P!==(P=e[36].number)&&p(n,"data-number",P)},d(M){M&&Y(n),Qe(W,M),A=!1,Xe(v)}}}function kl(t){let e,n=t[33].label+"",l,i,a,o,r,s,u;function c(){return t[19](t[33])}return{c(){e=k("li"),l=se(n),i=R(),a=k("a"),a.innerHTML='<i class="fas fa-times"></i>',o=R(),p(a,"href","#"),p(a,"data-action","removeField"),p(a,"class","remove-field svelte-fp3tbt"),p(e,"class","cell svelte-fp3tbt"),p(e,"data-name",r=t[33].name)},m(f,h){j(f,e,h),g(e,l),g(e,i),g(e,a),g(e,o),s||(u=te(a,"click",Me(c)),s=!0)},p(f,h){t=f,h[0]&4&&n!==(n=t[33].label+"")&&Te(l,n),h[0]&4&&r!==(r=t[33].name)&&p(e,"data-name",r)},d(f){f&&Y(e),s=!1,u()}}}function Vi(t){let e,n,l,i,a,o,r,s,u=[],c=new Map,f,h,y,d,w,D,m,b,E=ue(t[1]);const S=v=>v[36].number;for(let v=0;v<E.length;v+=1){let C=vl(t,E,v),L=S(C);c.set(L,u[v]=Sl(L,C))}let P=ue(t[2]),A=[];for(let v=0;v<P.length;v+=1)A[v]=kl(_l(t,P,v));return{c(){e=k("div"),n=k("div"),l=k("div"),i=k("header"),i.textContent=`${H.translate("Layout","LayoutManager")}`,a=R(),o=k("a"),o.textContent=`${H.translate("Add Panel","Admin")}`,r=R(),s=k("ul");for(let v=0;v<u.length;v+=1)u[v].c();f=R(),h=k("div"),y=k("div"),d=k("header"),d.textContent=`${H.translate("Available Fields","Admin")}`,w=R(),D=k("ul");for(let v=0;v<A.length;v+=1)A[v].c();p(i,"class","svelte-fp3tbt"),p(o,"href","#"),p(o,"class","svelte-fp3tbt"),p(s,"class","panels svelte-fp3tbt"),p(l,"class","well svelte-fp3tbt"),p(n,"class","col-md-8 svelte-fp3tbt"),p(d,"class","svelte-fp3tbt"),p(D,"class","disabled cells clearfix svelte-fp3tbt"),p(y,"class","well svelte-fp3tbt"),p(h,"class","col-md-4 svelte-fp3tbt"),p(e,"id","layout"),p(e,"class","row svelte-fp3tbt")},m(v,C){j(v,e,C),g(e,n),g(n,l),g(l,i),g(l,a),g(l,o),g(l,r),g(l,s);for(let L=0;L<u.length;L+=1)u[L]&&u[L].m(s,null);g(e,f),g(e,h),g(h,y),g(y,d),g(y,w),g(y,D);for(let L=0;L<A.length;L+=1)A[L]&&A[L].m(D,null);m||(b=te(o,"click",Me(t[4])),m=!0)},p(v,C){if(C[0]&994&&(E=ue(v[1]),u=Bl(u,C,S,1,v,E,c,s,zl,Sl,null,vl)),C[0]&260){P=ue(v[2]);let L;for(L=0;L<P.length;L+=1){const G=_l(v,P,L);A[L]?A[L].p(G,C):(A[L]=kl(G),A[L].c(),A[L].m(D,null))}for(;L<A.length;L+=1)A[L].d(1);A.length=P.length}},d(v){v&&Y(e);for(let C=0;C<u.length;C+=1)u[C].d();Qe(A,v),m=!1,b()}}}function Ki(t){let e,n;return e=new Yn({props:{params:t[0],validate:t[10],fetch,loadLayout:t[3],$$slots:{default:[Vi]},$$scope:{ctx:t}}}),{c(){He(e.$$.fragment)},m(l,i){Le(e,l,i),n=!0},p(l,i){const a={};i[0]&1&&(a.params=l[0]),i[0]&6|i[1]&16384&&(a.$$scope={dirty:i,ctx:l}),e.$set(a)},i(l){n||(_e(e.$$.fragment,l),n=!0)},o(l){Pe(e.$$.fragment,l),n=!1},d(l){Ce(e,l)}}}function Zi(t,e){return e.some(n=>n.name===t)}function oa(t){}const Ji=()=>{},xi=()=>{};function $i(t,e,n){let{params:l}=e,{columnCount:i=2}=e,{layoutDisabledParameter:a="layoutDetailDisabled"}=e,o=["modifiedAt","createdAt","modifiedBy","createdBy","assignedUser","ownerUser","teams"],r=[],s=[],u=-1,c;Dn();function f(_){let O,X;const Q=[];Q.push(new Promise(le=>{Dt.create(l.scope,ce=>{Ae.get(l.scope,l.type,l.layoutProfileId,x=>{O=x,X=ce,le()},!1)})})),["detail","detailSmall"].includes(l.type)&&Q.push(new Promise(le=>{Ae.get(l.scope,"sidePanels"+Espo.utils.upperCaseFirst(l.type),l.layoutProfileId,ce=>{c=ce,le()},!1)})),Promise.all(Q).then(()=>{h(X,O),w(),Pn().then(()=>{D()}),_&&_()})}function h(_,O){let X=[];const Q=[];for(const x in _.defs.fields)y(_,x)&&(Q.push(H.translate(x,"fields",l.scope)),X.push(x));const le=Q.filter((x,oe)=>Q.indexOf(x)!==oe);let ce=[];n(2,s=[]),n(1,r=O),O.forEach((x,oe)=>{x.rows.forEach((Ue,hn)=>{Ue&&Ue.forEach((Bt,Tl)=>{if(Tl==i||!Bt)return;let Yt=H.translate(Bt.name,"fields",l.scope);le.includes(Yt)&&(Yt+=` (${Bt.name})`),ce.push({name:Bt.name,label:Yt}),n(1,r[oe].rows[hn][Tl].label=Yt,r)})})}),X.sort((x,oe)=>H.translate(x,"fields",l.scope).localeCompare(H.translate(oe,"fields",l.scope)));for(const x in X)if(!Zi(X[x],ce)){const oe=X[x];let Ue=H.translate(oe,"fields",l.scope);le.includes(Ue)&&(Ue+=` (${oe})`),s.push({name:oe,label:Ue})}}function y(_,O){return d()&&o.includes(O)?!1:!_.getFieldParam(O,"disabled")&&!_.getFieldParam(O,a)}function d(){if(qe.get(["clientDefs",l.scope,"defaultSidePanelDisabled"]))return!1;if(c){for(const _ in c)if(_==="default"&&c[_].disabled)return!1}return!0}function w(){u=-1,n(1,r=r.map((_,O)=>(_.number=O,u=O,_)))}function D(){F.create(document.querySelector("ul.panels"),{animation:150,group:"panels",draggable:"li.panel-layout"}),document.querySelectorAll("ul.rows").forEach(_=>{console.log(_),F.create(_,{animation:150,group:"rows",draggable:"li.row"})}),document.querySelectorAll("ul.cells.disabled").forEach(_=>{F.create(_,{animation:150,group:"cells",draggable:"li.cell"})}),document.querySelectorAll("ul.cells .cell.empty").forEach(_=>{F.create(_,{group:"cells",animation:150,onAdd(O){console.log(`Item ${O.item.textContent.trim()} dropped into droppable zone`)}})})}function m(){u++;const _={customLabel:"New panel",rows:[[!1,!1]],number:u,name:`panel${u}`,isCustomLabel:!0};n(1,r=[...r,_]),Pn().then(()=>{const O=document.querySelector(`.panel-layout[data-number="${_.number}"] > .rows`);F.create(O,{animation:150,group:"rows",draggable:"li.row"})})}function b(_){n(1,r=r.filter(O=>O.number!==_))}function E(_){n(1,r=r.map((O,X)=>(X===_&&(O.rows=[...O.rows,Array(i).fill(null)]),O)))}function S(_,O){n(1,r=r.map((X,Q)=>(Q===_&&(X.rows=X.rows.filter((le,ce)=>ce!==O)),X)))}function P(_,O,X){n(1,r=r.map(Q=>(Q.number===_&&(Q.rows=Q.rows.map((le,ce)=>{if(ce===O){const x=le[X];x&&n(2,s=[...s,x]),le[X]=null}return le})),Q)))}function A(_,O,X){i<2||(n(1,r=r.map((Q,le)=>(le===_&&(Q.rows=Q.rows.map((ce,x)=>{if(x===O){const oe=ce.filter((Ue,hn)=>hn!==X);return oe.length===1&&(oe[0].fullWidth=!0),oe}return ce})),Q))),n(11,i--,i))}function v(_){let O=0;return _.forEach(X=>{X.rows.forEach(Q=>{Q.forEach(le=>{le!==null&&O++})})}),O===0?(de.notify("Layout cannot be empty.","error"),!1):!0}const C=_=>(_.number,void 0),L=_=>b(_.number),G=(_,O)=>S(_.number,O),W=(_,O,X)=>P(_.number,O,X),K=(_,O,X)=>A(_.number,O,X),M=_=>E(_.number),q=_=>P(-1,-1,s.indexOf(_));return t.$$set=_=>{"params"in _&&n(0,l=_.params),"columnCount"in _&&n(11,i=_.columnCount),"layoutDisabledParameter"in _&&n(12,a=_.layoutDisabledParameter)},[l,r,s,f,m,b,E,S,P,A,v,i,a,C,L,G,W,K,M,q]}class ea extends ye{constructor(e){super(),ve(this,e,$i,Ki,ge,{params:0,columnCount:11,layoutDisabledParameter:12},null,[-1,-1])}}function ta(t){let e,n;return e=new t[1]({props:{params:t[0],layoutDisabledParameter:t[2],viewType:t[3]}}),{c(){He(e.$$.fragment)},m(l,i){Le(e,l,i),n=!0},p(l,[i]){const a={};i&1&&(a.params=l[0]),i&4&&(a.layoutDisabledParameter=l[2]),i&8&&(a.viewType=l[3]),e.$set(a)},i(l){n||(_e(e.$$.fragment,l),n=!0)},o(l){Pe(e.$$.fragment,l),n=!1},d(l){Ce(e,l)}}}function na(t,e,n){let{params:l}=e,i,a,o;return t.$$set=r=>{"params"in r&&n(0,l=r.params)},t.$$.update=()=>{if(t.$$.dirty&1)switch(l.type){case"list":n(2,a="layoutListDisabled"),n(1,i=dn);break;case"listSmall":n(2,a="layoutListSmallDisabled"),n(1,i=dn);break;case"kanban":n(1,i=dn);break;case"relationships":n(1,i=Wi);break;case"detail":case"detailSmall":n(1,i=ea);break;case"sidePanelsDetail":n(3,o="detail"),n(1,i=zt);break;case"sidePanelsDetailSmall":n(3,o="detailSmall"),n(1,i=zt);break;case"sidePanelsEdit":n(3,o="edit"),n(1,i=zt);break;case"sidePanelsEditSmall":n(3,o="editSmall"),n(1,i=zt);break}},[l,i,a,o]}class la extends ye{constructor(e){super(),ve(this,e,na,ta,ge,{params:0})}}window.SvelteLanguage=H,window.SvelteUserData=On,window.SvelteNotifier=de,window.SvelteLayoutManager=Ae,window.SvelteMetadata=qe,window.SvelteModelFactory=Dt,re.LayoutComponent=la,re.QueueManagerIcon=Zl,re.UpdatePanel=li,Object.defineProperty(re,Symbol.toStringTag,{value:"Module"})});
