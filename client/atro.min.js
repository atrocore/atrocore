(function(he,De){typeof exports=="object"&&typeof module<"u"?De(exports):typeof define=="function"&&define.amd?define(["exports"],De):(he=typeof globalThis<"u"?globalThis:he||self,De(he.Svelte={}))})(this,function(he){"use strict";var Ia=Object.defineProperty;var Ta=(he,De,$e)=>De in he?Ia(he,De,{enumerable:!0,configurable:!0,writable:!0,value:$e}):he[De]=$e;var ai=(he,De,$e)=>Ta(he,typeof De!="symbol"?De+"":De,$e);let De={};function $e(t={}){De={animate:!0,allowClose:!0,overlayOpacity:.7,smoothScroll:!1,disableActiveInteraction:!1,showProgress:!1,stagePadding:10,stageRadius:5,popoverOffset:10,showButtons:["next","previous","close"],disableButtons:[],overlayColor:"#000",...t}}function B(t){return t?De[t]:De}function tn(t,e,n,i){return(t/=i/2)<1?n/2*t*t+e:-n/2*(--t*(t-2)-1)+e}function si(t){const e='a[href]:not([disabled]), button:not([disabled]), textarea:not([disabled]), input[type="text"]:not([disabled]), input[type="radio"]:not([disabled]), input[type="checkbox"]:not([disabled]), select:not([disabled])';return t.flatMap(n=>{const i=n.matches(e),l=Array.from(n.querySelectorAll(e));return[...i?[n]:[],...l]}).filter(n=>getComputedStyle(n).pointerEvents!=="none"&&no(n))}function ui(t){if(!t||to(t))return;const e=B("smoothScroll");t.scrollIntoView({behavior:!e||eo(t)?"auto":"smooth",inline:"center",block:"center"})}function eo(t){if(!t||!t.parentElement)return;const e=t.parentElement;return e.scrollHeight>e.clientHeight}function to(t){const e=t.getBoundingClientRect();return e.top>=0&&e.left>=0&&e.bottom<=(window.innerHeight||document.documentElement.clientHeight)&&e.right<=(window.innerWidth||document.documentElement.clientWidth)}function no(t){return!!(t.offsetWidth||t.offsetHeight||t.getClientRects().length)}let nn={};function me(t,e){nn[t]=e}function W(t){return t?nn[t]:nn}function ci(){nn={}}let ln={};function on(t,e){ln[t]=e}function at(t){var e;(e=ln[t])==null||e.call(ln)}function io(){ln={}}function lo(t,e,n,i){let l=W("__activeStagePosition");const o=l||n.getBoundingClientRect(),r=i.getBoundingClientRect(),a=tn(t,o.x,r.x-o.x,e),s=tn(t,o.y,r.y-o.y,e),u=tn(t,o.width,r.width-o.width,e),c=tn(t,o.height,r.height-o.height,e);l={x:a,y:s,width:u,height:c},di(l),me("__activeStagePosition",l)}function fi(t){if(!t)return;const e=t.getBoundingClientRect(),n={x:e.x,y:e.y,width:e.width,height:e.height};me("__activeStagePosition",n),di(n)}function oo(){const t=W("__activeStagePosition"),e=W("__overlaySvg");if(!t)return;if(!e){console.warn("No stage svg found.");return}const n=window.innerWidth,i=window.innerHeight;e.setAttribute("viewBox",`0 0 ${n} ${i}`)}function ro(t){const e=ao(t);document.body.appendChild(e),gi(e,n=>{n.target.tagName==="path"&&at("overlayClick")}),me("__overlaySvg",e)}function di(t){const e=W("__overlaySvg");if(!e){ro(t);return}const n=e.firstElementChild;if((n==null?void 0:n.tagName)!=="path")throw new Error("no path element found in stage svg");n.setAttribute("d",pi(t))}function ao(t){const e=window.innerWidth,n=window.innerHeight,i=document.createElementNS("http://www.w3.org/2000/svg","svg");i.classList.add("driver-overlay","driver-overlay-animated"),i.setAttribute("viewBox",`0 0 ${e} ${n}`),i.setAttribute("xmlSpace","preserve"),i.setAttribute("xmlnsXlink","http://www.w3.org/1999/xlink"),i.setAttribute("version","1.1"),i.setAttribute("preserveAspectRatio","xMinYMin slice"),i.style.fillRule="evenodd",i.style.clipRule="evenodd",i.style.strokeLinejoin="round",i.style.strokeMiterlimit="2",i.style.zIndex="10000",i.style.position="fixed",i.style.top="0",i.style.left="0",i.style.width="100%",i.style.height="100%";const l=document.createElementNS("http://www.w3.org/2000/svg","path");return l.setAttribute("d",pi(t)),l.style.fill=B("overlayColor")||"rgb(0,0,0)",l.style.opacity=`${B("overlayOpacity")}`,l.style.pointerEvents="auto",l.style.cursor="auto",i.appendChild(l),i}function pi(t){const e=window.innerWidth,n=window.innerHeight,i=B("stagePadding")||0,l=B("stageRadius")||0,o=t.width+i*2,r=t.height+i*2,a=Math.min(l,o/2,r/2),s=Math.floor(Math.max(a,0)),u=t.x-i+s,c=t.y-i,f=o-s*2,p=r-s*2;return`M${e},0L0,0L0,${n}L${e},${n}L${e},0Z
    M${u},${c} h${f} a${s},${s} 0 0 1 ${s},${s} v${p} a${s},${s} 0 0 1 -${s},${s} h-${f} a${s},${s} 0 0 1 -${s},-${s} v-${p} a${s},${s} 0 0 1 ${s},-${s} z`}function so(){const t=W("__overlaySvg");t&&t.remove()}function uo(){const t=document.getElementById("driver-dummy-element");if(t)return t;let e=document.createElement("div");return e.id="driver-dummy-element",e.style.width="0",e.style.height="0",e.style.pointerEvents="none",e.style.opacity="0",e.style.position="fixed",e.style.top="50%",e.style.left="50%",document.body.appendChild(e),e}function hi(t){const{element:e}=t;let n=typeof e=="string"?document.querySelector(e):e;n||(n=uo()),fo(n,t)}function co(){const t=W("__activeElement"),e=W("__activeStep");t&&(fi(t),oo(),wi(t,e))}function fo(t,e){const n=Date.now(),i=W("__activeStep"),l=W("__activeElement")||t,o=!l||l===t,r=t.id==="driver-dummy-element",a=l.id==="driver-dummy-element",s=B("animate"),u=e.onHighlightStarted||B("onHighlightStarted"),c=(e==null?void 0:e.onHighlighted)||B("onHighlighted"),f=(i==null?void 0:i.onDeselected)||B("onDeselected"),p=B(),m=W();!o&&f&&f(a?void 0:l,i,{config:p,state:m}),u&&u(r?void 0:t,e,{config:p,state:m});const d=!o&&s;let g=!1;bo(),me("previousStep",i),me("previousElement",l),me("activeStep",e),me("activeElement",t);const h=()=>{if(W("__transitionCallback")!==h)return;const v=Date.now()-n,C=400-v<=400/2;e.popover&&C&&!g&&d&&(bi(t,e),g=!0),B("animate")&&v<400?lo(v,400,l,t):(fi(t),c&&c(r?void 0:t,e,{config:B(),state:W()}),me("__transitionCallback",void 0),me("__previousStep",i),me("__previousElement",l),me("__activeStep",e),me("__activeElement",t)),window.requestAnimationFrame(h)};me("__transitionCallback",h),window.requestAnimationFrame(h),ui(t),!d&&e.popover&&bi(t,e),l.classList.remove("driver-active-element","driver-no-interaction"),l.removeAttribute("aria-haspopup"),l.removeAttribute("aria-expanded"),l.removeAttribute("aria-controls"),B("disableActiveInteraction")&&t.classList.add("driver-no-interaction"),t.classList.add("driver-active-element"),t.setAttribute("aria-haspopup","dialog"),t.setAttribute("aria-expanded","true"),t.setAttribute("aria-controls","driver-popover-content")}function po(){var t;(t=document.getElementById("driver-dummy-element"))==null||t.remove(),document.querySelectorAll(".driver-active-element").forEach(e=>{e.classList.remove("driver-active-element","driver-no-interaction"),e.removeAttribute("aria-haspopup"),e.removeAttribute("aria-expanded"),e.removeAttribute("aria-controls")})}function It(){const t=W("__resizeTimeout");t&&window.cancelAnimationFrame(t),me("__resizeTimeout",window.requestAnimationFrame(co))}function ho(t){var e;if(!W("isInitialized")||!(t.key==="Tab"||t.keyCode===9))return;const n=W("__activeElement"),i=(e=W("popover"))==null?void 0:e.wrapper,l=si([...i?[i]:[],...n?[n]:[]]),o=l[0],r=l[l.length-1];if(t.preventDefault(),t.shiftKey){const a=l[l.indexOf(document.activeElement)-1]||r;a==null||a.focus()}else{const a=l[l.indexOf(document.activeElement)+1]||o;a==null||a.focus()}}function mi(t){var e;((e=B("allowKeyboardControl"))==null||e)&&(t.key==="Escape"?at("escapePress"):t.key==="ArrowRight"?at("arrowRightPress"):t.key==="ArrowLeft"&&at("arrowLeftPress"))}function gi(t,e,n){const i=(l,o)=>{const r=l.target;t.contains(r)&&((!n||n(r))&&(l.preventDefault(),l.stopPropagation(),l.stopImmediatePropagation()),o==null||o(l))};document.addEventListener("pointerdown",i,!0),document.addEventListener("mousedown",i,!0),document.addEventListener("pointerup",i,!0),document.addEventListener("mouseup",i,!0),document.addEventListener("click",l=>{i(l,e)},!0)}function mo(){window.addEventListener("keyup",mi,!1),window.addEventListener("keydown",ho,!1),window.addEventListener("resize",It),window.addEventListener("scroll",It)}function go(){window.removeEventListener("keyup",mi),window.removeEventListener("resize",It),window.removeEventListener("scroll",It)}function bo(){const t=W("popover");t&&(t.wrapper.style.display="none")}function bi(t,e){var n,i;let l=W("popover");l&&document.body.removeChild(l.wrapper),l=_o(),document.body.appendChild(l.wrapper);const{title:o,description:r,showButtons:a,disableButtons:s,showProgress:u,nextBtnText:c=B("nextBtnText")||"Next &rarr;",prevBtnText:f=B("prevBtnText")||"&larr; Previous",progressText:p=B("progressText")||"{current} of {total}"}=e.popover||{};l.nextButton.innerHTML=c,l.previousButton.innerHTML=f,l.progress.innerHTML=p,o?(l.title.innerHTML=o,l.title.style.display="block"):l.title.style.display="none",r?(l.description.innerHTML=r,l.description.style.display="block"):l.description.style.display="none";const m=a||B("showButtons"),d=u||B("showProgress")||!1,g=(m==null?void 0:m.includes("next"))||(m==null?void 0:m.includes("previous"))||d;l.closeButton.style.display=m.includes("close")?"block":"none",g?(l.footer.style.display="flex",l.progress.style.display=d?"block":"none",l.nextButton.style.display=m.includes("next")?"block":"none",l.previousButton.style.display=m.includes("previous")?"block":"none"):l.footer.style.display="none";const h=s||B("disableButtons")||[];h!=null&&h.includes("next")&&(l.nextButton.disabled=!0,l.nextButton.classList.add("driver-popover-btn-disabled")),h!=null&&h.includes("previous")&&(l.previousButton.disabled=!0,l.previousButton.classList.add("driver-popover-btn-disabled")),h!=null&&h.includes("close")&&(l.closeButton.disabled=!0,l.closeButton.classList.add("driver-popover-btn-disabled"));const v=l.wrapper;v.style.display="block",v.style.left="",v.style.top="",v.style.bottom="",v.style.right="",v.id="driver-popover-content",v.setAttribute("role","dialog"),v.setAttribute("aria-labelledby","driver-popover-title"),v.setAttribute("aria-describedby","driver-popover-description");const C=l.arrow;C.className="driver-popover-arrow";const D=((n=e.popover)==null?void 0:n.popoverClass)||B("popoverClass")||"";v.className=`driver-popover ${D}`.trim(),gi(l.wrapper,w=>{var P,_,L;const j=w.target,O=((P=e.popover)==null?void 0:P.onNextClick)||B("onNextClick"),G=((_=e.popover)==null?void 0:_.onPrevClick)||B("onPrevClick"),M=((L=e.popover)==null?void 0:L.onCloseClick)||B("onCloseClick");if(j.classList.contains("driver-popover-next-btn"))return O?O(t,e,{config:B(),state:W()}):at("nextClick");if(j.classList.contains("driver-popover-prev-btn"))return G?G(t,e,{config:B(),state:W()}):at("prevClick");if(j.classList.contains("driver-popover-close-btn"))return M?M(t,e,{config:B(),state:W()}):at("closeClick")},w=>!(l!=null&&l.description.contains(w))&&!(l!=null&&l.title.contains(w))&&typeof w.className=="string"&&w.className.includes("driver-popover")),me("popover",l);const k=((i=e.popover)==null?void 0:i.onPopoverRender)||B("onPopoverRender");k&&k(l,{config:B(),state:W()}),wi(t,e),ui(v);const E=t.classList.contains("driver-dummy-element"),I=si([v,...E?[]:[t]]);I.length>0&&I[0].focus()}function vi(){const t=W("popover");if(!(t!=null&&t.wrapper))return;const e=t.wrapper.getBoundingClientRect(),n=B("stagePadding")||0,i=B("popoverOffset")||0;return{width:e.width+n+i,height:e.height+n+i,realWidth:e.width,realHeight:e.height}}function _i(t,e){const{elementDimensions:n,popoverDimensions:i,popoverPadding:l,popoverArrowDimensions:o}=e;return t==="start"?Math.max(Math.min(n.top-l,window.innerHeight-i.realHeight-o.width),o.width):t==="end"?Math.max(Math.min(n.top-(i==null?void 0:i.realHeight)+n.height+l,window.innerHeight-(i==null?void 0:i.realHeight)-o.width),o.width):t==="center"?Math.max(Math.min(n.top+n.height/2-(i==null?void 0:i.realHeight)/2,window.innerHeight-(i==null?void 0:i.realHeight)-o.width),o.width):0}function yi(t,e){const{elementDimensions:n,popoverDimensions:i,popoverPadding:l,popoverArrowDimensions:o}=e;return t==="start"?Math.max(Math.min(n.left-l,window.innerWidth-i.realWidth-o.width),o.width):t==="end"?Math.max(Math.min(n.left-(i==null?void 0:i.realWidth)+n.width+l,window.innerWidth-(i==null?void 0:i.realWidth)-o.width),o.width):t==="center"?Math.max(Math.min(n.left+n.width/2-(i==null?void 0:i.realWidth)/2,window.innerWidth-(i==null?void 0:i.realWidth)-o.width),o.width):0}function wi(t,e){const n=W("popover");if(!n)return;const{align:i="start",side:l="left"}=(e==null?void 0:e.popover)||{},o=i,r=t.id==="driver-dummy-element"?"over":l,a=B("stagePadding")||0,s=vi(),u=n.arrow.getBoundingClientRect(),c=t.getBoundingClientRect(),f=c.top-s.height;let p=f>=0;const m=window.innerHeight-(c.bottom+s.height);let d=m>=0;const g=c.left-s.width;let h=g>=0;const v=window.innerWidth-(c.right+s.width);let C=v>=0;const D=!p&&!d&&!h&&!C;let k=r;if(r==="top"&&p?C=h=d=!1:r==="bottom"&&d?C=h=p=!1:r==="left"&&h?C=p=d=!1:r==="right"&&C&&(h=p=d=!1),r==="over"){const E=window.innerWidth/2-s.realWidth/2,I=window.innerHeight/2-s.realHeight/2;n.wrapper.style.left=`${E}px`,n.wrapper.style.right="auto",n.wrapper.style.top=`${I}px`,n.wrapper.style.bottom="auto"}else if(D){const E=window.innerWidth/2-(s==null?void 0:s.realWidth)/2,I=10;n.wrapper.style.left=`${E}px`,n.wrapper.style.right="auto",n.wrapper.style.bottom=`${I}px`,n.wrapper.style.top="auto"}else if(h){const E=Math.min(g,window.innerWidth-(s==null?void 0:s.realWidth)-u.width),I=_i(o,{elementDimensions:c,popoverDimensions:s,popoverPadding:a,popoverArrowDimensions:u});n.wrapper.style.left=`${E}px`,n.wrapper.style.top=`${I}px`,n.wrapper.style.bottom="auto",n.wrapper.style.right="auto",k="left"}else if(C){const E=Math.min(v,window.innerWidth-(s==null?void 0:s.realWidth)-u.width),I=_i(o,{elementDimensions:c,popoverDimensions:s,popoverPadding:a,popoverArrowDimensions:u});n.wrapper.style.right=`${E}px`,n.wrapper.style.top=`${I}px`,n.wrapper.style.bottom="auto",n.wrapper.style.left="auto",k="right"}else if(p){const E=Math.min(f,window.innerHeight-s.realHeight-u.width);let I=yi(o,{elementDimensions:c,popoverDimensions:s,popoverPadding:a,popoverArrowDimensions:u});n.wrapper.style.top=`${E}px`,n.wrapper.style.left=`${I}px`,n.wrapper.style.bottom="auto",n.wrapper.style.right="auto",k="top"}else if(d){const E=Math.min(m,window.innerHeight-(s==null?void 0:s.realHeight)-u.width);let I=yi(o,{elementDimensions:c,popoverDimensions:s,popoverPadding:a,popoverArrowDimensions:u});n.wrapper.style.left=`${I}px`,n.wrapper.style.bottom=`${E}px`,n.wrapper.style.top="auto",n.wrapper.style.right="auto",k="bottom"}D?n.arrow.classList.add("driver-popover-arrow-none"):vo(o,k,t)}function vo(t,e,n){const i=W("popover");if(!i)return;const l=n.getBoundingClientRect(),o=vi(),r=i.arrow,a=o.width,s=window.innerWidth,u=l.width,c=l.left,f=o.height,p=window.innerHeight,m=l.top,d=l.height;r.className="driver-popover-arrow";let g=e,h=t;e==="top"?(c+u<=0?(g="right",h="end"):c+u-a<=0&&(g="top",h="start"),c>=s?(g="left",h="end"):c+a>=s&&(g="top",h="end")):e==="bottom"?(c+u<=0?(g="right",h="start"):c+u-a<=0&&(g="bottom",h="start"),c>=s?(g="left",h="start"):c+a>=s&&(g="bottom",h="end")):e==="left"?(m+d<=0?(g="bottom",h="end"):m+d-f<=0&&(g="left",h="start"),m>=p?(g="top",h="end"):m+f>=p&&(g="left",h="end")):e==="right"&&(m+d<=0?(g="bottom",h="start"):m+d-f<=0&&(g="right",h="start"),m>=p?(g="top",h="start"):m+f>=p&&(g="right",h="end")),g?(r.classList.add(`driver-popover-arrow-side-${g}`),r.classList.add(`driver-popover-arrow-align-${h}`)):r.classList.add("driver-popover-arrow-none")}function _o(){const t=document.createElement("div");t.classList.add("driver-popover");const e=document.createElement("div");e.classList.add("driver-popover-arrow");const n=document.createElement("header");n.id="driver-popover-title",n.classList.add("driver-popover-title"),n.style.display="none",n.innerText="Popover Title";const i=document.createElement("div");i.id="driver-popover-description",i.classList.add("driver-popover-description"),i.style.display="none",i.innerText="Popover description is here";const l=document.createElement("button");l.type="button",l.classList.add("driver-popover-close-btn"),l.setAttribute("aria-label","Close"),l.innerHTML="&times;";const o=document.createElement("footer");o.classList.add("driver-popover-footer");const r=document.createElement("span");r.classList.add("driver-popover-progress-text"),r.innerText="";const a=document.createElement("span");a.classList.add("driver-popover-navigation-btns");const s=document.createElement("button");s.type="button",s.classList.add("driver-popover-prev-btn"),s.innerHTML="&larr; Previous";const u=document.createElement("button");return u.type="button",u.classList.add("driver-popover-next-btn"),u.innerHTML="Next &rarr;",a.appendChild(s),a.appendChild(u),o.appendChild(r),o.appendChild(a),t.appendChild(l),t.appendChild(e),t.appendChild(n),t.appendChild(i),t.appendChild(o),{wrapper:t,arrow:e,title:n,description:i,footer:o,previousButton:s,nextButton:u,closeButton:l,footerButtons:a,progress:r}}function yo(){var t;const e=W("popover");e&&((t=e.wrapper.parentElement)==null||t.removeChild(e.wrapper))}function wo(t={}){$e(t);function e(){B("allowClose")&&u()}function n(){const c=W("activeIndex"),f=B("steps")||[];if(typeof c>"u")return;const p=c+1;f[p]?s(p):u()}function i(){const c=W("activeIndex"),f=B("steps")||[];if(typeof c>"u")return;const p=c-1;f[p]?s(p):u()}function l(c){(B("steps")||[])[c]?s(c):u()}function o(){var c;if(W("__transitionCallback"))return;const f=W("activeIndex"),p=W("__activeStep"),m=W("__activeElement");if(typeof f>"u"||typeof p>"u"||typeof W("activeIndex")>"u")return;const d=((c=p.popover)==null?void 0:c.onPrevClick)||B("onPrevClick");if(d)return d(m,p,{config:B(),state:W()});i()}function r(){var c;if(W("__transitionCallback"))return;const f=W("activeIndex"),p=W("__activeStep"),m=W("__activeElement");if(typeof f>"u"||typeof p>"u")return;const d=((c=p.popover)==null?void 0:c.onNextClick)||B("onNextClick");if(d)return d(m,p,{config:B(),state:W()});n()}function a(){W("isInitialized")||(me("isInitialized",!0),document.body.classList.add("driver-active",B("animate")?"driver-fade":"driver-simple"),mo(),on("overlayClick",e),on("escapePress",e),on("arrowLeftPress",o),on("arrowRightPress",r))}function s(c=0){var f,p,m,d,g,h,v,C;const D=B("steps");if(!D){console.error("No steps to drive through"),u();return}if(!D[c]){u();return}me("__activeOnDestroyed",document.activeElement),me("activeIndex",c);const k=D[c],E=D[c+1],I=D[c-1],w=((f=k.popover)==null?void 0:f.doneBtnText)||B("doneBtnText")||"Done",P=B("allowClose"),_=typeof((p=k.popover)==null?void 0:p.showProgress)<"u"?(m=k.popover)==null?void 0:m.showProgress:B("showProgress"),L=(((d=k.popover)==null?void 0:d.progressText)||B("progressText")||"{{current}} of {{total}}").replace("{{current}}",`${c+1}`).replace("{{total}}",`${D.length}`),j=((g=k.popover)==null?void 0:g.showButtons)||B("showButtons"),O=["next","previous",...P?["close"]:[]].filter(q=>!(j!=null&&j.length)||j.includes(q)),G=((h=k.popover)==null?void 0:h.onNextClick)||B("onNextClick"),M=((v=k.popover)==null?void 0:v.onPrevClick)||B("onPrevClick"),T=((C=k.popover)==null?void 0:C.onCloseClick)||B("onCloseClick");hi({...k,popover:{showButtons:O,nextBtnText:E?void 0:w,disableButtons:[...I?[]:["previous"]],showProgress:_,progressText:L,onNextClick:G||(()=>{E?s(c+1):u()}),onPrevClick:M||(()=>{s(c-1)}),onCloseClick:T||(()=>{u()}),...(k==null?void 0:k.popover)||{}}})}function u(c=!0){const f=W("__activeElement"),p=W("__activeStep"),m=W("__activeOnDestroyed"),d=B("onDestroyStarted");if(c&&d){const v=!f||(f==null?void 0:f.id)==="driver-dummy-element";d(v?void 0:f,p,{config:B(),state:W()});return}const g=(p==null?void 0:p.onDeselected)||B("onDeselected"),h=B("onDestroyed");if(document.body.classList.remove("driver-active","driver-fade","driver-simple"),go(),yo(),po(),so(),io(),ci(),f&&p){const v=f.id==="driver-dummy-element";g&&g(v?void 0:f,p,{config:B(),state:W()}),h&&h(v?void 0:f,p,{config:B(),state:W()})}m&&m.focus()}return{isActive:()=>W("isInitialized")||!1,refresh:It,drive:(c=0)=>{a(),s(c)},setConfig:$e,setSteps:c=>{ci(),$e({...B(),steps:c})},getConfig:B,getState:W,getActiveIndex:()=>W("activeIndex"),isFirstStep:()=>W("activeIndex")===0,isLastStep:()=>{const c=B("steps")||[],f=W("activeIndex");return f!==void 0&&f===c.length-1},getActiveStep:()=>W("activeStep"),getActiveElement:()=>W("activeElement"),getPreviousElement:()=>W("previousElement"),getPreviousStep:()=>W("previousStep"),moveNext:n,movePrevious:i,moveTo:l,hasNextStep:()=>{const c=B("steps")||[],f=W("activeIndex");return f!==void 0&&c[f+1]},hasPreviousStep:()=>{const c=B("steps")||[],f=W("activeIndex");return f!==void 0&&c[f-1]},highlight:c=>{a(),hi({...c,popover:c.popover?{showButtons:[],showProgress:!1,progressText:"",...c.popover}:void 0})},destroy:()=>{u(!1)}}}function pe(){}const Ei=t=>t;function Tt(t,e){for(const n in e)t[n]=e[n];return t}function ki(t){return t()}function Si(){return Object.create(null)}function Fe(t){t.forEach(ki)}function rn(t){return typeof t=="function"}function ue(t,e){return t!=t?e==e:t!==e||t&&typeof t=="object"||typeof t=="function"}let an;function Di(t,e){return t===e?!0:(an||(an=document.createElement("a")),an.href=e,t===an.href)}function Eo(t){return Object.keys(t).length===0}function At(t,e,n,i){if(t){const l=Ci(t,e,n,i);return t[0](l)}}function Ci(t,e,n,i){return t[1]&&i?Tt(n.ctx.slice(),t[1](i(e))):n.ctx}function Ot(t,e,n,i){if(t[2]&&i){const l=t[2](i(n));if(e.dirty===void 0)return l;if(typeof l=="object"){const o=[],r=Math.max(e.dirty.length,l.length);for(let a=0;a<r;a+=1)o[a]=e.dirty[a]|l[a];return o}return e.dirty|l}return e.dirty}function Mt(t,e,n,i,l,o){if(l){const r=Ci(e,n,i,o);t.p(r,l)}}function Nt(t){if(t.ctx.length>32){const e=[],n=t.ctx.length/32;for(let i=0;i<n;i++)e[i]=-1;return e}return-1}const Li=typeof window<"u";let ko=Li?()=>window.performance.now():()=>Date.now(),On=Li?t=>requestAnimationFrame(t):pe;const dt=new Set;function Pi(t){dt.forEach(e=>{e.c(t)||(dt.delete(e),e.f())}),dt.size!==0&&On(Pi)}function So(t){let e;return dt.size===0&&On(Pi),{promise:new Promise(n=>{dt.add(e={c:t,f:n})}),abort(){dt.delete(e)}}}function y(t,e){t.appendChild(e)}function Ii(t){if(!t)return document;const e=t.getRootNode?t.getRootNode():t.ownerDocument;return e&&e.host?e:t.ownerDocument}function Do(t){const e=S("style");return e.textContent="/* empty */",Co(Ii(t),e),e.sheet}function Co(t,e){return y(t.head||t,e),e.sheet}function U(t,e,n){t.insertBefore(e,n||null)}function Y(t){t.parentNode&&t.parentNode.removeChild(t)}function sn(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}function S(t){return document.createElement(t)}function ae(t){return document.createTextNode(t)}function H(){return ae(" ")}function Ft(){return ae("")}function te(t,e,n,i){return t.addEventListener(e,n,i),()=>t.removeEventListener(e,n,i)}function et(t){return function(e){return e.preventDefault(),t.call(this,e)}}function Mn(t){return function(e){return e.stopPropagation(),t.call(this,e)}}function b(t,e,n){n==null?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}const Lo=["width","height"];function tt(t,e){const n=Object.getOwnPropertyDescriptors(t.__proto__);for(const i in e)e[i]==null?t.removeAttribute(i):i==="style"?t.style.cssText=e[i]:i==="__value"?t.value=t[i]=e[i]:n[i]&&n[i].set&&Lo.indexOf(i)===-1?t[i]=e[i]:b(t,i,e[i])}function Po(t){return Array.from(t.childNodes)}function Re(t,e){e=""+e,t.data!==e&&(t.data=e)}function Ie(t,e,n,i){n==null?t.style.removeProperty(e):t.style.setProperty(e,n,"")}function ge(t,e,n){t.classList.toggle(e,!!n)}function Ti(t,e,{bubbles:n=!1,cancelable:i=!1}={}){return new CustomEvent(t,{detail:e,bubbles:n,cancelable:i})}function un(t,e){return new t(e)}const cn=new Map;let fn=0;function Io(t){let e=5381,n=t.length;for(;n--;)e=(e<<5)-e^t.charCodeAt(n);return e>>>0}function To(t,e){const n={stylesheet:Do(e),rules:{}};return cn.set(t,n),n}function Ai(t,e,n,i,l,o,r,a=0){const s=16.666/i;let u=`{
`;for(let h=0;h<=1;h+=s){const v=e+(n-e)*o(h);u+=h*100+`%{${r(v,1-v)}}
`}const c=u+`100% {${r(n,1-n)}}
}`,f=`__svelte_${Io(c)}_${a}`,p=Ii(t),{stylesheet:m,rules:d}=cn.get(p)||To(p,t);d[f]||(d[f]=!0,m.insertRule(`@keyframes ${f} ${c}`,m.cssRules.length));const g=t.style.animation||"";return t.style.animation=`${g?`${g}, `:""}${f} ${i}ms linear ${l}ms 1 both`,fn+=1,f}function Ao(t,e){const n=(t.style.animation||"").split(", "),i=n.filter(e?o=>o.indexOf(e)<0:o=>o.indexOf("__svelte")===-1),l=n.length-i.length;l&&(t.style.animation=i.join(", "),fn-=l,fn||Oo())}function Oo(){On(()=>{fn||(cn.forEach(t=>{const{ownerNode:e}=t.stylesheet;e&&Y(e)}),cn.clear())})}let Rt;function Bt(t){Rt=t}function dn(){if(!Rt)throw new Error("Function called outside component initialization");return Rt}function pt(t){dn().$$.on_mount.push(t)}function Mo(t){dn().$$.after_update.push(t)}function Nn(t){dn().$$.on_destroy.push(t)}function Oi(){const t=dn();return(e,n,{cancelable:i=!1}={})=>{const l=t.$$.callbacks[e];if(l){const o=Ti(e,n,{cancelable:i});return l.slice().forEach(r=>{r.call(t,o)}),!o.defaultPrevented}return!0}}const ht=[],we=[];let mt=[];const Mi=[],Ni=Promise.resolve();let Fn=!1;function Fi(){Fn||(Fn=!0,Ni.then(Ri))}function Rn(){return Fi(),Ni}function Ht(t){mt.push(t)}const Bn=new Set;let gt=0;function Ri(){if(gt!==0)return;const t=Rt;do{try{for(;gt<ht.length;){const e=ht[gt];gt++,Bt(e),No(e.$$)}}catch(e){throw ht.length=0,gt=0,e}for(Bt(null),ht.length=0,gt=0;we.length;)we.pop()();for(let e=0;e<mt.length;e+=1){const n=mt[e];Bn.has(n)||(Bn.add(n),n())}mt.length=0}while(ht.length);for(;Mi.length;)Mi.pop()();Fn=!1,Bn.clear(),Bt(t)}function No(t){if(t.fragment!==null){t.update(),Fe(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(Ht)}}function Fo(t){const e=[],n=[];mt.forEach(i=>t.indexOf(i)===-1?e.push(i):n.push(i)),n.forEach(i=>i()),mt=e}let Wt;function Ro(){return Wt||(Wt=Promise.resolve(),Wt.then(()=>{Wt=null})),Wt}function Hn(t,e,n){t.dispatchEvent(Ti(`${e?"intro":"outro"}${n}`))}const pn=new Set;let Ue;function bt(){Ue={r:0,c:[],p:Ue}}function vt(){Ue.r||Fe(Ue.c),Ue=Ue.p}function $(t,e){t&&t.i&&(pn.delete(t),t.i(e))}function ne(t,e,n,i){if(t&&t.o){if(pn.has(t))return;pn.add(t),Ue.c.push(()=>{pn.delete(t),i&&(n&&t.d(1),i())}),t.o(e)}else i&&i()}const Bo={duration:0};function Bi(t,e,n,i){let o=e(t,n,{direction:"both"}),r=i?0:1,a=null,s=null,u=null,c;function f(){u&&Ao(t,u)}function p(d,g){const h=d.b-r;return g*=Math.abs(h),{a:r,b:d.b,d:h,duration:g,start:d.start,end:d.start+g,group:d.group}}function m(d){const{delay:g=0,duration:h=300,easing:v=Ei,tick:C=pe,css:D}=o||Bo,k={start:ko()+g,b:d};d||(k.group=Ue,Ue.r+=1),"inert"in t&&(d?c!==void 0&&(t.inert=c):(c=t.inert,t.inert=!0)),a||s?s=k:(D&&(f(),u=Ai(t,r,d,h,g,v,D)),d&&C(0,1),a=p(k,h),Ht(()=>Hn(t,d,"start")),So(E=>{if(s&&E>s.start&&(a=p(s,h),s=null,Hn(t,a.b,"start"),D&&(f(),u=Ai(t,r,a.b,a.duration,0,v,o.css))),a){if(E>=a.end)C(r=a.b,1-r),Hn(t,a.b,"end"),s||(a.b?f():--a.group.r||Fe(a.group.c)),a=null;else if(E>=a.start){const I=E-a.start;r=a.a+a.d*v(I/a.duration),C(r,1-r)}}return!!(a||s)}))}return{run(d){rn(o)?Ro().then(()=>{o=o({direction:d?"in":"out"}),m(d)}):m(d)},end(){f(),a=s=null}}}function ce(t){return(t==null?void 0:t.length)!==void 0?t:Array.from(t)}function _t(t,e){t.d(1),e.delete(t.key)}function yt(t,e,n,i,l,o,r,a,s,u,c,f){let p=t.length,m=o.length,d=p;const g={};for(;d--;)g[t[d].key]=d;const h=[],v=new Map,C=new Map,D=[];for(d=m;d--;){const w=f(l,o,d),P=n(w);let _=r.get(P);_?D.push(()=>_.p(w,e)):(_=u(P,w),_.c()),v.set(P,h[d]=_),P in g&&C.set(P,Math.abs(d-g[P]))}const k=new Set,E=new Set;function I(w){$(w,1),w.m(a,c),r.set(w.key,w),c=w.first,m--}for(;p&&m;){const w=h[m-1],P=t[p-1],_=w.key,L=P.key;w===P?(c=w.first,p--,m--):v.has(L)?!r.has(_)||k.has(_)?I(w):E.has(L)?p--:C.get(_)>C.get(L)?(E.add(_),I(w)):(k.add(L),p--):(s(P,r),p--)}for(;p--;){const w=t[p];v.has(w.key)||s(w,r)}for(;m;)I(h[m-1]);return Fe(D),h}function hn(t,e){const n={},i={},l={$$scope:1};let o=t.length;for(;o--;){const r=t[o],a=e[o];if(a){for(const s in r)s in a||(i[s]=1);for(const s in a)l[s]||(n[s]=a[s],l[s]=1);t[o]=a}else for(const s in r)l[s]=1}for(const r in i)r in n||(n[r]=void 0);return n}function Ce(t){t&&t.c()}function Ee(t,e,n){const{fragment:i,after_update:l}=t.$$;i&&i.m(e,n),Ht(()=>{const o=t.$$.on_mount.map(ki).filter(rn);t.$$.on_destroy?t.$$.on_destroy.push(...o):Fe(o),t.$$.on_mount=[]}),l.forEach(Ht)}function ke(t,e){const n=t.$$;n.fragment!==null&&(Fo(n.after_update),Fe(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function Ho(t,e){t.$$.dirty[0]===-1&&(ht.push(t),Fi(),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function be(t,e,n,i,l,o,r=null,a=[-1]){const s=Rt;Bt(t);const u=t.$$={fragment:null,ctx:[],props:o,update:pe,not_equal:l,bound:Si(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(s?s.$$.context:[])),callbacks:Si(),dirty:a,skip_bound:!1,root:e.target||s.$$.root};r&&r(u.root);let c=!1;if(u.ctx=n?n(t,e.props||{},(f,p,...m)=>{const d=m.length?m[0]:p;return u.ctx&&l(u.ctx[f],u.ctx[f]=d)&&(!u.skip_bound&&u.bound[f]&&u.bound[f](d),c&&Ho(t,f)),p}):[],u.update(),c=!0,Fe(u.before_update),u.fragment=i?i(u.ctx):!1,e.target){if(e.hydrate){const f=Po(e.target);u.fragment&&u.fragment.l(f),f.forEach(Y)}else u.fragment&&u.fragment.c();e.intro&&$(t.$$.fragment),Ee(t,e.target,e.anchor),Ri()}Bt(s)}class ve{constructor(){ai(this,"$$");ai(this,"$$set")}$destroy(){ke(this,1),this.$destroy=pe}$on(e,n){if(!rn(n))return pe;const i=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return i.push(n),()=>{const l=i.indexOf(n);l!==-1&&i.splice(l,1)}}$set(e){this.$$set&&!Eo(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}const Wo="4",wt=[];function nt(t,e=pe){let n;const i=new Set;function l(a){if(ue(t,a)&&(t=a,n)){const s=!wt.length;for(const u of i)u[1](),wt.push(u,t);if(s){for(let u=0;u<wt.length;u+=2)wt[u][0](wt[u+1]);wt.length=0}}}function o(a){l(a(t))}function r(a,s=pe){const u=[a,s];return i.add(u),i.size===1&&(n=e(l,o)||pe),a(t),()=>{i.delete(u),i.size===0&&n&&(n(),n=null)}}return{set:l,update:o,subscribe:r}}const Wn=nt({}),R={setTranslations(t){Wn.set(t)},has(t,e,n){let i=!1;return Wn.subscribe(l=>{if(n in l&&e in l[n]&&t in l[n][e]){i=!0;return}})(),i},get(t,e,n){let i=n;return Wn.subscribe(l=>{if(t in l&&e in l[t]&&n in l[t][e]){i=l[t][e][n];return}if(t in l&&e in l[t]&&n in l[t][e]){i=l[t][e][n];return}if(t=="Global"){i=n;return}i=null})(),i},translate(t,e=null,n=null){n=n||"Global",e=e||"labels";let i=R.get(n,e,t);return i===null&&n!="Global"&&(i=R.get("Global",e,t)),i},translateOption(t,e,n=null){let i=R.translate(e,"options",n);return i===null?"":typeof i=="object"?i[t]:t}},Hi=nt({}),jn={set(t){Hi.set(t)},get(){let t=null;return Hi.subscribe(e=>{e&&(t=e)})(),t}},zn=nt(),Ge={setNotifier(t){zn.set(t)},notify(t,e=null,n=2e3){zn.subscribe(i=>{i&&i.notify(t,e,2e3)})()},confirm(t=null,e=null,n){zn.subscribe(i=>{if(i){let l=null,o=null,r=null;typeof t=="string"||t instanceof String?(o=t,r=R.translate("Yes")):(t=t||{},o=t.message,r=t.confirmText,l=t.confirmStyle||null),i.confirm(o,{confirmText:r,cancelText:R.translate("Cancel"),confirmStyle:l},e,n)}})()}},mn=nt(),Ve={setLayoutManager(t){mn.set(t)},resetToDefault(t,e,n,i,l){let o=null;return mn.subscribe(r=>{r&&(o=r.resetToDefault(t,e,n,i,l))})(),o},get:function(t,e,n,i,l,o){let r=null;return mn.subscribe(a=>{a&&(r=a.get(t,e,n,i,l,o))})(),r},set:function(t,e,n,i,l,o){let r=null;return mn.subscribe(a=>{a&&(r=a.set(t,e,n,i,l,o))})(),r}},Wi=nt(),Le={setMetadata(t){Wi.set(t)},get(t){let e=null;return Wi.subscribe(n=>{n&&(e=n.get(t))})(),e}},ji=nt(),jt={setModelFactory(t){ji.set(t)},create(t,e){ji.subscribe(n=>{n&&n.create(t,e)})()}},zi=nt(),jo={setConfig(t){zi.set(t)},get(t){let e=null;return zi.subscribe(n=>{n&&(e=n.get(t))})(),e}},zt=nt(),Gt={setStorage(t){zt.set(t)},get(t,e){let n=null;return zt.subscribe(i=>{i&&(n=i.get(t,e))})(),n},has(t,e){let n=null;return zt.subscribe(i=>{i&&(n=i.has(t,e))})(),n},clear(t,e){zt.subscribe(n=>{n&&n.clear(t,e)})()},set(t,e,n){zt.subscribe(i=>{i&&i.set(t,e,n)})()}};typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(Wo);function Gi(t){let e,n,i,l,o,r,a,s,u,c,f,p,m,d,g;function h(D,k){return D[2]?Go:zo}let v=h(t),C=v(t);return{c(){e=S("div"),n=S("div"),i=S("div"),l=S("span"),l.textContent=`${R.translate("jobManager")}`,o=H(),r=S("span"),a=S("a"),a.innerHTML='<span aria-hidden="true">×</span>',s=H(),C.c(),u=H(),c=S("a"),c.textContent=`${R.translate("View List")}`,f=H(),p=S("div"),m=S("div"),m.textContent=`${R.translate("Loading...")}`,b(l,"class","panel-heading-title"),b(a,"href","/"),b(a,"class","close svelte-1p6ppx8"),b(c,"href","#Job"),b(c,"title",R.translate("View List")),b(c,"class","qp-view-list svelte-1p6ppx8"),b(r,"class","pull-right"),b(i,"class","panel-heading clearfix"),b(m,"class","list-container"),b(p,"class","panel-body"),b(n,"class","panel panel-default"),b(e,"class","queue-panel-container")},m(D,k){U(D,e,k),y(e,n),y(n,i),y(i,l),y(i,o),y(i,r),y(r,a),y(r,s),C.m(r,null),y(r,u),y(r,c),y(n,f),y(n,p),y(p,m),t[9](e),d||(g=te(a,"click",t[6]),d=!0)},p(D,k){v===(v=h(D))&&C?C.p(D,k):(C.d(1),C=v(D),C&&(C.c(),C.m(r,u)))},d(D){D&&Y(e),C.d(),t[9](null),d=!1,g()}}}function zo(t){let e,n,i;return{c(){e=S("a"),e.textContent=`${R.translate("Pause")}`,b(e,"href","/"),b(e,"title",R.translate("Pause")),b(e,"class","qm-button")},m(l,o){U(l,e,o),n||(i=te(e,"click",t[8]),n=!0)},p:pe,d(l){l&&Y(e),n=!1,i()}}}function Go(t){let e,n,i;return{c(){e=S("a"),e.textContent=`${R.translate("Start")}`,b(e,"href","/"),b(e,"title",R.translate("Start")),b(e,"class","qm-button")},m(l,o){U(l,e,o),n||(i=te(e,"click",t[7]),n=!0)},p:pe,d(l){l&&Y(e),n=!1,i()}}}function qo(t){let e,n=t[0]&&Gi(t);return{c(){n&&n.c(),e=Ft()},m(i,l){n&&n.m(i,l),U(i,e,l)},p(i,[l]){i[0]?n?n.p(i,l):(n=Gi(i),n.c(),n.m(e.parentNode,e)):n&&(n.d(1),n=null)},i:pe,o:pe,d(i){i&&Y(e),n&&n.d(i)}}}function Xo(t,e,n){let{isOpen:i=!1}=e,{close:l}=e,{icon:o}=e,r=!1;window.addEventListener("publicDataFetched",d=>{n(2,r=!!d.detail.qmPaused)});let a;function s(d){a&&!a.contains(d.target)&&o&&!o.contains(d.target)&&i===!0&&l()}pt(()=>{document.addEventListener("click",s)}),Nn(()=>{document.removeEventListener("click",s)});async function u(d){let g=jn.get();if(g)try{const h=await fetch("/api/v1/App/action/QueueManagerUpdate",{method:"POST",headers:{"Content-Type":"application/json","Authorization-Token":btoa(g.user.userName+":"+g.token)},body:JSON.stringify({pause:d})});if(!h.ok)throw new Error("Network response was not ok");await h.json(),Ge.notify("Done","success")}catch(h){console.error("Error:",h)}}const c=d=>{d.preventDefault(),l()},f=d=>{d.preventDefault(),u(!1)},p=d=>{d.preventDefault(),u(!0)};function m(d){we[d?"unshift":"push"](()=>{a=d,n(3,a)})}return t.$$set=d=>{"isOpen"in d&&n(0,i=d.isOpen),"close"in d&&n(1,l=d.close),"icon"in d&&n(5,o=d.icon)},[i,l,r,a,u,o,c,f,p,m]}class Yo extends ve{constructor(e){super(),be(this,e,Xo,qo,ue,{isOpen:0,close:1,icon:5})}}function qi(t){let e;return{c(){e=S("span"),b(e,"class","fas fa-pause-circle pause-icon")},m(n,i){U(n,e,i)},d(n){n&&Y(e)}}}function Uo(t){let e,n,i,l,o,r,a,s,u=t[2]&&qi();return o=new Yo({props:{icon:t[0],isOpen:t[1],close:t[4]}}),{c(){e=S("a"),n=S("span"),i=H(),u&&u.c(),l=H(),Ce(o.$$.fragment),b(n,"class","fas fa-tasks"),b(e,"href","/"),b(e,"class","notifications-button")},m(c,f){U(c,e,f),y(e,n),y(e,i),u&&u.m(e,null),t[6](e),U(c,l,f),Ee(o,c,f),r=!0,a||(s=te(e,"click",t[7]),a=!0)},p(c,[f]){c[2]?u||(u=qi(),u.c(),u.m(e,null)):u&&(u.d(1),u=null);const p={};f&1&&(p.icon=c[0]),f&2&&(p.isOpen=c[1]),o.$set(p)},i(c){r||($(o.$$.fragment,c),r=!0)},o(c){ne(o.$$.fragment,c),r=!1},d(c){c&&(Y(e),Y(l)),u&&u.d(),t[6](null),ke(o,c),a=!1,s()}}}function Vo(t,e,n){let{renderTable:i=()=>{}}=e,l,o=!1,r=!1;window.addEventListener("publicDataFetched",f=>{n(2,r=!!f.detail.qmPaused)});function a(){o||(n(1,o=!0),i())}function s(){n(1,o=!1),window.dispatchEvent(new Event("jobManagerPanelClosed"))}function u(f){we[f?"unshift":"push"](()=>{l=f,n(0,l)})}const c=f=>{f.preventDefault(),a()};return t.$$set=f=>{"renderTable"in f&&n(5,i=f.renderTable)},[l,o,r,a,s,i,u,c]}class Jo extends ve{constructor(e){super(),be(this,e,Vo,Uo,ue,{renderTable:5})}}function Ko(t){let e,n=`${t[0]}px`,i=`${t[0]}px`,l=`${t[1]}px`;return{c(){e=S("div"),b(e,"class","loading-icon spinner svelte-yw8t7l"),Ie(e,"width",n),Ie(e,"height",i),Ie(e,"border-width",l)},m(o,r){U(o,e,r)},p(o,[r]){r&1&&n!==(n=`${o[0]}px`)&&Ie(e,"width",n),r&1&&i!==(i=`${o[0]}px`)&&Ie(e,"height",i),r&2&&l!==(l=`${o[1]}px`)&&Ie(e,"border-width",l)},i:pe,o:pe,d(o){o&&Y(e)}}}function Qo(t,e,n){let{size:i=40}=e,{thickness:l=4}=e;return t.$$set=o=>{"size"in o&&n(0,i=o.size),"thickness"in o&&n(1,l=o.thickness)},[i,l]}class Zo extends ve{constructor(e){super(),be(this,e,Qo,Ko,ue,{size:0,thickness:1})}}function Xi(t){let e,n;return{c(){e=S("img"),Di(e.src,n=t[1])||b(e,"src",n),b(e,"class","logo"),b(e,"alt",t[0])},m(i,l){U(i,e,l)},p(i,l){l&2&&!Di(e.src,n=i[1])&&b(e,"src",n),l&1&&b(e,"alt",i[0])},d(i){i&&Y(e)}}}function Yi(t){let e,n,i;return{c(){e=S("a"),n=S("i"),i=ae("Recovery Instructions"),b(n,"class","fa fa-history svelte-1qmezxs"),b(e,"href",t[2]),b(e,"target","_blank"),b(e,"class","btn btn-default svelte-1qmezxs"),b(e,"role","button"),Ie(e,"float","right")},m(l,o){U(l,e,o),y(e,n),y(e,i)},p(l,o){o&4&&b(e,"href",l[2])},d(l){l&&Y(e)}}}function Ui(t){let e,n,i,l,o,r;return{c(){e=S("hr"),n=H(),i=S("pre"),l=ae(t[3]),b(i,"class","logs-container svelte-1qmezxs")},m(a,s){U(a,e,s),U(a,n,s),U(a,i,s),y(i,l),t[11](i),o||(r=te(i,"scroll",t[8]),o=!0)},p(a,s){s&8&&Re(l,a[3])},d(a){a&&(Y(e),Y(n),Y(i)),t[11](null),o=!1,r()}}}function xo(t){let e,n,i,l,o,r,a,s,u,c,f,p,m,d,g,h,v,C,D=t[4]?"Hide":"Show",k,E,I,w,P,_,L,j,O=t[1]&&Xi(t);c=new Zo({props:{size:"40",thickness:"5"}});let G=t[2]&&Yi(t),M=t[4]&&t[3]&&Ui(t);return{c(){e=S("div"),n=S("div"),i=S("div"),O&&O.c(),l=H(),o=S("div"),r=S("div"),a=S("h3"),a.textContent="System is updating...",s=H(),u=S("section"),Ce(c.$$.fragment),f=H(),p=S("h5"),m=ae(t[5]),d=H(),g=S("section"),h=S("div"),v=S("button"),C=S("i"),k=ae(D),E=ae(" logs"),w=H(),G&&G.c(),P=H(),M&&M.c(),b(i,"class","logo-container"),b(n,"class","panel-heading"),b(p,"class","svelte-1qmezxs"),b(u,"class","progress-section svelte-1qmezxs"),b(C,"class","fa fa-list svelte-1qmezxs"),b(v,"class","btn btn-default svelte-1qmezxs"),v.disabled=I=!t[3],b(h,"class","buttons"),b(g,"class","logs-section"),b(r,"class","form-group"),b(o,"class","panel-body"),b(e,"id","login"),b(e,"class","panel panel-default panel-updating")},m(T,q){U(T,e,q),y(e,n),y(n,i),O&&O.m(i,null),y(e,l),y(e,o),y(o,r),y(r,a),y(r,s),y(r,u),Ee(c,u,null),y(u,f),y(u,p),y(p,m),y(r,d),y(r,g),y(g,h),y(h,v),y(v,C),y(v,k),y(v,E),y(h,w),G&&G.m(h,null),y(g,P),M&&M.m(g,null),_=!0,L||(j=te(v,"click",t[7]),L=!0)},p(T,[q]){T[1]?O?O.p(T,q):(O=Xi(T),O.c(),O.m(i,null)):O&&(O.d(1),O=null),(!_||q&32)&&Re(m,T[5]),(!_||q&16)&&D!==(D=T[4]?"Hide":"Show")&&Re(k,D),(!_||q&8&&I!==(I=!T[3]))&&(v.disabled=I),T[2]?G?G.p(T,q):(G=Yi(T),G.c(),G.m(h,null)):G&&(G.d(1),G=null),T[4]&&T[3]?M?M.p(T,q):(M=Ui(T),M.c(),M.m(g,null)):M&&(M.d(1),M=null)},i(T){_||($(c.$$.fragment,T),_=!0)},o(T){ne(c.$$.fragment,T),_=!1},d(T){T&&Y(e),O&&O.d(),ke(c),G&&G.d(),M&&M.d(),L=!1,j()}}}function $o(t){return t.replace(/^\d{2,4}.\d{2}.\d{2,4} \d{2}:\d{2}:\d{2}/g,"").replace(/^[\-\|\s]+/,"")}function er(t,e,n){let{applicationName:i="AtroCore"}=e,{logoPath:l=null}=e,{logFilePath:o}=e,{restoreLink:r=null}=e,a=!1,s=!1,u=0,c=!0,f="",p,m;Mo(()=>{m&&c&&m.scrollTo(0,m.scrollHeight)});function d(){n(4,a=!a),a||(c=!0)}function g(v){const C=v.currentTarget;c=C.scrollHeight-C.scrollTop===C.clientHeight}setInterval(async()=>{try{const v=await fetch(o,{cache:"no-store"});u+=1,v.ok?(n(3,f=(await v.text()).trim()),f.search("composer")>=0&&n(10,s=!0),u>65&&!s&&n(3,f="Something wrong. Please, reboot the server.")):s?setTimeout(()=>{location.reload()},2e3):u>65&&n(3,f="Something wrong. Please, reboot the server.")}catch(v){console.error("Error: ",v)}},1e3);function h(v){we[v?"unshift":"push"](()=>{m=v,n(6,m)})}return t.$$set=v=>{"applicationName"in v&&n(0,i=v.applicationName),"logoPath"in v&&n(1,l=v.logoPath),"logFilePath"in v&&n(9,o=v.logFilePath),"restoreLink"in v&&n(2,r=v.restoreLink)},t.$$.update=()=>{if(t.$$.dirty&1032)if(f){const v=f.trim().split(`
`);n(5,p=$o(v.pop()))}else s?n(5,p=""):n(5,p="Starting...")},[i,l,r,f,a,p,m,d,g,o,s,h]}class tr extends ve{constructor(e){super(),be(this,e,er,xo,ue,{applicationName:0,logoPath:1,logFilePath:9,restoreLink:2})}}function Vi(t,e,n){const i=t.slice();return i[19]=e[n],i}function Ji(t){let e,n=t[19].label+"",i,l,o,r,a,s;function u(){return t[12](t[19])}return{c(){e=S("button"),i=ae(n),l=H(),b(e,"data-action",o=t[19].name),e.disabled=t[1],b(e,"type","button"),b(e,"class",r=`btn action btn-${t[19].style??"default"}`)},m(c,f){U(c,e,f),y(e,i),y(e,l),a||(s=te(e,"click",u),a=!0)},p(c,f){t=c,f&1&&n!==(n=t[19].label+"")&&Re(i,n),f&1&&o!==(o=t[19].name)&&b(e,"data-action",o),f&2&&(e.disabled=t[1]),f&1&&r!==(r=`btn action btn-${t[19].style??"default"}`)&&b(e,"class",r)},d(c){c&&Y(e),a=!1,s()}}}function nr(t){let e,n,i,l=ce(t[0]),o=[];for(let s=0;s<l.length;s+=1)o[s]=Ji(Vi(t,l,s));const r=t[11].default,a=At(r,t,t[10],null);return{c(){e=S("div");for(let s=0;s<o.length;s+=1)o[s].c();n=H(),a&&a.c(),b(e,"class","button-container"),Ie(e,"padding-top","10px")},m(s,u){U(s,e,u);for(let c=0;c<o.length;c+=1)o[c]&&o[c].m(e,null);t[13](e),U(s,n,u),a&&a.m(s,u),i=!0},p(s,[u]){if(u&11){l=ce(s[0]);let c;for(c=0;c<l.length;c+=1){const f=Vi(s,l,c);o[c]?o[c].p(f,u):(o[c]=Ji(f),o[c].c(),o[c].m(e,null))}for(;c<o.length;c+=1)o[c].d(1);o.length=l.length}a&&a.p&&(!i||u&1024)&&Mt(a,r,s,s[10],i?Ot(r,s[10],u,null):Nt(s[10]),null)},i(s){i||($(a,s),i=!0)},o(s){ne(a,s),i=!1},d(s){s&&(Y(e),Y(n)),sn(o,s),t[13](null),a&&a.d(s)}}}function ir(t,e,n){let{$$slots:i={},$$scope:l}=e,{params:o}=e,{fetch:r}=e,a,{loadLayout:s=()=>{Ve.get(scope,type,layoutProfileId,E=>{n(9,a=E.layout)},!1)}}=e,{validate:u=()=>!0}=e,c=!1,f=[],p;o.layoutProfiles,pt(async()=>{var I;m(),await Rn();const E=document.querySelector("#layout-buttons");p&&E&&o.inModal&&((I=E.closest(".modal-body"))==null||I.classList.add("modal-layout-manager"),E.appendChild(p))});function m(){Ge.notify("Loading..."),s(E=>{n(9,a=E),Ge.notify(!1),o.afterRender&&o.afterRender()})}function d(){n(1,c=!0);const E=r();if(!u(E)){n(1,c=!1);return}if(Ge.notify("Saving..."),o.inModal&&!o.getActiveLayoutProfileId()){g(!0);return}Ve.set(o.scope,o.type,o.relatedScope,o.layoutProfileId,E,()=>{Ge.notify("Saved","success",2e3),g(!1),n(1,c=!1),o.inModal||s()})}function g(E){o.onUpdate&&o.onUpdate(E)}function h(){s()}function v(){Ge.confirm("Are you sure you want to reset this layout?",()=>{var E;Ve.resetToDefault(o.scope,o.type,o.relatedScope,(E=a.storedProfile)==null?void 0:E.id,()=>{g(!0),h()})})}function C(E){switch(E.name){case"save":d();break;case"cancel":h();break;case"reset":v();break;case"fullEdit":window.open(`#Admin/layouts/scope=${o.scope}&type=${o.type}${o.relatedScope?"&relatedScope="+o.relatedScope:""}${o.layoutProfileId?"&layoutProfileId="+o.layoutProfileId:""}`,"_blank");break}}const D=E=>C(E);function k(E){we[E?"unshift":"push"](()=>{p=E,n(2,p)})}return t.$$set=E=>{"params"in E&&n(4,o=E.params),"fetch"in E&&n(5,r=E.fetch),"loadLayout"in E&&n(6,s=E.loadLayout),"validate"in E&&n(7,u=E.validate),"$$scope"in E&&n(10,l=E.$$scope)},t.$$.update=()=>{if(t.$$.dirty&529){if(n(0,f=[{name:"cancel",label:R.translate("Cancel","labels")}]),o.inModal){let E=jn.get();E&&E.user&&E.user.isAdmin&&f.push({name:"fullEdit",label:R.translate("Full Edit","labels","LayoutManager")})}(!o.inModal||a!=null&&a.canEdit)&&f.unshift({name:"save",label:R.translate("Save","labels"),style:"primary"}),a&&a.storedProfile&&a.storedProfile.id===o.layoutProfileId&&a.canEdit&&f.push({name:"reset",label:R.translate("reset","labels","LayoutManager")})}},[f,c,p,C,o,r,s,u,d,a,l,i,D,k]}let Ki=class extends ve{constructor(e){super(),be(this,e,ir,nr,ue,{params:4,fetch:5,loadLayout:6,validate:7,save:8})}get save(){return this.$$.ctx[8]}};/**!
 * Sortable 1.15.6
 * @author	RubaXa   <trash@rubaxa.org>
 * @author	owenm    <owen23355@gmail.com>
 * @license MIT
 */function Qi(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(l){return Object.getOwnPropertyDescriptor(t,l).enumerable})),n.push.apply(n,i)}return n}function qe(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Qi(Object(n),!0).forEach(function(i){lr(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Qi(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function gn(t){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?gn=function(e){return typeof e}:gn=function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},gn(t)}function lr(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Je(){return Je=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},Je.apply(this,arguments)}function or(t,e){if(t==null)return{};var n={},i=Object.keys(t),l,o;for(o=0;o<i.length;o++)l=i[o],!(e.indexOf(l)>=0)&&(n[l]=t[l]);return n}function rr(t,e){if(t==null)return{};var n=or(t,e),i,l;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(l=0;l<o.length;l++)i=o[l],!(e.indexOf(i)>=0)&&Object.prototype.propertyIsEnumerable.call(t,i)&&(n[i]=t[i])}return n}var ar="1.15.6";function Ke(t){if(typeof window<"u"&&window.navigator)return!!navigator.userAgent.match(t)}var Qe=Ke(/(?:Trident.*rv[ :]?11\.|msie|iemobile|Windows Phone)/i),qt=Ke(/Edge/i),Zi=Ke(/firefox/i),Xt=Ke(/safari/i)&&!Ke(/chrome/i)&&!Ke(/android/i),Gn=Ke(/iP(ad|od|hone)/i),xi=Ke(/chrome/i)&&Ke(/android/i),$i={capture:!1,passive:!1};function x(t,e,n){t.addEventListener(e,n,!Qe&&$i)}function Z(t,e,n){t.removeEventListener(e,n,!Qe&&$i)}function bn(t,e){if(e){if(e[0]===">"&&(e=e.substring(1)),t)try{if(t.matches)return t.matches(e);if(t.msMatchesSelector)return t.msMatchesSelector(e);if(t.webkitMatchesSelector)return t.webkitMatchesSelector(e)}catch{return!1}return!1}}function el(t){return t.host&&t!==document&&t.host.nodeType?t.host:t.parentNode}function We(t,e,n,i){if(t){n=n||document;do{if(e!=null&&(e[0]===">"?t.parentNode===n&&bn(t,e):bn(t,e))||i&&t===n)return t;if(t===n)break}while(t=el(t))}return null}var tl=/\s+/g;function Me(t,e,n){if(t&&e)if(t.classList)t.classList[n?"add":"remove"](e);else{var i=(" "+t.className+" ").replace(tl," ").replace(" "+e+" "," ");t.className=(i+(n?" "+e:"")).replace(tl," ")}}function V(t,e,n){var i=t&&t.style;if(i){if(n===void 0)return document.defaultView&&document.defaultView.getComputedStyle?n=document.defaultView.getComputedStyle(t,""):t.currentStyle&&(n=t.currentStyle),e===void 0?n:n[e];!(e in i)&&e.indexOf("webkit")===-1&&(e="-webkit-"+e),i[e]=n+(typeof n=="string"?"":"px")}}function Et(t,e){var n="";if(typeof t=="string")n=t;else do{var i=V(t,"transform");i&&i!=="none"&&(n=i+" "+n)}while(!e&&(t=t.parentNode));var l=window.DOMMatrix||window.WebKitCSSMatrix||window.CSSMatrix||window.MSCSSMatrix;return l&&new l(n)}function nl(t,e,n){if(t){var i=t.getElementsByTagName(e),l=0,o=i.length;if(n)for(;l<o;l++)n(i[l],l);return i}return[]}function Xe(){var t=document.scrollingElement;return t||document.documentElement}function fe(t,e,n,i,l){if(!(!t.getBoundingClientRect&&t!==window)){var o,r,a,s,u,c,f;if(t!==window&&t.parentNode&&t!==Xe()?(o=t.getBoundingClientRect(),r=o.top,a=o.left,s=o.bottom,u=o.right,c=o.height,f=o.width):(r=0,a=0,s=window.innerHeight,u=window.innerWidth,c=window.innerHeight,f=window.innerWidth),(e||n)&&t!==window&&(l=l||t.parentNode,!Qe))do if(l&&l.getBoundingClientRect&&(V(l,"transform")!=="none"||n&&V(l,"position")!=="static")){var p=l.getBoundingClientRect();r-=p.top+parseInt(V(l,"border-top-width")),a-=p.left+parseInt(V(l,"border-left-width")),s=r+o.height,u=a+o.width;break}while(l=l.parentNode);if(i&&t!==window){var m=Et(l||t),d=m&&m.a,g=m&&m.d;m&&(r/=g,a/=d,f/=d,c/=g,s=r+c,u=a+f)}return{top:r,left:a,bottom:s,right:u,width:f,height:c}}}function il(t,e,n){for(var i=it(t,!0),l=fe(t)[e];i;){var o=fe(i)[n],r=void 0;if(r=l>=o,!r)return i;if(i===Xe())break;i=it(i,!1)}return!1}function kt(t,e,n,i){for(var l=0,o=0,r=t.children;o<r.length;){if(r[o].style.display!=="none"&&r[o]!==z.ghost&&(i||r[o]!==z.dragged)&&We(r[o],n.draggable,t,!1)){if(l===e)return r[o];l++}o++}return null}function qn(t,e){for(var n=t.lastElementChild;n&&(n===z.ghost||V(n,"display")==="none"||e&&!bn(n,e));)n=n.previousElementSibling;return n||null}function Be(t,e){var n=0;if(!t||!t.parentNode)return-1;for(;t=t.previousElementSibling;)t.nodeName.toUpperCase()!=="TEMPLATE"&&t!==z.clone&&(!e||bn(t,e))&&n++;return n}function ll(t){var e=0,n=0,i=Xe();if(t)do{var l=Et(t),o=l.a,r=l.d;e+=t.scrollLeft*o,n+=t.scrollTop*r}while(t!==i&&(t=t.parentNode));return[e,n]}function sr(t,e){for(var n in t)if(t.hasOwnProperty(n)){for(var i in e)if(e.hasOwnProperty(i)&&e[i]===t[n][i])return Number(n)}return-1}function it(t,e){if(!t||!t.getBoundingClientRect)return Xe();var n=t,i=!1;do if(n.clientWidth<n.scrollWidth||n.clientHeight<n.scrollHeight){var l=V(n);if(n.clientWidth<n.scrollWidth&&(l.overflowX=="auto"||l.overflowX=="scroll")||n.clientHeight<n.scrollHeight&&(l.overflowY=="auto"||l.overflowY=="scroll")){if(!n.getBoundingClientRect||n===document.body)return Xe();if(i||e)return n;i=!0}}while(n=n.parentNode);return Xe()}function ur(t,e){if(t&&e)for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t}function Xn(t,e){return Math.round(t.top)===Math.round(e.top)&&Math.round(t.left)===Math.round(e.left)&&Math.round(t.height)===Math.round(e.height)&&Math.round(t.width)===Math.round(e.width)}var Yt;function ol(t,e){return function(){if(!Yt){var n=arguments,i=this;n.length===1?t.call(i,n[0]):t.apply(i,n),Yt=setTimeout(function(){Yt=void 0},e)}}}function cr(){clearTimeout(Yt),Yt=void 0}function rl(t,e,n){t.scrollLeft+=e,t.scrollTop+=n}function al(t){var e=window.Polymer,n=window.jQuery||window.Zepto;return e&&e.dom?e.dom(t).cloneNode(!0):n?n(t).clone(!0)[0]:t.cloneNode(!0)}function sl(t,e,n){var i={};return Array.from(t.children).forEach(function(l){var o,r,a,s;if(!(!We(l,e.draggable,t,!1)||l.animated||l===n)){var u=fe(l);i.left=Math.min((o=i.left)!==null&&o!==void 0?o:1/0,u.left),i.top=Math.min((r=i.top)!==null&&r!==void 0?r:1/0,u.top),i.right=Math.max((a=i.right)!==null&&a!==void 0?a:-1/0,u.right),i.bottom=Math.max((s=i.bottom)!==null&&s!==void 0?s:-1/0,u.bottom)}}),i.width=i.right-i.left,i.height=i.bottom-i.top,i.x=i.left,i.y=i.top,i}var Te="Sortable"+new Date().getTime();function fr(){var t=[],e;return{captureAnimationState:function(){if(t=[],!!this.options.animation){var i=[].slice.call(this.el.children);i.forEach(function(l){if(!(V(l,"display")==="none"||l===z.ghost)){t.push({target:l,rect:fe(l)});var o=qe({},t[t.length-1].rect);if(l.thisAnimationDuration){var r=Et(l,!0);r&&(o.top-=r.f,o.left-=r.e)}l.fromRect=o}})}},addAnimationState:function(i){t.push(i)},removeAnimationState:function(i){t.splice(sr(t,{target:i}),1)},animateAll:function(i){var l=this;if(!this.options.animation){clearTimeout(e),typeof i=="function"&&i();return}var o=!1,r=0;t.forEach(function(a){var s=0,u=a.target,c=u.fromRect,f=fe(u),p=u.prevFromRect,m=u.prevToRect,d=a.rect,g=Et(u,!0);g&&(f.top-=g.f,f.left-=g.e),u.toRect=f,u.thisAnimationDuration&&Xn(p,f)&&!Xn(c,f)&&(d.top-f.top)/(d.left-f.left)===(c.top-f.top)/(c.left-f.left)&&(s=pr(d,p,m,l.options)),Xn(f,c)||(u.prevFromRect=c,u.prevToRect=f,s||(s=l.options.animation),l.animate(u,d,f,s)),s&&(o=!0,r=Math.max(r,s),clearTimeout(u.animationResetTimer),u.animationResetTimer=setTimeout(function(){u.animationTime=0,u.prevFromRect=null,u.fromRect=null,u.prevToRect=null,u.thisAnimationDuration=null},s),u.thisAnimationDuration=s)}),clearTimeout(e),o?e=setTimeout(function(){typeof i=="function"&&i()},r):typeof i=="function"&&i(),t=[]},animate:function(i,l,o,r){if(r){V(i,"transition",""),V(i,"transform","");var a=Et(this.el),s=a&&a.a,u=a&&a.d,c=(l.left-o.left)/(s||1),f=(l.top-o.top)/(u||1);i.animatingX=!!c,i.animatingY=!!f,V(i,"transform","translate3d("+c+"px,"+f+"px,0)"),this.forRepaintDummy=dr(i),V(i,"transition","transform "+r+"ms"+(this.options.easing?" "+this.options.easing:"")),V(i,"transform","translate3d(0,0,0)"),typeof i.animated=="number"&&clearTimeout(i.animated),i.animated=setTimeout(function(){V(i,"transition",""),V(i,"transform",""),i.animated=!1,i.animatingX=!1,i.animatingY=!1},r)}}}}function dr(t){return t.offsetWidth}function pr(t,e,n,i){return Math.sqrt(Math.pow(e.top-t.top,2)+Math.pow(e.left-t.left,2))/Math.sqrt(Math.pow(e.top-n.top,2)+Math.pow(e.left-n.left,2))*i.animation}var St=[],Yn={initializeByDefault:!0},Ut={mount:function(e){for(var n in Yn)Yn.hasOwnProperty(n)&&!(n in e)&&(e[n]=Yn[n]);St.forEach(function(i){if(i.pluginName===e.pluginName)throw"Sortable: Cannot mount plugin ".concat(e.pluginName," more than once")}),St.push(e)},pluginEvent:function(e,n,i){var l=this;this.eventCanceled=!1,i.cancel=function(){l.eventCanceled=!0};var o=e+"Global";St.forEach(function(r){n[r.pluginName]&&(n[r.pluginName][o]&&n[r.pluginName][o](qe({sortable:n},i)),n.options[r.pluginName]&&n[r.pluginName][e]&&n[r.pluginName][e](qe({sortable:n},i)))})},initializePlugins:function(e,n,i,l){St.forEach(function(a){var s=a.pluginName;if(!(!e.options[s]&&!a.initializeByDefault)){var u=new a(e,n,e.options);u.sortable=e,u.options=e.options,e[s]=u,Je(i,u.defaults)}});for(var o in e.options)if(e.options.hasOwnProperty(o)){var r=this.modifyOption(e,o,e.options[o]);typeof r<"u"&&(e.options[o]=r)}},getEventProperties:function(e,n){var i={};return St.forEach(function(l){typeof l.eventProperties=="function"&&Je(i,l.eventProperties.call(n[l.pluginName],e))}),i},modifyOption:function(e,n,i){var l;return St.forEach(function(o){e[o.pluginName]&&o.optionListeners&&typeof o.optionListeners[n]=="function"&&(l=o.optionListeners[n].call(e[o.pluginName],i))}),l}};function hr(t){var e=t.sortable,n=t.rootEl,i=t.name,l=t.targetEl,o=t.cloneEl,r=t.toEl,a=t.fromEl,s=t.oldIndex,u=t.newIndex,c=t.oldDraggableIndex,f=t.newDraggableIndex,p=t.originalEvent,m=t.putSortable,d=t.extraEventProperties;if(e=e||n&&n[Te],!!e){var g,h=e.options,v="on"+i.charAt(0).toUpperCase()+i.substr(1);window.CustomEvent&&!Qe&&!qt?g=new CustomEvent(i,{bubbles:!0,cancelable:!0}):(g=document.createEvent("Event"),g.initEvent(i,!0,!0)),g.to=r||n,g.from=a||n,g.item=l||n,g.clone=o,g.oldIndex=s,g.newIndex=u,g.oldDraggableIndex=c,g.newDraggableIndex=f,g.originalEvent=p,g.pullMode=m?m.lastPutMode:void 0;var C=qe(qe({},d),Ut.getEventProperties(i,e));for(var D in C)g[D]=C[D];n&&n.dispatchEvent(g),h[v]&&h[v].call(e,g)}}var mr=["evt"],Ae=function(e,n){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},l=i.evt,o=rr(i,mr);Ut.pluginEvent.bind(z)(e,n,qe({dragEl:A,parentEl:se,ghostEl:J,rootEl:le,nextEl:st,lastDownEl:vn,cloneEl:oe,cloneHidden:lt,dragStarted:Jt,putSortable:_e,activeSortable:z.active,originalEvent:l,oldIndex:Dt,oldDraggableIndex:Vt,newIndex:Ne,newDraggableIndex:ot,hideGhostForTarget:ml,unhideGhostForTarget:gl,cloneNowHidden:function(){lt=!0},cloneNowShown:function(){lt=!1},dispatchSortableEvent:function(a){Pe({sortable:n,name:a,originalEvent:l})}},o))};function Pe(t){hr(qe({putSortable:_e,cloneEl:oe,targetEl:A,rootEl:le,oldIndex:Dt,oldDraggableIndex:Vt,newIndex:Ne,newDraggableIndex:ot},t))}var A,se,J,le,st,vn,oe,lt,Dt,Ne,Vt,ot,_n,_e,Ct=!1,yn=!1,wn=[],ut,je,Un,Vn,ul,cl,Jt,Lt,Kt,Qt=!1,En=!1,kn,Se,Jn=[],Kn=!1,Sn=[],Dn=typeof document<"u",Cn=Gn,fl=qt||Qe?"cssFloat":"float",gr=Dn&&!xi&&!Gn&&"draggable"in document.createElement("div"),dl=function(){if(Dn){if(Qe)return!1;var t=document.createElement("x");return t.style.cssText="pointer-events:auto",t.style.pointerEvents==="auto"}}(),pl=function(e,n){var i=V(e),l=parseInt(i.width)-parseInt(i.paddingLeft)-parseInt(i.paddingRight)-parseInt(i.borderLeftWidth)-parseInt(i.borderRightWidth),o=kt(e,0,n),r=kt(e,1,n),a=o&&V(o),s=r&&V(r),u=a&&parseInt(a.marginLeft)+parseInt(a.marginRight)+fe(o).width,c=s&&parseInt(s.marginLeft)+parseInt(s.marginRight)+fe(r).width;if(i.display==="flex")return i.flexDirection==="column"||i.flexDirection==="column-reverse"?"vertical":"horizontal";if(i.display==="grid")return i.gridTemplateColumns.split(" ").length<=1?"vertical":"horizontal";if(o&&a.float&&a.float!=="none"){var f=a.float==="left"?"left":"right";return r&&(s.clear==="both"||s.clear===f)?"vertical":"horizontal"}return o&&(a.display==="block"||a.display==="flex"||a.display==="table"||a.display==="grid"||u>=l&&i[fl]==="none"||r&&i[fl]==="none"&&u+c>l)?"vertical":"horizontal"},br=function(e,n,i){var l=i?e.left:e.top,o=i?e.right:e.bottom,r=i?e.width:e.height,a=i?n.left:n.top,s=i?n.right:n.bottom,u=i?n.width:n.height;return l===a||o===s||l+r/2===a+u/2},vr=function(e,n){var i;return wn.some(function(l){var o=l[Te].options.emptyInsertThreshold;if(!(!o||qn(l))){var r=fe(l),a=e>=r.left-o&&e<=r.right+o,s=n>=r.top-o&&n<=r.bottom+o;if(a&&s)return i=l}}),i},hl=function(e){function n(o,r){return function(a,s,u,c){var f=a.options.group.name&&s.options.group.name&&a.options.group.name===s.options.group.name;if(o==null&&(r||f))return!0;if(o==null||o===!1)return!1;if(r&&o==="clone")return o;if(typeof o=="function")return n(o(a,s,u,c),r)(a,s,u,c);var p=(r?a:s).options.group.name;return o===!0||typeof o=="string"&&o===p||o.join&&o.indexOf(p)>-1}}var i={},l=e.group;(!l||gn(l)!="object")&&(l={name:l}),i.name=l.name,i.checkPull=n(l.pull,!0),i.checkPut=n(l.put),i.revertClone=l.revertClone,e.group=i},ml=function(){!dl&&J&&V(J,"display","none")},gl=function(){!dl&&J&&V(J,"display","")};Dn&&!xi&&document.addEventListener("click",function(t){if(yn)return t.preventDefault(),t.stopPropagation&&t.stopPropagation(),t.stopImmediatePropagation&&t.stopImmediatePropagation(),yn=!1,!1},!0);var ct=function(e){if(A){e=e.touches?e.touches[0]:e;var n=vr(e.clientX,e.clientY);if(n){var i={};for(var l in e)e.hasOwnProperty(l)&&(i[l]=e[l]);i.target=i.rootEl=n,i.preventDefault=void 0,i.stopPropagation=void 0,n[Te]._onDragOver(i)}}},_r=function(e){A&&A.parentNode[Te]._isOutsideThisEl(e.target)};function z(t,e){if(!(t&&t.nodeType&&t.nodeType===1))throw"Sortable: `el` must be an HTMLElement, not ".concat({}.toString.call(t));this.el=t,this.options=e=Je({},e),t[Te]=this;var n={group:null,sort:!0,disabled:!1,store:null,handle:null,draggable:/^[uo]l$/i.test(t.nodeName)?">li":">*",swapThreshold:1,invertSwap:!1,invertedSwapThreshold:null,removeCloneOnHide:!0,direction:function(){return pl(t,this.options)},ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",dragClass:"sortable-drag",ignore:"a, img",filter:null,preventOnFilter:!0,animation:0,easing:null,setData:function(r,a){r.setData("Text",a.textContent)},dropBubble:!1,dragoverBubble:!1,dataIdAttr:"data-id",delay:0,delayOnTouchOnly:!1,touchStartThreshold:(Number.parseInt?Number:window).parseInt(window.devicePixelRatio,10)||1,forceFallback:!1,fallbackClass:"sortable-fallback",fallbackOnBody:!1,fallbackTolerance:0,fallbackOffset:{x:0,y:0},supportPointer:z.supportPointer!==!1&&"PointerEvent"in window&&(!Xt||Gn),emptyInsertThreshold:5};Ut.initializePlugins(this,t,n);for(var i in n)!(i in e)&&(e[i]=n[i]);hl(e);for(var l in this)l.charAt(0)==="_"&&typeof this[l]=="function"&&(this[l]=this[l].bind(this));this.nativeDraggable=e.forceFallback?!1:gr,this.nativeDraggable&&(this.options.touchStartThreshold=1),e.supportPointer?x(t,"pointerdown",this._onTapStart):(x(t,"mousedown",this._onTapStart),x(t,"touchstart",this._onTapStart)),this.nativeDraggable&&(x(t,"dragover",this),x(t,"dragenter",this)),wn.push(this.el),e.store&&e.store.get&&this.sort(e.store.get(this)||[]),Je(this,fr())}z.prototype={constructor:z,_isOutsideThisEl:function(e){!this.el.contains(e)&&e!==this.el&&(Lt=null)},_getDirection:function(e,n){return typeof this.options.direction=="function"?this.options.direction.call(this,e,n,A):this.options.direction},_onTapStart:function(e){if(e.cancelable){var n=this,i=this.el,l=this.options,o=l.preventOnFilter,r=e.type,a=e.touches&&e.touches[0]||e.pointerType&&e.pointerType==="touch"&&e,s=(a||e).target,u=e.target.shadowRoot&&(e.path&&e.path[0]||e.composedPath&&e.composedPath()[0])||s,c=l.filter;if(Lr(i),!A&&!(/mousedown|pointerdown/.test(r)&&e.button!==0||l.disabled)&&!u.isContentEditable&&!(!this.nativeDraggable&&Xt&&s&&s.tagName.toUpperCase()==="SELECT")&&(s=We(s,l.draggable,i,!1),!(s&&s.animated)&&vn!==s)){if(Dt=Be(s),Vt=Be(s,l.draggable),typeof c=="function"){if(c.call(this,e,s,this)){Pe({sortable:n,rootEl:u,name:"filter",targetEl:s,toEl:i,fromEl:i}),Ae("filter",n,{evt:e}),o&&e.preventDefault();return}}else if(c&&(c=c.split(",").some(function(f){if(f=We(u,f.trim(),i,!1),f)return Pe({sortable:n,rootEl:f,name:"filter",targetEl:s,fromEl:i,toEl:i}),Ae("filter",n,{evt:e}),!0}),c)){o&&e.preventDefault();return}l.handle&&!We(u,l.handle,i,!1)||this._prepareDragStart(e,a,s)}}},_prepareDragStart:function(e,n,i){var l=this,o=l.el,r=l.options,a=o.ownerDocument,s;if(i&&!A&&i.parentNode===o){var u=fe(i);if(le=o,A=i,se=A.parentNode,st=A.nextSibling,vn=i,_n=r.group,z.dragged=A,ut={target:A,clientX:(n||e).clientX,clientY:(n||e).clientY},ul=ut.clientX-u.left,cl=ut.clientY-u.top,this._lastX=(n||e).clientX,this._lastY=(n||e).clientY,A.style["will-change"]="all",s=function(){if(Ae("delayEnded",l,{evt:e}),z.eventCanceled){l._onDrop();return}l._disableDelayedDragEvents(),!Zi&&l.nativeDraggable&&(A.draggable=!0),l._triggerDragStart(e,n),Pe({sortable:l,name:"choose",originalEvent:e}),Me(A,r.chosenClass,!0)},r.ignore.split(",").forEach(function(c){nl(A,c.trim(),Qn)}),x(a,"dragover",ct),x(a,"mousemove",ct),x(a,"touchmove",ct),r.supportPointer?(x(a,"pointerup",l._onDrop),!this.nativeDraggable&&x(a,"pointercancel",l._onDrop)):(x(a,"mouseup",l._onDrop),x(a,"touchend",l._onDrop),x(a,"touchcancel",l._onDrop)),Zi&&this.nativeDraggable&&(this.options.touchStartThreshold=4,A.draggable=!0),Ae("delayStart",this,{evt:e}),r.delay&&(!r.delayOnTouchOnly||n)&&(!this.nativeDraggable||!(qt||Qe))){if(z.eventCanceled){this._onDrop();return}r.supportPointer?(x(a,"pointerup",l._disableDelayedDrag),x(a,"pointercancel",l._disableDelayedDrag)):(x(a,"mouseup",l._disableDelayedDrag),x(a,"touchend",l._disableDelayedDrag),x(a,"touchcancel",l._disableDelayedDrag)),x(a,"mousemove",l._delayedDragTouchMoveHandler),x(a,"touchmove",l._delayedDragTouchMoveHandler),r.supportPointer&&x(a,"pointermove",l._delayedDragTouchMoveHandler),l._dragStartTimer=setTimeout(s,r.delay)}else s()}},_delayedDragTouchMoveHandler:function(e){var n=e.touches?e.touches[0]:e;Math.max(Math.abs(n.clientX-this._lastX),Math.abs(n.clientY-this._lastY))>=Math.floor(this.options.touchStartThreshold/(this.nativeDraggable&&window.devicePixelRatio||1))&&this._disableDelayedDrag()},_disableDelayedDrag:function(){A&&Qn(A),clearTimeout(this._dragStartTimer),this._disableDelayedDragEvents()},_disableDelayedDragEvents:function(){var e=this.el.ownerDocument;Z(e,"mouseup",this._disableDelayedDrag),Z(e,"touchend",this._disableDelayedDrag),Z(e,"touchcancel",this._disableDelayedDrag),Z(e,"pointerup",this._disableDelayedDrag),Z(e,"pointercancel",this._disableDelayedDrag),Z(e,"mousemove",this._delayedDragTouchMoveHandler),Z(e,"touchmove",this._delayedDragTouchMoveHandler),Z(e,"pointermove",this._delayedDragTouchMoveHandler)},_triggerDragStart:function(e,n){n=n||e.pointerType=="touch"&&e,!this.nativeDraggable||n?this.options.supportPointer?x(document,"pointermove",this._onTouchMove):n?x(document,"touchmove",this._onTouchMove):x(document,"mousemove",this._onTouchMove):(x(A,"dragend",this),x(le,"dragstart",this._onDragStart));try{document.selection?Pn(function(){document.selection.empty()}):window.getSelection().removeAllRanges()}catch{}},_dragStarted:function(e,n){if(Ct=!1,le&&A){Ae("dragStarted",this,{evt:n}),this.nativeDraggable&&x(document,"dragover",_r);var i=this.options;!e&&Me(A,i.dragClass,!1),Me(A,i.ghostClass,!0),z.active=this,e&&this._appendGhost(),Pe({sortable:this,name:"start",originalEvent:n})}else this._nulling()},_emulateDragOver:function(){if(je){this._lastX=je.clientX,this._lastY=je.clientY,ml();for(var e=document.elementFromPoint(je.clientX,je.clientY),n=e;e&&e.shadowRoot&&(e=e.shadowRoot.elementFromPoint(je.clientX,je.clientY),e!==n);)n=e;if(A.parentNode[Te]._isOutsideThisEl(e),n)do{if(n[Te]){var i=void 0;if(i=n[Te]._onDragOver({clientX:je.clientX,clientY:je.clientY,target:e,rootEl:n}),i&&!this.options.dragoverBubble)break}e=n}while(n=el(n));gl()}},_onTouchMove:function(e){if(ut){var n=this.options,i=n.fallbackTolerance,l=n.fallbackOffset,o=e.touches?e.touches[0]:e,r=J&&Et(J,!0),a=J&&r&&r.a,s=J&&r&&r.d,u=Cn&&Se&&ll(Se),c=(o.clientX-ut.clientX+l.x)/(a||1)+(u?u[0]-Jn[0]:0)/(a||1),f=(o.clientY-ut.clientY+l.y)/(s||1)+(u?u[1]-Jn[1]:0)/(s||1);if(!z.active&&!Ct){if(i&&Math.max(Math.abs(o.clientX-this._lastX),Math.abs(o.clientY-this._lastY))<i)return;this._onDragStart(e,!0)}if(J){r?(r.e+=c-(Un||0),r.f+=f-(Vn||0)):r={a:1,b:0,c:0,d:1,e:c,f};var p="matrix(".concat(r.a,",").concat(r.b,",").concat(r.c,",").concat(r.d,",").concat(r.e,",").concat(r.f,")");V(J,"webkitTransform",p),V(J,"mozTransform",p),V(J,"msTransform",p),V(J,"transform",p),Un=c,Vn=f,je=o}e.cancelable&&e.preventDefault()}},_appendGhost:function(){if(!J){var e=this.options.fallbackOnBody?document.body:le,n=fe(A,!0,Cn,!0,e),i=this.options;if(Cn){for(Se=e;V(Se,"position")==="static"&&V(Se,"transform")==="none"&&Se!==document;)Se=Se.parentNode;Se!==document.body&&Se!==document.documentElement?(Se===document&&(Se=Xe()),n.top+=Se.scrollTop,n.left+=Se.scrollLeft):Se=Xe(),Jn=ll(Se)}J=A.cloneNode(!0),Me(J,i.ghostClass,!1),Me(J,i.fallbackClass,!0),Me(J,i.dragClass,!0),V(J,"transition",""),V(J,"transform",""),V(J,"box-sizing","border-box"),V(J,"margin",0),V(J,"top",n.top),V(J,"left",n.left),V(J,"width",n.width),V(J,"height",n.height),V(J,"opacity","0.8"),V(J,"position",Cn?"absolute":"fixed"),V(J,"zIndex","100000"),V(J,"pointerEvents","none"),z.ghost=J,e.appendChild(J),V(J,"transform-origin",ul/parseInt(J.style.width)*100+"% "+cl/parseInt(J.style.height)*100+"%")}},_onDragStart:function(e,n){var i=this,l=e.dataTransfer,o=i.options;if(Ae("dragStart",this,{evt:e}),z.eventCanceled){this._onDrop();return}Ae("setupClone",this),z.eventCanceled||(oe=al(A),oe.removeAttribute("id"),oe.draggable=!1,oe.style["will-change"]="",this._hideClone(),Me(oe,this.options.chosenClass,!1),z.clone=oe),i.cloneId=Pn(function(){Ae("clone",i),!z.eventCanceled&&(i.options.removeCloneOnHide||le.insertBefore(oe,A),i._hideClone(),Pe({sortable:i,name:"clone"}))}),!n&&Me(A,o.dragClass,!0),n?(yn=!0,i._loopId=setInterval(i._emulateDragOver,50)):(Z(document,"mouseup",i._onDrop),Z(document,"touchend",i._onDrop),Z(document,"touchcancel",i._onDrop),l&&(l.effectAllowed="move",o.setData&&o.setData.call(i,l,A)),x(document,"drop",i),V(A,"transform","translateZ(0)")),Ct=!0,i._dragStartId=Pn(i._dragStarted.bind(i,n,e)),x(document,"selectstart",i),Jt=!0,window.getSelection().removeAllRanges(),Xt&&V(document.body,"user-select","none")},_onDragOver:function(e){var n=this.el,i=e.target,l,o,r,a=this.options,s=a.group,u=z.active,c=_n===s,f=a.sort,p=_e||u,m,d=this,g=!1;if(Kn)return;function h(Ye,Pt){Ae(Ye,d,qe({evt:e,isOwner:c,axis:m?"vertical":"horizontal",revert:r,dragRect:l,targetRect:o,canSort:f,fromSortable:p,target:i,completed:C,onMove:function(Ze,ft){return Ln(le,n,A,l,Ze,fe(Ze),e,ft)},changed:D},Pt))}function v(){h("dragOverAnimationCapture"),d.captureAnimationState(),d!==p&&p.captureAnimationState()}function C(Ye){return h("dragOverCompleted",{insertion:Ye}),Ye&&(c?u._hideClone():u._showClone(d),d!==p&&(Me(A,_e?_e.options.ghostClass:u.options.ghostClass,!1),Me(A,a.ghostClass,!0)),_e!==d&&d!==z.active?_e=d:d===z.active&&_e&&(_e=null),p===d&&(d._ignoreWhileAnimating=i),d.animateAll(function(){h("dragOverAnimationComplete"),d._ignoreWhileAnimating=null}),d!==p&&(p.animateAll(),p._ignoreWhileAnimating=null)),(i===A&&!A.animated||i===n&&!i.animated)&&(Lt=null),!a.dragoverBubble&&!e.rootEl&&i!==document&&(A.parentNode[Te]._isOutsideThisEl(e.target),!Ye&&ct(e)),!a.dragoverBubble&&e.stopPropagation&&e.stopPropagation(),g=!0}function D(){Ne=Be(A),ot=Be(A,a.draggable),Pe({sortable:d,name:"change",toEl:n,newIndex:Ne,newDraggableIndex:ot,originalEvent:e})}if(e.preventDefault!==void 0&&e.cancelable&&e.preventDefault(),i=We(i,a.draggable,n,!0),h("dragOver"),z.eventCanceled)return g;if(A.contains(e.target)||i.animated&&i.animatingX&&i.animatingY||d._ignoreWhileAnimating===i)return C(!1);if(yn=!1,u&&!a.disabled&&(c?f||(r=se!==le):_e===this||(this.lastPutMode=_n.checkPull(this,u,A,e))&&s.checkPut(this,u,A,e))){if(m=this._getDirection(e,i)==="vertical",l=fe(A),h("dragOverValid"),z.eventCanceled)return g;if(r)return se=le,v(),this._hideClone(),h("revert"),z.eventCanceled||(st?le.insertBefore(A,st):le.appendChild(A)),C(!0);var k=qn(n,a.draggable);if(!k||kr(e,m,this)&&!k.animated){if(k===A)return C(!1);if(k&&n===e.target&&(i=k),i&&(o=fe(i)),Ln(le,n,A,l,i,o,e,!!i)!==!1)return v(),k&&k.nextSibling?n.insertBefore(A,k.nextSibling):n.appendChild(A),se=n,D(),C(!0)}else if(k&&Er(e,m,this)){var E=kt(n,0,a,!0);if(E===A)return C(!1);if(i=E,o=fe(i),Ln(le,n,A,l,i,o,e,!1)!==!1)return v(),n.insertBefore(A,E),se=n,D(),C(!0)}else if(i.parentNode===n){o=fe(i);var I=0,w,P=A.parentNode!==n,_=!br(A.animated&&A.toRect||l,i.animated&&i.toRect||o,m),L=m?"top":"left",j=il(i,"top","top")||il(A,"top","top"),O=j?j.scrollTop:void 0;Lt!==i&&(w=o[L],Qt=!1,En=!_&&a.invertSwap||P),I=Sr(e,i,o,m,_?1:a.swapThreshold,a.invertedSwapThreshold==null?a.swapThreshold:a.invertedSwapThreshold,En,Lt===i);var G;if(I!==0){var M=Be(A);do M-=I,G=se.children[M];while(G&&(V(G,"display")==="none"||G===J))}if(I===0||G===i)return C(!1);Lt=i,Kt=I;var T=i.nextElementSibling,q=!1;q=I===1;var ye=Ln(le,n,A,l,i,o,e,q);if(ye!==!1)return(ye===1||ye===-1)&&(q=ye===1),Kn=!0,setTimeout(wr,30),v(),q&&!T?n.appendChild(A):i.parentNode.insertBefore(A,q?T:i),j&&rl(j,0,O-j.scrollTop),se=A.parentNode,w!==void 0&&!En&&(kn=Math.abs(w-fe(i)[L])),D(),C(!0)}if(n.contains(A))return C(!1)}return!1},_ignoreWhileAnimating:null,_offMoveEvents:function(){Z(document,"mousemove",this._onTouchMove),Z(document,"touchmove",this._onTouchMove),Z(document,"pointermove",this._onTouchMove),Z(document,"dragover",ct),Z(document,"mousemove",ct),Z(document,"touchmove",ct)},_offUpEvents:function(){var e=this.el.ownerDocument;Z(e,"mouseup",this._onDrop),Z(e,"touchend",this._onDrop),Z(e,"pointerup",this._onDrop),Z(e,"pointercancel",this._onDrop),Z(e,"touchcancel",this._onDrop),Z(document,"selectstart",this)},_onDrop:function(e){var n=this.el,i=this.options;if(Ne=Be(A),ot=Be(A,i.draggable),Ae("drop",this,{evt:e}),se=A&&A.parentNode,Ne=Be(A),ot=Be(A,i.draggable),z.eventCanceled){this._nulling();return}Ct=!1,En=!1,Qt=!1,clearInterval(this._loopId),clearTimeout(this._dragStartTimer),Zn(this.cloneId),Zn(this._dragStartId),this.nativeDraggable&&(Z(document,"drop",this),Z(n,"dragstart",this._onDragStart)),this._offMoveEvents(),this._offUpEvents(),Xt&&V(document.body,"user-select",""),V(A,"transform",""),e&&(Jt&&(e.cancelable&&e.preventDefault(),!i.dropBubble&&e.stopPropagation()),J&&J.parentNode&&J.parentNode.removeChild(J),(le===se||_e&&_e.lastPutMode!=="clone")&&oe&&oe.parentNode&&oe.parentNode.removeChild(oe),A&&(this.nativeDraggable&&Z(A,"dragend",this),Qn(A),A.style["will-change"]="",Jt&&!Ct&&Me(A,_e?_e.options.ghostClass:this.options.ghostClass,!1),Me(A,this.options.chosenClass,!1),Pe({sortable:this,name:"unchoose",toEl:se,newIndex:null,newDraggableIndex:null,originalEvent:e}),le!==se?(Ne>=0&&(Pe({rootEl:se,name:"add",toEl:se,fromEl:le,originalEvent:e}),Pe({sortable:this,name:"remove",toEl:se,originalEvent:e}),Pe({rootEl:se,name:"sort",toEl:se,fromEl:le,originalEvent:e}),Pe({sortable:this,name:"sort",toEl:se,originalEvent:e})),_e&&_e.save()):Ne!==Dt&&Ne>=0&&(Pe({sortable:this,name:"update",toEl:se,originalEvent:e}),Pe({sortable:this,name:"sort",toEl:se,originalEvent:e})),z.active&&((Ne==null||Ne===-1)&&(Ne=Dt,ot=Vt),Pe({sortable:this,name:"end",toEl:se,originalEvent:e}),this.save()))),this._nulling()},_nulling:function(){Ae("nulling",this),le=A=se=J=st=oe=vn=lt=ut=je=Jt=Ne=ot=Dt=Vt=Lt=Kt=_e=_n=z.dragged=z.ghost=z.clone=z.active=null,Sn.forEach(function(e){e.checked=!0}),Sn.length=Un=Vn=0},handleEvent:function(e){switch(e.type){case"drop":case"dragend":this._onDrop(e);break;case"dragenter":case"dragover":A&&(this._onDragOver(e),yr(e));break;case"selectstart":e.preventDefault();break}},toArray:function(){for(var e=[],n,i=this.el.children,l=0,o=i.length,r=this.options;l<o;l++)n=i[l],We(n,r.draggable,this.el,!1)&&e.push(n.getAttribute(r.dataIdAttr)||Cr(n));return e},sort:function(e,n){var i={},l=this.el;this.toArray().forEach(function(o,r){var a=l.children[r];We(a,this.options.draggable,l,!1)&&(i[o]=a)},this),n&&this.captureAnimationState(),e.forEach(function(o){i[o]&&(l.removeChild(i[o]),l.appendChild(i[o]))}),n&&this.animateAll()},save:function(){var e=this.options.store;e&&e.set&&e.set(this)},closest:function(e,n){return We(e,n||this.options.draggable,this.el,!1)},option:function(e,n){var i=this.options;if(n===void 0)return i[e];var l=Ut.modifyOption(this,e,n);typeof l<"u"?i[e]=l:i[e]=n,e==="group"&&hl(i)},destroy:function(){Ae("destroy",this);var e=this.el;e[Te]=null,Z(e,"mousedown",this._onTapStart),Z(e,"touchstart",this._onTapStart),Z(e,"pointerdown",this._onTapStart),this.nativeDraggable&&(Z(e,"dragover",this),Z(e,"dragenter",this)),Array.prototype.forEach.call(e.querySelectorAll("[draggable]"),function(n){n.removeAttribute("draggable")}),this._onDrop(),this._disableDelayedDragEvents(),wn.splice(wn.indexOf(this.el),1),this.el=e=null},_hideClone:function(){if(!lt){if(Ae("hideClone",this),z.eventCanceled)return;V(oe,"display","none"),this.options.removeCloneOnHide&&oe.parentNode&&oe.parentNode.removeChild(oe),lt=!0}},_showClone:function(e){if(e.lastPutMode!=="clone"){this._hideClone();return}if(lt){if(Ae("showClone",this),z.eventCanceled)return;A.parentNode==le&&!this.options.group.revertClone?le.insertBefore(oe,A):st?le.insertBefore(oe,st):le.appendChild(oe),this.options.group.revertClone&&this.animate(A,oe),V(oe,"display",""),lt=!1}}};function yr(t){t.dataTransfer&&(t.dataTransfer.dropEffect="move"),t.cancelable&&t.preventDefault()}function Ln(t,e,n,i,l,o,r,a){var s,u=t[Te],c=u.options.onMove,f;return window.CustomEvent&&!Qe&&!qt?s=new CustomEvent("move",{bubbles:!0,cancelable:!0}):(s=document.createEvent("Event"),s.initEvent("move",!0,!0)),s.to=e,s.from=t,s.dragged=n,s.draggedRect=i,s.related=l||e,s.relatedRect=o||fe(e),s.willInsertAfter=a,s.originalEvent=r,t.dispatchEvent(s),c&&(f=c.call(u,s,r)),f}function Qn(t){t.draggable=!1}function wr(){Kn=!1}function Er(t,e,n){var i=fe(kt(n.el,0,n.options,!0)),l=sl(n.el,n.options,J),o=10;return e?t.clientX<l.left-o||t.clientY<i.top&&t.clientX<i.right:t.clientY<l.top-o||t.clientY<i.bottom&&t.clientX<i.left}function kr(t,e,n){var i=fe(qn(n.el,n.options.draggable)),l=sl(n.el,n.options,J),o=10;return e?t.clientX>l.right+o||t.clientY>i.bottom&&t.clientX>i.left:t.clientY>l.bottom+o||t.clientX>i.right&&t.clientY>i.top}function Sr(t,e,n,i,l,o,r,a){var s=i?t.clientY:t.clientX,u=i?n.height:n.width,c=i?n.top:n.left,f=i?n.bottom:n.right,p=!1;if(!r){if(a&&kn<u*l){if(!Qt&&(Kt===1?s>c+u*o/2:s<f-u*o/2)&&(Qt=!0),Qt)p=!0;else if(Kt===1?s<c+kn:s>f-kn)return-Kt}else if(s>c+u*(1-l)/2&&s<f-u*(1-l)/2)return Dr(e)}return p=p||r,p&&(s<c+u*o/2||s>f-u*o/2)?s>c+u/2?1:-1:0}function Dr(t){return Be(A)<Be(t)?1:-1}function Cr(t){for(var e=t.tagName+t.className+t.src+t.href+t.textContent,n=e.length,i=0;n--;)i+=e.charCodeAt(n);return i.toString(36)}function Lr(t){Sn.length=0;for(var e=t.getElementsByTagName("input"),n=e.length;n--;){var i=e[n];i.checked&&Sn.push(i)}}function Pn(t){return setTimeout(t,0)}function Zn(t){return clearTimeout(t)}Dn&&x(document,"touchmove",function(t){(z.active||Ct)&&t.cancelable&&t.preventDefault()}),z.utils={on:x,off:Z,css:V,find:nl,is:function(e,n){return!!We(e,n,e,!1)},extend:ur,throttle:ol,closest:We,toggleClass:Me,clone:al,index:Be,nextTick:Pn,cancelNextTick:Zn,detectDirection:pl,getChild:kt,expando:Te},z.get=function(t){return t[Te]},z.mount=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];e[0].constructor===Array&&(e=e[0]),e.forEach(function(i){if(!i.prototype||!i.prototype.constructor)throw"Sortable: Mounted plugin must be a constructor function, not ".concat({}.toString.call(i));i.utils&&(z.utils=qe(qe({},z.utils),i.utils)),Ut.mount(i)})},z.create=function(t,e){return new z(t,e)},z.version=ar;var de=[],Zt,xn,$n=!1,ei,ti,In,xt;function Pr(){function t(){this.defaults={scroll:!0,forceAutoScrollFallback:!1,scrollSensitivity:30,scrollSpeed:10,bubbleScroll:!0};for(var e in this)e.charAt(0)==="_"&&typeof this[e]=="function"&&(this[e]=this[e].bind(this))}return t.prototype={dragStarted:function(n){var i=n.originalEvent;this.sortable.nativeDraggable?x(document,"dragover",this._handleAutoScroll):this.options.supportPointer?x(document,"pointermove",this._handleFallbackAutoScroll):i.touches?x(document,"touchmove",this._handleFallbackAutoScroll):x(document,"mousemove",this._handleFallbackAutoScroll)},dragOverCompleted:function(n){var i=n.originalEvent;!this.options.dragOverBubble&&!i.rootEl&&this._handleAutoScroll(i)},drop:function(){this.sortable.nativeDraggable?Z(document,"dragover",this._handleAutoScroll):(Z(document,"pointermove",this._handleFallbackAutoScroll),Z(document,"touchmove",this._handleFallbackAutoScroll),Z(document,"mousemove",this._handleFallbackAutoScroll)),bl(),Tn(),cr()},nulling:function(){In=xn=Zt=$n=xt=ei=ti=null,de.length=0},_handleFallbackAutoScroll:function(n){this._handleAutoScroll(n,!0)},_handleAutoScroll:function(n,i){var l=this,o=(n.touches?n.touches[0]:n).clientX,r=(n.touches?n.touches[0]:n).clientY,a=document.elementFromPoint(o,r);if(In=n,i||this.options.forceAutoScrollFallback||qt||Qe||Xt){ni(n,this.options,a,i);var s=it(a,!0);$n&&(!xt||o!==ei||r!==ti)&&(xt&&bl(),xt=setInterval(function(){var u=it(document.elementFromPoint(o,r),!0);u!==s&&(s=u,Tn()),ni(n,l.options,u,i)},10),ei=o,ti=r)}else{if(!this.options.bubbleScroll||it(a,!0)===Xe()){Tn();return}ni(n,this.options,it(a,!1),!1)}}},Je(t,{pluginName:"scroll",initializeByDefault:!0})}function Tn(){de.forEach(function(t){clearInterval(t.pid)}),de=[]}function bl(){clearInterval(xt)}var ni=ol(function(t,e,n,i){if(e.scroll){var l=(t.touches?t.touches[0]:t).clientX,o=(t.touches?t.touches[0]:t).clientY,r=e.scrollSensitivity,a=e.scrollSpeed,s=Xe(),u=!1,c;xn!==n&&(xn=n,Tn(),Zt=e.scroll,c=e.scrollFn,Zt===!0&&(Zt=it(n,!0)));var f=0,p=Zt;do{var m=p,d=fe(m),g=d.top,h=d.bottom,v=d.left,C=d.right,D=d.width,k=d.height,E=void 0,I=void 0,w=m.scrollWidth,P=m.scrollHeight,_=V(m),L=m.scrollLeft,j=m.scrollTop;m===s?(E=D<w&&(_.overflowX==="auto"||_.overflowX==="scroll"||_.overflowX==="visible"),I=k<P&&(_.overflowY==="auto"||_.overflowY==="scroll"||_.overflowY==="visible")):(E=D<w&&(_.overflowX==="auto"||_.overflowX==="scroll"),I=k<P&&(_.overflowY==="auto"||_.overflowY==="scroll"));var O=E&&(Math.abs(C-l)<=r&&L+D<w)-(Math.abs(v-l)<=r&&!!L),G=I&&(Math.abs(h-o)<=r&&j+k<P)-(Math.abs(g-o)<=r&&!!j);if(!de[f])for(var M=0;M<=f;M++)de[M]||(de[M]={});(de[f].vx!=O||de[f].vy!=G||de[f].el!==m)&&(de[f].el=m,de[f].vx=O,de[f].vy=G,clearInterval(de[f].pid),(O!=0||G!=0)&&(u=!0,de[f].pid=setInterval((function(){i&&this.layer===0&&z.active._onTouchMove(In);var T=de[this.layer].vy?de[this.layer].vy*a:0,q=de[this.layer].vx?de[this.layer].vx*a:0;typeof c=="function"&&c.call(z.dragged.parentNode[Te],q,T,t,In,de[this.layer].el)!=="continue"||rl(de[this.layer].el,q,T)}).bind({layer:f}),24))),f++}while(e.bubbleScroll&&p!==s&&(p=it(p,!1)));$n=u}},30),vl=function(e){var n=e.originalEvent,i=e.putSortable,l=e.dragEl,o=e.activeSortable,r=e.dispatchSortableEvent,a=e.hideGhostForTarget,s=e.unhideGhostForTarget;if(n){var u=i||o;a();var c=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:n,f=document.elementFromPoint(c.clientX,c.clientY);s(),u&&!u.el.contains(f)&&(r("spill"),this.onSpill({dragEl:l,putSortable:i}))}};function ii(){}ii.prototype={startIndex:null,dragStart:function(e){var n=e.oldDraggableIndex;this.startIndex=n},onSpill:function(e){var n=e.dragEl,i=e.putSortable;this.sortable.captureAnimationState(),i&&i.captureAnimationState();var l=kt(this.sortable.el,this.startIndex,this.options);l?this.sortable.el.insertBefore(n,l):this.sortable.el.appendChild(n),this.sortable.animateAll(),i&&i.animateAll()},drop:vl},Je(ii,{pluginName:"revertOnSpill"});function li(){}li.prototype={onSpill:function(e){var n=e.dragEl,i=e.putSortable,l=i||this.sortable;l.captureAnimationState(),n.parentNode&&n.parentNode.removeChild(n),l.animateAll()},drop:vl},Je(li,{pluginName:"removeOnSpill"}),z.mount(new Pr),z.mount(li,ii);function _l(t,e,n){const i=t.slice();return i[16]=e[n],i}function yl(t,e,n){const i=t.slice();return i[19]=e[n],i}function wl(t){let e,n,i,l;function o(){return t[10](t[19])}return{c(){e=S("div"),n=S("a"),n.innerHTML='<i class="fas fa-pencil-alt fa-sm"></i>',b(n,"href","javascript:"),b(n,"data-action","editField"),b(n,"class","edit-field svelte-1d0iatn"),b(e,"class","right svelte-1d0iatn")},m(r,a){U(r,e,a),y(e,n),i||(l=te(n,"click",o),i=!0)},p(r,a){t=r},d(r){r&&Y(e),i=!1,l()}}}function El(t,e){let n,i,l,o=e[19].label+"",r,a,s,u=e[2].editable&&wl(e),c=[e[9](e[19])],f={};for(let p=0;p<c.length;p+=1)f=Tt(f,c[p]);return{key:t,first:null,c(){n=S("li"),i=S("div"),l=S("label"),r=ae(o),a=H(),u&&u.c(),s=H(),b(l,"class","svelte-1d0iatn"),b(i,"class","left svelte-1d0iatn"),tt(n,f),ge(n,"svelte-1d0iatn",!0),this.first=n},m(p,m){U(p,n,m),y(n,i),y(i,l),y(l,r),y(n,a),u&&u.m(n,null),y(n,s)},p(p,m){e=p,m&1&&o!==(o=e[19].label+"")&&Re(r,o),e[2].editable?u?u.p(e,m):(u=wl(e),u.c(),u.m(n,s)):u&&(u.d(1),u=null),tt(n,f=hn(c,[m&1&&e[9](e[19])])),ge(n,"svelte-1d0iatn",!0)},d(p){p&&Y(n),u&&u.d()}}}function kl(t,e){let n,i,l,o=e[16].label+"",r,a,s=[e[9](e[16])],u={};for(let c=0;c<s.length;c+=1)u=Tt(u,s[c]);return{key:t,first:null,c(){n=S("li"),i=S("div"),l=S("label"),r=ae(o),a=H(),b(l,"class","svelte-1d0iatn"),b(i,"class","left svelte-1d0iatn"),tt(n,u),ge(n,"svelte-1d0iatn",!0),this.first=n},m(c,f){U(c,n,f),y(n,i),y(i,l),y(l,r),y(n,a)},p(c,f){e=c,f&2&&o!==(o=e[16].label+"")&&Re(r,o),tt(n,u=hn(s,[f&2&&e[9](e[16])])),ge(n,"svelte-1d0iatn",!0)},d(c){c&&Y(n)}}}function Ir(t){let e,n,i,l,o,r,a=[],s=new Map,u,c,f,p,m,d,g,h,v=[],C=new Map,D=ce(t[0].sort(Dl));const k=w=>w[19].name;for(let w=0;w<D.length;w+=1){let P=yl(t,D,w),_=k(P);s.set(_,a[w]=El(_,P))}let E=ce(t[1]);const I=w=>w[16].name;for(let w=0;w<E.length;w+=1){let P=_l(t,E,w),_=I(P);C.set(_,v[w]=kl(_,P))}return{c(){e=S("div"),n=S("div"),i=S("div"),l=S("header"),l.textContent=`${R.translate("Selected","labels","Admin")}`,o=H(),r=S("ul");for(let w=0;w<a.length;w+=1)a[w].c();u=H(),c=S("div"),f=H(),p=S("div"),m=S("div"),d=S("header"),d.textContent=`${R.translate("Available","labels","Admin")}`,g=H(),h=S("ul");for(let w=0;w<v.length;w+=1)v[w].c();b(l,"class","svelte-1d0iatn"),b(r,"class","enabled connected svelte-1d0iatn"),b(i,"class","well svelte-1d0iatn"),b(n,"class","col-sm-5"),b(c,"class","col-sm-2"),b(d,"class","svelte-1d0iatn"),b(h,"class","disabled connected svelte-1d0iatn"),b(m,"class","well svelte-1d0iatn"),b(p,"class","col-sm-5"),b(e,"id","layout"),b(e,"class","row")},m(w,P){U(w,e,P),y(e,n),y(n,i),y(i,l),y(i,o),y(i,r);for(let _=0;_<a.length;_+=1)a[_]&&a[_].m(r,null);y(e,u),y(e,c),y(e,f),y(e,p),y(p,m),y(m,d),y(m,g),y(m,h);for(let _=0;_<v.length;_+=1)v[_]&&v[_].m(h,null);t[11](e)},p(w,P){P&645&&(D=ce(w[0].sort(Dl)),a=yt(a,P,k,1,w,D,s,r,_t,El,null,yl)),P&514&&(E=ce(w[1]),v=yt(v,P,I,1,w,E,C,h,_t,kl,null,_l))},d(w){w&&Y(e);for(let P=0;P<a.length;P+=1)a[P].d();for(let P=0;P<v.length;P+=1)v[P].d();t[11](null)}}}function Tr(t){let e,n,i={params:t[2],validate:t[8],fetch:t[4],loadLayout:t[3],$$slots:{default:[Ir]},$$scope:{ctx:t}};return e=new Ki({props:i}),t[12](e),{c(){Ce(e.$$.fragment)},m(l,o){Ee(e,l,o),n=!0},p(l,[o]){const r={};o&4&&(r.params=l[2]),o&16&&(r.fetch=l[4]),o&8&&(r.loadLayout=l[3]),o&4194343&&(r.$$scope={dirty:o,ctx:l}),e.$set(r)},i(l){n||($(e.$$.fragment,l),n=!0)},o(l){ne(e.$$.fragment,l),n=!1},d(l){t[12](null),ke(e,l)}}}function Ar(t){return t.toLowerCase()}function Sl(t,e){return t[e]}const Dl=(t,e)=>t.sortOrder-e.sortOrder;function Or(t,e,n){let i,l,o,{params:r}=e,{enabledFields:a=[]}=e,{disabledFields:s=[]}=e,{loadLayout:u}=e,c;pt(()=>{f()}),Nn(()=>{l&&l.destroy(),o&&o.destroy()});function f(){const D={group:"fields",draggable:"li",animation:150};l=z.create(i.querySelector("ul.enabled"),{...D,onEnd(k){if(k.to.closest(".connected").classList.contains("enabled")){const[E]=a.splice(k.oldIndex,1);a.splice(k.newIndex,0,E)}else{const E=a[k.oldIndex];a.splice(k.oldIndex,1),s.splice(k.newIndex,0,E),n(1,s=[...s])}n(0,a=[...a])}}),o=z.create(i.querySelector("ul.disabled"),{...D,onEnd(k){if(k.to.closest(".connected").classList.contains("disabled")){const[E]=s.splice(k.oldIndex,1);s.splice(k.newIndex,0,E)}else{const E=s[k.oldIndex];s.splice(k.oldIndex,1),a.splice(k.newIndex,0,E),n(0,a=[...a])}n(1,s=[...s])}})}function p(D){r.openEditDialog(D,r.scope,r.dataAttributeList,r.dataAttributesDefs,k=>{n(0,a=a.map(E=>{if(E.name===D.name)for(let I in k)E[I]=k[I];return E}))})}let{fetch:m=()=>a}=e;function d(D){return D.length===0?(Ge.notify("Layout cannot be empty","error"),!1):!0}function g(D){const k={};return r.dataAttributeList.forEach(E=>{Sl(D,E)!=null&&(k[`data-${Ar(E)}`]=Sl(D,E))}),k}const h=D=>p(D);function v(D){we[D?"unshift":"push"](()=>{i=D,n(5,i)})}function C(D){we[D?"unshift":"push"](()=>{c=D,n(6,c)})}return t.$$set=D=>{"params"in D&&n(2,r=D.params),"enabledFields"in D&&n(0,a=D.enabledFields),"disabledFields"in D&&n(1,s=D.disabledFields),"loadLayout"in D&&n(3,u=D.loadLayout),"fetch"in D&&n(4,m=D.fetch)},[a,s,r,u,m,i,c,p,d,g,h,v,C]}let oi=class extends ve{constructor(e){super(),be(this,e,Or,Tr,ue,{params:2,enabledFields:0,disabledFields:1,loadLayout:3,fetch:4})}};function Mr(t){let e,n,i={params:t[0],enabledFields:t[2],disabledFields:t[3],editable:Nr,loadLayout:t[4]};return e=new oi({props:i}),t[5](e),{c(){Ce(e.$$.fragment)},m(l,o){Ee(e,l,o),n=!0},p(l,[o]){const r={};o&1&&(r.params=l[0]),o&4&&(r.enabledFields=l[2]),o&8&&(r.disabledFields=l[3]),e.$set(r)},i(l){n||($(e.$$.fragment,l),n=!0)},o(l){ne(e.$$.fragment,l),n=!1},d(l){t[5](null),ke(e,l)}}}let Nr=!0;function Fr(t,e,n){let{params:i}=e;i.dataAttributeList||(i.dataAttributeList=["id","name","width","widthPx","link","notSortable","align","view","customLabel","editable"]),i.dataAttributesDefs||(i.dataAttributesDefs={link:{type:"bool"},width:{type:"float"},notSortable:{type:"bool"},align:{type:"enum",options:["left","right"]},view:{type:"varchar",readOnly:!0},customLabel:{type:"varchar",readOnly:!0},widthPx:{type:"float"},name:{type:"varchar",readOnly:!0},editable:{type:"bool"}});let l,o=[],r=[];const a=[],s=[];function u(d){jt.create(i.scope,g=>{Ve.get(i.scope,i.type,i.relatedScope,i.layoutProfileId,h=>{d&&(c(g,h.layout),d(h))},!1)})}function c(d,g){const h=Object.keys(d.defs.fields).filter(k=>f(d.getFieldParam(k,"type"))&&p(d,k)).sort((k,E)=>R.translate(k,"fields",i.scope).localeCompare(R.translate(E,"fields",i.scope))),v=[],C=[],D=[];n(2,o=g.map(k=>{const E=R.translate(k.name,"fields",i.scope);return C.includes(E)&&D.push(E),C.push(E),v.push(k.name),{...k,label:k.label||E}})),n(3,r=h.filter(k=>!v.includes(k)).map(k=>{const E=R.translate(k,"fields",i.scope);C.includes(E)&&D.push(E),C.push(E);const I={name:k,label:E},w=Le.get(["entityDefs",i.scope,"fields",k,"type"]);return w&&Le.get(["fields",w,"notSortable"])&&(I.notSortable=!0),I})),[o,r].forEach(k=>{k.forEach(E=>{D.includes(E.label)&&(E.label+=` (${E.name})`)})})}function f(d){return i.fieldTypes?i.fieldTypes.includes(d):!0}function p(d,g){if(a.includes(g)||s.includes(d.getFieldParam(g,"type")))return!1;const h=["disabled",`layout${Espo.utils.upperCaseFirst(i.type)}Disabled`];i.reelType&&h.push(`layout${Espo.utils.upperCaseFirst(i.reelType)}Disabled`);for(let v of h)if(d.getFieldParam(g,v))return!1;return!0}function m(d){we[d?"unshift":"push"](()=>{l=d,n(1,l)})}return t.$$set=d=>{"params"in d&&n(0,i=d.params)},[i,l,o,r,u,m]}class ri extends ve{constructor(e){super(),be(this,e,Fr,Mr,ue,{params:0})}}function Rr(t){let e,n,i={params:t[0],enabledFields:t[2],disabledFields:t[3],loadLayout:t[5],fetch:t[4]};return e=new oi({props:i}),t[7](e),{c(){Ce(e.$$.fragment)},m(l,o){Ee(e,l,o),n=!0},p(l,[o]){const r={};o&1&&(r.params=l[0]),o&4&&(r.enabledFields=l[2]),o&8&&(r.disabledFields=l[3]),e.$set(r)},i(l){n||($(e.$$.fragment,l),n=!0)},o(l){ne(e.$$.fragment,l),n=!1},d(l){t[7](null),ke(e,l)}}}function Br(t,e,n){let{params:i}=e,{viewType:l="detail"}=e;i.dataAttributeList||(i.dataAttributeList=["id","name","style","sticked"]),i.dataAttributesDefs||(i.dataAttributesDefs={style:{type:"enum",options:["default","success","danger","primary","info","warning"],translation:"LayoutManager.options.style"},sticked:{type:"bool"},name:{readOnly:!0}});let o,r=[],a=[],s=()=>{let p={};return r.forEach(m=>{p[m.name]=m}),a.forEach(m=>{p[m.name]={...m,disabled:!0}}),p};function u(p){Ve.get(i.scope,i.type,null,i.layoutProfileId,m=>{p&&(c(m.layout),p(m))},!1)}function c(p){let m=[],d={},g={};Le.get(["clientDefs",i.scope,"defaultSidePanel",l])!==!1&&!Le.get(["clientDefs",i.scope,"defaultSidePanelDisabled"])&&(m.push("default"),d.default="Default"),(Le.get(["clientDefs",i.scope,"sidePanels",l])||[]).forEach(h=>{h.name&&(m.push(h.name),h.label&&(d[h.name]=h.label),g[h.name]=h)}),n(3,a=[]),p=p||{},n(2,r=[]),m.forEach((h,v)=>{let C=!1,D=p[h]||{};D.disabled&&(C=!0);let k;if(d[h]?k=R.translate(d[h],"labels",i.scope):k=R.translate(h,"panels",i.scope),C)a.push({name:h,label:k});else{let E={name:h,label:k};E.name in g&&i.dataAttributeList.forEach(I=>{if(I==="name")return;let w=g[E.name]||{};I in w&&(E[I]=w[I])});for(let I in D)E[I]=D[I];E.index="index"in D?D.index:v,r.push(E)}}),r.sort((h,v)=>h.index-v.index)}function f(p){we[p?"unshift":"push"](()=>{o=p,n(1,o)})}return t.$$set=p=>{"params"in p&&n(0,i=p.params),"viewType"in p&&n(6,l=p.viewType)},[i,o,r,a,s,u,l,f]}class Hr extends ve{constructor(e){super(),be(this,e,Br,Rr,ue,{params:0,viewType:6})}}function Wr(t){let e,n;return e=new oi({props:{params:t[0],enabledFields:t[1],disabledFields:t[2],loadLayout:t[3]}}),{c(){Ce(e.$$.fragment)},m(i,l){Ee(e,i,l),n=!0},p(i,[l]){const o={};l&1&&(o.params=i[0]),l&2&&(o.enabledFields=i[1]),l&4&&(o.disabledFields=i[2]),e.$set(o)},i(i){n||($(e.$$.fragment,i),n=!0)},o(i){ne(e.$$.fragment,i),n=!1},d(i){ke(e,i)}}}function jr(t,e){return!t.getLinkParam(e,"disabled")&&!t.getLinkParam(e,"layoutRelationshipsDisabled")}function zr(t,e,n){let{params:i}=e;i.dataAttributeList||(i.dataAttributeList=["id","name","style","hiddenPerDefault"]),i.dataAttributesDefs||(i.dataAttributesDefs={style:{type:"enum",options:["default","success","danger","primary","info","warning"],translation:"LayoutManager.options.style"},hiddenPerDefault:{type:"bool"},name:{readOnly:!0}});let l=[],o=[];function r(s){jt.create(i.scope,function(u){Ve.get(i.scope,i.type,null,i.layoutProfileId,c=>{s&&(a(u,c.layout),s(c))},!1)})}function a(s,u){let c=[];for(let m in s.defs.links)["belongsTo","hasMany","hasChildren"].includes(s.defs.links[m].type)&&jr(s,m)&&c.push(m);const f=Le.get(["clientDefs",i.scope,"bottomPanels","detail"])||[];for(let m of f)m.layoutRelationshipsDisabled||c.push(m.name);c.sort(function(m,d){let g,h,v=f.find(D=>D.name===m),C=f.find(D=>D.name===d);return m in s.defs.links?g=R.translate(m,"links",i.scope):v&&(g=R.translate(v.label,"labels",i.scope)),d in s.defs.links?h=R.translate(d,"links",i.scope):C&&(h=R.translate(C.label,"labels",i.scope)),g.localeCompare(h)});let p=[];n(1,l=[]),n(2,o=[]);for(let m in u){let d=u[m],g,h=f.find(v=>v.name===d.name);typeof d=="string"||d instanceof String?g={name:d,label:h?R.translate(h.label,"labels",i.scope):R.translate(d,"links",i.scope)}:(g=d,g.label=h?R.translate(h.label,"labels",i.scope):R.translate(g.name,"links",i.scope)),i.dataAttributeList.forEach(v=>{if(v==="name"||v in g)return;let C=Le.get(["clientDefs",i.scope,"relationshipPanels",g.name,v]);C!==null&&(g[v]=C)}),l.push(g),p.push(g.name)}for(let m of c)if(!p.includes(m)){let d=f.find(g=>g.name===m);o.push({name:m,label:d?R.translate(d.label,"labels",i.scope):R.translate(m,"links",i.scope)})}}return t.$$set=s=>{"params"in s&&n(0,i=s.params)},[i,l,o,r]}class Gr extends ve{constructor(e){super(),be(this,e,zr,Wr,ue,{params:0})}}function Cl(t,e,n){const i=t.slice();return i[39]=e[n],i}function Ll(t,e,n){const i=t.slice();return i[42]=e[n],i}function Pl(t,e,n){const i=t.slice();return i[45]=e[n],i}function Il(t,e,n){const i=t.slice();return i[48]=e[n],i[50]=n,i}function qr(t){let e,n,i,l,o;function r(){return t[20](t[42],t[45],t[50])}function a(...s){return t[21](t[42],t[45],t[50],...s)}return{c(){e=S("li"),n=S("a"),n.innerHTML='<i class="fas fa-minus"></i>',i=H(),b(n,"href","#"),b(n,"data-action","minusCell"),b(n,"class","remove-field svelte-1wub2tj"),b(e,"class","empty cell svelte-1wub2tj")},m(s,u){U(s,e,u),y(e,n),y(e,i),l||(o=[te(n,"click",et(r)),te(e,"dragover",et(Jr)),te(e,"drop",a)],l=!0)},p(s,u){t=s},d(s){s&&Y(e),l=!1,Fe(o)}}}function Xr(t){let e,n=t[48].label+"",i,l,o,r,a,s,u,c,f,p,m;function d(){return t[18](t[42],t[45],t[50])}function g(...h){return t[19](t[48],...h)}return{c(){e=S("li"),i=ae(n),l=H(),o=S("a"),o.innerHTML='<i class="fas fa-times"></i>',r=H(),b(o,"href","#"),b(o,"data-action","removeField"),b(o,"class","remove-field svelte-1wub2tj"),b(e,"class","cell svelte-1wub2tj"),b(e,"draggable","true"),b(e,"data-id",a=t[48].id),b(e,"data-name",s=t[48].name),b(e,"data-full-width",u=t[48].fullWidth?"true":void 0),b(e,"data-custom-label",c=t[48].customLabel?t[48].customLabel:void 0),b(e,"data-no-label",f=t[48].noLabel)},m(h,v){U(h,e,v),y(e,i),y(e,l),y(e,o),y(e,r),p||(m=[te(o,"click",et(d)),te(e,"dragstart",Mn(g))],p=!0)},p(h,v){t=h,v[0]&2&&n!==(n=t[48].label+"")&&Re(i,n),v[0]&2&&a!==(a=t[48].id)&&b(e,"data-id",a),v[0]&2&&s!==(s=t[48].name)&&b(e,"data-name",s),v[0]&2&&u!==(u=t[48].fullWidth?"true":void 0)&&b(e,"data-full-width",u),v[0]&2&&c!==(c=t[48].customLabel?t[48].customLabel:void 0)&&b(e,"data-custom-label",c),v[0]&2&&f!==(f=t[48].noLabel)&&b(e,"data-no-label",f)},d(h){h&&Y(e),p=!1,Fe(m)}}}function Tl(t){let e;function n(o,r){return o[48]?Xr:qr}let i=n(t),l=i(t);return{c(){l.c(),e=Ft()},m(o,r){l.m(o,r),U(o,e,r)},p(o,r){i===(i=n(o))&&l?l.p(o,r):(l.d(1),l=i(o),l&&(l.c(),l.m(e.parentNode,e)))},d(o){o&&Y(e),l.d(o)}}}function Al(t,e){let n,i,l,o,r,a,s,u,c;function f(){return e[17](e[42],e[45])}let p=ce(e[45].cells),m=[];for(let d=0;d<p.length;d+=1)m[d]=Tl(Il(e,p,d));return{key:t,first:null,c(){n=S("li"),i=S("div"),l=S("a"),l.innerHTML='<i class="fas fa-times"></i>',o=H(),r=S("ul");for(let d=0;d<m.length;d+=1)m[d].c();a=H(),b(l,"href","#"),b(l,"data-action","removeRow"),b(l,"class","remove-row pull-right svelte-1wub2tj"),b(i,"class","svelte-1wub2tj"),b(r,"class","cells svelte-1wub2tj"),b(n,"class","row svelte-1wub2tj"),b(n,"data-number",s=e[45].number),this.first=n},m(d,g){U(d,n,g),y(n,i),y(i,l),y(n,o),y(n,r);for(let h=0;h<m.length;h+=1)m[h]&&m[h].m(r,null);y(n,a),u||(c=[te(l,"click",et(f)),te(r,"mousedown",Mn(Kr))],u=!0)},p(d,g){if(e=d,g[0]&5634){p=ce(e[45].cells);let h;for(h=0;h<p.length;h+=1){const v=Il(e,p,h);m[h]?m[h].p(v,g):(m[h]=Tl(v),m[h].c(),m[h].m(r,null))}for(;h<m.length;h+=1)m[h].d(1);m.length=p.length}g[0]&2&&s!==(s=e[45].number)&&b(n,"data-number",s)},d(d){d&&Y(n),sn(m,d),u=!1,Fe(c)}}}function Ol(t,e){let n,i,l,o=(e[42].customLabel||e[42].label||"")+"",r,a,s,u,c,f,p,m,d,g,h,v=[],C=new Map,D,k,E,I,w,P,_;function L(){return e[15](e[42])}function j(){return e[16](e[42])}let O=ce(e[42].rows);const G=T=>T[45].number;for(let T=0;T<O.length;T+=1){let q=Pl(e,O,T),ye=G(q);C.set(ye,v[T]=Al(ye,q))}function M(){return e[22](e[42])}return{key:t,first:null,c(){n=S("li"),i=S("header"),l=S("label"),r=ae(o),s=ae(` \r
                                `),u=S("a"),u.innerHTML='<i class="fas fa-pencil-alt fa-sm"></i>',c=H(),f=S("a"),p=S("i"),g=H(),h=S("ul");for(let T=0;T<v.length;T+=1)v[T].c();D=H(),k=S("div"),E=S("a"),E.innerHTML='<i class="fas fa-plus"></i>',I=H(),b(l,"data-is-custom",a=e[42].customLabel?"true":void 0),b(l,"class","svelte-1wub2tj"),b(u,"href","#"),b(u,"data-action","edit-panel-label"),b(u,"class","edit-panel-label svelte-1wub2tj"),b(p,"class","fas fa-times"),b(f,"href","#"),Ie(f,"float","right"),b(f,"data-action","removePanel"),b(f,"class","remove-panel svelte-1wub2tj"),b(f,"data-number",m=e[42].number),b(i,"data-name",d=e[42].name),b(i,"class","svelte-1wub2tj"),b(h,"class","rows svelte-1wub2tj"),b(E,"href","#"),b(E,"data-action","addRow"),b(E,"class","svelte-1wub2tj"),b(k,"class","svelte-1wub2tj"),b(n,"data-number",w=e[42].number),b(n,"class","panel-layout svelte-1wub2tj"),this.first=n},m(T,q){U(T,n,q),y(n,i),y(i,l),y(l,r),y(i,s),y(i,u),y(i,c),y(i,f),y(f,p),y(n,g),y(n,h);for(let ye=0;ye<v.length;ye+=1)v[ye]&&v[ye].m(h,null);y(n,D),y(n,k),y(k,E),y(n,I),P||(_=[te(u,"click",et(L)),te(f,"click",et(j)),te(h,"mousedown",Mn(Qr)),te(E,"click",et(M))],P=!0)},p(T,q){e=T,q[0]&2&&o!==(o=(e[42].customLabel||e[42].label||"")+"")&&Re(r,o),q[0]&2&&a!==(a=e[42].customLabel?"true":void 0)&&b(l,"data-is-custom",a),q[0]&2&&m!==(m=e[42].number)&&b(f,"data-number",m),q[0]&2&&d!==(d=e[42].name)&&b(i,"data-name",d),q[0]&5890&&(O=ce(e[42].rows),v=yt(v,q,G,1,e,O,C,h,_t,Al,null,Pl)),q[0]&2&&w!==(w=e[42].number)&&b(n,"data-number",w)},d(T){T&&Y(n);for(let q=0;q<v.length;q+=1)v[q].d();P=!1,Fe(_)}}}function Ml(t){let e,n=t[39].label+"",i,l,o,r,a;function s(...u){return t[23](t[39],...u)}return{c(){e=S("li"),i=ae(n),l=H(),b(e,"class","cell svelte-1wub2tj"),b(e,"data-name",o=t[39].name)},m(u,c){U(u,e,c),y(e,i),y(e,l),r||(a=te(e,"dragstart",s),r=!0)},p(u,c){t=u,c[0]&4&&n!==(n=t[39].label+"")&&Re(i,n),c[0]&4&&o!==(o=t[39].name)&&b(e,"data-name",o)},d(u){u&&Y(e),r=!1,a()}}}function Yr(t){let e,n,i,l,o,r,a,s,u=[],c=new Map,f,p,m,d,g,h,v,C,D=ce(t[1]);const k=w=>w[42].number;for(let w=0;w<D.length;w+=1){let P=Ll(t,D,w),_=k(P);c.set(_,u[w]=Ol(_,P))}let E=ce(t[2]),I=[];for(let w=0;w<E.length;w+=1)I[w]=Ml(Cl(t,E,w));return{c(){e=S("div"),n=S("div"),i=S("div"),l=S("header"),l.textContent=`${R.translate("Layout","LayoutManager")}`,o=H(),r=S("a"),r.textContent=`${R.translate("Add Panel","Admin")}`,a=H(),s=S("ul");for(let w=0;w<u.length;w+=1)u[w].c();f=H(),p=S("div"),m=S("div"),d=S("header"),d.textContent=`${R.translate("Available Fields","Admin")}`,g=H(),h=S("ul");for(let w=0;w<I.length;w+=1)I[w].c();b(l,"class","svelte-1wub2tj"),b(r,"href","#"),b(r,"class","svelte-1wub2tj"),b(s,"class","panels svelte-1wub2tj"),b(i,"class","well svelte-1wub2tj"),b(n,"class","col-md-8 svelte-1wub2tj"),b(d,"class","svelte-1wub2tj"),b(h,"class","disabled cells clearfix svelte-1wub2tj"),b(m,"class","well available-fields svelte-1wub2tj"),b(p,"class","col-md-4 svelte-1wub2tj"),b(e,"id","layout"),b(e,"class","row svelte-1wub2tj")},m(w,P){U(w,e,P),y(e,n),y(n,i),y(i,l),y(i,o),y(i,r),y(i,a),y(i,s);for(let _=0;_<u.length;_+=1)u[_]&&u[_].m(s,null);y(e,f),y(e,p),y(p,m),y(m,d),y(m,g),y(m,h);for(let _=0;_<I.length;_+=1)I[_]&&I[_].m(h,null);v||(C=te(r,"click",et(t[5])),v=!0)},p(w,P){if(P[0]&8130&&(D=ce(w[1]),u=yt(u,P,k,1,w,D,c,s,_t,Ol,null,Ll)),P[0]&4){E=ce(w[2]);let _;for(_=0;_<E.length;_+=1){const L=Cl(w,E,_);I[_]?I[_].p(L,P):(I[_]=Ml(L),I[_].c(),I[_].m(h,null))}for(;_<I.length;_+=1)I[_].d(1);I.length=E.length}},d(w){w&&Y(e);for(let P=0;P<u.length;P+=1)u[P].d();sn(I,w),v=!1,C()}}}function Ur(t){let e,n;return e=new Ki({props:{params:t[0],validate:t[13],fetch:t[4],loadLayout:t[3],$$slots:{default:[Yr]},$$scope:{ctx:t}}}),{c(){Ce(e.$$.fragment)},m(i,l){Ee(e,i,l),n=!0},p(i,l){const o={};l[0]&1&&(o.params=i[0]),l[0]&6|l[1]&1048576&&(o.$$scope={dirty:l,ctx:i}),e.$set(o)},i(i){n||($(e.$$.fragment,i),n=!0)},o(i){ne(e.$$.fragment,i),n=!1},d(i){ke(e,i)}}}function Vr(t,e){return e.some(n=>n.name===t)}const Jr=t=>t.dataTransfer.dropEffect="move",Kr=()=>{},Qr=()=>{};function Zr(t,e,n){let{params:i}=e,{columnCount:l=2}=e,o=["id","label","style"],r={label:{type:"varchar"},style:{type:"enum",options:["default","success","danger","primary","info","warning"],translation:"LayoutManager.options.style"},dynamicLogicVisible:{type:"base",view:"views/admin/field-manager/fields/dynamic-logic-conditions"}},a=["modifiedAt","createdAt","modifiedBy","createdBy","assignedUser","ownerUser","teams"],s=[],u=[],c=-1,f=-1,p;Oi();function m(F){let N,X;const K=[];K.push(new Promise(Q=>{jt.create(i.scope,ie=>{Ve.get(i.scope,i.type,i.relatedScope,i.layoutProfileId,ee=>{N=ee,X=ie,Q()},!1)})})),i.type==="detail"&&K.push(new Promise(Q=>{Ve.get(i.scope,"sidePanelsDetail",null,i.layoutProfileId,ie=>{p=ie.layout,Q()},!1)})),Promise.all(K).then(()=>{F&&(d(X,N.layout),C(),Rn().then(()=>{k()}),F(N))})}function d(F,N){let X=[];const K=[];for(const ee in F.defs.fields)g(F,ee)&&(K.push(R.translate(ee,"fields",i.scope)),X.push(ee));const Q=K.filter((ee,Oe)=>K.indexOf(ee)!==Oe);let ie=[];n(2,u=[]),n(1,s=N),N.forEach((ee,Oe)=>{ee.rows.forEach((re,ze)=>{re&&re.forEach((He,xe)=>{if(xe==l||!He)return;let rt=R.translate(He.name,"fields",i.scope);Q.includes(rt)&&(rt+=` (${He.name})`),ie.push({name:He.name,label:rt}),n(1,s[Oe].rows[ze][xe].label=rt,s)})})}),X.sort((ee,Oe)=>R.translate(ee,"fields",i.scope).localeCompare(R.translate(Oe,"fields",i.scope)));for(const ee in X)if(!Vr(X[ee],ie)){const Oe=X[ee];let re=R.translate(Oe,"fields",i.scope);Q.includes(re)&&(re+=` (${Oe})`),u.push({name:Oe,label:re})}}function g(F,N){if(h()&&a.includes(N))return!1;const X=["disabled",`layout${Espo.utils.upperCaseFirst(i.type)}Disabled`];i.reelType&&X.push(`layout${Espo.utils.upperCaseFirst(i.reelType)}Disabled`);for(let K of X)if(F.getFieldParam(N,K))return!1;return!0}function h(){if(Le.get(["clientDefs",i.scope,"defaultSidePanelDisabled"]))return!1;if(p){for(const F in p)if(F==="default"&&p[F].disabled)return!1}return!0}function v(){return s.map(F=>({...F,rows:F.rows.map(N=>N.cells)}))}function C(){c=-1,f=-1,n(1,s=s.map((F,N)=>(F.number=N,c=N,F.rows=F.rows.map(X=>({number:f++,cells:X})),F)))}function D(F){z.create(F,{animation:150,group:"rows",draggable:"li.row",onEnd(N){const X=parseInt(N.to.closest(".panel-layout").getAttribute("data-number")),K=parseInt(N.from.closest(".panel-layout").getAttribute("data-number"));if(K===X)n(1,s=s.map(Q=>{if(Q.number===X){const[ie]=Q.rows.splice(N.oldIndex,1);Q.rows.splice(N.newIndex,0,ie)}return Q}));else{const ie=s.find(ee=>ee.number===K).rows[N.oldIndex];n(1,s=s.map(ee=>(ee.number===K&&ee.rows.splice(N.oldIndex,1),ee.number===X&&ee.rows.splice(N.newIndex,0,ie),ee)))}}})}function k(){const F=document.querySelector("ul.panels");F&&z.create(F,{animation:150,group:"panels",draggable:"li.panel-layout",onEnd(N){const X=Array.from(N.to.children);n(1,s=X.map(K=>{const Q=parseInt(K.getAttribute("data-number"));return s.find(ie=>ie.number===Q)}))}}),document.querySelectorAll("ul.rows").forEach(N=>{D(N)}),document.querySelectorAll("ul.cells.disabled").forEach(N=>{z.create(N,{animation:150,group:"cells",draggable:"li.cell"})})}function E(){c++;const F={label:"New panel",rows:[{number:f++,cells:[!1,!1]}],number:c,name:`panel${c}`,isCustomLabel:!0};n(1,s=[...s,F]),Rn().then(()=>{const N=document.querySelector(`.panel-layout[data-number="${F.number}"] > .rows`);D(N)})}function I(F){const N=s.find(K=>K.number===F);n(1,s=s.filter(K=>K!==N));let X=[];N.rows.forEach(K=>{K.cells.forEach(Q=>{Q&&X.push(Q)})}),n(2,u=[...u,...X])}function w(F){n(1,s=s.map(N=>(N.number===F&&(N.rows=[...N.rows,{number:f++,cells:Array(l).fill(!1)}]),N)))}function P(F,N){n(1,s=s.map(X=>{if(X.number===F){const K=X.rows.find(Q=>Q.number===N);X.rows=X.rows.filter(Q=>Q!=K),n(2,u=[...u,...K.cells.filter(Q=>!!Q)])}return X}))}function _(F,N,X){n(1,s=s.map(K=>(K.number===F&&(K.rows=K.rows.map((Q,ie)=>{if(Q.number===N){const ee=Q.cells[X];ee&&n(2,u=[...u,ee]),Q.cells[X]=!1}return Q})),K)))}function L(F,N,X,K){const Q=F.dataTransfer.getData("name");let ie=u.find(re=>re.name===Q),ee=null,Oe=null;if(ie)n(2,u=u.filter(re=>re!==ie));else{if(s.forEach(re=>{re.rows.forEach((ze,He)=>{ze.cells.forEach(xe=>{xe&&xe.name===Q&&(ie=xe,ee=ze.number,Oe=re.number)})})}),!ie)return;n(1,s=s.map((re,ze)=>(Oe===re.number&&(re.rows=re.rows.map((He,xe)=>(He.number===ee&&(He.cells=He.cells.map((rt,Aa)=>rt&&rt.name===Q?!1:rt)),He))),re)))}n(1,s=s.map(re=>(N===re.number&&(re.rows=re.rows.map(ze=>(X===ze.number&&(ze.cells=ze.cells.map((He,xe)=>xe===K?(ie.fullWidth&&ze.cells.length>1&&delete ie.fullWidth,ie):He)),ze))),re)))}function j(F){i.onEditPanel(F,o,r,N=>{n(1,s=s.map(X=>(X.number===F.number&&o.forEach(K=>{F[K]=N[K]}),X)))})}function O(F,N,X){n(1,s=s.map(K=>(F===K.number&&(K.rows=K.rows.map(Q=>{if(N===Q.number){const ie=Q.cells.filter((ee,Oe)=>Oe!==X);ie.length===1&&ie[0]&&(ie[0].fullWidth=!0),Q.cells=ie}return Q})),K)))}function G(F){let N=0;return F.forEach(X=>{X.rows.forEach(K=>{K.forEach(Q=>{Q&&N++})})}),N===0?(Ge.notify("Layout cannot be empty.","error"),!1):!0}const M=F=>j(F),T=F=>I(F.number),q=(F,N)=>P(F.number,N.number),ye=(F,N,X)=>_(F.number,N.number,X),Ye=(F,N)=>{N.dataTransfer.setData("name",F.name)},Pt=(F,N,X)=>O(F.number,N.number,X),en=(F,N,X,K)=>L(K,F.number,N.number,X),Ze=F=>w(F.number),ft=(F,N)=>{N.dataTransfer.setData("name",F.name)};return t.$$set=F=>{"params"in F&&n(0,i=F.params),"columnCount"in F&&n(14,l=F.columnCount)},[i,s,u,m,v,E,I,w,P,_,L,j,O,G,l,M,T,q,ye,Ye,Pt,en,Ze,ft]}class xr extends ve{constructor(e){super(),be(this,e,Zr,Ur,ue,{params:0,columnCount:14},null,[-1,-1])}}function $r(t){let e,n;return e=new t[1]({props:{params:t[0],viewType:t[2]}}),{c(){Ce(e.$$.fragment)},m(i,l){Ee(e,i,l),n=!0},p(i,[l]){const o={};l&1&&(o.params=i[0]),l&4&&(o.viewType=i[2]),e.$set(o)},i(i){n||($(e.$$.fragment,i),n=!0)},o(i){ne(e.$$.fragment,i),n=!1},d(i){ke(e,i)}}}function ea(t,e,n){let{params:i}=e,l,o;const r=Le.get(["clientDefs",i.scope,"additionalLayouts",i.type])||i.type;switch(r&&(i.reelType=r),t.$$set=a=>{"params"in a&&n(0,i=a.params)},r){case"list":n(1,l=ri);break;case"leftSidebar":n(1,l=ri),n(0,i.fieldTypes=["link","linkMultiple"],i);break;case"kanban":n(1,l=ri),n(0,i.dataAttributeList=["id","name","link","align","view","isLarge","cssStyle"],i),n(0,i.dataAttributesDefs={link:{type:"bool"},isLarge:{type:"bool"},width:{type:"float"},cssStyle:{type:"varchar"},align:{type:"enum",options:["left","right"]},view:{type:"varchar",readOnly:!0},name:{type:"varchar",readOnly:!0}},i);break;case"relationships":n(1,l=Gr);break;case"detail":n(1,l=xr);break;case"sidePanelsDetail":n(2,o="detail"),n(1,l=Hr);break}return[i,l,o]}class ta extends ve{constructor(e){super(),be(this,e,ea,$r,ue,{params:0})}}function na(t){let e,n,i,l,o,r=R.translate("apiRequest","labels","Admin")+"",a,s,u,c,f,p,m,d,g,h,v,C,D,k,E,I,w,P,_,L,j,O,G=R.translate("response","fields","Admin")+"",M,T,q=R.translate("status","labels","Admin")+"",ye,Ye,Pt,en,Ze,ft,F;return{c(){e=S("div"),n=S("h3"),i=S("div"),l=S("div"),o=S("a"),o.textContent=`${R.translate("Administration")}`,a=ae(r),s=H(),u=S("div"),u.textContent=`${R.translate("apiRequest","labels","Admin")}`,c=H(),f=S("button"),f.textContent=`${R.translate("execute","labels","Admin")}`,p=H(),m=S("div"),d=S("div"),g=S("div"),h=S("div"),v=S("label"),v.textContent=`${R.translate("Type","fields","Admin")}`,C=H(),D=S("div"),k=H(),E=S("div"),I=S("div"),w=S("label"),w.textContent=`${R.translate("request","fields","Admin")}`,P=H(),_=S("div"),L=H(),j=S("div"),O=S("label"),M=ae(G),T=S("span"),ye=ae(q),Ye=ae(": "),Pt=S("span"),en=H(),Ze=S("div"),b(o,"href","#Admin"),b(l,"class","breadcrumbs-wrapper"),b(i,"class","header-breadcrumbs fixed-header-breadcrumbs"),b(u,"class","header-title"),Ie(f,"margin","10px 7px 10px 5px"),b(f,"class","btn btn-primary action"),b(f,"data-action","execute"),b(f,"type","button"),b(e,"class","page-header"),b(v,"class","control-label"),b(v,"data-name","type"),b(D,"class","field"),b(D,"data-name","type"),b(h,"class","col-xs-12 cell form-group"),b(g,"class","row"),b(d,"class","col-sm-3"),b(m,"class","row"),b(w,"class","control-label"),b(w,"data-name","request"),b(_,"class","field"),b(_,"data-name","request"),b(I,"class","col-sm-12 col-md-6 cell form-group"),b(T,"class","pull-right status hidden"),Ie(O,"width","100%"),b(O,"class","control-label"),b(O,"data-name","response"),b(Ze,"class","field"),b(Ze,"data-name","response"),b(j,"class","col-sm-12 col-md-6 cell form-group"),b(E,"class","row")},m(N,X){U(N,e,X),y(e,n),y(n,i),y(i,l),y(l,o),y(l,a),y(n,s),y(n,u),y(e,c),y(e,f),U(N,p,X),U(N,m,X),y(m,d),y(d,g),y(g,h),y(h,v),y(h,C),y(h,D),U(N,k,X),U(N,E,X),y(E,I),y(I,w),y(I,P),y(I,_),y(E,L),y(E,j),y(j,O),y(O,M),y(O,T),y(T,ye),y(T,Ye),y(T,Pt),y(j,en),y(j,Ze),ft||(F=te(f,"click",function(){rn(t[0](t[1]))&&t[0](t[1]).apply(this,arguments)}),ft=!0)},p(N,[X]){t=N},i:pe,o:pe,d(N){N&&(Y(e),Y(p),Y(m),Y(k),Y(E)),ft=!1,F()}}}function ia(t,e,n){let{afterOnMount:i=()=>null}=e,{sendRequest:l=()=>null}=e,o=null;return pt(()=>{jt.create("",function(r){n(1,o=r),i(o)})}),t.$$set=r=>{"afterOnMount"in r&&n(2,i=r.afterOnMount),"sendRequest"in r&&n(0,l=r.sendRequest)},[l,o,i]}class la extends ve{constructor(e){super(),be(this,e,ia,na,ue,{afterOnMount:2,sendRequest:0})}}function Nl(t,e,n){const i=t.slice();return i[12]=e[n],i}function Fl(t){let e,n=t[12].label+"",i,l,o,r,a,s,u;function c(){return t[10](t[12])}return{c(){e=S("button"),i=ae(n),l=H(),b(e,"data-action",o=t[12].name),e.disabled=t[1],b(e,"type","button"),b(e,"style",r=t[12].cssStyle),b(e,"class",a=`btn action btn-${t[12].style??"default"}`)},m(f,p){U(f,e,p),y(e,i),y(e,l),s||(u=te(e,"click",c),s=!0)},p(f,p){t=f,p&1&&n!==(n=t[12].label+"")&&Re(i,n),p&1&&o!==(o=t[12].name)&&b(e,"data-action",o),p&2&&(e.disabled=t[1]),p&1&&r!==(r=t[12].cssStyle)&&b(e,"style",r),p&1&&a!==(a=`btn action btn-${t[12].style??"default"}`)&&b(e,"class",a)},d(f){f&&Y(e),s=!1,u()}}}function oa(t){let e,n,i,l=ce(t[0]),o=[];for(let s=0;s<l.length;s+=1)o[s]=Fl(Nl(t,l,s));const r=t[9].default,a=At(r,t,t[8],null);return{c(){e=S("div");for(let s=0;s<o.length;s+=1)o[s].c();n=H(),a&&a.c(),b(e,"class","button-container"),Ie(e,"padding-top","10px")},m(s,u){U(s,e,u);for(let c=0;c<o.length;c+=1)o[c]&&o[c].m(e,null);t[11](e),U(s,n,u),a&&a.m(s,u),i=!0},p(s,[u]){if(u&11){l=ce(s[0]);let c;for(c=0;c<l.length;c+=1){const f=Nl(s,l,c);o[c]?o[c].p(f,u):(o[c]=Fl(f),o[c].c(),o[c].m(e,null))}for(;c<o.length;c+=1)o[c].d(1);o.length=l.length}a&&a.p&&(!i||u&256)&&Mt(a,r,s,s[8],i?Ot(r,s[8],u,null):Nt(s[8]),null)},i(s){i||($(a,s),i=!0)},o(s){ne(a,s),i=!1},d(s){s&&(Y(e),Y(n)),sn(o,s),t[11](null),a&&a.d(s)}}}function ra(t,e,n){let{$$slots:i={},$$scope:l}=e,{params:o}=e,{fetch:r}=e,{validate:a=()=>!0}=e,s=!1,{buttonList:u=[{name:"save",label:R.translate("Save","labels"),style:"primary"},{name:"cancel",label:R.translate("Cancel","labels")}]}=e,c;function f(){n(1,s=!0);const g=r();a(g)&&o.onSaved(g),n(1,s=!1)}function p(g){if(g.action){g.action();return}switch(g.name){case"save":f();break}}const m=g=>p(g);function d(g){we[g?"unshift":"push"](()=>{c=g,n(2,c)})}return t.$$set=g=>{"params"in g&&n(4,o=g.params),"fetch"in g&&n(5,r=g.fetch),"validate"in g&&n(6,a=g.validate),"buttonList"in g&&n(0,u=g.buttonList),"$$scope"in g&&n(8,l=g.$$scope)},[u,s,c,p,o,r,a,f,l,i,m,d]}class aa extends ve{constructor(e){super(),be(this,e,ra,oa,ue,{params:4,fetch:5,validate:6,buttonList:0,save:7})}get save(){return this.$$.ctx[7]}}function Rl(t,e,n){const i=t.slice();return i[22]=e[n],i}function Bl(t,e,n){const i=t.slice();return i[22]=e[n],i}function Hl(t){let e,n,i;function l(){return t[14](t[22])}return{c(){e=S("a"),e.innerHTML='<i class="fas fa-pencil-alt fa-sm svelte-k36s4n"></i>',b(e,"href","javascript:"),b(e,"data-action","editField"),b(e,"class","edit-field svelte-k36s4n")},m(o,r){U(o,e,r),n||(i=te(e,"click",l),n=!0)},p(o,r){t=o},d(o){o&&Y(e),n=!1,i()}}}function Wl(t){let e,n,i;function l(){return t[15](t[22])}return{c(){e=S("a"),e.innerHTML='<i class="fas fa-times"></i>',b(e,"href","javascript:"),b(e,"data-action","removeField"),b(e,"class","remove-field svelte-k36s4n")},m(o,r){U(o,e,r),n||(i=te(e,"click",l),n=!0)},p(o,r){t=o},d(o){o&&Y(e),n=!1,i()}}}function jl(t,e){let n,i,l,o=e[22].label+"",r,a,s,u,c,f,p,m=e[22].canEdit&&Hl(e),d=e[22].canRemove&&Wl(e),g=[An(e[22]),{class:p=(e[22].isGroup?"group":"")+" "+(e[22].groupEnd?"end":"")+" "+(e[1][e[22].name]&&!e[22].isGroup?"in-group":"")}],h={};for(let v=0;v<g.length;v+=1)h=Tt(h,g[v]);return{key:t,first:null,c(){n=S("li"),i=S("div"),l=S("label"),r=ae(o),s=H(),u=S("div"),m&&m.c(),c=H(),d&&d.c(),f=H(),b(l,"title",a=e[22].label),b(l,"class","svelte-k36s4n"),b(i,"class","left svelte-k36s4n"),b(u,"class","right svelte-k36s4n"),tt(n,h),ge(n,"svelte-k36s4n",!0),this.first=n},m(v,C){U(v,n,C),y(n,i),y(i,l),y(l,r),y(n,s),y(n,u),m&&m.m(u,null),y(u,c),d&&d.m(u,null),y(n,f)},p(v,C){e=v,C&1&&o!==(o=e[22].label+"")&&Re(r,o),C&1&&a!==(a=e[22].label)&&b(l,"title",a),e[22].canEdit?m?m.p(e,C):(m=Hl(e),m.c(),m.m(u,c)):m&&(m.d(1),m=null),e[22].canRemove?d?d.p(e,C):(d=Wl(e),d.c(),d.m(u,null)):d&&(d.d(1),d=null),tt(n,h=hn(g,[C&1&&An(e[22]),C&3&&p!==(p=(e[22].isGroup?"group":"")+" "+(e[22].groupEnd?"end":"")+" "+(e[1][e[22].name]&&!e[22].isGroup?"in-group":""))&&{class:p}])),ge(n,"svelte-k36s4n",!0)},d(v){v&&Y(n),m&&m.d(),d&&d.d()}}}function zl(t,e){let n,i,l,o=e[22].label+"",r,a,s,u=[An(e[22])],c={};for(let f=0;f<u.length;f+=1)c=Tt(c,u[f]);return{key:t,first:null,c(){n=S("li"),i=S("div"),l=S("label"),r=ae(o),s=H(),b(l,"title",a=e[22].label),b(l,"class","svelte-k36s4n"),b(i,"class","left svelte-k36s4n"),tt(n,c),ge(n,"svelte-k36s4n",!0),this.first=n},m(f,p){U(f,n,p),y(n,i),y(i,l),y(l,r),y(n,s)},p(f,p){e=f,p&8&&o!==(o=e[22].label+"")&&Re(r,o),p&8&&a!==(a=e[22].label)&&b(l,"title",a),tt(n,c=hn(u,[p&8&&An(e[22])])),ge(n,"svelte-k36s4n",!0)},d(f){f&&Y(n)}}}function sa(t){let e,n,i,l,o,r,a=[],s=new Map,u,c,f,p,m,d,g,h,v=[],C=new Map,D=ce(t[0].sort(ql));const k=w=>w[22].name;for(let w=0;w<D.length;w+=1){let P=Bl(t,D,w),_=k(P);s.set(_,a[w]=jl(_,P))}let E=ce(t[3]);const I=w=>w[22].name;for(let w=0;w<E.length;w+=1){let P=Rl(t,E,w),_=I(P);C.set(_,v[w]=zl(_,P))}return{c(){e=S("div"),n=S("div"),i=S("div"),l=S("header"),l.textContent=`${R.translate("Selected","labels","Admin")}`,o=H(),r=S("ul");for(let w=0;w<a.length;w+=1)a[w].c();u=H(),c=S("div"),f=H(),p=S("div"),m=S("div"),d=S("header"),d.textContent=`${R.translate("Available","labels","Admin")}`,g=H(),h=S("ul");for(let w=0;w<v.length;w+=1)v[w].c();b(l,"class","svelte-k36s4n"),b(r,"class","enabled connected svelte-k36s4n"),b(i,"class","well svelte-k36s4n"),b(n,"class","col-sm-5"),b(c,"class","col-sm-2"),b(d,"class","svelte-k36s4n"),b(h,"class","disabled connected svelte-k36s4n"),b(m,"class","well svelte-k36s4n"),b(p,"class","col-sm-5"),b(e,"id","layout"),b(e,"class","row")},m(w,P){U(w,e,P),y(e,n),y(n,i),y(i,l),y(i,o),y(i,r);for(let _=0;_<a.length;_+=1)a[_]&&a[_].m(r,null);y(e,u),y(e,c),y(e,f),y(e,p),y(p,m),y(m,d),y(m,g),y(m,h);for(let _=0;_<v.length;_+=1)v[_]&&v[_].m(h,null);t[16](e)},p(w,P){P&2115&&(D=ce(w[0].sort(ql)),a=yt(a,P,k,1,w,D,s,r,_t,jl,null,Bl)),P&8&&(E=ce(w[3]),v=yt(v,P,I,1,w,E,C,h,_t,zl,null,Rl))},d(w){w&&Y(e);for(let P=0;P<a.length;P+=1)a[P].d();for(let P=0;P<v.length;P+=1)v[P].d();t[16](null)}}}function ua(t){let e,n,i={params:t[2],validate:t[8],fetch:t[7],loadData:t[5],buttonList:t[4],$$slots:{default:[sa]},$$scope:{ctx:t}};return e=new aa({props:i}),t[17](e),{c(){Ce(e.$$.fragment)},m(l,o){Ee(e,l,o),n=!0},p(l,[o]){const r={};o&4&&(r.params=l[2]),o&256&&(r.validate=l[8]),o&128&&(r.fetch=l[7]),o&32&&(r.loadData=l[5]),o&16&&(r.buttonList=l[4]),o&134218315&&(r.$$scope={dirty:o,ctx:l}),e.$set(r)},i(l){n||($(e.$$.fragment,l),n=!0)},o(l){ne(e.$$.fragment,l),n=!1},d(l){t[17](null),ke(e,l)}}}function ca(t){return t.toLowerCase()}function Gl(t,e){return t[e]}function An(t){let e={};return["name","id"].forEach(n=>{Gl(t,n)!=null&&(e[`data-${ca(n)}`]=Gl(t,n))}),e}const ql=(t,e)=>t.sortOrder-e.sortOrder;function fa(t,e,n){let i,l,o,{params:r}=e,{enabledItems:a=[]}=e,{disabledItems:s=[]}=e,{buttonList:u}=e,{loadData:c}=e,{refresh:f=()=>{}}=e,{editItem:p}=e,{getGroupId:m=()=>"id"}=e,{fieldsInGroup:d}=e,g;function h(_){let L=!1,j={};_.forEach(O=>{if(O.isGroup){L=O.name!=="";return}L&&(j[O.name]=!0)}),n(1,d=j)}pt(()=>{v()}),Nn(()=>{l&&l.destroy(),o&&o.destroy()});function v(){const _={group:"fields",draggable:"li",animation:150};l=z.create(i.querySelector("ul.enabled"),{..._,onEnd(L){if(L.to.closest(".connected").classList.contains("enabled")){const[j]=a.splice(L.oldIndex,1);a.splice(L.newIndex,0,j);for(let O=L.newIndex;O<a.length;O++)n(0,a[O].sortOrder=(O>0?a[O-1].sortOrder:0)+O,a);h(a),f()}else{const j=a[L.oldIndex];if(j.canDisabled===!1){f();return}a.splice(L.oldIndex,1),s.splice(L.newIndex,0,j),f()}}}),o=z.create(i.querySelector("ul.disabled"),{..._,onEnd(L){if(L.to.closest(".connected").classList.contains("disabled")){const[j]=s.splice(L.oldIndex,1);s.splice(L.newIndex,0,j)}else{const j=s[L.oldIndex];s.splice(L.oldIndex,1),a.splice(L.newIndex,0,j);for(let O=L.newIndex;O<a.length;O++)n(0,a[O].sortOrder=(O>0?a[O-1].sortOrder:0)+O,a);h(a),f()}}})}let{fetch:C=()=>{let _=[],L=!1,j=!1;for(let T=0;T<a.length;T++){const q=a[T];if(q.isGroup){L=!q.groupEnd,_.push({id:q.id,name:q.name,color:q.color,iconClass:q.iconClass,items:[]});continue}L?_[_.length-1].items.push(q.name):_.push(q.name)}let O=!1,G=_.filter(T=>{if(typeof T=="object"){if(T.name!==""&&!T.items.length)return!1;if(T.name!==""&&T.items.length)return O=!0,!0;if(T.name===""&&O)return O=!1,!0;if(T.name===""&&!O)return!1}return!0});j=G.length!==_.length,_=G;let M=[];for(let T=0;T<_.length;T++){let q=_[T];M.push(q),typeof q=="object"&&q.name!==""&&(T===_.length-1||!(typeof _[T+1]=="object"&&_[T+1].name===""))&&(j=!0,M.push({id:m(),name:"",items:[]}))}return{adjusted:j,navigation:M}}}=e;function D(_){a.splice(a.findIndex(L=>L.id===_.id),1),f()}let{validate:k=_=>_.length===0?(Ge.notify("Menu cannot be empty","error"),!1):!0}=e;const E=_=>p(_),I=_=>D(_);function w(_){we[_?"unshift":"push"](()=>{i=_,n(9,i)})}function P(_){we[_?"unshift":"push"](()=>{g=_,n(10,g)})}return t.$$set=_=>{"params"in _&&n(2,r=_.params),"enabledItems"in _&&n(0,a=_.enabledItems),"disabledItems"in _&&n(3,s=_.disabledItems),"buttonList"in _&&n(4,u=_.buttonList),"loadData"in _&&n(5,c=_.loadData),"refresh"in _&&n(12,f=_.refresh),"editItem"in _&&n(6,p=_.editItem),"getGroupId"in _&&n(13,m=_.getGroupId),"fieldsInGroup"in _&&n(1,d=_.fieldsInGroup),"fetch"in _&&n(7,C=_.fetch),"validate"in _&&n(8,k=_.validate)},t.$$.update=()=>{t.$$.dirty&1&&h(a)},[a,d,r,s,u,c,p,C,k,i,g,D,f,m,E,I,w,P]}class Xl extends ve{constructor(e){super(),be(this,e,fa,ua,ue,{params:2,enabledItems:0,disabledItems:3,buttonList:4,loadData:5,refresh:12,editItem:6,getGroupId:13,fieldsInGroup:1,fetch:7,validate:8})}}function Yl(t){let e,n,i={params:t[0],enabledItems:t[2],disabledItems:t[4],buttonList:t[6],fieldsInGroup:t[5],refresh:t[7],editItem:t[8],getGroupId:$t};return e=new Xl({props:i}),t[9](e),{c(){Ce(e.$$.fragment)},m(l,o){Ee(e,l,o),n=!0},p(l,o){const r={};o&1&&(r.params=l[0]),o&4&&(r.enabledItems=l[2]),e.$set(r)},i(l){n||($(e.$$.fragment,l),n=!0)},o(l){ne(e.$$.fragment,l),n=!1},d(l){t[9](null),ke(e,l)}}}function da(t){let e,n=t[3],i,l=Yl(t);return{c(){e=S("div"),l.c()},m(o,r){U(o,e,r),l.m(e,null),i=!0},p(o,[r]){r&8&&ue(n,n=o[3])?(bt(),ne(l,1,1,pe),vt(),l=Yl(o),l.c(),$(l,1),l.m(e,null)):l.p(o,r)},i(o){i||($(l),i=!0)},o(o){ne(l),i=!1},d(o){o&&Y(e),l.d(o)}}}let pa="_delimiter_";function $t(){return pa+ha()}function ha(){return Math.floor((1+Math.random())*4294967296).toString(16).substring(1)}function ma(t,e,n){let{params:i}=e,l,o=[],r=[],a=0,s={},u=[{name:"save",label:R.translate("Save","labels"),style:"primary"},{name:"cancel",label:R.translate("Cancel","labels")},{name:"addGroup",label:R.translate("addGroup","labels"),cssStyle:"margin-left: 30px",action:()=>{i.onEditItem({id:$t(),groupEnd:!1},d=>{let g=10;o.length&&(g=o[o.length-1].sortOrder+10);let h={isGroup:!0,canEdit:!0,canRemove:!0,isGroup:!0,canDisabled:!1,name:"",label:"",sortOrder:g,...d};o.push(h),h.name!==""&&o.push({id:$t(),isGroup:!0,canEdit:!0,canRemove:!0,isGroup:!0,canDisabled:!1,groupEnd:!0,name:"",label:"",sortOrder:h.sortOrder+1}),c()})}}];function c(){n(3,a++,a)}function f(d){i.onEditItem(d,g=>{let h=o.findIndex(v=>v.id===g.id);n(2,o[h]=g,o),c()})}p();function p(){let d=i.list??[],g=0;for(let h=0;h<d.length;h++){let v=d[h];if(typeof v=="string")Le.get(["scopes",v,"tab"])&&o.push({name:v,label:R.translate(v,"scopeNamesPlural"),sortOrder:g}),g++;else if(typeof v=="object"){o.push({id:v.id??$t(),canEdit:!0,canRemove:!0,isGroup:!0,canDisabled:!1,groupEnd:v.name==="",name:v.name,label:v.name,sortOrder:g}),g++;for(const C of v.items)Le.get(["scopes",C,"tab"])&&(o.push({name:C,label:R.translate(C,"scopeNamesPlural"),sortOrder:g}),g++);if(h<d.length-1&&d[h+1].name==="")continue;v.name!==""&&(h===d.length-1||typeof d[h+h]=="string"||v.items.length===0)&&(o.push({id:$t(),canEdit:!0,canRemove:!0,canDisabled:!1,isGroup:!0,groupEnd:!0,name:"",label:"",sortOrder:g}),g++)}}Object.entries(Le.get(["scopes"])).forEach(([h,v])=>{v.disabled||v.emHidden||!v.tab||o.find(C=>C.name===h)||r.push({name:h,label:R.translate(h,"scopeNamesPlural")})}),r.sort((h,v)=>h.label.localeCompare(v.label))}function m(d){we[d?"unshift":"push"](()=>{l=d,n(1,l)})}return t.$$set=d=>{"params"in d&&n(0,i=d.params)},[i,l,o,a,r,s,u,c,f,m]}class ga extends ve{constructor(e){super(),be(this,e,ma,da,ue,{params:0})}}function Ul(t){let e,n,i={params:t[0],enabledItems:t[3],disabledItems:t[4],buttonList:t[6],fieldsInGroup:t[5],refresh:t[7],validate:va};return e=new Xl({props:i}),t[8](e),{c(){Ce(e.$$.fragment)},m(l,o){Ee(e,l,o),n=!0},p(l,o){const r={};o&1&&(r.params=l[0]),e.$set(r)},i(l){n||($(e.$$.fragment,l),n=!0)},o(l){ne(e.$$.fragment,l),n=!1},d(l){t[8](null),ke(e,l)}}}function ba(t){let e,n=t[2],i,l=Ul(t);return{c(){e=S("div"),l.c()},m(o,r){U(o,e,r),l.m(e,null),i=!0},p(o,[r]){r&4&&ue(n,n=o[2])?(bt(),ne(l,1,1,pe),vt(),l=Ul(o),l.c(),$(l,1),l.m(e,null)):l.p(o,r)},i(o){i||($(l),i=!0)},o(o){ne(l),i=!1},d(o){o&&Y(e),l.d(o)}}}function va(t){return!0}function _a(t,e,n){let{params:i}=e,l,o=[],r=[],a=0,s={},u=[{name:"save",label:R.translate("Save","labels"),style:"primary"},{name:"cancel",label:R.translate("Cancel","labels")}];function c(){n(2,a++,a)}f();function f(){let m=i.list??[],d=0;for(let g=0;g<m.length;g++){let h=m[g];typeof h=="string"&&(Le.get(["scopes",h,"tab"])&&o.push({name:h,label:R.translate(h,"scopeNamesPlural"),sortOrder:d}),d++)}Object.entries(Le.get(["scopes"])).forEach(([g,h])=>{h.disabled||h.emHidden||!h.tab||o.find(v=>v.name===g)||r.push({name:g,label:R.translate(g,"scopeNamesPlural")})}),r.sort((g,h)=>g.label.localeCompare(h.label))}function p(m){we[m?"unshift":"push"](()=>{l=m,n(1,l)})}return t.$$set=m=>{"params"in m&&n(0,i=m.params)},[i,l,a,o,r,s,u,c,p]}class ya extends ve{constructor(e){super(),be(this,e,_a,ba,ue,{params:0})}}function Vl(t,{delay:e=0,duration:n=400,easing:i=Ei}={}){const l=+getComputedStyle(t).opacity;return{delay:e,duration:n,easing:i,css:o=>`opacity: ${o*l}`}}const wa=t=>({}),Jl=t=>({}),Ea=t=>({}),Kl=t=>({}),ka=t=>({}),Ql=t=>({});function Zl(t){let e,n,i;var l=t[2];function o(r,a){return{}}return l&&(e=un(l,o())),{c(){e&&Ce(e.$$.fragment),n=Ft()},m(r,a){e&&Ee(e,r,a),U(r,n,a),i=!0},p(r,a){if(a&4&&l!==(l=r[2])){if(e){bt();const s=e;ne(s.$$.fragment,1,0,()=>{ke(s,1)}),vt()}l?(e=un(l,o()),Ce(e.$$.fragment),$(e.$$.fragment,1),Ee(e,n.parentNode,n)):e=null}},i(r){i||(e&&$(e.$$.fragment,r),i=!0)},o(r){e&&ne(e.$$.fragment,r),i=!1},d(r){r&&Y(n),e&&ke(e,r)}}}function Sa(t){let e,n,i=t[2]&&Zl(t);return{c(){i&&i.c(),e=Ft()},m(l,o){i&&i.m(l,o),U(l,e,o),n=!0},p(l,o){l[2]?i?(i.p(l,o),o&4&&$(i,1)):(i=Zl(l),i.c(),$(i,1),i.m(e.parentNode,e)):i&&(bt(),ne(i,1,1,()=>{i=null}),vt())},i(l){n||($(i),n=!0)},o(l){ne(i),n=!1},d(l){l&&Y(e),i&&i.d(l)}}}function xl(t){let e,n;const i=t[15]["scopes-enum"],l=At(i,t,t[14],Kl),o=l||Da(t);return{c(){e=S("div"),o&&o.c(),b(e,"class","panel-group scopes-enum")},m(r,a){U(r,e,a),o&&o.m(e,null),n=!0},p(r,a){l?l.p&&(!n||a&16384)&&Mt(l,i,r,r[14],n?Ot(i,r[14],a,Ea):Nt(r[14]),Kl):o&&o.p&&(!n||a&8)&&o.p(r,n?a:-1)},i(r){n||($(o,r),n=!0)},o(r){ne(o,r),n=!1},d(r){r&&Y(e),o&&o.d(r)}}}function Da(t){let e,n,i;var l=t[3];function o(r,a){return{}}return l&&(e=un(l,o())),{c(){e&&Ce(e.$$.fragment),n=Ft()},m(r,a){e&&Ee(e,r,a),U(r,n,a),i=!0},p(r,a){if(a&8&&l!==(l=r[3])){if(e){bt();const s=e;ne(s.$$.fragment,1,0,()=>{ke(s,1)}),vt()}l?(e=un(l,o()),Ce(e.$$.fragment),$(e.$$.fragment,1),Ee(e,n.parentNode,n)):e=null}},i(r){i||(e&&$(e.$$.fragment,r),i=!0)},o(r){e&&ne(e.$$.fragment,r),i=!1},d(r){r&&Y(n),e&&ke(e,r)}}}function $l(t){let e,n,i;return{c(){e=S("div"),b(e,"class","category-panel-resizer svelte-pq4xap")},m(l,o){U(l,e,o),n||(i=te(e,"mousedown",t[8]),n=!0)},p:pe,d(l){l&&Y(e),n=!1,i()}}}function Ca(t){let e,n,i,l,o,r,a,s,u,c,f,p,m,d,g,h,v,C,D,k,E,I;const w=t[15]["category-search"],P=At(w,t,t[14],Ql),_=P||Sa(t);let L=t[3]&&xl(t);const j=t[15].tree,O=At(j,t,t[14],Jl);let G=!t[0]&&$l(t);return{c(){e=S("aside"),n=S("button"),i=S("span"),l=H(),o=S("span"),r=H(),a=S("div"),s=S("div"),u=S("div"),c=S("a"),f=ae("Unset Selection"),m=H(),d=S("div"),_&&_.c(),g=H(),L&&L.c(),h=H(),v=S("div"),O&&O.c(),C=H(),G&&G.c(),b(i,"class","toggle-icon-left fas fa-angle-left"),ge(i,"hidden",t[0]),b(o,"class","toggle-icon-right fas fa-angle-right"),ge(o,"hidden",!t[0]),b(n,"type","button"),b(n,"class","btn btn-default collapse-panel"),ge(n,"collapsed",t[0]),b(c,"href",p="#"+t[1]),b(c,"class","btn btn-default active reset-tree-filter"),b(u,"class","btn-group"),b(s,"class","panel-group text-center"),b(d,"class","panel-group category-search"),b(v,"class","panel-group category-tree"),b(a,"class","category-panel"),ge(a,"hidden",t[0]),b(e,"class","catalog-tree-panel"),Ie(e,"width",t[5]),ge(e,"collapsed",t[0])},m(M,T){U(M,e,T),y(e,n),y(n,i),y(n,l),y(n,o),y(e,r),y(e,a),y(a,s),y(s,u),y(u,c),y(c,f),y(a,m),y(a,d),_&&_.m(d,null),y(a,g),L&&L.m(a,null),y(a,h),y(a,v),O&&O.m(v,null),t[16](v),y(a,C),G&&G.m(a,null),k=!0,E||(I=[te(n,"click",t[6]),te(c,"click",t[7])],E=!0)},p(M,[T]){(!k||T&1)&&ge(i,"hidden",M[0]),(!k||T&1)&&ge(o,"hidden",!M[0]),(!k||T&1)&&ge(n,"collapsed",M[0]),(!k||T&2&&p!==(p="#"+M[1]))&&b(c,"href",p),P?P.p&&(!k||T&16384)&&Mt(P,w,M,M[14],k?Ot(w,M[14],T,ka):Nt(M[14]),Ql):_&&_.p&&(!k||T&4)&&_.p(M,k?T:-1),M[3]?L?(L.p(M,T),T&8&&$(L,1)):(L=xl(M),L.c(),$(L,1),L.m(a,h)):L&&(bt(),ne(L,1,1,()=>{L=null}),vt()),O&&O.p&&(!k||T&16384)&&Mt(O,j,M,M[14],k?Ot(j,M[14],T,wa):Nt(M[14]),Jl),M[0]?G&&(G.d(1),G=null):G?G.p(M,T):(G=$l(M),G.c(),G.m(a,null)),(!k||T&1)&&ge(a,"hidden",M[0]),(!k||T&32)&&Ie(e,"width",M[5]),(!k||T&1)&&ge(e,"collapsed",M[0])},i(M){k||($(_,M),$(L),$(O,M),M&&Ht(()=>{k&&(D||(D=Bi(e,Vl,{},!0)),D.run(1))}),k=!0)},o(M){ne(_,M),ne(L),ne(O,M),M&&(D||(D=Bi(e,Vl,{},!1)),D.run(0)),k=!1},d(M){M&&Y(e),_&&_.d(M),L&&L.d(),O&&O.d(M),t[16](null),G&&G.d(),M&&D&&D.end(),E=!1,Fe(I)}}}function La(t,e,n){let i,{$$slots:l={},$$scope:o}=e,{scope:r}=e,{treeScope:a=r}=e,{minWidth:s=220}=e,{maxWidth:u=600}=e,{currentWidth:c=s}=e,{isCollapsed:f=!1}=e,{categorySearch:p=null}=e,{scopesEnum:m=null}=e,{maxSize:d=20}=e;const g=Oi();let h,v=!1,C,D;function k(){n(0,f=!f),g("collapse-panel",{isCollapsed:f}),Gt.set("catalog-tree-panel",r,f?"collapsed":""),f||g("rebuild-tree")}function E(L){L.preventDefault(),g("tree-reset")}function I(L){if(console.log("handle resize"),!v)return;L.preventDefault();const j=D+(L.pageX-C);j>=s&&j<=u&&n(9,c=j)}function w(L){console.log("start resize"),v=!0,C=L.pageX,D=c,document.addEventListener("mousemove",I),document.addEventListener("mouseup",P,{once:!0}),document.body.style.userSelect="none"}function P(){console.log("stop resize"),v&&(v=!1,Gt.set("panelWidth",r,c.toString()),document.removeEventListener("mousemove",I),document.body.style.userSelect="")}pt(()=>{const L=Gt.get("panelWidth",r);return L&&n(9,c=parseInt(L)||s),(window.innerWidth<=767||Gt.get("catalog-tree-panel",r))&&n(0,f=!0),()=>{v&&P()}});function _(L){we[L?"unshift":"push"](()=>{h=L,n(4,h)})}return t.$$set=L=>{"scope"in L&&n(1,r=L.scope),"treeScope"in L&&n(10,a=L.treeScope),"minWidth"in L&&n(11,s=L.minWidth),"maxWidth"in L&&n(12,u=L.maxWidth),"currentWidth"in L&&n(9,c=L.currentWidth),"isCollapsed"in L&&n(0,f=L.isCollapsed),"categorySearch"in L&&n(2,p=L.categorySearch),"scopesEnum"in L&&n(3,m=L.scopesEnum),"maxSize"in L&&n(13,d=L.maxSize),"$$scope"in L&&n(14,o=L.$$scope)},t.$$.update=()=>{t.$$.dirty&512&&c&&g("tree-width-changed",c),t.$$.dirty&513&&n(5,i=f?"auto":`${c}px`)},[f,r,p,m,h,i,k,E,w,c,a,s,u,d,o,l,_]}class Pa extends ve{constructor(e){super(),be(this,e,La,Ca,ue,{scope:1,treeScope:10,minWidth:11,maxWidth:12,currentWidth:9,isCollapsed:0,categorySearch:2,scopesEnum:3,maxSize:13})}}window.SvelteLanguage=R,window.SvelteUserData=jn,window.SvelteNotifier=Ge,window.SvelteLayoutManager=Ve,window.SvelteMetadata=Le,window.SvelteModelFactory=jt,window.SvelteConfig=jo,window.SvelteStorage=Gt,window.driver=wo,he.ApiRequestComponent=la,he.Favorites=ya,he.JobManagerIcon=Jo,he.LayoutComponent=ta,he.Navigation=ga,he.TreePanel=Pa,he.UpdatePanel=tr,Object.defineProperty(he,Symbol.toStringTag,{value:"Module"})});
