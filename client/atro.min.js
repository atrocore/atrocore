(function(fe,Z){typeof exports=="object"&&typeof module<"u"?Z(exports):typeof define=="function"&&define.amd?define(["exports"],Z):(fe=typeof globalThis<"u"?globalThis:fe||self,Z(fe.Svelte={}))})(this,function(fe){"use strict";var ha=Object.defineProperty;var ma=(fe,Z,qe)=>Z in fe?ha(fe,Z,{enumerable:!0,configurable:!0,writable:!0,value:qe}):fe[Z]=qe;var Sn=(fe,Z,qe)=>ma(fe,typeof Z!="symbol"?Z+"":Z,qe);function Z(){}function qe(t,e){for(const n in e)t[n]=e[n];return t}function kn(t){return t()}function Tn(){return Object.create(null)}function Ie(t){t.forEach(kn)}function Pn(t){return typeof t=="function"}function ve(t,e){return t!=t?e==e:t!==e||t&&typeof t=="object"||typeof t=="function"}let St;function Ln(t,e){return t===e?!0:(St||(St=document.createElement("a")),St.href=e,t===St.href)}function Ml(t){return Object.keys(t).length===0}function Rl(t,e,n,l){if(t){const i=Cn(t,e,n,l);return t[0](i)}}function Cn(t,e,n,l){return t[1]&&l?qe(n.ctx.slice(),t[1](l(e))):n.ctx}function Hl(t,e,n,l){if(t[2]&&l){const i=t[2](l(n));if(e.dirty===void 0)return i;if(typeof i=="object"){const a=[],o=Math.max(e.dirty.length,i.length);for(let s=0;s<o;s+=1)a[s]=e.dirty[s]|i[s];return a}return e.dirty|i}return e.dirty}function Bl(t,e,n,l,i,a){if(i){const o=Cn(e,n,l,a);t.p(o,i)}}function Yl(t){if(t.ctx.length>32){const e=[],n=t.ctx.length/32;for(let l=0;l<n;l++)e[l]=-1;return e}return-1}function _(t,e){t.appendChild(e)}function Q(t,e,n){t.insertBefore(e,n||null)}function G(t){t.parentNode&&t.parentNode.removeChild(t)}function Zt(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}function T(t){return document.createElement(t)}function ce(t){return document.createTextNode(t)}function X(){return ce(" ")}function In(){return ce("")}function le(t,e,n,l){return t.addEventListener(e,n,l),()=>t.removeEventListener(e,n,l)}function je(t){return function(e){return e.preventDefault(),t.call(this,e)}}function Jt(t){return function(e){return e.stopPropagation(),t.call(this,e)}}function h(t,e,n){n==null?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}const zl=["width","height"];function kt(t,e){const n=Object.getOwnPropertyDescriptors(t.__proto__);for(const l in e)e[l]==null?t.removeAttribute(l):l==="style"?t.style.cssText=e[l]:l==="__value"?t.value=t[l]=e[l]:n[l]&&n[l].set&&zl.indexOf(l)===-1?t[l]=e[l]:h(t,l,e[l])}function Xl(t){return Array.from(t.childNodes)}function Ae(t,e){e=""+e,t.data!==e&&(t.data=e)}function We(t,e,n,l){n==null?t.style.removeProperty(e):t.style.setProperty(e,n,"")}function Tt(t,e,n){t.classList.toggle(e,!!n)}function ql(t,e,{bubbles:n=!1,cancelable:l=!1}={}){return new CustomEvent(t,{detail:e,bubbles:n,cancelable:l})}let dt;function ht(t){dt=t}function Pt(){if(!dt)throw new Error("Function called outside component initialization");return dt}function xt(t){Pt().$$.on_mount.push(t)}function jl(t){Pt().$$.after_update.push(t)}function An(t){Pt().$$.on_destroy.push(t)}function Wl(){const t=Pt();return(e,n,{cancelable:l=!1}={})=>{const i=t.$$.callbacks[e];if(i){const a=ql(e,n,{cancelable:l});return i.slice().forEach(o=>{o.call(t,a)}),!a.defaultPrevented}return!0}}const tt=[],Oe=[];let nt=[];const On=[],Fn=Promise.resolve();let $t=!1;function Nn(){$t||($t=!0,Fn.then(Rn))}function Mn(){return Nn(),Fn}function en(t){nt.push(t)}const tn=new Set;let lt=0;function Rn(){if(lt!==0)return;const t=dt;do{try{for(;lt<tt.length;){const e=tt[lt];lt++,ht(e),Gl(e.$$)}}catch(e){throw tt.length=0,lt=0,e}for(ht(null),tt.length=0,lt=0;Oe.length;)Oe.pop()();for(let e=0;e<nt.length;e+=1){const n=nt[e];tn.has(n)||(tn.add(n),n())}nt.length=0}while(tt.length);for(;On.length;)On.pop()();$t=!1,tn.clear(),ht(t)}function Gl(t){if(t.fragment!==null){t.update(),Ie(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(en)}}function Ul(t){const e=[],n=[];nt.forEach(l=>t.indexOf(l)===-1?e.push(l):n.push(l)),n.forEach(l=>l()),nt=e}const Lt=new Set;let Ql;function Ee(t,e){t&&t.i&&(Lt.delete(t),t.i(e))}function Fe(t,e,n,l){if(t&&t.o){if(Lt.has(t))return;Lt.add(t),Ql.c.push(()=>{Lt.delete(t)}),t.o(e)}}function de(t){return(t==null?void 0:t.length)!==void 0?t:Array.from(t)}function Ct(t,e){t.d(1),e.delete(t.key)}function It(t,e,n,l,i,a,o,s,u,r,c,f){let m=t.length,p=a.length,d=m;const g={};for(;d--;)g[t[d].key]=d;const y=[],v=new Map,w=new Map,k=[];for(d=p;d--;){const E=f(i,a,d),H=n(E);let C=o.get(H);C?k.push(()=>C.p(E,e)):(C=r(H,E),C.c()),v.set(H,y[d]=C),H in g&&w.set(H,Math.abs(d-g[H]))}const D=new Set,b=new Set;function L(E){Ee(E,1),E.m(s,c),o.set(E.key,E),c=E.first,p--}for(;m&&p;){const E=y[p-1],H=t[m-1],C=E.key,ne=H.key;E===H?(c=E.first,m--,p--):v.has(ne)?!o.has(C)||D.has(C)?L(E):b.has(ne)?m--:w.get(C)>w.get(ne)?(b.add(C),L(E)):(D.add(ne),m--):(u(H,o),m--)}for(;m--;){const E=t[m];v.has(E.key)||u(E,o)}for(;p;)L(y[p-1]);return Ie(k),y}function Hn(t,e){const n={},l={},i={$$scope:1};let a=t.length;for(;a--;){const o=t[a],s=e[a];if(s){for(const u in o)u in s||(l[u]=1);for(const u in s)i[u]||(n[u]=s[u],i[u]=1);t[a]=s}else for(const u in o)i[u]=1}for(const o in l)o in n||(n[o]=void 0);return n}function Ge(t){t&&t.c()}function Ne(t,e,n){const{fragment:l,after_update:i}=t.$$;l&&l.m(e,n),en(()=>{const a=t.$$.on_mount.map(kn).filter(Pn);t.$$.on_destroy?t.$$.on_destroy.push(...a):Ie(a),t.$$.on_mount=[]}),i.forEach(en)}function Me(t,e){const n=t.$$;n.fragment!==null&&(Ul(n.after_update),Ie(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function Vl(t,e){t.$$.dirty[0]===-1&&(tt.push(t),Nn(),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function De(t,e,n,l,i,a,o=null,s=[-1]){const u=dt;ht(t);const r=t.$$={fragment:null,ctx:[],props:a,update:Z,not_equal:i,bound:Tn(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(u?u.$$.context:[])),callbacks:Tn(),dirty:s,skip_bound:!1,root:e.target||u.$$.root};o&&o(r.root);let c=!1;if(r.ctx=n?n(t,e.props||{},(f,m,...p)=>{const d=p.length?p[0]:m;return r.ctx&&i(r.ctx[f],r.ctx[f]=d)&&(!r.skip_bound&&r.bound[f]&&r.bound[f](d),c&&Vl(t,f)),m}):[],r.update(),c=!0,Ie(r.before_update),r.fragment=l?l(r.ctx):!1,e.target){if(e.hydrate){const f=Xl(e.target);r.fragment&&r.fragment.l(f),f.forEach(G)}else r.fragment&&r.fragment.c();e.intro&&Ee(t.$$.fragment),Ne(t,e.target,e.anchor),Rn()}ht(u)}class Se{constructor(){Sn(this,"$$");Sn(this,"$$set")}$destroy(){Me(this,1),this.$destroy=Z}$on(e,n){if(!Pn(n))return Z;const l=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return l.push(n),()=>{const i=l.indexOf(n);i!==-1&&l.splice(i,1)}}$set(e){this.$$set&&!Ml(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}const Kl="4",it=[];function at(t,e=Z){let n;const l=new Set;function i(s){if(ve(t,s)&&(t=s,n)){const u=!it.length;for(const r of l)r[1](),it.push(r,t);if(u){for(let r=0;r<it.length;r+=2)it[r][0](it[r+1]);it.length=0}}}function a(s){i(s(t))}function o(s,u=Z){const r=[s,u];return l.add(r),l.size===1&&(n=e(i,a)||Z),s(t),()=>{l.delete(r),l.size===0&&n&&(n(),n=null)}}return{set:i,update:a,subscribe:o}}const nn=at({}),Y={setTranslations(t){nn.set(t)},has(t,e,n){let l=!1;return nn.subscribe(i=>{if(n in i&&e in i[n]&&t in i[n][e]){l=!0;return}})(),l},get(t,e,n){let l=n;return nn.subscribe(i=>{if(t in i&&e in i[t]&&n in i[t][e]){l=i[t][e][n];return}if(t in i&&e in i[t]&&n in i[t][e]){l=i[t][e][n];return}if(t=="Global"){l=n;return}l=null})(),l},translate(t,e=null,n=null){n=n||"Global",e=e||"labels";let l=Y.get(n,e,t);return l===null&&n!="Global"&&(l=Y.get("Global",e,t)),l},translateOption(t,e,n=null){let l=Y.translate(e,"options",n);return l===null?"":typeof l=="object"?l[t]:t}},Bn=at({}),Yn={set(t){Bn.set(t)},get(){let t=null;return Bn.subscribe(e=>{e&&(t=e)})(),t}},ln=at(),Re={setNotifier(t){ln.set(t)},notify(t,e=null,n=2e3){ln.subscribe(l=>{l&&l.notify(t,e,2e3)})()},confirm(t=null,e=null,n){ln.subscribe(l=>{if(l){let i=null,a=null,o=null;typeof t=="string"||t instanceof String?(a=t,o=Y.translate("Yes")):(t=t||{},a=t.message,o=t.confirmText,i=t.confirmStyle||null),l.confirm(a,{confirmText:o,cancelText:Y.translate("Cancel"),confirmStyle:i},e,n)}})()}},At=at(),He={setLayoutManager(t){At.set(t)},resetToDefault(t,e,n,l){let i=null;return At.subscribe(a=>{a&&(i=a.resetToDefault(t,e,n,l))})(),i},get:function(t,e,n,l,i){let a=null;return At.subscribe(o=>{o&&(a=o.get(t,e,n,l,i))})(),a},set:function(t,e,n,l,i){let a=null;return At.subscribe(o=>{o&&(a=o.set(t,e,n,l,i))})(),a}},zn=at(),Ue={setMetadata(t){zn.set(t)},get(t){zn.subscribe(e=>{e&&e.get(t)})()}},Xn=at(),Ot={setModelFactory(t){Xn.set(t)},create(t,e){Xn.subscribe(n=>{n&&n.create(t,e)})()}};typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(Kl);function qn(t){let e,n,l,i,a,o,s,u,r,c,f,m,p,d,g;function y(k,D){return k[2]?Jl:Zl}let v=y(t),w=v(t);return{c(){e=T("div"),n=T("div"),l=T("div"),i=T("span"),i.textContent=`${Y.translate("queueManager","labels","QueueItem")}`,a=X(),o=T("span"),s=T("a"),s.innerHTML='<span aria-hidden="true">Ã—</span>',u=X(),w.c(),r=X(),c=T("a"),c.textContent=`${Y.translate("View List")}`,f=X(),m=T("div"),p=T("div"),p.textContent=`${Y.translate("Loading...")}`,h(i,"class","panel-heading-title"),h(s,"href","/"),h(s,"class","close svelte-1p6ppx8"),h(c,"href","#QueueItem"),h(c,"title",Y.translate("View List")),h(c,"class","qp-view-list svelte-1p6ppx8"),h(o,"class","pull-right"),h(l,"class","panel-heading clearfix"),h(p,"class","list-container"),h(m,"class","panel-body"),h(n,"class","panel panel-default"),h(e,"class","queue-panel-container")},m(k,D){Q(k,e,D),_(e,n),_(n,l),_(l,i),_(l,a),_(l,o),_(o,s),_(o,u),w.m(o,null),_(o,r),_(o,c),_(n,f),_(n,m),_(m,p),t[9](e),d||(g=le(s,"click",t[6]),d=!0)},p(k,D){v===(v=y(k))&&w?w.p(k,D):(w.d(1),w=v(k),w&&(w.c(),w.m(o,r)))},d(k){k&&G(e),w.d(),t[9](null),d=!1,g()}}}function Zl(t){let e,n,l;return{c(){e=T("a"),e.textContent=`${Y.translate("Pause")}`,h(e,"href","/"),h(e,"title",Y.translate("Pause")),h(e,"class","qm-button")},m(i,a){Q(i,e,a),n||(l=le(e,"click",t[8]),n=!0)},p:Z,d(i){i&&G(e),n=!1,l()}}}function Jl(t){let e,n,l;return{c(){e=T("a"),e.textContent=`${Y.translate("Start")}`,h(e,"href","/"),h(e,"title",Y.translate("Start")),h(e,"class","qm-button")},m(i,a){Q(i,e,a),n||(l=le(e,"click",t[7]),n=!0)},p:Z,d(i){i&&G(e),n=!1,l()}}}function xl(t){let e,n=t[0]&&qn(t);return{c(){n&&n.c(),e=In()},m(l,i){n&&n.m(l,i),Q(l,e,i)},p(l,[i]){l[0]?n?n.p(l,i):(n=qn(l),n.c(),n.m(e.parentNode,e)):n&&(n.d(1),n=null)},i:Z,o:Z,d(l){l&&G(e),n&&n.d(l)}}}function $l(t,e,n){let{isOpen:l=!1}=e,{close:i}=e,{icon:a}=e,o=!1;window.addEventListener("publicDataFetched",d=>{n(2,o=!!d.detail.qmPaused)});let s;function u(d){s&&!s.contains(d.target)&&a&&!a.contains(d.target)&&l===!0&&i()}xt(()=>{document.addEventListener("click",u)}),An(()=>{document.removeEventListener("click",u)});async function r(d){let g=Yn.get();if(g)try{const y=await fetch("/api/v1/App/action/QueueManagerUpdate",{method:"POST",headers:{"Content-Type":"application/json","Authorization-Token":btoa(g.user.userName+":"+g.token)},body:JSON.stringify({pause:d})});if(!y.ok)throw new Error("Network response was not ok");await y.json(),Re.notify("Done","success")}catch(y){console.error("Error:",y)}}const c=d=>{d.preventDefault(),i()},f=d=>{d.preventDefault(),r(!1)},m=d=>{d.preventDefault(),r(!0)};function p(d){Oe[d?"unshift":"push"](()=>{s=d,n(3,s)})}return t.$$set=d=>{"isOpen"in d&&n(0,l=d.isOpen),"close"in d&&n(1,i=d.close),"icon"in d&&n(5,a=d.icon)},[l,i,o,s,r,a,c,f,m,p]}class ei extends Se{constructor(e){super(),De(this,e,$l,xl,ve,{isOpen:0,close:1,icon:5})}}function jn(t){let e;return{c(){e=T("span"),h(e,"class","fas fa-pause-circle pause-icon")},m(n,l){Q(n,e,l)},d(n){n&&G(e)}}}function ti(t){let e,n,l,i,a,o,s,u,r=t[2]&&jn();return a=new ei({props:{icon:t[0],isOpen:t[1],close:t[4]}}),{c(){e=T("a"),n=T("span"),l=X(),r&&r.c(),i=X(),Ge(a.$$.fragment),h(n,"class","fas fa-tasks"),h(e,"href","/"),h(e,"class","notifications-button")},m(c,f){Q(c,e,f),_(e,n),_(e,l),r&&r.m(e,null),t[6](e),Q(c,i,f),Ne(a,c,f),o=!0,s||(u=le(e,"click",t[7]),s=!0)},p(c,[f]){c[2]?r||(r=jn(),r.c(),r.m(e,null)):r&&(r.d(1),r=null);const m={};f&1&&(m.icon=c[0]),f&2&&(m.isOpen=c[1]),a.$set(m)},i(c){o||(Ee(a.$$.fragment,c),o=!0)},o(c){Fe(a.$$.fragment,c),o=!1},d(c){c&&(G(e),G(i)),r&&r.d(),t[6](null),Me(a,c),s=!1,u()}}}function ni(t,e,n){let{renderTable:l=()=>{}}=e,i,a=!1,o=!1;window.addEventListener("publicDataFetched",f=>{n(2,o=!!f.detail.qmPaused)});function s(){a||(n(1,a=!0),l())}function u(){n(1,a=!1),window.dispatchEvent(new Event("qmPanelClosed"))}function r(f){Oe[f?"unshift":"push"](()=>{i=f,n(0,i)})}const c=f=>{f.preventDefault(),s()};return t.$$set=f=>{"renderTable"in f&&n(5,l=f.renderTable)},[i,a,o,s,u,l,r,c]}class li extends Se{constructor(e){super(),De(this,e,ni,ti,ve,{renderTable:5})}}function ii(t){let e,n=`${t[0]}px`,l=`${t[0]}px`,i=`${t[1]}px`;return{c(){e=T("div"),h(e,"class","loading-icon spinner svelte-yw8t7l"),We(e,"width",n),We(e,"height",l),We(e,"border-width",i)},m(a,o){Q(a,e,o)},p(a,[o]){o&1&&n!==(n=`${a[0]}px`)&&We(e,"width",n),o&1&&l!==(l=`${a[0]}px`)&&We(e,"height",l),o&2&&i!==(i=`${a[1]}px`)&&We(e,"border-width",i)},i:Z,o:Z,d(a){a&&G(e)}}}function ai(t,e,n){let{size:l=40}=e,{thickness:i=4}=e;return t.$$set=a=>{"size"in a&&n(0,l=a.size),"thickness"in a&&n(1,i=a.thickness)},[l,i]}class oi extends Se{constructor(e){super(),De(this,e,ai,ii,ve,{size:0,thickness:1})}}function Wn(t){let e,n;return{c(){e=T("img"),Ln(e.src,n=t[1])||h(e,"src",n),h(e,"class","logo"),h(e,"alt",t[0])},m(l,i){Q(l,e,i)},p(l,i){i&2&&!Ln(e.src,n=l[1])&&h(e,"src",n),i&1&&h(e,"alt",l[0])},d(l){l&&G(e)}}}function Gn(t){let e,n,l;return{c(){e=T("a"),n=T("i"),l=ce("Recovery Instructions"),h(n,"class","fa fa-history svelte-1qmezxs"),h(e,"href",t[2]),h(e,"target","_blank"),h(e,"class","btn btn-default svelte-1qmezxs"),h(e,"role","button"),We(e,"float","right")},m(i,a){Q(i,e,a),_(e,n),_(e,l)},p(i,a){a&4&&h(e,"href",i[2])},d(i){i&&G(e)}}}function Un(t){let e,n,l,i,a,o;return{c(){e=T("hr"),n=X(),l=T("pre"),i=ce(t[3]),h(l,"class","logs-container svelte-1qmezxs")},m(s,u){Q(s,e,u),Q(s,n,u),Q(s,l,u),_(l,i),t[11](l),a||(o=le(l,"scroll",t[8]),a=!0)},p(s,u){u&8&&Ae(i,s[3])},d(s){s&&(G(e),G(n),G(l)),t[11](null),a=!1,o()}}}function ri(t){let e,n,l,i,a,o,s,u,r,c,f,m,p,d,g,y,v,w,k=t[4]?"Hide":"Show",D,b,L,E,H,C,ne,se,V=t[1]&&Wn(t);c=new oi({props:{size:"40",thickness:"5"}});let W=t[2]&&Gn(t),K=t[4]&&t[3]&&Un(t);return{c(){e=T("div"),n=T("div"),l=T("div"),V&&V.c(),i=X(),a=T("div"),o=T("div"),s=T("h3"),s.textContent="System is updating...",u=X(),r=T("section"),Ge(c.$$.fragment),f=X(),m=T("h5"),p=ce(t[5]),d=X(),g=T("section"),y=T("div"),v=T("button"),w=T("i"),D=ce(k),b=ce(" logs"),E=X(),W&&W.c(),H=X(),K&&K.c(),h(l,"class","logo-container"),h(n,"class","panel-heading"),h(m,"class","svelte-1qmezxs"),h(r,"class","progress-section svelte-1qmezxs"),h(w,"class","fa fa-list svelte-1qmezxs"),h(v,"class","btn btn-default svelte-1qmezxs"),v.disabled=L=!t[3],h(y,"class","buttons"),h(g,"class","logs-section"),h(o,"class","form-group"),h(a,"class","panel-body"),h(e,"id","login"),h(e,"class","panel panel-default panel-updating")},m(F,z){Q(F,e,z),_(e,n),_(n,l),V&&V.m(l,null),_(e,i),_(e,a),_(a,o),_(o,s),_(o,u),_(o,r),Ne(c,r,null),_(r,f),_(r,m),_(m,p),_(o,d),_(o,g),_(g,y),_(y,v),_(v,w),_(v,D),_(v,b),_(y,E),W&&W.m(y,null),_(g,H),K&&K.m(g,null),C=!0,ne||(se=le(v,"click",t[7]),ne=!0)},p(F,[z]){F[1]?V?V.p(F,z):(V=Wn(F),V.c(),V.m(l,null)):V&&(V.d(1),V=null),(!C||z&32)&&Ae(p,F[5]),(!C||z&16)&&k!==(k=F[4]?"Hide":"Show")&&Ae(D,k),(!C||z&8&&L!==(L=!F[3]))&&(v.disabled=L),F[2]?W?W.p(F,z):(W=Gn(F),W.c(),W.m(y,null)):W&&(W.d(1),W=null),F[4]&&F[3]?K?K.p(F,z):(K=Un(F),K.c(),K.m(g,null)):K&&(K.d(1),K=null)},i(F){C||(Ee(c.$$.fragment,F),C=!0)},o(F){Fe(c.$$.fragment,F),C=!1},d(F){F&&G(e),V&&V.d(),Me(c),W&&W.d(),K&&K.d(),ne=!1,se()}}}function si(t){return t.replace(/^\d{2,4}.\d{2}.\d{2,4} \d{2}:\d{2}:\d{2}/g,"").replace(/^[\-\|\s]+/,"")}function ui(t,e,n){let{applicationName:l="AtroCore"}=e,{logoPath:i=null}=e,{logFilePath:a}=e,{restoreLink:o=null}=e,s=!1,u=!1,r=0,c=!0,f="",m,p;jl(()=>{p&&c&&p.scrollTo(0,p.scrollHeight)});function d(){n(4,s=!s),s||(c=!0)}function g(v){const w=v.currentTarget;c=w.scrollHeight-w.scrollTop===w.clientHeight}setInterval(async()=>{try{const v=await fetch(a,{cache:"no-store"});r+=1,v.ok?(n(3,f=(await v.text()).trim()),f.search("composer")>=0&&n(10,u=!0),r>65&&!u&&n(3,f="Something wrong. Please, reboot the server.")):u?setTimeout(()=>{location.reload()},2e3):r>65&&n(3,f="Something wrong. Please, reboot the server.")}catch(v){console.error("Error: ",v)}},1e3);function y(v){Oe[v?"unshift":"push"](()=>{p=v,n(6,p)})}return t.$$set=v=>{"applicationName"in v&&n(0,l=v.applicationName),"logoPath"in v&&n(1,i=v.logoPath),"logFilePath"in v&&n(9,a=v.logFilePath),"restoreLink"in v&&n(2,o=v.restoreLink)},t.$$.update=()=>{if(t.$$.dirty&1032)if(f){const v=f.trim().split(`
`);n(5,m=si(v.pop()))}else u?n(5,m=""):n(5,m="Starting...")},[l,i,o,f,s,m,p,d,g,a,u,y]}class fi extends Se{constructor(e){super(),De(this,e,ui,ri,ve,{applicationName:0,logoPath:1,logFilePath:9,restoreLink:2})}}function Qn(t,e,n){const l=t.slice();return l[15]=e[n],l}function Vn(t){let e,n=t[15].label+"",l,i,a,o,s,u,r;function c(){return t[9](t[15])}return{c(){e=T("button"),l=ce(n),i=X(),h(e,"data-action",a=t[15].name),e.disabled=o=t[15].disabled,h(e,"type","button"),h(e,"class",s=`btn action btn-${t[15].style??"default"}`)},m(f,m){Q(f,e,m),_(e,l),_(e,i),u||(r=le(e,"click",c),u=!0)},p(f,m){t=f,m&1&&n!==(n=t[15].label+"")&&Ae(l,n),m&1&&a!==(a=t[15].name)&&h(e,"data-action",a),m&1&&o!==(o=t[15].disabled)&&(e.disabled=o),m&1&&s!==(s=`btn action btn-${t[15].style??"default"}`)&&h(e,"class",s)},d(f){f&&G(e),u=!1,r()}}}function ci(t){let e,n,l,i=de(t[0]),a=[];for(let u=0;u<i.length;u+=1)a[u]=Vn(Qn(t,i,u));const o=t[8].default,s=Rl(o,t,t[7],null);return{c(){e=T("div");for(let u=0;u<a.length;u+=1)a[u].c();n=X(),s&&s.c(),h(e,"class","button-container")},m(u,r){Q(u,e,r);for(let c=0;c<a.length;c+=1)a[c]&&a[c].m(e,null);Q(u,n,r),s&&s.m(u,r),l=!0},p(u,[r]){if(r&3){i=de(u[0]);let c;for(c=0;c<i.length;c+=1){const f=Qn(u,i,c);a[c]?a[c].p(f,r):(a[c]=Vn(f),a[c].c(),a[c].m(e,null))}for(;c<a.length;c+=1)a[c].d(1);a.length=i.length}s&&s.p&&(!l||r&128)&&Bl(s,o,u,u[7],l?Hl(o,u[7],r,null):Yl(u[7]),null)},i(u){l||(Ee(s,u),l=!0)},o(u){Fe(s,u),l=!1},d(u){u&&(G(e),G(n)),Zt(a,u),s&&s.d(u)}}}function di(t,e,n){let{$$slots:l={},$$scope:i}=e,{params:a}=e,{fetch:o}=e,{loadLayout:s=()=>{He.get(scope,type,layoutProfileId,w=>{layout=w},!1)}}=e,{validate:u=()=>!0}=e,r=[{name:"save",label:"Save",style:"primary"},{name:"cancel",label:"Cancel"},{name:"resetToDefault",label:"Reset to Default"}];xt(()=>{Re.notify("Loading..."),s(()=>{Re.notify(!1),a.afterRender&&a.afterRender()})});function c(){d();const w=o();if(!u(w)){g();return}Re.notify("Saving..."),He.set(a.scope,a.type,a.layoutProfileId,w,()=>{Re.notify("Saved","success",2e3),f(),g()})}function f(){a.onUpdate&&a.onUpdate({scope:a.scope,type:a.type,layoutProfileId:a.layoutProfileId})}function m(){s()}function p(){Re.confirm("Are you sure you want to reset to default?",()=>{He.resetToDefault(a.scope,a.type,a.layoutProfileId,()=>{f(),m()})})}function d(){n(0,r=r.map(w=>({...w,disabled:!0})))}function g(){n(0,r=r.map(w=>({...w,disabled:!1})))}function y(w){switch(w.name){case"save":c();break;case"cancel":m();break;case"resetToDefault":p();break}}const v=w=>y(w);return t.$$set=w=>{"params"in w&&n(2,a=w.params),"fetch"in w&&n(3,o=w.fetch),"loadLayout"in w&&n(4,s=w.loadLayout),"validate"in w&&n(5,u=w.validate),"$$scope"in w&&n(7,i=w.$$scope)},[r,y,a,o,s,u,c,i,l,v]}class Kn extends Se{constructor(e){super(),De(this,e,di,ci,ve,{params:2,fetch:3,loadLayout:4,validate:5,save:6})}get save(){return this.$$.ctx[6]}}/**!
 * Sortable 1.15.2
 * @author	RubaXa   <trash@rubaxa.org>
 * @author	owenm    <owen23355@gmail.com>
 * @license MIT
 */function Zn(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(t);e&&(l=l.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,l)}return n}function Pe(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Zn(Object(n),!0).forEach(function(l){hi(t,l,n[l])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Zn(Object(n)).forEach(function(l){Object.defineProperty(t,l,Object.getOwnPropertyDescriptor(n,l))})}return t}function Ft(t){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Ft=function(e){return typeof e}:Ft=function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ft(t)}function hi(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Be(){return Be=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var l in n)Object.prototype.hasOwnProperty.call(n,l)&&(t[l]=n[l])}return t},Be.apply(this,arguments)}function mi(t,e){if(t==null)return{};var n={},l=Object.keys(t),i,a;for(a=0;a<l.length;a++)i=l[a],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}function pi(t,e){if(t==null)return{};var n=mi(t,e),l,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)l=a[i],!(e.indexOf(l)>=0)&&Object.prototype.propertyIsEnumerable.call(t,l)&&(n[l]=t[l])}return n}var gi="1.15.2";function Ye(t){if(typeof window<"u"&&window.navigator)return!!navigator.userAgent.match(t)}var ze=Ye(/(?:Trident.*rv[ :]?11\.|msie|iemobile|Windows Phone)/i),mt=Ye(/Edge/i),Jn=Ye(/firefox/i),pt=Ye(/safari/i)&&!Ye(/chrome/i)&&!Ye(/android/i),xn=Ye(/iP(ad|od|hone)/i),$n=Ye(/chrome/i)&&Ye(/android/i),el={capture:!1,passive:!1};function j(t,e,n){t.addEventListener(e,n,!ze&&el)}function q(t,e,n){t.removeEventListener(e,n,!ze&&el)}function Nt(t,e){if(e){if(e[0]===">"&&(e=e.substring(1)),t)try{if(t.matches)return t.matches(e);if(t.msMatchesSelector)return t.msMatchesSelector(e);if(t.webkitMatchesSelector)return t.webkitMatchesSelector(e)}catch{return!1}return!1}}function bi(t){return t.host&&t!==document&&t.host.nodeType?t.host:t.parentNode}function ke(t,e,n,l){if(t){n=n||document;do{if(e!=null&&(e[0]===">"?t.parentNode===n&&Nt(t,e):Nt(t,e))||l&&t===n)return t;if(t===n)break}while(t=bi(t))}return null}var tl=/\s+/g;function ge(t,e,n){if(t&&e)if(t.classList)t.classList[n?"add":"remove"](e);else{var l=(" "+t.className+" ").replace(tl," ").replace(" "+e+" "," ");t.className=(l+(n?" "+e:"")).replace(tl," ")}}function O(t,e,n){var l=t&&t.style;if(l){if(n===void 0)return document.defaultView&&document.defaultView.getComputedStyle?n=document.defaultView.getComputedStyle(t,""):t.currentStyle&&(n=t.currentStyle),e===void 0?n:n[e];!(e in l)&&e.indexOf("webkit")===-1&&(e="-webkit-"+e),l[e]=n+(typeof n=="string"?"":"px")}}function ot(t,e){var n="";if(typeof t=="string")n=t;else do{var l=O(t,"transform");l&&l!=="none"&&(n=l+" "+n)}while(!e&&(t=t.parentNode));var i=window.DOMMatrix||window.WebKitCSSMatrix||window.CSSMatrix||window.MSCSSMatrix;return i&&new i(n)}function nl(t,e,n){if(t){var l=t.getElementsByTagName(e),i=0,a=l.length;if(n)for(;i<a;i++)n(l[i],i);return l}return[]}function Le(){var t=document.scrollingElement;return t||document.documentElement}function ie(t,e,n,l,i){if(!(!t.getBoundingClientRect&&t!==window)){var a,o,s,u,r,c,f;if(t!==window&&t.parentNode&&t!==Le()?(a=t.getBoundingClientRect(),o=a.top,s=a.left,u=a.bottom,r=a.right,c=a.height,f=a.width):(o=0,s=0,u=window.innerHeight,r=window.innerWidth,c=window.innerHeight,f=window.innerWidth),(e||n)&&t!==window&&(i=i||t.parentNode,!ze))do if(i&&i.getBoundingClientRect&&(O(i,"transform")!=="none"||n&&O(i,"position")!=="static")){var m=i.getBoundingClientRect();o-=m.top+parseInt(O(i,"border-top-width")),s-=m.left+parseInt(O(i,"border-left-width")),u=o+a.height,r=s+a.width;break}while(i=i.parentNode);if(l&&t!==window){var p=ot(i||t),d=p&&p.a,g=p&&p.d;p&&(o/=g,s/=d,f/=d,c/=g,u=o+c,r=s+f)}return{top:o,left:s,bottom:u,right:r,width:f,height:c}}}function ll(t,e,n){for(var l=Qe(t,!0),i=ie(t)[e];l;){var a=ie(l)[n],o=void 0;if(o=i>=a,!o)return l;if(l===Le())break;l=Qe(l,!1)}return!1}function rt(t,e,n,l){for(var i=0,a=0,o=t.children;a<o.length;){if(o[a].style.display!=="none"&&o[a]!==A.ghost&&(l||o[a]!==A.dragged)&&ke(o[a],n.draggable,t,!1)){if(i===e)return o[a];i++}a++}return null}function an(t,e){for(var n=t.lastElementChild;n&&(n===A.ghost||O(n,"display")==="none"||e&&!Nt(n,e));)n=n.previousElementSibling;return n||null}function ye(t,e){var n=0;if(!t||!t.parentNode)return-1;for(;t=t.previousElementSibling;)t.nodeName.toUpperCase()!=="TEMPLATE"&&t!==A.clone&&(!e||Nt(t,e))&&n++;return n}function il(t){var e=0,n=0,l=Le();if(t)do{var i=ot(t),a=i.a,o=i.d;e+=t.scrollLeft*a,n+=t.scrollTop*o}while(t!==l&&(t=t.parentNode));return[e,n]}function _i(t,e){for(var n in t)if(t.hasOwnProperty(n)){for(var l in e)if(e.hasOwnProperty(l)&&e[l]===t[n][l])return Number(n)}return-1}function Qe(t,e){if(!t||!t.getBoundingClientRect)return Le();var n=t,l=!1;do if(n.clientWidth<n.scrollWidth||n.clientHeight<n.scrollHeight){var i=O(n);if(n.clientWidth<n.scrollWidth&&(i.overflowX=="auto"||i.overflowX=="scroll")||n.clientHeight<n.scrollHeight&&(i.overflowY=="auto"||i.overflowY=="scroll")){if(!n.getBoundingClientRect||n===document.body)return Le();if(l||e)return n;l=!0}}while(n=n.parentNode);return Le()}function vi(t,e){if(t&&e)for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t}function on(t,e){return Math.round(t.top)===Math.round(e.top)&&Math.round(t.left)===Math.round(e.left)&&Math.round(t.height)===Math.round(e.height)&&Math.round(t.width)===Math.round(e.width)}var gt;function al(t,e){return function(){if(!gt){var n=arguments,l=this;n.length===1?t.call(l,n[0]):t.apply(l,n),gt=setTimeout(function(){gt=void 0},e)}}}function yi(){clearTimeout(gt),gt=void 0}function ol(t,e,n){t.scrollLeft+=e,t.scrollTop+=n}function rl(t){var e=window.Polymer,n=window.jQuery||window.Zepto;return e&&e.dom?e.dom(t).cloneNode(!0):n?n(t).clone(!0)[0]:t.cloneNode(!0)}function sl(t,e,n){var l={};return Array.from(t.children).forEach(function(i){var a,o,s,u;if(!(!ke(i,e.draggable,t,!1)||i.animated||i===n)){var r=ie(i);l.left=Math.min((a=l.left)!==null&&a!==void 0?a:1/0,r.left),l.top=Math.min((o=l.top)!==null&&o!==void 0?o:1/0,r.top),l.right=Math.max((s=l.right)!==null&&s!==void 0?s:-1/0,r.right),l.bottom=Math.max((u=l.bottom)!==null&&u!==void 0?u:-1/0,r.bottom)}}),l.width=l.right-l.left,l.height=l.bottom-l.top,l.x=l.left,l.y=l.top,l}var be="Sortable"+new Date().getTime();function wi(){var t=[],e;return{captureAnimationState:function(){if(t=[],!!this.options.animation){var l=[].slice.call(this.el.children);l.forEach(function(i){if(!(O(i,"display")==="none"||i===A.ghost)){t.push({target:i,rect:ie(i)});var a=Pe({},t[t.length-1].rect);if(i.thisAnimationDuration){var o=ot(i,!0);o&&(a.top-=o.f,a.left-=o.e)}i.fromRect=a}})}},addAnimationState:function(l){t.push(l)},removeAnimationState:function(l){t.splice(_i(t,{target:l}),1)},animateAll:function(l){var i=this;if(!this.options.animation){clearTimeout(e),typeof l=="function"&&l();return}var a=!1,o=0;t.forEach(function(s){var u=0,r=s.target,c=r.fromRect,f=ie(r),m=r.prevFromRect,p=r.prevToRect,d=s.rect,g=ot(r,!0);g&&(f.top-=g.f,f.left-=g.e),r.toRect=f,r.thisAnimationDuration&&on(m,f)&&!on(c,f)&&(d.top-f.top)/(d.left-f.left)===(c.top-f.top)/(c.left-f.left)&&(u=Di(d,m,p,i.options)),on(f,c)||(r.prevFromRect=c,r.prevToRect=f,u||(u=i.options.animation),i.animate(r,d,f,u)),u&&(a=!0,o=Math.max(o,u),clearTimeout(r.animationResetTimer),r.animationResetTimer=setTimeout(function(){r.animationTime=0,r.prevFromRect=null,r.fromRect=null,r.prevToRect=null,r.thisAnimationDuration=null},u),r.thisAnimationDuration=u)}),clearTimeout(e),a?e=setTimeout(function(){typeof l=="function"&&l()},o):typeof l=="function"&&l(),t=[]},animate:function(l,i,a,o){if(o){O(l,"transition",""),O(l,"transform","");var s=ot(this.el),u=s&&s.a,r=s&&s.d,c=(i.left-a.left)/(u||1),f=(i.top-a.top)/(r||1);l.animatingX=!!c,l.animatingY=!!f,O(l,"transform","translate3d("+c+"px,"+f+"px,0)"),this.forRepaintDummy=Ei(l),O(l,"transition","transform "+o+"ms"+(this.options.easing?" "+this.options.easing:"")),O(l,"transform","translate3d(0,0,0)"),typeof l.animated=="number"&&clearTimeout(l.animated),l.animated=setTimeout(function(){O(l,"transition",""),O(l,"transform",""),l.animated=!1,l.animatingX=!1,l.animatingY=!1},o)}}}}function Ei(t){return t.offsetWidth}function Di(t,e,n,l){return Math.sqrt(Math.pow(e.top-t.top,2)+Math.pow(e.left-t.left,2))/Math.sqrt(Math.pow(e.top-n.top,2)+Math.pow(e.left-n.left,2))*l.animation}var st=[],rn={initializeByDefault:!0},bt={mount:function(e){for(var n in rn)rn.hasOwnProperty(n)&&!(n in e)&&(e[n]=rn[n]);st.forEach(function(l){if(l.pluginName===e.pluginName)throw"Sortable: Cannot mount plugin ".concat(e.pluginName," more than once")}),st.push(e)},pluginEvent:function(e,n,l){var i=this;this.eventCanceled=!1,l.cancel=function(){i.eventCanceled=!0};var a=e+"Global";st.forEach(function(o){n[o.pluginName]&&(n[o.pluginName][a]&&n[o.pluginName][a](Pe({sortable:n},l)),n.options[o.pluginName]&&n[o.pluginName][e]&&n[o.pluginName][e](Pe({sortable:n},l)))})},initializePlugins:function(e,n,l,i){st.forEach(function(s){var u=s.pluginName;if(!(!e.options[u]&&!s.initializeByDefault)){var r=new s(e,n,e.options);r.sortable=e,r.options=e.options,e[u]=r,Be(l,r.defaults)}});for(var a in e.options)if(e.options.hasOwnProperty(a)){var o=this.modifyOption(e,a,e.options[a]);typeof o<"u"&&(e.options[a]=o)}},getEventProperties:function(e,n){var l={};return st.forEach(function(i){typeof i.eventProperties=="function"&&Be(l,i.eventProperties.call(n[i.pluginName],e))}),l},modifyOption:function(e,n,l){var i;return st.forEach(function(a){e[a.pluginName]&&a.optionListeners&&typeof a.optionListeners[n]=="function"&&(i=a.optionListeners[n].call(e[a.pluginName],l))}),i}};function Si(t){var e=t.sortable,n=t.rootEl,l=t.name,i=t.targetEl,a=t.cloneEl,o=t.toEl,s=t.fromEl,u=t.oldIndex,r=t.newIndex,c=t.oldDraggableIndex,f=t.newDraggableIndex,m=t.originalEvent,p=t.putSortable,d=t.extraEventProperties;if(e=e||n&&n[be],!!e){var g,y=e.options,v="on"+l.charAt(0).toUpperCase()+l.substr(1);window.CustomEvent&&!ze&&!mt?g=new CustomEvent(l,{bubbles:!0,cancelable:!0}):(g=document.createEvent("Event"),g.initEvent(l,!0,!0)),g.to=o||n,g.from=s||n,g.item=i||n,g.clone=a,g.oldIndex=u,g.newIndex=r,g.oldDraggableIndex=c,g.newDraggableIndex=f,g.originalEvent=m,g.pullMode=p?p.lastPutMode:void 0;var w=Pe(Pe({},d),bt.getEventProperties(l,e));for(var k in w)g[k]=w[k];n&&n.dispatchEvent(g),y[v]&&y[v].call(e,g)}}var ki=["evt"],he=function(e,n){var l=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},i=l.evt,a=pi(l,ki);bt.pluginEvent.bind(A)(e,n,Pe({dragEl:S,parentEl:te,ghostEl:N,rootEl:J,nextEl:Je,lastDownEl:Mt,cloneEl:x,cloneHidden:Ve,dragStarted:vt,putSortable:oe,activeSortable:A.active,originalEvent:i,oldIndex:ut,oldDraggableIndex:_t,newIndex:_e,newDraggableIndex:Ke,hideGhostForTarget:pl,unhideGhostForTarget:gl,cloneNowHidden:function(){Ve=!0},cloneNowShown:function(){Ve=!1},dispatchSortableEvent:function(s){ue({sortable:n,name:s,originalEvent:i})}},a))};function ue(t){Si(Pe({putSortable:oe,cloneEl:x,targetEl:S,rootEl:J,oldIndex:ut,oldDraggableIndex:_t,newIndex:_e,newDraggableIndex:Ke},t))}var S,te,N,J,Je,Mt,x,Ve,ut,_e,_t,Ke,Rt,oe,ft=!1,Ht=!1,Bt=[],xe,Te,sn,un,ul,fl,vt,ct,yt,wt=!1,Yt=!1,zt,re,fn=[],cn=!1,Xt=[],qt=typeof document<"u",jt=xn,cl=mt||ze?"cssFloat":"float",Ti=qt&&!$n&&!xn&&"draggable"in document.createElement("div"),dl=function(){if(qt){if(ze)return!1;var t=document.createElement("x");return t.style.cssText="pointer-events:auto",t.style.pointerEvents==="auto"}}(),hl=function(e,n){var l=O(e),i=parseInt(l.width)-parseInt(l.paddingLeft)-parseInt(l.paddingRight)-parseInt(l.borderLeftWidth)-parseInt(l.borderRightWidth),a=rt(e,0,n),o=rt(e,1,n),s=a&&O(a),u=o&&O(o),r=s&&parseInt(s.marginLeft)+parseInt(s.marginRight)+ie(a).width,c=u&&parseInt(u.marginLeft)+parseInt(u.marginRight)+ie(o).width;if(l.display==="flex")return l.flexDirection==="column"||l.flexDirection==="column-reverse"?"vertical":"horizontal";if(l.display==="grid")return l.gridTemplateColumns.split(" ").length<=1?"vertical":"horizontal";if(a&&s.float&&s.float!=="none"){var f=s.float==="left"?"left":"right";return o&&(u.clear==="both"||u.clear===f)?"vertical":"horizontal"}return a&&(s.display==="block"||s.display==="flex"||s.display==="table"||s.display==="grid"||r>=i&&l[cl]==="none"||o&&l[cl]==="none"&&r+c>i)?"vertical":"horizontal"},Pi=function(e,n,l){var i=l?e.left:e.top,a=l?e.right:e.bottom,o=l?e.width:e.height,s=l?n.left:n.top,u=l?n.right:n.bottom,r=l?n.width:n.height;return i===s||a===u||i+o/2===s+r/2},Li=function(e,n){var l;return Bt.some(function(i){var a=i[be].options.emptyInsertThreshold;if(!(!a||an(i))){var o=ie(i),s=e>=o.left-a&&e<=o.right+a,u=n>=o.top-a&&n<=o.bottom+a;if(s&&u)return l=i}}),l},ml=function(e){function n(a,o){return function(s,u,r,c){var f=s.options.group.name&&u.options.group.name&&s.options.group.name===u.options.group.name;if(a==null&&(o||f))return!0;if(a==null||a===!1)return!1;if(o&&a==="clone")return a;if(typeof a=="function")return n(a(s,u,r,c),o)(s,u,r,c);var m=(o?s:u).options.group.name;return a===!0||typeof a=="string"&&a===m||a.join&&a.indexOf(m)>-1}}var l={},i=e.group;(!i||Ft(i)!="object")&&(i={name:i}),l.name=i.name,l.checkPull=n(i.pull,!0),l.checkPut=n(i.put),l.revertClone=i.revertClone,e.group=l},pl=function(){!dl&&N&&O(N,"display","none")},gl=function(){!dl&&N&&O(N,"display","")};qt&&!$n&&document.addEventListener("click",function(t){if(Ht)return t.preventDefault(),t.stopPropagation&&t.stopPropagation(),t.stopImmediatePropagation&&t.stopImmediatePropagation(),Ht=!1,!1},!0);var $e=function(e){if(S){e=e.touches?e.touches[0]:e;var n=Li(e.clientX,e.clientY);if(n){var l={};for(var i in e)e.hasOwnProperty(i)&&(l[i]=e[i]);l.target=l.rootEl=n,l.preventDefault=void 0,l.stopPropagation=void 0,n[be]._onDragOver(l)}}},Ci=function(e){S&&S.parentNode[be]._isOutsideThisEl(e.target)};function A(t,e){if(!(t&&t.nodeType&&t.nodeType===1))throw"Sortable: `el` must be an HTMLElement, not ".concat({}.toString.call(t));this.el=t,this.options=e=Be({},e),t[be]=this;var n={group:null,sort:!0,disabled:!1,store:null,handle:null,draggable:/^[uo]l$/i.test(t.nodeName)?">li":">*",swapThreshold:1,invertSwap:!1,invertedSwapThreshold:null,removeCloneOnHide:!0,direction:function(){return hl(t,this.options)},ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",dragClass:"sortable-drag",ignore:"a, img",filter:null,preventOnFilter:!0,animation:0,easing:null,setData:function(o,s){o.setData("Text",s.textContent)},dropBubble:!1,dragoverBubble:!1,dataIdAttr:"data-id",delay:0,delayOnTouchOnly:!1,touchStartThreshold:(Number.parseInt?Number:window).parseInt(window.devicePixelRatio,10)||1,forceFallback:!1,fallbackClass:"sortable-fallback",fallbackOnBody:!1,fallbackTolerance:0,fallbackOffset:{x:0,y:0},supportPointer:A.supportPointer!==!1&&"PointerEvent"in window&&!pt,emptyInsertThreshold:5};bt.initializePlugins(this,t,n);for(var l in n)!(l in e)&&(e[l]=n[l]);ml(e);for(var i in this)i.charAt(0)==="_"&&typeof this[i]=="function"&&(this[i]=this[i].bind(this));this.nativeDraggable=e.forceFallback?!1:Ti,this.nativeDraggable&&(this.options.touchStartThreshold=1),e.supportPointer?j(t,"pointerdown",this._onTapStart):(j(t,"mousedown",this._onTapStart),j(t,"touchstart",this._onTapStart)),this.nativeDraggable&&(j(t,"dragover",this),j(t,"dragenter",this)),Bt.push(this.el),e.store&&e.store.get&&this.sort(e.store.get(this)||[]),Be(this,wi())}A.prototype={constructor:A,_isOutsideThisEl:function(e){!this.el.contains(e)&&e!==this.el&&(ct=null)},_getDirection:function(e,n){return typeof this.options.direction=="function"?this.options.direction.call(this,e,n,S):this.options.direction},_onTapStart:function(e){if(e.cancelable){var n=this,l=this.el,i=this.options,a=i.preventOnFilter,o=e.type,s=e.touches&&e.touches[0]||e.pointerType&&e.pointerType==="touch"&&e,u=(s||e).target,r=e.target.shadowRoot&&(e.path&&e.path[0]||e.composedPath&&e.composedPath()[0])||u,c=i.filter;if(Hi(l),!S&&!(/mousedown|pointerdown/.test(o)&&e.button!==0||i.disabled)&&!r.isContentEditable&&!(!this.nativeDraggable&&pt&&u&&u.tagName.toUpperCase()==="SELECT")&&(u=ke(u,i.draggable,l,!1),!(u&&u.animated)&&Mt!==u)){if(ut=ye(u),_t=ye(u,i.draggable),typeof c=="function"){if(c.call(this,e,u,this)){ue({sortable:n,rootEl:r,name:"filter",targetEl:u,toEl:l,fromEl:l}),he("filter",n,{evt:e}),a&&e.cancelable&&e.preventDefault();return}}else if(c&&(c=c.split(",").some(function(f){if(f=ke(r,f.trim(),l,!1),f)return ue({sortable:n,rootEl:f,name:"filter",targetEl:u,fromEl:l,toEl:l}),he("filter",n,{evt:e}),!0}),c)){a&&e.cancelable&&e.preventDefault();return}i.handle&&!ke(r,i.handle,l,!1)||this._prepareDragStart(e,s,u)}}},_prepareDragStart:function(e,n,l){var i=this,a=i.el,o=i.options,s=a.ownerDocument,u;if(l&&!S&&l.parentNode===a){var r=ie(l);if(J=a,S=l,te=S.parentNode,Je=S.nextSibling,Mt=l,Rt=o.group,A.dragged=S,xe={target:S,clientX:(n||e).clientX,clientY:(n||e).clientY},ul=xe.clientX-r.left,fl=xe.clientY-r.top,this._lastX=(n||e).clientX,this._lastY=(n||e).clientY,S.style["will-change"]="all",u=function(){if(he("delayEnded",i,{evt:e}),A.eventCanceled){i._onDrop();return}i._disableDelayedDragEvents(),!Jn&&i.nativeDraggable&&(S.draggable=!0),i._triggerDragStart(e,n),ue({sortable:i,name:"choose",originalEvent:e}),ge(S,o.chosenClass,!0)},o.ignore.split(",").forEach(function(c){nl(S,c.trim(),dn)}),j(s,"dragover",$e),j(s,"mousemove",$e),j(s,"touchmove",$e),j(s,"mouseup",i._onDrop),j(s,"touchend",i._onDrop),j(s,"touchcancel",i._onDrop),Jn&&this.nativeDraggable&&(this.options.touchStartThreshold=4,S.draggable=!0),he("delayStart",this,{evt:e}),o.delay&&(!o.delayOnTouchOnly||n)&&(!this.nativeDraggable||!(mt||ze))){if(A.eventCanceled){this._onDrop();return}j(s,"mouseup",i._disableDelayedDrag),j(s,"touchend",i._disableDelayedDrag),j(s,"touchcancel",i._disableDelayedDrag),j(s,"mousemove",i._delayedDragTouchMoveHandler),j(s,"touchmove",i._delayedDragTouchMoveHandler),o.supportPointer&&j(s,"pointermove",i._delayedDragTouchMoveHandler),i._dragStartTimer=setTimeout(u,o.delay)}else u()}},_delayedDragTouchMoveHandler:function(e){var n=e.touches?e.touches[0]:e;Math.max(Math.abs(n.clientX-this._lastX),Math.abs(n.clientY-this._lastY))>=Math.floor(this.options.touchStartThreshold/(this.nativeDraggable&&window.devicePixelRatio||1))&&this._disableDelayedDrag()},_disableDelayedDrag:function(){S&&dn(S),clearTimeout(this._dragStartTimer),this._disableDelayedDragEvents()},_disableDelayedDragEvents:function(){var e=this.el.ownerDocument;q(e,"mouseup",this._disableDelayedDrag),q(e,"touchend",this._disableDelayedDrag),q(e,"touchcancel",this._disableDelayedDrag),q(e,"mousemove",this._delayedDragTouchMoveHandler),q(e,"touchmove",this._delayedDragTouchMoveHandler),q(e,"pointermove",this._delayedDragTouchMoveHandler)},_triggerDragStart:function(e,n){n=n||e.pointerType=="touch"&&e,!this.nativeDraggable||n?this.options.supportPointer?j(document,"pointermove",this._onTouchMove):n?j(document,"touchmove",this._onTouchMove):j(document,"mousemove",this._onTouchMove):(j(S,"dragend",this),j(J,"dragstart",this._onDragStart));try{document.selection?Gt(function(){document.selection.empty()}):window.getSelection().removeAllRanges()}catch{}},_dragStarted:function(e,n){if(ft=!1,J&&S){he("dragStarted",this,{evt:n}),this.nativeDraggable&&j(document,"dragover",Ci);var l=this.options;!e&&ge(S,l.dragClass,!1),ge(S,l.ghostClass,!0),A.active=this,e&&this._appendGhost(),ue({sortable:this,name:"start",originalEvent:n})}else this._nulling()},_emulateDragOver:function(){if(Te){this._lastX=Te.clientX,this._lastY=Te.clientY,pl();for(var e=document.elementFromPoint(Te.clientX,Te.clientY),n=e;e&&e.shadowRoot&&(e=e.shadowRoot.elementFromPoint(Te.clientX,Te.clientY),e!==n);)n=e;if(S.parentNode[be]._isOutsideThisEl(e),n)do{if(n[be]){var l=void 0;if(l=n[be]._onDragOver({clientX:Te.clientX,clientY:Te.clientY,target:e,rootEl:n}),l&&!this.options.dragoverBubble)break}e=n}while(n=n.parentNode);gl()}},_onTouchMove:function(e){if(xe){var n=this.options,l=n.fallbackTolerance,i=n.fallbackOffset,a=e.touches?e.touches[0]:e,o=N&&ot(N,!0),s=N&&o&&o.a,u=N&&o&&o.d,r=jt&&re&&il(re),c=(a.clientX-xe.clientX+i.x)/(s||1)+(r?r[0]-fn[0]:0)/(s||1),f=(a.clientY-xe.clientY+i.y)/(u||1)+(r?r[1]-fn[1]:0)/(u||1);if(!A.active&&!ft){if(l&&Math.max(Math.abs(a.clientX-this._lastX),Math.abs(a.clientY-this._lastY))<l)return;this._onDragStart(e,!0)}if(N){o?(o.e+=c-(sn||0),o.f+=f-(un||0)):o={a:1,b:0,c:0,d:1,e:c,f};var m="matrix(".concat(o.a,",").concat(o.b,",").concat(o.c,",").concat(o.d,",").concat(o.e,",").concat(o.f,")");O(N,"webkitTransform",m),O(N,"mozTransform",m),O(N,"msTransform",m),O(N,"transform",m),sn=c,un=f,Te=a}e.cancelable&&e.preventDefault()}},_appendGhost:function(){if(!N){var e=this.options.fallbackOnBody?document.body:J,n=ie(S,!0,jt,!0,e),l=this.options;if(jt){for(re=e;O(re,"position")==="static"&&O(re,"transform")==="none"&&re!==document;)re=re.parentNode;re!==document.body&&re!==document.documentElement?(re===document&&(re=Le()),n.top+=re.scrollTop,n.left+=re.scrollLeft):re=Le(),fn=il(re)}N=S.cloneNode(!0),ge(N,l.ghostClass,!1),ge(N,l.fallbackClass,!0),ge(N,l.dragClass,!0),O(N,"transition",""),O(N,"transform",""),O(N,"box-sizing","border-box"),O(N,"margin",0),O(N,"top",n.top),O(N,"left",n.left),O(N,"width",n.width),O(N,"height",n.height),O(N,"opacity","0.8"),O(N,"position",jt?"absolute":"fixed"),O(N,"zIndex","100000"),O(N,"pointerEvents","none"),A.ghost=N,e.appendChild(N),O(N,"transform-origin",ul/parseInt(N.style.width)*100+"% "+fl/parseInt(N.style.height)*100+"%")}},_onDragStart:function(e,n){var l=this,i=e.dataTransfer,a=l.options;if(he("dragStart",this,{evt:e}),A.eventCanceled){this._onDrop();return}he("setupClone",this),A.eventCanceled||(x=rl(S),x.removeAttribute("id"),x.draggable=!1,x.style["will-change"]="",this._hideClone(),ge(x,this.options.chosenClass,!1),A.clone=x),l.cloneId=Gt(function(){he("clone",l),!A.eventCanceled&&(l.options.removeCloneOnHide||J.insertBefore(x,S),l._hideClone(),ue({sortable:l,name:"clone"}))}),!n&&ge(S,a.dragClass,!0),n?(Ht=!0,l._loopId=setInterval(l._emulateDragOver,50)):(q(document,"mouseup",l._onDrop),q(document,"touchend",l._onDrop),q(document,"touchcancel",l._onDrop),i&&(i.effectAllowed="move",a.setData&&a.setData.call(l,i,S)),j(document,"drop",l),O(S,"transform","translateZ(0)")),ft=!0,l._dragStartId=Gt(l._dragStarted.bind(l,n,e)),j(document,"selectstart",l),vt=!0,pt&&O(document.body,"user-select","none")},_onDragOver:function(e){var n=this.el,l=e.target,i,a,o,s=this.options,u=s.group,r=A.active,c=Rt===u,f=s.sort,m=oe||r,p,d=this,g=!1;if(cn)return;function y(et,En){he(et,d,Pe({evt:e,isOwner:c,axis:p?"vertical":"horizontal",revert:o,dragRect:i,targetRect:a,canSort:f,fromSortable:m,target:l,completed:w,onMove:function(Kt,Dn){return Wt(J,n,S,i,Kt,ie(Kt),e,Dn)},changed:k},En))}function v(){y("dragOverAnimationCapture"),d.captureAnimationState(),d!==m&&m.captureAnimationState()}function w(et){return y("dragOverCompleted",{insertion:et}),et&&(c?r._hideClone():r._showClone(d),d!==m&&(ge(S,oe?oe.options.ghostClass:r.options.ghostClass,!1),ge(S,s.ghostClass,!0)),oe!==d&&d!==A.active?oe=d:d===A.active&&oe&&(oe=null),m===d&&(d._ignoreWhileAnimating=l),d.animateAll(function(){y("dragOverAnimationComplete"),d._ignoreWhileAnimating=null}),d!==m&&(m.animateAll(),m._ignoreWhileAnimating=null)),(l===S&&!S.animated||l===n&&!l.animated)&&(ct=null),!s.dragoverBubble&&!e.rootEl&&l!==document&&(S.parentNode[be]._isOutsideThisEl(e.target),!et&&$e(e)),!s.dragoverBubble&&e.stopPropagation&&e.stopPropagation(),g=!0}function k(){_e=ye(S),Ke=ye(S,s.draggable),ue({sortable:d,name:"change",toEl:n,newIndex:_e,newDraggableIndex:Ke,originalEvent:e})}if(e.preventDefault!==void 0&&e.cancelable&&e.preventDefault(),l=ke(l,s.draggable,n,!0),y("dragOver"),A.eventCanceled)return g;if(S.contains(e.target)||l.animated&&l.animatingX&&l.animatingY||d._ignoreWhileAnimating===l)return w(!1);if(Ht=!1,r&&!s.disabled&&(c?f||(o=te!==J):oe===this||(this.lastPutMode=Rt.checkPull(this,r,S,e))&&u.checkPut(this,r,S,e))){if(p=this._getDirection(e,l)==="vertical",i=ie(S),y("dragOverValid"),A.eventCanceled)return g;if(o)return te=J,v(),this._hideClone(),y("revert"),A.eventCanceled||(Je?J.insertBefore(S,Je):J.appendChild(S)),w(!0);var D=an(n,s.draggable);if(!D||Fi(e,p,this)&&!D.animated){if(D===S)return w(!1);if(D&&n===e.target&&(l=D),l&&(a=ie(l)),Wt(J,n,S,i,l,a,e,!!l)!==!1)return v(),D&&D.nextSibling?n.insertBefore(S,D.nextSibling):n.appendChild(S),te=n,k(),w(!0)}else if(D&&Oi(e,p,this)){var b=rt(n,0,s,!0);if(b===S)return w(!1);if(l=b,a=ie(l),Wt(J,n,S,i,l,a,e,!1)!==!1)return v(),n.insertBefore(S,b),te=n,k(),w(!0)}else if(l.parentNode===n){a=ie(l);var L=0,E,H=S.parentNode!==n,C=!Pi(S.animated&&S.toRect||i,l.animated&&l.toRect||a,p),ne=p?"top":"left",se=ll(l,"top","top")||ll(S,"top","top"),V=se?se.scrollTop:void 0;ct!==l&&(E=a[ne],wt=!1,Yt=!C&&s.invertSwap||H),L=Ni(e,l,a,p,C?1:s.swapThreshold,s.invertedSwapThreshold==null?s.swapThreshold:s.invertedSwapThreshold,Yt,ct===l);var W;if(L!==0){var K=ye(S);do K-=L,W=te.children[K];while(W&&(O(W,"display")==="none"||W===N))}if(L===0||W===l)return w(!1);ct=l,yt=L;var F=l.nextElementSibling,z=!1;z=L===1;var me=Wt(J,n,S,i,l,a,e,z);if(me!==!1)return(me===1||me===-1)&&(z=me===1),cn=!0,setTimeout(Ai,30),v(),z&&!F?n.appendChild(S):l.parentNode.insertBefore(S,z?F:l),se&&ol(se,0,V-se.scrollTop),te=S.parentNode,E!==void 0&&!Yt&&(zt=Math.abs(E-ie(l)[ne])),k(),w(!0)}if(n.contains(S))return w(!1)}return!1},_ignoreWhileAnimating:null,_offMoveEvents:function(){q(document,"mousemove",this._onTouchMove),q(document,"touchmove",this._onTouchMove),q(document,"pointermove",this._onTouchMove),q(document,"dragover",$e),q(document,"mousemove",$e),q(document,"touchmove",$e)},_offUpEvents:function(){var e=this.el.ownerDocument;q(e,"mouseup",this._onDrop),q(e,"touchend",this._onDrop),q(e,"pointerup",this._onDrop),q(e,"touchcancel",this._onDrop),q(document,"selectstart",this)},_onDrop:function(e){var n=this.el,l=this.options;if(_e=ye(S),Ke=ye(S,l.draggable),he("drop",this,{evt:e}),te=S&&S.parentNode,_e=ye(S),Ke=ye(S,l.draggable),A.eventCanceled){this._nulling();return}ft=!1,Yt=!1,wt=!1,clearInterval(this._loopId),clearTimeout(this._dragStartTimer),hn(this.cloneId),hn(this._dragStartId),this.nativeDraggable&&(q(document,"drop",this),q(n,"dragstart",this._onDragStart)),this._offMoveEvents(),this._offUpEvents(),pt&&O(document.body,"user-select",""),O(S,"transform",""),e&&(vt&&(e.cancelable&&e.preventDefault(),!l.dropBubble&&e.stopPropagation()),N&&N.parentNode&&N.parentNode.removeChild(N),(J===te||oe&&oe.lastPutMode!=="clone")&&x&&x.parentNode&&x.parentNode.removeChild(x),S&&(this.nativeDraggable&&q(S,"dragend",this),dn(S),S.style["will-change"]="",vt&&!ft&&ge(S,oe?oe.options.ghostClass:this.options.ghostClass,!1),ge(S,this.options.chosenClass,!1),ue({sortable:this,name:"unchoose",toEl:te,newIndex:null,newDraggableIndex:null,originalEvent:e}),J!==te?(_e>=0&&(ue({rootEl:te,name:"add",toEl:te,fromEl:J,originalEvent:e}),ue({sortable:this,name:"remove",toEl:te,originalEvent:e}),ue({rootEl:te,name:"sort",toEl:te,fromEl:J,originalEvent:e}),ue({sortable:this,name:"sort",toEl:te,originalEvent:e})),oe&&oe.save()):_e!==ut&&_e>=0&&(ue({sortable:this,name:"update",toEl:te,originalEvent:e}),ue({sortable:this,name:"sort",toEl:te,originalEvent:e})),A.active&&((_e==null||_e===-1)&&(_e=ut,Ke=_t),ue({sortable:this,name:"end",toEl:te,originalEvent:e}),this.save()))),this._nulling()},_nulling:function(){he("nulling",this),J=S=te=N=Je=x=Mt=Ve=xe=Te=vt=_e=Ke=ut=_t=ct=yt=oe=Rt=A.dragged=A.ghost=A.clone=A.active=null,Xt.forEach(function(e){e.checked=!0}),Xt.length=sn=un=0},handleEvent:function(e){switch(e.type){case"drop":case"dragend":this._onDrop(e);break;case"dragenter":case"dragover":S&&(this._onDragOver(e),Ii(e));break;case"selectstart":e.preventDefault();break}},toArray:function(){for(var e=[],n,l=this.el.children,i=0,a=l.length,o=this.options;i<a;i++)n=l[i],ke(n,o.draggable,this.el,!1)&&e.push(n.getAttribute(o.dataIdAttr)||Ri(n));return e},sort:function(e,n){var l={},i=this.el;this.toArray().forEach(function(a,o){var s=i.children[o];ke(s,this.options.draggable,i,!1)&&(l[a]=s)},this),n&&this.captureAnimationState(),e.forEach(function(a){l[a]&&(i.removeChild(l[a]),i.appendChild(l[a]))}),n&&this.animateAll()},save:function(){var e=this.options.store;e&&e.set&&e.set(this)},closest:function(e,n){return ke(e,n||this.options.draggable,this.el,!1)},option:function(e,n){var l=this.options;if(n===void 0)return l[e];var i=bt.modifyOption(this,e,n);typeof i<"u"?l[e]=i:l[e]=n,e==="group"&&ml(l)},destroy:function(){he("destroy",this);var e=this.el;e[be]=null,q(e,"mousedown",this._onTapStart),q(e,"touchstart",this._onTapStart),q(e,"pointerdown",this._onTapStart),this.nativeDraggable&&(q(e,"dragover",this),q(e,"dragenter",this)),Array.prototype.forEach.call(e.querySelectorAll("[draggable]"),function(n){n.removeAttribute("draggable")}),this._onDrop(),this._disableDelayedDragEvents(),Bt.splice(Bt.indexOf(this.el),1),this.el=e=null},_hideClone:function(){if(!Ve){if(he("hideClone",this),A.eventCanceled)return;O(x,"display","none"),this.options.removeCloneOnHide&&x.parentNode&&x.parentNode.removeChild(x),Ve=!0}},_showClone:function(e){if(e.lastPutMode!=="clone"){this._hideClone();return}if(Ve){if(he("showClone",this),A.eventCanceled)return;S.parentNode==J&&!this.options.group.revertClone?J.insertBefore(x,S):Je?J.insertBefore(x,Je):J.appendChild(x),this.options.group.revertClone&&this.animate(S,x),O(x,"display",""),Ve=!1}}};function Ii(t){t.dataTransfer&&(t.dataTransfer.dropEffect="move"),t.cancelable&&t.preventDefault()}function Wt(t,e,n,l,i,a,o,s){var u,r=t[be],c=r.options.onMove,f;return window.CustomEvent&&!ze&&!mt?u=new CustomEvent("move",{bubbles:!0,cancelable:!0}):(u=document.createEvent("Event"),u.initEvent("move",!0,!0)),u.to=e,u.from=t,u.dragged=n,u.draggedRect=l,u.related=i||e,u.relatedRect=a||ie(e),u.willInsertAfter=s,u.originalEvent=o,t.dispatchEvent(u),c&&(f=c.call(r,u,o)),f}function dn(t){t.draggable=!1}function Ai(){cn=!1}function Oi(t,e,n){var l=ie(rt(n.el,0,n.options,!0)),i=sl(n.el,n.options,N),a=10;return e?t.clientX<i.left-a||t.clientY<l.top&&t.clientX<l.right:t.clientY<i.top-a||t.clientY<l.bottom&&t.clientX<l.left}function Fi(t,e,n){var l=ie(an(n.el,n.options.draggable)),i=sl(n.el,n.options,N),a=10;return e?t.clientX>i.right+a||t.clientY>l.bottom&&t.clientX>l.left:t.clientY>i.bottom+a||t.clientX>l.right&&t.clientY>l.top}function Ni(t,e,n,l,i,a,o,s){var u=l?t.clientY:t.clientX,r=l?n.height:n.width,c=l?n.top:n.left,f=l?n.bottom:n.right,m=!1;if(!o){if(s&&zt<r*i){if(!wt&&(yt===1?u>c+r*a/2:u<f-r*a/2)&&(wt=!0),wt)m=!0;else if(yt===1?u<c+zt:u>f-zt)return-yt}else if(u>c+r*(1-i)/2&&u<f-r*(1-i)/2)return Mi(e)}return m=m||o,m&&(u<c+r*a/2||u>f-r*a/2)?u>c+r/2?1:-1:0}function Mi(t){return ye(S)<ye(t)?1:-1}function Ri(t){for(var e=t.tagName+t.className+t.src+t.href+t.textContent,n=e.length,l=0;n--;)l+=e.charCodeAt(n);return l.toString(36)}function Hi(t){Xt.length=0;for(var e=t.getElementsByTagName("input"),n=e.length;n--;){var l=e[n];l.checked&&Xt.push(l)}}function Gt(t){return setTimeout(t,0)}function hn(t){return clearTimeout(t)}qt&&j(document,"touchmove",function(t){(A.active||ft)&&t.cancelable&&t.preventDefault()}),A.utils={on:j,off:q,css:O,find:nl,is:function(e,n){return!!ke(e,n,e,!1)},extend:vi,throttle:al,closest:ke,toggleClass:ge,clone:rl,index:ye,nextTick:Gt,cancelNextTick:hn,detectDirection:hl,getChild:rt},A.get=function(t){return t[be]},A.mount=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];e[0].constructor===Array&&(e=e[0]),e.forEach(function(l){if(!l.prototype||!l.prototype.constructor)throw"Sortable: Mounted plugin must be a constructor function, not ".concat({}.toString.call(l));l.utils&&(A.utils=Pe(Pe({},A.utils),l.utils)),bt.mount(l)})},A.create=function(t,e){return new A(t,e)},A.version=gi;var ae=[],Et,mn,pn=!1,gn,bn,Ut,Dt;function Bi(){function t(){this.defaults={scroll:!0,forceAutoScrollFallback:!1,scrollSensitivity:30,scrollSpeed:10,bubbleScroll:!0};for(var e in this)e.charAt(0)==="_"&&typeof this[e]=="function"&&(this[e]=this[e].bind(this))}return t.prototype={dragStarted:function(n){var l=n.originalEvent;this.sortable.nativeDraggable?j(document,"dragover",this._handleAutoScroll):this.options.supportPointer?j(document,"pointermove",this._handleFallbackAutoScroll):l.touches?j(document,"touchmove",this._handleFallbackAutoScroll):j(document,"mousemove",this._handleFallbackAutoScroll)},dragOverCompleted:function(n){var l=n.originalEvent;!this.options.dragOverBubble&&!l.rootEl&&this._handleAutoScroll(l)},drop:function(){this.sortable.nativeDraggable?q(document,"dragover",this._handleAutoScroll):(q(document,"pointermove",this._handleFallbackAutoScroll),q(document,"touchmove",this._handleFallbackAutoScroll),q(document,"mousemove",this._handleFallbackAutoScroll)),bl(),Qt(),yi()},nulling:function(){Ut=mn=Et=pn=Dt=gn=bn=null,ae.length=0},_handleFallbackAutoScroll:function(n){this._handleAutoScroll(n,!0)},_handleAutoScroll:function(n,l){var i=this,a=(n.touches?n.touches[0]:n).clientX,o=(n.touches?n.touches[0]:n).clientY,s=document.elementFromPoint(a,o);if(Ut=n,l||this.options.forceAutoScrollFallback||mt||ze||pt){_n(n,this.options,s,l);var u=Qe(s,!0);pn&&(!Dt||a!==gn||o!==bn)&&(Dt&&bl(),Dt=setInterval(function(){var r=Qe(document.elementFromPoint(a,o),!0);r!==u&&(u=r,Qt()),_n(n,i.options,r,l)},10),gn=a,bn=o)}else{if(!this.options.bubbleScroll||Qe(s,!0)===Le()){Qt();return}_n(n,this.options,Qe(s,!1),!1)}}},Be(t,{pluginName:"scroll",initializeByDefault:!0})}function Qt(){ae.forEach(function(t){clearInterval(t.pid)}),ae=[]}function bl(){clearInterval(Dt)}var _n=al(function(t,e,n,l){if(e.scroll){var i=(t.touches?t.touches[0]:t).clientX,a=(t.touches?t.touches[0]:t).clientY,o=e.scrollSensitivity,s=e.scrollSpeed,u=Le(),r=!1,c;mn!==n&&(mn=n,Qt(),Et=e.scroll,c=e.scrollFn,Et===!0&&(Et=Qe(n,!0)));var f=0,m=Et;do{var p=m,d=ie(p),g=d.top,y=d.bottom,v=d.left,w=d.right,k=d.width,D=d.height,b=void 0,L=void 0,E=p.scrollWidth,H=p.scrollHeight,C=O(p),ne=p.scrollLeft,se=p.scrollTop;p===u?(b=k<E&&(C.overflowX==="auto"||C.overflowX==="scroll"||C.overflowX==="visible"),L=D<H&&(C.overflowY==="auto"||C.overflowY==="scroll"||C.overflowY==="visible")):(b=k<E&&(C.overflowX==="auto"||C.overflowX==="scroll"),L=D<H&&(C.overflowY==="auto"||C.overflowY==="scroll"));var V=b&&(Math.abs(w-i)<=o&&ne+k<E)-(Math.abs(v-i)<=o&&!!ne),W=L&&(Math.abs(y-a)<=o&&se+D<H)-(Math.abs(g-a)<=o&&!!se);if(!ae[f])for(var K=0;K<=f;K++)ae[K]||(ae[K]={});(ae[f].vx!=V||ae[f].vy!=W||ae[f].el!==p)&&(ae[f].el=p,ae[f].vx=V,ae[f].vy=W,clearInterval(ae[f].pid),(V!=0||W!=0)&&(r=!0,ae[f].pid=setInterval((function(){l&&this.layer===0&&A.active._onTouchMove(Ut);var F=ae[this.layer].vy?ae[this.layer].vy*s:0,z=ae[this.layer].vx?ae[this.layer].vx*s:0;typeof c=="function"&&c.call(A.dragged.parentNode[be],z,F,t,Ut,ae[this.layer].el)!=="continue"||ol(ae[this.layer].el,z,F)}).bind({layer:f}),24))),f++}while(e.bubbleScroll&&m!==u&&(m=Qe(m,!1)));pn=r}},30),_l=function(e){var n=e.originalEvent,l=e.putSortable,i=e.dragEl,a=e.activeSortable,o=e.dispatchSortableEvent,s=e.hideGhostForTarget,u=e.unhideGhostForTarget;if(n){var r=l||a;s();var c=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:n,f=document.elementFromPoint(c.clientX,c.clientY);u(),r&&!r.el.contains(f)&&(o("spill"),this.onSpill({dragEl:i,putSortable:l}))}};function vn(){}vn.prototype={startIndex:null,dragStart:function(e){var n=e.oldDraggableIndex;this.startIndex=n},onSpill:function(e){var n=e.dragEl,l=e.putSortable;this.sortable.captureAnimationState(),l&&l.captureAnimationState();var i=rt(this.sortable.el,this.startIndex,this.options);i?this.sortable.el.insertBefore(n,i):this.sortable.el.appendChild(n),this.sortable.animateAll(),l&&l.animateAll()},drop:_l},Be(vn,{pluginName:"revertOnSpill"});function yn(){}yn.prototype={onSpill:function(e){var n=e.dragEl,l=e.putSortable,i=l||this.sortable;i.captureAnimationState(),n.parentNode&&n.parentNode.removeChild(n),i.animateAll()},drop:_l},Be(yn,{pluginName:"removeOnSpill"}),A.mount(new Bi),A.mount(yn,vn);function vl(t,e,n){const l=t.slice();return l[16]=e[n],l}function yl(t,e,n){const l=t.slice();return l[19]=e[n],l}function wl(t){let e,n,l,i;function a(){return t[10](t[19])}return{c(){e=T("div"),n=T("a"),n.innerHTML='<i class="fas fa-pencil-alt fa-sm"></i>',h(n,"href","javascript:"),h(n,"data-action","editField"),h(n,"class","edit-field svelte-1mx8y43"),h(e,"class","right svelte-1mx8y43")},m(o,s){Q(o,e,s),_(e,n),l||(i=le(n,"click",a),l=!0)},p(o,s){t=o},d(o){o&&G(e),l=!1,i()}}}function El(t,e){let n,l,i,a=e[19].label+"",o,s,u,r=e[2].editable&&wl(e),c=[e[9](e[19])],f={};for(let m=0;m<c.length;m+=1)f=qe(f,c[m]);return{key:t,first:null,c(){n=T("li"),l=T("div"),i=T("label"),o=ce(a),s=X(),r&&r.c(),u=X(),h(i,"class","svelte-1mx8y43"),h(l,"class","left svelte-1mx8y43"),kt(n,f),Tt(n,"svelte-1mx8y43",!0),this.first=n},m(m,p){Q(m,n,p),_(n,l),_(l,i),_(i,o),_(n,s),r&&r.m(n,null),_(n,u)},p(m,p){e=m,p&1&&a!==(a=e[19].label+"")&&Ae(o,a),e[2].editable?r?r.p(e,p):(r=wl(e),r.c(),r.m(n,u)):r&&(r.d(1),r=null),kt(n,f=Hn(c,[p&1&&e[9](e[19])])),Tt(n,"svelte-1mx8y43",!0)},d(m){m&&G(n),r&&r.d()}}}function Dl(t,e){let n,l,i,a=e[16].label+"",o,s,u=[e[9](e[16])],r={};for(let c=0;c<u.length;c+=1)r=qe(r,u[c]);return{key:t,first:null,c(){n=T("li"),l=T("div"),i=T("label"),o=ce(a),s=X(),h(i,"class","svelte-1mx8y43"),h(l,"class","left svelte-1mx8y43"),kt(n,r),Tt(n,"svelte-1mx8y43",!0),this.first=n},m(c,f){Q(c,n,f),_(n,l),_(l,i),_(i,o),_(n,s)},p(c,f){e=c,f&2&&a!==(a=e[16].label+"")&&Ae(o,a),kt(n,r=Hn(u,[f&2&&e[9](e[16])])),Tt(n,"svelte-1mx8y43",!0)},d(c){c&&G(n)}}}function Yi(t){let e,n,l,i,a,o,s=[],u=new Map,r,c,f,m,p,d,g=[],y=new Map,v=de(t[0]);const w=b=>b[19].name;for(let b=0;b<v.length;b+=1){let L=yl(t,v,b),E=w(L);u.set(E,s[b]=El(E,L))}let k=de(t[1]);const D=b=>b[16].name;for(let b=0;b<k.length;b+=1){let L=vl(t,k,b),E=D(L);y.set(E,g[b]=Dl(E,L))}return{c(){e=T("div"),n=T("div"),l=T("div"),i=T("header"),i.textContent=`${Y.translate("Enabled","labels","Admin")}`,a=X(),o=T("ul");for(let b=0;b<s.length;b+=1)s[b].c();r=X(),c=T("div"),f=T("div"),m=T("header"),m.textContent=`${Y.translate("Disabled","labels","Admin")}`,p=X(),d=T("ul");for(let b=0;b<g.length;b+=1)g[b].c();h(o,"class","enabled connected svelte-1mx8y43"),h(l,"class","well"),h(n,"class","col-sm-5"),h(d,"class","disabled connected svelte-1mx8y43"),h(f,"class","well"),h(c,"class","col-sm-5"),h(e,"id","layout"),h(e,"class","row")},m(b,L){Q(b,e,L),_(e,n),_(n,l),_(l,i),_(l,a),_(l,o);for(let E=0;E<s.length;E+=1)s[E]&&s[E].m(o,null);_(e,r),_(e,c),_(c,f),_(f,m),_(f,p),_(f,d);for(let E=0;E<g.length;E+=1)g[E]&&g[E].m(d,null);t[11](e)},p(b,L){L&581&&(v=de(b[0]),s=It(s,L,w,1,b,v,u,o,Ct,El,null,yl)),L&514&&(k=de(b[1]),g=It(g,L,D,1,b,k,y,d,Ct,Dl,null,vl))},d(b){b&&G(e);for(let L=0;L<s.length;L+=1)s[L].d();for(let L=0;L<g.length;L+=1)g[L].d();t[11](null)}}}function zi(t){let e,n,l={params:t[2],validate:t[8],fetch:t[7],loadLayout:t[3],$$slots:{default:[Yi]},$$scope:{ctx:t}};return e=new Kn({props:l}),t[12](e),{c(){Ge(e.$$.fragment)},m(i,a){Ne(e,i,a),n=!0},p(i,[a]){const o={};a&4&&(o.params=i[2]),a&8&&(o.loadLayout=i[3]),a&4194327&&(o.$$scope={dirty:a,ctx:i}),e.$set(o)},i(i){n||(Ee(e.$$.fragment,i),n=!0)},o(i){Fe(e.$$.fragment,i),n=!1},d(i){t[12](null),Me(e,i)}}}function Xi(t){return t.toLowerCase()}function Sl(t,e){return t[e]}function qi(t,e,n){let l,i,a,{params:o}=e,{enabledFields:s=[]}=e,{disabledFields:u=[]}=e,{loadLayout:r}=e,c;xt(()=>{f()}),An(()=>{i&&i.destroy(),a&&a.destroy()});function f(){const k={group:"fields",draggable:"li",animation:150};i=A.create(l.querySelector("ul.enabled"),{...k,onEnd(D){if(D.to.closest(".connected").classList.contains("enabled")){const[b]=s.splice(D.oldIndex,1);s.splice(D.newIndex,0,b)}else{const b=s[D.oldIndex];s.splice(D.oldIndex,1),u.splice(D.newIndex,0,b),n(1,u=[...u])}n(0,s=[...s])}}),a=A.create(l.querySelector("ul.disabled"),{...k,onEnd(D){if(D.to.closest(".connected").classList.contains("disabled")){const[b]=u.splice(D.oldIndex,1);u.splice(D.newIndex,0,b)}else{const b=u[D.oldIndex];u.splice(D.oldIndex,1),s.splice(D.newIndex,0,b),n(0,s=[...s])}n(1,u=[...u])}})}function m(k){o.openEditDialog(k,o.scope,o.dataAttributeList,o.dataAttributesDefs,D=>{console.log("attributes"),n(0,s=s.map(b=>{if(b.name===k.name)for(let L in D)b[L]=D[L];return b}))})}function p(){return s}function d(k){return k.length===0?(Re.notify("Layout cannot be empty","error"),!1):!0}function g(k){const D={};return o.dataAttributeList.forEach(b=>{Sl(k,b)!=null&&(D[`data-${Xi(b)}`]=Sl(k,b))}),D}const y=k=>m(k);function v(k){Oe[k?"unshift":"push"](()=>{l=k,n(4,l)})}function w(k){Oe[k?"unshift":"push"](()=>{c=k,n(5,c)})}return t.$$set=k=>{"params"in k&&n(2,o=k.params),"enabledFields"in k&&n(0,s=k.enabledFields),"disabledFields"in k&&n(1,u=k.disabledFields),"loadLayout"in k&&n(3,r=k.loadLayout)},[s,u,o,r,l,c,m,p,d,g,y,v,w]}class wn extends Se{constructor(e){super(),De(this,e,qi,zi,ve,{params:2,enabledFields:0,disabledFields:1,loadLayout:3})}}function ji(t){let e,n,l={params:t[0],enabledFields:t[2],disabledFields:t[3],editable:Wi,loadLayout:t[4]};return e=new wn({props:l}),t[6](e),{c(){Ge(e.$$.fragment)},m(i,a){Ne(e,i,a),n=!0},p(i,[a]){const o={};a&1&&(o.params=i[0]),a&4&&(o.enabledFields=i[2]),a&8&&(o.disabledFields=i[3]),e.$set(o)},i(i){n||(Ee(e.$$.fragment,i),n=!0)},o(i){Fe(e.$$.fragment,i),n=!1},d(i){t[6](null),Me(e,i)}}}let Wi=!0;function Gi(t){return!0}function Ui(t,e,n){let{params:l}=e;l.dataAttributeList||(l.dataAttributeList=["id","name","width","widthPx","link","notSortable","align","view","customLabel"]),l.dataAttributesDefs||(l.dataAttributesDefs={link:{type:"bool"},width:{type:"float"},notSortable:{type:"bool"},align:{type:"enum",options:["left","right"]},view:{type:"varchar",readOnly:!0},customLabel:{type:"varchar",readOnly:!0},widthPx:{type:"float"},name:{type:"varchar",readOnly:!0}});let{layoutDisabledParameter:i="layoutListDisabled"}=e,a,o=[],s=[];const u=[],r=[];function c(d){Ot.create(l.scope,g=>{He.get(l.scope,l.type,l.layoutProfileId,y=>{f(g,y),d&&d()},!1)})}function f(d,g){const y=Object.keys(d.defs.fields).filter(D=>Gi(d.getFieldParam(D,"type"))&&m(d,D)).sort((D,b)=>Y.translate(D,"fields",l.scope).localeCompare(Y.translate(b,"fields",l.scope))),v=[],w=[],k=[];n(2,o=g.map(D=>{const b=Y.translate(D.name,"fields",l.scope);return w.includes(b)&&k.push(b),w.push(b),v.push(D.name),{...D,label:D.label||b}})),n(3,s=y.filter(D=>!v.includes(D)).map(D=>{const b=Y.translate(D,"fields",l.scope);w.includes(b)&&k.push(b),w.push(b);const L={name:D,label:b},E=Ue.get(["entityDefs",l.scope,"fields",D,"type"]);return E&&Ue.get(["fields",E,"notSortable"])&&(L.notSortable=!0),L})),[o,s].forEach(D=>{D.forEach(b=>{k.includes(b.label)&&(b.label+=` (${b.name})`)})})}function m(d,g){return u.includes(g)||r.includes(d.getFieldParam(g,"type"))?!1:!d.getFieldParam(g,"disabled")&&!d.getFieldParam(g,i)}function p(d){Oe[d?"unshift":"push"](()=>{a=d,n(1,a)})}return t.$$set=d=>{"params"in d&&n(0,l=d.params),"layoutDisabledParameter"in d&&n(5,i=d.layoutDisabledParameter)},[l,a,o,s,c,i,p]}class kl extends Se{constructor(e){super(),De(this,e,Ui,ji,ve,{params:0,layoutDisabledParameter:5})}}function Qi(t){let e,n,l={params:t[0],enabledFields:t[2],disabledFields:t[3],loadLayout:t[4]};return e=new wn({props:l}),t[6](e),{c(){Ge(e.$$.fragment)},m(i,a){Ne(e,i,a),n=!0},p(i,[a]){const o={};a&1&&(o.params=i[0]),a&4&&(o.enabledFields=i[2]),a&8&&(o.disabledFields=i[3]),e.$set(o)},i(i){n||(Ee(e.$$.fragment,i),n=!0)},o(i){Fe(e.$$.fragment,i),n=!1},d(i){t[6](null),Me(e,i)}}}function Vi(t,e,n){let{params:l}=e,{viewType:i="detail"}=e;l.dataAttributeList||(l.dataAttributeList=["id","name","style","sticked"]),l.dataAttributesDefs||(l.dataAttributesDefs={style:{type:"enum",options:["default","success","danger","primary","info","warning"],translation:"LayoutManager.options.style"},sticked:{type:"bool"},name:{readOnly:!0}});let a,o=[],s=[];function u(f){He.get(l.scope,l.type,l.layoutProfileId,m=>{r(m),f&&f()},!1)}function r(f){let m=[],p={},d={};Ue.get(["clientDefs",d.scope,"defaultSidePanel",i])!==!1&&!Ue.get(["clientDefs",d.scope,"defaultSidePanelDisabled"])&&(m.push("default"),p.default="Default"),(Ue.get(["clientDefs",d.scope,"sidePanels",i])||[]).forEach(g=>{g.name&&(m.push(g.name),g.label&&(p[g.name]=g.label),d[g.name]=g)}),n(3,s=[]),f=f||{},n(2,o=[]),m.forEach((g,y)=>{let v=!1,w=f[g]||{};w.disabled&&(v=!0);let k;if(p[g]?k=Y.translate(p[g],"labels",d.scope):k=Y.translate(g,"panels",d.scope),v)s.push({name:g,label:k});else{let D={name:g,label:k};D.name in d&&d.dataAttributeList.forEach(b=>{if(b==="name")return;let L=d[D.name]||{};b in L&&(D[b]=L[b])});for(let b in w)D[b]=w[b];D.index="index"in w?w.index:y,o.push(D)}}),o.sort((g,y)=>g.index-y.index)}function c(f){Oe[f?"unshift":"push"](()=>{a=f,n(1,a)})}return t.$$set=f=>{"params"in f&&n(0,l=f.params),"viewType"in f&&n(5,i=f.viewType)},[l,a,o,s,u,i,c]}class Vt extends Se{constructor(e){super(),De(this,e,Vi,Qi,ve,{params:0,viewType:5})}}function Ki(t){let e,n;return e=new wn({props:{params:t[0],enabledFields:t[1],disabledFields:t[2],loadLayout:t[3]}}),{c(){Ge(e.$$.fragment)},m(l,i){Ne(e,l,i),n=!0},p(l,[i]){const a={};i&1&&(a.params=l[0]),i&2&&(a.enabledFields=l[1]),i&4&&(a.disabledFields=l[2]),e.$set(a)},i(l){n||(Ee(e.$$.fragment,l),n=!0)},o(l){Fe(e.$$.fragment,l),n=!1},d(l){Me(e,l)}}}function Zi(t,e){return!t.getLinkParam(e,"disabled")&&!t.getLinkParam(e,"layoutRelationshipsDisabled")}function Ji(t,e,n){let{params:l}=e;l.dataAttributeList||(l.dataAttributeList=["id","name","style","hiddenPerDefault"]),l.dataAttributesDefs||(l.dataAttributesDefs={style:{type:"enum",options:["default","success","danger","primary","info","warning"],translation:"LayoutManager.options.style"},hiddenPerDefault:{type:"bool"},name:{readOnly:!0}});let i=[],a=[];function o(u){Ot.create(l.scope,function(r){He.get(l.scope,l.type,l.layoutProfileId,c=>{s(r,c),u&&u()},!1)})}function s(u,r){let c=[];for(let f in u.defs.links)["hasMany","hasChildren"].includes(u.defs.links[f].type)&&Zi(u,f)&&c.push(f);c.sort((f,m)=>Y.translate(f,"links","scope").localeCompare(Y.translate(m,"links","scope"))),enabledFieldsList=[],n(1,i=[]),n(2,a=[]);for(let f in r){let m=r[f],p;typeof m=="string"?p={name:m,label:Y.translate(m,"links","scope")}:(p=m,p.label=Y.translate(p.name,"links","scope")),l.dataAttributeList.forEach(d=>{if(d==="name"||d in p)return;let g=Ue.get(["clientDefs","scope","relationshipPanels",p.name,d]);g!==null&&(p[d]=g)}),i.push(p),enabledFieldsList.push(p.name)}for(let f of c)enabledFieldsList.includes(f)||a.push({name:f,label:Y.translate(f,"links","scope")});for(let f of i)f.label=Y.translate(f.name,"links","scope")}return t.$$set=u=>{"params"in u&&n(0,l=u.params)},[l,i,a,o]}class xi extends Se{constructor(e){super(),De(this,e,Ji,Ki,ve,{params:0})}}function Tl(t,e,n){const l=t.slice();return l[40]=e[n],l}function Pl(t,e,n){const l=t.slice();return l[43]=e[n],l}function Ll(t,e,n){const l=t.slice();return l[46]=e[n],l}function Cl(t,e,n){const l=t.slice();return l[49]=e[n],l[51]=n,l}function $i(t){let e,n,l,i,a;function o(){return t[21](t[43],t[46],t[51])}function s(...u){return t[22](t[43],t[46],t[51],...u)}return{c(){e=T("li"),n=T("a"),n.innerHTML='<i class="fas fa-minus"></i>',l=X(),h(n,"href","#"),h(n,"data-action","minusCell"),h(n,"class","remove-field svelte-fp3tbt"),h(e,"class","empty cell svelte-fp3tbt")},m(u,r){Q(u,e,r),_(e,n),_(e,l),i||(a=[le(n,"click",je(o)),le(e,"dragover",je(ia)),le(e,"drop",s)],i=!0)},p(u,r){t=u},d(u){u&&G(e),i=!1,Ie(a)}}}function ea(t){let e,n=t[49].label+"",l,i,a,o,s,u,r,c,f,m,p;function d(){return t[19](t[43],t[46],t[51])}function g(...y){return t[20](t[49],...y)}return{c(){e=T("li"),l=ce(n),i=X(),a=T("a"),a.innerHTML='<i class="fas fa-times"></i>',o=X(),h(a,"href","#"),h(a,"data-action","removeField"),h(a,"class","remove-field svelte-fp3tbt"),h(e,"class","cell svelte-fp3tbt"),h(e,"draggable","true"),h(e,"data-id",s=t[49].id),h(e,"data-name",u=t[49].name),h(e,"data-full-width",r=t[49].fullWidth?"true":void 0),h(e,"data-custom-label",c=t[49].customLabel?t[49].customLabel:void 0),h(e,"data-no-label",f=t[49].noLabel)},m(y,v){Q(y,e,v),_(e,l),_(e,i),_(e,a),_(e,o),m||(p=[le(a,"click",je(d)),le(e,"dragstart",Jt(g))],m=!0)},p(y,v){t=y,v[0]&2&&n!==(n=t[49].label+"")&&Ae(l,n),v[0]&2&&s!==(s=t[49].id)&&h(e,"data-id",s),v[0]&2&&u!==(u=t[49].name)&&h(e,"data-name",u),v[0]&2&&r!==(r=t[49].fullWidth?"true":void 0)&&h(e,"data-full-width",r),v[0]&2&&c!==(c=t[49].customLabel?t[49].customLabel:void 0)&&h(e,"data-custom-label",c),v[0]&2&&f!==(f=t[49].noLabel)&&h(e,"data-no-label",f)},d(y){y&&G(e),m=!1,Ie(p)}}}function Il(t){let e;function n(a,o){return a[49]?ea:$i}let l=n(t),i=l(t);return{c(){i.c(),e=In()},m(a,o){i.m(a,o),Q(a,e,o)},p(a,o){l===(l=n(a))&&i?i.p(a,o):(i.d(1),i=l(a),i&&(i.c(),i.m(e.parentNode,e)))},d(a){a&&G(e),i.d(a)}}}function Al(t,e){let n,l,i,a,o,s,u,r,c;function f(){return e[18](e[43],e[46])}let m=de(e[46].cells),p=[];for(let d=0;d<m.length;d+=1)p[d]=Il(Cl(e,m,d));return{key:t,first:null,c(){n=T("li"),l=T("div"),i=T("a"),i.innerHTML='<i class="fas fa-times"></i>',a=X(),o=T("ul");for(let d=0;d<p.length;d+=1)p[d].c();s=X(),h(i,"href","#"),h(i,"data-action","removeRow"),h(i,"class","remove-row pull-right svelte-fp3tbt"),h(l,"class","svelte-fp3tbt"),h(o,"class","cells svelte-fp3tbt"),h(n,"class","row svelte-fp3tbt"),h(n,"data-number",u=e[46].number),this.first=n},m(d,g){Q(d,n,g),_(n,l),_(l,i),_(n,a),_(n,o);for(let y=0;y<p.length;y+=1)p[y]&&p[y].m(o,null);_(n,s),r||(c=[le(i,"click",je(f)),le(o,"mousedown",Jt(aa))],r=!0)},p(d,g){if(e=d,g[0]&5634){m=de(e[46].cells);let y;for(y=0;y<m.length;y+=1){const v=Cl(e,m,y);p[y]?p[y].p(v,g):(p[y]=Il(v),p[y].c(),p[y].m(o,null))}for(;y<p.length;y+=1)p[y].d(1);p.length=m.length}g[0]&2&&u!==(u=e[46].number)&&h(n,"data-number",u)},d(d){d&&G(n),Zt(p,d),r=!1,Ie(c)}}}function Ol(t,e){let n,l,i,a=(e[43].customLabel||e[43].label||"")+"",o,s,u,r,c,f,m,p,d,g,y,v=[],w=new Map,k,D,b,L,E,H,C;function ne(){return e[16](e[43])}function se(){return e[17](e[43])}let V=de(e[43].rows);const W=F=>F[46].number;for(let F=0;F<V.length;F+=1){let z=Ll(e,V,F),me=W(z);w.set(me,v[F]=Al(me,z))}function K(){return e[23](e[43])}return{key:t,first:null,c(){n=T("li"),l=T("header"),i=T("label"),o=ce(a),u=ce(`Â \r
                                `),r=T("a"),r.innerHTML='<i class="fas fa-pencil-alt fa-sm"></i>',c=X(),f=T("a"),m=T("i"),g=X(),y=T("ul");for(let F=0;F<v.length;F+=1)v[F].c();k=X(),D=T("div"),b=T("a"),b.innerHTML='<i class="fas fa-plus"></i>',L=X(),h(i,"data-is-custom",s=e[43].customLabel?"true":void 0),h(i,"class","svelte-fp3tbt"),h(r,"href","#"),h(r,"data-action","edit-panel-label"),h(r,"class","edit-panel-label svelte-fp3tbt"),h(m,"class","fas fa-times"),h(f,"href","#"),We(f,"float","right"),h(f,"data-action","removePanel"),h(f,"class","remove-panel svelte-fp3tbt"),h(f,"data-number",p=e[43].number),h(l,"data-name",d=e[43].name),h(l,"class","svelte-fp3tbt"),h(y,"class","rows svelte-fp3tbt"),h(b,"href","#"),h(b,"data-action","addRow"),h(b,"class","svelte-fp3tbt"),h(D,"class","svelte-fp3tbt"),h(n,"data-number",E=e[43].number),h(n,"class","panel-layout svelte-fp3tbt"),this.first=n},m(F,z){Q(F,n,z),_(n,l),_(l,i),_(i,o),_(l,u),_(l,r),_(l,c),_(l,f),_(f,m),_(n,g),_(n,y);for(let me=0;me<v.length;me+=1)v[me]&&v[me].m(y,null);_(n,k),_(n,D),_(D,b),_(n,L),H||(C=[le(r,"click",je(ne)),le(f,"click",je(se)),le(y,"mousedown",Jt(oa)),le(b,"click",je(K))],H=!0)},p(F,z){e=F,z[0]&2&&a!==(a=(e[43].customLabel||e[43].label||"")+"")&&Ae(o,a),z[0]&2&&s!==(s=e[43].customLabel?"true":void 0)&&h(i,"data-is-custom",s),z[0]&2&&p!==(p=e[43].number)&&h(f,"data-number",p),z[0]&2&&d!==(d=e[43].name)&&h(l,"data-name",d),z[0]&5890&&(V=de(e[43].rows),v=It(v,z,W,1,e,V,w,y,Ct,Al,null,Ll)),z[0]&2&&E!==(E=e[43].number)&&h(n,"data-number",E)},d(F){F&&G(n);for(let z=0;z<v.length;z+=1)v[z].d();H=!1,Ie(C)}}}function Fl(t){let e,n=t[40].label+"",l,i,a,o,s;function u(...r){return t[24](t[40],...r)}return{c(){e=T("li"),l=ce(n),i=X(),h(e,"class","cell svelte-fp3tbt"),h(e,"data-name",a=t[40].name)},m(r,c){Q(r,e,c),_(e,l),_(e,i),o||(s=le(e,"dragstart",u),o=!0)},p(r,c){t=r,c[0]&4&&n!==(n=t[40].label+"")&&Ae(l,n),c[0]&4&&a!==(a=t[40].name)&&h(e,"data-name",a)},d(r){r&&G(e),o=!1,s()}}}function ta(t){let e,n,l,i,a,o,s,u,r=[],c=new Map,f,m,p,d,g,y,v,w,k=de(t[1]);const D=E=>E[43].number;for(let E=0;E<k.length;E+=1){let H=Pl(t,k,E),C=D(H);c.set(C,r[E]=Ol(C,H))}let b=de(t[2]),L=[];for(let E=0;E<b.length;E+=1)L[E]=Fl(Tl(t,b,E));return{c(){e=T("div"),n=T("div"),l=T("div"),i=T("header"),i.textContent=`${Y.translate("Layout","LayoutManager")}`,a=X(),o=T("a"),o.textContent=`${Y.translate("Add Panel","Admin")}`,s=X(),u=T("ul");for(let E=0;E<r.length;E+=1)r[E].c();f=X(),m=T("div"),p=T("div"),d=T("header"),d.textContent=`${Y.translate("Available Fields","Admin")}`,g=X(),y=T("ul");for(let E=0;E<L.length;E+=1)L[E].c();h(i,"class","svelte-fp3tbt"),h(o,"href","#"),h(o,"class","svelte-fp3tbt"),h(u,"class","panels svelte-fp3tbt"),h(l,"class","well svelte-fp3tbt"),h(n,"class","col-md-8 svelte-fp3tbt"),h(d,"class","svelte-fp3tbt"),h(y,"class","disabled cells clearfix svelte-fp3tbt"),h(p,"class","well svelte-fp3tbt"),h(m,"class","col-md-4 svelte-fp3tbt"),h(e,"id","layout"),h(e,"class","row svelte-fp3tbt")},m(E,H){Q(E,e,H),_(e,n),_(n,l),_(l,i),_(l,a),_(l,o),_(l,s),_(l,u);for(let C=0;C<r.length;C+=1)r[C]&&r[C].m(u,null);_(e,f),_(e,m),_(m,p),_(p,d),_(p,g),_(p,y);for(let C=0;C<L.length;C+=1)L[C]&&L[C].m(y,null);v||(w=le(o,"click",je(t[5])),v=!0)},p(E,H){if(H[0]&8130&&(k=de(E[1]),r=It(r,H,D,1,E,k,c,u,Ct,Ol,null,Pl)),H[0]&4){b=de(E[2]);let C;for(C=0;C<b.length;C+=1){const ne=Tl(E,b,C);L[C]?L[C].p(ne,H):(L[C]=Fl(ne),L[C].c(),L[C].m(y,null))}for(;C<L.length;C+=1)L[C].d(1);L.length=b.length}},d(E){E&&G(e);for(let H=0;H<r.length;H+=1)r[H].d();Zt(L,E),v=!1,w()}}}function na(t){let e,n;return e=new Kn({props:{params:t[0],validate:t[13],fetch:t[4],loadLayout:t[3],$$slots:{default:[ta]},$$scope:{ctx:t}}}),{c(){Ge(e.$$.fragment)},m(l,i){Ne(e,l,i),n=!0},p(l,i){const a={};i[0]&1&&(a.params=l[0]),i[0]&6|i[1]&2097152&&(a.$$scope={dirty:i,ctx:l}),e.$set(a)},i(l){n||(Ee(e.$$.fragment,l),n=!0)},o(l){Fe(e.$$.fragment,l),n=!1},d(l){Me(e,l)}}}function la(t,e){return e.some(n=>n.name===t)}const ia=t=>t.dataTransfer.dropEffect="move",aa=()=>{},oa=()=>{};function ra(t,e,n){let{params:l}=e,{columnCount:i=2}=e,{layoutDisabledParameter:a="layoutDetailDisabled"}=e,o=["id","label","style"],s={label:{type:"varchar"},style:{type:"enum",options:["default","success","danger","primary","info","warning"],translation:"LayoutManager.options.style"},dynamicLogicVisible:{type:"base",view:"views/admin/field-manager/fields/dynamic-logic-conditions"}},u=["modifiedAt","createdAt","modifiedBy","createdBy","assignedUser","ownerUser","teams"],r=[],c=[],f=-1,m=-1,p;Wl();function d(P){let I,M;const R=[];R.push(new Promise(B=>{Ot.create(l.scope,$=>{He.get(l.scope,l.type,l.layoutProfileId,U=>{I=U,M=$,B()},!1)})})),["detail","detailSmall"].includes(l.type)&&R.push(new Promise(B=>{He.get(l.scope,"sidePanels"+Espo.utils.upperCaseFirst(l.type),l.layoutProfileId,$=>{p=$,B()},!1)})),Promise.all(R).then(()=>{g(M,I),k(),Mn().then(()=>{b()}),P&&P()})}function g(P,I){let M=[];const R=[];for(const U in P.defs.fields)y(P,U)&&(R.push(Y.translate(U,"fields",l.scope)),M.push(U));const B=R.filter((U,pe)=>R.indexOf(U)!==pe);let $=[];n(2,c=[]),n(1,r=I),I.forEach((U,pe)=>{U.rows.forEach((ee,Ce)=>{ee&&ee.forEach((we,Xe)=>{if(Xe==i||!we)return;let Ze=Y.translate(we.name,"fields",l.scope);B.includes(Ze)&&(Ze+=` (${we.name})`),$.push({name:we.name,label:Ze}),n(1,r[pe].rows[Ce][Xe].label=Ze,r)})})}),M.sort((U,pe)=>Y.translate(U,"fields",l.scope).localeCompare(Y.translate(pe,"fields",l.scope)));for(const U in M)if(!la(M[U],$)){const pe=M[U];let ee=Y.translate(pe,"fields",l.scope);B.includes(ee)&&(ee+=` (${pe})`),c.push({name:pe,label:ee})}}function y(P,I){return v()&&u.includes(I)?!1:!P.getFieldParam(I,"disabled")&&!P.getFieldParam(I,a)}function v(){if(Ue.get(["clientDefs",l.scope,"defaultSidePanelDisabled"]))return!1;if(p){for(const P in p)if(P==="default"&&p[P].disabled)return!1}return!0}function w(){return r.map(P=>({...P,rows:P.rows.map(I=>I.cells)}))}function k(){f=-1,m=-1,n(1,r=r.map((P,I)=>(P.number=I,f=I,P.rows=P.rows.map(M=>({number:m++,cells:M})),P)))}function D(P){A.create(P,{animation:150,group:"rows",draggable:"li.row",onEnd(I){const M=parseInt(I.to.closest(".panel-layout").getAttribute("data-number")),R=parseInt(I.from.closest(".panel-layout").getAttribute("data-number"));if(R===M)n(1,r=r.map(B=>{if(B.number===M){const[$]=B.rows.splice(I.oldIndex,1);B.rows.splice(I.newIndex,0,$)}return B}));else{const $=r.find(U=>U.number===R).rows[I.oldIndex];n(1,r=r.map(U=>(U.number===R&&U.rows.splice(I.oldIndex,1),U.number===M&&U.rows.splice(I.newIndex,0,$),U)))}console.log(r)}})}function b(){A.create(document.querySelector("ul.panels"),{animation:150,group:"panels",draggable:"li.panel-layout",onEnd(P){const I=Array.from(P.to.children);n(1,r=I.map(M=>{const R=parseInt(M.getAttribute("data-number"));return r.find(B=>B.number===R)})),console.log(r)}}),document.querySelectorAll("ul.rows").forEach(P=>{D(P)}),document.querySelectorAll("ul.cells.disabled").forEach(P=>{A.create(P,{animation:150,group:"cells",draggable:"li.cell"})})}function L(){f++;const P={label:"New panel",rows:[{number:m++,cells:[!1,!1]}],number:f,name:`panel${f}`,isCustomLabel:!0};n(1,r=[...r,P]),Mn().then(()=>{const I=document.querySelector(`.panel-layout[data-number="${P.number}"] > .rows`);D(I)})}function E(P){const I=r.find(R=>R.number===P);n(1,r=r.filter(R=>R!==I));let M=[];I.rows.forEach(R=>{R.cells.forEach(B=>{B&&M.push(B)})}),n(2,c=[...c,...M])}function H(P){n(1,r=r.map(I=>(I.number===P&&(I.rows=[...I.rows,{number:m++,cells:Array(i).fill(!1)}]),I)))}function C(P,I){n(1,r=r.map(M=>{if(M.number===P){const R=M.rows.find(B=>B.number===I);M.rows=M.rows.filter(B=>B!=R),n(2,c=[...c,...R.cells.filter(B=>!!B)])}return M}))}function ne(P,I,M){n(1,r=r.map(R=>(R.number===P&&(R.rows=R.rows.map((B,$)=>{if(B.number===I){const U=B.cells[M];U&&n(2,c=[...c,U]),B.cells[M]=!1}return B})),R)))}function se(P,I,M,R){const B=P.dataTransfer.getData("name");let $=c.find(ee=>ee.name===B),U=null,pe=null;if($)n(2,c=c.filter(ee=>ee!==$));else{if(r.forEach(ee=>{ee.rows.forEach((Ce,we)=>{Ce.cells.forEach(Xe=>{Xe&&Xe.name===B&&($=Xe,U=Ce.number,pe=ee.number)})})}),!$)return;n(1,r=r.map((ee,Ce)=>(pe===ee.number&&(ee.rows=ee.rows.map((we,Xe)=>(we.number===U&&(we.cells=we.cells.map((Ze,pa)=>Ze&&Ze.name===B?!1:Ze)),we))),ee)))}n(1,r=r.map(ee=>(I===ee.number&&(ee.rows=ee.rows.map(Ce=>(M===Ce.number&&(Ce.cells=Ce.cells.map((we,Xe)=>Xe===R?($.fullWidth&&delete $.fullWidth,$):we)),Ce))),ee))),console.log(r)}function V(P){l.onEditPanel(P,o,s,I=>{console.log(I),n(1,r=r.map(M=>(M.number===P.number&&o.forEach(R=>{P[R]=I[R]}),M)))})}function W(P,I,M){i<2||(n(1,r=r.map(R=>(P===R.number&&(R.rows=R.rows.map(B=>{if(I===B.number){const $=B.cells.filter((U,pe)=>pe!==M);$.length===1&&($[0].fullWidth=!0),B.cells=$}return B})),R))),n(14,i--,i))}function K(P){let I=0;return P.forEach(M=>{M.rows.forEach(R=>{R.forEach(B=>{B&&I++})})}),I===0?(Re.notify("Layout cannot be empty.","error"),!1):!0}const F=P=>V(P),z=P=>E(P.number),me=(P,I)=>C(P.number,I.number),et=(P,I,M)=>ne(P.number,I.number,M),En=(P,I)=>{I.dataTransfer.setData("name",P.name)},Nl=(P,I,M)=>W(P.number,I.number,M),Kt=(P,I,M,R)=>se(R,P.number,I.number,M),Dn=P=>H(P.number),da=(P,I)=>{I.dataTransfer.setData("name",P.name)};return t.$$set=P=>{"params"in P&&n(0,l=P.params),"columnCount"in P&&n(14,i=P.columnCount),"layoutDisabledParameter"in P&&n(15,a=P.layoutDisabledParameter)},[l,r,c,d,w,L,E,H,C,ne,se,V,W,K,i,a,F,z,me,et,En,Nl,Kt,Dn,da]}class sa extends Se{constructor(e){super(),De(this,e,ra,na,ve,{params:0,columnCount:14,layoutDisabledParameter:15},null,[-1,-1])}}function ua(t){let e,n;return e=new t[1]({props:{params:t[0],layoutDisabledParameter:t[2],viewType:t[3]}}),{c(){Ge(e.$$.fragment)},m(l,i){Ne(e,l,i),n=!0},p(l,[i]){const a={};i&1&&(a.params=l[0]),i&4&&(a.layoutDisabledParameter=l[2]),i&8&&(a.viewType=l[3]),e.$set(a)},i(l){n||(Ee(e.$$.fragment,l),n=!0)},o(l){Fe(e.$$.fragment,l),n=!1},d(l){Me(e,l)}}}function fa(t,e,n){let{params:l}=e,i,a,o;return t.$$set=s=>{"params"in s&&n(0,l=s.params)},t.$$.update=()=>{if(t.$$.dirty&1)switch(l.type){case"list":case"listSmall":n(2,a=l.type==="list"?"layoutListDisabled":"layoutListSmallDisabled"),n(1,i=kl);break;case"kanban":n(1,i=kl),n(0,l.dataAttributeList=["id","name","link","align","view","isLarge","cssStyle"],l),n(0,l.dataAttributesDefs={link:{type:"bool"},isLarge:{type:"bool"},width:{type:"float"},cssStyle:{type:"varchar"},align:{type:"enum",options:["left","right"]},view:{type:"varchar",readOnly:!0},name:{type:"varchar",readOnly:!0}},l);break;case"relationships":n(1,i=xi);break;case"detail":case"detailSmall":n(1,i=sa);break;case"sidePanelsDetail":n(3,o="detail"),n(1,i=Vt);break;case"sidePanelsDetailSmall":n(3,o="detailSmall"),n(1,i=Vt);break;case"sidePanelsEdit":n(3,o="edit"),n(1,i=Vt);break;case"sidePanelsEditSmall":n(3,o="editSmall"),n(1,i=Vt);break}},[l,i,a,o]}class ca extends Se{constructor(e){super(),De(this,e,fa,ua,ve,{params:0})}}window.SvelteLanguage=Y,window.SvelteUserData=Yn,window.SvelteNotifier=Re,window.SvelteLayoutManager=He,window.SvelteMetadata=Ue,window.SvelteModelFactory=Ot,fe.LayoutComponent=ca,fe.QueueManagerIcon=li,fe.UpdatePanel=fi,Object.defineProperty(fe,Symbol.toStringTag,{value:"Module"})});
