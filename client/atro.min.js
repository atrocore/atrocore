(function(Me,Je){typeof exports=="object"&&typeof module<"u"?Je(exports):typeof define=="function"&&define.amd?define(["exports"],Je):(Me=typeof globalThis<"u"?globalThis:Me||self,Je(Me.Svelte={}))})(this,function(Me){"use strict";var Mc=Object.defineProperty;var Rc=(Me,Je,Ft)=>Je in Me?Mc(Me,Je,{enumerable:!0,configurable:!0,writable:!0,value:Ft}):Me[Je]=Ft;var Nr=(Me,Je,Ft)=>Rc(Me,typeof Je!="symbol"?Je+"":Je,Ft);let Je={};function Ft(t={}){Je={animate:!0,allowClose:!0,overlayOpacity:.7,smoothScroll:!1,disableActiveInteraction:!1,showProgress:!1,stagePadding:10,stageRadius:5,popoverOffset:10,showButtons:["next","previous","close"],disableButtons:[],overlayColor:"#000",...t}}function Y(t){return t?Je[t]:Je}function $n(t,e,n,i){return(t/=i/2)<1?n/2*t*t+e:-n/2*(--t*(t-2)-1)+e}function Mr(t){const e='a[href]:not([disabled]), button:not([disabled]), textarea:not([disabled]), input[type="text"]:not([disabled]), input[type="radio"]:not([disabled]), input[type="checkbox"]:not([disabled]), select:not([disabled])';return t.flatMap(n=>{const i=n.matches(e),r=Array.from(n.querySelectorAll(e));return[...i?[n]:[],...r]}).filter(n=>getComputedStyle(n).pointerEvents!=="none"&&Il(n))}function Rr(t){if(!t||Ll(t))return;const e=Y("smoothScroll");t.scrollIntoView({behavior:!e||Al(t)?"auto":"smooth",inline:"center",block:"center"})}function Al(t){if(!t||!t.parentElement)return;const e=t.parentElement;return e.scrollHeight>e.clientHeight}function Ll(t){const e=t.getBoundingClientRect();return e.top>=0&&e.left>=0&&e.bottom<=(window.innerHeight||document.documentElement.clientHeight)&&e.right<=(window.innerWidth||document.documentElement.clientWidth)}function Il(t){return!!(t.offsetWidth||t.offsetHeight||t.getClientRects().length)}let ei={};function Fe(t,e){ei[t]=e}function K(t){return t?ei[t]:ei}function Br(){ei={}}let ti={};function ni(t,e){ti[t]=e}function Vt(t){var e;(e=ti[t])==null||e.call(ti)}function Pl(){ti={}}function Nl(t,e,n,i){let r=K("__activeStagePosition");const o=r||n.getBoundingClientRect(),l=i.getBoundingClientRect(),s=$n(t,o.x,l.x-o.x,e),a=$n(t,o.y,l.y-o.y,e),u=$n(t,o.width,l.width-o.width,e),f=$n(t,o.height,l.height-o.height,e);r={x:s,y:a,width:u,height:f},xr(r),Fe("__activeStagePosition",r)}function Fr(t){if(!t)return;const e=t.getBoundingClientRect(),n={x:e.x,y:e.y,width:e.width,height:e.height};Fe("__activeStagePosition",n),xr(n)}function Ml(){const t=K("__activeStagePosition"),e=K("__overlaySvg");if(!t)return;if(!e){console.warn("No stage svg found.");return}const n=window.innerWidth,i=window.innerHeight;e.setAttribute("viewBox",`0 0 ${n} ${i}`)}function Rl(t){const e=Bl(t);document.body.appendChild(e),zr(e,n=>{n.target.tagName==="path"&&Vt("overlayClick")}),Fe("__overlaySvg",e)}function xr(t){const e=K("__overlaySvg");if(!e){Rl(t);return}const n=e.firstElementChild;if((n==null?void 0:n.tagName)!=="path")throw new Error("no path element found in stage svg");n.setAttribute("d",Wr(t))}function Bl(t){const e=window.innerWidth,n=window.innerHeight,i=document.createElementNS("http://www.w3.org/2000/svg","svg");i.classList.add("driver-overlay","driver-overlay-animated"),i.setAttribute("viewBox",`0 0 ${e} ${n}`),i.setAttribute("xmlSpace","preserve"),i.setAttribute("xmlnsXlink","http://www.w3.org/1999/xlink"),i.setAttribute("version","1.1"),i.setAttribute("preserveAspectRatio","xMinYMin slice"),i.style.fillRule="evenodd",i.style.clipRule="evenodd",i.style.strokeLinejoin="round",i.style.strokeMiterlimit="2",i.style.zIndex="10000",i.style.position="fixed",i.style.top="0",i.style.left="0",i.style.width="100%",i.style.height="100%";const r=document.createElementNS("http://www.w3.org/2000/svg","path");return r.setAttribute("d",Wr(t)),r.style.fill=Y("overlayColor")||"rgb(0,0,0)",r.style.opacity=`${Y("overlayOpacity")}`,r.style.pointerEvents="auto",r.style.cursor="auto",i.appendChild(r),i}function Wr(t){const e=window.innerWidth,n=window.innerHeight,i=Y("stagePadding")||0,r=Y("stageRadius")||0,o=t.width+i*2,l=t.height+i*2,s=Math.min(r,o/2,l/2),a=Math.floor(Math.max(s,0)),u=t.x-i+a,f=t.y-i,c=o-a*2,p=l-a*2;return`M${e},0L0,0L0,${n}L${e},${n}L${e},0Z
    M${u},${f} h${c} a${a},${a} 0 0 1 ${a},${a} v${p} a${a},${a} 0 0 1 -${a},${a} h-${c} a${a},${a} 0 0 1 -${a},-${a} v-${p} a${a},${a} 0 0 1 ${a},-${a} z`}function Fl(){const t=K("__overlaySvg");t&&t.remove()}function xl(){const t=document.getElementById("driver-dummy-element");if(t)return t;let e=document.createElement("div");return e.id="driver-dummy-element",e.style.width="0",e.style.height="0",e.style.pointerEvents="none",e.style.opacity="0",e.style.position="fixed",e.style.top="50%",e.style.left="50%",document.body.appendChild(e),e}function Hr(t){const{element:e}=t;let n=typeof e=="string"?document.querySelector(e):e;n||(n=xl()),Hl(n,t)}function Wl(){const t=K("__activeElement"),e=K("__activeStep");t&&(Fr(t),Ml(),Ur(t,e))}function Hl(t,e){const n=Date.now(),i=K("__activeStep"),r=K("__activeElement")||t,o=!r||r===t,l=t.id==="driver-dummy-element",s=r.id==="driver-dummy-element",a=Y("animate"),u=e.onHighlightStarted||Y("onHighlightStarted"),f=(e==null?void 0:e.onHighlighted)||Y("onHighlighted"),c=(i==null?void 0:i.onDeselected)||Y("onDeselected"),p=Y(),m=K();!o&&c&&c(s?void 0:r,i,{config:p,state:m}),u&&u(l?void 0:t,e,{config:p,state:m});const d=!o&&a;let y=!1;Vl(),Fe("previousStep",i),Fe("previousElement",r),Fe("activeStep",e),Fe("activeElement",t);const g=()=>{if(K("__transitionCallback")!==g)return;const w=Date.now()-n,E=400-w<=400/2;e.popover&&E&&!y&&d&&(qr(t,e),y=!0),Y("animate")&&w<400?Nl(w,400,r,t):(Fr(t),f&&f(l?void 0:t,e,{config:Y(),state:K()}),Fe("__transitionCallback",void 0),Fe("__previousStep",i),Fe("__previousElement",r),Fe("__activeStep",e),Fe("__activeElement",t)),window.requestAnimationFrame(g)};Fe("__transitionCallback",g),window.requestAnimationFrame(g),Rr(t),!d&&e.popover&&qr(t,e),r.classList.remove("driver-active-element","driver-no-interaction"),r.removeAttribute("aria-haspopup"),r.removeAttribute("aria-expanded"),r.removeAttribute("aria-controls"),Y("disableActiveInteraction")&&t.classList.add("driver-no-interaction"),t.classList.add("driver-active-element"),t.setAttribute("aria-haspopup","dialog"),t.setAttribute("aria-expanded","true"),t.setAttribute("aria-controls","driver-popover-content")}function jl(){var t;(t=document.getElementById("driver-dummy-element"))==null||t.remove(),document.querySelectorAll(".driver-active-element").forEach(e=>{e.classList.remove("driver-active-element","driver-no-interaction"),e.removeAttribute("aria-haspopup"),e.removeAttribute("aria-expanded"),e.removeAttribute("aria-controls")})}function Tn(){const t=K("__resizeTimeout");t&&window.cancelAnimationFrame(t),Fe("__resizeTimeout",window.requestAnimationFrame(Wl))}function zl(t){var e;if(!K("isInitialized")||!(t.key==="Tab"||t.keyCode===9))return;const n=K("__activeElement"),i=(e=K("popover"))==null?void 0:e.wrapper,r=Mr([...i?[i]:[],...n?[n]:[]]),o=r[0],l=r[r.length-1];if(t.preventDefault(),t.shiftKey){const s=r[r.indexOf(document.activeElement)-1]||l;s==null||s.focus()}else{const s=r[r.indexOf(document.activeElement)+1]||o;s==null||s.focus()}}function jr(t){var e;((e=Y("allowKeyboardControl"))==null||e)&&(t.key==="Escape"?Vt("escapePress"):t.key==="ArrowRight"?Vt("arrowRightPress"):t.key==="ArrowLeft"&&Vt("arrowLeftPress"))}function zr(t,e,n){const i=(r,o)=>{const l=r.target;t.contains(l)&&((!n||n(l))&&(r.preventDefault(),r.stopPropagation(),r.stopImmediatePropagation()),o==null||o(r))};document.addEventListener("pointerdown",i,!0),document.addEventListener("mousedown",i,!0),document.addEventListener("pointerup",i,!0),document.addEventListener("mouseup",i,!0),document.addEventListener("click",r=>{i(r,e)},!0)}function ql(){window.addEventListener("keyup",jr,!1),window.addEventListener("keydown",zl,!1),window.addEventListener("resize",Tn),window.addEventListener("scroll",Tn)}function Gl(){window.removeEventListener("keyup",jr),window.removeEventListener("resize",Tn),window.removeEventListener("scroll",Tn)}function Vl(){const t=K("popover");t&&(t.wrapper.style.display="none")}function qr(t,e){var n,i;let r=K("popover");r&&document.body.removeChild(r.wrapper),r=Ul(),document.body.appendChild(r.wrapper);const{title:o,description:l,showButtons:s,disableButtons:a,showProgress:u,nextBtnText:f=Y("nextBtnText")||"Next &rarr;",prevBtnText:c=Y("prevBtnText")||"&larr; Previous",progressText:p=Y("progressText")||"{current} of {total}"}=e.popover||{};r.nextButton.innerHTML=f,r.previousButton.innerHTML=c,r.progress.innerHTML=p,o?(r.title.innerHTML=o,r.title.style.display="block"):r.title.style.display="none",l?(r.description.innerHTML=l,r.description.style.display="block"):r.description.style.display="none";const m=s||Y("showButtons"),d=u||Y("showProgress")||!1,y=(m==null?void 0:m.includes("next"))||(m==null?void 0:m.includes("previous"))||d;r.closeButton.style.display=m.includes("close")?"block":"none",y?(r.footer.style.display="flex",r.progress.style.display=d?"block":"none",r.nextButton.style.display=m.includes("next")?"block":"none",r.previousButton.style.display=m.includes("previous")?"block":"none"):r.footer.style.display="none";const g=a||Y("disableButtons")||[];g!=null&&g.includes("next")&&(r.nextButton.disabled=!0,r.nextButton.classList.add("driver-popover-btn-disabled")),g!=null&&g.includes("previous")&&(r.previousButton.disabled=!0,r.previousButton.classList.add("driver-popover-btn-disabled")),g!=null&&g.includes("close")&&(r.closeButton.disabled=!0,r.closeButton.classList.add("driver-popover-btn-disabled"));const w=r.wrapper;w.style.display="block",w.style.left="",w.style.top="",w.style.bottom="",w.style.right="",w.id="driver-popover-content",w.setAttribute("role","dialog"),w.setAttribute("aria-labelledby","driver-popover-title"),w.setAttribute("aria-describedby","driver-popover-description");const E=r.arrow;E.className="driver-popover-arrow";const D=((n=e.popover)==null?void 0:n.popoverClass)||Y("popoverClass")||"";w.className=`driver-popover ${D}`.trim(),zr(r.wrapper,L=>{var T,v,S;const I=L.target,M=((T=e.popover)==null?void 0:T.onNextClick)||Y("onNextClick"),H=((v=e.popover)==null?void 0:v.onPrevClick)||Y("onPrevClick"),W=((S=e.popover)==null?void 0:S.onCloseClick)||Y("onCloseClick");if(I.classList.contains("driver-popover-next-btn"))return M?M(t,e,{config:Y(),state:K()}):Vt("nextClick");if(I.classList.contains("driver-popover-prev-btn"))return H?H(t,e,{config:Y(),state:K()}):Vt("prevClick");if(I.classList.contains("driver-popover-close-btn"))return W?W(t,e,{config:Y(),state:K()}):Vt("closeClick")},L=>!(r!=null&&r.description.contains(L))&&!(r!=null&&r.title.contains(L))&&typeof L.className=="string"&&L.className.includes("driver-popover")),Fe("popover",r);const h=((i=e.popover)==null?void 0:i.onPopoverRender)||Y("onPopoverRender");h&&h(r,{config:Y(),state:K()}),Ur(t,e),Rr(w);const C=t.classList.contains("driver-dummy-element"),k=Mr([w,...C?[]:[t]]);k.length>0&&k[0].focus()}function Gr(){const t=K("popover");if(!(t!=null&&t.wrapper))return;const e=t.wrapper.getBoundingClientRect(),n=Y("stagePadding")||0,i=Y("popoverOffset")||0;return{width:e.width+n+i,height:e.height+n+i,realWidth:e.width,realHeight:e.height}}function Vr(t,e){const{elementDimensions:n,popoverDimensions:i,popoverPadding:r,popoverArrowDimensions:o}=e;return t==="start"?Math.max(Math.min(n.top-r,window.innerHeight-i.realHeight-o.width),o.width):t==="end"?Math.max(Math.min(n.top-(i==null?void 0:i.realHeight)+n.height+r,window.innerHeight-(i==null?void 0:i.realHeight)-o.width),o.width):t==="center"?Math.max(Math.min(n.top+n.height/2-(i==null?void 0:i.realHeight)/2,window.innerHeight-(i==null?void 0:i.realHeight)-o.width),o.width):0}function Xr(t,e){const{elementDimensions:n,popoverDimensions:i,popoverPadding:r,popoverArrowDimensions:o}=e;return t==="start"?Math.max(Math.min(n.left-r,window.innerWidth-i.realWidth-o.width),o.width):t==="end"?Math.max(Math.min(n.left-(i==null?void 0:i.realWidth)+n.width+r,window.innerWidth-(i==null?void 0:i.realWidth)-o.width),o.width):t==="center"?Math.max(Math.min(n.left+n.width/2-(i==null?void 0:i.realWidth)/2,window.innerWidth-(i==null?void 0:i.realWidth)-o.width),o.width):0}function Ur(t,e){const n=K("popover");if(!n)return;const{align:i="start",side:r="left"}=(e==null?void 0:e.popover)||{},o=i,l=t.id==="driver-dummy-element"?"over":r,s=Y("stagePadding")||0,a=Gr(),u=n.arrow.getBoundingClientRect(),f=t.getBoundingClientRect(),c=f.top-a.height;let p=c>=0;const m=window.innerHeight-(f.bottom+a.height);let d=m>=0;const y=f.left-a.width;let g=y>=0;const w=window.innerWidth-(f.right+a.width);let E=w>=0;const D=!p&&!d&&!g&&!E;let h=l;if(l==="top"&&p?E=g=d=!1:l==="bottom"&&d?E=g=p=!1:l==="left"&&g?E=p=d=!1:l==="right"&&E&&(g=p=d=!1),l==="over"){const C=window.innerWidth/2-a.realWidth/2,k=window.innerHeight/2-a.realHeight/2;n.wrapper.style.left=`${C}px`,n.wrapper.style.right="auto",n.wrapper.style.top=`${k}px`,n.wrapper.style.bottom="auto"}else if(D){const C=window.innerWidth/2-(a==null?void 0:a.realWidth)/2,k=10;n.wrapper.style.left=`${C}px`,n.wrapper.style.right="auto",n.wrapper.style.bottom=`${k}px`,n.wrapper.style.top="auto"}else if(g){const C=Math.min(y,window.innerWidth-(a==null?void 0:a.realWidth)-u.width),k=Vr(o,{elementDimensions:f,popoverDimensions:a,popoverPadding:s,popoverArrowDimensions:u});n.wrapper.style.left=`${C}px`,n.wrapper.style.top=`${k}px`,n.wrapper.style.bottom="auto",n.wrapper.style.right="auto",h="left"}else if(E){const C=Math.min(w,window.innerWidth-(a==null?void 0:a.realWidth)-u.width),k=Vr(o,{elementDimensions:f,popoverDimensions:a,popoverPadding:s,popoverArrowDimensions:u});n.wrapper.style.right=`${C}px`,n.wrapper.style.top=`${k}px`,n.wrapper.style.bottom="auto",n.wrapper.style.left="auto",h="right"}else if(p){const C=Math.min(c,window.innerHeight-a.realHeight-u.width);let k=Xr(o,{elementDimensions:f,popoverDimensions:a,popoverPadding:s,popoverArrowDimensions:u});n.wrapper.style.top=`${C}px`,n.wrapper.style.left=`${k}px`,n.wrapper.style.bottom="auto",n.wrapper.style.right="auto",h="top"}else if(d){const C=Math.min(m,window.innerHeight-(a==null?void 0:a.realHeight)-u.width);let k=Xr(o,{elementDimensions:f,popoverDimensions:a,popoverPadding:s,popoverArrowDimensions:u});n.wrapper.style.left=`${k}px`,n.wrapper.style.bottom=`${C}px`,n.wrapper.style.top="auto",n.wrapper.style.right="auto",h="bottom"}D?n.arrow.classList.add("driver-popover-arrow-none"):Xl(o,h,t)}function Xl(t,e,n){const i=K("popover");if(!i)return;const r=n.getBoundingClientRect(),o=Gr(),l=i.arrow,s=o.width,a=window.innerWidth,u=r.width,f=r.left,c=o.height,p=window.innerHeight,m=r.top,d=r.height;l.className="driver-popover-arrow";let y=e,g=t;e==="top"?(f+u<=0?(y="right",g="end"):f+u-s<=0&&(y="top",g="start"),f>=a?(y="left",g="end"):f+s>=a&&(y="top",g="end")):e==="bottom"?(f+u<=0?(y="right",g="start"):f+u-s<=0&&(y="bottom",g="start"),f>=a?(y="left",g="start"):f+s>=a&&(y="bottom",g="end")):e==="left"?(m+d<=0?(y="bottom",g="end"):m+d-c<=0&&(y="left",g="start"),m>=p?(y="top",g="end"):m+c>=p&&(y="left",g="end")):e==="right"&&(m+d<=0?(y="bottom",g="start"):m+d-c<=0&&(y="right",g="start"),m>=p?(y="top",g="start"):m+c>=p&&(y="right",g="end")),y?(l.classList.add(`driver-popover-arrow-side-${y}`),l.classList.add(`driver-popover-arrow-align-${g}`)):l.classList.add("driver-popover-arrow-none")}function Ul(){const t=document.createElement("div");t.classList.add("driver-popover");const e=document.createElement("div");e.classList.add("driver-popover-arrow");const n=document.createElement("header");n.id="driver-popover-title",n.classList.add("driver-popover-title"),n.style.display="none",n.innerText="Popover Title";const i=document.createElement("div");i.id="driver-popover-description",i.classList.add("driver-popover-description"),i.style.display="none",i.innerText="Popover description is here";const r=document.createElement("button");r.type="button",r.classList.add("driver-popover-close-btn"),r.setAttribute("aria-label","Close"),r.innerHTML="&times;";const o=document.createElement("footer");o.classList.add("driver-popover-footer");const l=document.createElement("span");l.classList.add("driver-popover-progress-text"),l.innerText="";const s=document.createElement("span");s.classList.add("driver-popover-navigation-btns");const a=document.createElement("button");a.type="button",a.classList.add("driver-popover-prev-btn"),a.innerHTML="&larr; Previous";const u=document.createElement("button");return u.type="button",u.classList.add("driver-popover-next-btn"),u.innerHTML="Next &rarr;",s.appendChild(a),s.appendChild(u),o.appendChild(l),o.appendChild(s),t.appendChild(r),t.appendChild(e),t.appendChild(n),t.appendChild(i),t.appendChild(o),{wrapper:t,arrow:e,title:n,description:i,footer:o,previousButton:a,nextButton:u,closeButton:r,footerButtons:s,progress:l}}function Yl(){var t;const e=K("popover");e&&((t=e.wrapper.parentElement)==null||t.removeChild(e.wrapper))}function Jl(t={}){Ft(t);function e(){Y("allowClose")&&u()}function n(){const f=K("activeIndex"),c=Y("steps")||[];if(typeof f>"u")return;const p=f+1;c[p]?a(p):u()}function i(){const f=K("activeIndex"),c=Y("steps")||[];if(typeof f>"u")return;const p=f-1;c[p]?a(p):u()}function r(f){(Y("steps")||[])[f]?a(f):u()}function o(){var f;if(K("__transitionCallback"))return;const c=K("activeIndex"),p=K("__activeStep"),m=K("__activeElement");if(typeof c>"u"||typeof p>"u"||typeof K("activeIndex")>"u")return;const d=((f=p.popover)==null?void 0:f.onPrevClick)||Y("onPrevClick");if(d)return d(m,p,{config:Y(),state:K()});i()}function l(){var f;if(K("__transitionCallback"))return;const c=K("activeIndex"),p=K("__activeStep"),m=K("__activeElement");if(typeof c>"u"||typeof p>"u")return;const d=((f=p.popover)==null?void 0:f.onNextClick)||Y("onNextClick");if(d)return d(m,p,{config:Y(),state:K()});n()}function s(){K("isInitialized")||(Fe("isInitialized",!0),document.body.classList.add("driver-active",Y("animate")?"driver-fade":"driver-simple"),ql(),ni("overlayClick",e),ni("escapePress",e),ni("arrowLeftPress",o),ni("arrowRightPress",l))}function a(f=0){var c,p,m,d,y,g,w,E;const D=Y("steps");if(!D){console.error("No steps to drive through"),u();return}if(!D[f]){u();return}Fe("__activeOnDestroyed",document.activeElement),Fe("activeIndex",f);const h=D[f],C=D[f+1],k=D[f-1],L=((c=h.popover)==null?void 0:c.doneBtnText)||Y("doneBtnText")||"Done",T=Y("allowClose"),v=typeof((p=h.popover)==null?void 0:p.showProgress)<"u"?(m=h.popover)==null?void 0:m.showProgress:Y("showProgress"),S=(((d=h.popover)==null?void 0:d.progressText)||Y("progressText")||"{{current}} of {{total}}").replace("{{current}}",`${f+1}`).replace("{{total}}",`${D.length}`),I=((y=h.popover)==null?void 0:y.showButtons)||Y("showButtons"),M=["next","previous",...T?["close"]:[]].filter(x=>!(I!=null&&I.length)||I.includes(x)),H=((g=h.popover)==null?void 0:g.onNextClick)||Y("onNextClick"),W=((w=h.popover)==null?void 0:w.onPrevClick)||Y("onPrevClick"),P=((E=h.popover)==null?void 0:E.onCloseClick)||Y("onCloseClick");Hr({...h,popover:{showButtons:M,nextBtnText:C?void 0:L,disableButtons:[...k?[]:["previous"]],showProgress:v,progressText:S,onNextClick:H||(()=>{C?a(f+1):u()}),onPrevClick:W||(()=>{a(f-1)}),onCloseClick:P||(()=>{u()}),...(h==null?void 0:h.popover)||{}}})}function u(f=!0){const c=K("__activeElement"),p=K("__activeStep"),m=K("__activeOnDestroyed"),d=Y("onDestroyStarted");if(f&&d){const w=!c||(c==null?void 0:c.id)==="driver-dummy-element";d(w?void 0:c,p,{config:Y(),state:K()});return}const y=(p==null?void 0:p.onDeselected)||Y("onDeselected"),g=Y("onDestroyed");if(document.body.classList.remove("driver-active","driver-fade","driver-simple"),Gl(),Yl(),jl(),Fl(),Pl(),Br(),c&&p){const w=c.id==="driver-dummy-element";y&&y(w?void 0:c,p,{config:Y(),state:K()}),g&&g(w?void 0:c,p,{config:Y(),state:K()})}m&&m.focus()}return{isActive:()=>K("isInitialized")||!1,refresh:Tn,drive:(f=0)=>{s(),a(f)},setConfig:Ft,setSteps:f=>{Br(),Ft({...Y(),steps:f})},getConfig:Y,getState:K,getActiveIndex:()=>K("activeIndex"),isFirstStep:()=>K("activeIndex")===0,isLastStep:()=>{const f=Y("steps")||[],c=K("activeIndex");return c!==void 0&&c===f.length-1},getActiveStep:()=>K("activeStep"),getActiveElement:()=>K("activeElement"),getPreviousElement:()=>K("previousElement"),getPreviousStep:()=>K("previousStep"),moveNext:n,movePrevious:i,moveTo:r,hasNextStep:()=>{const f=Y("steps")||[],c=K("activeIndex");return c!==void 0&&f[c+1]},hasPreviousStep:()=>{const f=Y("steps")||[],c=K("activeIndex");return c!==void 0&&f[c-1]},highlight:f=>{s(),Hr({...f,popover:f.popover?{showButtons:[],showProgress:!1,progressText:"",...f.popover}:void 0})},destroy:()=>{u(!1)}}}var $e="top",ft="bottom",ct="right",et="left",Wi="auto",On=[$e,ft,ct,et],tn="start",An="end",Kl="clippingParents",Yr="viewport",Ln="popper",Ql="reference",Jr=On.reduce(function(t,e){return t.concat([e+"-"+tn,e+"-"+An])},[]),Kr=[].concat(On,[Wi]).reduce(function(t,e){return t.concat([e,e+"-"+tn,e+"-"+An])},[]),Zl="beforeRead",$l="read",es="afterRead",ts="beforeMain",ns="main",is="afterMain",rs="beforeWrite",os="write",as="afterWrite",ls=[Zl,$l,es,ts,ns,is,rs,os,as];function _t(t){return t?(t.nodeName||"").toLowerCase():null}function ot(t){if(t==null)return window;if(t.toString()!=="[object Window]"){var e=t.ownerDocument;return e&&e.defaultView||window}return t}function Xt(t){var e=ot(t).Element;return t instanceof e||t instanceof Element}function dt(t){var e=ot(t).HTMLElement;return t instanceof e||t instanceof HTMLElement}function Hi(t){if(typeof ShadowRoot>"u")return!1;var e=ot(t).ShadowRoot;return t instanceof e||t instanceof ShadowRoot}function ss(t){var e=t.state;Object.keys(e.elements).forEach(function(n){var i=e.styles[n]||{},r=e.attributes[n]||{},o=e.elements[n];!dt(o)||!_t(o)||(Object.assign(o.style,i),Object.keys(r).forEach(function(l){var s=r[l];s===!1?o.removeAttribute(l):o.setAttribute(l,s===!0?"":s)}))})}function us(t){var e=t.state,n={popper:{position:e.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(e.elements.popper.style,n.popper),e.styles=n,e.elements.arrow&&Object.assign(e.elements.arrow.style,n.arrow),function(){Object.keys(e.elements).forEach(function(i){var r=e.elements[i],o=e.attributes[i]||{},l=Object.keys(e.styles.hasOwnProperty(i)?e.styles[i]:n[i]),s=l.reduce(function(a,u){return a[u]="",a},{});!dt(r)||!_t(r)||(Object.assign(r.style,s),Object.keys(o).forEach(function(a){r.removeAttribute(a)}))})}}const Qr={name:"applyStyles",enabled:!0,phase:"write",fn:ss,effect:us,requires:["computeStyles"]};function Et(t){return t.split("-")[0]}var Ut=Math.max,ii=Math.min,nn=Math.round;function ji(){var t=navigator.userAgentData;return t!=null&&t.brands&&Array.isArray(t.brands)?t.brands.map(function(e){return e.brand+"/"+e.version}).join(" "):navigator.userAgent}function Zr(){return!/^((?!chrome|android).)*safari/i.test(ji())}function rn(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!1);var i=t.getBoundingClientRect(),r=1,o=1;e&&dt(t)&&(r=t.offsetWidth>0&&nn(i.width)/t.offsetWidth||1,o=t.offsetHeight>0&&nn(i.height)/t.offsetHeight||1);var l=Xt(t)?ot(t):window,s=l.visualViewport,a=!Zr()&&n,u=(i.left+(a&&s?s.offsetLeft:0))/r,f=(i.top+(a&&s?s.offsetTop:0))/o,c=i.width/r,p=i.height/o;return{width:c,height:p,top:f,right:u+c,bottom:f+p,left:u,x:u,y:f}}function zi(t){var e=rn(t),n=t.offsetWidth,i=t.offsetHeight;return Math.abs(e.width-n)<=1&&(n=e.width),Math.abs(e.height-i)<=1&&(i=e.height),{x:t.offsetLeft,y:t.offsetTop,width:n,height:i}}function $r(t,e){var n=e.getRootNode&&e.getRootNode();if(t.contains(e))return!0;if(n&&Hi(n)){var i=e;do{if(i&&t.isSameNode(i))return!0;i=i.parentNode||i.host}while(i)}return!1}function Tt(t){return ot(t).getComputedStyle(t)}function fs(t){return["table","td","th"].indexOf(_t(t))>=0}function xt(t){return((Xt(t)?t.ownerDocument:t.document)||window.document).documentElement}function ri(t){return _t(t)==="html"?t:t.assignedSlot||t.parentNode||(Hi(t)?t.host:null)||xt(t)}function eo(t){return!dt(t)||Tt(t).position==="fixed"?null:t.offsetParent}function cs(t){var e=/firefox/i.test(ji()),n=/Trident/i.test(ji());if(n&&dt(t)){var i=Tt(t);if(i.position==="fixed")return null}var r=ri(t);for(Hi(r)&&(r=r.host);dt(r)&&["html","body"].indexOf(_t(r))<0;){var o=Tt(r);if(o.transform!=="none"||o.perspective!=="none"||o.contain==="paint"||["transform","perspective"].indexOf(o.willChange)!==-1||e&&o.willChange==="filter"||e&&o.filter&&o.filter!=="none")return r;r=r.parentNode}return null}function In(t){for(var e=ot(t),n=eo(t);n&&fs(n)&&Tt(n).position==="static";)n=eo(n);return n&&(_t(n)==="html"||_t(n)==="body"&&Tt(n).position==="static")?e:n||cs(t)||e}function qi(t){return["top","bottom"].indexOf(t)>=0?"x":"y"}function Pn(t,e,n){return Ut(t,ii(e,n))}function ds(t,e,n){var i=Pn(t,e,n);return i>n?n:i}function to(){return{top:0,right:0,bottom:0,left:0}}function no(t){return Object.assign({},to(),t)}function io(t,e){return e.reduce(function(n,i){return n[i]=t,n},{})}var ps=function(e,n){return e=typeof e=="function"?e(Object.assign({},n.rects,{placement:n.placement})):e,no(typeof e!="number"?e:io(e,On))};function hs(t){var e,n=t.state,i=t.name,r=t.options,o=n.elements.arrow,l=n.modifiersData.popperOffsets,s=Et(n.placement),a=qi(s),u=[et,ct].indexOf(s)>=0,f=u?"height":"width";if(!(!o||!l)){var c=ps(r.padding,n),p=zi(o),m=a==="y"?$e:et,d=a==="y"?ft:ct,y=n.rects.reference[f]+n.rects.reference[a]-l[a]-n.rects.popper[f],g=l[a]-n.rects.reference[a],w=In(o),E=w?a==="y"?w.clientHeight||0:w.clientWidth||0:0,D=y/2-g/2,h=c[m],C=E-p[f]-c[d],k=E/2-p[f]/2+D,L=Pn(h,k,C),T=a;n.modifiersData[i]=(e={},e[T]=L,e.centerOffset=L-k,e)}}function ms(t){var e=t.state,n=t.options,i=n.element,r=i===void 0?"[data-popper-arrow]":i;r!=null&&(typeof r=="string"&&(r=e.elements.popper.querySelector(r),!r)||$r(e.elements.popper,r)&&(e.elements.arrow=r))}const gs={name:"arrow",enabled:!0,phase:"main",fn:hs,effect:ms,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function on(t){return t.split("-")[1]}var vs={top:"auto",right:"auto",bottom:"auto",left:"auto"};function bs(t,e){var n=t.x,i=t.y,r=e.devicePixelRatio||1;return{x:nn(n*r)/r||0,y:nn(i*r)/r||0}}function ro(t){var e,n=t.popper,i=t.popperRect,r=t.placement,o=t.variation,l=t.offsets,s=t.position,a=t.gpuAcceleration,u=t.adaptive,f=t.roundOffsets,c=t.isFixed,p=l.x,m=p===void 0?0:p,d=l.y,y=d===void 0?0:d,g=typeof f=="function"?f({x:m,y}):{x:m,y};m=g.x,y=g.y;var w=l.hasOwnProperty("x"),E=l.hasOwnProperty("y"),D=et,h=$e,C=window;if(u){var k=In(n),L="clientHeight",T="clientWidth";if(k===ot(n)&&(k=xt(n),Tt(k).position!=="static"&&s==="absolute"&&(L="scrollHeight",T="scrollWidth")),k=k,r===$e||(r===et||r===ct)&&o===An){h=ft;var v=c&&k===C&&C.visualViewport?C.visualViewport.height:k[L];y-=v-i.height,y*=a?1:-1}if(r===et||(r===$e||r===ft)&&o===An){D=ct;var S=c&&k===C&&C.visualViewport?C.visualViewport.width:k[T];m-=S-i.width,m*=a?1:-1}}var I=Object.assign({position:s},u&&vs),M=f===!0?bs({x:m,y},ot(n)):{x:m,y};if(m=M.x,y=M.y,a){var H;return Object.assign({},I,(H={},H[h]=E?"0":"",H[D]=w?"0":"",H.transform=(C.devicePixelRatio||1)<=1?"translate("+m+"px, "+y+"px)":"translate3d("+m+"px, "+y+"px, 0)",H))}return Object.assign({},I,(e={},e[h]=E?y+"px":"",e[D]=w?m+"px":"",e.transform="",e))}function ys(t){var e=t.state,n=t.options,i=n.gpuAcceleration,r=i===void 0?!0:i,o=n.adaptive,l=o===void 0?!0:o,s=n.roundOffsets,a=s===void 0?!0:s,u={placement:Et(e.placement),variation:on(e.placement),popper:e.elements.popper,popperRect:e.rects.popper,gpuAcceleration:r,isFixed:e.options.strategy==="fixed"};e.modifiersData.popperOffsets!=null&&(e.styles.popper=Object.assign({},e.styles.popper,ro(Object.assign({},u,{offsets:e.modifiersData.popperOffsets,position:e.options.strategy,adaptive:l,roundOffsets:a})))),e.modifiersData.arrow!=null&&(e.styles.arrow=Object.assign({},e.styles.arrow,ro(Object.assign({},u,{offsets:e.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:a})))),e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-placement":e.placement})}const ws={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:ys,data:{}};var oi={passive:!0};function _s(t){var e=t.state,n=t.instance,i=t.options,r=i.scroll,o=r===void 0?!0:r,l=i.resize,s=l===void 0?!0:l,a=ot(e.elements.popper),u=[].concat(e.scrollParents.reference,e.scrollParents.popper);return o&&u.forEach(function(f){f.addEventListener("scroll",n.update,oi)}),s&&a.addEventListener("resize",n.update,oi),function(){o&&u.forEach(function(f){f.removeEventListener("scroll",n.update,oi)}),s&&a.removeEventListener("resize",n.update,oi)}}const Es={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:_s,data:{}};var ks={left:"right",right:"left",bottom:"top",top:"bottom"};function ai(t){return t.replace(/left|right|bottom|top/g,function(e){return ks[e]})}var Ds={start:"end",end:"start"};function oo(t){return t.replace(/start|end/g,function(e){return Ds[e]})}function Gi(t){var e=ot(t),n=e.pageXOffset,i=e.pageYOffset;return{scrollLeft:n,scrollTop:i}}function Vi(t){return rn(xt(t)).left+Gi(t).scrollLeft}function Ss(t,e){var n=ot(t),i=xt(t),r=n.visualViewport,o=i.clientWidth,l=i.clientHeight,s=0,a=0;if(r){o=r.width,l=r.height;var u=Zr();(u||!u&&e==="fixed")&&(s=r.offsetLeft,a=r.offsetTop)}return{width:o,height:l,x:s+Vi(t),y:a}}function Cs(t){var e,n=xt(t),i=Gi(t),r=(e=t.ownerDocument)==null?void 0:e.body,o=Ut(n.scrollWidth,n.clientWidth,r?r.scrollWidth:0,r?r.clientWidth:0),l=Ut(n.scrollHeight,n.clientHeight,r?r.scrollHeight:0,r?r.clientHeight:0),s=-i.scrollLeft+Vi(t),a=-i.scrollTop;return Tt(r||n).direction==="rtl"&&(s+=Ut(n.clientWidth,r?r.clientWidth:0)-o),{width:o,height:l,x:s,y:a}}function Xi(t){var e=Tt(t),n=e.overflow,i=e.overflowX,r=e.overflowY;return/auto|scroll|overlay|hidden/.test(n+r+i)}function ao(t){return["html","body","#document"].indexOf(_t(t))>=0?t.ownerDocument.body:dt(t)&&Xi(t)?t:ao(ri(t))}function Nn(t,e){var n;e===void 0&&(e=[]);var i=ao(t),r=i===((n=t.ownerDocument)==null?void 0:n.body),o=ot(i),l=r?[o].concat(o.visualViewport||[],Xi(i)?i:[]):i,s=e.concat(l);return r?s:s.concat(Nn(ri(l)))}function Ui(t){return Object.assign({},t,{left:t.x,top:t.y,right:t.x+t.width,bottom:t.y+t.height})}function Ts(t,e){var n=rn(t,!1,e==="fixed");return n.top=n.top+t.clientTop,n.left=n.left+t.clientLeft,n.bottom=n.top+t.clientHeight,n.right=n.left+t.clientWidth,n.width=t.clientWidth,n.height=t.clientHeight,n.x=n.left,n.y=n.top,n}function lo(t,e,n){return e===Yr?Ui(Ss(t,n)):Xt(e)?Ts(e,n):Ui(Cs(xt(t)))}function Os(t){var e=Nn(ri(t)),n=["absolute","fixed"].indexOf(Tt(t).position)>=0,i=n&&dt(t)?In(t):t;return Xt(i)?e.filter(function(r){return Xt(r)&&$r(r,i)&&_t(r)!=="body"}):[]}function As(t,e,n,i){var r=e==="clippingParents"?Os(t):[].concat(e),o=[].concat(r,[n]),l=o[0],s=o.reduce(function(a,u){var f=lo(t,u,i);return a.top=Ut(f.top,a.top),a.right=ii(f.right,a.right),a.bottom=ii(f.bottom,a.bottom),a.left=Ut(f.left,a.left),a},lo(t,l,i));return s.width=s.right-s.left,s.height=s.bottom-s.top,s.x=s.left,s.y=s.top,s}function so(t){var e=t.reference,n=t.element,i=t.placement,r=i?Et(i):null,o=i?on(i):null,l=e.x+e.width/2-n.width/2,s=e.y+e.height/2-n.height/2,a;switch(r){case $e:a={x:l,y:e.y-n.height};break;case ft:a={x:l,y:e.y+e.height};break;case ct:a={x:e.x+e.width,y:s};break;case et:a={x:e.x-n.width,y:s};break;default:a={x:e.x,y:e.y}}var u=r?qi(r):null;if(u!=null){var f=u==="y"?"height":"width";switch(o){case tn:a[u]=a[u]-(e[f]/2-n[f]/2);break;case An:a[u]=a[u]+(e[f]/2-n[f]/2);break}}return a}function Mn(t,e){e===void 0&&(e={});var n=e,i=n.placement,r=i===void 0?t.placement:i,o=n.strategy,l=o===void 0?t.strategy:o,s=n.boundary,a=s===void 0?Kl:s,u=n.rootBoundary,f=u===void 0?Yr:u,c=n.elementContext,p=c===void 0?Ln:c,m=n.altBoundary,d=m===void 0?!1:m,y=n.padding,g=y===void 0?0:y,w=no(typeof g!="number"?g:io(g,On)),E=p===Ln?Ql:Ln,D=t.rects.popper,h=t.elements[d?E:p],C=As(Xt(h)?h:h.contextElement||xt(t.elements.popper),a,f,l),k=rn(t.elements.reference),L=so({reference:k,element:D,strategy:"absolute",placement:r}),T=Ui(Object.assign({},D,L)),v=p===Ln?T:k,S={top:C.top-v.top+w.top,bottom:v.bottom-C.bottom+w.bottom,left:C.left-v.left+w.left,right:v.right-C.right+w.right},I=t.modifiersData.offset;if(p===Ln&&I){var M=I[r];Object.keys(S).forEach(function(H){var W=[ct,ft].indexOf(H)>=0?1:-1,P=[$e,ft].indexOf(H)>=0?"y":"x";S[H]+=M[P]*W})}return S}function Ls(t,e){e===void 0&&(e={});var n=e,i=n.placement,r=n.boundary,o=n.rootBoundary,l=n.padding,s=n.flipVariations,a=n.allowedAutoPlacements,u=a===void 0?Kr:a,f=on(i),c=f?s?Jr:Jr.filter(function(d){return on(d)===f}):On,p=c.filter(function(d){return u.indexOf(d)>=0});p.length===0&&(p=c);var m=p.reduce(function(d,y){return d[y]=Mn(t,{placement:y,boundary:r,rootBoundary:o,padding:l})[Et(y)],d},{});return Object.keys(m).sort(function(d,y){return m[d]-m[y]})}function Is(t){if(Et(t)===Wi)return[];var e=ai(t);return[oo(t),e,oo(e)]}function Ps(t){var e=t.state,n=t.options,i=t.name;if(!e.modifiersData[i]._skip){for(var r=n.mainAxis,o=r===void 0?!0:r,l=n.altAxis,s=l===void 0?!0:l,a=n.fallbackPlacements,u=n.padding,f=n.boundary,c=n.rootBoundary,p=n.altBoundary,m=n.flipVariations,d=m===void 0?!0:m,y=n.allowedAutoPlacements,g=e.options.placement,w=Et(g),E=w===g,D=a||(E||!d?[ai(g)]:Is(g)),h=[g].concat(D).reduce(function(Ee,Oe){return Ee.concat(Et(Oe)===Wi?Ls(e,{placement:Oe,boundary:f,rootBoundary:c,padding:u,flipVariations:d,allowedAutoPlacements:y}):Oe)},[]),C=e.rects.reference,k=e.rects.popper,L=new Map,T=!0,v=h[0],S=0;S<h.length;S++){var I=h[S],M=Et(I),H=on(I)===tn,W=[$e,ft].indexOf(M)>=0,P=W?"width":"height",x=Mn(e,{placement:I,boundary:f,rootBoundary:c,altBoundary:p,padding:u}),Z=W?H?ct:et:H?ft:$e;C[P]>k[P]&&(Z=ai(Z));var me=ai(Z),Re=[];if(o&&Re.push(x[M]<=0),s&&Re.push(x[Z]<=0,x[me]<=0),Re.every(function(Ee){return Ee})){v=I,T=!1;break}L.set(I,Re)}if(T)for(var Be=d?3:1,_e=function(Oe){var rt=h.find(function(ht){var ut=L.get(ht);if(ut)return ut.slice(0,Oe).every(function(F){return F})});if(rt)return v=rt,"break"},Ne=Be;Ne>0;Ne--){var Qe=_e(Ne);if(Qe==="break")break}e.placement!==v&&(e.modifiersData[i]._skip=!0,e.placement=v,e.reset=!0)}}const Ns={name:"flip",enabled:!0,phase:"main",fn:Ps,requiresIfExists:["offset"],data:{_skip:!1}};function uo(t,e,n){return n===void 0&&(n={x:0,y:0}),{top:t.top-e.height-n.y,right:t.right-e.width+n.x,bottom:t.bottom-e.height+n.y,left:t.left-e.width-n.x}}function fo(t){return[$e,ct,ft,et].some(function(e){return t[e]>=0})}function Ms(t){var e=t.state,n=t.name,i=e.rects.reference,r=e.rects.popper,o=e.modifiersData.preventOverflow,l=Mn(e,{elementContext:"reference"}),s=Mn(e,{altBoundary:!0}),a=uo(l,i),u=uo(s,r,o),f=fo(a),c=fo(u);e.modifiersData[n]={referenceClippingOffsets:a,popperEscapeOffsets:u,isReferenceHidden:f,hasPopperEscaped:c},e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-reference-hidden":f,"data-popper-escaped":c})}const Rs={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:Ms};function Bs(t,e,n){var i=Et(t),r=[et,$e].indexOf(i)>=0?-1:1,o=typeof n=="function"?n(Object.assign({},e,{placement:t})):n,l=o[0],s=o[1];return l=l||0,s=(s||0)*r,[et,ct].indexOf(i)>=0?{x:s,y:l}:{x:l,y:s}}function Fs(t){var e=t.state,n=t.options,i=t.name,r=n.offset,o=r===void 0?[0,0]:r,l=Kr.reduce(function(f,c){return f[c]=Bs(c,e.rects,o),f},{}),s=l[e.placement],a=s.x,u=s.y;e.modifiersData.popperOffsets!=null&&(e.modifiersData.popperOffsets.x+=a,e.modifiersData.popperOffsets.y+=u),e.modifiersData[i]=l}const xs={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:Fs};function Ws(t){var e=t.state,n=t.name;e.modifiersData[n]=so({reference:e.rects.reference,element:e.rects.popper,strategy:"absolute",placement:e.placement})}const Hs={name:"popperOffsets",enabled:!0,phase:"read",fn:Ws,data:{}};function js(t){return t==="x"?"y":"x"}function zs(t){var e=t.state,n=t.options,i=t.name,r=n.mainAxis,o=r===void 0?!0:r,l=n.altAxis,s=l===void 0?!1:l,a=n.boundary,u=n.rootBoundary,f=n.altBoundary,c=n.padding,p=n.tether,m=p===void 0?!0:p,d=n.tetherOffset,y=d===void 0?0:d,g=Mn(e,{boundary:a,rootBoundary:u,padding:c,altBoundary:f}),w=Et(e.placement),E=on(e.placement),D=!E,h=qi(w),C=js(h),k=e.modifiersData.popperOffsets,L=e.rects.reference,T=e.rects.popper,v=typeof y=="function"?y(Object.assign({},e.rects,{placement:e.placement})):y,S=typeof v=="number"?{mainAxis:v,altAxis:v}:Object.assign({mainAxis:0,altAxis:0},v),I=e.modifiersData.offset?e.modifiersData.offset[e.placement]:null,M={x:0,y:0};if(k){if(o){var H,W=h==="y"?$e:et,P=h==="y"?ft:ct,x=h==="y"?"height":"width",Z=k[h],me=Z+g[W],Re=Z-g[P],Be=m?-T[x]/2:0,_e=E===tn?L[x]:T[x],Ne=E===tn?-T[x]:-L[x],Qe=e.elements.arrow,Ee=m&&Qe?zi(Qe):{width:0,height:0},Oe=e.modifiersData["arrow#persistent"]?e.modifiersData["arrow#persistent"].padding:to(),rt=Oe[W],ht=Oe[P],ut=Pn(0,L[x],Ee[x]),F=D?L[x]/2-Be-ut-rt-S.mainAxis:_e-ut-rt-S.mainAxis,R=D?-L[x]/2+Be+ut+ht+S.mainAxis:Ne+ut+ht+S.mainAxis,V=e.elements.arrow&&In(e.elements.arrow),J=V?h==="y"?V.clientTop||0:V.clientLeft||0:0,re=(H=I==null?void 0:I[h])!=null?H:0,ve=Z+F-re-J,De=Z+R-re,Xe=Pn(m?ii(me,ve):me,Z,m?Ut(Re,De):Re);k[h]=Xe,M[h]=Xe-Z}if(s){var Q,ce=h==="x"?$e:et,ge=h==="x"?ft:ct,Ae=k[C],He=C==="y"?"height":"width",wt=Ae+g[ce],Rt=Ae-g[ge],Zt=[$e,et].indexOf(w)!==-1,En=(Q=I==null?void 0:I[C])!=null?Q:0,kn=Zt?wt:Ae-L[He]-T[He]-En+S.altAxis,Dn=Zt?Ae+L[He]+T[He]-En-S.altAxis:Rt,Sn=m&&Zt?ds(kn,Ae,Dn):Pn(m?kn:wt,Ae,m?Dn:Rt);k[C]=Sn,M[C]=Sn-Ae}e.modifiersData[i]=M}}const qs={name:"preventOverflow",enabled:!0,phase:"main",fn:zs,requiresIfExists:["offset"]};function Gs(t){return{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}}function Vs(t){return t===ot(t)||!dt(t)?Gi(t):Gs(t)}function Xs(t){var e=t.getBoundingClientRect(),n=nn(e.width)/t.offsetWidth||1,i=nn(e.height)/t.offsetHeight||1;return n!==1||i!==1}function Us(t,e,n){n===void 0&&(n=!1);var i=dt(e),r=dt(e)&&Xs(e),o=xt(e),l=rn(t,r,n),s={scrollLeft:0,scrollTop:0},a={x:0,y:0};return(i||!i&&!n)&&((_t(e)!=="body"||Xi(o))&&(s=Vs(e)),dt(e)?(a=rn(e,!0),a.x+=e.clientLeft,a.y+=e.clientTop):o&&(a.x=Vi(o))),{x:l.left+s.scrollLeft-a.x,y:l.top+s.scrollTop-a.y,width:l.width,height:l.height}}function Ys(t){var e=new Map,n=new Set,i=[];t.forEach(function(o){e.set(o.name,o)});function r(o){n.add(o.name);var l=[].concat(o.requires||[],o.requiresIfExists||[]);l.forEach(function(s){if(!n.has(s)){var a=e.get(s);a&&r(a)}}),i.push(o)}return t.forEach(function(o){n.has(o.name)||r(o)}),i}function Js(t){var e=Ys(t);return ls.reduce(function(n,i){return n.concat(e.filter(function(r){return r.phase===i}))},[])}function Ks(t){var e;return function(){return e||(e=new Promise(function(n){Promise.resolve().then(function(){e=void 0,n(t())})})),e}}function Qs(t){var e=t.reduce(function(n,i){var r=n[i.name];return n[i.name]=r?Object.assign({},r,i,{options:Object.assign({},r.options,i.options),data:Object.assign({},r.data,i.data)}):i,n},{});return Object.keys(e).map(function(n){return e[n]})}var co={placement:"bottom",modifiers:[],strategy:"absolute"};function po(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return!e.some(function(i){return!(i&&typeof i.getBoundingClientRect=="function")})}function Zs(t){t===void 0&&(t={});var e=t,n=e.defaultModifiers,i=n===void 0?[]:n,r=e.defaultOptions,o=r===void 0?co:r;return function(s,a,u){u===void 0&&(u=o);var f={placement:"bottom",orderedModifiers:[],options:Object.assign({},co,o),modifiersData:{},elements:{reference:s,popper:a},attributes:{},styles:{}},c=[],p=!1,m={state:f,setOptions:function(w){var E=typeof w=="function"?w(f.options):w;y(),f.options=Object.assign({},o,f.options,E),f.scrollParents={reference:Xt(s)?Nn(s):s.contextElement?Nn(s.contextElement):[],popper:Nn(a)};var D=Js(Qs([].concat(i,f.options.modifiers)));return f.orderedModifiers=D.filter(function(h){return h.enabled}),d(),m.update()},forceUpdate:function(){if(!p){var w=f.elements,E=w.reference,D=w.popper;if(po(E,D)){f.rects={reference:Us(E,In(D),f.options.strategy==="fixed"),popper:zi(D)},f.reset=!1,f.placement=f.options.placement,f.orderedModifiers.forEach(function(S){return f.modifiersData[S.name]=Object.assign({},S.data)});for(var h=0;h<f.orderedModifiers.length;h++){if(f.reset===!0){f.reset=!1,h=-1;continue}var C=f.orderedModifiers[h],k=C.fn,L=C.options,T=L===void 0?{}:L,v=C.name;typeof k=="function"&&(f=k({state:f,options:T,name:v,instance:m})||f)}}}},update:Ks(function(){return new Promise(function(g){m.forceUpdate(),g(f)})}),destroy:function(){y(),p=!0}};if(!po(s,a))return m;m.setOptions(u).then(function(g){!p&&u.onFirstUpdate&&u.onFirstUpdate(g)});function d(){f.orderedModifiers.forEach(function(g){var w=g.name,E=g.options,D=E===void 0?{}:E,h=g.effect;if(typeof h=="function"){var C=h({state:f,name:w,instance:m,options:D}),k=function(){};c.push(C||k)}})}function y(){c.forEach(function(g){return g()}),c=[]}return m}}var $s=[Es,Hs,ws,Qr,xs,Ns,qs,gs,Rs],eu=Zs({defaultModifiers:$s}),tu="tippy-box",ho="tippy-content",nu="tippy-backdrop",mo="tippy-arrow",go="tippy-svg-arrow",Yt={passive:!0,capture:!0},vo=function(){return document.body};function Yi(t,e,n){if(Array.isArray(t)){var i=t[e];return i??(Array.isArray(n)?n[e]:n)}return t}function Ji(t,e){var n={}.toString.call(t);return n.indexOf("[object")===0&&n.indexOf(e+"]")>-1}function bo(t,e){return typeof t=="function"?t.apply(void 0,e):t}function yo(t,e){if(e===0)return t;var n;return function(i){clearTimeout(n),n=setTimeout(function(){t(i)},e)}}function iu(t){return t.split(/\s+/).filter(Boolean)}function an(t){return[].concat(t)}function wo(t,e){t.indexOf(e)===-1&&t.push(e)}function ru(t){return t.filter(function(e,n){return t.indexOf(e)===n})}function ou(t){return t.split("-")[0]}function li(t){return[].slice.call(t)}function _o(t){return Object.keys(t).reduce(function(e,n){return t[n]!==void 0&&(e[n]=t[n]),e},{})}function Rn(){return document.createElement("div")}function si(t){return["Element","Fragment"].some(function(e){return Ji(t,e)})}function au(t){return Ji(t,"NodeList")}function lu(t){return Ji(t,"MouseEvent")}function su(t){return!!(t&&t._tippy&&t._tippy.reference===t)}function uu(t){return si(t)?[t]:au(t)?li(t):Array.isArray(t)?t:li(document.querySelectorAll(t))}function Ki(t,e){t.forEach(function(n){n&&(n.style.transitionDuration=e+"ms")})}function Eo(t,e){t.forEach(function(n){n&&n.setAttribute("data-state",e)})}function fu(t){var e,n=an(t),i=n[0];return i!=null&&(e=i.ownerDocument)!=null&&e.body?i.ownerDocument:document}function cu(t,e){var n=e.clientX,i=e.clientY;return t.every(function(r){var o=r.popperRect,l=r.popperState,s=r.props,a=s.interactiveBorder,u=ou(l.placement),f=l.modifiersData.offset;if(!f)return!0;var c=u==="bottom"?f.top.y:0,p=u==="top"?f.bottom.y:0,m=u==="right"?f.left.x:0,d=u==="left"?f.right.x:0,y=o.top-i+c>a,g=i-o.bottom-p>a,w=o.left-n+m>a,E=n-o.right-d>a;return y||g||w||E})}function Qi(t,e,n){var i=e+"EventListener";["transitionend","webkitTransitionEnd"].forEach(function(r){t[i](r,n)})}function ko(t,e){for(var n=e;n;){var i;if(t.contains(n))return!0;n=n.getRootNode==null||(i=n.getRootNode())==null?void 0:i.host}return!1}var kt={isTouch:!1},Do=0;function du(){kt.isTouch||(kt.isTouch=!0,window.performance&&document.addEventListener("mousemove",So))}function So(){var t=performance.now();t-Do<20&&(kt.isTouch=!1,document.removeEventListener("mousemove",So)),Do=t}function pu(){var t=document.activeElement;if(su(t)){var e=t._tippy;t.blur&&!e.state.isVisible&&t.blur()}}function hu(){document.addEventListener("touchstart",du,Yt),window.addEventListener("blur",pu)}var mu=typeof window<"u"&&typeof document<"u",gu=mu?!!window.msCrypto:!1,vu={animateFill:!1,followCursor:!1,inlinePositioning:!1,sticky:!1},bu={allowHTML:!1,animation:"fade",arrow:!0,content:"",inertia:!1,maxWidth:350,role:"tooltip",theme:"",zIndex:9999},mt=Object.assign({appendTo:vo,aria:{content:"auto",expanded:"auto"},delay:0,duration:[300,250],getReferenceClientRect:null,hideOnClick:!0,ignoreAttributes:!1,interactive:!1,interactiveBorder:2,interactiveDebounce:0,moveTransition:"",offset:[0,10],onAfterUpdate:function(){},onBeforeUpdate:function(){},onCreate:function(){},onDestroy:function(){},onHidden:function(){},onHide:function(){},onMount:function(){},onShow:function(){},onShown:function(){},onTrigger:function(){},onUntrigger:function(){},onClickOutside:function(){},placement:"top",plugins:[],popperOptions:{},render:null,showOnCreate:!1,touch:!0,trigger:"mouseenter focus",triggerTarget:null},vu,bu),yu=Object.keys(mt),wu=function(e){var n=Object.keys(e);n.forEach(function(i){mt[i]=e[i]})};function Co(t){var e=t.plugins||[],n=e.reduce(function(i,r){var o=r.name,l=r.defaultValue;if(o){var s;i[o]=t[o]!==void 0?t[o]:(s=mt[o])!=null?s:l}return i},{});return Object.assign({},t,n)}function _u(t,e){var n=e?Object.keys(Co(Object.assign({},mt,{plugins:e}))):yu,i=n.reduce(function(r,o){var l=(t.getAttribute("data-tippy-"+o)||"").trim();if(!l)return r;if(o==="content")r[o]=l;else try{r[o]=JSON.parse(l)}catch{r[o]=l}return r},{});return i}function To(t,e){var n=Object.assign({},e,{content:bo(e.content,[t])},e.ignoreAttributes?{}:_u(t,e.plugins));return n.aria=Object.assign({},mt.aria,n.aria),n.aria={expanded:n.aria.expanded==="auto"?e.interactive:n.aria.expanded,content:n.aria.content==="auto"?e.interactive?null:"describedby":n.aria.content},n}var Eu=function(){return"innerHTML"};function Zi(t,e){t[Eu()]=e}function Oo(t){var e=Rn();return t===!0?e.className=mo:(e.className=go,si(t)?e.appendChild(t):Zi(e,t)),e}function Ao(t,e){si(e.content)?(Zi(t,""),t.appendChild(e.content)):typeof e.content!="function"&&(e.allowHTML?Zi(t,e.content):t.textContent=e.content)}function $i(t){var e=t.firstElementChild,n=li(e.children);return{box:e,content:n.find(function(i){return i.classList.contains(ho)}),arrow:n.find(function(i){return i.classList.contains(mo)||i.classList.contains(go)}),backdrop:n.find(function(i){return i.classList.contains(nu)})}}function Lo(t){var e=Rn(),n=Rn();n.className=tu,n.setAttribute("data-state","hidden"),n.setAttribute("tabindex","-1");var i=Rn();i.className=ho,i.setAttribute("data-state","hidden"),Ao(i,t.props),e.appendChild(n),n.appendChild(i),r(t.props,t.props);function r(o,l){var s=$i(e),a=s.box,u=s.content,f=s.arrow;l.theme?a.setAttribute("data-theme",l.theme):a.removeAttribute("data-theme"),typeof l.animation=="string"?a.setAttribute("data-animation",l.animation):a.removeAttribute("data-animation"),l.inertia?a.setAttribute("data-inertia",""):a.removeAttribute("data-inertia"),a.style.maxWidth=typeof l.maxWidth=="number"?l.maxWidth+"px":l.maxWidth,l.role?a.setAttribute("role",l.role):a.removeAttribute("role"),(o.content!==l.content||o.allowHTML!==l.allowHTML)&&Ao(u,t.props),l.arrow?f?o.arrow!==l.arrow&&(a.removeChild(f),a.appendChild(Oo(l.arrow))):a.appendChild(Oo(l.arrow)):f&&a.removeChild(f)}return{popper:e,onUpdate:r}}Lo.$$tippy=!0;var ku=1,ui=[],er=[];function Du(t,e){var n=To(t,Object.assign({},mt,Co(_o(e)))),i,r,o,l=!1,s=!1,a=!1,u=!1,f,c,p,m=[],d=yo(ve,n.interactiveDebounce),y,g=ku++,w=null,E=ru(n.plugins),D={isEnabled:!0,isVisible:!1,isDestroyed:!1,isMounted:!1,isShown:!1},h={id:g,reference:t,popper:Rn(),popperInstance:w,props:n,state:D,plugins:E,clearDelayTimeouts:kn,setProps:Dn,setContent:Sn,show:Lr,hide:N,hideWithInteractivity:te,enable:Zt,disable:En,unmount:$,destroy:de};if(!n.render)return h;var C=n.render(h),k=C.popper,L=C.onUpdate;k.setAttribute("data-tippy-root",""),k.id="tippy-"+h.id,h.popper=k,t._tippy=h,k._tippy=h;var T=E.map(function(A){return A.fn(h)}),v=t.hasAttribute("aria-expanded");return V(),Be(),Z(),me("onCreate",[h]),n.showOnCreate&&wt(),k.addEventListener("mouseenter",function(){h.props.interactive&&h.state.isVisible&&h.clearDelayTimeouts()}),k.addEventListener("mouseleave",function(){h.props.interactive&&h.props.trigger.indexOf("mouseenter")>=0&&W().addEventListener("mousemove",d)}),h;function S(){var A=h.props.touch;return Array.isArray(A)?A:[A,0]}function I(){return S()[0]==="hold"}function M(){var A;return!!((A=h.props.render)!=null&&A.$$tippy)}function H(){return y||t}function W(){var A=H().parentNode;return A?fu(A):document}function P(){return $i(k)}function x(A){return h.state.isMounted&&!h.state.isVisible||kt.isTouch||f&&f.type==="focus"?0:Yi(h.props.delay,A?0:1,mt.delay)}function Z(A){A===void 0&&(A=!1),k.style.pointerEvents=h.props.interactive&&!A?"":"none",k.style.zIndex=""+h.props.zIndex}function me(A,B,G){if(G===void 0&&(G=!0),T.forEach(function(ue){ue[A]&&ue[A].apply(ue,B)}),G){var ne;(ne=h.props)[A].apply(ne,B)}}function Re(){var A=h.props.aria;if(A.content){var B="aria-"+A.content,G=k.id,ne=an(h.props.triggerTarget||t);ne.forEach(function(ue){var je=ue.getAttribute(B);if(h.state.isVisible)ue.setAttribute(B,je?je+" "+G:G);else{var Ze=je&&je.replace(G,"").trim();Ze?ue.setAttribute(B,Ze):ue.removeAttribute(B)}})}}function Be(){if(!(v||!h.props.aria.expanded)){var A=an(h.props.triggerTarget||t);A.forEach(function(B){h.props.interactive?B.setAttribute("aria-expanded",h.state.isVisible&&B===H()?"true":"false"):B.removeAttribute("aria-expanded")})}}function _e(){W().removeEventListener("mousemove",d),ui=ui.filter(function(A){return A!==d})}function Ne(A){if(!(kt.isTouch&&(a||A.type==="mousedown"))){var B=A.composedPath&&A.composedPath()[0]||A.target;if(!(h.props.interactive&&ko(k,B))){if(an(h.props.triggerTarget||t).some(function(G){return ko(G,B)})){if(kt.isTouch||h.state.isVisible&&h.props.trigger.indexOf("click")>=0)return}else me("onClickOutside",[h,A]);h.props.hideOnClick===!0&&(h.clearDelayTimeouts(),h.hide(),s=!0,setTimeout(function(){s=!1}),h.state.isMounted||rt())}}}function Qe(){a=!0}function Ee(){a=!1}function Oe(){var A=W();A.addEventListener("mousedown",Ne,!0),A.addEventListener("touchend",Ne,Yt),A.addEventListener("touchstart",Ee,Yt),A.addEventListener("touchmove",Qe,Yt)}function rt(){var A=W();A.removeEventListener("mousedown",Ne,!0),A.removeEventListener("touchend",Ne,Yt),A.removeEventListener("touchstart",Ee,Yt),A.removeEventListener("touchmove",Qe,Yt)}function ht(A,B){F(A,function(){!h.state.isVisible&&k.parentNode&&k.parentNode.contains(k)&&B()})}function ut(A,B){F(A,B)}function F(A,B){var G=P().box;function ne(ue){ue.target===G&&(Qi(G,"remove",ne),B())}if(A===0)return B();Qi(G,"remove",c),Qi(G,"add",ne),c=ne}function R(A,B,G){G===void 0&&(G=!1);var ne=an(h.props.triggerTarget||t);ne.forEach(function(ue){ue.addEventListener(A,B,G),m.push({node:ue,eventType:A,handler:B,options:G})})}function V(){I()&&(R("touchstart",re,{passive:!0}),R("touchend",De,{passive:!0})),iu(h.props.trigger).forEach(function(A){if(A!=="manual")switch(R(A,re),A){case"mouseenter":R("mouseleave",De);break;case"focus":R(gu?"focusout":"blur",Xe);break;case"focusin":R("focusout",Xe);break}})}function J(){m.forEach(function(A){var B=A.node,G=A.eventType,ne=A.handler,ue=A.options;B.removeEventListener(G,ne,ue)}),m=[]}function re(A){var B,G=!1;if(!(!h.state.isEnabled||Q(A)||s)){var ne=((B=f)==null?void 0:B.type)==="focus";f=A,y=A.currentTarget,Be(),!h.state.isVisible&&lu(A)&&ui.forEach(function(ue){return ue(A)}),A.type==="click"&&(h.props.trigger.indexOf("mouseenter")<0||l)&&h.props.hideOnClick!==!1&&h.state.isVisible?G=!0:wt(A),A.type==="click"&&(l=!G),G&&!ne&&Rt(A)}}function ve(A){var B=A.target,G=H().contains(B)||k.contains(B);if(!(A.type==="mousemove"&&G)){var ne=He().concat(k).map(function(ue){var je,Ze=ue._tippy,Bt=(je=Ze.popperInstance)==null?void 0:je.state;return Bt?{popperRect:ue.getBoundingClientRect(),popperState:Bt,props:n}:null}).filter(Boolean);cu(ne,A)&&(_e(),Rt(A))}}function De(A){var B=Q(A)||h.props.trigger.indexOf("click")>=0&&l;if(!B){if(h.props.interactive){h.hideWithInteractivity(A);return}Rt(A)}}function Xe(A){h.props.trigger.indexOf("focusin")<0&&A.target!==H()||h.props.interactive&&A.relatedTarget&&k.contains(A.relatedTarget)||Rt(A)}function Q(A){return kt.isTouch?I()!==A.type.indexOf("touch")>=0:!1}function ce(){ge();var A=h.props,B=A.popperOptions,G=A.placement,ne=A.offset,ue=A.getReferenceClientRect,je=A.moveTransition,Ze=M()?$i(k).arrow:null,Bt=ue?{getBoundingClientRect:ue,contextElement:ue.contextElement||H()}:t,$t={name:"$$tippy",enabled:!0,phase:"beforeWrite",requires:["computeStyles"],fn:function(Fi){var Cn=Fi.state;if(M()){var Nc=P(),Pr=Nc.box;["placement","reference-hidden","escaped"].forEach(function(xi){xi==="placement"?Pr.setAttribute("data-placement",Cn.placement):Cn.attributes.popper["data-popper-"+xi]?Pr.setAttribute("data-"+xi,""):Pr.removeAttribute("data-"+xi)}),Cn.attributes.popper={}}}},en=[{name:"offset",options:{offset:ne}},{name:"preventOverflow",options:{padding:{top:2,bottom:2,left:5,right:5}}},{name:"flip",options:{padding:5}},{name:"computeStyles",options:{adaptive:!je}},$t];M()&&Ze&&en.push({name:"arrow",options:{element:Ze,padding:3}}),en.push.apply(en,(B==null?void 0:B.modifiers)||[]),h.popperInstance=eu(Bt,k,Object.assign({},B,{placement:G,onFirstUpdate:p,modifiers:en}))}function ge(){h.popperInstance&&(h.popperInstance.destroy(),h.popperInstance=null)}function Ae(){var A=h.props.appendTo,B,G=H();h.props.interactive&&A===vo||A==="parent"?B=G.parentNode:B=bo(A,[G]),B.contains(k)||B.appendChild(k),h.state.isMounted=!0,ce()}function He(){return li(k.querySelectorAll("[data-tippy-root]"))}function wt(A){h.clearDelayTimeouts(),A&&me("onTrigger",[h,A]),Oe();var B=x(!0),G=S(),ne=G[0],ue=G[1];kt.isTouch&&ne==="hold"&&ue&&(B=ue),B?i=setTimeout(function(){h.show()},B):h.show()}function Rt(A){if(h.clearDelayTimeouts(),me("onUntrigger",[h,A]),!h.state.isVisible){rt();return}if(!(h.props.trigger.indexOf("mouseenter")>=0&&h.props.trigger.indexOf("click")>=0&&["mouseleave","mousemove"].indexOf(A.type)>=0&&l)){var B=x(!1);B?r=setTimeout(function(){h.state.isVisible&&h.hide()},B):o=requestAnimationFrame(function(){h.hide()})}}function Zt(){h.state.isEnabled=!0}function En(){h.hide(),h.state.isEnabled=!1}function kn(){clearTimeout(i),clearTimeout(r),cancelAnimationFrame(o)}function Dn(A){if(!h.state.isDestroyed){me("onBeforeUpdate",[h,A]),J();var B=h.props,G=To(t,Object.assign({},B,_o(A),{ignoreAttributes:!0}));h.props=G,V(),B.interactiveDebounce!==G.interactiveDebounce&&(_e(),d=yo(ve,G.interactiveDebounce)),B.triggerTarget&&!G.triggerTarget?an(B.triggerTarget).forEach(function(ne){ne.removeAttribute("aria-expanded")}):G.triggerTarget&&t.removeAttribute("aria-expanded"),Be(),Z(),L&&L(B,G),h.popperInstance&&(ce(),He().forEach(function(ne){requestAnimationFrame(ne._tippy.popperInstance.forceUpdate)})),me("onAfterUpdate",[h,A])}}function Sn(A){h.setProps({content:A})}function Lr(){var A=h.state.isVisible,B=h.state.isDestroyed,G=!h.state.isEnabled,ne=kt.isTouch&&!h.props.touch,ue=Yi(h.props.duration,0,mt.duration);if(!(A||B||G||ne)&&!H().hasAttribute("disabled")&&(me("onShow",[h],!1),h.props.onShow(h)!==!1)){if(h.state.isVisible=!0,M()&&(k.style.visibility="visible"),Z(),Oe(),h.state.isMounted||(k.style.transition="none"),M()){var je=P(),Ze=je.box,Bt=je.content;Ki([Ze,Bt],0)}p=function(){var en;if(!(!h.state.isVisible||u)){if(u=!0,k.offsetHeight,k.style.transition=h.props.moveTransition,M()&&h.props.animation){var Ir=P(),Fi=Ir.box,Cn=Ir.content;Ki([Fi,Cn],ue),Eo([Fi,Cn],"visible")}Re(),Be(),wo(er,h),(en=h.popperInstance)==null||en.forceUpdate(),me("onMount",[h]),h.props.animation&&M()&&ut(ue,function(){h.state.isShown=!0,me("onShown",[h])})}},Ae()}}function N(){var A=!h.state.isVisible,B=h.state.isDestroyed,G=!h.state.isEnabled,ne=Yi(h.props.duration,1,mt.duration);if(!(A||B||G)&&(me("onHide",[h],!1),h.props.onHide(h)!==!1)){if(h.state.isVisible=!1,h.state.isShown=!1,u=!1,l=!1,M()&&(k.style.visibility="hidden"),_e(),rt(),Z(!0),M()){var ue=P(),je=ue.box,Ze=ue.content;h.props.animation&&(Ki([je,Ze],ne),Eo([je,Ze],"hidden"))}Re(),Be(),h.props.animation?M()&&ht(ne,h.unmount):h.unmount()}}function te(A){W().addEventListener("mousemove",d),wo(ui,d),d(A)}function $(){h.state.isVisible&&h.hide(),h.state.isMounted&&(ge(),He().forEach(function(A){A._tippy.unmount()}),k.parentNode&&k.parentNode.removeChild(k),er=er.filter(function(A){return A!==h}),h.state.isMounted=!1,me("onHidden",[h]))}function de(){h.state.isDestroyed||(h.clearDelayTimeouts(),h.unmount(),J(),delete t._tippy,h.state.isDestroyed=!0,me("onDestroy",[h]))}}function Bn(t,e){e===void 0&&(e={});var n=mt.plugins.concat(e.plugins||[]);hu();var i=Object.assign({},e,{plugins:n}),r=uu(t),o=r.reduce(function(l,s){var a=s&&Du(s,i);return a&&l.push(a),l},[]);return si(t)?o[0]:o}Bn.defaultProps=mt,Bn.setDefaultProps=wu,Bn.currentInput=kt,Object.assign({},Qr,{effect:function(e){var n=e.state,i={popper:{position:n.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};Object.assign(n.elements.popper.style,i.popper),n.styles=i,n.elements.arrow&&Object.assign(n.elements.arrow.style,i.arrow)}}),Bn.setDefaultProps({render:Lo});function Ce(){}const Io=t=>t;function Fn(t,e){for(const n in e)t[n]=e[n];return t}function Po(t){return t()}function No(){return Object.create(null)}function at(t){t.forEach(Po)}function fi(t){return typeof t=="function"}function Le(t,e){return t!=t?e==e:t!==e||t&&typeof t=="object"||typeof t=="function"}let ci;function Mo(t,e){return t===e?!0:(ci||(ci=document.createElement("a")),ci.href=e,t===ci.href)}function Su(t){return Object.keys(t).length===0}function Ro(t,e,n,i){if(t){const r=Bo(t,e,n,i);return t[0](r)}}function Bo(t,e,n,i){return t[1]&&i?Fn(n.ctx.slice(),t[1](i(e))):n.ctx}function Fo(t,e,n,i){if(t[2]&&i){const r=t[2](i(n));if(e.dirty===void 0)return r;if(typeof r=="object"){const o=[],l=Math.max(e.dirty.length,r.length);for(let s=0;s<l;s+=1)o[s]=e.dirty[s]|r[s];return o}return e.dirty|r}return e.dirty}function xo(t,e,n,i,r,o){if(r){const l=Bo(e,n,i,o);t.p(l,r)}}function Wo(t){if(t.ctx.length>32){const e=[],n=t.ctx.length/32;for(let i=0;i<n;i++)e[i]=-1;return e}return-1}function Ho(t){return t??""}const jo=typeof window<"u";let Cu=jo?()=>window.performance.now():()=>Date.now(),tr=jo?t=>requestAnimationFrame(t):Ce;const ln=new Set;function zo(t){ln.forEach(e=>{e.c(t)||(ln.delete(e),e.f())}),ln.size!==0&&tr(zo)}function Tu(t){let e;return ln.size===0&&tr(zo),{promise:new Promise(n=>{ln.add(e={c:t,f:n})}),abort(){ln.delete(e)}}}function _(t,e){t.appendChild(e)}function qo(t){if(!t)return document;const e=t.getRootNode?t.getRootNode():t.ownerDocument;return e&&e.host?e:t.ownerDocument}function Ou(t){const e=O("style");return e.textContent="/* empty */",Au(qo(t),e),e.sheet}function Au(t,e){return _(t.head||t,e),e.sheet}function U(t,e,n){t.insertBefore(e,n||null)}function X(t){t.parentNode&&t.parentNode.removeChild(t)}function sn(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}function O(t){return document.createElement(t)}function we(t){return document.createTextNode(t)}function z(){return we(" ")}function di(){return we("")}function fe(t,e,n,i){return t.addEventListener(e,n,i),()=>t.removeEventListener(e,n,i)}function Wt(t){return function(e){return e.preventDefault(),t.call(this,e)}}function nr(t){return function(e){return e.stopPropagation(),t.call(this,e)}}function Lu(t){return function(e){e.target===this&&t.call(this,e)}}function b(t,e,n){n==null?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}const Iu=["width","height"];function Ht(t,e){const n=Object.getOwnPropertyDescriptors(t.__proto__);for(const i in e)e[i]==null?t.removeAttribute(i):i==="style"?t.style.cssText=e[i]:i==="__value"?t.value=t[i]=e[i]:n[i]&&n[i].set&&Iu.indexOf(i)===-1?t[i]=e[i]:b(t,i,e[i])}function Pu(t){return Array.from(t.childNodes)}function xe(t,e){e=""+e,t.data!==e&&(t.data=e)}function Go(t,e){t.value=e??""}function le(t,e,n,i){n==null?t.style.removeProperty(e):t.style.setProperty(e,n,"")}function Vo(t,e,n){for(let i=0;i<t.options.length;i+=1){const r=t.options[i];if(r.__value===e){r.selected=!0;return}}(!n||e!==void 0)&&(t.selectedIndex=-1)}function Nu(t){const e=t.querySelector(":checked");return e&&e.__value}function ae(t,e,n){t.classList.toggle(e,!!n)}function Xo(t,e,{bubbles:n=!1,cancelable:i=!1}={}){return new CustomEvent(t,{detail:e,bubbles:n,cancelable:i})}const pi=new Map;let hi=0;function Mu(t){let e=5381,n=t.length;for(;n--;)e=(e<<5)-e^t.charCodeAt(n);return e>>>0}function Ru(t,e){const n={stylesheet:Ou(e),rules:{}};return pi.set(t,n),n}function Uo(t,e,n,i,r,o,l,s=0){const a=16.666/i;let u=`{
`;for(let g=0;g<=1;g+=a){const w=e+(n-e)*o(g);u+=g*100+`%{${l(w,1-w)}}
`}const f=u+`100% {${l(n,1-n)}}
}`,c=`__svelte_${Mu(f)}_${s}`,p=qo(t),{stylesheet:m,rules:d}=pi.get(p)||Ru(p,t);d[c]||(d[c]=!0,m.insertRule(`@keyframes ${c} ${f}`,m.cssRules.length));const y=t.style.animation||"";return t.style.animation=`${y?`${y}, `:""}${c} ${i}ms linear ${r}ms 1 both`,hi+=1,c}function Bu(t,e){const n=(t.style.animation||"").split(", "),i=n.filter(e?o=>o.indexOf(e)<0:o=>o.indexOf("__svelte")===-1),r=n.length-i.length;r&&(t.style.animation=i.join(", "),hi-=r,hi||Fu())}function Fu(){tr(()=>{hi||(pi.forEach(t=>{const{ownerNode:e}=t.stylesheet;e&&X(e)}),pi.clear())})}let xn;function Wn(t){xn=t}function mi(){if(!xn)throw new Error("Function called outside component initialization");return xn}function un(t){mi().$$.on_mount.push(t)}function xu(t){mi().$$.after_update.push(t)}function ir(t){mi().$$.on_destroy.push(t)}function rr(){const t=mi();return(e,n,{cancelable:i=!1}={})=>{const r=t.$$.callbacks[e];if(r){const o=Xo(e,n,{cancelable:i});return r.slice().forEach(l=>{l.call(t,o)}),!o.defaultPrevented}return!0}}const fn=[],ze=[];let cn=[];const Yo=[],Jo=Promise.resolve();let or=!1;function Ko(){or||(or=!0,Jo.then(Qo))}function dn(){return Ko(),Jo}function pn(t){cn.push(t)}const ar=new Set;let hn=0;function Qo(){if(hn!==0)return;const t=xn;do{try{for(;hn<fn.length;){const e=fn[hn];hn++,Wn(e),Wu(e.$$)}}catch(e){throw fn.length=0,hn=0,e}for(Wn(null),fn.length=0,hn=0;ze.length;)ze.pop()();for(let e=0;e<cn.length;e+=1){const n=cn[e];ar.has(n)||(ar.add(n),n())}cn.length=0}while(fn.length);for(;Yo.length;)Yo.pop()();or=!1,ar.clear(),Wn(t)}function Wu(t){if(t.fragment!==null){t.update(),at(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(pn)}}function Hu(t){const e=[],n=[];cn.forEach(i=>t.indexOf(i)===-1?e.push(i):n.push(i)),n.forEach(i=>i()),cn=e}let Hn;function ju(){return Hn||(Hn=Promise.resolve(),Hn.then(()=>{Hn=null})),Hn}function lr(t,e,n){t.dispatchEvent(Xo(`${e?"intro":"outro"}${n}`))}const gi=new Set;let Ot;function Zo(){Ot={r:0,c:[],p:Ot}}function $o(){Ot.r||at(Ot.c),Ot=Ot.p}function We(t,e){t&&t.i&&(gi.delete(t),t.i(e))}function Ue(t,e,n,i){if(t&&t.o){if(gi.has(t))return;gi.add(t),Ot.c.push(()=>{gi.delete(t),i&&(n&&t.d(1),i())}),t.o(e)}else i&&i()}const zu={duration:0};function ea(t,e,n,i){let o=e(t,n,{direction:"both"}),l=i?0:1,s=null,a=null,u=null,f;function c(){u&&Bu(t,u)}function p(d,y){const g=d.b-l;return y*=Math.abs(g),{a:l,b:d.b,d:g,duration:y,start:d.start,end:d.start+y,group:d.group}}function m(d){const{delay:y=0,duration:g=300,easing:w=Io,tick:E=Ce,css:D}=o||zu,h={start:Cu()+y,b:d};d||(h.group=Ot,Ot.r+=1),"inert"in t&&(d?f!==void 0&&(t.inert=f):(f=t.inert,t.inert=!0)),s||a?a=h:(D&&(c(),u=Uo(t,l,d,g,y,w,D)),d&&E(0,1),s=p(h,g),pn(()=>lr(t,d,"start")),Tu(C=>{if(a&&C>a.start&&(s=p(a,g),a=null,lr(t,s.b,"start"),D&&(c(),u=Uo(t,l,s.b,s.duration,0,w,o.css))),s){if(C>=s.end)E(l=s.b,1-l),lr(t,s.b,"end"),a||(s.b?c():--s.group.r||at(s.group.c)),s=null;else if(C>=s.start){const k=C-s.start;l=s.a+s.d*w(k/s.duration),E(l,1-l)}}return!!(s||a)}))}return{run(d){fi(o)?ju().then(()=>{o=o({direction:d?"in":"out"}),m(d)}):m(d)},end(){c(),s=a=null}}}function be(t){return(t==null?void 0:t.length)!==void 0?t:Array.from(t)}function At(t,e){t.d(1),e.delete(t.key)}function Lt(t,e,n,i,r,o,l,s,a,u,f,c){let p=t.length,m=o.length,d=p;const y={};for(;d--;)y[t[d].key]=d;const g=[],w=new Map,E=new Map,D=[];for(d=m;d--;){const L=c(r,o,d),T=n(L);let v=l.get(T);v?D.push(()=>v.p(L,e)):(v=u(T,L),v.c()),w.set(T,g[d]=v),T in y&&E.set(T,Math.abs(d-y[T]))}const h=new Set,C=new Set;function k(L){We(L,1),L.m(s,f),l.set(L.key,L),f=L.first,m--}for(;p&&m;){const L=g[m-1],T=t[p-1],v=L.key,S=T.key;L===T?(f=L.first,p--,m--):w.has(S)?!l.has(v)||h.has(v)?k(L):C.has(S)?p--:E.get(v)>E.get(S)?(C.add(v),k(L)):(h.add(S),p--):(a(T,l),p--)}for(;p--;){const L=t[p];w.has(L.key)||a(L,l)}for(;m;)k(g[m-1]);return at(D),g}function vi(t,e){const n={},i={},r={$$scope:1};let o=t.length;for(;o--;){const l=t[o],s=e[o];if(s){for(const a in l)a in s||(i[a]=1);for(const a in s)r[a]||(n[a]=s[a],r[a]=1);t[o]=s}else for(const a in l)r[a]=1}for(const l in i)l in n||(n[l]=void 0);return n}function Dt(t){t&&t.c()}function gt(t,e,n){const{fragment:i,after_update:r}=t.$$;i&&i.m(e,n),pn(()=>{const o=t.$$.on_mount.map(Po).filter(fi);t.$$.on_destroy?t.$$.on_destroy.push(...o):at(o),t.$$.on_mount=[]}),r.forEach(pn)}function vt(t,e){const n=t.$$;n.fragment!==null&&(Hu(n.after_update),at(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function qu(t,e){t.$$.dirty[0]===-1&&(fn.push(t),Ko(),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function qe(t,e,n,i,r,o,l=null,s=[-1]){const a=xn;Wn(t);const u=t.$$={fragment:null,ctx:[],props:o,update:Ce,not_equal:r,bound:No(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(a?a.$$.context:[])),callbacks:No(),dirty:s,skip_bound:!1,root:e.target||a.$$.root};l&&l(u.root);let f=!1;if(u.ctx=n?n(t,e.props||{},(c,p,...m)=>{const d=m.length?m[0]:p;return u.ctx&&r(u.ctx[c],u.ctx[c]=d)&&(!u.skip_bound&&u.bound[c]&&u.bound[c](d),f&&qu(t,c)),p}):[],u.update(),f=!0,at(u.before_update),u.fragment=i?i(u.ctx):!1,e.target){if(e.hydrate){const c=Pu(e.target);u.fragment&&u.fragment.l(c),c.forEach(X)}else u.fragment&&u.fragment.c();e.intro&&We(t.$$.fragment),gt(t,e.target,e.anchor),Qo()}Wn(a)}class Ge{constructor(){Nr(this,"$$");Nr(this,"$$set")}$destroy(){vt(this,1),this.$destroy=Ce}$on(e,n){if(!fi(n))return Ce;const i=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return i.push(n),()=>{const r=i.indexOf(n);r!==-1&&i.splice(r,1)}}$set(e){this.$$set&&!Su(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}const Gu="4",mn=[];function jt(t,e=Ce){let n;const i=new Set;function r(s){if(Le(t,s)&&(t=s,n)){const a=!mn.length;for(const u of i)u[1](),mn.push(u,t);if(a){for(let u=0;u<mn.length;u+=2)mn[u][0](mn[u+1]);mn.length=0}}}function o(s){r(s(t))}function l(s,a=Ce){const u=[s,a];return i.add(u),i.size===1&&(n=e(r,o)||Ce),s(t),()=>{i.delete(u),i.size===0&&n&&(n(),n=null)}}return{set:r,update:o,subscribe:l}}const sr=jt({}),q={setTranslations(t){sr.set(t)},has(t,e,n){let i=!1;return sr.subscribe(r=>{if(n in r&&e in r[n]&&t in r[n][e]){i=!0;return}})(),i},get(t,e,n){let i=n;return sr.subscribe(r=>{if(t in r&&e in r[t]&&n in r[t][e]){i=r[t][e][n];return}if(t in r&&e in r[t]&&n in r[t][e]){i=r[t][e][n];return}if(t=="Global"){i=n;return}i=null})(),i},translate(t,e=null,n=null){n=n||"Global",e=e||"labels";let i=q.get(n,e,t);return i===null&&n!="Global"&&(i=q.get("Global",e,t)),i},translateOption(t,e,n=null){let i=q.translate(e,"options",n);return i===null?"":typeof i=="object"?i[t]:t}},ta=jt({}),bi={set(t){ta.set(t)},get(){let t=null;return ta.subscribe(e=>{e&&(t=e)})(),t}},ur=jt(),tt={setNotifier(t){ur.set(t)},notify(t,e=null,n=2e3){ur.subscribe(i=>{i&&i.notify(t,e,2e3)})()},confirm(t=null,e=null,n){ur.subscribe(i=>{if(i){let r=null,o=null,l=null;typeof t=="string"||t instanceof String?(o=t,l=q.translate("Yes")):(t=t||{},o=t.message,l=t.confirmText,r=t.confirmStyle||null),i.confirm(o,{confirmText:l,cancelText:q.translate("Cancel"),confirmStyle:r},e,n)}})()}},yi=jt(),It={setLayoutManager(t){yi.set(t)},resetToDefault(t,e,n,i,r){let o=null;return yi.subscribe(l=>{l&&(o=l.resetToDefault(t,e,n,i,r))})(),o},get:function(t,e,n,i,r,o){let l=null;return yi.subscribe(s=>{s&&(l=s.get(t,e,n,i,r,o))})(),l},set:function(t,e,n,i,r,o){let l=null;return yi.subscribe(s=>{s&&(l=s.set(t,e,n,i,r,o))})(),l}},na=jt(),se={setMetadata(t){na.set(t)},get(t){let e=null;return na.subscribe(n=>{n&&(e=n.get(t))})(),e}},ia=jt(),fr={setModelFactory(t){ia.set(t)},create(t,e){ia.subscribe(n=>{n&&n.create(t,e)})()}},ra=jt(),oa={setConfig(t){ra.set(t)},get(t){let e=null;return ra.subscribe(n=>{n&&(e=n.get(t))})(),e}},jn=jt(),ye={setStorage(t){jn.set(t)},get(t,e){let n=null;return jn.subscribe(i=>{i&&(n=i.get(t,e))})(),n},has(t,e){let n=null;return jn.subscribe(i=>{i&&(n=i.has(t,e))})(),n},clear(t,e){jn.subscribe(n=>{n&&n.clear(t,e)})()},set(t,e,n){jn.subscribe(i=>{i&&i.set(t,e,n)})()}};typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(Gu);function aa(t){let e,n,i,r,o,l,s,a,u,f,c,p,m,d,y;function g(D,h){return D[2]?Xu:Vu}let w=g(t),E=w(t);return{c(){e=O("div"),n=O("div"),i=O("div"),r=O("span"),r.textContent=`${q.translate("jobManager")}`,o=z(),l=O("span"),s=O("a"),s.innerHTML='<span aria-hidden="true">×</span>',a=z(),E.c(),u=z(),f=O("a"),f.textContent=`${q.translate("View List")}`,c=z(),p=O("div"),m=O("div"),m.textContent=`${q.translate("Loading...")}`,b(r,"class","panel-heading-title"),b(s,"href","/"),b(s,"class","close svelte-1p6ppx8"),b(f,"href","#Job"),b(f,"title",q.translate("View List")),b(f,"class","qp-view-list svelte-1p6ppx8"),b(l,"class","pull-right"),b(i,"class","panel-heading clearfix"),b(m,"class","list-container"),b(p,"class","panel-body"),b(n,"class","panel panel-default"),b(e,"class","queue-panel-container")},m(D,h){U(D,e,h),_(e,n),_(n,i),_(i,r),_(i,o),_(i,l),_(l,s),_(l,a),E.m(l,null),_(l,u),_(l,f),_(n,c),_(n,p),_(p,m),t[9](e),d||(y=fe(s,"click",t[6]),d=!0)},p(D,h){w===(w=g(D))&&E?E.p(D,h):(E.d(1),E=w(D),E&&(E.c(),E.m(l,u)))},d(D){D&&X(e),E.d(),t[9](null),d=!1,y()}}}function Vu(t){let e,n,i;return{c(){e=O("a"),e.textContent=`${q.translate("Pause")}`,b(e,"href","/"),b(e,"title",q.translate("Pause")),b(e,"class","qm-button")},m(r,o){U(r,e,o),n||(i=fe(e,"click",t[8]),n=!0)},p:Ce,d(r){r&&X(e),n=!1,i()}}}function Xu(t){let e,n,i;return{c(){e=O("a"),e.textContent=`${q.translate("Start")}`,b(e,"href","/"),b(e,"title",q.translate("Start")),b(e,"class","qm-button")},m(r,o){U(r,e,o),n||(i=fe(e,"click",t[7]),n=!0)},p:Ce,d(r){r&&X(e),n=!1,i()}}}function Uu(t){let e,n=t[0]&&aa(t);return{c(){n&&n.c(),e=di()},m(i,r){n&&n.m(i,r),U(i,e,r)},p(i,[r]){i[0]?n?n.p(i,r):(n=aa(i),n.c(),n.m(e.parentNode,e)):n&&(n.d(1),n=null)},i:Ce,o:Ce,d(i){i&&X(e),n&&n.d(i)}}}function Yu(t,e,n){let{isOpen:i=!1}=e,{close:r}=e,{icon:o}=e,l=!1;window.addEventListener("publicDataFetched",d=>{n(2,l=!!d.detail.qmPaused)});let s;function a(d){s&&!s.contains(d.target)&&o&&!o.contains(d.target)&&i===!0&&r()}un(()=>{document.addEventListener("click",a)}),ir(()=>{document.removeEventListener("click",a)});async function u(d){let y=bi.get();if(y)try{const g=await fetch("/api/v1/App/action/QueueManagerUpdate",{method:"POST",headers:{"Content-Type":"application/json","Authorization-Token":btoa(y.user.userName+":"+y.token)},body:JSON.stringify({pause:d})});if(!g.ok)throw new Error("Network response was not ok");await g.json(),tt.notify("Done","success")}catch(g){console.error("Error:",g)}}const f=d=>{d.preventDefault(),r()},c=d=>{d.preventDefault(),u(!1)},p=d=>{d.preventDefault(),u(!0)};function m(d){ze[d?"unshift":"push"](()=>{s=d,n(3,s)})}return t.$$set=d=>{"isOpen"in d&&n(0,i=d.isOpen),"close"in d&&n(1,r=d.close),"icon"in d&&n(5,o=d.icon)},[i,r,l,s,u,o,f,c,p,m]}class Ju extends Ge{constructor(e){super(),qe(this,e,Yu,Uu,Le,{isOpen:0,close:1,icon:5})}}function la(t){let e;return{c(){e=O("span"),b(e,"class","fas fa-pause-circle pause-icon")},m(n,i){U(n,e,i)},d(n){n&&X(e)}}}function Ku(t){let e,n,i,r,o,l,s,a,u=t[2]&&la();return o=new Ju({props:{icon:t[0],isOpen:t[1],close:t[4]}}),{c(){e=O("a"),n=O("span"),i=z(),u&&u.c(),r=z(),Dt(o.$$.fragment),b(n,"class","fas fa-tasks"),b(e,"href","/"),b(e,"class","notifications-button"),b(e,"title",q.translate("jobManager"))},m(f,c){U(f,e,c),_(e,n),_(e,i),u&&u.m(e,null),t[6](e),U(f,r,c),gt(o,f,c),l=!0,s||(a=fe(e,"click",t[7]),s=!0)},p(f,[c]){f[2]?u||(u=la(),u.c(),u.m(e,null)):u&&(u.d(1),u=null);const p={};c&1&&(p.icon=f[0]),c&2&&(p.isOpen=f[1]),o.$set(p)},i(f){l||(We(o.$$.fragment,f),l=!0)},o(f){Ue(o.$$.fragment,f),l=!1},d(f){f&&(X(e),X(r)),u&&u.d(),t[6](null),vt(o,f),s=!1,a()}}}function Qu(t,e,n){let{renderTable:i=()=>{}}=e,r,o=!1,l=!1;window.addEventListener("publicDataFetched",c=>{n(2,l=!!c.detail.qmPaused)});function s(){o||(n(1,o=!0),i())}function a(){n(1,o=!1),window.dispatchEvent(new Event("jobManagerPanelClosed"))}function u(c){ze[c?"unshift":"push"](()=>{r=c,n(0,r)})}const f=c=>{c.preventDefault(),s()};return t.$$set=c=>{"renderTable"in c&&n(5,i=c.renderTable)},[r,o,l,s,a,i,u,f]}class Zu extends Ge{constructor(e){super(),qe(this,e,Qu,Ku,Le,{renderTable:5})}}function $u(t){let e,n=`${t[0]}px`,i=`${t[0]}px`,r=`${t[1]}px`;return{c(){e=O("div"),b(e,"class","loading-icon spinner svelte-yw8t7l"),le(e,"width",n),le(e,"height",i),le(e,"border-width",r)},m(o,l){U(o,e,l)},p(o,[l]){l&1&&n!==(n=`${o[0]}px`)&&le(e,"width",n),l&1&&i!==(i=`${o[0]}px`)&&le(e,"height",i),l&2&&r!==(r=`${o[1]}px`)&&le(e,"border-width",r)},i:Ce,o:Ce,d(o){o&&X(e)}}}function ef(t,e,n){let{size:i=40}=e,{thickness:r=4}=e;return t.$$set=o=>{"size"in o&&n(0,i=o.size),"thickness"in o&&n(1,r=o.thickness)},[i,r]}class tf extends Ge{constructor(e){super(),qe(this,e,ef,$u,Le,{size:0,thickness:1})}}function sa(t){let e,n;return{c(){e=O("img"),Mo(e.src,n=t[1])||b(e,"src",n),b(e,"class","logo"),b(e,"alt",t[0])},m(i,r){U(i,e,r)},p(i,r){r&2&&!Mo(e.src,n=i[1])&&b(e,"src",n),r&1&&b(e,"alt",i[0])},d(i){i&&X(e)}}}function ua(t){let e,n,i;return{c(){e=O("a"),n=O("i"),i=we("Recovery Instructions"),b(n,"class","fa fa-history svelte-1qmezxs"),b(e,"href",t[2]),b(e,"target","_blank"),b(e,"class","btn btn-default svelte-1qmezxs"),b(e,"role","button"),le(e,"float","right")},m(r,o){U(r,e,o),_(e,n),_(e,i)},p(r,o){o&4&&b(e,"href",r[2])},d(r){r&&X(e)}}}function fa(t){let e,n,i,r,o,l;return{c(){e=O("hr"),n=z(),i=O("pre"),r=we(t[3]),b(i,"class","logs-container svelte-1qmezxs")},m(s,a){U(s,e,a),U(s,n,a),U(s,i,a),_(i,r),t[11](i),o||(l=fe(i,"scroll",t[8]),o=!0)},p(s,a){a&8&&xe(r,s[3])},d(s){s&&(X(e),X(n),X(i)),t[11](null),o=!1,l()}}}function nf(t){let e,n,i,r,o,l,s,a,u,f,c,p,m,d,y,g,w,E,D=t[4]?"Hide":"Show",h,C,k,L,T,v,S,I,M=t[1]&&sa(t);f=new tf({props:{size:"40",thickness:"5"}});let H=t[2]&&ua(t),W=t[4]&&t[3]&&fa(t);return{c(){e=O("div"),n=O("div"),i=O("div"),M&&M.c(),r=z(),o=O("div"),l=O("div"),s=O("h3"),s.textContent="System is updating...",a=z(),u=O("section"),Dt(f.$$.fragment),c=z(),p=O("h5"),m=we(t[5]),d=z(),y=O("section"),g=O("div"),w=O("button"),E=O("i"),h=we(D),C=we(" logs"),L=z(),H&&H.c(),T=z(),W&&W.c(),b(i,"class","logo-container"),b(n,"class","panel-heading"),b(p,"class","svelte-1qmezxs"),b(u,"class","progress-section svelte-1qmezxs"),b(E,"class","fa fa-list svelte-1qmezxs"),b(w,"class","btn btn-default svelte-1qmezxs"),w.disabled=k=!t[3],b(g,"class","buttons"),b(y,"class","logs-section"),b(l,"class","form-group"),b(o,"class","panel-body"),b(e,"id","login"),b(e,"class","panel panel-default panel-updating")},m(P,x){U(P,e,x),_(e,n),_(n,i),M&&M.m(i,null),_(e,r),_(e,o),_(o,l),_(l,s),_(l,a),_(l,u),gt(f,u,null),_(u,c),_(u,p),_(p,m),_(l,d),_(l,y),_(y,g),_(g,w),_(w,E),_(w,h),_(w,C),_(g,L),H&&H.m(g,null),_(y,T),W&&W.m(y,null),v=!0,S||(I=fe(w,"click",t[7]),S=!0)},p(P,[x]){P[1]?M?M.p(P,x):(M=sa(P),M.c(),M.m(i,null)):M&&(M.d(1),M=null),(!v||x&32)&&xe(m,P[5]),(!v||x&16)&&D!==(D=P[4]?"Hide":"Show")&&xe(h,D),(!v||x&8&&k!==(k=!P[3]))&&(w.disabled=k),P[2]?H?H.p(P,x):(H=ua(P),H.c(),H.m(g,null)):H&&(H.d(1),H=null),P[4]&&P[3]?W?W.p(P,x):(W=fa(P),W.c(),W.m(y,null)):W&&(W.d(1),W=null)},i(P){v||(We(f.$$.fragment,P),v=!0)},o(P){Ue(f.$$.fragment,P),v=!1},d(P){P&&X(e),M&&M.d(),vt(f),H&&H.d(),W&&W.d(),S=!1,I()}}}function rf(t){return t.replace(/^\d{2,4}.\d{2}.\d{2,4} \d{2}:\d{2}:\d{2}/g,"").replace(/^[\-\|\s]+/,"")}function of(t,e,n){let{applicationName:i="AtroCore"}=e,{logoPath:r=null}=e,{logFilePath:o}=e,{restoreLink:l=null}=e,s=!1,a=!1,u=0,f=!0,c="",p,m;xu(()=>{m&&f&&m.scrollTo(0,m.scrollHeight)});function d(){n(4,s=!s),s||(f=!0)}function y(w){const E=w.currentTarget;f=E.scrollHeight-E.scrollTop===E.clientHeight}setInterval(async()=>{try{const w=await fetch(o,{cache:"no-store"});u+=1,w.ok?(n(3,c=(await w.text()).trim()),c.search("composer")>=0&&n(10,a=!0),u>65&&!a&&n(3,c="Something wrong. Please, reboot the server.")):a?setTimeout(()=>{location.reload()},2e3):u>65&&n(3,c="Something wrong. Please, reboot the server.")}catch(w){console.error("Error: ",w)}},1e3);function g(w){ze[w?"unshift":"push"](()=>{m=w,n(6,m)})}return t.$$set=w=>{"applicationName"in w&&n(0,i=w.applicationName),"logoPath"in w&&n(1,r=w.logoPath),"logFilePath"in w&&n(9,o=w.logFilePath),"restoreLink"in w&&n(2,l=w.restoreLink)},t.$$.update=()=>{if(t.$$.dirty&1032)if(c){const w=c.trim().split(`
`);n(5,p=rf(w.pop()))}else a?n(5,p=""):n(5,p="Starting...")},[i,r,l,c,s,p,m,d,y,o,a,g]}class af extends Ge{constructor(e){super(),qe(this,e,of,nf,Le,{applicationName:0,logoPath:1,logFilePath:9,restoreLink:2})}}function ca(t,e,n){const i=t.slice();return i[20]=e[n],i}function da(t){let e,n=t[20].label+"",i,r,o,l,s,a;function u(){return t[12](t[20])}return{c(){e=O("button"),i=we(n),r=z(),b(e,"data-action",o=t[20].name),e.disabled=t[1],b(e,"type","button"),b(e,"class",l=`btn action btn-${t[20].style??"default"}`)},m(f,c){U(f,e,c),_(e,i),_(e,r),s||(a=fe(e,"click",u),s=!0)},p(f,c){t=f,c&1&&n!==(n=t[20].label+"")&&xe(i,n),c&1&&o!==(o=t[20].name)&&b(e,"data-action",o),c&2&&(e.disabled=t[1]),c&1&&l!==(l=`btn action btn-${t[20].style??"default"}`)&&b(e,"class",l)},d(f){f&&X(e),s=!1,a()}}}function lf(t){let e,n,i,r=be(t[0]),o=[];for(let a=0;a<r.length;a+=1)o[a]=da(ca(t,r,a));const l=t[11].default,s=Ro(l,t,t[10],null);return{c(){e=O("div");for(let a=0;a<o.length;a+=1)o[a].c();n=z(),s&&s.c(),b(e,"class","button-container"),le(e,"padding-top","10px")},m(a,u){U(a,e,u);for(let f=0;f<o.length;f+=1)o[f]&&o[f].m(e,null);t[13](e),U(a,n,u),s&&s.m(a,u),i=!0},p(a,[u]){if(u&11){r=be(a[0]);let f;for(f=0;f<r.length;f+=1){const c=ca(a,r,f);o[f]?o[f].p(c,u):(o[f]=da(c),o[f].c(),o[f].m(e,null))}for(;f<o.length;f+=1)o[f].d(1);o.length=r.length}s&&s.p&&(!i||u&1024)&&xo(s,l,a,a[10],i?Fo(l,a[10],u,null):Wo(a[10]),null)},i(a){i||(We(s,a),i=!0)},o(a){Ue(s,a),i=!1},d(a){a&&(X(e),X(n)),sn(o,a),t[13](null),s&&s.d(a)}}}function sf(t,e,n){let{$$slots:i={},$$scope:r}=e;const o=rr();let{params:l}=e,{fetch:s}=e,a,{loadLayout:u=k=>{It.get(scope,type,layoutProfileId,k,!1)}}=e,{validate:f=()=>!0}=e,c=!1,p=[],m;l.layoutProfiles,un(async()=>{var L;await d(),await dn(),o("ready");const k=document.querySelector("#layout-buttons");m&&k&&(l.inModal||l.replaceButtons)&&((L=k.closest(".modal-body"))==null||L.classList.add("modal-layout-manager"),k.appendChild(m))});async function d(){return tt.notify("Loading..."),new Promise((k,L)=>{u(T=>{n(9,a=T),tt.notify(!1),k(),l.afterRender&&l.afterRender()})})}function y(){n(1,c=!0);const k=s();if(!f(k)){n(1,c=!1);return}if(tt.notify("Saving..."),l.inModal&&!l.getActiveLayoutProfileId()){g(!0);return}It.set(l.scope,l.type,l.relatedScope,l.layoutProfileId,k,()=>{tt.notify("Saved","success",2e3),g(!1),n(1,c=!1),l.inModal||d()})}function g(k){l.onUpdate&&l.onUpdate(k)}function w(){l.inModal||d()}function E(){tt.confirm("Are you sure you want to reset this layout?",()=>{var k;It.resetToDefault(l.scope,l.type,l.relatedScope,(k=a.storedProfile)==null?void 0:k.id,()=>{g(!0),w()})})}function D(k){switch(k.name){case"save":y();break;case"cancel":w();break;case"reset":E();break;case"fullEdit":window.open(`#Admin/layouts/scope=${l.scope}&type=${l.type}${l.relatedScope?"&relatedScope="+l.relatedScope:""}${l.layoutProfileId?"&layoutProfileId="+l.layoutProfileId:""}`,"_blank");break}}const h=k=>D(k);function C(k){ze[k?"unshift":"push"](()=>{m=k,n(2,m)})}return t.$$set=k=>{"params"in k&&n(4,l=k.params),"fetch"in k&&n(5,s=k.fetch),"loadLayout"in k&&n(6,u=k.loadLayout),"validate"in k&&n(7,f=k.validate),"$$scope"in k&&n(10,r=k.$$scope)},t.$$.update=()=>{if(t.$$.dirty&529){if(n(0,p=[{name:"cancel",label:q.translate("Cancel","labels")}]),l.inModal){let k=bi.get();k&&k.user&&k.user.isAdmin&&p.unshift({name:"fullEdit",label:q.translate("Full Edit","labels","LayoutManager")})}(!l.inModal||a!=null&&a.canEdit)&&p.unshift({name:"save",label:q.translate("Save","labels"),style:"primary"}),a&&a.storedProfile&&a.storedProfile.id===l.layoutProfileId&&a.canEdit&&p.push({name:"reset",label:q.translate("reset","labels","LayoutManager")})}},[p,c,m,D,l,s,u,f,y,a,r,i,h,C]}let pa=class extends Ge{constructor(e){super(),qe(this,e,sf,lf,Le,{params:4,fetch:5,loadLayout:6,validate:7,save:8})}get save(){return this.$$.ctx[8]}};/**!
 * Sortable 1.15.6
 * @author	RubaXa   <trash@rubaxa.org>
 * @author	owenm    <owen23355@gmail.com>
 * @license MIT
 */function ha(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),n.push.apply(n,i)}return n}function St(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?ha(Object(n),!0).forEach(function(i){uf(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ha(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function wi(t){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?wi=function(e){return typeof e}:wi=function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},wi(t)}function uf(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Pt(){return Pt=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},Pt.apply(this,arguments)}function ff(t,e){if(t==null)return{};var n={},i=Object.keys(t),r,o;for(o=0;o<i.length;o++)r=i[o],!(e.indexOf(r)>=0)&&(n[r]=t[r]);return n}function cf(t,e){if(t==null)return{};var n=ff(t,e),i,r;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(r=0;r<o.length;r++)i=o[r],!(e.indexOf(i)>=0)&&Object.prototype.propertyIsEnumerable.call(t,i)&&(n[i]=t[i])}return n}var df="1.15.6";function Nt(t){if(typeof window<"u"&&window.navigator)return!!navigator.userAgent.match(t)}var Mt=Nt(/(?:Trident.*rv[ :]?11\.|msie|iemobile|Windows Phone)/i),zn=Nt(/Edge/i),ma=Nt(/firefox/i),qn=Nt(/safari/i)&&!Nt(/chrome/i)&&!Nt(/android/i),cr=Nt(/iP(ad|od|hone)/i),ga=Nt(/chrome/i)&&Nt(/android/i),va={capture:!1,passive:!1};function he(t,e,n){t.addEventListener(e,n,!Mt&&va)}function pe(t,e,n){t.removeEventListener(e,n,!Mt&&va)}function _i(t,e){if(e){if(e[0]===">"&&(e=e.substring(1)),t)try{if(t.matches)return t.matches(e);if(t.msMatchesSelector)return t.msMatchesSelector(e);if(t.webkitMatchesSelector)return t.webkitMatchesSelector(e)}catch{return!1}return!1}}function ba(t){return t.host&&t!==document&&t.host.nodeType?t.host:t.parentNode}function bt(t,e,n,i){if(t){n=n||document;do{if(e!=null&&(e[0]===">"?t.parentNode===n&&_i(t,e):_i(t,e))||i&&t===n)return t;if(t===n)break}while(t=ba(t))}return null}var ya=/\s+/g;function lt(t,e,n){if(t&&e)if(t.classList)t.classList[n?"add":"remove"](e);else{var i=(" "+t.className+" ").replace(ya," ").replace(" "+e+" "," ");t.className=(i+(n?" "+e:"")).replace(ya," ")}}function ie(t,e,n){var i=t&&t.style;if(i){if(n===void 0)return document.defaultView&&document.defaultView.getComputedStyle?n=document.defaultView.getComputedStyle(t,""):t.currentStyle&&(n=t.currentStyle),e===void 0?n:n[e];!(e in i)&&e.indexOf("webkit")===-1&&(e="-webkit-"+e),i[e]=n+(typeof n=="string"?"":"px")}}function gn(t,e){var n="";if(typeof t=="string")n=t;else do{var i=ie(t,"transform");i&&i!=="none"&&(n=i+" "+n)}while(!e&&(t=t.parentNode));var r=window.DOMMatrix||window.WebKitCSSMatrix||window.CSSMatrix||window.MSCSSMatrix;return r&&new r(n)}function wa(t,e,n){if(t){var i=t.getElementsByTagName(e),r=0,o=i.length;if(n)for(;r<o;r++)n(i[r],r);return i}return[]}function Ct(){var t=document.scrollingElement;return t||document.documentElement}function Ie(t,e,n,i,r){if(!(!t.getBoundingClientRect&&t!==window)){var o,l,s,a,u,f,c;if(t!==window&&t.parentNode&&t!==Ct()?(o=t.getBoundingClientRect(),l=o.top,s=o.left,a=o.bottom,u=o.right,f=o.height,c=o.width):(l=0,s=0,a=window.innerHeight,u=window.innerWidth,f=window.innerHeight,c=window.innerWidth),(e||n)&&t!==window&&(r=r||t.parentNode,!Mt))do if(r&&r.getBoundingClientRect&&(ie(r,"transform")!=="none"||n&&ie(r,"position")!=="static")){var p=r.getBoundingClientRect();l-=p.top+parseInt(ie(r,"border-top-width")),s-=p.left+parseInt(ie(r,"border-left-width")),a=l+o.height,u=s+o.width;break}while(r=r.parentNode);if(i&&t!==window){var m=gn(r||t),d=m&&m.a,y=m&&m.d;m&&(l/=y,s/=d,c/=d,f/=y,a=l+f,u=s+c)}return{top:l,left:s,bottom:a,right:u,width:c,height:f}}}function _a(t,e,n){for(var i=zt(t,!0),r=Ie(t)[e];i;){var o=Ie(i)[n],l=void 0;if(l=r>=o,!l)return i;if(i===Ct())break;i=zt(i,!1)}return!1}function vn(t,e,n,i){for(var r=0,o=0,l=t.children;o<l.length;){if(l[o].style.display!=="none"&&l[o]!==ee.ghost&&(i||l[o]!==ee.dragged)&&bt(l[o],n.draggable,t,!1)){if(r===e)return l[o];r++}o++}return null}function dr(t,e){for(var n=t.lastElementChild;n&&(n===ee.ghost||ie(n,"display")==="none"||e&&!_i(n,e));)n=n.previousElementSibling;return n||null}function pt(t,e){var n=0;if(!t||!t.parentNode)return-1;for(;t=t.previousElementSibling;)t.nodeName.toUpperCase()!=="TEMPLATE"&&t!==ee.clone&&(!e||_i(t,e))&&n++;return n}function Ea(t){var e=0,n=0,i=Ct();if(t)do{var r=gn(t),o=r.a,l=r.d;e+=t.scrollLeft*o,n+=t.scrollTop*l}while(t!==i&&(t=t.parentNode));return[e,n]}function pf(t,e){for(var n in t)if(t.hasOwnProperty(n)){for(var i in e)if(e.hasOwnProperty(i)&&e[i]===t[n][i])return Number(n)}return-1}function zt(t,e){if(!t||!t.getBoundingClientRect)return Ct();var n=t,i=!1;do if(n.clientWidth<n.scrollWidth||n.clientHeight<n.scrollHeight){var r=ie(n);if(n.clientWidth<n.scrollWidth&&(r.overflowX=="auto"||r.overflowX=="scroll")||n.clientHeight<n.scrollHeight&&(r.overflowY=="auto"||r.overflowY=="scroll")){if(!n.getBoundingClientRect||n===document.body)return Ct();if(i||e)return n;i=!0}}while(n=n.parentNode);return Ct()}function hf(t,e){if(t&&e)for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t}function pr(t,e){return Math.round(t.top)===Math.round(e.top)&&Math.round(t.left)===Math.round(e.left)&&Math.round(t.height)===Math.round(e.height)&&Math.round(t.width)===Math.round(e.width)}var Gn;function ka(t,e){return function(){if(!Gn){var n=arguments,i=this;n.length===1?t.call(i,n[0]):t.apply(i,n),Gn=setTimeout(function(){Gn=void 0},e)}}}function mf(){clearTimeout(Gn),Gn=void 0}function Da(t,e,n){t.scrollLeft+=e,t.scrollTop+=n}function Sa(t){var e=window.Polymer,n=window.jQuery||window.Zepto;return e&&e.dom?e.dom(t).cloneNode(!0):n?n(t).clone(!0)[0]:t.cloneNode(!0)}function Ca(t,e,n){var i={};return Array.from(t.children).forEach(function(r){var o,l,s,a;if(!(!bt(r,e.draggable,t,!1)||r.animated||r===n)){var u=Ie(r);i.left=Math.min((o=i.left)!==null&&o!==void 0?o:1/0,u.left),i.top=Math.min((l=i.top)!==null&&l!==void 0?l:1/0,u.top),i.right=Math.max((s=i.right)!==null&&s!==void 0?s:-1/0,u.right),i.bottom=Math.max((a=i.bottom)!==null&&a!==void 0?a:-1/0,u.bottom)}}),i.width=i.right-i.left,i.height=i.bottom-i.top,i.x=i.left,i.y=i.top,i}var nt="Sortable"+new Date().getTime();function gf(){var t=[],e;return{captureAnimationState:function(){if(t=[],!!this.options.animation){var i=[].slice.call(this.el.children);i.forEach(function(r){if(!(ie(r,"display")==="none"||r===ee.ghost)){t.push({target:r,rect:Ie(r)});var o=St({},t[t.length-1].rect);if(r.thisAnimationDuration){var l=gn(r,!0);l&&(o.top-=l.f,o.left-=l.e)}r.fromRect=o}})}},addAnimationState:function(i){t.push(i)},removeAnimationState:function(i){t.splice(pf(t,{target:i}),1)},animateAll:function(i){var r=this;if(!this.options.animation){clearTimeout(e),typeof i=="function"&&i();return}var o=!1,l=0;t.forEach(function(s){var a=0,u=s.target,f=u.fromRect,c=Ie(u),p=u.prevFromRect,m=u.prevToRect,d=s.rect,y=gn(u,!0);y&&(c.top-=y.f,c.left-=y.e),u.toRect=c,u.thisAnimationDuration&&pr(p,c)&&!pr(f,c)&&(d.top-c.top)/(d.left-c.left)===(f.top-c.top)/(f.left-c.left)&&(a=bf(d,p,m,r.options)),pr(c,f)||(u.prevFromRect=f,u.prevToRect=c,a||(a=r.options.animation),r.animate(u,d,c,a)),a&&(o=!0,l=Math.max(l,a),clearTimeout(u.animationResetTimer),u.animationResetTimer=setTimeout(function(){u.animationTime=0,u.prevFromRect=null,u.fromRect=null,u.prevToRect=null,u.thisAnimationDuration=null},a),u.thisAnimationDuration=a)}),clearTimeout(e),o?e=setTimeout(function(){typeof i=="function"&&i()},l):typeof i=="function"&&i(),t=[]},animate:function(i,r,o,l){if(l){ie(i,"transition",""),ie(i,"transform","");var s=gn(this.el),a=s&&s.a,u=s&&s.d,f=(r.left-o.left)/(a||1),c=(r.top-o.top)/(u||1);i.animatingX=!!f,i.animatingY=!!c,ie(i,"transform","translate3d("+f+"px,"+c+"px,0)"),this.forRepaintDummy=vf(i),ie(i,"transition","transform "+l+"ms"+(this.options.easing?" "+this.options.easing:"")),ie(i,"transform","translate3d(0,0,0)"),typeof i.animated=="number"&&clearTimeout(i.animated),i.animated=setTimeout(function(){ie(i,"transition",""),ie(i,"transform",""),i.animated=!1,i.animatingX=!1,i.animatingY=!1},l)}}}}function vf(t){return t.offsetWidth}function bf(t,e,n,i){return Math.sqrt(Math.pow(e.top-t.top,2)+Math.pow(e.left-t.left,2))/Math.sqrt(Math.pow(e.top-n.top,2)+Math.pow(e.left-n.left,2))*i.animation}var bn=[],hr={initializeByDefault:!0},Vn={mount:function(e){for(var n in hr)hr.hasOwnProperty(n)&&!(n in e)&&(e[n]=hr[n]);bn.forEach(function(i){if(i.pluginName===e.pluginName)throw"Sortable: Cannot mount plugin ".concat(e.pluginName," more than once")}),bn.push(e)},pluginEvent:function(e,n,i){var r=this;this.eventCanceled=!1,i.cancel=function(){r.eventCanceled=!0};var o=e+"Global";bn.forEach(function(l){n[l.pluginName]&&(n[l.pluginName][o]&&n[l.pluginName][o](St({sortable:n},i)),n.options[l.pluginName]&&n[l.pluginName][e]&&n[l.pluginName][e](St({sortable:n},i)))})},initializePlugins:function(e,n,i,r){bn.forEach(function(s){var a=s.pluginName;if(!(!e.options[a]&&!s.initializeByDefault)){var u=new s(e,n,e.options);u.sortable=e,u.options=e.options,e[a]=u,Pt(i,u.defaults)}});for(var o in e.options)if(e.options.hasOwnProperty(o)){var l=this.modifyOption(e,o,e.options[o]);typeof l<"u"&&(e.options[o]=l)}},getEventProperties:function(e,n){var i={};return bn.forEach(function(r){typeof r.eventProperties=="function"&&Pt(i,r.eventProperties.call(n[r.pluginName],e))}),i},modifyOption:function(e,n,i){var r;return bn.forEach(function(o){e[o.pluginName]&&o.optionListeners&&typeof o.optionListeners[n]=="function"&&(r=o.optionListeners[n].call(e[o.pluginName],i))}),r}};function yf(t){var e=t.sortable,n=t.rootEl,i=t.name,r=t.targetEl,o=t.cloneEl,l=t.toEl,s=t.fromEl,a=t.oldIndex,u=t.newIndex,f=t.oldDraggableIndex,c=t.newDraggableIndex,p=t.originalEvent,m=t.putSortable,d=t.extraEventProperties;if(e=e||n&&n[nt],!!e){var y,g=e.options,w="on"+i.charAt(0).toUpperCase()+i.substr(1);window.CustomEvent&&!Mt&&!zn?y=new CustomEvent(i,{bubbles:!0,cancelable:!0}):(y=document.createEvent("Event"),y.initEvent(i,!0,!0)),y.to=l||n,y.from=s||n,y.item=r||n,y.clone=o,y.oldIndex=a,y.newIndex=u,y.oldDraggableIndex=f,y.newDraggableIndex=c,y.originalEvent=p,y.pullMode=m?m.lastPutMode:void 0;var E=St(St({},d),Vn.getEventProperties(i,e));for(var D in E)y[D]=E[D];n&&n.dispatchEvent(y),g[w]&&g[w].call(e,y)}}var wf=["evt"],it=function(e,n){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},r=i.evt,o=cf(i,wf);Vn.pluginEvent.bind(ee)(e,n,St({dragEl:j,parentEl:Te,ghostEl:oe,rootEl:ke,nextEl:Jt,lastDownEl:Ei,cloneEl:Se,cloneHidden:qt,dragStarted:Un,putSortable:Ve,activeSortable:ee.active,originalEvent:r,oldIndex:yn,oldDraggableIndex:Xn,newIndex:st,newDraggableIndex:Gt,hideGhostForTarget:Na,unhideGhostForTarget:Ma,cloneNowHidden:function(){qt=!0},cloneNowShown:function(){qt=!1},dispatchSortableEvent:function(s){Ke({sortable:n,name:s,originalEvent:r})}},o))};function Ke(t){yf(St({putSortable:Ve,cloneEl:Se,targetEl:j,rootEl:ke,oldIndex:yn,oldDraggableIndex:Xn,newIndex:st,newDraggableIndex:Gt},t))}var j,Te,oe,ke,Jt,Ei,Se,qt,yn,st,Xn,Gt,ki,Ve,wn=!1,Di=!1,Si=[],Kt,yt,mr,gr,Ta,Oa,Un,_n,Yn,Jn=!1,Ci=!1,Ti,Ye,vr=[],br=!1,Oi=[],Ai=typeof document<"u",Li=cr,Aa=zn||Mt?"cssFloat":"float",_f=Ai&&!ga&&!cr&&"draggable"in document.createElement("div"),La=function(){if(Ai){if(Mt)return!1;var t=document.createElement("x");return t.style.cssText="pointer-events:auto",t.style.pointerEvents==="auto"}}(),Ia=function(e,n){var i=ie(e),r=parseInt(i.width)-parseInt(i.paddingLeft)-parseInt(i.paddingRight)-parseInt(i.borderLeftWidth)-parseInt(i.borderRightWidth),o=vn(e,0,n),l=vn(e,1,n),s=o&&ie(o),a=l&&ie(l),u=s&&parseInt(s.marginLeft)+parseInt(s.marginRight)+Ie(o).width,f=a&&parseInt(a.marginLeft)+parseInt(a.marginRight)+Ie(l).width;if(i.display==="flex")return i.flexDirection==="column"||i.flexDirection==="column-reverse"?"vertical":"horizontal";if(i.display==="grid")return i.gridTemplateColumns.split(" ").length<=1?"vertical":"horizontal";if(o&&s.float&&s.float!=="none"){var c=s.float==="left"?"left":"right";return l&&(a.clear==="both"||a.clear===c)?"vertical":"horizontal"}return o&&(s.display==="block"||s.display==="flex"||s.display==="table"||s.display==="grid"||u>=r&&i[Aa]==="none"||l&&i[Aa]==="none"&&u+f>r)?"vertical":"horizontal"},Ef=function(e,n,i){var r=i?e.left:e.top,o=i?e.right:e.bottom,l=i?e.width:e.height,s=i?n.left:n.top,a=i?n.right:n.bottom,u=i?n.width:n.height;return r===s||o===a||r+l/2===s+u/2},kf=function(e,n){var i;return Si.some(function(r){var o=r[nt].options.emptyInsertThreshold;if(!(!o||dr(r))){var l=Ie(r),s=e>=l.left-o&&e<=l.right+o,a=n>=l.top-o&&n<=l.bottom+o;if(s&&a)return i=r}}),i},Pa=function(e){function n(o,l){return function(s,a,u,f){var c=s.options.group.name&&a.options.group.name&&s.options.group.name===a.options.group.name;if(o==null&&(l||c))return!0;if(o==null||o===!1)return!1;if(l&&o==="clone")return o;if(typeof o=="function")return n(o(s,a,u,f),l)(s,a,u,f);var p=(l?s:a).options.group.name;return o===!0||typeof o=="string"&&o===p||o.join&&o.indexOf(p)>-1}}var i={},r=e.group;(!r||wi(r)!="object")&&(r={name:r}),i.name=r.name,i.checkPull=n(r.pull,!0),i.checkPut=n(r.put),i.revertClone=r.revertClone,e.group=i},Na=function(){!La&&oe&&ie(oe,"display","none")},Ma=function(){!La&&oe&&ie(oe,"display","")};Ai&&!ga&&document.addEventListener("click",function(t){if(Di)return t.preventDefault(),t.stopPropagation&&t.stopPropagation(),t.stopImmediatePropagation&&t.stopImmediatePropagation(),Di=!1,!1},!0);var Qt=function(e){if(j){e=e.touches?e.touches[0]:e;var n=kf(e.clientX,e.clientY);if(n){var i={};for(var r in e)e.hasOwnProperty(r)&&(i[r]=e[r]);i.target=i.rootEl=n,i.preventDefault=void 0,i.stopPropagation=void 0,n[nt]._onDragOver(i)}}},Df=function(e){j&&j.parentNode[nt]._isOutsideThisEl(e.target)};function ee(t,e){if(!(t&&t.nodeType&&t.nodeType===1))throw"Sortable: `el` must be an HTMLElement, not ".concat({}.toString.call(t));this.el=t,this.options=e=Pt({},e),t[nt]=this;var n={group:null,sort:!0,disabled:!1,store:null,handle:null,draggable:/^[uo]l$/i.test(t.nodeName)?">li":">*",swapThreshold:1,invertSwap:!1,invertedSwapThreshold:null,removeCloneOnHide:!0,direction:function(){return Ia(t,this.options)},ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",dragClass:"sortable-drag",ignore:"a, img",filter:null,preventOnFilter:!0,animation:0,easing:null,setData:function(l,s){l.setData("Text",s.textContent)},dropBubble:!1,dragoverBubble:!1,dataIdAttr:"data-id",delay:0,delayOnTouchOnly:!1,touchStartThreshold:(Number.parseInt?Number:window).parseInt(window.devicePixelRatio,10)||1,forceFallback:!1,fallbackClass:"sortable-fallback",fallbackOnBody:!1,fallbackTolerance:0,fallbackOffset:{x:0,y:0},supportPointer:ee.supportPointer!==!1&&"PointerEvent"in window&&(!qn||cr),emptyInsertThreshold:5};Vn.initializePlugins(this,t,n);for(var i in n)!(i in e)&&(e[i]=n[i]);Pa(e);for(var r in this)r.charAt(0)==="_"&&typeof this[r]=="function"&&(this[r]=this[r].bind(this));this.nativeDraggable=e.forceFallback?!1:_f,this.nativeDraggable&&(this.options.touchStartThreshold=1),e.supportPointer?he(t,"pointerdown",this._onTapStart):(he(t,"mousedown",this._onTapStart),he(t,"touchstart",this._onTapStart)),this.nativeDraggable&&(he(t,"dragover",this),he(t,"dragenter",this)),Si.push(this.el),e.store&&e.store.get&&this.sort(e.store.get(this)||[]),Pt(this,gf())}ee.prototype={constructor:ee,_isOutsideThisEl:function(e){!this.el.contains(e)&&e!==this.el&&(_n=null)},_getDirection:function(e,n){return typeof this.options.direction=="function"?this.options.direction.call(this,e,n,j):this.options.direction},_onTapStart:function(e){if(e.cancelable){var n=this,i=this.el,r=this.options,o=r.preventOnFilter,l=e.type,s=e.touches&&e.touches[0]||e.pointerType&&e.pointerType==="touch"&&e,a=(s||e).target,u=e.target.shadowRoot&&(e.path&&e.path[0]||e.composedPath&&e.composedPath()[0])||a,f=r.filter;if(Pf(i),!j&&!(/mousedown|pointerdown/.test(l)&&e.button!==0||r.disabled)&&!u.isContentEditable&&!(!this.nativeDraggable&&qn&&a&&a.tagName.toUpperCase()==="SELECT")&&(a=bt(a,r.draggable,i,!1),!(a&&a.animated)&&Ei!==a)){if(yn=pt(a),Xn=pt(a,r.draggable),typeof f=="function"){if(f.call(this,e,a,this)){Ke({sortable:n,rootEl:u,name:"filter",targetEl:a,toEl:i,fromEl:i}),it("filter",n,{evt:e}),o&&e.preventDefault();return}}else if(f&&(f=f.split(",").some(function(c){if(c=bt(u,c.trim(),i,!1),c)return Ke({sortable:n,rootEl:c,name:"filter",targetEl:a,fromEl:i,toEl:i}),it("filter",n,{evt:e}),!0}),f)){o&&e.preventDefault();return}r.handle&&!bt(u,r.handle,i,!1)||this._prepareDragStart(e,s,a)}}},_prepareDragStart:function(e,n,i){var r=this,o=r.el,l=r.options,s=o.ownerDocument,a;if(i&&!j&&i.parentNode===o){var u=Ie(i);if(ke=o,j=i,Te=j.parentNode,Jt=j.nextSibling,Ei=i,ki=l.group,ee.dragged=j,Kt={target:j,clientX:(n||e).clientX,clientY:(n||e).clientY},Ta=Kt.clientX-u.left,Oa=Kt.clientY-u.top,this._lastX=(n||e).clientX,this._lastY=(n||e).clientY,j.style["will-change"]="all",a=function(){if(it("delayEnded",r,{evt:e}),ee.eventCanceled){r._onDrop();return}r._disableDelayedDragEvents(),!ma&&r.nativeDraggable&&(j.draggable=!0),r._triggerDragStart(e,n),Ke({sortable:r,name:"choose",originalEvent:e}),lt(j,l.chosenClass,!0)},l.ignore.split(",").forEach(function(f){wa(j,f.trim(),yr)}),he(s,"dragover",Qt),he(s,"mousemove",Qt),he(s,"touchmove",Qt),l.supportPointer?(he(s,"pointerup",r._onDrop),!this.nativeDraggable&&he(s,"pointercancel",r._onDrop)):(he(s,"mouseup",r._onDrop),he(s,"touchend",r._onDrop),he(s,"touchcancel",r._onDrop)),ma&&this.nativeDraggable&&(this.options.touchStartThreshold=4,j.draggable=!0),it("delayStart",this,{evt:e}),l.delay&&(!l.delayOnTouchOnly||n)&&(!this.nativeDraggable||!(zn||Mt))){if(ee.eventCanceled){this._onDrop();return}l.supportPointer?(he(s,"pointerup",r._disableDelayedDrag),he(s,"pointercancel",r._disableDelayedDrag)):(he(s,"mouseup",r._disableDelayedDrag),he(s,"touchend",r._disableDelayedDrag),he(s,"touchcancel",r._disableDelayedDrag)),he(s,"mousemove",r._delayedDragTouchMoveHandler),he(s,"touchmove",r._delayedDragTouchMoveHandler),l.supportPointer&&he(s,"pointermove",r._delayedDragTouchMoveHandler),r._dragStartTimer=setTimeout(a,l.delay)}else a()}},_delayedDragTouchMoveHandler:function(e){var n=e.touches?e.touches[0]:e;Math.max(Math.abs(n.clientX-this._lastX),Math.abs(n.clientY-this._lastY))>=Math.floor(this.options.touchStartThreshold/(this.nativeDraggable&&window.devicePixelRatio||1))&&this._disableDelayedDrag()},_disableDelayedDrag:function(){j&&yr(j),clearTimeout(this._dragStartTimer),this._disableDelayedDragEvents()},_disableDelayedDragEvents:function(){var e=this.el.ownerDocument;pe(e,"mouseup",this._disableDelayedDrag),pe(e,"touchend",this._disableDelayedDrag),pe(e,"touchcancel",this._disableDelayedDrag),pe(e,"pointerup",this._disableDelayedDrag),pe(e,"pointercancel",this._disableDelayedDrag),pe(e,"mousemove",this._delayedDragTouchMoveHandler),pe(e,"touchmove",this._delayedDragTouchMoveHandler),pe(e,"pointermove",this._delayedDragTouchMoveHandler)},_triggerDragStart:function(e,n){n=n||e.pointerType=="touch"&&e,!this.nativeDraggable||n?this.options.supportPointer?he(document,"pointermove",this._onTouchMove):n?he(document,"touchmove",this._onTouchMove):he(document,"mousemove",this._onTouchMove):(he(j,"dragend",this),he(ke,"dragstart",this._onDragStart));try{document.selection?Pi(function(){document.selection.empty()}):window.getSelection().removeAllRanges()}catch{}},_dragStarted:function(e,n){if(wn=!1,ke&&j){it("dragStarted",this,{evt:n}),this.nativeDraggable&&he(document,"dragover",Df);var i=this.options;!e&&lt(j,i.dragClass,!1),lt(j,i.ghostClass,!0),ee.active=this,e&&this._appendGhost(),Ke({sortable:this,name:"start",originalEvent:n})}else this._nulling()},_emulateDragOver:function(){if(yt){this._lastX=yt.clientX,this._lastY=yt.clientY,Na();for(var e=document.elementFromPoint(yt.clientX,yt.clientY),n=e;e&&e.shadowRoot&&(e=e.shadowRoot.elementFromPoint(yt.clientX,yt.clientY),e!==n);)n=e;if(j.parentNode[nt]._isOutsideThisEl(e),n)do{if(n[nt]){var i=void 0;if(i=n[nt]._onDragOver({clientX:yt.clientX,clientY:yt.clientY,target:e,rootEl:n}),i&&!this.options.dragoverBubble)break}e=n}while(n=ba(n));Ma()}},_onTouchMove:function(e){if(Kt){var n=this.options,i=n.fallbackTolerance,r=n.fallbackOffset,o=e.touches?e.touches[0]:e,l=oe&&gn(oe,!0),s=oe&&l&&l.a,a=oe&&l&&l.d,u=Li&&Ye&&Ea(Ye),f=(o.clientX-Kt.clientX+r.x)/(s||1)+(u?u[0]-vr[0]:0)/(s||1),c=(o.clientY-Kt.clientY+r.y)/(a||1)+(u?u[1]-vr[1]:0)/(a||1);if(!ee.active&&!wn){if(i&&Math.max(Math.abs(o.clientX-this._lastX),Math.abs(o.clientY-this._lastY))<i)return;this._onDragStart(e,!0)}if(oe){l?(l.e+=f-(mr||0),l.f+=c-(gr||0)):l={a:1,b:0,c:0,d:1,e:f,f:c};var p="matrix(".concat(l.a,",").concat(l.b,",").concat(l.c,",").concat(l.d,",").concat(l.e,",").concat(l.f,")");ie(oe,"webkitTransform",p),ie(oe,"mozTransform",p),ie(oe,"msTransform",p),ie(oe,"transform",p),mr=f,gr=c,yt=o}e.cancelable&&e.preventDefault()}},_appendGhost:function(){if(!oe){var e=this.options.fallbackOnBody?document.body:ke,n=Ie(j,!0,Li,!0,e),i=this.options;if(Li){for(Ye=e;ie(Ye,"position")==="static"&&ie(Ye,"transform")==="none"&&Ye!==document;)Ye=Ye.parentNode;Ye!==document.body&&Ye!==document.documentElement?(Ye===document&&(Ye=Ct()),n.top+=Ye.scrollTop,n.left+=Ye.scrollLeft):Ye=Ct(),vr=Ea(Ye)}oe=j.cloneNode(!0),lt(oe,i.ghostClass,!1),lt(oe,i.fallbackClass,!0),lt(oe,i.dragClass,!0),ie(oe,"transition",""),ie(oe,"transform",""),ie(oe,"box-sizing","border-box"),ie(oe,"margin",0),ie(oe,"top",n.top),ie(oe,"left",n.left),ie(oe,"width",n.width),ie(oe,"height",n.height),ie(oe,"opacity","0.8"),ie(oe,"position",Li?"absolute":"fixed"),ie(oe,"zIndex","100000"),ie(oe,"pointerEvents","none"),ee.ghost=oe,e.appendChild(oe),ie(oe,"transform-origin",Ta/parseInt(oe.style.width)*100+"% "+Oa/parseInt(oe.style.height)*100+"%")}},_onDragStart:function(e,n){var i=this,r=e.dataTransfer,o=i.options;if(it("dragStart",this,{evt:e}),ee.eventCanceled){this._onDrop();return}it("setupClone",this),ee.eventCanceled||(Se=Sa(j),Se.removeAttribute("id"),Se.draggable=!1,Se.style["will-change"]="",this._hideClone(),lt(Se,this.options.chosenClass,!1),ee.clone=Se),i.cloneId=Pi(function(){it("clone",i),!ee.eventCanceled&&(i.options.removeCloneOnHide||ke.insertBefore(Se,j),i._hideClone(),Ke({sortable:i,name:"clone"}))}),!n&&lt(j,o.dragClass,!0),n?(Di=!0,i._loopId=setInterval(i._emulateDragOver,50)):(pe(document,"mouseup",i._onDrop),pe(document,"touchend",i._onDrop),pe(document,"touchcancel",i._onDrop),r&&(r.effectAllowed="move",o.setData&&o.setData.call(i,r,j)),he(document,"drop",i),ie(j,"transform","translateZ(0)")),wn=!0,i._dragStartId=Pi(i._dragStarted.bind(i,n,e)),he(document,"selectstart",i),Un=!0,window.getSelection().removeAllRanges(),qn&&ie(document.body,"user-select","none")},_onDragOver:function(e){var n=this.el,i=e.target,r,o,l,s=this.options,a=s.group,u=ee.active,f=ki===a,c=s.sort,p=Ve||u,m,d=this,y=!1;if(br)return;function g(me,Re){it(me,d,St({evt:e,isOwner:f,axis:m?"vertical":"horizontal",revert:l,dragRect:r,targetRect:o,canSort:c,fromSortable:p,target:i,completed:E,onMove:function(_e,Ne){return Ii(ke,n,j,r,_e,Ie(_e),e,Ne)},changed:D},Re))}function w(){g("dragOverAnimationCapture"),d.captureAnimationState(),d!==p&&p.captureAnimationState()}function E(me){return g("dragOverCompleted",{insertion:me}),me&&(f?u._hideClone():u._showClone(d),d!==p&&(lt(j,Ve?Ve.options.ghostClass:u.options.ghostClass,!1),lt(j,s.ghostClass,!0)),Ve!==d&&d!==ee.active?Ve=d:d===ee.active&&Ve&&(Ve=null),p===d&&(d._ignoreWhileAnimating=i),d.animateAll(function(){g("dragOverAnimationComplete"),d._ignoreWhileAnimating=null}),d!==p&&(p.animateAll(),p._ignoreWhileAnimating=null)),(i===j&&!j.animated||i===n&&!i.animated)&&(_n=null),!s.dragoverBubble&&!e.rootEl&&i!==document&&(j.parentNode[nt]._isOutsideThisEl(e.target),!me&&Qt(e)),!s.dragoverBubble&&e.stopPropagation&&e.stopPropagation(),y=!0}function D(){st=pt(j),Gt=pt(j,s.draggable),Ke({sortable:d,name:"change",toEl:n,newIndex:st,newDraggableIndex:Gt,originalEvent:e})}if(e.preventDefault!==void 0&&e.cancelable&&e.preventDefault(),i=bt(i,s.draggable,n,!0),g("dragOver"),ee.eventCanceled)return y;if(j.contains(e.target)||i.animated&&i.animatingX&&i.animatingY||d._ignoreWhileAnimating===i)return E(!1);if(Di=!1,u&&!s.disabled&&(f?c||(l=Te!==ke):Ve===this||(this.lastPutMode=ki.checkPull(this,u,j,e))&&a.checkPut(this,u,j,e))){if(m=this._getDirection(e,i)==="vertical",r=Ie(j),g("dragOverValid"),ee.eventCanceled)return y;if(l)return Te=ke,w(),this._hideClone(),g("revert"),ee.eventCanceled||(Jt?ke.insertBefore(j,Jt):ke.appendChild(j)),E(!0);var h=dr(n,s.draggable);if(!h||Of(e,m,this)&&!h.animated){if(h===j)return E(!1);if(h&&n===e.target&&(i=h),i&&(o=Ie(i)),Ii(ke,n,j,r,i,o,e,!!i)!==!1)return w(),h&&h.nextSibling?n.insertBefore(j,h.nextSibling):n.appendChild(j),Te=n,D(),E(!0)}else if(h&&Tf(e,m,this)){var C=vn(n,0,s,!0);if(C===j)return E(!1);if(i=C,o=Ie(i),Ii(ke,n,j,r,i,o,e,!1)!==!1)return w(),n.insertBefore(j,C),Te=n,D(),E(!0)}else if(i.parentNode===n){o=Ie(i);var k=0,L,T=j.parentNode!==n,v=!Ef(j.animated&&j.toRect||r,i.animated&&i.toRect||o,m),S=m?"top":"left",I=_a(i,"top","top")||_a(j,"top","top"),M=I?I.scrollTop:void 0;_n!==i&&(L=o[S],Jn=!1,Ci=!v&&s.invertSwap||T),k=Af(e,i,o,m,v?1:s.swapThreshold,s.invertedSwapThreshold==null?s.swapThreshold:s.invertedSwapThreshold,Ci,_n===i);var H;if(k!==0){var W=pt(j);do W-=k,H=Te.children[W];while(H&&(ie(H,"display")==="none"||H===oe))}if(k===0||H===i)return E(!1);_n=i,Yn=k;var P=i.nextElementSibling,x=!1;x=k===1;var Z=Ii(ke,n,j,r,i,o,e,x);if(Z!==!1)return(Z===1||Z===-1)&&(x=Z===1),br=!0,setTimeout(Cf,30),w(),x&&!P?n.appendChild(j):i.parentNode.insertBefore(j,x?P:i),I&&Da(I,0,M-I.scrollTop),Te=j.parentNode,L!==void 0&&!Ci&&(Ti=Math.abs(L-Ie(i)[S])),D(),E(!0)}if(n.contains(j))return E(!1)}return!1},_ignoreWhileAnimating:null,_offMoveEvents:function(){pe(document,"mousemove",this._onTouchMove),pe(document,"touchmove",this._onTouchMove),pe(document,"pointermove",this._onTouchMove),pe(document,"dragover",Qt),pe(document,"mousemove",Qt),pe(document,"touchmove",Qt)},_offUpEvents:function(){var e=this.el.ownerDocument;pe(e,"mouseup",this._onDrop),pe(e,"touchend",this._onDrop),pe(e,"pointerup",this._onDrop),pe(e,"pointercancel",this._onDrop),pe(e,"touchcancel",this._onDrop),pe(document,"selectstart",this)},_onDrop:function(e){var n=this.el,i=this.options;if(st=pt(j),Gt=pt(j,i.draggable),it("drop",this,{evt:e}),Te=j&&j.parentNode,st=pt(j),Gt=pt(j,i.draggable),ee.eventCanceled){this._nulling();return}wn=!1,Ci=!1,Jn=!1,clearInterval(this._loopId),clearTimeout(this._dragStartTimer),wr(this.cloneId),wr(this._dragStartId),this.nativeDraggable&&(pe(document,"drop",this),pe(n,"dragstart",this._onDragStart)),this._offMoveEvents(),this._offUpEvents(),qn&&ie(document.body,"user-select",""),ie(j,"transform",""),e&&(Un&&(e.cancelable&&e.preventDefault(),!i.dropBubble&&e.stopPropagation()),oe&&oe.parentNode&&oe.parentNode.removeChild(oe),(ke===Te||Ve&&Ve.lastPutMode!=="clone")&&Se&&Se.parentNode&&Se.parentNode.removeChild(Se),j&&(this.nativeDraggable&&pe(j,"dragend",this),yr(j),j.style["will-change"]="",Un&&!wn&&lt(j,Ve?Ve.options.ghostClass:this.options.ghostClass,!1),lt(j,this.options.chosenClass,!1),Ke({sortable:this,name:"unchoose",toEl:Te,newIndex:null,newDraggableIndex:null,originalEvent:e}),ke!==Te?(st>=0&&(Ke({rootEl:Te,name:"add",toEl:Te,fromEl:ke,originalEvent:e}),Ke({sortable:this,name:"remove",toEl:Te,originalEvent:e}),Ke({rootEl:Te,name:"sort",toEl:Te,fromEl:ke,originalEvent:e}),Ke({sortable:this,name:"sort",toEl:Te,originalEvent:e})),Ve&&Ve.save()):st!==yn&&st>=0&&(Ke({sortable:this,name:"update",toEl:Te,originalEvent:e}),Ke({sortable:this,name:"sort",toEl:Te,originalEvent:e})),ee.active&&((st==null||st===-1)&&(st=yn,Gt=Xn),Ke({sortable:this,name:"end",toEl:Te,originalEvent:e}),this.save()))),this._nulling()},_nulling:function(){it("nulling",this),ke=j=Te=oe=Jt=Se=Ei=qt=Kt=yt=Un=st=Gt=yn=Xn=_n=Yn=Ve=ki=ee.dragged=ee.ghost=ee.clone=ee.active=null,Oi.forEach(function(e){e.checked=!0}),Oi.length=mr=gr=0},handleEvent:function(e){switch(e.type){case"drop":case"dragend":this._onDrop(e);break;case"dragenter":case"dragover":j&&(this._onDragOver(e),Sf(e));break;case"selectstart":e.preventDefault();break}},toArray:function(){for(var e=[],n,i=this.el.children,r=0,o=i.length,l=this.options;r<o;r++)n=i[r],bt(n,l.draggable,this.el,!1)&&e.push(n.getAttribute(l.dataIdAttr)||If(n));return e},sort:function(e,n){var i={},r=this.el;this.toArray().forEach(function(o,l){var s=r.children[l];bt(s,this.options.draggable,r,!1)&&(i[o]=s)},this),n&&this.captureAnimationState(),e.forEach(function(o){i[o]&&(r.removeChild(i[o]),r.appendChild(i[o]))}),n&&this.animateAll()},save:function(){var e=this.options.store;e&&e.set&&e.set(this)},closest:function(e,n){return bt(e,n||this.options.draggable,this.el,!1)},option:function(e,n){var i=this.options;if(n===void 0)return i[e];var r=Vn.modifyOption(this,e,n);typeof r<"u"?i[e]=r:i[e]=n,e==="group"&&Pa(i)},destroy:function(){it("destroy",this);var e=this.el;e[nt]=null,pe(e,"mousedown",this._onTapStart),pe(e,"touchstart",this._onTapStart),pe(e,"pointerdown",this._onTapStart),this.nativeDraggable&&(pe(e,"dragover",this),pe(e,"dragenter",this)),Array.prototype.forEach.call(e.querySelectorAll("[draggable]"),function(n){n.removeAttribute("draggable")}),this._onDrop(),this._disableDelayedDragEvents(),Si.splice(Si.indexOf(this.el),1),this.el=e=null},_hideClone:function(){if(!qt){if(it("hideClone",this),ee.eventCanceled)return;ie(Se,"display","none"),this.options.removeCloneOnHide&&Se.parentNode&&Se.parentNode.removeChild(Se),qt=!0}},_showClone:function(e){if(e.lastPutMode!=="clone"){this._hideClone();return}if(qt){if(it("showClone",this),ee.eventCanceled)return;j.parentNode==ke&&!this.options.group.revertClone?ke.insertBefore(Se,j):Jt?ke.insertBefore(Se,Jt):ke.appendChild(Se),this.options.group.revertClone&&this.animate(j,Se),ie(Se,"display",""),qt=!1}}};function Sf(t){t.dataTransfer&&(t.dataTransfer.dropEffect="move"),t.cancelable&&t.preventDefault()}function Ii(t,e,n,i,r,o,l,s){var a,u=t[nt],f=u.options.onMove,c;return window.CustomEvent&&!Mt&&!zn?a=new CustomEvent("move",{bubbles:!0,cancelable:!0}):(a=document.createEvent("Event"),a.initEvent("move",!0,!0)),a.to=e,a.from=t,a.dragged=n,a.draggedRect=i,a.related=r||e,a.relatedRect=o||Ie(e),a.willInsertAfter=s,a.originalEvent=l,t.dispatchEvent(a),f&&(c=f.call(u,a,l)),c}function yr(t){t.draggable=!1}function Cf(){br=!1}function Tf(t,e,n){var i=Ie(vn(n.el,0,n.options,!0)),r=Ca(n.el,n.options,oe),o=10;return e?t.clientX<r.left-o||t.clientY<i.top&&t.clientX<i.right:t.clientY<r.top-o||t.clientY<i.bottom&&t.clientX<i.left}function Of(t,e,n){var i=Ie(dr(n.el,n.options.draggable)),r=Ca(n.el,n.options,oe),o=10;return e?t.clientX>r.right+o||t.clientY>i.bottom&&t.clientX>i.left:t.clientY>r.bottom+o||t.clientX>i.right&&t.clientY>i.top}function Af(t,e,n,i,r,o,l,s){var a=i?t.clientY:t.clientX,u=i?n.height:n.width,f=i?n.top:n.left,c=i?n.bottom:n.right,p=!1;if(!l){if(s&&Ti<u*r){if(!Jn&&(Yn===1?a>f+u*o/2:a<c-u*o/2)&&(Jn=!0),Jn)p=!0;else if(Yn===1?a<f+Ti:a>c-Ti)return-Yn}else if(a>f+u*(1-r)/2&&a<c-u*(1-r)/2)return Lf(e)}return p=p||l,p&&(a<f+u*o/2||a>c-u*o/2)?a>f+u/2?1:-1:0}function Lf(t){return pt(j)<pt(t)?1:-1}function If(t){for(var e=t.tagName+t.className+t.src+t.href+t.textContent,n=e.length,i=0;n--;)i+=e.charCodeAt(n);return i.toString(36)}function Pf(t){Oi.length=0;for(var e=t.getElementsByTagName("input"),n=e.length;n--;){var i=e[n];i.checked&&Oi.push(i)}}function Pi(t){return setTimeout(t,0)}function wr(t){return clearTimeout(t)}Ai&&he(document,"touchmove",function(t){(ee.active||wn)&&t.cancelable&&t.preventDefault()}),ee.utils={on:he,off:pe,css:ie,find:wa,is:function(e,n){return!!bt(e,n,e,!1)},extend:hf,throttle:ka,closest:bt,toggleClass:lt,clone:Sa,index:pt,nextTick:Pi,cancelNextTick:wr,detectDirection:Ia,getChild:vn,expando:nt},ee.get=function(t){return t[nt]},ee.mount=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];e[0].constructor===Array&&(e=e[0]),e.forEach(function(i){if(!i.prototype||!i.prototype.constructor)throw"Sortable: Mounted plugin must be a constructor function, not ".concat({}.toString.call(i));i.utils&&(ee.utils=St(St({},ee.utils),i.utils)),Vn.mount(i)})},ee.create=function(t,e){return new ee(t,e)},ee.version=df;var Pe=[],Kn,_r,Er=!1,kr,Dr,Ni,Qn;function Nf(){function t(){this.defaults={scroll:!0,forceAutoScrollFallback:!1,scrollSensitivity:30,scrollSpeed:10,bubbleScroll:!0};for(var e in this)e.charAt(0)==="_"&&typeof this[e]=="function"&&(this[e]=this[e].bind(this))}return t.prototype={dragStarted:function(n){var i=n.originalEvent;this.sortable.nativeDraggable?he(document,"dragover",this._handleAutoScroll):this.options.supportPointer?he(document,"pointermove",this._handleFallbackAutoScroll):i.touches?he(document,"touchmove",this._handleFallbackAutoScroll):he(document,"mousemove",this._handleFallbackAutoScroll)},dragOverCompleted:function(n){var i=n.originalEvent;!this.options.dragOverBubble&&!i.rootEl&&this._handleAutoScroll(i)},drop:function(){this.sortable.nativeDraggable?pe(document,"dragover",this._handleAutoScroll):(pe(document,"pointermove",this._handleFallbackAutoScroll),pe(document,"touchmove",this._handleFallbackAutoScroll),pe(document,"mousemove",this._handleFallbackAutoScroll)),Ra(),Mi(),mf()},nulling:function(){Ni=_r=Kn=Er=Qn=kr=Dr=null,Pe.length=0},_handleFallbackAutoScroll:function(n){this._handleAutoScroll(n,!0)},_handleAutoScroll:function(n,i){var r=this,o=(n.touches?n.touches[0]:n).clientX,l=(n.touches?n.touches[0]:n).clientY,s=document.elementFromPoint(o,l);if(Ni=n,i||this.options.forceAutoScrollFallback||zn||Mt||qn){Sr(n,this.options,s,i);var a=zt(s,!0);Er&&(!Qn||o!==kr||l!==Dr)&&(Qn&&Ra(),Qn=setInterval(function(){var u=zt(document.elementFromPoint(o,l),!0);u!==a&&(a=u,Mi()),Sr(n,r.options,u,i)},10),kr=o,Dr=l)}else{if(!this.options.bubbleScroll||zt(s,!0)===Ct()){Mi();return}Sr(n,this.options,zt(s,!1),!1)}}},Pt(t,{pluginName:"scroll",initializeByDefault:!0})}function Mi(){Pe.forEach(function(t){clearInterval(t.pid)}),Pe=[]}function Ra(){clearInterval(Qn)}var Sr=ka(function(t,e,n,i){if(e.scroll){var r=(t.touches?t.touches[0]:t).clientX,o=(t.touches?t.touches[0]:t).clientY,l=e.scrollSensitivity,s=e.scrollSpeed,a=Ct(),u=!1,f;_r!==n&&(_r=n,Mi(),Kn=e.scroll,f=e.scrollFn,Kn===!0&&(Kn=zt(n,!0)));var c=0,p=Kn;do{var m=p,d=Ie(m),y=d.top,g=d.bottom,w=d.left,E=d.right,D=d.width,h=d.height,C=void 0,k=void 0,L=m.scrollWidth,T=m.scrollHeight,v=ie(m),S=m.scrollLeft,I=m.scrollTop;m===a?(C=D<L&&(v.overflowX==="auto"||v.overflowX==="scroll"||v.overflowX==="visible"),k=h<T&&(v.overflowY==="auto"||v.overflowY==="scroll"||v.overflowY==="visible")):(C=D<L&&(v.overflowX==="auto"||v.overflowX==="scroll"),k=h<T&&(v.overflowY==="auto"||v.overflowY==="scroll"));var M=C&&(Math.abs(E-r)<=l&&S+D<L)-(Math.abs(w-r)<=l&&!!S),H=k&&(Math.abs(g-o)<=l&&I+h<T)-(Math.abs(y-o)<=l&&!!I);if(!Pe[c])for(var W=0;W<=c;W++)Pe[W]||(Pe[W]={});(Pe[c].vx!=M||Pe[c].vy!=H||Pe[c].el!==m)&&(Pe[c].el=m,Pe[c].vx=M,Pe[c].vy=H,clearInterval(Pe[c].pid),(M!=0||H!=0)&&(u=!0,Pe[c].pid=setInterval((function(){i&&this.layer===0&&ee.active._onTouchMove(Ni);var P=Pe[this.layer].vy?Pe[this.layer].vy*s:0,x=Pe[this.layer].vx?Pe[this.layer].vx*s:0;typeof f=="function"&&f.call(ee.dragged.parentNode[nt],x,P,t,Ni,Pe[this.layer].el)!=="continue"||Da(Pe[this.layer].el,x,P)}).bind({layer:c}),24))),c++}while(e.bubbleScroll&&p!==a&&(p=zt(p,!1)));Er=u}},30),Ba=function(e){var n=e.originalEvent,i=e.putSortable,r=e.dragEl,o=e.activeSortable,l=e.dispatchSortableEvent,s=e.hideGhostForTarget,a=e.unhideGhostForTarget;if(n){var u=i||o;s();var f=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:n,c=document.elementFromPoint(f.clientX,f.clientY);a(),u&&!u.el.contains(c)&&(l("spill"),this.onSpill({dragEl:r,putSortable:i}))}};function Cr(){}Cr.prototype={startIndex:null,dragStart:function(e){var n=e.oldDraggableIndex;this.startIndex=n},onSpill:function(e){var n=e.dragEl,i=e.putSortable;this.sortable.captureAnimationState(),i&&i.captureAnimationState();var r=vn(this.sortable.el,this.startIndex,this.options);r?this.sortable.el.insertBefore(n,r):this.sortable.el.appendChild(n),this.sortable.animateAll(),i&&i.animateAll()},drop:Ba},Pt(Cr,{pluginName:"revertOnSpill"});function Tr(){}Tr.prototype={onSpill:function(e){var n=e.dragEl,i=e.putSortable,r=i||this.sortable;r.captureAnimationState(),n.parentNode&&n.parentNode.removeChild(n),r.animateAll()},drop:Ba},Pt(Tr,{pluginName:"removeOnSpill"}),ee.mount(new Nf),ee.mount(Tr,Cr);function Fa(t,e,n){const i=t.slice();return i[16]=e[n],i}function xa(t,e,n){const i=t.slice();return i[19]=e[n],i}function Wa(t,e,n){const i=t.slice();return i[22]=e[n],i}function Ha(t){let e,n,i,r;function o(){return t[11](t[22])}return{c(){e=O("div"),n=O("a"),n.innerHTML='<i class="fas fa-pencil-alt fa-sm"></i>',b(n,"href","javascript:"),b(n,"data-action","editField"),b(n,"class","edit-field svelte-1azk92t"),b(e,"class","right svelte-1azk92t")},m(l,s){U(l,e,s),_(e,n),i||(r=fe(n,"click",o),i=!0)},p(l,s){t=l},d(l){l&&X(e),i=!1,r()}}}function ja(t,e){let n,i,r,o=e[22].label+"",l,s,a,u=e[2].editable&&Ha(e),f=[e[10](e[22])],c={};for(let p=0;p<f.length;p+=1)c=Fn(c,f[p]);return{key:t,first:null,c(){n=O("li"),i=O("div"),r=O("label"),l=we(o),s=z(),u&&u.c(),a=z(),b(r,"class","svelte-1azk92t"),b(i,"class","left svelte-1azk92t"),Ht(n,c),ae(n,"svelte-1azk92t",!0),this.first=n},m(p,m){U(p,n,m),_(n,i),_(i,r),_(r,l),_(n,s),u&&u.m(n,null),_(n,a)},p(p,m){e=p,m&1&&o!==(o=e[22].label+"")&&xe(l,o),e[2].editable?u?u.p(e,m):(u=Ha(e),u.c(),u.m(n,a)):u&&(u.d(1),u=null),Ht(n,c=vi(f,[m&1&&e[10](e[22])])),ae(n,"svelte-1azk92t",!0)},d(p){p&&X(n),u&&u.d()}}}function za(t){let e,n=q.translate(t[16].name,"scopeNames")+"",i;return{c(){e=O("span"),i=we(n),b(e,"class","title svelte-1azk92t")},m(r,o){U(r,e,o),_(e,i)},p(r,o){o&2&&n!==(n=q.translate(r[16].name,"scopeNames")+"")&&xe(i,n)},d(r){r&&X(e)}}}function qa(t,e){let n,i,r,o=e[19].label+"",l,s,a=[e[10](e[19])],u={};for(let f=0;f<a.length;f+=1)u=Fn(u,a[f]);return{key:t,first:null,c(){n=O("li"),i=O("div"),r=O("label"),l=we(o),s=z(),b(r,"class","svelte-1azk92t"),b(i,"class","left svelte-1azk92t"),Ht(n,u),ae(n,"svelte-1azk92t",!0),this.first=n},m(f,c){U(f,n,c),_(n,i),_(i,r),_(r,l),_(n,s)},p(f,c){e=f,c&2&&o!==(o=e[19].label+"")&&xe(l,o),Ht(n,u=vi(a,[c&2&&e[10](e[19])])),ae(n,"svelte-1azk92t",!0)},d(f){f&&X(n)}}}function Ga(t,e){let n,i,r,o=[],l=new Map,s,a,u=e[1].length>1&&za(e),f=be(e[16].fields);const c=p=>p[19].name;for(let p=0;p<f.length;p+=1){let m=xa(e,f,p),d=c(m);l.set(d,o[p]=qa(d,m))}return{key:t,first:null,c(){n=O("div"),u&&u.c(),i=z(),r=O("ul");for(let p=0;p<o.length;p+=1)o[p].c();a=z(),b(r,"class","disabled connected svelte-1azk92t"),b(r,"data-name",s=e[16].name),b(n,"class","svelte-1azk92t"),ae(n,"group",e[1].length>1),this.first=n},m(p,m){U(p,n,m),u&&u.m(n,null),_(n,i),_(n,r);for(let d=0;d<o.length;d+=1)o[d]&&o[d].m(r,null);_(n,a)},p(p,m){e=p,e[1].length>1?u?u.p(e,m):(u=za(e),u.c(),u.m(n,i)):u&&(u.d(1),u=null),m&1026&&(f=be(e[16].fields),o=Lt(o,m,c,1,e,f,l,r,At,qa,null,xa)),m&2&&s!==(s=e[16].name)&&b(r,"data-name",s),m&2&&ae(n,"group",e[1].length>1)},d(p){p&&X(n),u&&u.d();for(let m=0;m<o.length;m+=1)o[m].d()}}}function Mf(t){let e,n,i,r,o,l,s,a=[],u=new Map,f,c,p,m,d,y,g,w,E=[],D=new Map,h=be(t[0].sort(Xa));const C=T=>T[22].name;for(let T=0;T<h.length;T+=1){let v=Wa(t,h,T),S=C(v);u.set(S,a[T]=ja(S,v))}let k=be(t[1]);const L=T=>T[16].name;for(let T=0;T<k.length;T+=1){let v=Fa(t,k,T),S=L(v);D.set(S,E[T]=Ga(S,v))}return{c(){e=O("div"),n=O("div"),i=O("div"),r=O("header"),r.textContent=`${q.translate("Selected","labels","Admin")}`,o=z(),l=O("div"),s=O("ul");for(let T=0;T<a.length;T+=1)a[T].c();f=z(),c=O("div"),p=z(),m=O("div"),d=O("div"),y=O("header"),y.textContent=`${q.translate("Available","labels","Admin")}`,g=z(),w=O("div");for(let T=0;T<E.length;T+=1)E[T].c();b(r,"class","svelte-1azk92t"),b(s,"class","enabled connected svelte-1azk92t"),b(l,"class","rows-wrapper svelte-1azk92t"),b(i,"class","well svelte-1azk92t"),b(n,"class","col-sm-5 svelte-1azk92t"),b(c,"class","col-sm-1 svelte-1azk92t"),le(c,"width","35px"),b(y,"class","svelte-1azk92t"),b(w,"class","rows-wrapper svelte-1azk92t"),b(d,"class","well svelte-1azk92t"),b(m,"class","col-sm-5 svelte-1azk92t"),b(e,"id","layout"),b(e,"class","row svelte-1azk92t")},m(T,v){U(T,e,v),_(e,n),_(n,i),_(i,r),_(i,o),_(i,l),_(l,s);for(let S=0;S<a.length;S+=1)a[S]&&a[S].m(s,null);_(e,f),_(e,c),_(e,p),_(e,m),_(m,d),_(d,y),_(d,g),_(d,w);for(let S=0;S<E.length;S+=1)E[S]&&E[S].m(w,null);t[12](e)},p(T,v){v&1285&&(h=be(T[0].sort(Xa)),a=Lt(a,v,C,1,T,h,u,s,At,ja,null,Wa)),v&1026&&(k=be(T[1]),E=Lt(E,v,L,1,T,k,D,w,At,Ga,null,Fa))},d(T){T&&X(e);for(let v=0;v<a.length;v+=1)a[v].d();for(let v=0;v<E.length;v+=1)E[v].d();t[12](null)}}}function Rf(t){let e,n,i={params:t[2],validate:t[9],fetch:t[4],loadLayout:t[3],$$slots:{default:[Mf]},$$scope:{ctx:t}};return e=new pa({props:i}),t[13](e),e.$on("ready",t[7]),{c(){Dt(e.$$.fragment)},m(r,o){gt(e,r,o),n=!0},p(r,[o]){const l={};o&4&&(l.params=r[2]),o&16&&(l.fetch=r[4]),o&8&&(l.loadLayout=r[3]),o&33554471&&(l.$$scope={dirty:o,ctx:r}),e.$set(l)},i(r){n||(We(e.$$.fragment,r),n=!0)},o(r){Ue(e.$$.fragment,r),n=!1},d(r){t[13](null),vt(e,r)}}}function Bf(t){return t.toLowerCase()}function Va(t,e){return t[e]}const Xa=(t,e)=>t.sortOrder-e.sortOrder;function Ff(t,e,n){let i,r,o,{params:l}=e,{selectedFields:s=[]}=e,{availableGroups:a=[]}=e,{loadLayout:u}=e,f;ir(()=>{r&&r.destroy(),o&&o.forEach(D=>D.destroy())});function c(){const D={group:"fields",draggable:"li",animation:150};r=ee.create(i.querySelector("ul.enabled"),{...D,onEnd(h){const C=h.to.closest(".connected");if(C.classList.contains("enabled")){const[k]=s.splice(h.oldIndex,1);s.splice(h.newIndex,0,k)}else{const k=s[h.oldIndex];s.splice(h.oldIndex,1),n(1,a=a.map(L=>(L.name===C.attributes["data-name"].value&&L.fields.splice(h.newIndex,0,k),L)))}n(0,s=[...s])}}),o=[];for(let h of i.querySelectorAll("ul.disabled")){const C=ee.create(h,{...D,onEnd(k){const L=k.to.closest(".connected");let T=null;if(L.classList.contains("disabled")){for(let v of a)if(v.name===h.attributes["data-name"].value){[T]=v.fields.splice(k.oldIndex,1);break}if(T){for(let v of a)if(v.name===L.attributes["data-name"].value){v.fields.splice(k.newIndex,0,T);break}}}else n(1,a=a.map(v=>(v.name===k.from.closest("ul").attributes["data-name"].value&&([T]=v.fields.splice(k.oldIndex,1)),v))),s.splice(k.newIndex,0,T),n(0,s=[...s])}});o.push(C)}}function p(D){l.openEditDialog(D,l.scope,l.dataAttributeList,l.dataAttributesDefs,h=>{n(0,s=s.map(C=>{if(C.name===D.name)for(let k in h)C[k]=h[k];return C}))})}let{fetch:m=()=>s}=e;function d(D){return D.length===0?(tt.notify("Layout cannot be empty","error"),!1):!0}function y(D){const h={};return l.dataAttributeList.forEach(C=>{Va(D,C)!=null&&(h[`data-${Bf(C)}`]=Va(D,C))}),h}const g=D=>p(D);function w(D){ze[D?"unshift":"push"](()=>{i=D,n(5,i)})}function E(D){ze[D?"unshift":"push"](()=>{f=D,n(6,f)})}return t.$$set=D=>{"params"in D&&n(2,l=D.params),"selectedFields"in D&&n(0,s=D.selectedFields),"availableGroups"in D&&n(1,a=D.availableGroups),"loadLayout"in D&&n(3,u=D.loadLayout),"fetch"in D&&n(4,m=D.fetch)},[s,a,l,u,m,i,f,c,p,d,y,g,w,E]}let Ua=class extends Ge{constructor(e){super(),qe(this,e,Ff,Rf,Le,{params:2,selectedFields:0,availableGroups:1,loadLayout:3,fetch:4})}};const Ri={upperCaseFirst(t){return t.length?t[0].toUpperCase()+t.slice(1):""}};function xf(t){let e,n,i={params:t[0],selectedFields:t[2],availableGroups:t[3],editable:Wf,loadLayout:t[4]};return e=new Ua({props:i}),t[5](e),{c(){Dt(e.$$.fragment)},m(r,o){gt(e,r,o),n=!0},p(r,[o]){const l={};o&1&&(l.params=r[0]),o&4&&(l.selectedFields=r[2]),o&8&&(l.availableGroups=r[3]),e.$set(l)},i(r){n||(We(e.$$.fragment,r),n=!0)},o(r){Ue(e.$$.fragment,r),n=!1},d(r){t[5](null),vt(e,r)}}}let Wf=!0;function Hf(t,e,n){let{params:i}=e;i.dataAttributeList||(i.dataAttributeList=["id","name","width","widthPx","link","notSortable","align","view","customLabel","editable"]),i.dataAttributesDefs||(i.dataAttributesDefs={link:{type:"bool"},width:{type:"float"},notSortable:{type:"bool"},align:{type:"enum",options:["left","right"]},view:{type:"varchar",readOnly:!0},customLabel:{type:"varchar",readOnly:!0},widthPx:{type:"float"},name:{type:"varchar",readOnly:!0},editable:{type:"bool"}});let r,o=[],l=[];const s=[],a=[];function u(E){It.get(i.scope,i.type,i.relatedScope,i.layoutProfileId,D=>{E&&(d(D.layout),E(D))},!1)}function f(E,D){return D==="_self"?q.translate(E,"scopeNamesPlural","Global"):D==="_bookmark"?q.translate("Bookmark","scopeNamesPlural","Global"):q.translate(D,"fields",E)}function c(){const E=[];return i.type==="leftSidebar"&&(se.get(["scopes",i.scope,"bookmarkDisabled"])||E.push("_bookmark"),se.get(["scopes",i.scope,"type"])==="Hierarchy"&&!se.get(["scopes",i.scope,"disableHierarchy"])&&E.push("_self")),E}function p(E,D){return se.get(["entityDefs",E,"fields",D,"type"])??""}function m(E,D){const h=D.split("."),C=se.get(["entityDefs",h[0],"links",h[1]])??{};return C.entity===E&&C.relationName?Espo.utils.upperCaseFirst(C.relationName):""}function d(E){const D=[];let h="";if(i.relatedScope&&i.type==="list"&&(h=m(i.scope,i.relatedScope),h)){const T={name:h,scope:h,prefix:h+"__"};let v=Object.keys(se.get(["entityDefs",h,"fields"])||{}).filter(S=>y(p(h,S))&&g(h,S));v=v.filter(S=>!(se.get(["entityDefs",h,"fields",S,"relationField"])??!1)),v=v.sort((S,I)=>f(h,S).localeCompare(f(h,I))).map(S=>T.prefix+S),T.fields=v,D.push(T)}let C=Object.keys(se.get(["entityDefs",i.scope,"fields"])||{}).filter(T=>y(p(i.scope,T))&&g(i.scope,T));C.push(...c()),C=C.sort((T,v)=>f(i.scope,T).localeCompare(f(i.scope,v))),D.unshift({name:i.scope,scope:i.scope,fields:C});const k=[],L=[];for(const T of D)T.fields=T.fields.map(v=>{const S=f(T.scope,T.prefix?v.replace(T.prefix,""):v);T.prefix||(k.includes(S)&&L.push(S),k.push(S));const I={name:v,label:S},M=se.get(["entityDefs",T.scope,"fields",v,"type"]);return M&&se.get(["fields",M,"notSortable"])&&(I.notSortable=!0),I});n(2,o=E),D[0].fields.forEach(T=>{L.includes(T.label)&&(T.label+=` (${T.name})`);const v=o.find(S=>!S.label&&S.name===T.name);v&&(v.label=T.label)}),D[1]&&D[1].fields.forEach(T=>{k.includes(T.label)&&(T.label+=" (Relation)");const v=o.find(S=>!S.label&&S.name===T.name);v&&(v.label=T.label)});for(const T of D)T.fields=T.fields.filter(v=>!o.find(S=>S.name===v.name));n(3,l=D.reverse())}function y(E){return i.fieldTypes?i.fieldTypes.includes(E):!0}function g(E,D){if(s.includes(D)||a.includes(p(E,D)))return!1;const h=["disabled",`layout${Ri.upperCaseFirst(i.type)}Disabled`];i.reelType&&h.push(`layout${Ri.upperCaseFirst(i.reelType)}Disabled`);for(let C of h)if(se.get(["entityDefs",E,"fields",D,C]))return!1;return!0}function w(E){ze[E?"unshift":"push"](()=>{r=E,n(1,r)})}return t.$$set=E=>{"params"in E&&n(0,i=E.params)},[i,r,o,l,u,w]}class Or extends Ge{constructor(e){super(),qe(this,e,Hf,xf,Le,{params:0})}}function jf(t){let e,n;return e=new Ua({props:{params:t[0],selectedFields:t[1],availableGroups:t[2],loadLayout:t[3]}}),{c(){Dt(e.$$.fragment)},m(i,r){gt(e,i,r),n=!0},p(i,[r]){const o={};r&1&&(o.params=i[0]),r&2&&(o.selectedFields=i[1]),r&4&&(o.availableGroups=i[2]),e.$set(o)},i(i){n||(We(e.$$.fragment,i),n=!0)},o(i){Ue(e.$$.fragment,i),n=!1},d(i){vt(e,i)}}}function zf(t,e){return!t.getLinkParam(e,"disabled")&&!t.getLinkParam(e,"layoutRelationshipsDisabled")}function qf(t,e,n){let{params:i}=e;i.dataAttributeList||(i.dataAttributeList=["id","name","style","hiddenPerDefault"]),i.dataAttributesDefs||(i.dataAttributesDefs={style:{type:"enum",options:["default","success","danger","primary","info","warning"],translation:"LayoutManager.options.style"},hiddenPerDefault:{type:"bool"},name:{readOnly:!0}});let r=[],o=[];function l(a){fr.create(i.scope,function(u){It.get(i.scope,i.type,null,i.layoutProfileId,f=>{a&&(s(u,f.layout),a(f))},!1)})}function s(a,u){let f=[];for(let d in a.defs.links)["belongsTo","hasMany","hasChildren"].includes(a.defs.links[d].type)&&zf(a,d)&&f.push(d);const c=se.get(["clientDefs",i.scope,"bottomPanels","detail"])||[];for(let d of c)d.layoutRelationshipsDisabled||f.push(d.name);f.sort(function(d,y){let g,w,E=c.find(h=>h.name===d),D=c.find(h=>h.name===y);return d in a.defs.links?g=q.translate(d,"links",i.scope):E&&(g=q.translate(E.label,"labels",i.scope)),y in a.defs.links?w=q.translate(y,"links",i.scope):D&&(w=q.translate(D.label,"labels",i.scope)),g.localeCompare(w)});let p=[];n(1,r=[]);const m={name:i.scope,fields:[]};for(let d in u){let y=u[d],g,w=c.find(E=>E.name===y.name);typeof y=="string"||y instanceof String?g={name:y,label:w?q.translate(w.label,"labels",i.scope):q.translate(y,"links",i.scope)}:(g=y,g.label=w?q.translate(w.label,"labels",i.scope):q.translate(g.name,"links",i.scope)),i.dataAttributeList.forEach(E=>{if(E==="name"||E in g)return;let D=se.get(["clientDefs",i.scope,"relationshipPanels",g.name,E]);D!==null&&(g[E]=D)}),r.push(g),p.push(g.name)}for(let d of f)if(!p.includes(d)){let y=c.find(g=>g.name===d);m.fields.push({name:d,label:y?q.translate(y.label,"labels",i.scope):q.translate(d,"fields",i.scope)||q.translate(d,"links",i.scope)})}n(2,o=[m])}return t.$$set=a=>{"params"in a&&n(0,i=a.params)},[i,r,o,l]}class Gf extends Ge{constructor(e){super(),qe(this,e,qf,jf,Le,{params:0})}}function Ya(t,e,n){const i=t.slice();return i[43]=e[n],i}function Ja(t,e,n){const i=t.slice();return i[46]=e[n],i}function Ka(t,e,n){const i=t.slice();return i[49]=e[n],i}function Qa(t,e,n){const i=t.slice();return i[52]=e[n],i}function Za(t,e,n){const i=t.slice();return i[55]=e[n],i[57]=n,i}function Vf(t){let e,n,i,r,o;function l(){return t[20](t[49],t[52],t[57])}function s(...a){return t[21](t[49],t[52],t[57],...a)}return{c(){e=O("li"),n=O("a"),n.innerHTML='<i class="fas fa-minus"></i>',i=z(),b(n,"href","#"),b(n,"data-action","minusCell"),b(n,"class","remove-field svelte-t2y606"),b(e,"class","empty cell svelte-t2y606")},m(a,u){U(a,e,u),_(e,n),_(e,i),r||(o=[fe(n,"click",Wt(l)),fe(e,"dragover",Wt(Kf)),fe(e,"drop",s)],r=!0)},p(a,u){t=a},d(a){a&&X(e),r=!1,at(o)}}}function Xf(t){let e,n=t[55].label+"",i,r,o,l,s,a,u,f,c,p,m;function d(){return t[18](t[49],t[52],t[57])}function y(...g){return t[19](t[55],...g)}return{c(){e=O("li"),i=we(n),r=z(),o=O("a"),o.innerHTML='<i class="fas fa-times"></i>',l=z(),b(o,"href","#"),b(o,"data-action","removeField"),b(o,"class","remove-field svelte-t2y606"),b(e,"class","cell svelte-t2y606"),b(e,"draggable","true"),b(e,"data-id",s=t[55].id),b(e,"data-name",a=t[55].name),b(e,"data-full-width",u=t[55].fullWidth?"true":void 0),b(e,"data-custom-label",f=t[55].customLabel?t[55].customLabel:void 0),b(e,"data-no-label",c=t[55].noLabel)},m(g,w){U(g,e,w),_(e,i),_(e,r),_(e,o),_(e,l),p||(m=[fe(o,"click",Wt(d)),fe(e,"dragstart",nr(y))],p=!0)},p(g,w){t=g,w[0]&2&&n!==(n=t[55].label+"")&&xe(i,n),w[0]&2&&s!==(s=t[55].id)&&b(e,"data-id",s),w[0]&2&&a!==(a=t[55].name)&&b(e,"data-name",a),w[0]&2&&u!==(u=t[55].fullWidth?"true":void 0)&&b(e,"data-full-width",u),w[0]&2&&f!==(f=t[55].customLabel?t[55].customLabel:void 0)&&b(e,"data-custom-label",f),w[0]&2&&c!==(c=t[55].noLabel)&&b(e,"data-no-label",c)},d(g){g&&X(e),p=!1,at(m)}}}function $a(t){let e;function n(o,l){return o[55]?Xf:Vf}let i=n(t),r=i(t);return{c(){r.c(),e=di()},m(o,l){r.m(o,l),U(o,e,l)},p(o,l){i===(i=n(o))&&r?r.p(o,l):(r.d(1),r=i(o),r&&(r.c(),r.m(e.parentNode,e)))},d(o){o&&X(e),r.d(o)}}}function el(t,e){let n,i,r,o,l,s,a,u,f;function c(){return e[17](e[49],e[52])}let p=be(e[52].cells),m=[];for(let d=0;d<p.length;d+=1)m[d]=$a(Za(e,p,d));return{key:t,first:null,c(){n=O("li"),i=O("div"),r=O("a"),r.innerHTML='<i class="fas fa-times"></i>',o=z(),l=O("ul");for(let d=0;d<m.length;d+=1)m[d].c();s=z(),b(r,"href","#"),b(r,"data-action","removeRow"),b(r,"class","remove-row pull-right svelte-t2y606"),b(i,"class","svelte-t2y606"),b(l,"class","cells svelte-t2y606"),b(n,"class","row svelte-t2y606"),b(n,"data-number",a=e[52].number),this.first=n},m(d,y){U(d,n,y),_(n,i),_(i,r),_(n,o),_(n,l);for(let g=0;g<m.length;g+=1)m[g]&&m[g].m(l,null);_(n,s),u||(f=[fe(r,"click",Wt(c)),fe(l,"mousedown",nr(Qf))],u=!0)},p(d,y){if(e=d,y[0]&5634){p=be(e[52].cells);let g;for(g=0;g<p.length;g+=1){const w=Za(e,p,g);m[g]?m[g].p(w,y):(m[g]=$a(w),m[g].c(),m[g].m(l,null))}for(;g<m.length;g+=1)m[g].d(1);m.length=p.length}y[0]&2&&a!==(a=e[52].number)&&b(n,"data-number",a)},d(d){d&&X(n),sn(m,d),u=!1,at(f)}}}function tl(t,e){let n,i,r,o=(e[49].customLabel||e[49].label||"")+"",l,s,a,u,f,c,p,m,d,y,g,w=[],E=new Map,D,h,C,k,L,T,v;function S(){return e[15](e[49])}function I(){return e[16](e[49])}let M=be(e[49].rows);const H=P=>P[52].number;for(let P=0;P<M.length;P+=1){let x=Qa(e,M,P),Z=H(x);E.set(Z,w[P]=el(Z,x))}function W(){return e[22](e[49])}return{key:t,first:null,c(){n=O("li"),i=O("header"),r=O("label"),l=we(o),a=we(` 
                                    `),u=O("a"),u.innerHTML='<i class="fas fa-pencil-alt fa-sm"></i>',f=z(),c=O("a"),p=O("i"),y=z(),g=O("ul");for(let P=0;P<w.length;P+=1)w[P].c();D=z(),h=O("div"),C=O("a"),C.innerHTML='<i class="fas fa-plus"></i>',k=z(),b(r,"data-is-custom",s=e[49].customLabel?"true":void 0),b(r,"class","svelte-t2y606"),b(u,"href","#"),b(u,"data-action","edit-panel-label"),b(u,"class","edit-panel-label svelte-t2y606"),b(p,"class","fas fa-times"),b(c,"href","#"),le(c,"float","right"),b(c,"data-action","removePanel"),b(c,"class","remove-panel svelte-t2y606"),b(c,"data-number",m=e[49].number),b(i,"data-name",d=e[49].name),b(i,"class","svelte-t2y606"),b(g,"class","rows svelte-t2y606"),b(C,"href","#"),b(C,"data-action","addRow"),b(C,"class","svelte-t2y606"),b(h,"class","svelte-t2y606"),b(n,"data-number",L=e[49].number),b(n,"class","panel-layout svelte-t2y606"),this.first=n},m(P,x){U(P,n,x),_(n,i),_(i,r),_(r,l),_(i,a),_(i,u),_(i,f),_(i,c),_(c,p),_(n,y),_(n,g);for(let Z=0;Z<w.length;Z+=1)w[Z]&&w[Z].m(g,null);_(n,D),_(n,h),_(h,C),_(n,k),T||(v=[fe(u,"click",Wt(S)),fe(c,"click",Wt(I)),fe(g,"mousedown",nr(Zf)),fe(C,"click",Wt(W))],T=!0)},p(P,x){e=P,x[0]&2&&o!==(o=(e[49].customLabel||e[49].label||"")+"")&&xe(l,o),x[0]&2&&s!==(s=e[49].customLabel?"true":void 0)&&b(r,"data-is-custom",s),x[0]&2&&m!==(m=e[49].number)&&b(c,"data-number",m),x[0]&2&&d!==(d=e[49].name)&&b(i,"data-name",d),x[0]&5890&&(M=be(e[49].rows),w=Lt(w,x,H,1,e,M,E,g,At,el,null,Qa)),x[0]&2&&L!==(L=e[49].number)&&b(n,"data-number",L)},d(P){P&&X(n);for(let x=0;x<w.length;x+=1)w[x].d();T=!1,at(v)}}}function nl(t){let e,n=q.translate(t[43].name,"scopeNames")+"",i;return{c(){e=O("span"),i=we(n),b(e,"class","title svelte-t2y606")},m(r,o){U(r,e,o),_(e,i)},p(r,o){o[0]&4&&n!==(n=q.translate(r[43].name,"scopeNames")+"")&&xe(i,n)},d(r){r&&X(e)}}}function il(t,e){let n,i=e[46].label+"",r,o,l,s,a;function u(...f){return e[23](e[46],...f)}return{key:t,first:null,c(){n=O("li"),r=we(i),o=z(),b(n,"class","cell svelte-t2y606"),b(n,"data-name",l=e[46].name),this.first=n},m(f,c){U(f,n,c),_(n,r),_(n,o),s||(a=fe(n,"dragstart",u),s=!0)},p(f,c){e=f,c[0]&4&&i!==(i=e[46].label+"")&&xe(r,i),c[0]&4&&l!==(l=e[46].name)&&b(n,"data-name",l)},d(f){f&&X(n),s=!1,a()}}}function rl(t,e){let n,i,r,o=[],l=new Map,s,a,u=e[2].length>1&&nl(e),f=be(e[43].fields);const c=p=>p[46].name;for(let p=0;p<f.length;p+=1){let m=Ja(e,f,p),d=c(m);l.set(d,o[p]=il(d,m))}return{key:t,first:null,c(){n=O("div"),u&&u.c(),i=z(),r=O("ul");for(let p=0;p<o.length;p+=1)o[p].c();a=z(),b(r,"class","disabled cells clearfix svelte-t2y606"),b(r,"data-name",s=e[43].name),b(n,"class","svelte-t2y606"),ae(n,"group",e[2].length>1),this.first=n},m(p,m){U(p,n,m),u&&u.m(n,null),_(n,i),_(n,r);for(let d=0;d<o.length;d+=1)o[d]&&o[d].m(r,null);_(n,a)},p(p,m){e=p,e[2].length>1?u?u.p(e,m):(u=nl(e),u.c(),u.m(n,i)):u&&(u.d(1),u=null),m[0]&4&&(f=be(e[43].fields),o=Lt(o,m,c,1,e,f,l,r,At,il,null,Ja)),m[0]&4&&s!==(s=e[43].name)&&b(r,"data-name",s),m[0]&4&&ae(n,"group",e[2].length>1)},d(p){p&&X(n),u&&u.d();for(let m=0;m<o.length;m+=1)o[m].d()}}}function Uf(t){let e,n,i,r,o,l,s,a,u,f=[],c=new Map,p,m,d,y,g,w,E=[],D=new Map,h,C,k=be(t[1]);const L=S=>S[49].number;for(let S=0;S<k.length;S+=1){let I=Ka(t,k,S),M=L(I);c.set(M,f[S]=tl(M,I))}let T=be(t[2]);const v=S=>S[43].name;for(let S=0;S<T.length;S+=1){let I=Ya(t,T,S),M=v(I);D.set(M,E[S]=rl(M,I))}return{c(){e=O("div"),n=O("div"),i=O("div"),r=O("header"),r.textContent=`${q.translate("Layout","LayoutManager")}`,o=z(),l=O("a"),l.textContent=`${q.translate("Add Panel","Admin")}`,s=z(),a=O("div"),u=O("ul");for(let S=0;S<f.length;S+=1)f[S].c();p=z(),m=O("div"),d=O("div"),y=O("header"),y.textContent=`${q.translate("Available Fields","Admin")}`,g=z(),w=O("div");for(let S=0;S<E.length;S+=1)E[S].c();b(r,"class","svelte-t2y606"),b(l,"href","#"),b(l,"class","svelte-t2y606"),b(u,"class","panels svelte-t2y606"),b(a,"class","rows-wrapper svelte-t2y606"),b(i,"class","well svelte-t2y606"),b(n,"class","col-md-8 svelte-t2y606"),b(y,"class","svelte-t2y606"),b(w,"class","rows-wrapper svelte-t2y606"),b(d,"class","well available-fields svelte-t2y606"),b(m,"class","col-md-4 svelte-t2y606"),b(e,"id","layout"),b(e,"class","row svelte-t2y606")},m(S,I){U(S,e,I),_(e,n),_(n,i),_(i,r),_(i,o),_(i,l),_(i,s),_(i,a),_(a,u);for(let M=0;M<f.length;M+=1)f[M]&&f[M].m(u,null);_(e,p),_(e,m),_(m,d),_(d,y),_(d,g),_(d,w);for(let M=0;M<E.length;M+=1)E[M]&&E[M].m(w,null);h||(C=fe(l,"click",Wt(t[5])),h=!0)},p(S,I){I[0]&8130&&(k=be(S[1]),f=Lt(f,I,L,1,S,k,c,u,At,tl,null,Ka)),I[0]&4&&(T=be(S[2]),E=Lt(E,I,v,1,S,T,D,w,At,rl,null,Ya))},d(S){S&&X(e);for(let I=0;I<f.length;I+=1)f[I].d();for(let I=0;I<E.length;I+=1)E[I].d();h=!1,C()}}}function Yf(t){let e,n;return e=new pa({props:{params:t[0],validate:t[13],fetch:t[4],loadLayout:t[3],$$slots:{default:[Uf]},$$scope:{ctx:t}}}),{c(){Dt(e.$$.fragment)},m(i,r){gt(e,i,r),n=!0},p(i,r){const o={};r[0]&1&&(o.params=i[0]),r[0]&6|r[1]&134217728&&(o.$$scope={dirty:r,ctx:i}),e.$set(o)},i(i){n||(We(e.$$.fragment,i),n=!0)},o(i){Ue(e.$$.fragment,i),n=!1},d(i){vt(e,i)}}}function Jf(t,e){return e.prefix?t.startsWith(e.prefix):!t.includes("__")}const Kf=t=>t.dataTransfer.dropEffect="move",Qf=()=>{},Zf=()=>{};function $f(t,e,n){let{params:i}=e,{columnCount:r=2}=e,o=["id","label","style"],l={label:{type:"varchar"},style:{type:"enum",options:["default","success","danger","primary","info","warning"],translation:"LayoutManager.options.style"}},s=[],a=[],u=[],f=-1,c=-1,p;rr();function m(F){let R;const V=[];V.push(new Promise(J=>{It.get(i.scope,i.type,i.relatedScope,i.layoutProfileId,re=>{R=re,J()},!1)})),i.type==="detail"&&V.push(new Promise(J=>{It.get(i.scope,"sidePanelsDetail",null,i.layoutProfileId,re=>{p=re.layout,J()},!1)})),Promise.all(V).then(()=>{F&&(E(R.layout),L(),dn().then(()=>{v()}),F(R))})}function d(F,R){const V=R.split("."),J=se.get(["entityDefs",V[0],"links",V[1]])??{};return J.entity===F&&J.relationName?Espo.utils.upperCaseFirst(J.relationName):""}function y(F,R){return q.translate(R,"fields",F)}function g(F,R){return se.get(["entityDefs",F,"fields",R,"type"])??""}function w(F){return i.fieldTypes?i.fieldTypes.includes(F):!0}function E(F){const R=[];let V="";if(i.relatedScope&&(V=d(i.scope,i.relatedScope),V)){const Q={name:V,scope:V,prefix:V+"__"};let ce=Object.keys(se.get(["entityDefs",V,"fields"])||{}).filter(ge=>w(g(V,ge))&&h(V,ge));ce=ce.filter(ge=>!(se.get(["entityDefs",V,"fields",ge,"relationField"])??!1)),ce=ce.sort((ge,Ae)=>y(V,ge).localeCompare(y(V,Ae))).map(ge=>Q.prefix+ge),Q.fields=ce,R.push(Q)}let J=[];const re=[];for(const Q in se.get(["entityDefs",i.scope,"fields"])||{})h(i.scope,Q)&&(re.push(q.translate(Q,"fields",i.scope)),J.push(Q));R.unshift({name:i.scope,scope:i.scope,fields:J});const ve=[],De=[];for(const Q of R)Q.fields=Q.fields.map(ce=>{const ge=y(Q.scope,Q.prefix?ce.replace(Q.prefix,""):ce);return Q.prefix||(ve.includes(ge)&&De.push(ge),ve.push(ge)),{name:ce,label:ge}});n(1,a=F);let Xe=[];F.forEach((Q,ce)=>{Q.rows.forEach((ge,Ae)=>{ge&&ge.forEach((He,wt)=>{wt==r||!He||Xe.push(He.name)})})}),R[0].fields.forEach(Q=>{De.includes(Q.label)&&(Q.label+=` (${Q.name})`);const ce=D(Q.name);ce&&(ce.label=Q.label)}),R[1]&&R[1].fields.forEach(Q=>{Q.label+=" (Relation)";const ce=D(Q.name);ce&&(ce.label=Q.label)});for(const Q of R)Q.fields=Q.fields.filter(ce=>!Xe.find(ge=>ge===ce.name));n(2,u=R.reverse())}function D(F){for(const R of a)for(const V of R.rows)for(const J of V)if(J&&J.name===F)return J;return null}function h(F,R){if(C()&&s.includes(R))return!1;const V=["disabled",`layout${Ri.upperCaseFirst(i.type)}Disabled`];i.reelType&&V.push(`layout${Ri.upperCaseFirst(i.reelType)}Disabled`);for(let J of V)if(se.get(["entityDefs",F,"fields",R,J]))return!1;return!0}function C(){if(se.get(["clientDefs",i.scope,"defaultSidePanelDisabled"]))return!1;if(p){for(const F in p)if(F==="default"&&p[F].disabled)return!1}return!0}function k(){return a.map(F=>({...F,rows:F.rows.map(R=>R.cells)}))}function L(){f=-1,c=-1,n(1,a=a.map((F,R)=>(F.number=R,f=R,F.rows=F.rows.map(V=>({number:c++,cells:V})),F)))}function T(F){ee.create(F,{animation:150,group:"rows",draggable:"li.row",onEnd(R){const V=parseInt(R.to.closest(".panel-layout").getAttribute("data-number")),J=parseInt(R.from.closest(".panel-layout").getAttribute("data-number"));if(J===V)n(1,a=a.map(re=>{if(re.number===V){const[ve]=re.rows.splice(R.oldIndex,1);re.rows.splice(R.newIndex,0,ve)}return re}));else{const ve=a.find(De=>De.number===J).rows[R.oldIndex];n(1,a=a.map(De=>(De.number===J&&De.rows.splice(R.oldIndex,1),De.number===V&&De.rows.splice(R.newIndex,0,ve),De)))}}})}function v(){const F=document.querySelector("ul.panels");F&&ee.create(F,{animation:150,group:"panels",draggable:"li.panel-layout",onEnd(R){const V=Array.from(R.to.children);n(1,a=V.map(J=>{const re=parseInt(J.getAttribute("data-number"));return a.find(ve=>ve.number===re)}))}}),document.querySelectorAll("ul.rows").forEach(R=>{T(R)}),document.querySelectorAll("ul.cells.disabled").forEach(R=>{ee.create(R,{animation:150,group:"cells",draggable:"li.cell"})})}function S(){f++;const F={label:"New panel",rows:[{number:c++,cells:[!1,!1]}],number:f,name:`panel${f}`,isCustomLabel:!0};n(1,a=[...a,F]),dn().then(()=>{const R=document.querySelector(`.panel-layout[data-number="${F.number}"] > .rows`);T(R),R.scrollIntoView()})}function I(F){const R=a.find(J=>J.number===F);n(1,a=a.filter(J=>J!==R));let V=[];R.rows.forEach(J=>{J.cells.forEach(re=>{re&&V.push(re)})}),M(V)}function M(F){n(2,u=u.map(R=>(R.fields=[...F.filter(V=>!!V&&Jf(V.name,R)),...R.fields],R)))}function H(F){n(1,a=a.map(R=>(R.number===F&&(R.rows=[...R.rows,{number:c++,cells:Array(r).fill(!1)}]),R)))}function W(F,R){n(1,a=a.map(V=>{if(V.number===F){const J=V.rows.find(re=>re.number===R);V.rows=V.rows.filter(re=>re!=J),M(J.cells.filter(re=>!!re))}return V}))}function P(F,R,V){n(1,a=a.map(J=>(J.number===F&&(J.rows=J.rows.map((re,ve)=>{if(re.number===R){const De=re.cells[V];De&&M([De]),re.cells[V]=!1}return re})),J)))}function x(F,R,V,J){const re=F.dataTransfer.getData("name");let ve=null;for(const Q of u)if(ve=Q.fields.find(ce=>ce.name===re),ve)break;let De=null,Xe=null;if(ve)n(2,u=u.map(Q=>(Q.fields=Q.fields.filter(ce=>ce!==ve),Q)));else{if(a.forEach(Q=>{Q.rows.forEach((ce,ge)=>{ce.cells.forEach(Ae=>{Ae&&Ae.name===re&&(ve=Ae,De=ce.number,Xe=Q.number)})})}),!ve)return;n(1,a=a.map((Q,ce)=>(Xe===Q.number&&(Q.rows=Q.rows.map((ge,Ae)=>(ge.number===De&&(ge.cells=ge.cells.map((He,wt)=>He&&He.name===re?!1:He)),ge))),Q)))}n(1,a=a.map(Q=>(R===Q.number&&(Q.rows=Q.rows.map(ce=>(V===ce.number&&(ce.cells=ce.cells.map((ge,Ae)=>Ae===J?(ve.fullWidth&&ce.cells.length>1&&delete ve.fullWidth,ve):ge)),ce))),Q)))}function Z(F){i.onEditPanel(F,o,l,R=>{n(1,a=a.map(V=>(V.number===F.number&&o.forEach(J=>{F[J]=R[J]}),V)))})}function me(F,R,V){n(1,a=a.map(J=>(F===J.number&&(J.rows=J.rows.map(re=>{if(R===re.number){const ve=re.cells.filter((De,Xe)=>Xe!==V);ve.length===1&&ve[0]&&(ve[0].fullWidth=!0),re.cells=ve}return re})),J)))}function Re(F){let R=0;return F.forEach(V=>{V.rows.forEach(J=>{J.forEach(re=>{re&&R++})})}),R===0?(tt.notify("Layout cannot be empty.","error"),!1):!0}const Be=F=>Z(F),_e=F=>I(F.number),Ne=(F,R)=>W(F.number,R.number),Qe=(F,R,V)=>P(F.number,R.number,V),Ee=(F,R)=>{R.dataTransfer.setData("name",F.name)},Oe=(F,R,V)=>me(F.number,R.number,V),rt=(F,R,V,J)=>x(J,F.number,R.number,V),ht=F=>H(F.number),ut=(F,R)=>{R.dataTransfer.setData("name",F.name)};return t.$$set=F=>{"params"in F&&n(0,i=F.params),"columnCount"in F&&n(14,r=F.columnCount)},[i,a,u,m,k,S,I,H,W,P,x,Z,me,Re,r,Be,_e,Ne,Qe,Ee,Oe,rt,ht,ut]}class ec extends Ge{constructor(e){super(),qe(this,e,$f,Yf,Le,{params:0,columnCount:14},null,[-1,-1])}}function tc(t){let e,n;return e=new t[1]({props:{params:t[0],viewType:t[2]}}),{c(){Dt(e.$$.fragment)},m(i,r){gt(e,i,r),n=!0},p(i,[r]){const o={};r&1&&(o.params=i[0]),e.$set(o)},i(i){n||(We(e.$$.fragment,i),n=!0)},o(i){Ue(e.$$.fragment,i),n=!1},d(i){vt(e,i)}}}function nc(t,e,n){let{params:i}=e,r,o;const l=se.get(["clientDefs",i.scope,"additionalLayouts",i.type])||i.type;switch(l&&(i.reelType=l),t.$$set=s=>{"params"in s&&n(0,i=s.params)},l){case"list":n(1,r=Or);break;case"leftSidebar":n(1,r=Or),n(0,i.fieldTypes=["link","linkMultiple"],i);break;case"kanban":n(1,r=Or),n(0,i.dataAttributeList=["id","name","link","align","view","isLarge","cssStyle"],i),n(0,i.dataAttributesDefs={link:{type:"bool"},isLarge:{type:"bool"},width:{type:"float"},cssStyle:{type:"varchar"},align:{type:"enum",options:["left","right"]},view:{type:"varchar",readOnly:!0},name:{type:"varchar",readOnly:!0}},i);break;case"relationships":n(1,r=Gf);break;case"rightSideView":case"detail":n(1,r=ec);break}return[i,r,o]}class ic extends Ge{constructor(e){super(),qe(this,e,nc,tc,Le,{params:0})}}function rc(t){let e,n,i,r,o,l=q.translate("apiRequest","labels","Admin")+"",s,a,u,f,c,p,m,d,y,g,w,E,D,h,C,k,L,T,v,S,I,M,H=q.translate("response","fields","Admin")+"",W,P,x=q.translate("status","labels","Admin")+"",Z,me,Re,Be,_e,Ne,Qe;return{c(){e=O("div"),n=O("h3"),i=O("div"),r=O("div"),o=O("a"),o.textContent=`${q.translate("Administration")}`,s=we(l),a=z(),u=O("div"),u.textContent=`${q.translate("apiRequest","labels","Admin")}`,f=z(),c=O("button"),c.textContent=`${q.translate("execute","labels","Admin")}`,p=z(),m=O("div"),d=O("div"),y=O("div"),g=O("div"),w=O("label"),w.textContent=`${q.translate("Type","fields","Admin")}`,E=z(),D=O("div"),h=z(),C=O("div"),k=O("div"),L=O("label"),L.textContent=`${q.translate("request","fields","Admin")}`,T=z(),v=O("div"),S=z(),I=O("div"),M=O("label"),W=we(H),P=O("span"),Z=we(x),me=we(": "),Re=O("span"),Be=z(),_e=O("div"),b(o,"href","#Admin"),b(r,"class","breadcrumbs-wrapper"),b(i,"class","header-breadcrumbs fixed-header-breadcrumbs"),b(u,"class","header-title"),le(c,"margin","10px 7px 10px 5px"),b(c,"class","btn btn-primary action"),b(c,"data-action","execute"),b(c,"type","button"),b(e,"class","page-header"),b(w,"class","control-label"),b(w,"data-name","type"),b(D,"class","field"),b(D,"data-name","type"),b(g,"class","col-xs-12 cell form-group"),b(y,"class","row"),b(d,"class","col-sm-3"),b(m,"class","row"),b(L,"class","control-label"),b(L,"data-name","request"),b(v,"class","field"),b(v,"data-name","request"),b(k,"class","col-sm-12 col-md-6 cell form-group"),b(P,"class","pull-right status hidden"),le(M,"width","100%"),b(M,"class","control-label"),b(M,"data-name","response"),b(_e,"class","field"),b(_e,"data-name","response"),b(I,"class","col-sm-12 col-md-6 cell form-group"),b(C,"class","row")},m(Ee,Oe){U(Ee,e,Oe),_(e,n),_(n,i),_(i,r),_(r,o),_(r,s),_(n,a),_(n,u),_(e,f),_(e,c),U(Ee,p,Oe),U(Ee,m,Oe),_(m,d),_(d,y),_(y,g),_(g,w),_(g,E),_(g,D),U(Ee,h,Oe),U(Ee,C,Oe),_(C,k),_(k,L),_(k,T),_(k,v),_(C,S),_(C,I),_(I,M),_(M,W),_(M,P),_(P,Z),_(P,me),_(P,Re),_(I,Be),_(I,_e),Ne||(Qe=fe(c,"click",function(){fi(t[0](t[1]))&&t[0](t[1]).apply(this,arguments)}),Ne=!0)},p(Ee,[Oe]){t=Ee},i:Ce,o:Ce,d(Ee){Ee&&(X(e),X(p),X(m),X(h),X(C)),Ne=!1,Qe()}}}function oc(t,e,n){let{afterOnMount:i=()=>null}=e,{sendRequest:r=()=>null}=e,o=null;return un(()=>{fr.create("",function(l){n(1,o=l),i(o)})}),t.$$set=l=>{"afterOnMount"in l&&n(2,i=l.afterOnMount),"sendRequest"in l&&n(0,r=l.sendRequest)},[r,o,i]}class ac extends Ge{constructor(e){super(),qe(this,e,oc,rc,Le,{afterOnMount:2,sendRequest:0})}}function ol(t,e,n){const i=t.slice();return i[12]=e[n],i}function al(t){let e,n=t[12].label+"",i,r,o,l,s,a,u;function f(){return t[10](t[12])}return{c(){e=O("button"),i=we(n),r=z(),b(e,"data-action",o=t[12].name),e.disabled=t[1],b(e,"type","button"),b(e,"style",l=t[12].cssStyle),b(e,"class",s=`btn action btn-${t[12].style??"default"}`)},m(c,p){U(c,e,p),_(e,i),_(e,r),a||(u=fe(e,"click",f),a=!0)},p(c,p){t=c,p&1&&n!==(n=t[12].label+"")&&xe(i,n),p&1&&o!==(o=t[12].name)&&b(e,"data-action",o),p&2&&(e.disabled=t[1]),p&1&&l!==(l=t[12].cssStyle)&&b(e,"style",l),p&1&&s!==(s=`btn action btn-${t[12].style??"default"}`)&&b(e,"class",s)},d(c){c&&X(e),a=!1,u()}}}function lc(t){let e,n,i,r=be(t[0]),o=[];for(let a=0;a<r.length;a+=1)o[a]=al(ol(t,r,a));const l=t[9].default,s=Ro(l,t,t[8],null);return{c(){e=O("div");for(let a=0;a<o.length;a+=1)o[a].c();n=z(),s&&s.c(),b(e,"class","button-container"),le(e,"padding-top","10px")},m(a,u){U(a,e,u);for(let f=0;f<o.length;f+=1)o[f]&&o[f].m(e,null);t[11](e),U(a,n,u),s&&s.m(a,u),i=!0},p(a,[u]){if(u&11){r=be(a[0]);let f;for(f=0;f<r.length;f+=1){const c=ol(a,r,f);o[f]?o[f].p(c,u):(o[f]=al(c),o[f].c(),o[f].m(e,null))}for(;f<o.length;f+=1)o[f].d(1);o.length=r.length}s&&s.p&&(!i||u&256)&&xo(s,l,a,a[8],i?Fo(l,a[8],u,null):Wo(a[8]),null)},i(a){i||(We(s,a),i=!0)},o(a){Ue(s,a),i=!1},d(a){a&&(X(e),X(n)),sn(o,a),t[11](null),s&&s.d(a)}}}function sc(t,e,n){let{$$slots:i={},$$scope:r}=e,{params:o}=e,{fetch:l}=e,{validate:s=()=>!0}=e,a=!1,{buttonList:u=[{name:"save",label:q.translate("Save","labels"),style:"primary"},{name:"cancel",label:q.translate("Cancel","labels")}]}=e,f;function c(){n(1,a=!0);const y=l();s(y)&&o.onSaved(y),n(1,a=!1)}function p(y){if(y.action){y.action();return}switch(y.name){case"save":c();break}}const m=y=>p(y);function d(y){ze[y?"unshift":"push"](()=>{f=y,n(2,f)})}return t.$$set=y=>{"params"in y&&n(4,o=y.params),"fetch"in y&&n(5,l=y.fetch),"validate"in y&&n(6,s=y.validate),"buttonList"in y&&n(0,u=y.buttonList),"$$scope"in y&&n(8,r=y.$$scope)},[u,a,f,p,o,l,s,c,r,i,m,d]}class uc extends Ge{constructor(e){super(),qe(this,e,sc,lc,Le,{params:4,fetch:5,validate:6,buttonList:0,save:7})}get save(){return this.$$.ctx[7]}}function ll(t,e,n){const i=t.slice();return i[22]=e[n],i}function sl(t,e,n){const i=t.slice();return i[22]=e[n],i}function ul(t){let e,n,i;function r(){return t[14](t[22])}return{c(){e=O("a"),e.innerHTML='<i class="fas fa-pencil-alt fa-sm svelte-7ge08f"></i>',b(e,"href","javascript:"),b(e,"data-action","editField"),b(e,"class","edit-field svelte-7ge08f")},m(o,l){U(o,e,l),n||(i=fe(e,"click",r),n=!0)},p(o,l){t=o},d(o){o&&X(e),n=!1,i()}}}function fl(t){let e,n,i;function r(){return t[15](t[22])}return{c(){e=O("a"),e.innerHTML='<i class="fas fa-times"></i>',b(e,"href","javascript:"),b(e,"data-action","removeField"),b(e,"class","remove-field svelte-7ge08f")},m(o,l){U(o,e,l),n||(i=fe(e,"click",r),n=!0)},p(o,l){t=o},d(o){o&&X(e),n=!1,i()}}}function cl(t,e){let n,i,r,o=e[22].label+"",l,s,a,u,f,c,p,m=e[22].canEdit&&ul(e),d=e[22].canRemove&&fl(e),y=[Bi(e[22]),{class:p=(e[22].isGroup?"group":"")+" "+(e[22].groupEnd?"end":"")+" "+(e[1][e[22].name]&&!e[22].isGroup?"in-group":"")}],g={};for(let w=0;w<y.length;w+=1)g=Fn(g,y[w]);return{key:t,first:null,c(){n=O("li"),i=O("div"),r=O("label"),l=we(o),a=z(),u=O("div"),m&&m.c(),f=z(),d&&d.c(),c=z(),b(r,"title",s=e[22].label),b(r,"class","svelte-7ge08f"),b(i,"class","left svelte-7ge08f"),b(u,"class","right svelte-7ge08f"),Ht(n,g),ae(n,"svelte-7ge08f",!0),this.first=n},m(w,E){U(w,n,E),_(n,i),_(i,r),_(r,l),_(n,a),_(n,u),m&&m.m(u,null),_(u,f),d&&d.m(u,null),_(n,c)},p(w,E){e=w,E&1&&o!==(o=e[22].label+"")&&xe(l,o),E&1&&s!==(s=e[22].label)&&b(r,"title",s),e[22].canEdit?m?m.p(e,E):(m=ul(e),m.c(),m.m(u,f)):m&&(m.d(1),m=null),e[22].canRemove?d?d.p(e,E):(d=fl(e),d.c(),d.m(u,null)):d&&(d.d(1),d=null),Ht(n,g=vi(y,[E&1&&Bi(e[22]),E&3&&p!==(p=(e[22].isGroup?"group":"")+" "+(e[22].groupEnd?"end":"")+" "+(e[1][e[22].name]&&!e[22].isGroup?"in-group":""))&&{class:p}])),ae(n,"svelte-7ge08f",!0)},d(w){w&&X(n),m&&m.d(),d&&d.d()}}}function dl(t,e){let n,i,r,o=e[22].label+"",l,s,a,u=[Bi(e[22])],f={};for(let c=0;c<u.length;c+=1)f=Fn(f,u[c]);return{key:t,first:null,c(){n=O("li"),i=O("div"),r=O("label"),l=we(o),a=z(),b(r,"title",s=e[22].label),b(r,"class","svelte-7ge08f"),b(i,"class","left svelte-7ge08f"),Ht(n,f),ae(n,"svelte-7ge08f",!0),this.first=n},m(c,p){U(c,n,p),_(n,i),_(i,r),_(r,l),_(n,a)},p(c,p){e=c,p&8&&o!==(o=e[22].label+"")&&xe(l,o),p&8&&s!==(s=e[22].label)&&b(r,"title",s),Ht(n,f=vi(u,[p&8&&Bi(e[22])])),ae(n,"svelte-7ge08f",!0)},d(c){c&&X(n)}}}function fc(t){let e,n,i,r,o,l,s,a=[],u=new Map,f,c,p,m,d,y,g,w,E,D=[],h=new Map,C=be(t[0].sort(hl));const k=v=>v[22].name;for(let v=0;v<C.length;v+=1){let S=sl(t,C,v),I=k(S);u.set(I,a[v]=cl(I,S))}let L=be(t[3]);const T=v=>v[22].name;for(let v=0;v<L.length;v+=1){let S=ll(t,L,v),I=T(S);h.set(I,D[v]=dl(I,S))}return{c(){e=O("div"),n=O("div"),i=O("div"),r=O("header"),r.textContent=`${q.translate("Selected","labels","Admin")}`,o=z(),l=O("div"),s=O("ul");for(let v=0;v<a.length;v+=1)a[v].c();f=z(),c=O("div"),p=z(),m=O("div"),d=O("div"),y=O("header"),y.textContent=`${q.translate("Available","labels","Admin")}`,g=z(),w=O("div"),E=O("ul");for(let v=0;v<D.length;v+=1)D[v].c();b(r,"class","svelte-7ge08f"),b(s,"class","enabled connected svelte-7ge08f"),b(l,"class","rows-wrapper svelte-7ge08f"),b(i,"class","well svelte-7ge08f"),b(n,"class","col-sm-5 svelte-7ge08f"),b(c,"class","col-sm-2 svelte-7ge08f"),b(y,"class","svelte-7ge08f"),b(E,"class","disabled connected svelte-7ge08f"),b(w,"class","rows-wrapper svelte-7ge08f"),b(d,"class","well svelte-7ge08f"),b(m,"class","col-sm-5 svelte-7ge08f"),b(e,"id","layout"),b(e,"class","row svelte-7ge08f")},m(v,S){U(v,e,S),_(e,n),_(n,i),_(i,r),_(i,o),_(i,l),_(l,s);for(let I=0;I<a.length;I+=1)a[I]&&a[I].m(s,null);_(e,f),_(e,c),_(e,p),_(e,m),_(m,d),_(d,y),_(d,g),_(d,w),_(w,E);for(let I=0;I<D.length;I+=1)D[I]&&D[I].m(E,null);t[16](e)},p(v,S){S&2115&&(C=be(v[0].sort(hl)),a=Lt(a,S,k,1,v,C,u,s,At,cl,null,sl)),S&8&&(L=be(v[3]),D=Lt(D,S,T,1,v,L,h,E,At,dl,null,ll))},d(v){v&&X(e);for(let S=0;S<a.length;S+=1)a[S].d();for(let S=0;S<D.length;S+=1)D[S].d();t[16](null)}}}function cc(t){let e,n,i={params:t[2],validate:t[8],fetch:t[7],loadData:t[5],buttonList:t[4],$$slots:{default:[fc]},$$scope:{ctx:t}};return e=new uc({props:i}),t[17](e),{c(){Dt(e.$$.fragment)},m(r,o){gt(e,r,o),n=!0},p(r,[o]){const l={};o&4&&(l.params=r[2]),o&256&&(l.validate=r[8]),o&128&&(l.fetch=r[7]),o&32&&(l.loadData=r[5]),o&16&&(l.buttonList=r[4]),o&134218315&&(l.$$scope={dirty:o,ctx:r}),e.$set(l)},i(r){n||(We(e.$$.fragment,r),n=!0)},o(r){Ue(e.$$.fragment,r),n=!1},d(r){t[17](null),vt(e,r)}}}function dc(t){return t.toLowerCase()}function pl(t,e){return t[e]}function Bi(t){let e={};return["name","id"].forEach(n=>{pl(t,n)!=null&&(e[`data-${dc(n)}`]=pl(t,n))}),e}const hl=(t,e)=>t.sortOrder-e.sortOrder;function pc(t,e,n){let i,r,o,{params:l}=e,{enabledItems:s=[]}=e,{disabledItems:a=[]}=e,{buttonList:u}=e,{loadData:f}=e,{refresh:c=()=>{}}=e,{editItem:p}=e,{getGroupId:m=()=>"id"}=e,{fieldsInGroup:d}=e,y;function g(v){let S=!1,I={};v.forEach(M=>{if(M.isGroup){S=M.name!=="";return}S&&(I[M.name]=!0)}),n(1,d=I)}un(()=>{w()}),ir(()=>{r&&r.destroy(),o&&o.destroy()});function w(){const v={group:"fields",draggable:"li",animation:150};r=ee.create(i.querySelector("ul.enabled"),{...v,onEnd(S){if(S.to.closest(".connected").classList.contains("enabled")){const[I]=s.splice(S.oldIndex,1);s.splice(S.newIndex,0,I);for(let M=S.newIndex;M<s.length;M++)n(0,s[M].sortOrder=(M>0?s[M-1].sortOrder:0)+M,s);g(s),c()}else{const I=s[S.oldIndex];if(I.canDisabled===!1){c();return}s.splice(S.oldIndex,1),a.splice(S.newIndex,0,I),c()}}}),o=ee.create(i.querySelector("ul.disabled"),{...v,onEnd(S){if(S.to.closest(".connected").classList.contains("disabled")){const[I]=a.splice(S.oldIndex,1);a.splice(S.newIndex,0,I)}else{const I=a[S.oldIndex];a.splice(S.oldIndex,1),s.splice(S.newIndex,0,I);for(let M=S.newIndex;M<s.length;M++)n(0,s[M].sortOrder=(M>0?s[M-1].sortOrder:0)+M,s);g(s),c()}}})}let{fetch:E=()=>{let v=[],S=!1,I=!1;for(let P=0;P<s.length;P++){const x=s[P];if(x.isGroup){S=!x.groupEnd,v.push({id:x.id,name:x.name,color:x.color,iconClass:x.iconClass,items:[]});continue}S?v[v.length-1].items.push(x.name):v.push(x.name)}let M=!1,H=v.filter(P=>{if(typeof P=="object"){if(P.name!==""&&!P.items.length)return!1;if(P.name!==""&&P.items.length)return M=!0,!0;if(P.name===""&&M)return M=!1,!0;if(P.name===""&&!M)return!1}return!0});I=H.length!==v.length,v=H;let W=[];for(let P=0;P<v.length;P++){let x=v[P];W.push(x),typeof x=="object"&&x.name!==""&&(P===v.length-1||!(typeof v[P+1]=="object"&&v[P+1].name===""))&&(I=!0,W.push({id:m(),name:"",items:[]}))}return{adjusted:I,navigation:W}}}=e;function D(v){s.splice(s.findIndex(S=>S.id===v.id),1),c()}let{validate:h=v=>v.length===0?(tt.notify("Menu cannot be empty","error"),!1):!0}=e;const C=v=>p(v),k=v=>D(v);function L(v){ze[v?"unshift":"push"](()=>{i=v,n(9,i)})}function T(v){ze[v?"unshift":"push"](()=>{y=v,n(10,y)})}return t.$$set=v=>{"params"in v&&n(2,l=v.params),"enabledItems"in v&&n(0,s=v.enabledItems),"disabledItems"in v&&n(3,a=v.disabledItems),"buttonList"in v&&n(4,u=v.buttonList),"loadData"in v&&n(5,f=v.loadData),"refresh"in v&&n(12,c=v.refresh),"editItem"in v&&n(6,p=v.editItem),"getGroupId"in v&&n(13,m=v.getGroupId),"fieldsInGroup"in v&&n(1,d=v.fieldsInGroup),"fetch"in v&&n(7,E=v.fetch),"validate"in v&&n(8,h=v.validate)},t.$$.update=()=>{t.$$.dirty&1&&g(s)},[s,d,l,a,u,f,p,E,h,i,y,D,c,m,C,k,L,T]}class ml extends Ge{constructor(e){super(),qe(this,e,pc,cc,Le,{params:2,enabledItems:0,disabledItems:3,buttonList:4,loadData:5,refresh:12,editItem:6,getGroupId:13,fieldsInGroup:1,fetch:7,validate:8})}}function gl(t){let e,n,i={params:t[0],enabledItems:t[2],disabledItems:t[4],buttonList:t[6],fieldsInGroup:t[5],refresh:t[7],editItem:t[8],getGroupId:Zn};return e=new ml({props:i}),t[9](e),{c(){Dt(e.$$.fragment)},m(r,o){gt(e,r,o),n=!0},p(r,o){const l={};o&1&&(l.params=r[0]),o&4&&(l.enabledItems=r[2]),e.$set(l)},i(r){n||(We(e.$$.fragment,r),n=!0)},o(r){Ue(e.$$.fragment,r),n=!1},d(r){t[9](null),vt(e,r)}}}function hc(t){let e,n=t[3],i,r=gl(t);return{c(){e=O("div"),r.c()},m(o,l){U(o,e,l),r.m(e,null),i=!0},p(o,[l]){l&8&&Le(n,n=o[3])?(Zo(),Ue(r,1,1,Ce),$o(),r=gl(o),r.c(),We(r,1),r.m(e,null)):r.p(o,l)},i(o){i||(We(r),i=!0)},o(o){Ue(r),i=!1},d(o){o&&X(e),r.d(o)}}}let mc="_delimiter_";function Zn(){return mc+gc()}function gc(){return Math.floor((1+Math.random())*4294967296).toString(16).substring(1)}function vc(t,e,n){let{params:i}=e,r,o=[],l=[],s=0,a={},u=[{name:"save",label:q.translate("Save","labels"),style:"primary"},{name:"cancel",label:q.translate("Cancel","labels")},{name:"addGroup",label:q.translate("addGroup","labels"),cssStyle:"margin-left: 30px",action:()=>{i.onEditItem({id:Zn(),groupEnd:!1},d=>{let y=10;o.length&&(y=o[o.length-1].sortOrder+10);let g={isGroup:!0,canEdit:!0,canRemove:!0,isGroup:!0,canDisabled:!1,name:"",label:"",sortOrder:y,...d};o.push(g),g.name!==""&&o.push({id:Zn(),isGroup:!0,canEdit:!0,canRemove:!0,isGroup:!0,canDisabled:!1,groupEnd:!0,name:"",label:"",sortOrder:g.sortOrder+1}),f()})}}];function f(){n(3,s++,s)}function c(d){i.onEditItem(d,y=>{let g=o.findIndex(w=>w.id===y.id);n(2,o[g]=y,o),f()})}p();function p(){let d=i.list??[],y=0;for(let g=0;g<d.length;g++){let w=d[g];if(typeof w=="string")se.get(["scopes",w,"tab"])&&o.push({name:w,label:q.translate(w,"scopeNamesPlural"),sortOrder:y}),y++;else if(typeof w=="object"){o.push({id:w.id??Zn(),canEdit:!0,canRemove:!0,isGroup:!0,canDisabled:!1,groupEnd:w.name==="",name:w.name,label:w.name,iconClass:w.iconClass||null,sortOrder:y}),y++;for(const E of w.items)se.get(["scopes",E,"tab"])&&(o.push({name:E,label:q.translate(E,"scopeNamesPlural"),sortOrder:y}),y++);if(g<d.length-1&&d[g+1].name==="")continue;w.name!==""&&(g===d.length-1||typeof d[g+g]=="string"||w.items.length===0)&&(o.push({id:Zn(),canEdit:!0,canRemove:!0,canDisabled:!1,isGroup:!0,groupEnd:!0,name:"",label:"",iconClass:w.iconClass||null,sortOrder:y}),y++)}}Object.entries(se.get(["scopes"])).forEach(([g,w])=>{w.disabled||w.emHidden||!w.tab||o.find(E=>E.name===g)||l.push({name:g,label:q.translate(g,"scopeNamesPlural")})}),l.sort((g,w)=>g.label.localeCompare(w.label))}function m(d){ze[d?"unshift":"push"](()=>{r=d,n(1,r)})}return t.$$set=d=>{"params"in d&&n(0,i=d.params)},[i,r,o,s,l,a,u,f,c,m]}class bc extends Ge{constructor(e){super(),qe(this,e,vc,hc,Le,{params:0})}}function vl(t){let e,n,i={params:t[0],enabledItems:t[3],disabledItems:t[4],buttonList:t[6],fieldsInGroup:t[5],refresh:t[7],validate:wc};return e=new ml({props:i}),t[8](e),{c(){Dt(e.$$.fragment)},m(r,o){gt(e,r,o),n=!0},p(r,o){const l={};o&1&&(l.params=r[0]),e.$set(l)},i(r){n||(We(e.$$.fragment,r),n=!0)},o(r){Ue(e.$$.fragment,r),n=!1},d(r){t[8](null),vt(e,r)}}}function yc(t){let e,n=t[2],i,r=vl(t);return{c(){e=O("div"),r.c()},m(o,l){U(o,e,l),r.m(e,null),i=!0},p(o,[l]){l&4&&Le(n,n=o[2])?(Zo(),Ue(r,1,1,Ce),$o(),r=vl(o),r.c(),We(r,1),r.m(e,null)):r.p(o,l)},i(o){i||(We(r),i=!0)},o(o){Ue(r),i=!1},d(o){o&&X(e),r.d(o)}}}function wc(t){return!0}function _c(t,e,n){let{params:i}=e,r,o=[],l=[],s=0,a={},u=[{name:"save",label:q.translate("Save","labels"),style:"primary"},{name:"cancel",label:q.translate("Cancel","labels")}];function f(){n(2,s++,s)}c();function c(){let m=i.list??[],d=0;for(let y=0;y<m.length;y++){let g=m[y];typeof g=="string"&&(se.get(["scopes",g,"tab"])&&o.push({name:g,label:q.translate(g,"scopeNamesPlural"),sortOrder:d}),d++)}Object.entries(se.get(["scopes"])).forEach(([y,g])=>{g.disabled||g.emHidden||!g.tab||o.find(w=>w.name===y)||l.push({name:y,label:q.translate(y,"scopeNamesPlural")})}),l.sort((y,g)=>y.label.localeCompare(g.label))}function p(m){ze[m?"unshift":"push"](()=>{r=m,n(1,r)})}return t.$$set=m=>{"params"in m&&n(0,i=m.params)},[i,r,s,o,l,a,u,f,p]}class Ec extends Ge{constructor(e){super(),qe(this,e,_c,yc,Le,{params:0})}}function bl(t,{delay:e=0,duration:n=400,easing:i=Io}={}){const r=+getComputedStyle(t).opacity;return{delay:e,duration:n,easing:i,css:o=>`opacity: ${o*r}`}}function yl(t,e,n){const i=t.slice();return i[65]=e[n],i}function wl(t,e,n){const i=t.slice();return i[68]=e[n],i}function kc(t){let e,n,i,r,o,l,s=be(t[5]),a=[];for(let f=0;f<s.length;f+=1)a[f]=_l(wl(t,s,f));let u=t[1]&&El(t);return{c(){e=O("div"),n=O("div");for(let f=0;f<a.length;f+=1)a[f].c();i=z(),r=O("hr"),o=z(),u&&u.c(),l=di(),b(n,"class","btn-group"),b(e,"class","panel-group"),le(e,"margin-bottom","10px"),le(e,"margin-top","-10px"),le(r,"margin","0 -10px")},m(f,c){U(f,e,c),_(e,n);for(let p=0;p<a.length;p+=1)a[p]&&a[p].m(n,null);U(f,i,c),U(f,r,c),U(f,o,c),u&&u.m(f,c),U(f,l,c)},p(f,c){if(c[0]&131106){s=be(f[5]);let p;for(p=0;p<s.length;p+=1){const m=wl(f,s,p);a[p]?a[p].p(m,c):(a[p]=_l(m),a[p].c(),a[p].m(n,null))}for(;p<a.length;p+=1)a[p].d(1);a.length=s.length}f[1]?u?u.p(f,c):(u=El(f),u.c(),u.m(l.parentNode,l)):u&&(u.d(1),u=null)},d(f){f&&(X(e),X(i),X(r),X(o),X(l)),sn(a,f),u&&u.d(f)}}}function _l(t){let e,n=t[68].label+"",i,r,o,l;function s(){return t[42](t[68])}return{c(){e=O("a"),i=we(n),r=z(),b(e,"href","javascript:"),b(e,"class","btn btn-link tree-item svelte-1y8n9cg"),ae(e,"active",t[68].name===t[1].name)},m(a,u){U(a,e,u),_(e,i),_(e,r),o||(l=fe(e,"click",s),o=!0)},p(a,u){t=a,u[0]&32&&n!==(n=t[68].label+"")&&xe(i,n),u[0]&34&&ae(e,"active",t[68].name===t[1].name)},d(a){a&&X(e),o=!1,l()}}}function El(t){let e,n,i=t[1].label+"",r,o,l,s,a,u,f,c,p,m,d,y,g,w,E,D,h,C,k,L,T,v,S,I,M,H=be(t[11]),W=[];for(let P=0;P<H.length;P+=1)W[P]=kl(yl(t,H,P));return{c(){e=O("div"),n=O("h5"),r=we(i),o=z(),l=O("div"),s=O("input"),a=z(),u=O("button"),f=z(),c=O("button"),p=z(),m=O("div"),d=O("button"),y=we("Unset selection"),w=z(),E=O("div"),D=O("button"),h=O("i"),L=z(),T=O("select");for(let P=0;P<W.length;P+=1)W[P].c();v=z(),S=O("div"),S.innerHTML="",le(n,"margin","20px 0"),le(n,"font-weight","bold"),le(n,"font-size","16px"),b(s,"type","text"),b(s,"class","form-control category-search search-in-tree-input"),b(s,"tabindex","1"),b(s,"placeholder","Type and press Enter..."),b(u,"class","fas fa-times reset-search-in-tree-button"),ae(u,"hidden",!t[6]),b(c,"class","fas fa-search search-in-tree-button"),b(l,"class","field"),b(l,"data-name","category-search"),b(d,"type","button"),le(d,"margin-bottom","5px"),d.disabled=g=!t[7]||!t[12],b(d,"class","btn btn-default"),b(h,"class",C=Ho("fas "+(t[9]?"fa-sort-amount-up":"fa-sort-amount-down"))+" svelte-1y8n9cg"),b(D,"type","button"),b(D,"class","btn btn-default sort-btn svelte-1y8n9cg"),b(D,"data-tippy","true"),b(D,"title",k=q.translateOption(t[9]?"asc":"desc","sortDirection","Entity")),b(T,"class","form-control"),le(T,"width","auto"),le(T,"max-width","120px"),t[10]===void 0&&pn(()=>t[45].call(T)),b(E,"class","btn-group"),le(m,"margin-top","20px"),le(m,"display","flex"),le(m,"justify-content","space-between"),le(m,"flex-wrap","wrap"),b(e,"class","panel-group category-search"),le(e,"margin-bottom","20px"),b(S,"class","panel-group category-tree")},m(P,x){U(P,e,x),_(e,n),_(n,r),_(e,o),_(e,l),_(l,s),t[43](s),_(l,a),_(l,u),_(l,f),_(l,c),_(e,p),_(e,m),_(m,d),_(d,y),_(m,w),_(m,E),_(E,D),_(D,h),_(E,L),_(E,T);for(let Z=0;Z<W.length;Z+=1)W[Z]&&W[Z].m(T,null);Vo(T,t[10],!0),U(P,v,x),U(P,S,x),t[46](S),I||(M=[fe(s,"keydown",t[44]),fe(u,"click",t[18]),fe(c,"click",t[19]),fe(d,"click",t[16]),fe(D,"click",t[21]),fe(T,"change",t[20]),fe(T,"change",t[45])],I=!0)},p(P,x){if(x[0]&2&&i!==(i=P[1].label+"")&&xe(r,i),x[0]&64&&ae(u,"hidden",!P[6]),x[0]&4224&&g!==(g=!P[7]||!P[12])&&(d.disabled=g),x[0]&512&&C!==(C=Ho("fas "+(P[9]?"fa-sort-amount-up":"fa-sort-amount-down"))+" svelte-1y8n9cg")&&b(h,"class",C),x[0]&512&&k!==(k=q.translateOption(P[9]?"asc":"desc","sortDirection","Entity"))&&b(D,"title",k),x[0]&2048){H=be(P[11]);let Z;for(Z=0;Z<H.length;Z+=1){const me=yl(P,H,Z);W[Z]?W[Z].p(me,x):(W[Z]=kl(me),W[Z].c(),W[Z].m(T,null))}for(;Z<W.length;Z+=1)W[Z].d(1);W.length=H.length}x[0]&3072&&Vo(T,P[10])},d(P){P&&(X(e),X(v),X(S)),t[43](null),sn(W,P),t[46](null),I=!1,at(M)}}}function kl(t){let e,n=t[65].label+"",i,r,o;return{c(){e=O("option"),i=we(n),r=z(),e.__value=o=t[65].name,Go(e,e.__value)},m(l,s){U(l,e,s),_(e,i),_(e,r)},p(l,s){s[0]&2048&&n!==(n=l[65].label+"")&&xe(i,n),s[0]&2048&&o!==(o=l[65].name)&&(e.__value=o,Go(e,e.__value))},d(l){l&&X(e)}}}function Dl(t){let e,n,i;return{c(){e=O("div"),b(e,"class","category-panel-resizer svelte-1y8n9cg")},m(r,o){U(r,e,o),n||(i=fe(e,"mousedown",t[15]),n=!0)},p:Ce,d(r){r&&X(e),n=!1,i()}}}function Dc(t){let e,n,i,r,o,l,s,a,u,f,c,p,m,d,y;function g(h,C){if(h[5].length>0)return kc}let w=g(t),E=w&&w(t),D=!t[0]&&Dl(t);return{c(){e=O("aside"),n=O("button"),i=O("span"),r=z(),o=O("span"),l=z(),s=O("div"),a=O("div"),u=O("div"),f=z(),E&&E.c(),c=z(),D&&D.c(),b(i,"class","toggle-icon-left fas fa-angle-left"),ae(i,"hidden",t[0]),b(o,"class","toggle-icon-right fas fa-angle-right"),ae(o,"hidden",!t[0]),b(n,"type","button"),b(n,"class","btn btn-link collapse-panel"),ae(n,"collapsed",t[0]),le(u,"margin-right","20px"),b(u,"class","layout-editor-container"),le(a,"display","flex"),le(a,"flex-direction","row-reverse"),le(a,"align-items","center"),le(a,"height","35px"),b(s,"class","category-panel"),ae(s,"hidden",t[0]),b(e,"class","catalog-tree-panel"),le(e,"width",t[13]),ae(e,"collapsed",t[0]),ae(e,"catalog-tree-panel-hidden",t[0]),ae(e,"hidden",t[8])},m(h,C){U(h,e,C),_(e,n),_(n,i),_(n,r),_(n,o),_(e,l),_(e,s),_(s,a),_(a,u),t[41](u),_(s,f),E&&E.m(s,null),_(s,c),D&&D.m(s,null),m=!0,d||(y=fe(n,"click",t[14]),d=!0)},p(h,C){(!m||C[0]&1)&&ae(i,"hidden",h[0]),(!m||C[0]&1)&&ae(o,"hidden",!h[0]),(!m||C[0]&1)&&ae(n,"collapsed",h[0]),w===(w=g(h))&&E?E.p(h,C):(E&&E.d(1),E=w&&w(h),E&&(E.c(),E.m(s,c))),h[0]?D&&(D.d(1),D=null):D?D.p(h,C):(D=Dl(h),D.c(),D.m(s,null)),(!m||C[0]&1)&&ae(s,"hidden",h[0]),(!m||C[0]&8192)&&le(e,"width",h[13]),(!m||C[0]&1)&&ae(e,"collapsed",h[0]),(!m||C[0]&1)&&ae(e,"catalog-tree-panel-hidden",h[0]),(!m||C[0]&256)&&ae(e,"hidden",h[8])},i(h){m||(h&&pn(()=>{m&&(p||(p=ea(e,bl,{},!0)),p.run(1))}),m=!0)},o(h){h&&(p||(p=ea(e,bl,{},!1)),p.run(0)),m=!1},d(h){h&&X(e),t[41](null),E&&E.d(),D&&D.d(),h&&p&&p.end(),d=!1,y()}}}function Sc(t){let e=[];return(t||"").split("|").forEach(n=>{n&&e.push(n)}),e}function Cc(t,e,n){((n||t.tree("getTree")).children||[]).findIndex(o=>e.id===o.id)===-1&&t.tree("appendNode",e,n)}function Tc(t,e,n){((n||t.tree("getTree")).children||[]).findIndex(o=>e.id===o.id)===-1&&t.tree("prependNode",e,n)}function Ar(t,e,n){if(!Array.isArray(e)||e.length===0){n();return}const i=e[0];let r=t.find(`.jqtree-title[data-id="${i}"]`);r.length>0&&r.each((o,l)=>{if(l=window.$(l),l.parent().parent().hasClass("jqtree-closed")){let a=t.tree("getNodeByHtmlElement",l);t.tree("openNode",a,!1,()=>Ar(t,e.slice(1),n))}else Ar(t,e.slice(1),n)})}function Oc(t,e,n){let i,r,{scope:o}=e,{model:l}=e,{collection:s}=e,{callbacks:a}=e,{minWidth:u=220}=e,{maxWidth:f=600}=e,{currentWidth:c=u}=e,{isCollapsed:p=!1}=e,{mode:m}=e,{maxSize:d=oa.get("recordsPerPageSmall")||20}=e,{renderLayoutEditor:y}=e;rr();let g,w,E,D=!1,h,C,k=[],L,T="",v,S,I,M=!1,H=!0,W=null,P=[];function x(N){s&&N.name===o&&ye.set("treeWhereData",o,N.where),p||_e()}function Z(){n(0,p=!p),p?(window.$(".page-header").addClass("collapsed").removeClass("not-collapsed"),window.$("#tree-list-table").addClass("collapsed")):(window.$(".page-header").removeClass("collapsed").addClass("not-collapsed"),window.$("#tree-list-table").removeClass("collapsed")),ye.set("catalog-tree-panel",o,p?"collapsed":""),p||_e()}function me(N){if(!D)return;N.preventDefault();const te=C+(N.pageX-h);te>=u&&te<=f&&n(22,c=te)}function Re(N){D=!0,h=N.pageX,C=c,document.addEventListener("mousemove",me),document.addEventListener("mouseup",Be,{once:!0}),document.body.style.userSelect="none"}function Be(){D&&(D=!1,ye.set("panelWidth",o,c.toString()),document.removeEventListener("mousemove",me),document.body.style.userSelect="")}function _e(){Ne(),Ee()}function Ne(){let N=window.$(g);N&&N.tree("destroy")}function Qe(){let N=ye.get("treeWhereData",o)||[];return["_self","_bookmark"].includes(L.name)||(N=[]),N}function Ee(N=null){if(!L)return;let te=window.$(g),$=Qe();if(N===null&&T&&se.get(["scopes",v,"type"])==="Hierarchy"&&!se.get(["scopes",v,"hierarchyDisabled"])){$.push({type:"textFilter",value:T}),Espo.ajax.getRequest(`${v}/action/TreeData`,{where:$,scope:o,link:L.name,sortBy:W,asc:!!H}).then(A=>{Ee(A.tree)});return}let de={dataUrl:rt(),dataFilter:(function(A){return V(A)}).bind(this),selectable:!0,saveState:!1,autoOpen:!1,dragAndDrop:se.get(["scopes",v,"multiParents"])!==!0&&se.get(["scopes",v,"dragAndDrop"])&&W==="sortOrder",useContextMenu:!1,closedIcon:window.$('<i class="fa fa-angle-right"></i>'),openedIcon:window.$('<i class="fa fa-angle-down"></i>'),onCreateLi:(function(A,B,G){A.disabled?B.addClass("disabled"):B.removeClass("disabled");const ne=B.find(".jqtree-title");if(T){let ue=T.replace(/\*/g,"");if(ue.length>0){let je=ne.html(),Ze=je.match(new RegExp(ue,"ig"));if(Ze){let Bt=[];Ze.forEach($t=>{Bt.includes($t)||(Bt.push($t),ne.html(je.replace(new RegExp($t,"g"),`<b>${$t}</b>`)))})}}}["_self","_bookmark"].includes(L.name)&&l&&l.get("id")===A.id&&(te.tree("addToSelection",A),B.addClass("jqtree-selected")),!["_self","_bookmark"].includes(L.name)&&I===A.id&&(te.tree("addToSelection",A),B.addClass("jqtree-selected")),ne.attr("data-id",A.id),de.dragAndDrop&&!A.showMoreDirection&&ne.attr("title",q.translate("useDragAndDrop")),A.showMoreDirection&&(B.addClass("show-more"),B.addClass("show-more-"+A.showMoreDirection),B.find(".jqtree-title").addClass("more-label"))}).bind(this)};N&&(de.data=N,de.autoOpen=!0,de.dragAndDrop=!1,delete de.dataUrl,delete de.dataFilter),te.tree(de),te.on("tree.load_data",A=>{tt.notify(!1),a!=null&&a.treeLoad&&a.treeLoad(v,de)}),te.on("tree.refresh",A=>{if(ye.get("selectedNodeId",o)&&m==="list"){const B=ye.get("selectedNodeId",o),G=ye.get("selectedNodeRoute",o);a!=null&&a.selectNode&&a.selectNode({id:B,route:G},!0)}m==="detail"&&(l&&["_self","_bookmark"].includes(L.name)?ht(l.get("id"),Object.keys(l.get("hierarchyRoute")??[]).reverse()):ye.get("selectedNodeId",o)&&ht(ye.get("selectedNodeId",o),Sc(ye.get("selectedNodeRoute",o))))}),te.on("tree.move",A=>{A.preventDefault();const B="parent";let G=A.move_info,ne={_position:G.position,_sortAsc:H,_target:G.target_node.id};ne[B+"Id"]=null,ne[B+"Name"]=null,G.position==="inside"?(ne[B+"Id"]=G.target_node.id,ne[B+"Name"]=G.target_node.name):G.target_node.parent.id&&(ne[B+"Id"]=G.target_node.parent.id,ne[B+"Name"]=G.target_node.parent.name),Espo.ajax.patchRequest(`${v}/${G.moved_node.id}`,ne).success(ue=>{G.do_move()})}),te.on("tree.click",A=>{if(A.preventDefault(),A.node.disabled)return!1;const B=window.$(A.click_event.target);if(B.hasClass("jqtree-title")||B.parent().hasClass("jqtree-title")){let G=A.node;if(G.showMoreDirection)return Oe(G);let ne=[];for(;G.parent.id;)ne.push(G.parent.id),G=G.parent;let ue={id:A.node.id,route:"",click:!0};ne.length>0&&(ue.route="|"+ne.reverse().join("|")+"|"),a!=null&&a.selectNode&&a.selectNode(ue)}})}function Oe(N){tt.notify("Loading..."),Espo.ajax.getRequest(rt(N)).then(te=>{if(te.list){const $=window.$(g);N.showMoreDirection==="up"?V(JSON.parse(JSON.stringify(te)),"up").reverse().forEach(de=>{Tc($,de,N.getParent())}):N.showMoreDirection==="down"&&V(JSON.parse(JSON.stringify(te)),"down").forEach(de=>{Cc($,de,N.getParent())}),$.tree("removeNode",N)}})}function rt(N){let te=v+`/action/Tree?isTreePanel=1&scope=${o}&link=${L.name}`;if(W&&(te+=`&sortBy=${W}&asc=${H?"true":"false"}`),N&&N.showMoreDirection){let de=N.offset,A=d;if(N.showMoreDirection==="up"){let B=N.offset-A;de=N.offset-A,B<0?(de=0,A=A+B):de=B}else N.showMoreDirection==="down"&&(de=de+1);te+="&offset="+de+"&maxSize="+A,N.getParent()&&(te+="&node="+N.getParent().id)}else N&&N.id?te+="&node="+N.id+"&offset=0&maxSize="+d:l&&l.id&&[l.urlRoot,"Bookmark"].includes(v)&&(te+="&selectedId="+l.id);let $=Qe();return T&&($=[...$,{type:"textFilter",value:T}]),$.length>0&&(te+="&",te+=window.$.param({where:$})),te}function ht(N,te){const $=window.$(g);Ar($,te,()=>{let A=$.tree("getNodeById",N);A&&($.tree("addToSelection",A),n(7,I=N)),$.find(".jqtree-title").each((B,G)=>{G=window.$(G);let ne=G.parent().parent();G.data("id")!==N&&$.tree("getNodeById",G.data("id"))?($.tree("removeFromSelection",$.tree("getNodeById",G.data("id"))),ne.removeClass("jqtree-selected")):ne.hasClass("jqtree-selected")||ne.addClass("jqtree-selected")})})}function ut(){a!=null&&a.selectNode&&a.selectNode({id:I})}function F(N){const te=R(),$=te.tree("getNodeById",N);n(7,I=null),$&&te.tree("removeFromSelection",$)}function R(){return window.$(g)}function V(N,te=null){return N.list?(J(N.list,te),N.list):N}function J(N,te){if(!te||te==="up"){let $=JSON.parse(JSON.stringify(N)).shift();$&&$.offset&&$.offset!==0&&N.unshift({id:"show-more-"+$.offset,offset:$.offset,showMoreDirection:"up",name:q.translate("Show more")})}if(!te||te==="down"){let $=JSON.parse(JSON.stringify(N)).pop();$&&$.offset&&$.total-1!==$.offset&&N.push({id:"show-more-"+$.offset,offset:$.offset,showMoreDirection:"down",name:q.translate("Show more")})}N.forEach($=>{$.children&&J($.children)})}function re(N){return N==="_self"?o:N==="_bookmark"?"Bookmark":se.get(["entityDefs",o,"links",N,"entity"])||se.get(["entityDefs",o,"fields",N,"entity"])}function ve(N){L&&L.name===N.name||(n(6,T=""),n(4,E.value="",E),ye.clear("treeSearchValue",v),m==="list"?I&&(a!=null&&a.selectNode&&a.selectNode({id:I}),n(7,I=null)):n(7,I=null),n(1,L=N),wt(),ye.set("treeItem",o,N.name),tt.notify("Loading..."),dn().then(()=>{_e()}))}function De(){n(4,E.value="",E),m==="detail"&&ye.clear("treeWhereData",o),Xe()}function Xe(){n(6,T=E.value),T?ye.set("treeSearchValue",o,T):ye.clear("treeSearchValue",o),tt.notify("Loading..."),_e()}function Q(){v==="Bookmark"&&_e()}function ce(){return S}function ge(N){n(10,W=N.target.value),ye.set("treeItemSorting",o,{sortBy:W,sortAsc:H}),_e()}function Ae(N){N.preventDefault(),n(9,H=!H),ye.set("treeItemSorting",o,{sortBy:W,sortAsc:H}),_e()}function He(N){It.get(o,"leftSidebar",null,null,te=>{S=te,n(5,k=te.layout.map(de=>{const A=se.get(["entityDefs",o,"fields",de.name,"type"]);let B="";if(de.name==="_self")B=q.get("Global","scopeNamesPlural",o);else if(de.name==="_bookmark")B=q.get("Global","scopeNamesPlural","Bookmark");else{if(A=="link"){const G=re(de.name);B=q.get("Global","scopeNamesPlural",G)}B||(B=q.get(o,"links",de.name)||q.get(o,"fields",de.name)||q.get("Global","fields",de.name))}return{name:de.name,label:B}}));const $=ye.get("treeItem",o);k.length>0&&(!$||!k.find(de=>de.name===$)?(ye.set("treeItem",o,k[0].name),n(1,L=k[0])):n(1,L=k.find(de=>de.name===$)),wt(!0)),N()})}function wt(N){if(n(40,v=re(L.name)),v==="Bookmark"&&n(40,v=o),N&&L.name===ye.get("treeItem",o)){const te=ye.get("treeItemSorting",o);if(te&&typeof te=="object"&&se.get(["entityDefs",v,"fields",te.sortBy])){n(9,H=te.sortAsc),n(10,W=te.sortBy);return}}se.get(["scopes",v,"type"])==="Hierarchy"&&!se.get(["scopes",v,"hierarchyDisabled"])&&L.name!=="_bookmark"?n(10,W="sortOrder"):n(10,W=se.get(["entityDefs",v,"collection","sortBy"])||"name"),n(9,H=!!se.get(["entityDefs",v,"collection","asc"])),ye.set("treeItemSorting",o,{sortBy:W,sortAsc:H})}function Rt(){He(()=>{dn().then(()=>{_e()})})}un(()=>{const N=ye.get("panelWidth",o);return N&&n(22,c=parseInt(N)||u),(window.innerWidth<=767||ye.get("catalog-tree-panel",o))&&n(0,p=!0),He(()=>{var te,$;k.length===0&&(n(0,p=!0),($=(te=bi.get())==null?void 0:te.user)!=null&&$.isAdmin||n(8,M=!0)),dn().then(()=>{n(6,T=ye.get("treeSearchValue",o)||null),T&&n(4,E.value=T,E),p||Ee()}),y&&y(w)}),()=>{D&&Be()}});function Zt(N){ze[N?"unshift":"push"](()=>{w=N,n(3,w)})}const En=N=>ve(N);function kn(N){ze[N?"unshift":"push"](()=>{E=N,n(4,E)})}const Dn=N=>N.key==="Enter"&&Xe();function Sn(){W=Nu(this),n(10,W),n(11,P),n(40,v),n(23,o),n(1,L)}function Lr(N){ze[N?"unshift":"push"](()=>{g=N,n(2,g)})}return t.$$set=N=>{"scope"in N&&n(23,o=N.scope),"model"in N&&n(24,l=N.model),"collection"in N&&n(25,s=N.collection),"callbacks"in N&&n(26,a=N.callbacks),"minWidth"in N&&n(27,u=N.minWidth),"maxWidth"in N&&n(28,f=N.maxWidth),"currentWidth"in N&&n(22,c=N.currentWidth),"isCollapsed"in N&&n(0,p=N.isCollapsed),"mode"in N&&n(29,m=N.mode),"maxSize"in N&&n(30,d=N.maxSize),"renderLayoutEditor"in N&&n(31,y=N.renderLayoutEditor)},t.$$.update=()=>{if(t.$$.dirty[0]&71303168&&c&&a!=null&&a.treeWidthChanged&&a.treeWidthChanged(c),t.$$.dirty[0]&4194305&&n(13,i=p?"auto":`${c}px`),t.$$.dirty[0]&2&&n(40,v=L?re(L.name):null),t.$$.dirty[0]&536870914&&n(12,r=L&&!["_self","_bookmark"].includes(L.name)&&m==="list"),t.$$.dirty[0]&8388608|t.$$.dirty[1]&512)if(!v)n(11,P=[]);else{const N=v==="Bookmark"?o:v,te=se.get(["entityDefs",N,"fields"]);n(11,P=Object.keys(te).filter(function($){return["varchar","text","int","float","date","datetime"].includes(te[$].type)&&!te[$].notStorable}).sort(function($,de){return q.translate($,"fields",N).localeCompare(q.translate(de,"fields",N))}).map($=>({name:$,label:q.translate($,"fields",N)})))}},[p,L,g,w,E,k,T,I,M,H,W,P,r,i,Z,Re,ut,ve,De,Xe,ge,Ae,c,o,l,s,a,u,f,m,d,y,x,_e,ht,F,R,Q,ce,Rt,v,Zt,En,kn,Dn,Sn,Lr]}class Ac extends Ge{constructor(e){super(),qe(this,e,Oc,Dc,Le,{scope:23,model:24,collection:25,callbacks:26,minWidth:27,maxWidth:28,currentWidth:22,isCollapsed:0,mode:29,maxSize:30,renderLayoutEditor:31,handleCollectionSearch:32,rebuildTree:33,selectTreeNode:34,unSelectTreeNode:35,getTreeEl:36,reloadBookmarks:37,getLayoutData:38,refreshLayout:39},null,[-1,-1,-1])}get handleCollectionSearch(){return this.$$.ctx[32]}get rebuildTree(){return this.$$.ctx[33]}get selectTreeNode(){return this.$$.ctx[34]}get unSelectTreeNode(){return this.$$.ctx[35]}get getTreeEl(){return this.$$.ctx[36]}get reloadBookmarks(){return this.$$.ctx[37]}get getLayoutData(){return this.$$.ctx[38]}get refreshLayout(){return this.$$.ctx[39]}}function Sl(t,e,n){const i=t.slice();return i[18]=e[n],i}function Cl(t){let e,n,i;function r(){return t[12](t[18])}return{c(){e=O("a"),e.textContent=`${t[18].label} `,b(e,"href","javascript:"),b(e,"class","btn btn-link item svelte-1wl9nbg")},m(o,l){U(o,e,l),n||(i=fe(e,"click",r),n=!0)},p(o,l){t=o},d(o){o&&X(e),n=!1,i()}}}function Tl(t){let e,n=t[18].name!==t[1].name&&Cl(t);return{c(){n&&n.c(),e=di()},m(i,r){n&&n.m(i,r),U(i,e,r)},p(i,r){i[18].name!==i[1].name?n?n.p(i,r):(n=Cl(i),n.c(),n.m(e.parentNode,e)):n&&(n.d(1),n=null)},d(i){i&&X(e),n&&n.d(i)}}}function Ol(t){let e,n,i;return{c(){e=O("div"),b(e,"class","side-panel-resizer svelte-1wl9nbg")},m(r,o){U(r,e,o),n||(i=fe(e,"mousedown",t[4]),n=!0)},p:Ce,d(r){r&&X(e),n=!1,i()}}}function Lc(t){let e,n,i,r,o,l,s,a,u,f,c=t[1].label+"",p,m,d,y,g,w,E,D,h,C,k=be(t[3]),L=[];for(let v=0;v<k.length;v+=1)L[v]=Tl(Sl(t,k,v));let T=!t[0]&&Ol(t);return{c(){e=O("aside"),n=O("button"),i=O("span"),r=z(),o=O("span"),l=z(),s=O("div");for(let v=0;v<L.length;v+=1)L[v].c();a=z(),u=O("div"),f=O("h5"),p=we(c),m=z(),d=O("div"),y=z(),g=O("div"),g.innerHTML="",w=z(),E=O("div"),E.innerHTML="",D=z(),T&&T.c(),b(i,"class","toggle-icon-left fas fa-angle-left"),ae(i,"hidden",!t[0]),b(o,"class","toggle-icon-right fas fa-angle-right"),ae(o,"hidden",t[0]),b(n,"type","button"),b(n,"class","btn btn-link collapse-panel svelte-1wl9nbg"),b(s,"class","btn-group svelte-1wl9nbg"),le(f,"font-weight","bold"),le(f,"margin-right","10px"),le(f,"font-size","16px"),b(d,"class","layout-editor-container svelte-1wl9nbg"),ae(d,"hidden",t[1].name!=="summary"),le(u,"display","flex"),le(u,"align-items","center"),b(u,"class","svelte-1wl9nbg"),b(g,"class","summary svelte-1wl9nbg"),ae(g,"hidden",t[1].name!=="summary"),b(E,"class","activities svelte-1wl9nbg"),ae(E,"hidden",t[1].name!=="activities"),b(e,"class","right-side-view svelte-1wl9nbg"),le(e,"width",t[2]),ae(e,"collapsed",t[0])},m(v,S){U(v,e,S),_(e,n),_(n,i),_(n,r),_(n,o),_(e,l),_(e,s);for(let I=0;I<L.length;I+=1)L[I]&&L[I].m(s,null);_(e,a),_(e,u),_(u,f),_(f,p),_(u,m),_(u,d),_(e,y),_(e,g),_(e,w),_(e,E),_(e,D),T&&T.m(e,null),h||(C=[fe(n,"click",t[6]),fe(e,"click",Lu(t[6]))],h=!0)},p(v,[S]){if(S&1&&ae(i,"hidden",!v[0]),S&1&&ae(o,"hidden",v[0]),S&42){k=be(v[3]);let I;for(I=0;I<k.length;I+=1){const M=Sl(v,k,I);L[I]?L[I].p(M,S):(L[I]=Tl(M),L[I].c(),L[I].m(s,null))}for(;I<L.length;I+=1)L[I].d(1);L.length=k.length}S&2&&c!==(c=v[1].label+"")&&xe(p,c),S&2&&ae(d,"hidden",v[1].name!=="summary"),S&2&&ae(g,"hidden",v[1].name!=="summary"),S&2&&ae(E,"hidden",v[1].name!=="activities"),v[0]?T&&(T.d(1),T=null):T?T.p(v,S):(T=Ol(v),T.c(),T.m(e,null)),S&4&&le(e,"width",v[2]),S&1&&ae(e,"collapsed",v[0])},i:Ce,o:Ce,d(v){v&&X(e),sn(L,v),T&&T.d(),h=!1,at(C)}}}function Ic(t,e,n){let i,{scope:r}=e,{minWidth:o=300}=e,{maxWidth:l=600}=e,{currentWidth:s=o}=e,{loadSummary:a}=e,{isCollapsed:u=!1}=e,f=!1,c,p,m=[{name:"summary",label:"Summary"}],d=m[0];function y(C){if(!f)return;C.preventDefault();const k=p+(c-C.pageX);k>=o&&k<=l&&n(7,s=k)}function g(C){f=!0,c=C.pageX,p=s,document.addEventListener("mousemove",y),document.addEventListener("mouseup",w,{once:!0}),document.body.style.userSelect="none"}function w(){f&&(f=!1,ye.set("rightSideView",r,s.toString()),document.removeEventListener("mousemove",y),document.body.style.userSelect="")}function E(C){d&&d.name===C.name||n(1,d=C)}function D(C){console.log(C),n(0,u=!u),ye.set("right-side-view-collapse",r,u?"collapsed":"")}un(()=>{const C=ye.get("rightSideView",r);C&&n(7,s=parseInt(C)||o),n(0,u=ye.get("right-side-view-collapse",r)==="collapsed"),a()});const h=C=>E(C);return t.$$set=C=>{"scope"in C&&n(8,r=C.scope),"minWidth"in C&&n(9,o=C.minWidth),"maxWidth"in C&&n(10,l=C.maxWidth),"currentWidth"in C&&n(7,s=C.currentWidth),"loadSummary"in C&&n(11,a=C.loadSummary),"isCollapsed"in C&&n(0,u=C.isCollapsed)},t.$$.update=()=>{t.$$.dirty&129&&n(2,i=u?"auto":`${s}px`)},[u,d,i,m,g,E,D,s,r,o,l,a,h]}class Pc extends Ge{constructor(e){super(),qe(this,e,Ic,Lc,Le,{scope:8,minWidth:9,maxWidth:10,currentWidth:7,loadSummary:11,isCollapsed:0})}}window.SvelteLanguage=q,window.SvelteUserData=bi,window.SvelteNotifier=tt,window.SvelteLayoutManager=It,window.SvelteMetadata=se,window.SvelteModelFactory=fr,window.SvelteConfig=oa,window.SvelteStorage=ye,window.driver=Jl,window.tippy=Bn,Me.ApiRequestComponent=ac,Me.Favorites=Ec,Me.JobManagerIcon=Zu,Me.LayoutComponent=ic,Me.Navigation=bc,Me.SideView=Pc,Me.TreePanel=Ac,Me.UpdatePanel=af,Object.defineProperty(Me,Symbol.toStringTag,{value:"Module"})});
