(function(fe,Z){typeof exports=="object"&&typeof module<"u"?Z(exports):typeof define=="function"&&define.amd?define(["exports"],Z):(fe=typeof globalThis<"u"?globalThis:fe||self,Z(fe.Svelte={}))})(this,function(fe){"use strict";var ha=Object.defineProperty;var ma=(fe,Z,qe)=>Z in fe?ha(fe,Z,{enumerable:!0,configurable:!0,writable:!0,value:qe}):fe[Z]=qe;var Sn=(fe,Z,qe)=>ma(fe,typeof Z!="symbol"?Z+"":Z,qe);function Z(){}function qe(t,e){for(const n in e)t[n]=e[n];return t}function kn(t){return t()}function Tn(){return Object.create(null)}function Ie(t){t.forEach(kn)}function Pn(t){return typeof t=="function"}function ve(t,e){return t!=t?e==e:t!==e||t&&typeof t=="object"||typeof t=="function"}let St;function Ln(t,e){return t===e?!0:(St||(St=document.createElement("a")),St.href=e,t===St.href)}function Ml(t){return Object.keys(t).length===0}function Rl(t,e,n,l){if(t){const i=Cn(t,e,n,l);return t[0](i)}}function Cn(t,e,n,l){return t[1]&&l?qe(n.ctx.slice(),t[1](l(e))):n.ctx}function Hl(t,e,n,l){if(t[2]&&l){const i=t[2](l(n));if(e.dirty===void 0)return i;if(typeof i=="object"){const a=[],r=Math.max(e.dirty.length,i.length);for(let s=0;s<r;s+=1)a[s]=e.dirty[s]|i[s];return a}return e.dirty|i}return e.dirty}function Bl(t,e,n,l,i,a){if(i){const r=Cn(e,n,l,a);t.p(r,i)}}function Yl(t){if(t.ctx.length>32){const e=[],n=t.ctx.length/32;for(let l=0;l<n;l++)e[l]=-1;return e}return-1}function b(t,e){t.appendChild(e)}function Q(t,e,n){t.insertBefore(e,n||null)}function G(t){t.parentNode&&t.parentNode.removeChild(t)}function Zt(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}function T(t){return document.createElement(t)}function ce(t){return document.createTextNode(t)}function X(){return ce(" ")}function In(){return ce("")}function le(t,e,n,l){return t.addEventListener(e,n,l),()=>t.removeEventListener(e,n,l)}function je(t){return function(e){return e.preventDefault(),t.call(this,e)}}function Jt(t){return function(e){return e.stopPropagation(),t.call(this,e)}}function m(t,e,n){n==null?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}const zl=["width","height"];function kt(t,e){const n=Object.getOwnPropertyDescriptors(t.__proto__);for(const l in e)e[l]==null?t.removeAttribute(l):l==="style"?t.style.cssText=e[l]:l==="__value"?t.value=t[l]=e[l]:n[l]&&n[l].set&&zl.indexOf(l)===-1?t[l]=e[l]:m(t,l,e[l])}function Xl(t){return Array.from(t.childNodes)}function Ae(t,e){e=""+e,t.data!==e&&(t.data=e)}function We(t,e,n,l){n==null?t.style.removeProperty(e):t.style.setProperty(e,n,"")}function Tt(t,e,n){t.classList.toggle(e,!!n)}function ql(t,e,{bubbles:n=!1,cancelable:l=!1}={}){return new CustomEvent(t,{detail:e,bubbles:n,cancelable:l})}let dt;function ht(t){dt=t}function Pt(){if(!dt)throw new Error("Function called outside component initialization");return dt}function xt(t){Pt().$$.on_mount.push(t)}function jl(t){Pt().$$.after_update.push(t)}function An(t){Pt().$$.on_destroy.push(t)}function Wl(){const t=Pt();return(e,n,{cancelable:l=!1}={})=>{const i=t.$$.callbacks[e];if(i){const a=ql(e,n,{cancelable:l});return i.slice().forEach(r=>{r.call(t,a)}),!a.defaultPrevented}return!0}}const tt=[],Oe=[];let nt=[];const On=[],Fn=Promise.resolve();let $t=!1;function Nn(){$t||($t=!0,Fn.then(Rn))}function Mn(){return Nn(),Fn}function en(t){nt.push(t)}const tn=new Set;let lt=0;function Rn(){if(lt!==0)return;const t=dt;do{try{for(;lt<tt.length;){const e=tt[lt];lt++,ht(e),Gl(e.$$)}}catch(e){throw tt.length=0,lt=0,e}for(ht(null),tt.length=0,lt=0;Oe.length;)Oe.pop()();for(let e=0;e<nt.length;e+=1){const n=nt[e];tn.has(n)||(tn.add(n),n())}nt.length=0}while(tt.length);for(;On.length;)On.pop()();$t=!1,tn.clear(),ht(t)}function Gl(t){if(t.fragment!==null){t.update(),Ie(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(en)}}function Ul(t){const e=[],n=[];nt.forEach(l=>t.indexOf(l)===-1?e.push(l):n.push(l)),n.forEach(l=>l()),nt=e}const Lt=new Set;let Ql;function Ee(t,e){t&&t.i&&(Lt.delete(t),t.i(e))}function Fe(t,e,n,l){if(t&&t.o){if(Lt.has(t))return;Lt.add(t),Ql.c.push(()=>{Lt.delete(t)}),t.o(e)}}function de(t){return(t==null?void 0:t.length)!==void 0?t:Array.from(t)}function Ct(t,e){t.d(1),e.delete(t.key)}function It(t,e,n,l,i,a,r,s,u,o,f,c){let d=t.length,p=a.length,h=d;const _={};for(;h--;)_[t[h].key]=h;const g=[],y=new Map,D=new Map,E=[];for(h=p;h--;){const w=c(i,a,h),H=n(w);let C=r.get(H);C?E.push(()=>C.p(w,e)):(C=o(H,w),C.c()),y.set(H,g[h]=C),H in _&&D.set(H,Math.abs(h-_[H]))}const k=new Set,v=new Set;function P(w){Ee(w,1),w.m(s,f),r.set(w.key,w),f=w.first,p--}for(;d&&p;){const w=g[p-1],H=t[d-1],C=w.key,ne=H.key;w===H?(f=w.first,d--,p--):y.has(ne)?!r.has(C)||k.has(C)?P(w):v.has(ne)?d--:D.get(C)>D.get(ne)?(v.add(C),P(w)):(k.add(ne),d--):(u(H,r),d--)}for(;d--;){const w=t[d];y.has(w.key)||u(w,r)}for(;p;)P(g[p-1]);return Ie(E),g}function Hn(t,e){const n={},l={},i={$$scope:1};let a=t.length;for(;a--;){const r=t[a],s=e[a];if(s){for(const u in r)u in s||(l[u]=1);for(const u in s)i[u]||(n[u]=s[u],i[u]=1);t[a]=s}else for(const u in r)i[u]=1}for(const r in l)r in n||(n[r]=void 0);return n}function Ge(t){t&&t.c()}function Ne(t,e,n){const{fragment:l,after_update:i}=t.$$;l&&l.m(e,n),en(()=>{const a=t.$$.on_mount.map(kn).filter(Pn);t.$$.on_destroy?t.$$.on_destroy.push(...a):Ie(a),t.$$.on_mount=[]}),i.forEach(en)}function Me(t,e){const n=t.$$;n.fragment!==null&&(Ul(n.after_update),Ie(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function Vl(t,e){t.$$.dirty[0]===-1&&(tt.push(t),Nn(),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function De(t,e,n,l,i,a,r=null,s=[-1]){const u=dt;ht(t);const o=t.$$={fragment:null,ctx:[],props:a,update:Z,not_equal:i,bound:Tn(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(u?u.$$.context:[])),callbacks:Tn(),dirty:s,skip_bound:!1,root:e.target||u.$$.root};r&&r(o.root);let f=!1;if(o.ctx=n?n(t,e.props||{},(c,d,...p)=>{const h=p.length?p[0]:d;return o.ctx&&i(o.ctx[c],o.ctx[c]=h)&&(!o.skip_bound&&o.bound[c]&&o.bound[c](h),f&&Vl(t,c)),d}):[],o.update(),f=!0,Ie(o.before_update),o.fragment=l?l(o.ctx):!1,e.target){if(e.hydrate){const c=Xl(e.target);o.fragment&&o.fragment.l(c),c.forEach(G)}else o.fragment&&o.fragment.c();e.intro&&Ee(t.$$.fragment),Ne(t,e.target,e.anchor),Rn()}ht(u)}class Se{constructor(){Sn(this,"$$");Sn(this,"$$set")}$destroy(){Me(this,1),this.$destroy=Z}$on(e,n){if(!Pn(n))return Z;const l=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return l.push(n),()=>{const i=l.indexOf(n);i!==-1&&l.splice(i,1)}}$set(e){this.$$set&&!Ml(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}const Kl="4",it=[];function at(t,e=Z){let n;const l=new Set;function i(s){if(ve(t,s)&&(t=s,n)){const u=!it.length;for(const o of l)o[1](),it.push(o,t);if(u){for(let o=0;o<it.length;o+=2)it[o][0](it[o+1]);it.length=0}}}function a(s){i(s(t))}function r(s,u=Z){const o=[s,u];return l.add(o),l.size===1&&(n=e(i,a)||Z),s(t),()=>{l.delete(o),l.size===0&&n&&(n(),n=null)}}return{set:i,update:a,subscribe:r}}const nn=at({}),Y={setTranslations(t){nn.set(t)},has(t,e,n){let l=!1;return nn.subscribe(i=>{if(n in i&&e in i[n]&&t in i[n][e]){l=!0;return}})(),l},get(t,e,n){let l=n;return nn.subscribe(i=>{if(t in i&&e in i[t]&&n in i[t][e]){l=i[t][e][n];return}if(t in i&&e in i[t]&&n in i[t][e]){l=i[t][e][n];return}if(t=="Global"){l=n;return}l=null})(),l},translate(t,e=null,n=null){n=n||"Global",e=e||"labels";let l=Y.get(n,e,t);return l===null&&n!="Global"&&(l=Y.get("Global",e,t)),l},translateOption(t,e,n=null){let l=Y.translate(e,"options",n);return l===null?"":typeof l=="object"?l[t]:t}},Bn=at({}),Yn={set(t){Bn.set(t)},get(){let t=null;return Bn.subscribe(e=>{e&&(t=e)})(),t}},ln=at(),Re={setNotifier(t){ln.set(t)},notify(t,e=null,n=2e3){ln.subscribe(l=>{l&&l.notify(t,e,2e3)})()},confirm(t=null,e=null,n){ln.subscribe(l=>{if(l){let i=null,a=null,r=null;typeof t=="string"||t instanceof String?(a=t,r=Y.translate("Yes")):(t=t||{},a=t.message,r=t.confirmText,i=t.confirmStyle||null),l.confirm(a,{confirmText:r,cancelText:Y.translate("Cancel"),confirmStyle:i},e,n)}})()}},At=at(),He={setLayoutManager(t){At.set(t)},resetToDefault(t,e,n,l){let i=null;return At.subscribe(a=>{a&&(i=a.resetToDefault(t,e,n,l))})(),i},get:function(t,e,n,l,i){let a=null;return At.subscribe(r=>{r&&(a=r.get(t,e,n,l,i))})(),a},set:function(t,e,n,l,i){let a=null;return At.subscribe(r=>{r&&(a=r.set(t,e,n,l,i))})(),a}},zn=at(),Ue={setMetadata(t){zn.set(t)},get(t){let e=null;return zn.subscribe(n=>{n&&(e=n.get(t))})(),e}},Xn=at(),Ot={setModelFactory(t){Xn.set(t)},create(t,e){Xn.subscribe(n=>{n&&n.create(t,e)})()}};typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(Kl);function qn(t){let e,n,l,i,a,r,s,u,o,f,c,d,p,h,_;function g(E,k){return E[2]?Jl:Zl}let y=g(t),D=y(t);return{c(){e=T("div"),n=T("div"),l=T("div"),i=T("span"),i.textContent=`${Y.translate("queueManager","labels","QueueItem")}`,a=X(),r=T("span"),s=T("a"),s.innerHTML='<span aria-hidden="true">Ã—</span>',u=X(),D.c(),o=X(),f=T("a"),f.textContent=`${Y.translate("View List")}`,c=X(),d=T("div"),p=T("div"),p.textContent=`${Y.translate("Loading...")}`,m(i,"class","panel-heading-title"),m(s,"href","/"),m(s,"class","close svelte-1p6ppx8"),m(f,"href","#QueueItem"),m(f,"title",Y.translate("View List")),m(f,"class","qp-view-list svelte-1p6ppx8"),m(r,"class","pull-right"),m(l,"class","panel-heading clearfix"),m(p,"class","list-container"),m(d,"class","panel-body"),m(n,"class","panel panel-default"),m(e,"class","queue-panel-container")},m(E,k){Q(E,e,k),b(e,n),b(n,l),b(l,i),b(l,a),b(l,r),b(r,s),b(r,u),D.m(r,null),b(r,o),b(r,f),b(n,c),b(n,d),b(d,p),t[9](e),h||(_=le(s,"click",t[6]),h=!0)},p(E,k){y===(y=g(E))&&D?D.p(E,k):(D.d(1),D=y(E),D&&(D.c(),D.m(r,o)))},d(E){E&&G(e),D.d(),t[9](null),h=!1,_()}}}function Zl(t){let e,n,l;return{c(){e=T("a"),e.textContent=`${Y.translate("Pause")}`,m(e,"href","/"),m(e,"title",Y.translate("Pause")),m(e,"class","qm-button")},m(i,a){Q(i,e,a),n||(l=le(e,"click",t[8]),n=!0)},p:Z,d(i){i&&G(e),n=!1,l()}}}function Jl(t){let e,n,l;return{c(){e=T("a"),e.textContent=`${Y.translate("Start")}`,m(e,"href","/"),m(e,"title",Y.translate("Start")),m(e,"class","qm-button")},m(i,a){Q(i,e,a),n||(l=le(e,"click",t[7]),n=!0)},p:Z,d(i){i&&G(e),n=!1,l()}}}function xl(t){let e,n=t[0]&&qn(t);return{c(){n&&n.c(),e=In()},m(l,i){n&&n.m(l,i),Q(l,e,i)},p(l,[i]){l[0]?n?n.p(l,i):(n=qn(l),n.c(),n.m(e.parentNode,e)):n&&(n.d(1),n=null)},i:Z,o:Z,d(l){l&&G(e),n&&n.d(l)}}}function $l(t,e,n){let{isOpen:l=!1}=e,{close:i}=e,{icon:a}=e,r=!1;window.addEventListener("publicDataFetched",h=>{n(2,r=!!h.detail.qmPaused)});let s;function u(h){s&&!s.contains(h.target)&&a&&!a.contains(h.target)&&l===!0&&i()}xt(()=>{document.addEventListener("click",u)}),An(()=>{document.removeEventListener("click",u)});async function o(h){let _=Yn.get();if(_)try{const g=await fetch("/api/v1/App/action/QueueManagerUpdate",{method:"POST",headers:{"Content-Type":"application/json","Authorization-Token":btoa(_.user.userName+":"+_.token)},body:JSON.stringify({pause:h})});if(!g.ok)throw new Error("Network response was not ok");await g.json(),Re.notify("Done","success")}catch(g){console.error("Error:",g)}}const f=h=>{h.preventDefault(),i()},c=h=>{h.preventDefault(),o(!1)},d=h=>{h.preventDefault(),o(!0)};function p(h){Oe[h?"unshift":"push"](()=>{s=h,n(3,s)})}return t.$$set=h=>{"isOpen"in h&&n(0,l=h.isOpen),"close"in h&&n(1,i=h.close),"icon"in h&&n(5,a=h.icon)},[l,i,r,s,o,a,f,c,d,p]}class ei extends Se{constructor(e){super(),De(this,e,$l,xl,ve,{isOpen:0,close:1,icon:5})}}function jn(t){let e;return{c(){e=T("span"),m(e,"class","fas fa-pause-circle pause-icon")},m(n,l){Q(n,e,l)},d(n){n&&G(e)}}}function ti(t){let e,n,l,i,a,r,s,u,o=t[2]&&jn();return a=new ei({props:{icon:t[0],isOpen:t[1],close:t[4]}}),{c(){e=T("a"),n=T("span"),l=X(),o&&o.c(),i=X(),Ge(a.$$.fragment),m(n,"class","fas fa-tasks"),m(e,"href","/"),m(e,"class","notifications-button")},m(f,c){Q(f,e,c),b(e,n),b(e,l),o&&o.m(e,null),t[6](e),Q(f,i,c),Ne(a,f,c),r=!0,s||(u=le(e,"click",t[7]),s=!0)},p(f,[c]){f[2]?o||(o=jn(),o.c(),o.m(e,null)):o&&(o.d(1),o=null);const d={};c&1&&(d.icon=f[0]),c&2&&(d.isOpen=f[1]),a.$set(d)},i(f){r||(Ee(a.$$.fragment,f),r=!0)},o(f){Fe(a.$$.fragment,f),r=!1},d(f){f&&(G(e),G(i)),o&&o.d(),t[6](null),Me(a,f),s=!1,u()}}}function ni(t,e,n){let{renderTable:l=()=>{}}=e,i,a=!1,r=!1;window.addEventListener("publicDataFetched",c=>{n(2,r=!!c.detail.qmPaused)});function s(){a||(n(1,a=!0),l())}function u(){n(1,a=!1),window.dispatchEvent(new Event("qmPanelClosed"))}function o(c){Oe[c?"unshift":"push"](()=>{i=c,n(0,i)})}const f=c=>{c.preventDefault(),s()};return t.$$set=c=>{"renderTable"in c&&n(5,l=c.renderTable)},[i,a,r,s,u,l,o,f]}class li extends Se{constructor(e){super(),De(this,e,ni,ti,ve,{renderTable:5})}}function ii(t){let e,n=`${t[0]}px`,l=`${t[0]}px`,i=`${t[1]}px`;return{c(){e=T("div"),m(e,"class","loading-icon spinner svelte-yw8t7l"),We(e,"width",n),We(e,"height",l),We(e,"border-width",i)},m(a,r){Q(a,e,r)},p(a,[r]){r&1&&n!==(n=`${a[0]}px`)&&We(e,"width",n),r&1&&l!==(l=`${a[0]}px`)&&We(e,"height",l),r&2&&i!==(i=`${a[1]}px`)&&We(e,"border-width",i)},i:Z,o:Z,d(a){a&&G(e)}}}function ai(t,e,n){let{size:l=40}=e,{thickness:i=4}=e;return t.$$set=a=>{"size"in a&&n(0,l=a.size),"thickness"in a&&n(1,i=a.thickness)},[l,i]}class ri extends Se{constructor(e){super(),De(this,e,ai,ii,ve,{size:0,thickness:1})}}function Wn(t){let e,n;return{c(){e=T("img"),Ln(e.src,n=t[1])||m(e,"src",n),m(e,"class","logo"),m(e,"alt",t[0])},m(l,i){Q(l,e,i)},p(l,i){i&2&&!Ln(e.src,n=l[1])&&m(e,"src",n),i&1&&m(e,"alt",l[0])},d(l){l&&G(e)}}}function Gn(t){let e,n,l;return{c(){e=T("a"),n=T("i"),l=ce("Recovery Instructions"),m(n,"class","fa fa-history svelte-1qmezxs"),m(e,"href",t[2]),m(e,"target","_blank"),m(e,"class","btn btn-default svelte-1qmezxs"),m(e,"role","button"),We(e,"float","right")},m(i,a){Q(i,e,a),b(e,n),b(e,l)},p(i,a){a&4&&m(e,"href",i[2])},d(i){i&&G(e)}}}function Un(t){let e,n,l,i,a,r;return{c(){e=T("hr"),n=X(),l=T("pre"),i=ce(t[3]),m(l,"class","logs-container svelte-1qmezxs")},m(s,u){Q(s,e,u),Q(s,n,u),Q(s,l,u),b(l,i),t[11](l),a||(r=le(l,"scroll",t[8]),a=!0)},p(s,u){u&8&&Ae(i,s[3])},d(s){s&&(G(e),G(n),G(l)),t[11](null),a=!1,r()}}}function oi(t){let e,n,l,i,a,r,s,u,o,f,c,d,p,h,_,g,y,D,E=t[4]?"Hide":"Show",k,v,P,w,H,C,ne,se,V=t[1]&&Wn(t);f=new ri({props:{size:"40",thickness:"5"}});let W=t[2]&&Gn(t),K=t[4]&&t[3]&&Un(t);return{c(){e=T("div"),n=T("div"),l=T("div"),V&&V.c(),i=X(),a=T("div"),r=T("div"),s=T("h3"),s.textContent="System is updating...",u=X(),o=T("section"),Ge(f.$$.fragment),c=X(),d=T("h5"),p=ce(t[5]),h=X(),_=T("section"),g=T("div"),y=T("button"),D=T("i"),k=ce(E),v=ce(" logs"),w=X(),W&&W.c(),H=X(),K&&K.c(),m(l,"class","logo-container"),m(n,"class","panel-heading"),m(d,"class","svelte-1qmezxs"),m(o,"class","progress-section svelte-1qmezxs"),m(D,"class","fa fa-list svelte-1qmezxs"),m(y,"class","btn btn-default svelte-1qmezxs"),y.disabled=P=!t[3],m(g,"class","buttons"),m(_,"class","logs-section"),m(r,"class","form-group"),m(a,"class","panel-body"),m(e,"id","login"),m(e,"class","panel panel-default panel-updating")},m(F,z){Q(F,e,z),b(e,n),b(n,l),V&&V.m(l,null),b(e,i),b(e,a),b(a,r),b(r,s),b(r,u),b(r,o),Ne(f,o,null),b(o,c),b(o,d),b(d,p),b(r,h),b(r,_),b(_,g),b(g,y),b(y,D),b(y,k),b(y,v),b(g,w),W&&W.m(g,null),b(_,H),K&&K.m(_,null),C=!0,ne||(se=le(y,"click",t[7]),ne=!0)},p(F,[z]){F[1]?V?V.p(F,z):(V=Wn(F),V.c(),V.m(l,null)):V&&(V.d(1),V=null),(!C||z&32)&&Ae(p,F[5]),(!C||z&16)&&E!==(E=F[4]?"Hide":"Show")&&Ae(k,E),(!C||z&8&&P!==(P=!F[3]))&&(y.disabled=P),F[2]?W?W.p(F,z):(W=Gn(F),W.c(),W.m(g,null)):W&&(W.d(1),W=null),F[4]&&F[3]?K?K.p(F,z):(K=Un(F),K.c(),K.m(_,null)):K&&(K.d(1),K=null)},i(F){C||(Ee(f.$$.fragment,F),C=!0)},o(F){Fe(f.$$.fragment,F),C=!1},d(F){F&&G(e),V&&V.d(),Me(f),W&&W.d(),K&&K.d(),ne=!1,se()}}}function si(t){return t.replace(/^\d{2,4}.\d{2}.\d{2,4} \d{2}:\d{2}:\d{2}/g,"").replace(/^[\-\|\s]+/,"")}function ui(t,e,n){let{applicationName:l="AtroCore"}=e,{logoPath:i=null}=e,{logFilePath:a}=e,{restoreLink:r=null}=e,s=!1,u=!1,o=0,f=!0,c="",d,p;jl(()=>{p&&f&&p.scrollTo(0,p.scrollHeight)});function h(){n(4,s=!s),s||(f=!0)}function _(y){const D=y.currentTarget;f=D.scrollHeight-D.scrollTop===D.clientHeight}setInterval(async()=>{try{const y=await fetch(a,{cache:"no-store"});o+=1,y.ok?(n(3,c=(await y.text()).trim()),c.search("composer")>=0&&n(10,u=!0),o>65&&!u&&n(3,c="Something wrong. Please, reboot the server.")):u?setTimeout(()=>{location.reload()},2e3):o>65&&n(3,c="Something wrong. Please, reboot the server.")}catch(y){console.error("Error: ",y)}},1e3);function g(y){Oe[y?"unshift":"push"](()=>{p=y,n(6,p)})}return t.$$set=y=>{"applicationName"in y&&n(0,l=y.applicationName),"logoPath"in y&&n(1,i=y.logoPath),"logFilePath"in y&&n(9,a=y.logFilePath),"restoreLink"in y&&n(2,r=y.restoreLink)},t.$$.update=()=>{if(t.$$.dirty&1032)if(c){const y=c.trim().split(`
`);n(5,d=si(y.pop()))}else u?n(5,d=""):n(5,d="Starting...")},[l,i,r,c,s,d,p,h,_,a,u,g]}class fi extends Se{constructor(e){super(),De(this,e,ui,oi,ve,{applicationName:0,logoPath:1,logFilePath:9,restoreLink:2})}}function Qn(t,e,n){const l=t.slice();return l[15]=e[n],l}function Vn(t){let e,n=t[15].label+"",l,i,a,r,s,u,o;function f(){return t[9](t[15])}return{c(){e=T("button"),l=ce(n),i=X(),m(e,"data-action",a=t[15].name),e.disabled=r=t[15].disabled,m(e,"type","button"),m(e,"class",s=`btn action btn-${t[15].style??"default"}`)},m(c,d){Q(c,e,d),b(e,l),b(e,i),u||(o=le(e,"click",f),u=!0)},p(c,d){t=c,d&1&&n!==(n=t[15].label+"")&&Ae(l,n),d&1&&a!==(a=t[15].name)&&m(e,"data-action",a),d&1&&r!==(r=t[15].disabled)&&(e.disabled=r),d&1&&s!==(s=`btn action btn-${t[15].style??"default"}`)&&m(e,"class",s)},d(c){c&&G(e),u=!1,o()}}}function ci(t){let e,n,l,i=de(t[0]),a=[];for(let u=0;u<i.length;u+=1)a[u]=Vn(Qn(t,i,u));const r=t[8].default,s=Rl(r,t,t[7],null);return{c(){e=T("div");for(let u=0;u<a.length;u+=1)a[u].c();n=X(),s&&s.c(),m(e,"class","button-container")},m(u,o){Q(u,e,o);for(let f=0;f<a.length;f+=1)a[f]&&a[f].m(e,null);Q(u,n,o),s&&s.m(u,o),l=!0},p(u,[o]){if(o&3){i=de(u[0]);let f;for(f=0;f<i.length;f+=1){const c=Qn(u,i,f);a[f]?a[f].p(c,o):(a[f]=Vn(c),a[f].c(),a[f].m(e,null))}for(;f<a.length;f+=1)a[f].d(1);a.length=i.length}s&&s.p&&(!l||o&128)&&Bl(s,r,u,u[7],l?Hl(r,u[7],o,null):Yl(u[7]),null)},i(u){l||(Ee(s,u),l=!0)},o(u){Fe(s,u),l=!1},d(u){u&&(G(e),G(n)),Zt(a,u),s&&s.d(u)}}}function di(t,e,n){let{$$slots:l={},$$scope:i}=e,{params:a}=e,{fetch:r}=e,{loadLayout:s=()=>{He.get(scope,type,layoutProfileId,D=>{layout=D},!1)}}=e,{validate:u=()=>!0}=e,o=[{name:"save",label:"Save",style:"primary"},{name:"cancel",label:"Cancel"},{name:"resetToDefault",label:"Reset to Default"}];xt(()=>{Re.notify("Loading..."),s(()=>{Re.notify(!1),a.afterRender&&a.afterRender()})});function f(){h();const D=r();if(!u(D)){_();return}Re.notify("Saving..."),He.set(a.scope,a.type,a.layoutProfileId,D,()=>{Re.notify("Saved","success",2e3),c(),_()})}function c(){a.onUpdate&&a.onUpdate({scope:a.scope,type:a.type,layoutProfileId:a.layoutProfileId})}function d(){s()}function p(){Re.confirm("Are you sure you want to reset to default?",()=>{He.resetToDefault(a.scope,a.type,a.layoutProfileId,()=>{c(),d()})})}function h(){n(0,o=o.map(D=>({...D,disabled:!0})))}function _(){n(0,o=o.map(D=>({...D,disabled:!1})))}function g(D){switch(D.name){case"save":f();break;case"cancel":d();break;case"resetToDefault":p();break}}const y=D=>g(D);return t.$$set=D=>{"params"in D&&n(2,a=D.params),"fetch"in D&&n(3,r=D.fetch),"loadLayout"in D&&n(4,s=D.loadLayout),"validate"in D&&n(5,u=D.validate),"$$scope"in D&&n(7,i=D.$$scope)},[o,g,a,r,s,u,f,i,l,y]}class Kn extends Se{constructor(e){super(),De(this,e,di,ci,ve,{params:2,fetch:3,loadLayout:4,validate:5,save:6})}get save(){return this.$$.ctx[6]}}/**!
 * Sortable 1.15.2
 * @author	RubaXa   <trash@rubaxa.org>
 * @author	owenm    <owen23355@gmail.com>
 * @license MIT
 */function Zn(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(t);e&&(l=l.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,l)}return n}function Pe(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Zn(Object(n),!0).forEach(function(l){hi(t,l,n[l])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Zn(Object(n)).forEach(function(l){Object.defineProperty(t,l,Object.getOwnPropertyDescriptor(n,l))})}return t}function Ft(t){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Ft=function(e){return typeof e}:Ft=function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ft(t)}function hi(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Be(){return Be=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var l in n)Object.prototype.hasOwnProperty.call(n,l)&&(t[l]=n[l])}return t},Be.apply(this,arguments)}function mi(t,e){if(t==null)return{};var n={},l=Object.keys(t),i,a;for(a=0;a<l.length;a++)i=l[a],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}function pi(t,e){if(t==null)return{};var n=mi(t,e),l,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)l=a[i],!(e.indexOf(l)>=0)&&Object.prototype.propertyIsEnumerable.call(t,l)&&(n[l]=t[l])}return n}var gi="1.15.2";function Ye(t){if(typeof window<"u"&&window.navigator)return!!navigator.userAgent.match(t)}var ze=Ye(/(?:Trident.*rv[ :]?11\.|msie|iemobile|Windows Phone)/i),mt=Ye(/Edge/i),Jn=Ye(/firefox/i),pt=Ye(/safari/i)&&!Ye(/chrome/i)&&!Ye(/android/i),xn=Ye(/iP(ad|od|hone)/i),$n=Ye(/chrome/i)&&Ye(/android/i),el={capture:!1,passive:!1};function j(t,e,n){t.addEventListener(e,n,!ze&&el)}function q(t,e,n){t.removeEventListener(e,n,!ze&&el)}function Nt(t,e){if(e){if(e[0]===">"&&(e=e.substring(1)),t)try{if(t.matches)return t.matches(e);if(t.msMatchesSelector)return t.msMatchesSelector(e);if(t.webkitMatchesSelector)return t.webkitMatchesSelector(e)}catch{return!1}return!1}}function bi(t){return t.host&&t!==document&&t.host.nodeType?t.host:t.parentNode}function ke(t,e,n,l){if(t){n=n||document;do{if(e!=null&&(e[0]===">"?t.parentNode===n&&Nt(t,e):Nt(t,e))||l&&t===n)return t;if(t===n)break}while(t=bi(t))}return null}var tl=/\s+/g;function ge(t,e,n){if(t&&e)if(t.classList)t.classList[n?"add":"remove"](e);else{var l=(" "+t.className+" ").replace(tl," ").replace(" "+e+" "," ");t.className=(l+(n?" "+e:"")).replace(tl," ")}}function O(t,e,n){var l=t&&t.style;if(l){if(n===void 0)return document.defaultView&&document.defaultView.getComputedStyle?n=document.defaultView.getComputedStyle(t,""):t.currentStyle&&(n=t.currentStyle),e===void 0?n:n[e];!(e in l)&&e.indexOf("webkit")===-1&&(e="-webkit-"+e),l[e]=n+(typeof n=="string"?"":"px")}}function rt(t,e){var n="";if(typeof t=="string")n=t;else do{var l=O(t,"transform");l&&l!=="none"&&(n=l+" "+n)}while(!e&&(t=t.parentNode));var i=window.DOMMatrix||window.WebKitCSSMatrix||window.CSSMatrix||window.MSCSSMatrix;return i&&new i(n)}function nl(t,e,n){if(t){var l=t.getElementsByTagName(e),i=0,a=l.length;if(n)for(;i<a;i++)n(l[i],i);return l}return[]}function Le(){var t=document.scrollingElement;return t||document.documentElement}function ie(t,e,n,l,i){if(!(!t.getBoundingClientRect&&t!==window)){var a,r,s,u,o,f,c;if(t!==window&&t.parentNode&&t!==Le()?(a=t.getBoundingClientRect(),r=a.top,s=a.left,u=a.bottom,o=a.right,f=a.height,c=a.width):(r=0,s=0,u=window.innerHeight,o=window.innerWidth,f=window.innerHeight,c=window.innerWidth),(e||n)&&t!==window&&(i=i||t.parentNode,!ze))do if(i&&i.getBoundingClientRect&&(O(i,"transform")!=="none"||n&&O(i,"position")!=="static")){var d=i.getBoundingClientRect();r-=d.top+parseInt(O(i,"border-top-width")),s-=d.left+parseInt(O(i,"border-left-width")),u=r+a.height,o=s+a.width;break}while(i=i.parentNode);if(l&&t!==window){var p=rt(i||t),h=p&&p.a,_=p&&p.d;p&&(r/=_,s/=h,c/=h,f/=_,u=r+f,o=s+c)}return{top:r,left:s,bottom:u,right:o,width:c,height:f}}}function ll(t,e,n){for(var l=Qe(t,!0),i=ie(t)[e];l;){var a=ie(l)[n],r=void 0;if(r=i>=a,!r)return l;if(l===Le())break;l=Qe(l,!1)}return!1}function ot(t,e,n,l){for(var i=0,a=0,r=t.children;a<r.length;){if(r[a].style.display!=="none"&&r[a]!==A.ghost&&(l||r[a]!==A.dragged)&&ke(r[a],n.draggable,t,!1)){if(i===e)return r[a];i++}a++}return null}function an(t,e){for(var n=t.lastElementChild;n&&(n===A.ghost||O(n,"display")==="none"||e&&!Nt(n,e));)n=n.previousElementSibling;return n||null}function ye(t,e){var n=0;if(!t||!t.parentNode)return-1;for(;t=t.previousElementSibling;)t.nodeName.toUpperCase()!=="TEMPLATE"&&t!==A.clone&&(!e||Nt(t,e))&&n++;return n}function il(t){var e=0,n=0,l=Le();if(t)do{var i=rt(t),a=i.a,r=i.d;e+=t.scrollLeft*a,n+=t.scrollTop*r}while(t!==l&&(t=t.parentNode));return[e,n]}function _i(t,e){for(var n in t)if(t.hasOwnProperty(n)){for(var l in e)if(e.hasOwnProperty(l)&&e[l]===t[n][l])return Number(n)}return-1}function Qe(t,e){if(!t||!t.getBoundingClientRect)return Le();var n=t,l=!1;do if(n.clientWidth<n.scrollWidth||n.clientHeight<n.scrollHeight){var i=O(n);if(n.clientWidth<n.scrollWidth&&(i.overflowX=="auto"||i.overflowX=="scroll")||n.clientHeight<n.scrollHeight&&(i.overflowY=="auto"||i.overflowY=="scroll")){if(!n.getBoundingClientRect||n===document.body)return Le();if(l||e)return n;l=!0}}while(n=n.parentNode);return Le()}function vi(t,e){if(t&&e)for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t}function rn(t,e){return Math.round(t.top)===Math.round(e.top)&&Math.round(t.left)===Math.round(e.left)&&Math.round(t.height)===Math.round(e.height)&&Math.round(t.width)===Math.round(e.width)}var gt;function al(t,e){return function(){if(!gt){var n=arguments,l=this;n.length===1?t.call(l,n[0]):t.apply(l,n),gt=setTimeout(function(){gt=void 0},e)}}}function yi(){clearTimeout(gt),gt=void 0}function rl(t,e,n){t.scrollLeft+=e,t.scrollTop+=n}function ol(t){var e=window.Polymer,n=window.jQuery||window.Zepto;return e&&e.dom?e.dom(t).cloneNode(!0):n?n(t).clone(!0)[0]:t.cloneNode(!0)}function sl(t,e,n){var l={};return Array.from(t.children).forEach(function(i){var a,r,s,u;if(!(!ke(i,e.draggable,t,!1)||i.animated||i===n)){var o=ie(i);l.left=Math.min((a=l.left)!==null&&a!==void 0?a:1/0,o.left),l.top=Math.min((r=l.top)!==null&&r!==void 0?r:1/0,o.top),l.right=Math.max((s=l.right)!==null&&s!==void 0?s:-1/0,o.right),l.bottom=Math.max((u=l.bottom)!==null&&u!==void 0?u:-1/0,o.bottom)}}),l.width=l.right-l.left,l.height=l.bottom-l.top,l.x=l.left,l.y=l.top,l}var be="Sortable"+new Date().getTime();function wi(){var t=[],e;return{captureAnimationState:function(){if(t=[],!!this.options.animation){var l=[].slice.call(this.el.children);l.forEach(function(i){if(!(O(i,"display")==="none"||i===A.ghost)){t.push({target:i,rect:ie(i)});var a=Pe({},t[t.length-1].rect);if(i.thisAnimationDuration){var r=rt(i,!0);r&&(a.top-=r.f,a.left-=r.e)}i.fromRect=a}})}},addAnimationState:function(l){t.push(l)},removeAnimationState:function(l){t.splice(_i(t,{target:l}),1)},animateAll:function(l){var i=this;if(!this.options.animation){clearTimeout(e),typeof l=="function"&&l();return}var a=!1,r=0;t.forEach(function(s){var u=0,o=s.target,f=o.fromRect,c=ie(o),d=o.prevFromRect,p=o.prevToRect,h=s.rect,_=rt(o,!0);_&&(c.top-=_.f,c.left-=_.e),o.toRect=c,o.thisAnimationDuration&&rn(d,c)&&!rn(f,c)&&(h.top-c.top)/(h.left-c.left)===(f.top-c.top)/(f.left-c.left)&&(u=Di(h,d,p,i.options)),rn(c,f)||(o.prevFromRect=f,o.prevToRect=c,u||(u=i.options.animation),i.animate(o,h,c,u)),u&&(a=!0,r=Math.max(r,u),clearTimeout(o.animationResetTimer),o.animationResetTimer=setTimeout(function(){o.animationTime=0,o.prevFromRect=null,o.fromRect=null,o.prevToRect=null,o.thisAnimationDuration=null},u),o.thisAnimationDuration=u)}),clearTimeout(e),a?e=setTimeout(function(){typeof l=="function"&&l()},r):typeof l=="function"&&l(),t=[]},animate:function(l,i,a,r){if(r){O(l,"transition",""),O(l,"transform","");var s=rt(this.el),u=s&&s.a,o=s&&s.d,f=(i.left-a.left)/(u||1),c=(i.top-a.top)/(o||1);l.animatingX=!!f,l.animatingY=!!c,O(l,"transform","translate3d("+f+"px,"+c+"px,0)"),this.forRepaintDummy=Ei(l),O(l,"transition","transform "+r+"ms"+(this.options.easing?" "+this.options.easing:"")),O(l,"transform","translate3d(0,0,0)"),typeof l.animated=="number"&&clearTimeout(l.animated),l.animated=setTimeout(function(){O(l,"transition",""),O(l,"transform",""),l.animated=!1,l.animatingX=!1,l.animatingY=!1},r)}}}}function Ei(t){return t.offsetWidth}function Di(t,e,n,l){return Math.sqrt(Math.pow(e.top-t.top,2)+Math.pow(e.left-t.left,2))/Math.sqrt(Math.pow(e.top-n.top,2)+Math.pow(e.left-n.left,2))*l.animation}var st=[],on={initializeByDefault:!0},bt={mount:function(e){for(var n in on)on.hasOwnProperty(n)&&!(n in e)&&(e[n]=on[n]);st.forEach(function(l){if(l.pluginName===e.pluginName)throw"Sortable: Cannot mount plugin ".concat(e.pluginName," more than once")}),st.push(e)},pluginEvent:function(e,n,l){var i=this;this.eventCanceled=!1,l.cancel=function(){i.eventCanceled=!0};var a=e+"Global";st.forEach(function(r){n[r.pluginName]&&(n[r.pluginName][a]&&n[r.pluginName][a](Pe({sortable:n},l)),n.options[r.pluginName]&&n[r.pluginName][e]&&n[r.pluginName][e](Pe({sortable:n},l)))})},initializePlugins:function(e,n,l,i){st.forEach(function(s){var u=s.pluginName;if(!(!e.options[u]&&!s.initializeByDefault)){var o=new s(e,n,e.options);o.sortable=e,o.options=e.options,e[u]=o,Be(l,o.defaults)}});for(var a in e.options)if(e.options.hasOwnProperty(a)){var r=this.modifyOption(e,a,e.options[a]);typeof r<"u"&&(e.options[a]=r)}},getEventProperties:function(e,n){var l={};return st.forEach(function(i){typeof i.eventProperties=="function"&&Be(l,i.eventProperties.call(n[i.pluginName],e))}),l},modifyOption:function(e,n,l){var i;return st.forEach(function(a){e[a.pluginName]&&a.optionListeners&&typeof a.optionListeners[n]=="function"&&(i=a.optionListeners[n].call(e[a.pluginName],l))}),i}};function Si(t){var e=t.sortable,n=t.rootEl,l=t.name,i=t.targetEl,a=t.cloneEl,r=t.toEl,s=t.fromEl,u=t.oldIndex,o=t.newIndex,f=t.oldDraggableIndex,c=t.newDraggableIndex,d=t.originalEvent,p=t.putSortable,h=t.extraEventProperties;if(e=e||n&&n[be],!!e){var _,g=e.options,y="on"+l.charAt(0).toUpperCase()+l.substr(1);window.CustomEvent&&!ze&&!mt?_=new CustomEvent(l,{bubbles:!0,cancelable:!0}):(_=document.createEvent("Event"),_.initEvent(l,!0,!0)),_.to=r||n,_.from=s||n,_.item=i||n,_.clone=a,_.oldIndex=u,_.newIndex=o,_.oldDraggableIndex=f,_.newDraggableIndex=c,_.originalEvent=d,_.pullMode=p?p.lastPutMode:void 0;var D=Pe(Pe({},h),bt.getEventProperties(l,e));for(var E in D)_[E]=D[E];n&&n.dispatchEvent(_),g[y]&&g[y].call(e,_)}}var ki=["evt"],he=function(e,n){var l=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},i=l.evt,a=pi(l,ki);bt.pluginEvent.bind(A)(e,n,Pe({dragEl:S,parentEl:te,ghostEl:N,rootEl:J,nextEl:Je,lastDownEl:Mt,cloneEl:x,cloneHidden:Ve,dragStarted:vt,putSortable:re,activeSortable:A.active,originalEvent:i,oldIndex:ut,oldDraggableIndex:_t,newIndex:_e,newDraggableIndex:Ke,hideGhostForTarget:pl,unhideGhostForTarget:gl,cloneNowHidden:function(){Ve=!0},cloneNowShown:function(){Ve=!1},dispatchSortableEvent:function(s){ue({sortable:n,name:s,originalEvent:i})}},a))};function ue(t){Si(Pe({putSortable:re,cloneEl:x,targetEl:S,rootEl:J,oldIndex:ut,oldDraggableIndex:_t,newIndex:_e,newDraggableIndex:Ke},t))}var S,te,N,J,Je,Mt,x,Ve,ut,_e,_t,Ke,Rt,re,ft=!1,Ht=!1,Bt=[],xe,Te,sn,un,ul,fl,vt,ct,yt,wt=!1,Yt=!1,zt,oe,fn=[],cn=!1,Xt=[],qt=typeof document<"u",jt=xn,cl=mt||ze?"cssFloat":"float",Ti=qt&&!$n&&!xn&&"draggable"in document.createElement("div"),dl=function(){if(qt){if(ze)return!1;var t=document.createElement("x");return t.style.cssText="pointer-events:auto",t.style.pointerEvents==="auto"}}(),hl=function(e,n){var l=O(e),i=parseInt(l.width)-parseInt(l.paddingLeft)-parseInt(l.paddingRight)-parseInt(l.borderLeftWidth)-parseInt(l.borderRightWidth),a=ot(e,0,n),r=ot(e,1,n),s=a&&O(a),u=r&&O(r),o=s&&parseInt(s.marginLeft)+parseInt(s.marginRight)+ie(a).width,f=u&&parseInt(u.marginLeft)+parseInt(u.marginRight)+ie(r).width;if(l.display==="flex")return l.flexDirection==="column"||l.flexDirection==="column-reverse"?"vertical":"horizontal";if(l.display==="grid")return l.gridTemplateColumns.split(" ").length<=1?"vertical":"horizontal";if(a&&s.float&&s.float!=="none"){var c=s.float==="left"?"left":"right";return r&&(u.clear==="both"||u.clear===c)?"vertical":"horizontal"}return a&&(s.display==="block"||s.display==="flex"||s.display==="table"||s.display==="grid"||o>=i&&l[cl]==="none"||r&&l[cl]==="none"&&o+f>i)?"vertical":"horizontal"},Pi=function(e,n,l){var i=l?e.left:e.top,a=l?e.right:e.bottom,r=l?e.width:e.height,s=l?n.left:n.top,u=l?n.right:n.bottom,o=l?n.width:n.height;return i===s||a===u||i+r/2===s+o/2},Li=function(e,n){var l;return Bt.some(function(i){var a=i[be].options.emptyInsertThreshold;if(!(!a||an(i))){var r=ie(i),s=e>=r.left-a&&e<=r.right+a,u=n>=r.top-a&&n<=r.bottom+a;if(s&&u)return l=i}}),l},ml=function(e){function n(a,r){return function(s,u,o,f){var c=s.options.group.name&&u.options.group.name&&s.options.group.name===u.options.group.name;if(a==null&&(r||c))return!0;if(a==null||a===!1)return!1;if(r&&a==="clone")return a;if(typeof a=="function")return n(a(s,u,o,f),r)(s,u,o,f);var d=(r?s:u).options.group.name;return a===!0||typeof a=="string"&&a===d||a.join&&a.indexOf(d)>-1}}var l={},i=e.group;(!i||Ft(i)!="object")&&(i={name:i}),l.name=i.name,l.checkPull=n(i.pull,!0),l.checkPut=n(i.put),l.revertClone=i.revertClone,e.group=l},pl=function(){!dl&&N&&O(N,"display","none")},gl=function(){!dl&&N&&O(N,"display","")};qt&&!$n&&document.addEventListener("click",function(t){if(Ht)return t.preventDefault(),t.stopPropagation&&t.stopPropagation(),t.stopImmediatePropagation&&t.stopImmediatePropagation(),Ht=!1,!1},!0);var $e=function(e){if(S){e=e.touches?e.touches[0]:e;var n=Li(e.clientX,e.clientY);if(n){var l={};for(var i in e)e.hasOwnProperty(i)&&(l[i]=e[i]);l.target=l.rootEl=n,l.preventDefault=void 0,l.stopPropagation=void 0,n[be]._onDragOver(l)}}},Ci=function(e){S&&S.parentNode[be]._isOutsideThisEl(e.target)};function A(t,e){if(!(t&&t.nodeType&&t.nodeType===1))throw"Sortable: `el` must be an HTMLElement, not ".concat({}.toString.call(t));this.el=t,this.options=e=Be({},e),t[be]=this;var n={group:null,sort:!0,disabled:!1,store:null,handle:null,draggable:/^[uo]l$/i.test(t.nodeName)?">li":">*",swapThreshold:1,invertSwap:!1,invertedSwapThreshold:null,removeCloneOnHide:!0,direction:function(){return hl(t,this.options)},ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",dragClass:"sortable-drag",ignore:"a, img",filter:null,preventOnFilter:!0,animation:0,easing:null,setData:function(r,s){r.setData("Text",s.textContent)},dropBubble:!1,dragoverBubble:!1,dataIdAttr:"data-id",delay:0,delayOnTouchOnly:!1,touchStartThreshold:(Number.parseInt?Number:window).parseInt(window.devicePixelRatio,10)||1,forceFallback:!1,fallbackClass:"sortable-fallback",fallbackOnBody:!1,fallbackTolerance:0,fallbackOffset:{x:0,y:0},supportPointer:A.supportPointer!==!1&&"PointerEvent"in window&&!pt,emptyInsertThreshold:5};bt.initializePlugins(this,t,n);for(var l in n)!(l in e)&&(e[l]=n[l]);ml(e);for(var i in this)i.charAt(0)==="_"&&typeof this[i]=="function"&&(this[i]=this[i].bind(this));this.nativeDraggable=e.forceFallback?!1:Ti,this.nativeDraggable&&(this.options.touchStartThreshold=1),e.supportPointer?j(t,"pointerdown",this._onTapStart):(j(t,"mousedown",this._onTapStart),j(t,"touchstart",this._onTapStart)),this.nativeDraggable&&(j(t,"dragover",this),j(t,"dragenter",this)),Bt.push(this.el),e.store&&e.store.get&&this.sort(e.store.get(this)||[]),Be(this,wi())}A.prototype={constructor:A,_isOutsideThisEl:function(e){!this.el.contains(e)&&e!==this.el&&(ct=null)},_getDirection:function(e,n){return typeof this.options.direction=="function"?this.options.direction.call(this,e,n,S):this.options.direction},_onTapStart:function(e){if(e.cancelable){var n=this,l=this.el,i=this.options,a=i.preventOnFilter,r=e.type,s=e.touches&&e.touches[0]||e.pointerType&&e.pointerType==="touch"&&e,u=(s||e).target,o=e.target.shadowRoot&&(e.path&&e.path[0]||e.composedPath&&e.composedPath()[0])||u,f=i.filter;if(Hi(l),!S&&!(/mousedown|pointerdown/.test(r)&&e.button!==0||i.disabled)&&!o.isContentEditable&&!(!this.nativeDraggable&&pt&&u&&u.tagName.toUpperCase()==="SELECT")&&(u=ke(u,i.draggable,l,!1),!(u&&u.animated)&&Mt!==u)){if(ut=ye(u),_t=ye(u,i.draggable),typeof f=="function"){if(f.call(this,e,u,this)){ue({sortable:n,rootEl:o,name:"filter",targetEl:u,toEl:l,fromEl:l}),he("filter",n,{evt:e}),a&&e.cancelable&&e.preventDefault();return}}else if(f&&(f=f.split(",").some(function(c){if(c=ke(o,c.trim(),l,!1),c)return ue({sortable:n,rootEl:c,name:"filter",targetEl:u,fromEl:l,toEl:l}),he("filter",n,{evt:e}),!0}),f)){a&&e.cancelable&&e.preventDefault();return}i.handle&&!ke(o,i.handle,l,!1)||this._prepareDragStart(e,s,u)}}},_prepareDragStart:function(e,n,l){var i=this,a=i.el,r=i.options,s=a.ownerDocument,u;if(l&&!S&&l.parentNode===a){var o=ie(l);if(J=a,S=l,te=S.parentNode,Je=S.nextSibling,Mt=l,Rt=r.group,A.dragged=S,xe={target:S,clientX:(n||e).clientX,clientY:(n||e).clientY},ul=xe.clientX-o.left,fl=xe.clientY-o.top,this._lastX=(n||e).clientX,this._lastY=(n||e).clientY,S.style["will-change"]="all",u=function(){if(he("delayEnded",i,{evt:e}),A.eventCanceled){i._onDrop();return}i._disableDelayedDragEvents(),!Jn&&i.nativeDraggable&&(S.draggable=!0),i._triggerDragStart(e,n),ue({sortable:i,name:"choose",originalEvent:e}),ge(S,r.chosenClass,!0)},r.ignore.split(",").forEach(function(f){nl(S,f.trim(),dn)}),j(s,"dragover",$e),j(s,"mousemove",$e),j(s,"touchmove",$e),j(s,"mouseup",i._onDrop),j(s,"touchend",i._onDrop),j(s,"touchcancel",i._onDrop),Jn&&this.nativeDraggable&&(this.options.touchStartThreshold=4,S.draggable=!0),he("delayStart",this,{evt:e}),r.delay&&(!r.delayOnTouchOnly||n)&&(!this.nativeDraggable||!(mt||ze))){if(A.eventCanceled){this._onDrop();return}j(s,"mouseup",i._disableDelayedDrag),j(s,"touchend",i._disableDelayedDrag),j(s,"touchcancel",i._disableDelayedDrag),j(s,"mousemove",i._delayedDragTouchMoveHandler),j(s,"touchmove",i._delayedDragTouchMoveHandler),r.supportPointer&&j(s,"pointermove",i._delayedDragTouchMoveHandler),i._dragStartTimer=setTimeout(u,r.delay)}else u()}},_delayedDragTouchMoveHandler:function(e){var n=e.touches?e.touches[0]:e;Math.max(Math.abs(n.clientX-this._lastX),Math.abs(n.clientY-this._lastY))>=Math.floor(this.options.touchStartThreshold/(this.nativeDraggable&&window.devicePixelRatio||1))&&this._disableDelayedDrag()},_disableDelayedDrag:function(){S&&dn(S),clearTimeout(this._dragStartTimer),this._disableDelayedDragEvents()},_disableDelayedDragEvents:function(){var e=this.el.ownerDocument;q(e,"mouseup",this._disableDelayedDrag),q(e,"touchend",this._disableDelayedDrag),q(e,"touchcancel",this._disableDelayedDrag),q(e,"mousemove",this._delayedDragTouchMoveHandler),q(e,"touchmove",this._delayedDragTouchMoveHandler),q(e,"pointermove",this._delayedDragTouchMoveHandler)},_triggerDragStart:function(e,n){n=n||e.pointerType=="touch"&&e,!this.nativeDraggable||n?this.options.supportPointer?j(document,"pointermove",this._onTouchMove):n?j(document,"touchmove",this._onTouchMove):j(document,"mousemove",this._onTouchMove):(j(S,"dragend",this),j(J,"dragstart",this._onDragStart));try{document.selection?Gt(function(){document.selection.empty()}):window.getSelection().removeAllRanges()}catch{}},_dragStarted:function(e,n){if(ft=!1,J&&S){he("dragStarted",this,{evt:n}),this.nativeDraggable&&j(document,"dragover",Ci);var l=this.options;!e&&ge(S,l.dragClass,!1),ge(S,l.ghostClass,!0),A.active=this,e&&this._appendGhost(),ue({sortable:this,name:"start",originalEvent:n})}else this._nulling()},_emulateDragOver:function(){if(Te){this._lastX=Te.clientX,this._lastY=Te.clientY,pl();for(var e=document.elementFromPoint(Te.clientX,Te.clientY),n=e;e&&e.shadowRoot&&(e=e.shadowRoot.elementFromPoint(Te.clientX,Te.clientY),e!==n);)n=e;if(S.parentNode[be]._isOutsideThisEl(e),n)do{if(n[be]){var l=void 0;if(l=n[be]._onDragOver({clientX:Te.clientX,clientY:Te.clientY,target:e,rootEl:n}),l&&!this.options.dragoverBubble)break}e=n}while(n=n.parentNode);gl()}},_onTouchMove:function(e){if(xe){var n=this.options,l=n.fallbackTolerance,i=n.fallbackOffset,a=e.touches?e.touches[0]:e,r=N&&rt(N,!0),s=N&&r&&r.a,u=N&&r&&r.d,o=jt&&oe&&il(oe),f=(a.clientX-xe.clientX+i.x)/(s||1)+(o?o[0]-fn[0]:0)/(s||1),c=(a.clientY-xe.clientY+i.y)/(u||1)+(o?o[1]-fn[1]:0)/(u||1);if(!A.active&&!ft){if(l&&Math.max(Math.abs(a.clientX-this._lastX),Math.abs(a.clientY-this._lastY))<l)return;this._onDragStart(e,!0)}if(N){r?(r.e+=f-(sn||0),r.f+=c-(un||0)):r={a:1,b:0,c:0,d:1,e:f,f:c};var d="matrix(".concat(r.a,",").concat(r.b,",").concat(r.c,",").concat(r.d,",").concat(r.e,",").concat(r.f,")");O(N,"webkitTransform",d),O(N,"mozTransform",d),O(N,"msTransform",d),O(N,"transform",d),sn=f,un=c,Te=a}e.cancelable&&e.preventDefault()}},_appendGhost:function(){if(!N){var e=this.options.fallbackOnBody?document.body:J,n=ie(S,!0,jt,!0,e),l=this.options;if(jt){for(oe=e;O(oe,"position")==="static"&&O(oe,"transform")==="none"&&oe!==document;)oe=oe.parentNode;oe!==document.body&&oe!==document.documentElement?(oe===document&&(oe=Le()),n.top+=oe.scrollTop,n.left+=oe.scrollLeft):oe=Le(),fn=il(oe)}N=S.cloneNode(!0),ge(N,l.ghostClass,!1),ge(N,l.fallbackClass,!0),ge(N,l.dragClass,!0),O(N,"transition",""),O(N,"transform",""),O(N,"box-sizing","border-box"),O(N,"margin",0),O(N,"top",n.top),O(N,"left",n.left),O(N,"width",n.width),O(N,"height",n.height),O(N,"opacity","0.8"),O(N,"position",jt?"absolute":"fixed"),O(N,"zIndex","100000"),O(N,"pointerEvents","none"),A.ghost=N,e.appendChild(N),O(N,"transform-origin",ul/parseInt(N.style.width)*100+"% "+fl/parseInt(N.style.height)*100+"%")}},_onDragStart:function(e,n){var l=this,i=e.dataTransfer,a=l.options;if(he("dragStart",this,{evt:e}),A.eventCanceled){this._onDrop();return}he("setupClone",this),A.eventCanceled||(x=ol(S),x.removeAttribute("id"),x.draggable=!1,x.style["will-change"]="",this._hideClone(),ge(x,this.options.chosenClass,!1),A.clone=x),l.cloneId=Gt(function(){he("clone",l),!A.eventCanceled&&(l.options.removeCloneOnHide||J.insertBefore(x,S),l._hideClone(),ue({sortable:l,name:"clone"}))}),!n&&ge(S,a.dragClass,!0),n?(Ht=!0,l._loopId=setInterval(l._emulateDragOver,50)):(q(document,"mouseup",l._onDrop),q(document,"touchend",l._onDrop),q(document,"touchcancel",l._onDrop),i&&(i.effectAllowed="move",a.setData&&a.setData.call(l,i,S)),j(document,"drop",l),O(S,"transform","translateZ(0)")),ft=!0,l._dragStartId=Gt(l._dragStarted.bind(l,n,e)),j(document,"selectstart",l),vt=!0,pt&&O(document.body,"user-select","none")},_onDragOver:function(e){var n=this.el,l=e.target,i,a,r,s=this.options,u=s.group,o=A.active,f=Rt===u,c=s.sort,d=re||o,p,h=this,_=!1;if(cn)return;function g(et,En){he(et,h,Pe({evt:e,isOwner:f,axis:p?"vertical":"horizontal",revert:r,dragRect:i,targetRect:a,canSort:c,fromSortable:d,target:l,completed:D,onMove:function(Kt,Dn){return Wt(J,n,S,i,Kt,ie(Kt),e,Dn)},changed:E},En))}function y(){g("dragOverAnimationCapture"),h.captureAnimationState(),h!==d&&d.captureAnimationState()}function D(et){return g("dragOverCompleted",{insertion:et}),et&&(f?o._hideClone():o._showClone(h),h!==d&&(ge(S,re?re.options.ghostClass:o.options.ghostClass,!1),ge(S,s.ghostClass,!0)),re!==h&&h!==A.active?re=h:h===A.active&&re&&(re=null),d===h&&(h._ignoreWhileAnimating=l),h.animateAll(function(){g("dragOverAnimationComplete"),h._ignoreWhileAnimating=null}),h!==d&&(d.animateAll(),d._ignoreWhileAnimating=null)),(l===S&&!S.animated||l===n&&!l.animated)&&(ct=null),!s.dragoverBubble&&!e.rootEl&&l!==document&&(S.parentNode[be]._isOutsideThisEl(e.target),!et&&$e(e)),!s.dragoverBubble&&e.stopPropagation&&e.stopPropagation(),_=!0}function E(){_e=ye(S),Ke=ye(S,s.draggable),ue({sortable:h,name:"change",toEl:n,newIndex:_e,newDraggableIndex:Ke,originalEvent:e})}if(e.preventDefault!==void 0&&e.cancelable&&e.preventDefault(),l=ke(l,s.draggable,n,!0),g("dragOver"),A.eventCanceled)return _;if(S.contains(e.target)||l.animated&&l.animatingX&&l.animatingY||h._ignoreWhileAnimating===l)return D(!1);if(Ht=!1,o&&!s.disabled&&(f?c||(r=te!==J):re===this||(this.lastPutMode=Rt.checkPull(this,o,S,e))&&u.checkPut(this,o,S,e))){if(p=this._getDirection(e,l)==="vertical",i=ie(S),g("dragOverValid"),A.eventCanceled)return _;if(r)return te=J,y(),this._hideClone(),g("revert"),A.eventCanceled||(Je?J.insertBefore(S,Je):J.appendChild(S)),D(!0);var k=an(n,s.draggable);if(!k||Fi(e,p,this)&&!k.animated){if(k===S)return D(!1);if(k&&n===e.target&&(l=k),l&&(a=ie(l)),Wt(J,n,S,i,l,a,e,!!l)!==!1)return y(),k&&k.nextSibling?n.insertBefore(S,k.nextSibling):n.appendChild(S),te=n,E(),D(!0)}else if(k&&Oi(e,p,this)){var v=ot(n,0,s,!0);if(v===S)return D(!1);if(l=v,a=ie(l),Wt(J,n,S,i,l,a,e,!1)!==!1)return y(),n.insertBefore(S,v),te=n,E(),D(!0)}else if(l.parentNode===n){a=ie(l);var P=0,w,H=S.parentNode!==n,C=!Pi(S.animated&&S.toRect||i,l.animated&&l.toRect||a,p),ne=p?"top":"left",se=ll(l,"top","top")||ll(S,"top","top"),V=se?se.scrollTop:void 0;ct!==l&&(w=a[ne],wt=!1,Yt=!C&&s.invertSwap||H),P=Ni(e,l,a,p,C?1:s.swapThreshold,s.invertedSwapThreshold==null?s.swapThreshold:s.invertedSwapThreshold,Yt,ct===l);var W;if(P!==0){var K=ye(S);do K-=P,W=te.children[K];while(W&&(O(W,"display")==="none"||W===N))}if(P===0||W===l)return D(!1);ct=l,yt=P;var F=l.nextElementSibling,z=!1;z=P===1;var me=Wt(J,n,S,i,l,a,e,z);if(me!==!1)return(me===1||me===-1)&&(z=me===1),cn=!0,setTimeout(Ai,30),y(),z&&!F?n.appendChild(S):l.parentNode.insertBefore(S,z?F:l),se&&rl(se,0,V-se.scrollTop),te=S.parentNode,w!==void 0&&!Yt&&(zt=Math.abs(w-ie(l)[ne])),E(),D(!0)}if(n.contains(S))return D(!1)}return!1},_ignoreWhileAnimating:null,_offMoveEvents:function(){q(document,"mousemove",this._onTouchMove),q(document,"touchmove",this._onTouchMove),q(document,"pointermove",this._onTouchMove),q(document,"dragover",$e),q(document,"mousemove",$e),q(document,"touchmove",$e)},_offUpEvents:function(){var e=this.el.ownerDocument;q(e,"mouseup",this._onDrop),q(e,"touchend",this._onDrop),q(e,"pointerup",this._onDrop),q(e,"touchcancel",this._onDrop),q(document,"selectstart",this)},_onDrop:function(e){var n=this.el,l=this.options;if(_e=ye(S),Ke=ye(S,l.draggable),he("drop",this,{evt:e}),te=S&&S.parentNode,_e=ye(S),Ke=ye(S,l.draggable),A.eventCanceled){this._nulling();return}ft=!1,Yt=!1,wt=!1,clearInterval(this._loopId),clearTimeout(this._dragStartTimer),hn(this.cloneId),hn(this._dragStartId),this.nativeDraggable&&(q(document,"drop",this),q(n,"dragstart",this._onDragStart)),this._offMoveEvents(),this._offUpEvents(),pt&&O(document.body,"user-select",""),O(S,"transform",""),e&&(vt&&(e.cancelable&&e.preventDefault(),!l.dropBubble&&e.stopPropagation()),N&&N.parentNode&&N.parentNode.removeChild(N),(J===te||re&&re.lastPutMode!=="clone")&&x&&x.parentNode&&x.parentNode.removeChild(x),S&&(this.nativeDraggable&&q(S,"dragend",this),dn(S),S.style["will-change"]="",vt&&!ft&&ge(S,re?re.options.ghostClass:this.options.ghostClass,!1),ge(S,this.options.chosenClass,!1),ue({sortable:this,name:"unchoose",toEl:te,newIndex:null,newDraggableIndex:null,originalEvent:e}),J!==te?(_e>=0&&(ue({rootEl:te,name:"add",toEl:te,fromEl:J,originalEvent:e}),ue({sortable:this,name:"remove",toEl:te,originalEvent:e}),ue({rootEl:te,name:"sort",toEl:te,fromEl:J,originalEvent:e}),ue({sortable:this,name:"sort",toEl:te,originalEvent:e})),re&&re.save()):_e!==ut&&_e>=0&&(ue({sortable:this,name:"update",toEl:te,originalEvent:e}),ue({sortable:this,name:"sort",toEl:te,originalEvent:e})),A.active&&((_e==null||_e===-1)&&(_e=ut,Ke=_t),ue({sortable:this,name:"end",toEl:te,originalEvent:e}),this.save()))),this._nulling()},_nulling:function(){he("nulling",this),J=S=te=N=Je=x=Mt=Ve=xe=Te=vt=_e=Ke=ut=_t=ct=yt=re=Rt=A.dragged=A.ghost=A.clone=A.active=null,Xt.forEach(function(e){e.checked=!0}),Xt.length=sn=un=0},handleEvent:function(e){switch(e.type){case"drop":case"dragend":this._onDrop(e);break;case"dragenter":case"dragover":S&&(this._onDragOver(e),Ii(e));break;case"selectstart":e.preventDefault();break}},toArray:function(){for(var e=[],n,l=this.el.children,i=0,a=l.length,r=this.options;i<a;i++)n=l[i],ke(n,r.draggable,this.el,!1)&&e.push(n.getAttribute(r.dataIdAttr)||Ri(n));return e},sort:function(e,n){var l={},i=this.el;this.toArray().forEach(function(a,r){var s=i.children[r];ke(s,this.options.draggable,i,!1)&&(l[a]=s)},this),n&&this.captureAnimationState(),e.forEach(function(a){l[a]&&(i.removeChild(l[a]),i.appendChild(l[a]))}),n&&this.animateAll()},save:function(){var e=this.options.store;e&&e.set&&e.set(this)},closest:function(e,n){return ke(e,n||this.options.draggable,this.el,!1)},option:function(e,n){var l=this.options;if(n===void 0)return l[e];var i=bt.modifyOption(this,e,n);typeof i<"u"?l[e]=i:l[e]=n,e==="group"&&ml(l)},destroy:function(){he("destroy",this);var e=this.el;e[be]=null,q(e,"mousedown",this._onTapStart),q(e,"touchstart",this._onTapStart),q(e,"pointerdown",this._onTapStart),this.nativeDraggable&&(q(e,"dragover",this),q(e,"dragenter",this)),Array.prototype.forEach.call(e.querySelectorAll("[draggable]"),function(n){n.removeAttribute("draggable")}),this._onDrop(),this._disableDelayedDragEvents(),Bt.splice(Bt.indexOf(this.el),1),this.el=e=null},_hideClone:function(){if(!Ve){if(he("hideClone",this),A.eventCanceled)return;O(x,"display","none"),this.options.removeCloneOnHide&&x.parentNode&&x.parentNode.removeChild(x),Ve=!0}},_showClone:function(e){if(e.lastPutMode!=="clone"){this._hideClone();return}if(Ve){if(he("showClone",this),A.eventCanceled)return;S.parentNode==J&&!this.options.group.revertClone?J.insertBefore(x,S):Je?J.insertBefore(x,Je):J.appendChild(x),this.options.group.revertClone&&this.animate(S,x),O(x,"display",""),Ve=!1}}};function Ii(t){t.dataTransfer&&(t.dataTransfer.dropEffect="move"),t.cancelable&&t.preventDefault()}function Wt(t,e,n,l,i,a,r,s){var u,o=t[be],f=o.options.onMove,c;return window.CustomEvent&&!ze&&!mt?u=new CustomEvent("move",{bubbles:!0,cancelable:!0}):(u=document.createEvent("Event"),u.initEvent("move",!0,!0)),u.to=e,u.from=t,u.dragged=n,u.draggedRect=l,u.related=i||e,u.relatedRect=a||ie(e),u.willInsertAfter=s,u.originalEvent=r,t.dispatchEvent(u),f&&(c=f.call(o,u,r)),c}function dn(t){t.draggable=!1}function Ai(){cn=!1}function Oi(t,e,n){var l=ie(ot(n.el,0,n.options,!0)),i=sl(n.el,n.options,N),a=10;return e?t.clientX<i.left-a||t.clientY<l.top&&t.clientX<l.right:t.clientY<i.top-a||t.clientY<l.bottom&&t.clientX<l.left}function Fi(t,e,n){var l=ie(an(n.el,n.options.draggable)),i=sl(n.el,n.options,N),a=10;return e?t.clientX>i.right+a||t.clientY>l.bottom&&t.clientX>l.left:t.clientY>i.bottom+a||t.clientX>l.right&&t.clientY>l.top}function Ni(t,e,n,l,i,a,r,s){var u=l?t.clientY:t.clientX,o=l?n.height:n.width,f=l?n.top:n.left,c=l?n.bottom:n.right,d=!1;if(!r){if(s&&zt<o*i){if(!wt&&(yt===1?u>f+o*a/2:u<c-o*a/2)&&(wt=!0),wt)d=!0;else if(yt===1?u<f+zt:u>c-zt)return-yt}else if(u>f+o*(1-i)/2&&u<c-o*(1-i)/2)return Mi(e)}return d=d||r,d&&(u<f+o*a/2||u>c-o*a/2)?u>f+o/2?1:-1:0}function Mi(t){return ye(S)<ye(t)?1:-1}function Ri(t){for(var e=t.tagName+t.className+t.src+t.href+t.textContent,n=e.length,l=0;n--;)l+=e.charCodeAt(n);return l.toString(36)}function Hi(t){Xt.length=0;for(var e=t.getElementsByTagName("input"),n=e.length;n--;){var l=e[n];l.checked&&Xt.push(l)}}function Gt(t){return setTimeout(t,0)}function hn(t){return clearTimeout(t)}qt&&j(document,"touchmove",function(t){(A.active||ft)&&t.cancelable&&t.preventDefault()}),A.utils={on:j,off:q,css:O,find:nl,is:function(e,n){return!!ke(e,n,e,!1)},extend:vi,throttle:al,closest:ke,toggleClass:ge,clone:ol,index:ye,nextTick:Gt,cancelNextTick:hn,detectDirection:hl,getChild:ot},A.get=function(t){return t[be]},A.mount=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];e[0].constructor===Array&&(e=e[0]),e.forEach(function(l){if(!l.prototype||!l.prototype.constructor)throw"Sortable: Mounted plugin must be a constructor function, not ".concat({}.toString.call(l));l.utils&&(A.utils=Pe(Pe({},A.utils),l.utils)),bt.mount(l)})},A.create=function(t,e){return new A(t,e)},A.version=gi;var ae=[],Et,mn,pn=!1,gn,bn,Ut,Dt;function Bi(){function t(){this.defaults={scroll:!0,forceAutoScrollFallback:!1,scrollSensitivity:30,scrollSpeed:10,bubbleScroll:!0};for(var e in this)e.charAt(0)==="_"&&typeof this[e]=="function"&&(this[e]=this[e].bind(this))}return t.prototype={dragStarted:function(n){var l=n.originalEvent;this.sortable.nativeDraggable?j(document,"dragover",this._handleAutoScroll):this.options.supportPointer?j(document,"pointermove",this._handleFallbackAutoScroll):l.touches?j(document,"touchmove",this._handleFallbackAutoScroll):j(document,"mousemove",this._handleFallbackAutoScroll)},dragOverCompleted:function(n){var l=n.originalEvent;!this.options.dragOverBubble&&!l.rootEl&&this._handleAutoScroll(l)},drop:function(){this.sortable.nativeDraggable?q(document,"dragover",this._handleAutoScroll):(q(document,"pointermove",this._handleFallbackAutoScroll),q(document,"touchmove",this._handleFallbackAutoScroll),q(document,"mousemove",this._handleFallbackAutoScroll)),bl(),Qt(),yi()},nulling:function(){Ut=mn=Et=pn=Dt=gn=bn=null,ae.length=0},_handleFallbackAutoScroll:function(n){this._handleAutoScroll(n,!0)},_handleAutoScroll:function(n,l){var i=this,a=(n.touches?n.touches[0]:n).clientX,r=(n.touches?n.touches[0]:n).clientY,s=document.elementFromPoint(a,r);if(Ut=n,l||this.options.forceAutoScrollFallback||mt||ze||pt){_n(n,this.options,s,l);var u=Qe(s,!0);pn&&(!Dt||a!==gn||r!==bn)&&(Dt&&bl(),Dt=setInterval(function(){var o=Qe(document.elementFromPoint(a,r),!0);o!==u&&(u=o,Qt()),_n(n,i.options,o,l)},10),gn=a,bn=r)}else{if(!this.options.bubbleScroll||Qe(s,!0)===Le()){Qt();return}_n(n,this.options,Qe(s,!1),!1)}}},Be(t,{pluginName:"scroll",initializeByDefault:!0})}function Qt(){ae.forEach(function(t){clearInterval(t.pid)}),ae=[]}function bl(){clearInterval(Dt)}var _n=al(function(t,e,n,l){if(e.scroll){var i=(t.touches?t.touches[0]:t).clientX,a=(t.touches?t.touches[0]:t).clientY,r=e.scrollSensitivity,s=e.scrollSpeed,u=Le(),o=!1,f;mn!==n&&(mn=n,Qt(),Et=e.scroll,f=e.scrollFn,Et===!0&&(Et=Qe(n,!0)));var c=0,d=Et;do{var p=d,h=ie(p),_=h.top,g=h.bottom,y=h.left,D=h.right,E=h.width,k=h.height,v=void 0,P=void 0,w=p.scrollWidth,H=p.scrollHeight,C=O(p),ne=p.scrollLeft,se=p.scrollTop;p===u?(v=E<w&&(C.overflowX==="auto"||C.overflowX==="scroll"||C.overflowX==="visible"),P=k<H&&(C.overflowY==="auto"||C.overflowY==="scroll"||C.overflowY==="visible")):(v=E<w&&(C.overflowX==="auto"||C.overflowX==="scroll"),P=k<H&&(C.overflowY==="auto"||C.overflowY==="scroll"));var V=v&&(Math.abs(D-i)<=r&&ne+E<w)-(Math.abs(y-i)<=r&&!!ne),W=P&&(Math.abs(g-a)<=r&&se+k<H)-(Math.abs(_-a)<=r&&!!se);if(!ae[c])for(var K=0;K<=c;K++)ae[K]||(ae[K]={});(ae[c].vx!=V||ae[c].vy!=W||ae[c].el!==p)&&(ae[c].el=p,ae[c].vx=V,ae[c].vy=W,clearInterval(ae[c].pid),(V!=0||W!=0)&&(o=!0,ae[c].pid=setInterval((function(){l&&this.layer===0&&A.active._onTouchMove(Ut);var F=ae[this.layer].vy?ae[this.layer].vy*s:0,z=ae[this.layer].vx?ae[this.layer].vx*s:0;typeof f=="function"&&f.call(A.dragged.parentNode[be],z,F,t,Ut,ae[this.layer].el)!=="continue"||rl(ae[this.layer].el,z,F)}).bind({layer:c}),24))),c++}while(e.bubbleScroll&&d!==u&&(d=Qe(d,!1)));pn=o}},30),_l=function(e){var n=e.originalEvent,l=e.putSortable,i=e.dragEl,a=e.activeSortable,r=e.dispatchSortableEvent,s=e.hideGhostForTarget,u=e.unhideGhostForTarget;if(n){var o=l||a;s();var f=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:n,c=document.elementFromPoint(f.clientX,f.clientY);u(),o&&!o.el.contains(c)&&(r("spill"),this.onSpill({dragEl:i,putSortable:l}))}};function vn(){}vn.prototype={startIndex:null,dragStart:function(e){var n=e.oldDraggableIndex;this.startIndex=n},onSpill:function(e){var n=e.dragEl,l=e.putSortable;this.sortable.captureAnimationState(),l&&l.captureAnimationState();var i=ot(this.sortable.el,this.startIndex,this.options);i?this.sortable.el.insertBefore(n,i):this.sortable.el.appendChild(n),this.sortable.animateAll(),l&&l.animateAll()},drop:_l},Be(vn,{pluginName:"revertOnSpill"});function yn(){}yn.prototype={onSpill:function(e){var n=e.dragEl,l=e.putSortable,i=l||this.sortable;i.captureAnimationState(),n.parentNode&&n.parentNode.removeChild(n),i.animateAll()},drop:_l},Be(yn,{pluginName:"removeOnSpill"}),A.mount(new Bi),A.mount(yn,vn);function vl(t,e,n){const l=t.slice();return l[16]=e[n],l}function yl(t,e,n){const l=t.slice();return l[19]=e[n],l}function wl(t){let e,n,l,i;function a(){return t[10](t[19])}return{c(){e=T("div"),n=T("a"),n.innerHTML='<i class="fas fa-pencil-alt fa-sm"></i>',m(n,"href","javascript:"),m(n,"data-action","editField"),m(n,"class","edit-field svelte-1mx8y43"),m(e,"class","right svelte-1mx8y43")},m(r,s){Q(r,e,s),b(e,n),l||(i=le(n,"click",a),l=!0)},p(r,s){t=r},d(r){r&&G(e),l=!1,i()}}}function El(t,e){let n,l,i,a=e[19].label+"",r,s,u,o=e[2].editable&&wl(e),f=[e[9](e[19])],c={};for(let d=0;d<f.length;d+=1)c=qe(c,f[d]);return{key:t,first:null,c(){n=T("li"),l=T("div"),i=T("label"),r=ce(a),s=X(),o&&o.c(),u=X(),m(i,"class","svelte-1mx8y43"),m(l,"class","left svelte-1mx8y43"),kt(n,c),Tt(n,"svelte-1mx8y43",!0),this.first=n},m(d,p){Q(d,n,p),b(n,l),b(l,i),b(i,r),b(n,s),o&&o.m(n,null),b(n,u)},p(d,p){e=d,p&1&&a!==(a=e[19].label+"")&&Ae(r,a),e[2].editable?o?o.p(e,p):(o=wl(e),o.c(),o.m(n,u)):o&&(o.d(1),o=null),kt(n,c=Hn(f,[p&1&&e[9](e[19])])),Tt(n,"svelte-1mx8y43",!0)},d(d){d&&G(n),o&&o.d()}}}function Dl(t,e){let n,l,i,a=e[16].label+"",r,s,u=[e[9](e[16])],o={};for(let f=0;f<u.length;f+=1)o=qe(o,u[f]);return{key:t,first:null,c(){n=T("li"),l=T("div"),i=T("label"),r=ce(a),s=X(),m(i,"class","svelte-1mx8y43"),m(l,"class","left svelte-1mx8y43"),kt(n,o),Tt(n,"svelte-1mx8y43",!0),this.first=n},m(f,c){Q(f,n,c),b(n,l),b(l,i),b(i,r),b(n,s)},p(f,c){e=f,c&2&&a!==(a=e[16].label+"")&&Ae(r,a),kt(n,o=Hn(u,[c&2&&e[9](e[16])])),Tt(n,"svelte-1mx8y43",!0)},d(f){f&&G(n)}}}function Yi(t){let e,n,l,i,a,r,s=[],u=new Map,o,f,c,d,p,h,_=[],g=new Map,y=de(t[0]);const D=v=>v[19].name;for(let v=0;v<y.length;v+=1){let P=yl(t,y,v),w=D(P);u.set(w,s[v]=El(w,P))}let E=de(t[1]);const k=v=>v[16].name;for(let v=0;v<E.length;v+=1){let P=vl(t,E,v),w=k(P);g.set(w,_[v]=Dl(w,P))}return{c(){e=T("div"),n=T("div"),l=T("div"),i=T("header"),i.textContent=`${Y.translate("Enabled","labels","Admin")}`,a=X(),r=T("ul");for(let v=0;v<s.length;v+=1)s[v].c();o=X(),f=T("div"),c=T("div"),d=T("header"),d.textContent=`${Y.translate("Disabled","labels","Admin")}`,p=X(),h=T("ul");for(let v=0;v<_.length;v+=1)_[v].c();m(r,"class","enabled connected svelte-1mx8y43"),m(l,"class","well"),m(n,"class","col-sm-5"),m(h,"class","disabled connected svelte-1mx8y43"),m(c,"class","well"),m(f,"class","col-sm-5"),m(e,"id","layout"),m(e,"class","row")},m(v,P){Q(v,e,P),b(e,n),b(n,l),b(l,i),b(l,a),b(l,r);for(let w=0;w<s.length;w+=1)s[w]&&s[w].m(r,null);b(e,o),b(e,f),b(f,c),b(c,d),b(c,p),b(c,h);for(let w=0;w<_.length;w+=1)_[w]&&_[w].m(h,null);t[11](e)},p(v,P){P&645&&(y=de(v[0]),s=It(s,P,D,1,v,y,u,r,Ct,El,null,yl)),P&514&&(E=de(v[1]),_=It(_,P,k,1,v,E,g,h,Ct,Dl,null,vl))},d(v){v&&G(e);for(let P=0;P<s.length;P+=1)s[P].d();for(let P=0;P<_.length;P+=1)_[P].d();t[11](null)}}}function zi(t){let e,n,l={params:t[2],validate:t[8],fetch:t[4],loadLayout:t[3],$$slots:{default:[Yi]},$$scope:{ctx:t}};return e=new Kn({props:l}),t[12](e),{c(){Ge(e.$$.fragment)},m(i,a){Ne(e,i,a),n=!0},p(i,[a]){const r={};a&4&&(r.params=i[2]),a&16&&(r.fetch=i[4]),a&8&&(r.loadLayout=i[3]),a&4194343&&(r.$$scope={dirty:a,ctx:i}),e.$set(r)},i(i){n||(Ee(e.$$.fragment,i),n=!0)},o(i){Fe(e.$$.fragment,i),n=!1},d(i){t[12](null),Me(e,i)}}}function Xi(t){return t.toLowerCase()}function Sl(t,e){return t[e]}function qi(t,e,n){let l,i,a,{params:r}=e,{enabledFields:s=[]}=e,{disabledFields:u=[]}=e,{loadLayout:o}=e,f;xt(()=>{c()}),An(()=>{i&&i.destroy(),a&&a.destroy()});function c(){const E={group:"fields",draggable:"li",animation:150};i=A.create(l.querySelector("ul.enabled"),{...E,onEnd(k){if(k.to.closest(".connected").classList.contains("enabled")){const[v]=s.splice(k.oldIndex,1);s.splice(k.newIndex,0,v)}else{const v=s[k.oldIndex];s.splice(k.oldIndex,1),u.splice(k.newIndex,0,v),n(1,u=[...u])}n(0,s=[...s])}}),a=A.create(l.querySelector("ul.disabled"),{...E,onEnd(k){if(k.to.closest(".connected").classList.contains("disabled")){const[v]=u.splice(k.oldIndex,1);u.splice(k.newIndex,0,v)}else{const v=u[k.oldIndex];u.splice(k.oldIndex,1),s.splice(k.newIndex,0,v),n(0,s=[...s])}n(1,u=[...u])}})}function d(E){r.openEditDialog(E,r.scope,r.dataAttributeList,r.dataAttributesDefs,k=>{n(0,s=s.map(v=>{if(v.name===E.name)for(let P in k)v[P]=k[P];return v}))})}let{fetch:p=()=>s}=e;function h(E){return E.length===0?(Re.notify("Layout cannot be empty","error"),!1):!0}function _(E){const k={};return r.dataAttributeList.forEach(v=>{Sl(E,v)!=null&&(k[`data-${Xi(v)}`]=Sl(E,v))}),k}const g=E=>d(E);function y(E){Oe[E?"unshift":"push"](()=>{l=E,n(5,l)})}function D(E){Oe[E?"unshift":"push"](()=>{f=E,n(6,f)})}return t.$$set=E=>{"params"in E&&n(2,r=E.params),"enabledFields"in E&&n(0,s=E.enabledFields),"disabledFields"in E&&n(1,u=E.disabledFields),"loadLayout"in E&&n(3,o=E.loadLayout),"fetch"in E&&n(4,p=E.fetch)},[s,u,r,o,p,l,f,d,h,_,g,y,D]}class wn extends Se{constructor(e){super(),De(this,e,qi,zi,ve,{params:2,enabledFields:0,disabledFields:1,loadLayout:3,fetch:4})}}function ji(t){let e,n,l={params:t[0],enabledFields:t[2],disabledFields:t[3],editable:Wi,loadLayout:t[4]};return e=new wn({props:l}),t[6](e),{c(){Ge(e.$$.fragment)},m(i,a){Ne(e,i,a),n=!0},p(i,[a]){const r={};a&1&&(r.params=i[0]),a&4&&(r.enabledFields=i[2]),a&8&&(r.disabledFields=i[3]),e.$set(r)},i(i){n||(Ee(e.$$.fragment,i),n=!0)},o(i){Fe(e.$$.fragment,i),n=!1},d(i){t[6](null),Me(e,i)}}}let Wi=!0;function Gi(t){return!0}function Ui(t,e,n){let{params:l}=e;l.dataAttributeList||(l.dataAttributeList=["id","name","width","widthPx","link","notSortable","align","view","customLabel"]),l.dataAttributesDefs||(l.dataAttributesDefs={link:{type:"bool"},width:{type:"float"},notSortable:{type:"bool"},align:{type:"enum",options:["left","right"]},view:{type:"varchar",readOnly:!0},customLabel:{type:"varchar",readOnly:!0},widthPx:{type:"float"},name:{type:"varchar",readOnly:!0}});let{layoutDisabledParameter:i="layoutListDisabled"}=e,a,r=[],s=[];const u=[],o=[];function f(h){Ot.create(l.scope,_=>{He.get(l.scope,l.type,l.layoutProfileId,g=>{c(_,g),h&&h()},!1)})}function c(h,_){const g=Object.keys(h.defs.fields).filter(k=>Gi(h.getFieldParam(k,"type"))&&d(h,k)).sort((k,v)=>Y.translate(k,"fields",l.scope).localeCompare(Y.translate(v,"fields",l.scope))),y=[],D=[],E=[];n(2,r=_.map(k=>{const v=Y.translate(k.name,"fields",l.scope);return D.includes(v)&&E.push(v),D.push(v),y.push(k.name),{...k,label:k.label||v}})),n(3,s=g.filter(k=>!y.includes(k)).map(k=>{const v=Y.translate(k,"fields",l.scope);D.includes(v)&&E.push(v),D.push(v);const P={name:k,label:v},w=Ue.get(["entityDefs",l.scope,"fields",k,"type"]);return w&&Ue.get(["fields",w,"notSortable"])&&(P.notSortable=!0),P})),[r,s].forEach(k=>{k.forEach(v=>{E.includes(v.label)&&(v.label+=` (${v.name})`)})})}function d(h,_){return u.includes(_)||o.includes(h.getFieldParam(_,"type"))?!1:!h.getFieldParam(_,"disabled")&&!h.getFieldParam(_,i)}function p(h){Oe[h?"unshift":"push"](()=>{a=h,n(1,a)})}return t.$$set=h=>{"params"in h&&n(0,l=h.params),"layoutDisabledParameter"in h&&n(5,i=h.layoutDisabledParameter)},[l,a,r,s,f,i,p]}class kl extends Se{constructor(e){super(),De(this,e,Ui,ji,ve,{params:0,layoutDisabledParameter:5})}}function Qi(t){let e,n,l={params:t[0],enabledFields:t[2],disabledFields:t[3],loadLayout:t[5],fetch:t[4]};return e=new wn({props:l}),t[7](e),{c(){Ge(e.$$.fragment)},m(i,a){Ne(e,i,a),n=!0},p(i,[a]){const r={};a&1&&(r.params=i[0]),a&4&&(r.enabledFields=i[2]),a&8&&(r.disabledFields=i[3]),e.$set(r)},i(i){n||(Ee(e.$$.fragment,i),n=!0)},o(i){Fe(e.$$.fragment,i),n=!1},d(i){t[7](null),Me(e,i)}}}function Vi(t,e,n){let{params:l}=e,{viewType:i="detail"}=e;l.dataAttributeList||(l.dataAttributeList=["id","name","style","sticked"]),l.dataAttributesDefs||(l.dataAttributesDefs={style:{type:"enum",options:["default","success","danger","primary","info","warning"],translation:"LayoutManager.options.style"},sticked:{type:"bool"},name:{readOnly:!0}});let a,r=[],s=[],u=()=>{let d={};r.forEach(p=>{d[p.name]=p}),s.forEach(p=>{d[p.name]={...p,disabled:!0}});debugger;return d};function o(d){He.get(l.scope,l.type,l.layoutProfileId,p=>{f(p),d&&d()},!1)}function f(d){let p=[],h={},_={};Ue.get(["clientDefs",l.scope,"defaultSidePanel",i])!==!1&&!Ue.get(["clientDefs",l.scope,"defaultSidePanelDisabled"])&&(p.push("default"),h.default="Default"),(Ue.get(["clientDefs",l.scope,"sidePanels",i])||[]).forEach(g=>{g.name&&(p.push(g.name),g.label&&(h[g.name]=g.label),_[g.name]=g)}),n(3,s=[]),d=d||{},n(2,r=[]),p.forEach((g,y)=>{let D=!1,E=d[g]||{};E.disabled&&(D=!0);let k;if(h[g]?k=Y.translate(h[g],"labels",l.scope):k=Y.translate(g,"panels",l.scope),D)s.push({name:g,label:k});else{let v={name:g,label:k};v.name in _&&l.dataAttributeList.forEach(P=>{if(P==="name")return;let w=_[v.name]||{};P in w&&(v[P]=w[P])});for(let P in E)v[P]=E[P];v.index="index"in E?E.index:y,r.push(v)}}),r.sort((g,y)=>g.index-y.index)}function c(d){Oe[d?"unshift":"push"](()=>{a=d,n(1,a)})}return t.$$set=d=>{"params"in d&&n(0,l=d.params),"viewType"in d&&n(6,i=d.viewType)},[l,a,r,s,u,o,i,c]}class Vt extends Se{constructor(e){super(),De(this,e,Vi,Qi,ve,{params:0,viewType:6})}}function Ki(t){let e,n;return e=new wn({props:{params:t[0],enabledFields:t[1],disabledFields:t[2],loadLayout:t[3]}}),{c(){Ge(e.$$.fragment)},m(l,i){Ne(e,l,i),n=!0},p(l,[i]){const a={};i&1&&(a.params=l[0]),i&2&&(a.enabledFields=l[1]),i&4&&(a.disabledFields=l[2]),e.$set(a)},i(l){n||(Ee(e.$$.fragment,l),n=!0)},o(l){Fe(e.$$.fragment,l),n=!1},d(l){Me(e,l)}}}function Zi(t,e){return!t.getLinkParam(e,"disabled")&&!t.getLinkParam(e,"layoutRelationshipsDisabled")}function Ji(t,e,n){let{params:l}=e;l.dataAttributeList||(l.dataAttributeList=["id","name","style","hiddenPerDefault"]),l.dataAttributesDefs||(l.dataAttributesDefs={style:{type:"enum",options:["default","success","danger","primary","info","warning"],translation:"LayoutManager.options.style"},hiddenPerDefault:{type:"bool"},name:{readOnly:!0}});let i=[],a=[];function r(u){Ot.create(l.scope,function(o){He.get(l.scope,l.type,l.layoutProfileId,f=>{s(o,f),u&&u()},!1)})}function s(u,o){let f=[];for(let d in u.defs.links)["hasMany","hasChildren"].includes(u.defs.links[d].type)&&Zi(u,d)&&f.push(d);f.sort((d,p)=>Y.translate(d,"links","scope").localeCompare(Y.translate(p,"links","scope")));let c=[];n(1,i=[]),n(2,a=[]);for(let d in o){let p=o[d],h;typeof p=="string"?h={name:p,label:Y.translate(p,"links","scope")}:(h=p,h.label=Y.translate(h.name,"links","scope")),l.dataAttributeList.forEach(_=>{if(_==="name"||_ in h)return;let g=Ue.get(["clientDefs","scope","relationshipPanels",h.name,_]);g!==null&&(h[_]=g)}),i.push(h),c.push(h.name)}for(let d of f)c.includes(d)||a.push({name:d,label:Y.translate(d,"links","scope")});for(let d of i)d.label=Y.translate(d.name,"links","scope")}return t.$$set=u=>{"params"in u&&n(0,l=u.params)},[l,i,a,r]}class xi extends Se{constructor(e){super(),De(this,e,Ji,Ki,ve,{params:0})}}function Tl(t,e,n){const l=t.slice();return l[40]=e[n],l}function Pl(t,e,n){const l=t.slice();return l[43]=e[n],l}function Ll(t,e,n){const l=t.slice();return l[46]=e[n],l}function Cl(t,e,n){const l=t.slice();return l[49]=e[n],l[51]=n,l}function $i(t){let e,n,l,i,a;function r(){return t[21](t[43],t[46],t[51])}function s(...u){return t[22](t[43],t[46],t[51],...u)}return{c(){e=T("li"),n=T("a"),n.innerHTML='<i class="fas fa-minus"></i>',l=X(),m(n,"href","#"),m(n,"data-action","minusCell"),m(n,"class","remove-field svelte-fp3tbt"),m(e,"class","empty cell svelte-fp3tbt")},m(u,o){Q(u,e,o),b(e,n),b(e,l),i||(a=[le(n,"click",je(r)),le(e,"dragover",je(ia)),le(e,"drop",s)],i=!0)},p(u,o){t=u},d(u){u&&G(e),i=!1,Ie(a)}}}function ea(t){let e,n=t[49].label+"",l,i,a,r,s,u,o,f,c,d,p;function h(){return t[19](t[43],t[46],t[51])}function _(...g){return t[20](t[49],...g)}return{c(){e=T("li"),l=ce(n),i=X(),a=T("a"),a.innerHTML='<i class="fas fa-times"></i>',r=X(),m(a,"href","#"),m(a,"data-action","removeField"),m(a,"class","remove-field svelte-fp3tbt"),m(e,"class","cell svelte-fp3tbt"),m(e,"draggable","true"),m(e,"data-id",s=t[49].id),m(e,"data-name",u=t[49].name),m(e,"data-full-width",o=t[49].fullWidth?"true":void 0),m(e,"data-custom-label",f=t[49].customLabel?t[49].customLabel:void 0),m(e,"data-no-label",c=t[49].noLabel)},m(g,y){Q(g,e,y),b(e,l),b(e,i),b(e,a),b(e,r),d||(p=[le(a,"click",je(h)),le(e,"dragstart",Jt(_))],d=!0)},p(g,y){t=g,y[0]&2&&n!==(n=t[49].label+"")&&Ae(l,n),y[0]&2&&s!==(s=t[49].id)&&m(e,"data-id",s),y[0]&2&&u!==(u=t[49].name)&&m(e,"data-name",u),y[0]&2&&o!==(o=t[49].fullWidth?"true":void 0)&&m(e,"data-full-width",o),y[0]&2&&f!==(f=t[49].customLabel?t[49].customLabel:void 0)&&m(e,"data-custom-label",f),y[0]&2&&c!==(c=t[49].noLabel)&&m(e,"data-no-label",c)},d(g){g&&G(e),d=!1,Ie(p)}}}function Il(t){let e;function n(a,r){return a[49]?ea:$i}let l=n(t),i=l(t);return{c(){i.c(),e=In()},m(a,r){i.m(a,r),Q(a,e,r)},p(a,r){l===(l=n(a))&&i?i.p(a,r):(i.d(1),i=l(a),i&&(i.c(),i.m(e.parentNode,e)))},d(a){a&&G(e),i.d(a)}}}function Al(t,e){let n,l,i,a,r,s,u,o,f;function c(){return e[18](e[43],e[46])}let d=de(e[46].cells),p=[];for(let h=0;h<d.length;h+=1)p[h]=Il(Cl(e,d,h));return{key:t,first:null,c(){n=T("li"),l=T("div"),i=T("a"),i.innerHTML='<i class="fas fa-times"></i>',a=X(),r=T("ul");for(let h=0;h<p.length;h+=1)p[h].c();s=X(),m(i,"href","#"),m(i,"data-action","removeRow"),m(i,"class","remove-row pull-right svelte-fp3tbt"),m(l,"class","svelte-fp3tbt"),m(r,"class","cells svelte-fp3tbt"),m(n,"class","row svelte-fp3tbt"),m(n,"data-number",u=e[46].number),this.first=n},m(h,_){Q(h,n,_),b(n,l),b(l,i),b(n,a),b(n,r);for(let g=0;g<p.length;g+=1)p[g]&&p[g].m(r,null);b(n,s),o||(f=[le(i,"click",je(c)),le(r,"mousedown",Jt(aa))],o=!0)},p(h,_){if(e=h,_[0]&5634){d=de(e[46].cells);let g;for(g=0;g<d.length;g+=1){const y=Cl(e,d,g);p[g]?p[g].p(y,_):(p[g]=Il(y),p[g].c(),p[g].m(r,null))}for(;g<p.length;g+=1)p[g].d(1);p.length=d.length}_[0]&2&&u!==(u=e[46].number)&&m(n,"data-number",u)},d(h){h&&G(n),Zt(p,h),o=!1,Ie(f)}}}function Ol(t,e){let n,l,i,a=(e[43].customLabel||e[43].label||"")+"",r,s,u,o,f,c,d,p,h,_,g,y=[],D=new Map,E,k,v,P,w,H,C;function ne(){return e[16](e[43])}function se(){return e[17](e[43])}let V=de(e[43].rows);const W=F=>F[46].number;for(let F=0;F<V.length;F+=1){let z=Ll(e,V,F),me=W(z);D.set(me,y[F]=Al(me,z))}function K(){return e[23](e[43])}return{key:t,first:null,c(){n=T("li"),l=T("header"),i=T("label"),r=ce(a),u=ce(`Â \r
                                `),o=T("a"),o.innerHTML='<i class="fas fa-pencil-alt fa-sm"></i>',f=X(),c=T("a"),d=T("i"),_=X(),g=T("ul");for(let F=0;F<y.length;F+=1)y[F].c();E=X(),k=T("div"),v=T("a"),v.innerHTML='<i class="fas fa-plus"></i>',P=X(),m(i,"data-is-custom",s=e[43].customLabel?"true":void 0),m(i,"class","svelte-fp3tbt"),m(o,"href","#"),m(o,"data-action","edit-panel-label"),m(o,"class","edit-panel-label svelte-fp3tbt"),m(d,"class","fas fa-times"),m(c,"href","#"),We(c,"float","right"),m(c,"data-action","removePanel"),m(c,"class","remove-panel svelte-fp3tbt"),m(c,"data-number",p=e[43].number),m(l,"data-name",h=e[43].name),m(l,"class","svelte-fp3tbt"),m(g,"class","rows svelte-fp3tbt"),m(v,"href","#"),m(v,"data-action","addRow"),m(v,"class","svelte-fp3tbt"),m(k,"class","svelte-fp3tbt"),m(n,"data-number",w=e[43].number),m(n,"class","panel-layout svelte-fp3tbt"),this.first=n},m(F,z){Q(F,n,z),b(n,l),b(l,i),b(i,r),b(l,u),b(l,o),b(l,f),b(l,c),b(c,d),b(n,_),b(n,g);for(let me=0;me<y.length;me+=1)y[me]&&y[me].m(g,null);b(n,E),b(n,k),b(k,v),b(n,P),H||(C=[le(o,"click",je(ne)),le(c,"click",je(se)),le(g,"mousedown",Jt(ra)),le(v,"click",je(K))],H=!0)},p(F,z){e=F,z[0]&2&&a!==(a=(e[43].customLabel||e[43].label||"")+"")&&Ae(r,a),z[0]&2&&s!==(s=e[43].customLabel?"true":void 0)&&m(i,"data-is-custom",s),z[0]&2&&p!==(p=e[43].number)&&m(c,"data-number",p),z[0]&2&&h!==(h=e[43].name)&&m(l,"data-name",h),z[0]&5890&&(V=de(e[43].rows),y=It(y,z,W,1,e,V,D,g,Ct,Al,null,Ll)),z[0]&2&&w!==(w=e[43].number)&&m(n,"data-number",w)},d(F){F&&G(n);for(let z=0;z<y.length;z+=1)y[z].d();H=!1,Ie(C)}}}function Fl(t){let e,n=t[40].label+"",l,i,a,r,s;function u(...o){return t[24](t[40],...o)}return{c(){e=T("li"),l=ce(n),i=X(),m(e,"class","cell svelte-fp3tbt"),m(e,"data-name",a=t[40].name)},m(o,f){Q(o,e,f),b(e,l),b(e,i),r||(s=le(e,"dragstart",u),r=!0)},p(o,f){t=o,f[0]&4&&n!==(n=t[40].label+"")&&Ae(l,n),f[0]&4&&a!==(a=t[40].name)&&m(e,"data-name",a)},d(o){o&&G(e),r=!1,s()}}}function ta(t){let e,n,l,i,a,r,s,u,o=[],f=new Map,c,d,p,h,_,g,y,D,E=de(t[1]);const k=w=>w[43].number;for(let w=0;w<E.length;w+=1){let H=Pl(t,E,w),C=k(H);f.set(C,o[w]=Ol(C,H))}let v=de(t[2]),P=[];for(let w=0;w<v.length;w+=1)P[w]=Fl(Tl(t,v,w));return{c(){e=T("div"),n=T("div"),l=T("div"),i=T("header"),i.textContent=`${Y.translate("Layout","LayoutManager")}`,a=X(),r=T("a"),r.textContent=`${Y.translate("Add Panel","Admin")}`,s=X(),u=T("ul");for(let w=0;w<o.length;w+=1)o[w].c();c=X(),d=T("div"),p=T("div"),h=T("header"),h.textContent=`${Y.translate("Available Fields","Admin")}`,_=X(),g=T("ul");for(let w=0;w<P.length;w+=1)P[w].c();m(i,"class","svelte-fp3tbt"),m(r,"href","#"),m(r,"class","svelte-fp3tbt"),m(u,"class","panels svelte-fp3tbt"),m(l,"class","well svelte-fp3tbt"),m(n,"class","col-md-8 svelte-fp3tbt"),m(h,"class","svelte-fp3tbt"),m(g,"class","disabled cells clearfix svelte-fp3tbt"),m(p,"class","well svelte-fp3tbt"),m(d,"class","col-md-4 svelte-fp3tbt"),m(e,"id","layout"),m(e,"class","row svelte-fp3tbt")},m(w,H){Q(w,e,H),b(e,n),b(n,l),b(l,i),b(l,a),b(l,r),b(l,s),b(l,u);for(let C=0;C<o.length;C+=1)o[C]&&o[C].m(u,null);b(e,c),b(e,d),b(d,p),b(p,h),b(p,_),b(p,g);for(let C=0;C<P.length;C+=1)P[C]&&P[C].m(g,null);y||(D=le(r,"click",je(t[5])),y=!0)},p(w,H){if(H[0]&8130&&(E=de(w[1]),o=It(o,H,k,1,w,E,f,u,Ct,Ol,null,Pl)),H[0]&4){v=de(w[2]);let C;for(C=0;C<v.length;C+=1){const ne=Tl(w,v,C);P[C]?P[C].p(ne,H):(P[C]=Fl(ne),P[C].c(),P[C].m(g,null))}for(;C<P.length;C+=1)P[C].d(1);P.length=v.length}},d(w){w&&G(e);for(let H=0;H<o.length;H+=1)o[H].d();Zt(P,w),y=!1,D()}}}function na(t){let e,n;return e=new Kn({props:{params:t[0],validate:t[13],fetch:t[4],loadLayout:t[3],$$slots:{default:[ta]},$$scope:{ctx:t}}}),{c(){Ge(e.$$.fragment)},m(l,i){Ne(e,l,i),n=!0},p(l,i){const a={};i[0]&1&&(a.params=l[0]),i[0]&6|i[1]&2097152&&(a.$$scope={dirty:i,ctx:l}),e.$set(a)},i(l){n||(Ee(e.$$.fragment,l),n=!0)},o(l){Fe(e.$$.fragment,l),n=!1},d(l){Me(e,l)}}}function la(t,e){return e.some(n=>n.name===t)}const ia=t=>t.dataTransfer.dropEffect="move",aa=()=>{},ra=()=>{};function oa(t,e,n){let{params:l}=e,{columnCount:i=2}=e,{layoutDisabledParameter:a="layoutDetailDisabled"}=e,r=["id","label","style"],s={label:{type:"varchar"},style:{type:"enum",options:["default","success","danger","primary","info","warning"],translation:"LayoutManager.options.style"},dynamicLogicVisible:{type:"base",view:"views/admin/field-manager/fields/dynamic-logic-conditions"}},u=["modifiedAt","createdAt","modifiedBy","createdBy","assignedUser","ownerUser","teams"],o=[],f=[],c=-1,d=-1,p;Wl();function h(L){let I,M;const R=[];R.push(new Promise(B=>{Ot.create(l.scope,$=>{He.get(l.scope,l.type,l.layoutProfileId,U=>{I=U,M=$,B()},!1)})})),["detail","detailSmall"].includes(l.type)&&R.push(new Promise(B=>{He.get(l.scope,"sidePanels"+Espo.utils.upperCaseFirst(l.type),l.layoutProfileId,$=>{p=$,B()},!1)})),Promise.all(R).then(()=>{_(M,I),E(),Mn().then(()=>{v()}),L&&L()})}function _(L,I){let M=[];const R=[];for(const U in L.defs.fields)g(L,U)&&(R.push(Y.translate(U,"fields",l.scope)),M.push(U));const B=R.filter((U,pe)=>R.indexOf(U)!==pe);let $=[];n(2,f=[]),n(1,o=I),I.forEach((U,pe)=>{U.rows.forEach((ee,Ce)=>{ee&&ee.forEach((we,Xe)=>{if(Xe==i||!we)return;let Ze=Y.translate(we.name,"fields",l.scope);B.includes(Ze)&&(Ze+=` (${we.name})`),$.push({name:we.name,label:Ze}),n(1,o[pe].rows[Ce][Xe].label=Ze,o)})})}),M.sort((U,pe)=>Y.translate(U,"fields",l.scope).localeCompare(Y.translate(pe,"fields",l.scope)));for(const U in M)if(!la(M[U],$)){const pe=M[U];let ee=Y.translate(pe,"fields",l.scope);B.includes(ee)&&(ee+=` (${pe})`),f.push({name:pe,label:ee})}}function g(L,I){return y()&&u.includes(I)?!1:!L.getFieldParam(I,"disabled")&&!L.getFieldParam(I,a)}function y(){if(Ue.get(["clientDefs",l.scope,"defaultSidePanelDisabled"]))return!1;if(p){for(const L in p)if(L==="default"&&p[L].disabled)return!1}return!0}function D(){return o.map(L=>({...L,rows:L.rows.map(I=>I.cells)}))}function E(){c=-1,d=-1,n(1,o=o.map((L,I)=>(L.number=I,c=I,L.rows=L.rows.map(M=>({number:d++,cells:M})),L)))}function k(L){A.create(L,{animation:150,group:"rows",draggable:"li.row",onEnd(I){const M=parseInt(I.to.closest(".panel-layout").getAttribute("data-number")),R=parseInt(I.from.closest(".panel-layout").getAttribute("data-number"));if(R===M)n(1,o=o.map(B=>{if(B.number===M){const[$]=B.rows.splice(I.oldIndex,1);B.rows.splice(I.newIndex,0,$)}return B}));else{const $=o.find(U=>U.number===R).rows[I.oldIndex];n(1,o=o.map(U=>(U.number===R&&U.rows.splice(I.oldIndex,1),U.number===M&&U.rows.splice(I.newIndex,0,$),U)))}}})}function v(){A.create(document.querySelector("ul.panels"),{animation:150,group:"panels",draggable:"li.panel-layout",onEnd(L){const I=Array.from(L.to.children);n(1,o=I.map(M=>{const R=parseInt(M.getAttribute("data-number"));return o.find(B=>B.number===R)}))}}),document.querySelectorAll("ul.rows").forEach(L=>{k(L)}),document.querySelectorAll("ul.cells.disabled").forEach(L=>{A.create(L,{animation:150,group:"cells",draggable:"li.cell"})})}function P(){c++;const L={label:"New panel",rows:[{number:d++,cells:[!1,!1]}],number:c,name:`panel${c}`,isCustomLabel:!0};n(1,o=[...o,L]),Mn().then(()=>{const I=document.querySelector(`.panel-layout[data-number="${L.number}"] > .rows`);k(I)})}function w(L){const I=o.find(R=>R.number===L);n(1,o=o.filter(R=>R!==I));let M=[];I.rows.forEach(R=>{R.cells.forEach(B=>{B&&M.push(B)})}),n(2,f=[...f,...M])}function H(L){n(1,o=o.map(I=>(I.number===L&&(I.rows=[...I.rows,{number:d++,cells:Array(i).fill(!1)}]),I)))}function C(L,I){n(1,o=o.map(M=>{if(M.number===L){const R=M.rows.find(B=>B.number===I);M.rows=M.rows.filter(B=>B!=R),n(2,f=[...f,...R.cells.filter(B=>!!B)])}return M}))}function ne(L,I,M){n(1,o=o.map(R=>(R.number===L&&(R.rows=R.rows.map((B,$)=>{if(B.number===I){const U=B.cells[M];U&&n(2,f=[...f,U]),B.cells[M]=!1}return B})),R)))}function se(L,I,M,R){const B=L.dataTransfer.getData("name");let $=f.find(ee=>ee.name===B),U=null,pe=null;if($)n(2,f=f.filter(ee=>ee!==$));else{if(o.forEach(ee=>{ee.rows.forEach((Ce,we)=>{Ce.cells.forEach(Xe=>{Xe&&Xe.name===B&&($=Xe,U=Ce.number,pe=ee.number)})})}),!$)return;n(1,o=o.map((ee,Ce)=>(pe===ee.number&&(ee.rows=ee.rows.map((we,Xe)=>(we.number===U&&(we.cells=we.cells.map((Ze,pa)=>Ze&&Ze.name===B?!1:Ze)),we))),ee)))}n(1,o=o.map(ee=>(I===ee.number&&(ee.rows=ee.rows.map(Ce=>(M===Ce.number&&(Ce.cells=Ce.cells.map((we,Xe)=>Xe===R?($.fullWidth&&delete $.fullWidth,$):we)),Ce))),ee)))}function V(L){l.onEditPanel(L,r,s,I=>{n(1,o=o.map(M=>(M.number===L.number&&r.forEach(R=>{L[R]=I[R]}),M)))})}function W(L,I,M){i<2||(n(1,o=o.map(R=>(L===R.number&&(R.rows=R.rows.map(B=>{if(I===B.number){const $=B.cells.filter((U,pe)=>pe!==M);$.length===1&&($[0].fullWidth=!0),B.cells=$}return B})),R))),n(14,i--,i))}function K(L){let I=0;return L.forEach(M=>{M.rows.forEach(R=>{R.forEach(B=>{B&&I++})})}),I===0?(Re.notify("Layout cannot be empty.","error"),!1):!0}const F=L=>V(L),z=L=>w(L.number),me=(L,I)=>C(L.number,I.number),et=(L,I,M)=>ne(L.number,I.number,M),En=(L,I)=>{I.dataTransfer.setData("name",L.name)},Nl=(L,I,M)=>W(L.number,I.number,M),Kt=(L,I,M,R)=>se(R,L.number,I.number,M),Dn=L=>H(L.number),da=(L,I)=>{I.dataTransfer.setData("name",L.name)};return t.$$set=L=>{"params"in L&&n(0,l=L.params),"columnCount"in L&&n(14,i=L.columnCount),"layoutDisabledParameter"in L&&n(15,a=L.layoutDisabledParameter)},[l,o,f,h,D,P,w,H,C,ne,se,V,W,K,i,a,F,z,me,et,En,Nl,Kt,Dn,da]}class sa extends Se{constructor(e){super(),De(this,e,oa,na,ve,{params:0,columnCount:14,layoutDisabledParameter:15},null,[-1,-1])}}function ua(t){let e,n;return e=new t[1]({props:{params:t[0],layoutDisabledParameter:t[2],viewType:t[3]}}),{c(){Ge(e.$$.fragment)},m(l,i){Ne(e,l,i),n=!0},p(l,[i]){const a={};i&1&&(a.params=l[0]),i&4&&(a.layoutDisabledParameter=l[2]),i&8&&(a.viewType=l[3]),e.$set(a)},i(l){n||(Ee(e.$$.fragment,l),n=!0)},o(l){Fe(e.$$.fragment,l),n=!1},d(l){Me(e,l)}}}function fa(t,e,n){let{params:l}=e,i,a,r;return t.$$set=s=>{"params"in s&&n(0,l=s.params)},t.$$.update=()=>{if(t.$$.dirty&1)switch(l.type){case"list":case"listSmall":n(2,a=l.type==="list"?"layoutListDisabled":"layoutListSmallDisabled"),n(1,i=kl);break;case"kanban":n(1,i=kl),n(0,l.dataAttributeList=["id","name","link","align","view","isLarge","cssStyle"],l),n(0,l.dataAttributesDefs={link:{type:"bool"},isLarge:{type:"bool"},width:{type:"float"},cssStyle:{type:"varchar"},align:{type:"enum",options:["left","right"]},view:{type:"varchar",readOnly:!0},name:{type:"varchar",readOnly:!0}},l);break;case"relationships":n(1,i=xi);break;case"detail":case"detailSmall":n(1,i=sa);break;case"sidePanelsDetail":n(3,r="detail"),n(1,i=Vt);break;case"sidePanelsDetailSmall":n(3,r="detailSmall"),n(1,i=Vt);break;case"sidePanelsEdit":n(3,r="edit"),n(1,i=Vt);break;case"sidePanelsEditSmall":n(3,r="editSmall"),n(1,i=Vt);break}},[l,i,a,r]}class ca extends Se{constructor(e){super(),De(this,e,fa,ua,ve,{params:0})}}window.SvelteLanguage=Y,window.SvelteUserData=Yn,window.SvelteNotifier=Re,window.SvelteLayoutManager=He,window.SvelteMetadata=Ue,window.SvelteModelFactory=Ot,fe.LayoutComponent=ca,fe.QueueManagerIcon=li,fe.UpdatePanel=fi,Object.defineProperty(fe,Symbol.toStringTag,{value:"Module"})});
