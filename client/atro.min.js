(function(O,F){typeof exports=="object"&&typeof module<"u"?F(exports):typeof define=="function"&&define.amd?define(["exports"],F):(O=typeof globalThis<"u"?globalThis:O||self,F(O.Svelte={}))})(this,function(O){"use strict";var Xt=Object.defineProperty;var Yt=(O,F,Q)=>F in O?Xt(O,F,{enumerable:!0,configurable:!0,writable:!0,value:Q}):O[F]=Q;var Le=(O,F,Q)=>Yt(O,typeof F!="symbol"?F+"":F,Q);function F(){}function Q(t,e){for(const n in e)t[n]=e[n];return t}function Ee(t){return t()}function Pe(){return Object.create(null)}function oe(t){t.forEach(Ee)}function Se(t){return typeof t=="function"}function U(t,e){return t!=t?e==e:t!==e||t&&typeof t=="object"||typeof t=="function"}let ae;function Fe(t,e){return t===e?!0:(ae||(ae=document.createElement("a")),ae.href=e,t===ae.href)}function Ye(t){return Object.keys(t).length===0}function Ze(t,e,n,l){if(t){const s=De(t,e,n,l);return t[0](s)}}function De(t,e,n,l){return t[1]&&l?Q(n.ctx.slice(),t[1](l(e))):n.ctx}function xe(t,e,n,l){if(t[2]&&l){const s=t[2](l(n));if(e.dirty===void 0)return s;if(typeof s=="object"){const i=[],o=Math.max(e.dirty.length,s.length);for(let u=0;u<o;u+=1)i[u]=e.dirty[u]|s[u];return i}return e.dirty|s}return e.dirty}function $e(t,e,n,l,s,i){if(s){const o=De(e,n,l,i);t.p(o,s)}}function et(t){if(t.ctx.length>32){const e=[],n=t.ctx.length/32;for(let l=0;l<n;l++)e[l]=-1;return e}return-1}function p(t,e){t.appendChild(e)}function T(t,e,n){t.insertBefore(e,n||null)}function D(t){t.parentNode&&t.parentNode.removeChild(t)}function pe(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}function m(t){return document.createElement(t)}function H(t){return document.createTextNode(t)}function q(){return H(" ")}function tt(){return H("")}function I(t,e,n,l){return t.addEventListener(e,n,l),()=>t.removeEventListener(e,n,l)}function c(t,e,n){n==null?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}const nt=["width","height"];function re(t,e){const n=Object.getOwnPropertyDescriptors(t.__proto__);for(const l in e)e[l]==null?t.removeAttribute(l):l==="style"?t.style.cssText=e[l]:l==="__value"?t.value=t[l]=e[l]:n[l]&&n[l].set&&nt.indexOf(l)===-1?t[l]=e[l]:c(t,l,e[l])}function lt(t){return Array.from(t.childNodes)}function W(t,e){e=""+e,t.data!==e&&(t.data=e)}function G(t,e,n,l){n==null?t.style.removeProperty(e):t.style.setProperty(e,n,"")}function fe(t,e,n){t.classList.toggle(e,!!n)}function st(t,e,{bubbles:n=!1,cancelable:l=!1}={}){return new CustomEvent(t,{detail:e,bubbles:n,cancelable:l})}let te;function ne(t){te=t}function ue(){if(!te)throw new Error("Function called outside component initialization");return te}function ce(t){ue().$$.on_mount.push(t)}function it(t){ue().$$.after_update.push(t)}function ot(t){ue().$$.on_destroy.push(t)}function at(){const t=ue();return(e,n,{cancelable:l=!1}={})=>{const s=t.$$.callbacks[e];if(s){const i=st(e,n,{cancelable:l});return s.slice().forEach(o=>{o.call(t,i)}),!i.defaultPrevented}return!0}}const X=[],R=[];let Y=[];const Te=[],rt=Promise.resolve();let be=!1;function ft(){be||(be=!0,rt.then(qe))}function me(t){Y.push(t)}const ye=new Set;let Z=0;function qe(){if(Z!==0)return;const t=te;do{try{for(;Z<X.length;){const e=X[Z];Z++,ne(e),ut(e.$$)}}catch(e){throw X.length=0,Z=0,e}for(ne(null),X.length=0,Z=0;R.length;)R.pop()();for(let e=0;e<Y.length;e+=1){const n=Y[e];ye.has(n)||(ye.add(n),n())}Y.length=0}while(X.length);for(;Te.length;)Te.pop()();be=!1,ye.clear(),ne(t)}function ut(t){if(t.fragment!==null){t.update(),oe(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(me)}}function ct(t){const e=[],n=[];Y.forEach(l=>t.indexOf(l)===-1?e.push(l):n.push(l)),n.forEach(l=>l()),Y=e}const de=new Set;let dt;function x(t,e){t&&t.i&&(de.delete(t),t.i(e))}function le(t,e,n,l){if(t&&t.o){if(de.has(t))return;de.add(t),dt.c.push(()=>{de.delete(t)}),t.o(e)}}function $(t){return(t==null?void 0:t.length)!==void 0?t:Array.from(t)}function Ce(t,e){const n={},l={},s={$$scope:1};let i=t.length;for(;i--;){const o=t[i],u=e[i];if(u){for(const r in o)r in u||(l[r]=1);for(const r in u)s[r]||(n[r]=u[r],s[r]=1);t[i]=u}else for(const r in o)s[r]=1}for(const o in l)o in n||(n[o]=void 0);return n}function he(t){t&&t.c()}function se(t,e,n){const{fragment:l,after_update:s}=t.$$;l&&l.m(e,n),me(()=>{const i=t.$$.on_mount.map(Ee).filter(Se);t.$$.on_destroy?t.$$.on_destroy.push(...i):oe(i),t.$$.on_mount=[]}),s.forEach(me)}function ie(t,e){const n=t.$$;n.fragment!==null&&(ct(n.after_update),oe(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function ht(t,e){t.$$.dirty[0]===-1&&(X.push(t),ft(),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function V(t,e,n,l,s,i,o=null,u=[-1]){const r=te;ne(t);const a=t.$$={fragment:null,ctx:[],props:i,update:F,not_equal:s,bound:Pe(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(r?r.$$.context:[])),callbacks:Pe(),dirty:u,skip_bound:!1,root:e.target||r.$$.root};o&&o(a.root);let h=!1;if(a.ctx=n?n(t,e.props||{},(f,w,...S)=>{const v=S.length?S[0]:w;return a.ctx&&s(a.ctx[f],a.ctx[f]=v)&&(!a.skip_bound&&a.bound[f]&&a.bound[f](v),h&&ht(t,f)),w}):[],a.update(),h=!0,oe(a.before_update),a.fragment=l?l(a.ctx):!1,e.target){if(e.hydrate){const f=lt(e.target);a.fragment&&a.fragment.l(f),f.forEach(D)}else a.fragment&&a.fragment.c();e.intro&&x(t.$$.fragment),se(t,e.target,e.anchor),qe()}ne(r)}class J{constructor(){Le(this,"$$");Le(this,"$$set")}$destroy(){ie(this,1),this.$destroy=F}$on(e,n){if(!Se(n))return F;const l=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return l.push(n),()=>{const s=l.indexOf(n);s!==-1&&l.splice(s,1)}}$set(e){this.$$set&&!Ye(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}const gt="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(gt);const ee=[];function ge(t,e=F){let n;const l=new Set;function s(u){if(U(t,u)&&(t=u,n)){const r=!ee.length;for(const a of l)a[1](),ee.push(a,t);if(r){for(let a=0;a<ee.length;a+=2)ee[a][0](ee[a+1]);ee.length=0}}}function i(u){s(u(t))}function o(u,r=F){const a=[u,r];return l.add(a),l.size===1&&(n=e(s,i)||F),u(t),()=>{l.delete(a),l.size===0&&n&&(n(),n=null)}}return{set:s,update:i,subscribe:o}}const we=ge({}),A={setTranslations(t){we.set(t)},has(t,e,n){let l=!1;return we.subscribe(s=>{if(n in s&&e in s[n]&&t in s[n][e]){l=!0;return}})(),l},get(t,e,n){let l=n;return we.subscribe(s=>{if(t in s&&e in s[t]&&n in s[t][e]){l=s[t][e][n];return}if(t in s&&e in s[t]&&n in s[t][e]){l=s[t][e][n];return}if(t=="Global"){l=n;return}l=null})(),l},translate(t,e=null,n=null){n=n||"Global",e=e||"labels";let l=A.get(n,e,t);return l===null&&n!="Global"&&(l=A.get("Global",e,t)),l},translateOption(t,e,n=null){let l=A.translate(e,"options",n);return l===null?"":typeof l=="object"?l[t]:t}},Oe=ge({}),Ae={set(t){Oe.set(t)},get(){let t=null;return Oe.subscribe(e=>{e&&(t=e)})(),t}},ve=ge(),_e={setNotifier(t){ve.set(t)},notify(t,e=null,n=2e3){ve.subscribe(l=>{l&&l.notify(t,e,2e3)})()},confirm(t,e=null,n=null,l){ve.subscribe(s=>{s&&s.confirm(t,e,n)})()}};function Ne(t){let e,n,l,s,i,o,u,r,a,h,f,w,S,v,k;function y(P,E){return P[2]?pt:_t}let _=y(t),g=_(t);return{c(){e=m("div"),n=m("div"),l=m("div"),s=m("span"),s.textContent=`${A.translate("queueManager","labels","QueueItem")}`,i=q(),o=m("span"),u=m("a"),u.innerHTML='<span aria-hidden="true">Ã—</span>',r=q(),g.c(),a=q(),h=m("a"),h.textContent=`${A.translate("View List")}`,f=q(),w=m("div"),S=m("div"),S.textContent=`${A.translate("Loading...")}`,c(s,"class","panel-heading-title"),c(u,"href","/"),c(u,"class","close svelte-1p6ppx8"),c(h,"href","#QueueItem"),c(h,"title",A.translate("View List")),c(h,"class","qp-view-list svelte-1p6ppx8"),c(o,"class","pull-right"),c(l,"class","panel-heading clearfix"),c(S,"class","list-container"),c(w,"class","panel-body"),c(n,"class","panel panel-default"),c(e,"class","queue-panel-container")},m(P,E){T(P,e,E),p(e,n),p(n,l),p(l,s),p(l,i),p(l,o),p(o,u),p(o,r),g.m(o,null),p(o,a),p(o,h),p(n,f),p(n,w),p(w,S),t[9](e),v||(k=I(u,"click",t[6]),v=!0)},p(P,E){_===(_=y(P))&&g?g.p(P,E):(g.d(1),g=_(P),g&&(g.c(),g.m(o,a)))},d(P){P&&D(e),g.d(),t[9](null),v=!1,k()}}}function _t(t){let e,n,l;return{c(){e=m("a"),e.textContent=`${A.translate("Pause")}`,c(e,"href","/"),c(e,"title",A.translate("Pause")),c(e,"class","qm-button")},m(s,i){T(s,e,i),n||(l=I(e,"click",t[8]),n=!0)},p:F,d(s){s&&D(e),n=!1,l()}}}function pt(t){let e,n,l;return{c(){e=m("a"),e.textContent=`${A.translate("Start")}`,c(e,"href","/"),c(e,"title",A.translate("Start")),c(e,"class","qm-button")},m(s,i){T(s,e,i),n||(l=I(e,"click",t[7]),n=!0)},p:F,d(s){s&&D(e),n=!1,l()}}}function bt(t){let e,n=t[0]&&Ne(t);return{c(){n&&n.c(),e=tt()},m(l,s){n&&n.m(l,s),T(l,e,s)},p(l,[s]){l[0]?n?n.p(l,s):(n=Ne(l),n.c(),n.m(e.parentNode,e)):n&&(n.d(1),n=null)},i:F,o:F,d(l){l&&D(e),n&&n.d(l)}}}function mt(t,e,n){let{isOpen:l=!1}=e,{close:s}=e,{icon:i}=e,o=!1;window.addEventListener("publicDataFetched",v=>{n(2,o=!!v.detail.qmPaused)});let u;function r(v){u&&!u.contains(v.target)&&i&&!i.contains(v.target)&&l===!0&&s()}ce(()=>{document.addEventListener("click",r)}),ot(()=>{document.removeEventListener("click",r)});async function a(v){let k=Ae.get();if(k)try{const y=await fetch("/api/v1/App/action/QueueManagerUpdate",{method:"POST",headers:{"Content-Type":"application/json","Authorization-Token":btoa(k.user.userName+":"+k.token)},body:JSON.stringify({pause:v})});if(!y.ok)throw new Error("Network response was not ok");await y.json(),_e.notify("Done","success")}catch(y){console.error("Error:",y)}}const h=v=>{v.preventDefault(),s()},f=v=>{v.preventDefault(),a(!1)},w=v=>{v.preventDefault(),a(!0)};function S(v){R[v?"unshift":"push"](()=>{u=v,n(3,u)})}return t.$$set=v=>{"isOpen"in v&&n(0,l=v.isOpen),"close"in v&&n(1,s=v.close),"icon"in v&&n(5,i=v.icon)},[l,s,o,u,a,i,h,f,w,S]}class yt extends J{constructor(e){super(),V(this,e,mt,bt,U,{isOpen:0,close:1,icon:5})}}function ze(t){let e;return{c(){e=m("span"),c(e,"class","fas fa-pause-circle pause-icon")},m(n,l){T(n,e,l)},d(n){n&&D(e)}}}function wt(t){let e,n,l,s,i,o,u,r,a=t[2]&&ze();return i=new yt({props:{icon:t[0],isOpen:t[1],close:t[4]}}),{c(){e=m("a"),n=m("span"),l=q(),a&&a.c(),s=q(),he(i.$$.fragment),c(n,"class","fas fa-tasks"),c(e,"href","/"),c(e,"class","notifications-button")},m(h,f){T(h,e,f),p(e,n),p(e,l),a&&a.m(e,null),t[6](e),T(h,s,f),se(i,h,f),o=!0,u||(r=I(e,"click",t[7]),u=!0)},p(h,[f]){h[2]?a||(a=ze(),a.c(),a.m(e,null)):a&&(a.d(1),a=null);const w={};f&1&&(w.icon=h[0]),f&2&&(w.isOpen=h[1]),i.$set(w)},i(h){o||(x(i.$$.fragment,h),o=!0)},o(h){le(i.$$.fragment,h),o=!1},d(h){h&&(D(e),D(s)),a&&a.d(),t[6](null),ie(i,h),u=!1,r()}}}function vt(t,e,n){let{renderTable:l=()=>{}}=e,s,i=!1,o=!1;window.addEventListener("publicDataFetched",f=>{n(2,o=!!f.detail.qmPaused)});function u(){i||(n(1,i=!0),l())}function r(){n(1,i=!1),window.dispatchEvent(new Event("qmPanelClosed"))}function a(f){R[f?"unshift":"push"](()=>{s=f,n(0,s)})}const h=f=>{f.preventDefault(),u()};return t.$$set=f=>{"renderTable"in f&&n(5,l=f.renderTable)},[s,i,o,u,r,l,a,h]}class kt extends J{constructor(e){super(),V(this,e,vt,wt,U,{renderTable:5})}}function Lt(t){let e,n=`${t[0]}px`,l=`${t[0]}px`,s=`${t[1]}px`;return{c(){e=m("div"),c(e,"class","loading-icon spinner svelte-yw8t7l"),G(e,"width",n),G(e,"height",l),G(e,"border-width",s)},m(i,o){T(i,e,o)},p(i,[o]){o&1&&n!==(n=`${i[0]}px`)&&G(e,"width",n),o&1&&l!==(l=`${i[0]}px`)&&G(e,"height",l),o&2&&s!==(s=`${i[1]}px`)&&G(e,"border-width",s)},i:F,o:F,d(i){i&&D(e)}}}function Et(t,e,n){let{size:l=40}=e,{thickness:s=4}=e;return t.$$set=i=>{"size"in i&&n(0,l=i.size),"thickness"in i&&n(1,s=i.thickness)},[l,s]}class Pt extends J{constructor(e){super(),V(this,e,Et,Lt,U,{size:0,thickness:1})}}function je(t){let e,n;return{c(){e=m("img"),Fe(e.src,n=t[1])||c(e,"src",n),c(e,"class","logo"),c(e,"alt",t[0])},m(l,s){T(l,e,s)},p(l,s){s&2&&!Fe(e.src,n=l[1])&&c(e,"src",n),s&1&&c(e,"alt",l[0])},d(l){l&&D(e)}}}function Me(t){let e,n,l;return{c(){e=m("a"),n=m("i"),l=H("Recovery Instructions"),c(n,"class","fa fa-history svelte-1qmezxs"),c(e,"href",t[2]),c(e,"target","_blank"),c(e,"class","btn btn-default svelte-1qmezxs"),c(e,"role","button"),G(e,"float","right")},m(s,i){T(s,e,i),p(e,n),p(e,l)},p(s,i){i&4&&c(e,"href",s[2])},d(s){s&&D(e)}}}function He(t){let e,n,l,s,i,o;return{c(){e=m("hr"),n=q(),l=m("pre"),s=H(t[3]),c(l,"class","logs-container svelte-1qmezxs")},m(u,r){T(u,e,r),T(u,n,r),T(u,l,r),p(l,s),t[11](l),i||(o=I(l,"scroll",t[8]),i=!0)},p(u,r){r&8&&W(s,u[3])},d(u){u&&(D(e),D(n),D(l)),t[11](null),i=!1,o()}}}function St(t){let e,n,l,s,i,o,u,r,a,h,f,w,S,v,k,y,_,g,P=t[4]?"Hide":"Show",E,d,L,b,N,K,ke,Xe,z=t[1]&&je(t);h=new Pt({props:{size:"40",thickness:"5"}});let j=t[2]&&Me(t),M=t[4]&&t[3]&&He(t);return{c(){e=m("div"),n=m("div"),l=m("div"),z&&z.c(),s=q(),i=m("div"),o=m("div"),u=m("h3"),u.textContent="System is updating...",r=q(),a=m("section"),he(h.$$.fragment),f=q(),w=m("h5"),S=H(t[5]),v=q(),k=m("section"),y=m("div"),_=m("button"),g=m("i"),E=H(P),d=H(" logs"),b=q(),j&&j.c(),N=q(),M&&M.c(),c(l,"class","logo-container"),c(n,"class","panel-heading"),c(w,"class","svelte-1qmezxs"),c(a,"class","progress-section svelte-1qmezxs"),c(g,"class","fa fa-list svelte-1qmezxs"),c(_,"class","btn btn-default svelte-1qmezxs"),_.disabled=L=!t[3],c(y,"class","buttons"),c(k,"class","logs-section"),c(o,"class","form-group"),c(i,"class","panel-body"),c(e,"id","login"),c(e,"class","panel panel-default panel-updating")},m(C,B){T(C,e,B),p(e,n),p(n,l),z&&z.m(l,null),p(e,s),p(e,i),p(i,o),p(o,u),p(o,r),p(o,a),se(h,a,null),p(a,f),p(a,w),p(w,S),p(o,v),p(o,k),p(k,y),p(y,_),p(_,g),p(_,E),p(_,d),p(y,b),j&&j.m(y,null),p(k,N),M&&M.m(k,null),K=!0,ke||(Xe=I(_,"click",t[7]),ke=!0)},p(C,[B]){C[1]?z?z.p(C,B):(z=je(C),z.c(),z.m(l,null)):z&&(z.d(1),z=null),(!K||B&32)&&W(S,C[5]),(!K||B&16)&&P!==(P=C[4]?"Hide":"Show")&&W(E,P),(!K||B&8&&L!==(L=!C[3]))&&(_.disabled=L),C[2]?j?j.p(C,B):(j=Me(C),j.c(),j.m(y,null)):j&&(j.d(1),j=null),C[4]&&C[3]?M?M.p(C,B):(M=He(C),M.c(),M.m(k,null)):M&&(M.d(1),M=null)},i(C){K||(x(h.$$.fragment,C),K=!0)},o(C){le(h.$$.fragment,C),K=!1},d(C){C&&D(e),z&&z.d(),ie(h),j&&j.d(),M&&M.d(),ke=!1,Xe()}}}function Ft(t){return t.replace(/^\d{2,4}.\d{2}.\d{2,4} \d{2}:\d{2}:\d{2}/g,"").replace(/^[\-\|\s]+/,"")}function Dt(t,e,n){let{applicationName:l="AtroCore"}=e,{logoPath:s=null}=e,{logFilePath:i}=e,{restoreLink:o=null}=e,u=!1,r=!1,a=0,h=!0,f="",w,S;it(()=>{S&&h&&S.scrollTo(0,S.scrollHeight)});function v(){n(4,u=!u),u||(h=!0)}function k(_){const g=_.currentTarget;h=g.scrollHeight-g.scrollTop===g.clientHeight}setInterval(async()=>{try{const _=await fetch(i,{cache:"no-store"});a+=1,_.ok?(n(3,f=(await _.text()).trim()),f.search("composer")>=0&&n(10,r=!0),a>65&&!r&&n(3,f="Something wrong. Please, reboot the server.")):r?setTimeout(()=>{location.reload()},2e3):a>65&&n(3,f="Something wrong. Please, reboot the server.")}catch(_){console.error("Error: ",_)}},1e3);function y(_){R[_?"unshift":"push"](()=>{S=_,n(6,S)})}return t.$$set=_=>{"applicationName"in _&&n(0,l=_.applicationName),"logoPath"in _&&n(1,s=_.logoPath),"logFilePath"in _&&n(9,i=_.logFilePath),"restoreLink"in _&&n(2,o=_.restoreLink)},t.$$.update=()=>{if(t.$$.dirty&1032)if(f){const _=f.trim().split(`
`);n(5,w=Ft(_.pop()))}else r?n(5,w=""):n(5,w="Starting...")},[l,s,o,f,u,w,S,v,k,i,r,y]}class Tt extends J{constructor(e){super(),V(this,e,Dt,St,U,{applicationName:0,logoPath:1,logFilePath:9,restoreLink:2})}}const qt=ge(),Ct={setNotifier(t){qt.set(t)},get(t){return window.Espo.metadata.get(t)}},Ie={resetToDefault(t,e,n){return window.Espo["layout-manager"].resetToDefault(t,e,n)},get:function(t,e,n,l){return window.Espo["layout-manager"].get(t,e,n,l)},set:function(t,e,n,l){return window.Espo["layout-manager"].set(t,e,n,l)}},Ot=t=>({helper:t&1,buttonList:t&2}),Qe=t=>({helper:t[0],buttonList:t[1]});function At(t){let e;const n=t[7].default,l=Ze(n,t,t[6],Qe);return{c(){l&&l.c()},m(s,i){l&&l.m(s,i),e=!0},p(s,[i]){l&&l.p&&(!e||i&67)&&$e(l,n,s,s[6],e?xe(n,s[6],i,Ot):et(s[6]),Qe)},i(s){e||(x(l,s),e=!0)},o(s){le(l,s),e=!1},d(s){l&&l.d(s)}}}function Nt(t,e,n){let{$$slots:l={},$$scope:s}=e,{scope:i}=e,{type:o}=e,{helper:u}=e;const r=at();let a=[{name:"save",label:"Save",style:"primary"},{name:"cancel",label:"Cancel"},{name:"resetToDefault",label:"Reset to Default"}],h=[];ce(()=>{f(),w()});function f(){Ct.get(["clientDefs",i,"additionalLayouts",o,"dataAttributeList"])}function w(){Ie.get(i,o,_=>{h=_},!1)}function S(_){v(),_e.notify("Saving...");const g=_||h;Ie.set(i,o,g,()=>{_e.notify("Saved","success",2e3),k()})}function v(){n(1,a=a.map(_=>({..._,disabled:!0})))}function k(){n(1,a=a.map(_=>({..._,disabled:!1})))}function y(_){r("openEditDialog",_)}return t.$$set=_=>{"scope"in _&&n(2,i=_.scope),"type"in _&&n(3,o=_.type),"helper"in _&&n(0,u=_.helper),"$$scope"in _&&n(6,s=_.$$scope)},[u,a,i,o,S,y,s,l]}class zt extends J{constructor(e){super(),V(this,e,Nt,At,U,{scope:2,type:3,helper:0,save:4,openEditDialog:5})}get save(){return this.$$.ctx[4]}get openEditDialog(){return this.$$.ctx[5]}}function Ue(t,e,n){const l=t.slice();return l[15]=e[n],l}function Be(t,e,n){const l=t.slice();return l[18]=e[n],l}function Ge(t,e,n){const l=t.slice();return l[21]=e[n],l}function Re(t){let e,n=t[21].label+"",l,s,i,o,u;function r(){return t[12](t[21])}return{c(){e=m("button"),l=H(n),s=q(),c(e,"class",i=t[21].style)},m(a,h){T(a,e,h),p(e,l),p(e,s),o||(u=I(e,"click",r),o=!0)},p(a,h){t=a,h&1024&&n!==(n=t[21].label+"")&&W(l,n),h&1024&&i!==(i=t[21].style)&&c(e,"class",i)},d(a){a&&D(e),o=!1,u()}}}function Ve(t){let e,n,l,s;return{c(){e=m("div"),n=m("a"),n.innerHTML='<i class="fas fa-pencil-alt fa-sm"></i>',c(n,"href","javascript:"),c(n,"data-action","editField"),c(n,"class","edit-field svelte-1frwwfy"),c(e,"class","right svelte-1frwwfy")},m(i,o){T(i,e,o),p(e,n),l||(s=I(n,"click",t[7]),l=!0)},p:F,d(i){i&&D(e),l=!1,s()}}}function Je(t){let e,n,l,s=t[18].label+"",i,o,u,r=t[4]&&Ve(t),a=[{draggable:"true"},t[9](t[18],t[6])],h={};for(let f=0;f<a.length;f+=1)h=Q(h,a[f]);return{c(){e=m("li"),n=m("div"),l=m("label"),i=H(s),o=q(),r&&r.c(),u=q(),c(l,"class","svelte-1frwwfy"),c(n,"class","left svelte-1frwwfy"),re(e,h),fe(e,"svelte-1frwwfy",!0)},m(f,w){T(f,e,w),p(e,n),p(n,l),p(l,i),p(e,o),r&&r.m(e,null),p(e,u)},p(f,w){w&8&&s!==(s=f[18].label+"")&&W(i,s),f[4]?r?r.p(f,w):(r=Ve(f),r.c(),r.m(e,u)):r&&(r.d(1),r=null),re(e,h=Ce(a,[{draggable:"true"},w&8&&f[9](f[18],f[6])])),fe(e,"svelte-1frwwfy",!0)},d(f){f&&D(e),r&&r.d()}}}function Ke(t){let e,n,l,s;return{c(){e=m("div"),n=m("a"),n.innerHTML='<i class="fas fa-pencil-alt fa-sm"></i>',c(n,"href","javascript:"),c(n,"data-action","editField"),c(n,"class","edit-field svelte-1frwwfy"),c(e,"class","right svelte-1frwwfy")},m(i,o){T(i,e,o),p(e,n),l||(s=I(n,"click",t[7]),l=!0)},p:F,d(i){i&&D(e),l=!1,s()}}}function We(t){let e,n,l,s=t[15].label+"",i,o,u,r=t[4]&&Ke(t),a=[{draggable:"true"},t[9](t[15])],h={};for(let f=0;f<a.length;f+=1)h=Q(h,a[f]);return{c(){e=m("li"),n=m("div"),l=m("label"),i=H(s),o=q(),r&&r.c(),u=q(),c(l,"class","svelte-1frwwfy"),c(n,"class","left svelte-1frwwfy"),re(e,h),fe(e,"svelte-1frwwfy",!0)},m(f,w){T(f,e,w),p(e,n),p(n,l),p(l,i),p(e,o),r&&r.m(e,null),p(e,u)},p(f,w){w&4&&s!==(s=f[15].label+"")&&W(i,s),f[4]?r?r.p(f,w):(r=Ke(f),r.c(),r.m(e,u)):r&&(r.d(1),r=null),re(e,h=Ce(a,[{draggable:"true"},w&4&&f[9](f[15])])),fe(e,"svelte-1frwwfy",!0)},d(f){f&&D(e),r&&r.d()}}}function jt(t){let e,n,l,s,i,o,u,r,a,h,f,w,S,v,k=$(t[10]),y=[];for(let d=0;d<k.length;d+=1)y[d]=Re(Ge(t,k,d));let _=$(t[3]),g=[];for(let d=0;d<_.length;d+=1)g[d]=Je(Be(t,_,d));let P=$(t[2]),E=[];for(let d=0;d<P.length;d+=1)E[d]=We(Ue(t,P,d));return{c(){e=m("div");for(let d=0;d<y.length;d+=1)y[d].c();n=q(),l=m("div"),s=m("div"),i=m("div"),o=m("header"),o.textContent=`${A.translate("Enabled","labels","Admin")}`,u=q(),r=m("ul");for(let d=0;d<g.length;d+=1)g[d].c();a=q(),h=m("div"),f=m("div"),w=m("header"),w.textContent=`${A.translate("Disabled","labels","Admin")}`,S=q(),v=m("ul");for(let d=0;d<E.length;d+=1)E[d].c();c(e,"class","button-container"),c(o,"class","svelte-1frwwfy"),c(r,"class","enabled connected svelte-1frwwfy"),c(i,"class","well"),c(s,"class","col-sm-5"),c(w,"class","svelte-1frwwfy"),c(v,"class","disabled connected svelte-1frwwfy"),c(f,"class","well"),c(h,"class","col-sm-5"),c(l,"id","layout"),c(l,"class","row svelte-1frwwfy")},m(d,L){T(d,e,L);for(let b=0;b<y.length;b+=1)y[b]&&y[b].m(e,null);T(d,n,L),T(d,l,L),p(l,s),p(s,i),p(i,o),p(i,u),p(i,r);for(let b=0;b<g.length;b+=1)g[b]&&g[b].m(r,null);p(l,a),p(l,h),p(h,f),p(f,w),p(f,S),p(f,v);for(let b=0;b<E.length;b+=1)E[b]&&E[b].m(v,null)},p(d,L){if(L&1056){k=$(d[10]);let b;for(b=0;b<k.length;b+=1){const N=Ge(d,k,b);y[b]?y[b].p(N,L):(y[b]=Re(N),y[b].c(),y[b].m(e,null))}for(;b<y.length;b+=1)y[b].d(1);y.length=k.length}if(L&728){_=$(d[3]);let b;for(b=0;b<_.length;b+=1){const N=Be(d,_,b);g[b]?g[b].p(N,L):(g[b]=Je(N),g[b].c(),g[b].m(r,null))}for(;b<g.length;b+=1)g[b].d(1);g.length=_.length}if(L&660){P=$(d[2]);let b;for(b=0;b<P.length;b+=1){const N=Ue(d,P,b);E[b]?E[b].p(N,L):(E[b]=We(N),E[b].c(),E[b].m(v,null))}for(;b<E.length;b+=1)E[b].d(1);E.length=P.length}},d(d){d&&(D(e),D(n),D(l)),pe(y,d),pe(g,d),pe(E,d)}}}function Mt(t){let e,n,l={scope:t[0],type:t[1],$$slots:{default:[jt,({buttonList:s})=>({10:s}),({buttonList:s})=>s?1024:0]},$$scope:{ctx:t}};return e=new zt({props:l}),t[13](e),e.$on("save",t[8]),{c(){he(e.$$.fragment)},m(s,i){se(e,s,i),n=!0},p(s,[i]){const o={};i&1&&(o.scope=s[0]),i&2&&(o.type=s[1]),i&16778300&&(o.$$scope={dirty:i,ctx:s}),e.$set(o)},i(s){n||(x(e.$$.fragment,s),n=!0)},o(s){le(e.$$.fragment,s),n=!1},d(s){t[13](null),ie(e,s)}}}function Ht(t){return t.length===0?(helper.notify("Layout cannot be empty","error"),!1):!0}function It(t){return t.toLowerCase()}function Qt(t,e){return t[e]}function Ut(t,e,n){let{scope:l}=e,{type:s}=e,{enabledFields:i=[]}=e,{disabledFields:o=[]}=e,{rowLayout:u=[]}=e,{editable:r=!1}=e,a,h=[],f=[];ce(()=>{});function w(g){const E=g.target.closest("li");if(!E)return;const d={};h.forEach(L=>{d[L]=E.dataset[L]||null}),a.openEditDialog(d)}function S(){const g=[];return document.querySelectorAll("#layout ul.enabled > li").forEach(P=>{const E={};h.forEach(d=>{const L=P.dataset[d];L&&(E[d]=L)}),g.push(E)}),g}function v(){const g=S();Ht(g)&&a.save(g)}function k(g){return dataAttributes={},h.forEach(P=>{dataAttributes[`data-${It(P)}`]=Qt(g,P)}),dataAttributes}const y=g=>a[g.name]();function _(g){R[g?"unshift":"push"](()=>{a=g,n(5,a)})}return t.$$set=g=>{"scope"in g&&n(0,l=g.scope),"type"in g&&n(1,s=g.type),"enabledFields"in g&&n(11,i=g.enabledFields),"disabledFields"in g&&n(2,o=g.disabledFields),"rowLayout"in g&&n(3,u=g.rowLayout),"editable"in g&&n(4,r=g.editable)},[l,s,o,u,r,a,h,w,v,k,f,i,y,_]}class Bt extends J{constructor(e){super(),V(this,e,Ut,Mt,U,{scope:0,type:1,enabledFields:11,disabledFields:2,rowLayout:3,editable:4})}}function Gt(t){let e,n,l={scope:t[0],type:t[1],enabledFields:t[3],disabledFields:t[4],rowLayout:t[5],editable:Rt};return e=new Bt({props:l}),t[6](e),{c(){he(e.$$.fragment)},m(s,i){se(e,s,i),n=!0},p(s,[i]){const o={};i&1&&(o.scope=s[0]),i&2&&(o.type=s[1]),i&8&&(o.enabledFields=s[3]),i&16&&(o.disabledFields=s[4]),i&32&&(o.rowLayout=s[5]),e.$set(o)},i(s){n||(x(e.$$.fragment,s),n=!0)},o(s){le(e.$$.fragment,s),n=!1},d(s){t[6](null),ie(e,s)}}}let Rt=!0;const Vt="layoutListDisabled";function Jt(t){return!0}function Kt(t,e,n){let{scope:l}=e,{type:s="list"}=e,i,o=[],u=[],r=[];const a=[],h=[];ce(()=>{f()});function f(){helper.modelFactory.create(l,k=>{helper.layoutManager.get(l,s,y=>{w(k,y)},!1)})}function w(k,y){const _=Object.keys(k.defs.fields).filter(d=>Jt(k.getFieldParam(d,"type"))&&S(k,d)).sort((d,L)=>helper.language.translate(d,"fields",l).localeCompare(helper.language.translate(L,"fields",l))),g=[],P=[],E=[];n(3,o=y.map(d=>{const L=helper.language.translate(d.name,"fields",l);return P.includes(L)&&E.push(L),P.push(L),g.push(d.name),{name:d.name,label:L}})),n(4,u=_.filter(d=>!g.includes(d)).map(d=>{const L=helper.language.translate(d,"fields",l);P.includes(L)&&E.push(L),P.push(L);const b={name:d,label:L},N=helper.metadata.get(["entityDefs",l,"fields",d,"type"]);return N&&helper.metadata.get(["fields",N,"notSortable"])&&(b.notSortable=!0),b})),[o,u].forEach(d=>{d.forEach(L=>{E.includes(L.label)&&(L.label+=` (${L.name})`)})}),n(5,r=y.map(d=>{var L;return{...d,label:((L=o.find(b=>b.name===d.name))==null?void 0:L.label)||helper.language.translate(d.name,"fields",l)}}))}function S(k,y){return a.includes(y)||h.includes(k.getFieldParam(y,"type"))?!1:!k.getFieldParam(y,"disabled")&&!k.getFieldParam(y,Vt)}function v(k){R[k?"unshift":"push"](()=>{i=k,n(2,i)})}return t.$$set=k=>{"scope"in k&&n(0,l=k.scope),"type"in k&&n(1,s=k.type)},[l,s,i,o,u,r,v]}class Wt extends J{constructor(e){super(),V(this,e,Kt,Gt,U,{scope:0,type:1})}}window.SvelteLanguage=A,window.SvelteUserData=Ae,window.SvelteNotifier=_e,O.List=Wt,O.QueueManagerIcon=kt,O.UpdatePanel=Tt,Object.defineProperty(O,Symbol.toStringTag,{value:"Module"})});
