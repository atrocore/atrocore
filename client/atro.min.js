(function(pe,he){typeof exports=="object"&&typeof module<"u"?he(exports):typeof define=="function"&&define.amd?define(["exports"],he):(pe=typeof globalThis<"u"?globalThis:pe||self,he(pe.Svelte={}))})(this,function(pe){"use strict";var sr=Object.defineProperty;var ur=(pe,he,Ke)=>he in pe?sr(pe,he,{enumerable:!0,configurable:!0,writable:!0,value:Ke}):pe[he]=Ke;var Bn=(pe,he,Ke)=>ur(pe,typeof he!="symbol"?he+"":he,Ke);let he={};function Ke(t={}){he={animate:!0,allowClose:!0,overlayOpacity:.7,smoothScroll:!1,disableActiveInteraction:!1,showProgress:!1,stagePadding:10,stageRadius:5,popoverOffset:10,showButtons:["next","previous","close"],disableButtons:[],overlayColor:"#000",...t}}function I(t){return t?he[t]:he}function Nt(t,e,n,i){return(t/=i/2)<1?n/2*t*t+e:-n/2*(--t*(t-2)-1)+e}function Rn(t){const e='a[href]:not([disabled]), button:not([disabled]), textarea:not([disabled]), input[type="text"]:not([disabled]), input[type="radio"]:not([disabled]), input[type="checkbox"]:not([disabled]), select:not([disabled])';return t.flatMap(n=>{const i=n.matches(e),o=Array.from(n.querySelectorAll(e));return[...i?[n]:[],...o]}).filter(n=>getComputedStyle(n).pointerEvents!=="none"&&so(n))}function Hn(t){if(!t||ao(t))return;const e=I("smoothScroll");t.scrollIntoView({behavior:!e||ro(t)?"auto":"smooth",inline:"center",block:"center"})}function ro(t){if(!t||!t.parentElement)return;const e=t.parentElement;return e.scrollHeight>e.clientHeight}function ao(t){const e=t.getBoundingClientRect();return e.top>=0&&e.left>=0&&e.bottom<=(window.innerHeight||document.documentElement.clientHeight)&&e.right<=(window.innerWidth||document.documentElement.clientWidth)}function so(t){return!!(t.offsetWidth||t.offsetHeight||t.getClientRects().length)}let xt={};function se(t,e){xt[t]=e}function O(t){return t?xt[t]:xt}function Wn(){xt={}}let Bt={};function Rt(t,e){Bt[t]=e}function it(t){var e;(e=Bt[t])==null||e.call(Bt)}function uo(){Bt={}}function co(t,e,n,i){let o=O("__activeStagePosition");const l=o||n.getBoundingClientRect(),r=i.getBoundingClientRect(),u=Nt(t,l.x,r.x-l.x,e),a=Nt(t,l.y,r.y-l.y,e),s=Nt(t,l.width,r.width-l.width,e),c=Nt(t,l.height,r.height-l.height,e);o={x:u,y:a,width:s,height:c},zn(o),se("__activeStagePosition",o)}function qn(t){if(!t)return;const e=t.getBoundingClientRect(),n={x:e.x,y:e.y,width:e.width,height:e.height};se("__activeStagePosition",n),zn(n)}function fo(){const t=O("__activeStagePosition"),e=O("__overlaySvg");if(!t)return;if(!e){console.warn("No stage svg found.");return}const n=window.innerWidth,i=window.innerHeight;e.setAttribute("viewBox",`0 0 ${n} ${i}`)}function po(t){const e=ho(t);document.body.appendChild(e),Gn(e,n=>{n.target.tagName==="path"&&it("overlayClick")}),se("__overlaySvg",e)}function zn(t){const e=O("__overlaySvg");if(!e){po(t);return}const n=e.firstElementChild;if((n==null?void 0:n.tagName)!=="path")throw new Error("no path element found in stage svg");n.setAttribute("d",Yn(t))}function ho(t){const e=window.innerWidth,n=window.innerHeight,i=document.createElementNS("http://www.w3.org/2000/svg","svg");i.classList.add("driver-overlay","driver-overlay-animated"),i.setAttribute("viewBox",`0 0 ${e} ${n}`),i.setAttribute("xmlSpace","preserve"),i.setAttribute("xmlnsXlink","http://www.w3.org/1999/xlink"),i.setAttribute("version","1.1"),i.setAttribute("preserveAspectRatio","xMinYMin slice"),i.style.fillRule="evenodd",i.style.clipRule="evenodd",i.style.strokeLinejoin="round",i.style.strokeMiterlimit="2",i.style.zIndex="10000",i.style.position="fixed",i.style.top="0",i.style.left="0",i.style.width="100%",i.style.height="100%";const o=document.createElementNS("http://www.w3.org/2000/svg","path");return o.setAttribute("d",Yn(t)),o.style.fill=I("overlayColor")||"rgb(0,0,0)",o.style.opacity=`${I("overlayOpacity")}`,o.style.pointerEvents="auto",o.style.cursor="auto",i.appendChild(o),i}function Yn(t){const e=window.innerWidth,n=window.innerHeight,i=I("stagePadding")||0,o=I("stageRadius")||0,l=t.width+i*2,r=t.height+i*2,u=Math.min(o,l/2,r/2),a=Math.floor(Math.max(u,0)),s=t.x-i+a,c=t.y-i,d=l-a*2,f=r-a*2;return`M${e},0L0,0L0,${n}L${e},${n}L${e},0Z
    M${s},${c} h${d} a${a},${a} 0 0 1 ${a},${a} v${f} a${a},${a} 0 0 1 -${a},${a} h-${d} a${a},${a} 0 0 1 -${a},-${a} v-${f} a${a},${a} 0 0 1 ${a},-${a} z`}function mo(){const t=O("__overlaySvg");t&&t.remove()}function go(){const t=document.getElementById("driver-dummy-element");if(t)return t;let e=document.createElement("div");return e.id="driver-dummy-element",e.style.width="0",e.style.height="0",e.style.pointerEvents="none",e.style.opacity="0",e.style.position="fixed",e.style.top="50%",e.style.left="50%",document.body.appendChild(e),e}function Xn(t){const{element:e}=t;let n=typeof e=="string"?document.querySelector(e):e;n||(n=go()),bo(n,t)}function vo(){const t=O("__activeElement"),e=O("__activeStep");t&&(qn(t),fo(),Zn(t,e))}function bo(t,e){const n=Date.now(),i=O("__activeStep"),o=O("__activeElement")||t,l=!o||o===t,r=t.id==="driver-dummy-element",u=o.id==="driver-dummy-element",a=I("animate"),s=e.onHighlightStarted||I("onHighlightStarted"),c=(e==null?void 0:e.onHighlighted)||I("onHighlighted"),d=(i==null?void 0:i.onDeselected)||I("onDeselected"),f=I(),p=O();!l&&d&&d(u?void 0:o,i,{config:f,state:p}),s&&s(r?void 0:t,e,{config:f,state:p});const h=!l&&a;let b=!1;So(),se("previousStep",i),se("previousElement",o),se("activeStep",e),se("activeElement",t);const m=()=>{if(O("__transitionCallback")!==m)return;const y=Date.now()-n,C=400-y<=400/2;e.popover&&C&&!b&&h&&(Un(t,e),b=!0),I("animate")&&y<400?co(y,400,o,t):(qn(t),c&&c(r?void 0:t,e,{config:I(),state:O()}),se("__transitionCallback",void 0),se("__previousStep",i),se("__previousElement",o),se("__activeStep",e),se("__activeElement",t)),window.requestAnimationFrame(m)};se("__transitionCallback",m),window.requestAnimationFrame(m),Hn(t),!h&&e.popover&&Un(t,e),o.classList.remove("driver-active-element","driver-no-interaction"),o.removeAttribute("aria-haspopup"),o.removeAttribute("aria-expanded"),o.removeAttribute("aria-controls"),I("disableActiveInteraction")&&t.classList.add("driver-no-interaction"),t.classList.add("driver-active-element"),t.setAttribute("aria-haspopup","dialog"),t.setAttribute("aria-expanded","true"),t.setAttribute("aria-controls","driver-popover-content")}function yo(){var t;(t=document.getElementById("driver-dummy-element"))==null||t.remove(),document.querySelectorAll(".driver-active-element").forEach(e=>{e.classList.remove("driver-active-element","driver-no-interaction"),e.removeAttribute("aria-haspopup"),e.removeAttribute("aria-expanded"),e.removeAttribute("aria-controls")})}function _t(){const t=O("__resizeTimeout");t&&window.cancelAnimationFrame(t),se("__resizeTimeout",window.requestAnimationFrame(vo))}function _o(t){var e;if(!O("isInitialized")||!(t.key==="Tab"||t.keyCode===9))return;const n=O("__activeElement"),i=(e=O("popover"))==null?void 0:e.wrapper,o=Rn([...i?[i]:[],...n?[n]:[]]),l=o[0],r=o[o.length-1];if(t.preventDefault(),t.shiftKey){const u=o[o.indexOf(document.activeElement)-1]||r;u==null||u.focus()}else{const u=o[o.indexOf(document.activeElement)+1]||l;u==null||u.focus()}}function jn(t){var e;((e=I("allowKeyboardControl"))==null||e)&&(t.key==="Escape"?it("escapePress"):t.key==="ArrowRight"?it("arrowRightPress"):t.key==="ArrowLeft"&&it("arrowLeftPress"))}function Gn(t,e,n){const i=(o,l)=>{const r=o.target;t.contains(r)&&((!n||n(r))&&(o.preventDefault(),o.stopPropagation(),o.stopImmediatePropagation()),l==null||l(o))};document.addEventListener("pointerdown",i,!0),document.addEventListener("mousedown",i,!0),document.addEventListener("pointerup",i,!0),document.addEventListener("mouseup",i,!0),document.addEventListener("click",o=>{i(o,e)},!0)}function wo(){window.addEventListener("keyup",jn,!1),window.addEventListener("keydown",_o,!1),window.addEventListener("resize",_t),window.addEventListener("scroll",_t)}function Eo(){window.removeEventListener("keyup",jn),window.removeEventListener("resize",_t),window.removeEventListener("scroll",_t)}function So(){const t=O("popover");t&&(t.wrapper.style.display="none")}function Un(t,e){var n,i;let o=O("popover");o&&document.body.removeChild(o.wrapper),o=ko(),document.body.appendChild(o.wrapper);const{title:l,description:r,showButtons:u,disableButtons:a,showProgress:s,nextBtnText:c=I("nextBtnText")||"Next &rarr;",prevBtnText:d=I("prevBtnText")||"&larr; Previous",progressText:f=I("progressText")||"{current} of {total}"}=e.popover||{};o.nextButton.innerHTML=c,o.previousButton.innerHTML=d,o.progress.innerHTML=f,l?(o.title.innerHTML=l,o.title.style.display="block"):o.title.style.display="none",r?(o.description.innerHTML=r,o.description.style.display="block"):o.description.style.display="none";const p=u||I("showButtons"),h=s||I("showProgress")||!1,b=(p==null?void 0:p.includes("next"))||(p==null?void 0:p.includes("previous"))||h;o.closeButton.style.display=p.includes("close")?"block":"none",b?(o.footer.style.display="flex",o.progress.style.display=h?"block":"none",o.nextButton.style.display=p.includes("next")?"block":"none",o.previousButton.style.display=p.includes("previous")?"block":"none"):o.footer.style.display="none";const m=a||I("disableButtons")||[];m!=null&&m.includes("next")&&(o.nextButton.disabled=!0,o.nextButton.classList.add("driver-popover-btn-disabled")),m!=null&&m.includes("previous")&&(o.previousButton.disabled=!0,o.previousButton.classList.add("driver-popover-btn-disabled")),m!=null&&m.includes("close")&&(o.closeButton.disabled=!0,o.closeButton.classList.add("driver-popover-btn-disabled"));const y=o.wrapper;y.style.display="block",y.style.left="",y.style.top="",y.style.bottom="",y.style.right="",y.id="driver-popover-content",y.setAttribute("role","dialog"),y.setAttribute("aria-labelledby","driver-popover-title"),y.setAttribute("aria-describedby","driver-popover-description");const C=o.arrow;C.className="driver-popover-arrow";const v=((n=e.popover)==null?void 0:n.popoverClass)||I("popoverClass")||"";y.className=`driver-popover ${v}`.trim(),Gn(o.wrapper,D=>{var R,T,J;const Z=D.target,z=((R=e.popover)==null?void 0:R.onNextClick)||I("onNextClick"),j=((T=e.popover)==null?void 0:T.onPrevClick)||I("onPrevClick"),U=((J=e.popover)==null?void 0:J.onCloseClick)||I("onCloseClick");if(Z.classList.contains("driver-popover-next-btn"))return z?z(t,e,{config:I(),state:O()}):it("nextClick");if(Z.classList.contains("driver-popover-prev-btn"))return j?j(t,e,{config:I(),state:O()}):it("prevClick");if(Z.classList.contains("driver-popover-close-btn"))return U?U(t,e,{config:I(),state:O()}):it("closeClick")},D=>!(o!=null&&o.description.contains(D))&&!(o!=null&&o.title.contains(D))&&typeof D.className=="string"&&D.className.includes("driver-popover")),se("popover",o);const E=((i=e.popover)==null?void 0:i.onPopoverRender)||I("onPopoverRender");E&&E(o,{config:I(),state:O()}),Zn(t,e),Hn(y);const w=t.classList.contains("driver-dummy-element"),k=Rn([y,...w?[]:[t]]);k.length>0&&k[0].focus()}function Vn(){const t=O("popover");if(!(t!=null&&t.wrapper))return;const e=t.wrapper.getBoundingClientRect(),n=I("stagePadding")||0,i=I("popoverOffset")||0;return{width:e.width+n+i,height:e.height+n+i,realWidth:e.width,realHeight:e.height}}function Qn(t,e){const{elementDimensions:n,popoverDimensions:i,popoverPadding:o,popoverArrowDimensions:l}=e;return t==="start"?Math.max(Math.min(n.top-o,window.innerHeight-i.realHeight-l.width),l.width):t==="end"?Math.max(Math.min(n.top-(i==null?void 0:i.realHeight)+n.height+o,window.innerHeight-(i==null?void 0:i.realHeight)-l.width),l.width):t==="center"?Math.max(Math.min(n.top+n.height/2-(i==null?void 0:i.realHeight)/2,window.innerHeight-(i==null?void 0:i.realHeight)-l.width),l.width):0}function Kn(t,e){const{elementDimensions:n,popoverDimensions:i,popoverPadding:o,popoverArrowDimensions:l}=e;return t==="start"?Math.max(Math.min(n.left-o,window.innerWidth-i.realWidth-l.width),l.width):t==="end"?Math.max(Math.min(n.left-(i==null?void 0:i.realWidth)+n.width+o,window.innerWidth-(i==null?void 0:i.realWidth)-l.width),l.width):t==="center"?Math.max(Math.min(n.left+n.width/2-(i==null?void 0:i.realWidth)/2,window.innerWidth-(i==null?void 0:i.realWidth)-l.width),l.width):0}function Zn(t,e){const n=O("popover");if(!n)return;const{align:i="start",side:o="left"}=(e==null?void 0:e.popover)||{},l=i,r=t.id==="driver-dummy-element"?"over":o,u=I("stagePadding")||0,a=Vn(),s=n.arrow.getBoundingClientRect(),c=t.getBoundingClientRect(),d=c.top-a.height;let f=d>=0;const p=window.innerHeight-(c.bottom+a.height);let h=p>=0;const b=c.left-a.width;let m=b>=0;const y=window.innerWidth-(c.right+a.width);let C=y>=0;const v=!f&&!h&&!m&&!C;let E=r;if(r==="top"&&f?C=m=h=!1:r==="bottom"&&h?C=m=f=!1:r==="left"&&m?C=f=h=!1:r==="right"&&C&&(m=f=h=!1),r==="over"){const w=window.innerWidth/2-a.realWidth/2,k=window.innerHeight/2-a.realHeight/2;n.wrapper.style.left=`${w}px`,n.wrapper.style.right="auto",n.wrapper.style.top=`${k}px`,n.wrapper.style.bottom="auto"}else if(v){const w=window.innerWidth/2-(a==null?void 0:a.realWidth)/2,k=10;n.wrapper.style.left=`${w}px`,n.wrapper.style.right="auto",n.wrapper.style.bottom=`${k}px`,n.wrapper.style.top="auto"}else if(m){const w=Math.min(b,window.innerWidth-(a==null?void 0:a.realWidth)-s.width),k=Qn(l,{elementDimensions:c,popoverDimensions:a,popoverPadding:u,popoverArrowDimensions:s});n.wrapper.style.left=`${w}px`,n.wrapper.style.top=`${k}px`,n.wrapper.style.bottom="auto",n.wrapper.style.right="auto",E="left"}else if(C){const w=Math.min(y,window.innerWidth-(a==null?void 0:a.realWidth)-s.width),k=Qn(l,{elementDimensions:c,popoverDimensions:a,popoverPadding:u,popoverArrowDimensions:s});n.wrapper.style.right=`${w}px`,n.wrapper.style.top=`${k}px`,n.wrapper.style.bottom="auto",n.wrapper.style.left="auto",E="right"}else if(f){const w=Math.min(d,window.innerHeight-a.realHeight-s.width);let k=Kn(l,{elementDimensions:c,popoverDimensions:a,popoverPadding:u,popoverArrowDimensions:s});n.wrapper.style.top=`${w}px`,n.wrapper.style.left=`${k}px`,n.wrapper.style.bottom="auto",n.wrapper.style.right="auto",E="top"}else if(h){const w=Math.min(p,window.innerHeight-(a==null?void 0:a.realHeight)-s.width);let k=Kn(l,{elementDimensions:c,popoverDimensions:a,popoverPadding:u,popoverArrowDimensions:s});n.wrapper.style.left=`${k}px`,n.wrapper.style.bottom=`${w}px`,n.wrapper.style.top="auto",n.wrapper.style.right="auto",E="bottom"}v?n.arrow.classList.add("driver-popover-arrow-none"):Do(l,E,t)}function Do(t,e,n){const i=O("popover");if(!i)return;const o=n.getBoundingClientRect(),l=Vn(),r=i.arrow,u=l.width,a=window.innerWidth,s=o.width,c=o.left,d=l.height,f=window.innerHeight,p=o.top,h=o.height;r.className="driver-popover-arrow";let b=e,m=t;e==="top"?(c+s<=0?(b="right",m="end"):c+s-u<=0&&(b="top",m="start"),c>=a?(b="left",m="end"):c+u>=a&&(b="top",m="end")):e==="bottom"?(c+s<=0?(b="right",m="start"):c+s-u<=0&&(b="bottom",m="start"),c>=a?(b="left",m="start"):c+u>=a&&(b="bottom",m="end")):e==="left"?(p+h<=0?(b="bottom",m="end"):p+h-d<=0&&(b="left",m="start"),p>=f?(b="top",m="end"):p+d>=f&&(b="left",m="end")):e==="right"&&(p+h<=0?(b="bottom",m="start"):p+h-d<=0&&(b="right",m="start"),p>=f?(b="top",m="start"):p+d>=f&&(b="right",m="end")),b?(r.classList.add(`driver-popover-arrow-side-${b}`),r.classList.add(`driver-popover-arrow-align-${m}`)):r.classList.add("driver-popover-arrow-none")}function ko(){const t=document.createElement("div");t.classList.add("driver-popover");const e=document.createElement("div");e.classList.add("driver-popover-arrow");const n=document.createElement("header");n.id="driver-popover-title",n.classList.add("driver-popover-title"),n.style.display="none",n.innerText="Popover Title";const i=document.createElement("div");i.id="driver-popover-description",i.classList.add("driver-popover-description"),i.style.display="none",i.innerText="Popover description is here";const o=document.createElement("button");o.type="button",o.classList.add("driver-popover-close-btn"),o.setAttribute("aria-label","Close"),o.innerHTML="&times;";const l=document.createElement("footer");l.classList.add("driver-popover-footer");const r=document.createElement("span");r.classList.add("driver-popover-progress-text"),r.innerText="";const u=document.createElement("span");u.classList.add("driver-popover-navigation-btns");const a=document.createElement("button");a.type="button",a.classList.add("driver-popover-prev-btn"),a.innerHTML="&larr; Previous";const s=document.createElement("button");return s.type="button",s.classList.add("driver-popover-next-btn"),s.innerHTML="Next &rarr;",u.appendChild(a),u.appendChild(s),l.appendChild(r),l.appendChild(u),t.appendChild(o),t.appendChild(e),t.appendChild(n),t.appendChild(i),t.appendChild(l),{wrapper:t,arrow:e,title:n,description:i,footer:l,previousButton:a,nextButton:s,closeButton:o,footerButtons:u,progress:r}}function Co(){var t;const e=O("popover");e&&((t=e.wrapper.parentElement)==null||t.removeChild(e.wrapper))}function Po(t={}){Ke(t);function e(){I("allowClose")&&s()}function n(){const c=O("activeIndex"),d=I("steps")||[];if(typeof c>"u")return;const f=c+1;d[f]?a(f):s()}function i(){const c=O("activeIndex"),d=I("steps")||[];if(typeof c>"u")return;const f=c-1;d[f]?a(f):s()}function o(c){(I("steps")||[])[c]?a(c):s()}function l(){var c;if(O("__transitionCallback"))return;const d=O("activeIndex"),f=O("__activeStep"),p=O("__activeElement");if(typeof d>"u"||typeof f>"u"||typeof O("activeIndex")>"u")return;const h=((c=f.popover)==null?void 0:c.onPrevClick)||I("onPrevClick");if(h)return h(p,f,{config:I(),state:O()});i()}function r(){var c;if(O("__transitionCallback"))return;const d=O("activeIndex"),f=O("__activeStep"),p=O("__activeElement");if(typeof d>"u"||typeof f>"u")return;const h=((c=f.popover)==null?void 0:c.onNextClick)||I("onNextClick");if(h)return h(p,f,{config:I(),state:O()});n()}function u(){O("isInitialized")||(se("isInitialized",!0),document.body.classList.add("driver-active",I("animate")?"driver-fade":"driver-simple"),wo(),Rt("overlayClick",e),Rt("escapePress",e),Rt("arrowLeftPress",l),Rt("arrowRightPress",r))}function a(c=0){var d,f,p,h,b,m,y,C;const v=I("steps");if(!v){console.error("No steps to drive through"),s();return}if(!v[c]){s();return}se("__activeOnDestroyed",document.activeElement),se("activeIndex",c);const E=v[c],w=v[c+1],k=v[c-1],D=((d=E.popover)==null?void 0:d.doneBtnText)||I("doneBtnText")||"Done",R=I("allowClose"),T=typeof((f=E.popover)==null?void 0:f.showProgress)<"u"?(p=E.popover)==null?void 0:p.showProgress:I("showProgress"),J=(((h=E.popover)==null?void 0:h.progressText)||I("progressText")||"{{current}} of {{total}}").replace("{{current}}",`${c+1}`).replace("{{total}}",`${v.length}`),Z=((b=E.popover)==null?void 0:b.showButtons)||I("showButtons"),z=["next","previous",...R?["close"]:[]].filter(Y=>!(Z!=null&&Z.length)||Z.includes(Y)),j=((m=E.popover)==null?void 0:m.onNextClick)||I("onNextClick"),U=((y=E.popover)==null?void 0:y.onPrevClick)||I("onPrevClick"),M=((C=E.popover)==null?void 0:C.onCloseClick)||I("onCloseClick");Xn({...E,popover:{showButtons:z,nextBtnText:w?void 0:D,disableButtons:[...k?[]:["previous"]],showProgress:T,progressText:J,onNextClick:j||(()=>{w?a(c+1):s()}),onPrevClick:U||(()=>{a(c-1)}),onCloseClick:M||(()=>{s()}),...(E==null?void 0:E.popover)||{}}})}function s(c=!0){const d=O("__activeElement"),f=O("__activeStep"),p=O("__activeOnDestroyed"),h=I("onDestroyStarted");if(c&&h){const y=!d||(d==null?void 0:d.id)==="driver-dummy-element";h(y?void 0:d,f,{config:I(),state:O()});return}const b=(f==null?void 0:f.onDeselected)||I("onDeselected"),m=I("onDestroyed");if(document.body.classList.remove("driver-active","driver-fade","driver-simple"),Eo(),Co(),yo(),mo(),uo(),Wn(),d&&f){const y=d.id==="driver-dummy-element";b&&b(y?void 0:d,f,{config:I(),state:O()}),m&&m(y?void 0:d,f,{config:I(),state:O()})}p&&p.focus()}return{isActive:()=>O("isInitialized")||!1,refresh:_t,drive:(c=0)=>{u(),a(c)},setConfig:Ke,setSteps:c=>{Wn(),Ke({...I(),steps:c})},getConfig:I,getState:O,getActiveIndex:()=>O("activeIndex"),isFirstStep:()=>O("activeIndex")===0,isLastStep:()=>{const c=I("steps")||[],d=O("activeIndex");return d!==void 0&&d===c.length-1},getActiveStep:()=>O("activeStep"),getActiveElement:()=>O("activeElement"),getPreviousElement:()=>O("previousElement"),getPreviousStep:()=>O("previousStep"),moveNext:n,movePrevious:i,moveTo:o,hasNextStep:()=>{const c=I("steps")||[],d=O("activeIndex");return d!==void 0&&c[d+1]},hasPreviousStep:()=>{const c=I("steps")||[],d=O("activeIndex");return d!==void 0&&c[d-1]},highlight:c=>{u(),Xn({...c,popover:c.popover?{showButtons:[],showProgress:!1,progressText:"",...c.popover}:void 0})},destroy:()=>{s(!1)}}}function ge(){}function dn(t,e){for(const n in e)t[n]=e[n];return t}function Jn(t){return t()}function $n(){return Object.create(null)}function Be(t){t.forEach(Jn)}function fn(t){return typeof t=="function"}function _e(t,e){return t!=t?e==e:t!==e||t&&typeof t=="object"||typeof t=="function"}let Ht;function ei(t,e){return t===e?!0:(Ht||(Ht=document.createElement("a")),Ht.href=e,t===Ht.href)}function To(t){return Object.keys(t).length===0}function Lo(t,e,n,i){if(t){const o=ti(t,e,n,i);return t[0](o)}}function ti(t,e,n,i){return t[1]&&i?dn(n.ctx.slice(),t[1](i(e))):n.ctx}function Ao(t,e,n,i){if(t[2]&&i){const o=t[2](i(n));if(e.dirty===void 0)return o;if(typeof o=="object"){const l=[],r=Math.max(e.dirty.length,o.length);for(let u=0;u<r;u+=1)l[u]=e.dirty[u]|o[u];return l}return e.dirty|o}return e.dirty}function Io(t,e,n,i,o,l){if(o){const r=ti(e,n,i,l);t.p(r,o)}}function Oo(t){if(t.ctx.length>32){const e=[],n=t.ctx.length/32;for(let i=0;i<n;i++)e[i]=-1;return e}return-1}function _(t,e){t.appendChild(e)}function V(t,e,n){t.insertBefore(e,n||null)}function G(t){t.parentNode&&t.parentNode.removeChild(t)}function pn(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}function S(t){return document.createElement(t)}function ue(t){return document.createTextNode(t)}function W(){return ue(" ")}function ni(){return ue("")}function oe(t,e,n,i){return t.addEventListener(e,n,i),()=>t.removeEventListener(e,n,i)}function Ze(t){return function(e){return e.preventDefault(),t.call(this,e)}}function hn(t){return function(e){return e.stopPropagation(),t.call(this,e)}}function g(t,e,n){n==null?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}const Mo=["width","height"];function Wt(t,e){const n=Object.getOwnPropertyDescriptors(t.__proto__);for(const i in e)e[i]==null?t.removeAttribute(i):i==="style"?t.style.cssText=e[i]:i==="__value"?t.value=t[i]=e[i]:n[i]&&n[i].set&&Mo.indexOf(i)===-1?t[i]=e[i]:g(t,i,e[i])}function Fo(t){return Array.from(t.childNodes)}function Re(t,e){e=""+e,t.data!==e&&(t.data=e)}function Oe(t,e,n,i){n==null?t.style.removeProperty(e):t.style.setProperty(e,n,"")}function qt(t,e,n){t.classList.toggle(e,!!n)}function No(t,e,{bubbles:n=!1,cancelable:i=!1}={}){return new CustomEvent(t,{detail:e,bubbles:n,cancelable:i})}let wt;function Et(t){wt=t}function zt(){if(!wt)throw new Error("Function called outside component initialization");return wt}function Yt(t){zt().$$.on_mount.push(t)}function xo(t){zt().$$.after_update.push(t)}function ii(t){zt().$$.on_destroy.push(t)}function Bo(){const t=zt();return(e,n,{cancelable:i=!1}={})=>{const o=t.$$.callbacks[e];if(o){const l=No(e,n,{cancelable:i});return o.slice().forEach(r=>{r.call(t,l)}),!l.defaultPrevented}return!0}}const st=[],He=[];let ut=[];const oi=[],li=Promise.resolve();let mn=!1;function ri(){mn||(mn=!0,li.then(si))}function ai(){return ri(),li}function gn(t){ut.push(t)}const vn=new Set;let ct=0;function si(){if(ct!==0)return;const t=wt;do{try{for(;ct<st.length;){const e=st[ct];ct++,Et(e),Ro(e.$$)}}catch(e){throw st.length=0,ct=0,e}for(Et(null),st.length=0,ct=0;He.length;)He.pop()();for(let e=0;e<ut.length;e+=1){const n=ut[e];vn.has(n)||(vn.add(n),n())}ut.length=0}while(st.length);for(;oi.length;)oi.pop()();mn=!1,vn.clear(),Et(t)}function Ro(t){if(t.fragment!==null){t.update(),Be(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(gn)}}function Ho(t){const e=[],n=[];ut.forEach(i=>t.indexOf(i)===-1?e.push(i):n.push(i)),n.forEach(i=>i()),ut=e}const Xt=new Set;let Wo;function Te(t,e){t&&t.i&&(Xt.delete(t),t.i(e))}function We(t,e,n,i){if(t&&t.o){if(Xt.has(t))return;Xt.add(t),Wo.c.push(()=>{Xt.delete(t)}),t.o(e)}}function ve(t){return(t==null?void 0:t.length)!==void 0?t:Array.from(t)}function jt(t,e){t.d(1),e.delete(t.key)}function Gt(t,e,n,i,o,l,r,u,a,s,c,d){let f=t.length,p=l.length,h=f;const b={};for(;h--;)b[t[h].key]=h;const m=[],y=new Map,C=new Map,v=[];for(h=p;h--;){const D=d(o,l,h),R=n(D);let T=r.get(R);T?v.push(()=>T.p(D,e)):(T=s(R,D),T.c()),y.set(R,m[h]=T),R in b&&C.set(R,Math.abs(h-b[R]))}const E=new Set,w=new Set;function k(D){Te(D,1),D.m(u,c),r.set(D.key,D),c=D.first,p--}for(;f&&p;){const D=m[p-1],R=t[f-1],T=D.key,J=R.key;D===R?(c=D.first,f--,p--):y.has(J)?!r.has(T)||E.has(T)?k(D):w.has(J)?f--:C.get(T)>C.get(J)?(w.add(T),k(D)):(E.add(J),f--):(a(R,r),f--)}for(;f--;){const D=t[f];y.has(D.key)||a(D,r)}for(;p;)k(m[p-1]);return Be(v),m}function ui(t,e){const n={},i={},o={$$scope:1};let l=t.length;for(;l--;){const r=t[l],u=e[l];if(u){for(const a in r)a in u||(i[a]=1);for(const a in u)o[a]||(n[a]=u[a],o[a]=1);t[l]=u}else for(const a in r)o[a]=1}for(const r in i)r in n||(n[r]=void 0);return n}function Je(t){t&&t.c()}function qe(t,e,n){const{fragment:i,after_update:o}=t.$$;i&&i.m(e,n),gn(()=>{const l=t.$$.on_mount.map(Jn).filter(fn);t.$$.on_destroy?t.$$.on_destroy.push(...l):Be(l),t.$$.on_mount=[]}),o.forEach(gn)}function ze(t,e){const n=t.$$;n.fragment!==null&&(Ho(n.after_update),Be(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function qo(t,e){t.$$.dirty[0]===-1&&(st.push(t),ri(),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function De(t,e,n,i,o,l,r=null,u=[-1]){const a=wt;Et(t);const s=t.$$={fragment:null,ctx:[],props:l,update:ge,not_equal:o,bound:$n(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(a?a.$$.context:[])),callbacks:$n(),dirty:u,skip_bound:!1,root:e.target||a.$$.root};r&&r(s.root);let c=!1;if(s.ctx=n?n(t,e.props||{},(d,f,...p)=>{const h=p.length?p[0]:f;return s.ctx&&o(s.ctx[d],s.ctx[d]=h)&&(!s.skip_bound&&s.bound[d]&&s.bound[d](h),c&&qo(t,d)),f}):[],s.update(),c=!0,Be(s.before_update),s.fragment=i?i(s.ctx):!1,e.target){if(e.hydrate){const d=Fo(e.target);s.fragment&&s.fragment.l(d),d.forEach(G)}else s.fragment&&s.fragment.c();e.intro&&Te(t.$$.fragment),qe(t,e.target,e.anchor),si()}Et(a)}class ke{constructor(){Bn(this,"$$");Bn(this,"$$set")}$destroy(){ze(this,1),this.$destroy=ge}$on(e,n){if(!fn(n))return ge;const i=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return i.push(n),()=>{const o=i.indexOf(n);o!==-1&&i.splice(o,1)}}$set(e){this.$$set&&!To(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}const zo="4",dt=[];function ft(t,e=ge){let n;const i=new Set;function o(u){if(_e(t,u)&&(t=u,n)){const a=!dt.length;for(const s of i)s[1](),dt.push(s,t);if(a){for(let s=0;s<dt.length;s+=2)dt[s][0](dt[s+1]);dt.length=0}}}function l(u){o(u(t))}function r(u,a=ge){const s=[u,a];return i.add(s),i.size===1&&(n=e(o,l)||ge),u(t),()=>{i.delete(s),i.size===0&&n&&(n(),n=null)}}return{set:o,update:l,subscribe:r}}const bn=ft({}),x={setTranslations(t){bn.set(t)},has(t,e,n){let i=!1;return bn.subscribe(o=>{if(n in o&&e in o[n]&&t in o[n][e]){i=!0;return}})(),i},get(t,e,n){let i=n;return bn.subscribe(o=>{if(t in o&&e in o[t]&&n in o[t][e]){i=o[t][e][n];return}if(t in o&&e in o[t]&&n in o[t][e]){i=o[t][e][n];return}if(t=="Global"){i=n;return}i=null})(),i},translate(t,e=null,n=null){n=n||"Global",e=e||"labels";let i=x.get(n,e,t);return i===null&&n!="Global"&&(i=x.get("Global",e,t)),i},translateOption(t,e,n=null){let i=x.translate(e,"options",n);return i===null?"":typeof i=="object"?i[t]:t}},ci=ft({}),di={set(t){ci.set(t)},get(){let t=null;return ci.subscribe(e=>{e&&(t=e)})(),t}},yn=ft(),Ye={setNotifier(t){yn.set(t)},notify(t,e=null,n=2e3){yn.subscribe(i=>{i&&i.notify(t,e,2e3)})()},confirm(t=null,e=null,n){yn.subscribe(i=>{if(i){let o=null,l=null,r=null;typeof t=="string"||t instanceof String?(l=t,r=x.translate("Yes")):(t=t||{},l=t.message,r=t.confirmText,o=t.confirmStyle||null),i.confirm(l,{confirmText:r,cancelText:x.translate("Cancel"),confirmStyle:o},e,n)}})()}},Ut=ft(),Xe={setLayoutManager(t){Ut.set(t)},resetToDefault(t,e,n,i){let o=null;return Ut.subscribe(l=>{l&&(o=l.resetToDefault(t,e,n,i))})(),o},get:function(t,e,n,i,o){let l=null;return Ut.subscribe(r=>{r&&(l=r.get(t,e,n,i,o))})(),l},set:function(t,e,n,i,o){let l=null;return Ut.subscribe(r=>{r&&(l=r.set(t,e,n,i,o))})(),l}},fi=ft(),Me={setMetadata(t){fi.set(t)},get(t){let e=null;return fi.subscribe(n=>{n&&(e=n.get(t))})(),e}},pi=ft(),St={setModelFactory(t){pi.set(t)},create(t,e){pi.subscribe(n=>{n&&n.create(t,e)})()}};typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(zo);function hi(t){let e,n,i,o,l,r,u,a,s,c,d,f,p,h,b;function m(v,E){return v[2]?Xo:Yo}let y=m(t),C=y(t);return{c(){e=S("div"),n=S("div"),i=S("div"),o=S("span"),o.textContent=`${x.translate("queueManager","labels","QueueItem")}`,l=W(),r=S("span"),u=S("a"),u.innerHTML='<span aria-hidden="true">Ã—</span>',a=W(),C.c(),s=W(),c=S("a"),c.textContent=`${x.translate("View List")}`,d=W(),f=S("div"),p=S("div"),p.textContent=`${x.translate("Loading...")}`,g(o,"class","panel-heading-title"),g(u,"href","/"),g(u,"class","close svelte-1p6ppx8"),g(c,"href","#QueueItem"),g(c,"title",x.translate("View List")),g(c,"class","qp-view-list svelte-1p6ppx8"),g(r,"class","pull-right"),g(i,"class","panel-heading clearfix"),g(p,"class","list-container"),g(f,"class","panel-body"),g(n,"class","panel panel-default"),g(e,"class","queue-panel-container")},m(v,E){V(v,e,E),_(e,n),_(n,i),_(i,o),_(i,l),_(i,r),_(r,u),_(r,a),C.m(r,null),_(r,s),_(r,c),_(n,d),_(n,f),_(f,p),t[9](e),h||(b=oe(u,"click",t[6]),h=!0)},p(v,E){y===(y=m(v))&&C?C.p(v,E):(C.d(1),C=y(v),C&&(C.c(),C.m(r,s)))},d(v){v&&G(e),C.d(),t[9](null),h=!1,b()}}}function Yo(t){let e,n,i;return{c(){e=S("a"),e.textContent=`${x.translate("Pause")}`,g(e,"href","/"),g(e,"title",x.translate("Pause")),g(e,"class","qm-button")},m(o,l){V(o,e,l),n||(i=oe(e,"click",t[8]),n=!0)},p:ge,d(o){o&&G(e),n=!1,i()}}}function Xo(t){let e,n,i;return{c(){e=S("a"),e.textContent=`${x.translate("Start")}`,g(e,"href","/"),g(e,"title",x.translate("Start")),g(e,"class","qm-button")},m(o,l){V(o,e,l),n||(i=oe(e,"click",t[7]),n=!0)},p:ge,d(o){o&&G(e),n=!1,i()}}}function jo(t){let e,n=t[0]&&hi(t);return{c(){n&&n.c(),e=ni()},m(i,o){n&&n.m(i,o),V(i,e,o)},p(i,[o]){i[0]?n?n.p(i,o):(n=hi(i),n.c(),n.m(e.parentNode,e)):n&&(n.d(1),n=null)},i:ge,o:ge,d(i){i&&G(e),n&&n.d(i)}}}function Go(t,e,n){let{isOpen:i=!1}=e,{close:o}=e,{icon:l}=e,r=!1;window.addEventListener("publicDataFetched",h=>{n(2,r=!!h.detail.qmPaused)});let u;function a(h){u&&!u.contains(h.target)&&l&&!l.contains(h.target)&&i===!0&&o()}Yt(()=>{document.addEventListener("click",a)}),ii(()=>{document.removeEventListener("click",a)});async function s(h){let b=di.get();if(b)try{const m=await fetch("/api/v1/App/action/QueueManagerUpdate",{method:"POST",headers:{"Content-Type":"application/json","Authorization-Token":btoa(b.user.userName+":"+b.token)},body:JSON.stringify({pause:h})});if(!m.ok)throw new Error("Network response was not ok");await m.json(),Ye.notify("Done","success")}catch(m){console.error("Error:",m)}}const c=h=>{h.preventDefault(),o()},d=h=>{h.preventDefault(),s(!1)},f=h=>{h.preventDefault(),s(!0)};function p(h){He[h?"unshift":"push"](()=>{u=h,n(3,u)})}return t.$$set=h=>{"isOpen"in h&&n(0,i=h.isOpen),"close"in h&&n(1,o=h.close),"icon"in h&&n(5,l=h.icon)},[i,o,r,u,s,l,c,d,f,p]}class Uo extends ke{constructor(e){super(),De(this,e,Go,jo,_e,{isOpen:0,close:1,icon:5})}}function mi(t){let e;return{c(){e=S("span"),g(e,"class","fas fa-pause-circle pause-icon")},m(n,i){V(n,e,i)},d(n){n&&G(e)}}}function Vo(t){let e,n,i,o,l,r,u,a,s=t[2]&&mi();return l=new Uo({props:{icon:t[0],isOpen:t[1],close:t[4]}}),{c(){e=S("a"),n=S("span"),i=W(),s&&s.c(),o=W(),Je(l.$$.fragment),g(n,"class","fas fa-tasks"),g(e,"href","/"),g(e,"class","notifications-button")},m(c,d){V(c,e,d),_(e,n),_(e,i),s&&s.m(e,null),t[6](e),V(c,o,d),qe(l,c,d),r=!0,u||(a=oe(e,"click",t[7]),u=!0)},p(c,[d]){c[2]?s||(s=mi(),s.c(),s.m(e,null)):s&&(s.d(1),s=null);const f={};d&1&&(f.icon=c[0]),d&2&&(f.isOpen=c[1]),l.$set(f)},i(c){r||(Te(l.$$.fragment,c),r=!0)},o(c){We(l.$$.fragment,c),r=!1},d(c){c&&(G(e),G(o)),s&&s.d(),t[6](null),ze(l,c),u=!1,a()}}}function Qo(t,e,n){let{renderTable:i=()=>{}}=e,o,l=!1,r=!1;window.addEventListener("publicDataFetched",d=>{n(2,r=!!d.detail.qmPaused)});function u(){l||(n(1,l=!0),i())}function a(){n(1,l=!1),window.dispatchEvent(new Event("qmPanelClosed"))}function s(d){He[d?"unshift":"push"](()=>{o=d,n(0,o)})}const c=d=>{d.preventDefault(),u()};return t.$$set=d=>{"renderTable"in d&&n(5,i=d.renderTable)},[o,l,r,u,a,i,s,c]}class Ko extends ke{constructor(e){super(),De(this,e,Qo,Vo,_e,{renderTable:5})}}function Zo(t){let e,n=`${t[0]}px`,i=`${t[0]}px`,o=`${t[1]}px`;return{c(){e=S("div"),g(e,"class","loading-icon spinner svelte-yw8t7l"),Oe(e,"width",n),Oe(e,"height",i),Oe(e,"border-width",o)},m(l,r){V(l,e,r)},p(l,[r]){r&1&&n!==(n=`${l[0]}px`)&&Oe(e,"width",n),r&1&&i!==(i=`${l[0]}px`)&&Oe(e,"height",i),r&2&&o!==(o=`${l[1]}px`)&&Oe(e,"border-width",o)},i:ge,o:ge,d(l){l&&G(e)}}}function Jo(t,e,n){let{size:i=40}=e,{thickness:o=4}=e;return t.$$set=l=>{"size"in l&&n(0,i=l.size),"thickness"in l&&n(1,o=l.thickness)},[i,o]}class $o extends ke{constructor(e){super(),De(this,e,Jo,Zo,_e,{size:0,thickness:1})}}function gi(t){let e,n;return{c(){e=S("img"),ei(e.src,n=t[1])||g(e,"src",n),g(e,"class","logo"),g(e,"alt",t[0])},m(i,o){V(i,e,o)},p(i,o){o&2&&!ei(e.src,n=i[1])&&g(e,"src",n),o&1&&g(e,"alt",i[0])},d(i){i&&G(e)}}}function vi(t){let e,n,i;return{c(){e=S("a"),n=S("i"),i=ue("Recovery Instructions"),g(n,"class","fa fa-history svelte-1qmezxs"),g(e,"href",t[2]),g(e,"target","_blank"),g(e,"class","btn btn-default svelte-1qmezxs"),g(e,"role","button"),Oe(e,"float","right")},m(o,l){V(o,e,l),_(e,n),_(e,i)},p(o,l){l&4&&g(e,"href",o[2])},d(o){o&&G(e)}}}function bi(t){let e,n,i,o,l,r;return{c(){e=S("hr"),n=W(),i=S("pre"),o=ue(t[3]),g(i,"class","logs-container svelte-1qmezxs")},m(u,a){V(u,e,a),V(u,n,a),V(u,i,a),_(i,o),t[11](i),l||(r=oe(i,"scroll",t[8]),l=!0)},p(u,a){a&8&&Re(o,u[3])},d(u){u&&(G(e),G(n),G(i)),t[11](null),l=!1,r()}}}function el(t){let e,n,i,o,l,r,u,a,s,c,d,f,p,h,b,m,y,C,v=t[4]?"Hide":"Show",E,w,k,D,R,T,J,Z,z=t[1]&&gi(t);c=new $o({props:{size:"40",thickness:"5"}});let j=t[2]&&vi(t),U=t[4]&&t[3]&&bi(t);return{c(){e=S("div"),n=S("div"),i=S("div"),z&&z.c(),o=W(),l=S("div"),r=S("div"),u=S("h3"),u.textContent="System is updating...",a=W(),s=S("section"),Je(c.$$.fragment),d=W(),f=S("h5"),p=ue(t[5]),h=W(),b=S("section"),m=S("div"),y=S("button"),C=S("i"),E=ue(v),w=ue(" logs"),D=W(),j&&j.c(),R=W(),U&&U.c(),g(i,"class","logo-container"),g(n,"class","panel-heading"),g(f,"class","svelte-1qmezxs"),g(s,"class","progress-section svelte-1qmezxs"),g(C,"class","fa fa-list svelte-1qmezxs"),g(y,"class","btn btn-default svelte-1qmezxs"),y.disabled=k=!t[3],g(m,"class","buttons"),g(b,"class","logs-section"),g(r,"class","form-group"),g(l,"class","panel-body"),g(e,"id","login"),g(e,"class","panel panel-default panel-updating")},m(M,Y){V(M,e,Y),_(e,n),_(n,i),z&&z.m(i,null),_(e,o),_(e,l),_(l,r),_(r,u),_(r,a),_(r,s),qe(c,s,null),_(s,d),_(s,f),_(f,p),_(r,h),_(r,b),_(b,m),_(m,y),_(y,C),_(y,E),_(y,w),_(m,D),j&&j.m(m,null),_(b,R),U&&U.m(b,null),T=!0,J||(Z=oe(y,"click",t[7]),J=!0)},p(M,[Y]){M[1]?z?z.p(M,Y):(z=gi(M),z.c(),z.m(i,null)):z&&(z.d(1),z=null),(!T||Y&32)&&Re(p,M[5]),(!T||Y&16)&&v!==(v=M[4]?"Hide":"Show")&&Re(E,v),(!T||Y&8&&k!==(k=!M[3]))&&(y.disabled=k),M[2]?j?j.p(M,Y):(j=vi(M),j.c(),j.m(m,null)):j&&(j.d(1),j=null),M[4]&&M[3]?U?U.p(M,Y):(U=bi(M),U.c(),U.m(b,null)):U&&(U.d(1),U=null)},i(M){T||(Te(c.$$.fragment,M),T=!0)},o(M){We(c.$$.fragment,M),T=!1},d(M){M&&G(e),z&&z.d(),ze(c),j&&j.d(),U&&U.d(),J=!1,Z()}}}function tl(t){return t.replace(/^\d{2,4}.\d{2}.\d{2,4} \d{2}:\d{2}:\d{2}/g,"").replace(/^[\-\|\s]+/,"")}function nl(t,e,n){let{applicationName:i="AtroCore"}=e,{logoPath:o=null}=e,{logFilePath:l}=e,{restoreLink:r=null}=e,u=!1,a=!1,s=0,c=!0,d="",f,p;xo(()=>{p&&c&&p.scrollTo(0,p.scrollHeight)});function h(){n(4,u=!u),u||(c=!0)}function b(y){const C=y.currentTarget;c=C.scrollHeight-C.scrollTop===C.clientHeight}setInterval(async()=>{try{const y=await fetch(l,{cache:"no-store"});s+=1,y.ok?(n(3,d=(await y.text()).trim()),d.search("composer")>=0&&n(10,a=!0),s>65&&!a&&n(3,d="Something wrong. Please, reboot the server.")):a?setTimeout(()=>{location.reload()},2e3):s>65&&n(3,d="Something wrong. Please, reboot the server.")}catch(y){console.error("Error: ",y)}},1e3);function m(y){He[y?"unshift":"push"](()=>{p=y,n(6,p)})}return t.$$set=y=>{"applicationName"in y&&n(0,i=y.applicationName),"logoPath"in y&&n(1,o=y.logoPath),"logFilePath"in y&&n(9,l=y.logFilePath),"restoreLink"in y&&n(2,r=y.restoreLink)},t.$$.update=()=>{if(t.$$.dirty&1032)if(d){const y=d.trim().split(`
`);n(5,f=tl(y.pop()))}else a?n(5,f=""):n(5,f="Starting...")},[i,o,r,d,u,f,p,h,b,l,a,m]}class il extends ke{constructor(e){super(),De(this,e,nl,el,_e,{applicationName:0,logoPath:1,logFilePath:9,restoreLink:2})}}function yi(t,e,n){const i=t.slice();return i[16]=e[n],i}function _i(t){let e,n=t[16].label+"",i,o,l,r,u,a,s;function c(){return t[9](t[16])}return{c(){e=S("button"),i=ue(n),o=W(),g(e,"data-action",l=t[16].name),e.disabled=r=t[16].disabled,g(e,"type","button"),g(e,"class",u=`btn action btn-${t[16].style??"default"}`)},m(d,f){V(d,e,f),_(e,i),_(e,o),a||(s=oe(e,"click",c),a=!0)},p(d,f){t=d,f&1&&n!==(n=t[16].label+"")&&Re(i,n),f&1&&l!==(l=t[16].name)&&g(e,"data-action",l),f&1&&r!==(r=t[16].disabled)&&(e.disabled=r),f&1&&u!==(u=`btn action btn-${t[16].style??"default"}`)&&g(e,"class",u)},d(d){d&&G(e),a=!1,s()}}}function ol(t){let e,n,i,o=ve(t[0]),l=[];for(let a=0;a<o.length;a+=1)l[a]=_i(yi(t,o,a));const r=t[8].default,u=Lo(r,t,t[7],null);return{c(){e=S("div");for(let a=0;a<l.length;a+=1)l[a].c();n=W(),u&&u.c(),g(e,"class","button-container")},m(a,s){V(a,e,s);for(let c=0;c<l.length;c+=1)l[c]&&l[c].m(e,null);V(a,n,s),u&&u.m(a,s),i=!0},p(a,[s]){if(s&3){o=ve(a[0]);let c;for(c=0;c<o.length;c+=1){const d=yi(a,o,c);l[c]?l[c].p(d,s):(l[c]=_i(d),l[c].c(),l[c].m(e,null))}for(;c<l.length;c+=1)l[c].d(1);l.length=o.length}u&&u.p&&(!i||s&128)&&Io(u,r,a,a[7],i?Ao(r,a[7],s,null):Oo(a[7]),null)},i(a){i||(Te(u,a),i=!0)},o(a){We(u,a),i=!1},d(a){a&&(G(e),G(n)),pn(l,a),u&&u.d(a)}}}function ll(t,e,n){let{$$slots:i={},$$scope:o}=e,{params:l}=e,{fetch:r}=e,{loadLayout:u=()=>{Xe.get(scope,type,layoutProfileId,v=>{layout=v},!1)}}=e,{validate:a=()=>!0}=e,s=[{name:"save",label:x.translate("Save","labels"),style:"primary"},{name:"cancel",label:x.translate("Cancel","labels")},{name:"resetToDefault",label:x.translate("resetToDefault","labels","LayoutManager")}];const c=Espo.link_LayoutProfile;if(c)for(const v of c)v.id===l.layoutProfileId&&v.isDefault&&s.splice(2,1);Yt(()=>{Ye.notify("Loading..."),u(()=>{Ye.notify(!1),l.afterRender&&l.afterRender()})});function d(){b();const v=r();if(!a(v)){m();return}Ye.notify("Saving..."),Xe.set(l.scope,l.type,l.layoutProfileId,v,()=>{Ye.notify("Saved","success",2e3),f(),m()})}function f(){l.onUpdate&&l.onUpdate({scope:l.scope,type:l.type,layoutProfileId:l.layoutProfileId})}function p(){u()}function h(){Ye.confirm("Are you sure you want to reset to default?",()=>{Xe.resetToDefault(l.scope,l.type,l.layoutProfileId,()=>{f(),p()})})}function b(){n(0,s=s.map(v=>({...v,disabled:!0})))}function m(){n(0,s=s.map(v=>({...v,disabled:!1})))}function y(v){switch(v.name){case"save":d();break;case"cancel":p();break;case"resetToDefault":h();break}}const C=v=>y(v);return t.$$set=v=>{"params"in v&&n(2,l=v.params),"fetch"in v&&n(3,r=v.fetch),"loadLayout"in v&&n(4,u=v.loadLayout),"validate"in v&&n(5,a=v.validate),"$$scope"in v&&n(7,o=v.$$scope)},[s,y,l,r,u,a,d,o,i,C]}class wi extends ke{constructor(e){super(),De(this,e,ll,ol,_e,{params:2,fetch:3,loadLayout:4,validate:5,save:6})}get save(){return this.$$.ctx[6]}}/**!
 * Sortable 1.15.2
 * @author	RubaXa   <trash@rubaxa.org>
 * @author	owenm    <owen23355@gmail.com>
 * @license MIT
 */function Ei(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(o){return Object.getOwnPropertyDescriptor(t,o).enumerable})),n.push.apply(n,i)}return n}function Fe(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Ei(Object(n),!0).forEach(function(i){rl(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Ei(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function Vt(t){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Vt=function(e){return typeof e}:Vt=function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Vt(t)}function rl(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function je(){return je=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},je.apply(this,arguments)}function al(t,e){if(t==null)return{};var n={},i=Object.keys(t),o,l;for(l=0;l<i.length;l++)o=i[l],!(e.indexOf(o)>=0)&&(n[o]=t[o]);return n}function sl(t,e){if(t==null)return{};var n=al(t,e),i,o;if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(t);for(o=0;o<l.length;o++)i=l[o],!(e.indexOf(i)>=0)&&Object.prototype.propertyIsEnumerable.call(t,i)&&(n[i]=t[i])}return n}var ul="1.15.2";function Ge(t){if(typeof window<"u"&&window.navigator)return!!navigator.userAgent.match(t)}var Ue=Ge(/(?:Trident.*rv[ :]?11\.|msie|iemobile|Windows Phone)/i),Dt=Ge(/Edge/i),Si=Ge(/firefox/i),kt=Ge(/safari/i)&&!Ge(/chrome/i)&&!Ge(/android/i),Di=Ge(/iP(ad|od|hone)/i),ki=Ge(/chrome/i)&&Ge(/android/i),Ci={capture:!1,passive:!1};function K(t,e,n){t.addEventListener(e,n,!Ue&&Ci)}function Q(t,e,n){t.removeEventListener(e,n,!Ue&&Ci)}function Qt(t,e){if(e){if(e[0]===">"&&(e=e.substring(1)),t)try{if(t.matches)return t.matches(e);if(t.msMatchesSelector)return t.msMatchesSelector(e);if(t.webkitMatchesSelector)return t.webkitMatchesSelector(e)}catch{return!1}return!1}}function cl(t){return t.host&&t!==document&&t.host.nodeType?t.host:t.parentNode}function Le(t,e,n,i){if(t){n=n||document;do{if(e!=null&&(e[0]===">"?t.parentNode===n&&Qt(t,e):Qt(t,e))||i&&t===n)return t;if(t===n)break}while(t=cl(t))}return null}var Pi=/\s+/g;function we(t,e,n){if(t&&e)if(t.classList)t.classList[n?"add":"remove"](e);else{var i=(" "+t.className+" ").replace(Pi," ").replace(" "+e+" "," ");t.className=(i+(n?" "+e:"")).replace(Pi," ")}}function B(t,e,n){var i=t&&t.style;if(i){if(n===void 0)return document.defaultView&&document.defaultView.getComputedStyle?n=document.defaultView.getComputedStyle(t,""):t.currentStyle&&(n=t.currentStyle),e===void 0?n:n[e];!(e in i)&&e.indexOf("webkit")===-1&&(e="-webkit-"+e),i[e]=n+(typeof n=="string"?"":"px")}}function pt(t,e){var n="";if(typeof t=="string")n=t;else do{var i=B(t,"transform");i&&i!=="none"&&(n=i+" "+n)}while(!e&&(t=t.parentNode));var o=window.DOMMatrix||window.WebKitCSSMatrix||window.CSSMatrix||window.MSCSSMatrix;return o&&new o(n)}function Ti(t,e,n){if(t){var i=t.getElementsByTagName(e),o=0,l=i.length;if(n)for(;o<l;o++)n(i[o],o);return i}return[]}function Ne(){var t=document.scrollingElement;return t||document.documentElement}function re(t,e,n,i,o){if(!(!t.getBoundingClientRect&&t!==window)){var l,r,u,a,s,c,d;if(t!==window&&t.parentNode&&t!==Ne()?(l=t.getBoundingClientRect(),r=l.top,u=l.left,a=l.bottom,s=l.right,c=l.height,d=l.width):(r=0,u=0,a=window.innerHeight,s=window.innerWidth,c=window.innerHeight,d=window.innerWidth),(e||n)&&t!==window&&(o=o||t.parentNode,!Ue))do if(o&&o.getBoundingClientRect&&(B(o,"transform")!=="none"||n&&B(o,"position")!=="static")){var f=o.getBoundingClientRect();r-=f.top+parseInt(B(o,"border-top-width")),u-=f.left+parseInt(B(o,"border-left-width")),a=r+l.height,s=u+l.width;break}while(o=o.parentNode);if(i&&t!==window){var p=pt(o||t),h=p&&p.a,b=p&&p.d;p&&(r/=b,u/=h,d/=h,c/=b,a=r+c,s=u+d)}return{top:r,left:u,bottom:a,right:s,width:d,height:c}}}function Li(t,e,n){for(var i=$e(t,!0),o=re(t)[e];i;){var l=re(i)[n],r=void 0;if(r=o>=l,!r)return i;if(i===Ne())break;i=$e(i,!1)}return!1}function ht(t,e,n,i){for(var o=0,l=0,r=t.children;l<r.length;){if(r[l].style.display!=="none"&&r[l]!==N.ghost&&(i||r[l]!==N.dragged)&&Le(r[l],n.draggable,t,!1)){if(o===e)return r[l];o++}l++}return null}function _n(t,e){for(var n=t.lastElementChild;n&&(n===N.ghost||B(n,"display")==="none"||e&&!Qt(n,e));)n=n.previousElementSibling;return n||null}function Ce(t,e){var n=0;if(!t||!t.parentNode)return-1;for(;t=t.previousElementSibling;)t.nodeName.toUpperCase()!=="TEMPLATE"&&t!==N.clone&&(!e||Qt(t,e))&&n++;return n}function Ai(t){var e=0,n=0,i=Ne();if(t)do{var o=pt(t),l=o.a,r=o.d;e+=t.scrollLeft*l,n+=t.scrollTop*r}while(t!==i&&(t=t.parentNode));return[e,n]}function dl(t,e){for(var n in t)if(t.hasOwnProperty(n)){for(var i in e)if(e.hasOwnProperty(i)&&e[i]===t[n][i])return Number(n)}return-1}function $e(t,e){if(!t||!t.getBoundingClientRect)return Ne();var n=t,i=!1;do if(n.clientWidth<n.scrollWidth||n.clientHeight<n.scrollHeight){var o=B(n);if(n.clientWidth<n.scrollWidth&&(o.overflowX=="auto"||o.overflowX=="scroll")||n.clientHeight<n.scrollHeight&&(o.overflowY=="auto"||o.overflowY=="scroll")){if(!n.getBoundingClientRect||n===document.body)return Ne();if(i||e)return n;i=!0}}while(n=n.parentNode);return Ne()}function fl(t,e){if(t&&e)for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t}function wn(t,e){return Math.round(t.top)===Math.round(e.top)&&Math.round(t.left)===Math.round(e.left)&&Math.round(t.height)===Math.round(e.height)&&Math.round(t.width)===Math.round(e.width)}var Ct;function Ii(t,e){return function(){if(!Ct){var n=arguments,i=this;n.length===1?t.call(i,n[0]):t.apply(i,n),Ct=setTimeout(function(){Ct=void 0},e)}}}function pl(){clearTimeout(Ct),Ct=void 0}function Oi(t,e,n){t.scrollLeft+=e,t.scrollTop+=n}function Mi(t){var e=window.Polymer,n=window.jQuery||window.Zepto;return e&&e.dom?e.dom(t).cloneNode(!0):n?n(t).clone(!0)[0]:t.cloneNode(!0)}function Fi(t,e,n){var i={};return Array.from(t.children).forEach(function(o){var l,r,u,a;if(!(!Le(o,e.draggable,t,!1)||o.animated||o===n)){var s=re(o);i.left=Math.min((l=i.left)!==null&&l!==void 0?l:1/0,s.left),i.top=Math.min((r=i.top)!==null&&r!==void 0?r:1/0,s.top),i.right=Math.max((u=i.right)!==null&&u!==void 0?u:-1/0,s.right),i.bottom=Math.max((a=i.bottom)!==null&&a!==void 0?a:-1/0,s.bottom)}}),i.width=i.right-i.left,i.height=i.bottom-i.top,i.x=i.left,i.y=i.top,i}var Ee="Sortable"+new Date().getTime();function hl(){var t=[],e;return{captureAnimationState:function(){if(t=[],!!this.options.animation){var i=[].slice.call(this.el.children);i.forEach(function(o){if(!(B(o,"display")==="none"||o===N.ghost)){t.push({target:o,rect:re(o)});var l=Fe({},t[t.length-1].rect);if(o.thisAnimationDuration){var r=pt(o,!0);r&&(l.top-=r.f,l.left-=r.e)}o.fromRect=l}})}},addAnimationState:function(i){t.push(i)},removeAnimationState:function(i){t.splice(dl(t,{target:i}),1)},animateAll:function(i){var o=this;if(!this.options.animation){clearTimeout(e),typeof i=="function"&&i();return}var l=!1,r=0;t.forEach(function(u){var a=0,s=u.target,c=s.fromRect,d=re(s),f=s.prevFromRect,p=s.prevToRect,h=u.rect,b=pt(s,!0);b&&(d.top-=b.f,d.left-=b.e),s.toRect=d,s.thisAnimationDuration&&wn(f,d)&&!wn(c,d)&&(h.top-d.top)/(h.left-d.left)===(c.top-d.top)/(c.left-d.left)&&(a=gl(h,f,p,o.options)),wn(d,c)||(s.prevFromRect=c,s.prevToRect=d,a||(a=o.options.animation),o.animate(s,h,d,a)),a&&(l=!0,r=Math.max(r,a),clearTimeout(s.animationResetTimer),s.animationResetTimer=setTimeout(function(){s.animationTime=0,s.prevFromRect=null,s.fromRect=null,s.prevToRect=null,s.thisAnimationDuration=null},a),s.thisAnimationDuration=a)}),clearTimeout(e),l?e=setTimeout(function(){typeof i=="function"&&i()},r):typeof i=="function"&&i(),t=[]},animate:function(i,o,l,r){if(r){B(i,"transition",""),B(i,"transform","");var u=pt(this.el),a=u&&u.a,s=u&&u.d,c=(o.left-l.left)/(a||1),d=(o.top-l.top)/(s||1);i.animatingX=!!c,i.animatingY=!!d,B(i,"transform","translate3d("+c+"px,"+d+"px,0)"),this.forRepaintDummy=ml(i),B(i,"transition","transform "+r+"ms"+(this.options.easing?" "+this.options.easing:"")),B(i,"transform","translate3d(0,0,0)"),typeof i.animated=="number"&&clearTimeout(i.animated),i.animated=setTimeout(function(){B(i,"transition",""),B(i,"transform",""),i.animated=!1,i.animatingX=!1,i.animatingY=!1},r)}}}}function ml(t){return t.offsetWidth}function gl(t,e,n,i){return Math.sqrt(Math.pow(e.top-t.top,2)+Math.pow(e.left-t.left,2))/Math.sqrt(Math.pow(e.top-n.top,2)+Math.pow(e.left-n.left,2))*i.animation}var mt=[],En={initializeByDefault:!0},Pt={mount:function(e){for(var n in En)En.hasOwnProperty(n)&&!(n in e)&&(e[n]=En[n]);mt.forEach(function(i){if(i.pluginName===e.pluginName)throw"Sortable: Cannot mount plugin ".concat(e.pluginName," more than once")}),mt.push(e)},pluginEvent:function(e,n,i){var o=this;this.eventCanceled=!1,i.cancel=function(){o.eventCanceled=!0};var l=e+"Global";mt.forEach(function(r){n[r.pluginName]&&(n[r.pluginName][l]&&n[r.pluginName][l](Fe({sortable:n},i)),n.options[r.pluginName]&&n[r.pluginName][e]&&n[r.pluginName][e](Fe({sortable:n},i)))})},initializePlugins:function(e,n,i,o){mt.forEach(function(u){var a=u.pluginName;if(!(!e.options[a]&&!u.initializeByDefault)){var s=new u(e,n,e.options);s.sortable=e,s.options=e.options,e[a]=s,je(i,s.defaults)}});for(var l in e.options)if(e.options.hasOwnProperty(l)){var r=this.modifyOption(e,l,e.options[l]);typeof r<"u"&&(e.options[l]=r)}},getEventProperties:function(e,n){var i={};return mt.forEach(function(o){typeof o.eventProperties=="function"&&je(i,o.eventProperties.call(n[o.pluginName],e))}),i},modifyOption:function(e,n,i){var o;return mt.forEach(function(l){e[l.pluginName]&&l.optionListeners&&typeof l.optionListeners[n]=="function"&&(o=l.optionListeners[n].call(e[l.pluginName],i))}),o}};function vl(t){var e=t.sortable,n=t.rootEl,i=t.name,o=t.targetEl,l=t.cloneEl,r=t.toEl,u=t.fromEl,a=t.oldIndex,s=t.newIndex,c=t.oldDraggableIndex,d=t.newDraggableIndex,f=t.originalEvent,p=t.putSortable,h=t.extraEventProperties;if(e=e||n&&n[Ee],!!e){var b,m=e.options,y="on"+i.charAt(0).toUpperCase()+i.substr(1);window.CustomEvent&&!Ue&&!Dt?b=new CustomEvent(i,{bubbles:!0,cancelable:!0}):(b=document.createEvent("Event"),b.initEvent(i,!0,!0)),b.to=r||n,b.from=u||n,b.item=o||n,b.clone=l,b.oldIndex=a,b.newIndex=s,b.oldDraggableIndex=c,b.newDraggableIndex=d,b.originalEvent=f,b.pullMode=p?p.lastPutMode:void 0;var C=Fe(Fe({},h),Pt.getEventProperties(i,e));for(var v in C)b[v]=C[v];n&&n.dispatchEvent(b),m[y]&&m[y].call(e,b)}}var bl=["evt"],be=function(e,n){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},o=i.evt,l=sl(i,bl);Pt.pluginEvent.bind(N)(e,n,Fe({dragEl:P,parentEl:le,ghostEl:H,rootEl:te,nextEl:ot,lastDownEl:Kt,cloneEl:ne,cloneHidden:et,dragStarted:Lt,putSortable:ce,activeSortable:N.active,originalEvent:o,oldIndex:gt,oldDraggableIndex:Tt,newIndex:Se,newDraggableIndex:tt,hideGhostForTarget:qi,unhideGhostForTarget:zi,cloneNowHidden:function(){et=!0},cloneNowShown:function(){et=!1},dispatchSortableEvent:function(u){me({sortable:n,name:u,originalEvent:o})}},l))};function me(t){vl(Fe({putSortable:ce,cloneEl:ne,targetEl:P,rootEl:te,oldIndex:gt,oldDraggableIndex:Tt,newIndex:Se,newDraggableIndex:tt},t))}var P,le,H,te,ot,Kt,ne,et,gt,Se,Tt,tt,Zt,ce,vt=!1,Jt=!1,$t=[],lt,Ae,Sn,Dn,Ni,xi,Lt,bt,At,It=!1,en=!1,tn,fe,kn=[],Cn=!1,nn=[],on=typeof document<"u",ln=Di,Bi=Dt||Ue?"cssFloat":"float",yl=on&&!ki&&!Di&&"draggable"in document.createElement("div"),Ri=function(){if(on){if(Ue)return!1;var t=document.createElement("x");return t.style.cssText="pointer-events:auto",t.style.pointerEvents==="auto"}}(),Hi=function(e,n){var i=B(e),o=parseInt(i.width)-parseInt(i.paddingLeft)-parseInt(i.paddingRight)-parseInt(i.borderLeftWidth)-parseInt(i.borderRightWidth),l=ht(e,0,n),r=ht(e,1,n),u=l&&B(l),a=r&&B(r),s=u&&parseInt(u.marginLeft)+parseInt(u.marginRight)+re(l).width,c=a&&parseInt(a.marginLeft)+parseInt(a.marginRight)+re(r).width;if(i.display==="flex")return i.flexDirection==="column"||i.flexDirection==="column-reverse"?"vertical":"horizontal";if(i.display==="grid")return i.gridTemplateColumns.split(" ").length<=1?"vertical":"horizontal";if(l&&u.float&&u.float!=="none"){var d=u.float==="left"?"left":"right";return r&&(a.clear==="both"||a.clear===d)?"vertical":"horizontal"}return l&&(u.display==="block"||u.display==="flex"||u.display==="table"||u.display==="grid"||s>=o&&i[Bi]==="none"||r&&i[Bi]==="none"&&s+c>o)?"vertical":"horizontal"},_l=function(e,n,i){var o=i?e.left:e.top,l=i?e.right:e.bottom,r=i?e.width:e.height,u=i?n.left:n.top,a=i?n.right:n.bottom,s=i?n.width:n.height;return o===u||l===a||o+r/2===u+s/2},wl=function(e,n){var i;return $t.some(function(o){var l=o[Ee].options.emptyInsertThreshold;if(!(!l||_n(o))){var r=re(o),u=e>=r.left-l&&e<=r.right+l,a=n>=r.top-l&&n<=r.bottom+l;if(u&&a)return i=o}}),i},Wi=function(e){function n(l,r){return function(u,a,s,c){var d=u.options.group.name&&a.options.group.name&&u.options.group.name===a.options.group.name;if(l==null&&(r||d))return!0;if(l==null||l===!1)return!1;if(r&&l==="clone")return l;if(typeof l=="function")return n(l(u,a,s,c),r)(u,a,s,c);var f=(r?u:a).options.group.name;return l===!0||typeof l=="string"&&l===f||l.join&&l.indexOf(f)>-1}}var i={},o=e.group;(!o||Vt(o)!="object")&&(o={name:o}),i.name=o.name,i.checkPull=n(o.pull,!0),i.checkPut=n(o.put),i.revertClone=o.revertClone,e.group=i},qi=function(){!Ri&&H&&B(H,"display","none")},zi=function(){!Ri&&H&&B(H,"display","")};on&&!ki&&document.addEventListener("click",function(t){if(Jt)return t.preventDefault(),t.stopPropagation&&t.stopPropagation(),t.stopImmediatePropagation&&t.stopImmediatePropagation(),Jt=!1,!1},!0);var rt=function(e){if(P){e=e.touches?e.touches[0]:e;var n=wl(e.clientX,e.clientY);if(n){var i={};for(var o in e)e.hasOwnProperty(o)&&(i[o]=e[o]);i.target=i.rootEl=n,i.preventDefault=void 0,i.stopPropagation=void 0,n[Ee]._onDragOver(i)}}},El=function(e){P&&P.parentNode[Ee]._isOutsideThisEl(e.target)};function N(t,e){if(!(t&&t.nodeType&&t.nodeType===1))throw"Sortable: `el` must be an HTMLElement, not ".concat({}.toString.call(t));this.el=t,this.options=e=je({},e),t[Ee]=this;var n={group:null,sort:!0,disabled:!1,store:null,handle:null,draggable:/^[uo]l$/i.test(t.nodeName)?">li":">*",swapThreshold:1,invertSwap:!1,invertedSwapThreshold:null,removeCloneOnHide:!0,direction:function(){return Hi(t,this.options)},ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",dragClass:"sortable-drag",ignore:"a, img",filter:null,preventOnFilter:!0,animation:0,easing:null,setData:function(r,u){r.setData("Text",u.textContent)},dropBubble:!1,dragoverBubble:!1,dataIdAttr:"data-id",delay:0,delayOnTouchOnly:!1,touchStartThreshold:(Number.parseInt?Number:window).parseInt(window.devicePixelRatio,10)||1,forceFallback:!1,fallbackClass:"sortable-fallback",fallbackOnBody:!1,fallbackTolerance:0,fallbackOffset:{x:0,y:0},supportPointer:N.supportPointer!==!1&&"PointerEvent"in window&&!kt,emptyInsertThreshold:5};Pt.initializePlugins(this,t,n);for(var i in n)!(i in e)&&(e[i]=n[i]);Wi(e);for(var o in this)o.charAt(0)==="_"&&typeof this[o]=="function"&&(this[o]=this[o].bind(this));this.nativeDraggable=e.forceFallback?!1:yl,this.nativeDraggable&&(this.options.touchStartThreshold=1),e.supportPointer?K(t,"pointerdown",this._onTapStart):(K(t,"mousedown",this._onTapStart),K(t,"touchstart",this._onTapStart)),this.nativeDraggable&&(K(t,"dragover",this),K(t,"dragenter",this)),$t.push(this.el),e.store&&e.store.get&&this.sort(e.store.get(this)||[]),je(this,hl())}N.prototype={constructor:N,_isOutsideThisEl:function(e){!this.el.contains(e)&&e!==this.el&&(bt=null)},_getDirection:function(e,n){return typeof this.options.direction=="function"?this.options.direction.call(this,e,n,P):this.options.direction},_onTapStart:function(e){if(e.cancelable){var n=this,i=this.el,o=this.options,l=o.preventOnFilter,r=e.type,u=e.touches&&e.touches[0]||e.pointerType&&e.pointerType==="touch"&&e,a=(u||e).target,s=e.target.shadowRoot&&(e.path&&e.path[0]||e.composedPath&&e.composedPath()[0])||a,c=o.filter;if(Al(i),!P&&!(/mousedown|pointerdown/.test(r)&&e.button!==0||o.disabled)&&!s.isContentEditable&&!(!this.nativeDraggable&&kt&&a&&a.tagName.toUpperCase()==="SELECT")&&(a=Le(a,o.draggable,i,!1),!(a&&a.animated)&&Kt!==a)){if(gt=Ce(a),Tt=Ce(a,o.draggable),typeof c=="function"){if(c.call(this,e,a,this)){me({sortable:n,rootEl:s,name:"filter",targetEl:a,toEl:i,fromEl:i}),be("filter",n,{evt:e}),l&&e.cancelable&&e.preventDefault();return}}else if(c&&(c=c.split(",").some(function(d){if(d=Le(s,d.trim(),i,!1),d)return me({sortable:n,rootEl:d,name:"filter",targetEl:a,fromEl:i,toEl:i}),be("filter",n,{evt:e}),!0}),c)){l&&e.cancelable&&e.preventDefault();return}o.handle&&!Le(s,o.handle,i,!1)||this._prepareDragStart(e,u,a)}}},_prepareDragStart:function(e,n,i){var o=this,l=o.el,r=o.options,u=l.ownerDocument,a;if(i&&!P&&i.parentNode===l){var s=re(i);if(te=l,P=i,le=P.parentNode,ot=P.nextSibling,Kt=i,Zt=r.group,N.dragged=P,lt={target:P,clientX:(n||e).clientX,clientY:(n||e).clientY},Ni=lt.clientX-s.left,xi=lt.clientY-s.top,this._lastX=(n||e).clientX,this._lastY=(n||e).clientY,P.style["will-change"]="all",a=function(){if(be("delayEnded",o,{evt:e}),N.eventCanceled){o._onDrop();return}o._disableDelayedDragEvents(),!Si&&o.nativeDraggable&&(P.draggable=!0),o._triggerDragStart(e,n),me({sortable:o,name:"choose",originalEvent:e}),we(P,r.chosenClass,!0)},r.ignore.split(",").forEach(function(c){Ti(P,c.trim(),Pn)}),K(u,"dragover",rt),K(u,"mousemove",rt),K(u,"touchmove",rt),K(u,"mouseup",o._onDrop),K(u,"touchend",o._onDrop),K(u,"touchcancel",o._onDrop),Si&&this.nativeDraggable&&(this.options.touchStartThreshold=4,P.draggable=!0),be("delayStart",this,{evt:e}),r.delay&&(!r.delayOnTouchOnly||n)&&(!this.nativeDraggable||!(Dt||Ue))){if(N.eventCanceled){this._onDrop();return}K(u,"mouseup",o._disableDelayedDrag),K(u,"touchend",o._disableDelayedDrag),K(u,"touchcancel",o._disableDelayedDrag),K(u,"mousemove",o._delayedDragTouchMoveHandler),K(u,"touchmove",o._delayedDragTouchMoveHandler),r.supportPointer&&K(u,"pointermove",o._delayedDragTouchMoveHandler),o._dragStartTimer=setTimeout(a,r.delay)}else a()}},_delayedDragTouchMoveHandler:function(e){var n=e.touches?e.touches[0]:e;Math.max(Math.abs(n.clientX-this._lastX),Math.abs(n.clientY-this._lastY))>=Math.floor(this.options.touchStartThreshold/(this.nativeDraggable&&window.devicePixelRatio||1))&&this._disableDelayedDrag()},_disableDelayedDrag:function(){P&&Pn(P),clearTimeout(this._dragStartTimer),this._disableDelayedDragEvents()},_disableDelayedDragEvents:function(){var e=this.el.ownerDocument;Q(e,"mouseup",this._disableDelayedDrag),Q(e,"touchend",this._disableDelayedDrag),Q(e,"touchcancel",this._disableDelayedDrag),Q(e,"mousemove",this._delayedDragTouchMoveHandler),Q(e,"touchmove",this._delayedDragTouchMoveHandler),Q(e,"pointermove",this._delayedDragTouchMoveHandler)},_triggerDragStart:function(e,n){n=n||e.pointerType=="touch"&&e,!this.nativeDraggable||n?this.options.supportPointer?K(document,"pointermove",this._onTouchMove):n?K(document,"touchmove",this._onTouchMove):K(document,"mousemove",this._onTouchMove):(K(P,"dragend",this),K(te,"dragstart",this._onDragStart));try{document.selection?an(function(){document.selection.empty()}):window.getSelection().removeAllRanges()}catch{}},_dragStarted:function(e,n){if(vt=!1,te&&P){be("dragStarted",this,{evt:n}),this.nativeDraggable&&K(document,"dragover",El);var i=this.options;!e&&we(P,i.dragClass,!1),we(P,i.ghostClass,!0),N.active=this,e&&this._appendGhost(),me({sortable:this,name:"start",originalEvent:n})}else this._nulling()},_emulateDragOver:function(){if(Ae){this._lastX=Ae.clientX,this._lastY=Ae.clientY,qi();for(var e=document.elementFromPoint(Ae.clientX,Ae.clientY),n=e;e&&e.shadowRoot&&(e=e.shadowRoot.elementFromPoint(Ae.clientX,Ae.clientY),e!==n);)n=e;if(P.parentNode[Ee]._isOutsideThisEl(e),n)do{if(n[Ee]){var i=void 0;if(i=n[Ee]._onDragOver({clientX:Ae.clientX,clientY:Ae.clientY,target:e,rootEl:n}),i&&!this.options.dragoverBubble)break}e=n}while(n=n.parentNode);zi()}},_onTouchMove:function(e){if(lt){var n=this.options,i=n.fallbackTolerance,o=n.fallbackOffset,l=e.touches?e.touches[0]:e,r=H&&pt(H,!0),u=H&&r&&r.a,a=H&&r&&r.d,s=ln&&fe&&Ai(fe),c=(l.clientX-lt.clientX+o.x)/(u||1)+(s?s[0]-kn[0]:0)/(u||1),d=(l.clientY-lt.clientY+o.y)/(a||1)+(s?s[1]-kn[1]:0)/(a||1);if(!N.active&&!vt){if(i&&Math.max(Math.abs(l.clientX-this._lastX),Math.abs(l.clientY-this._lastY))<i)return;this._onDragStart(e,!0)}if(H){r?(r.e+=c-(Sn||0),r.f+=d-(Dn||0)):r={a:1,b:0,c:0,d:1,e:c,f:d};var f="matrix(".concat(r.a,",").concat(r.b,",").concat(r.c,",").concat(r.d,",").concat(r.e,",").concat(r.f,")");B(H,"webkitTransform",f),B(H,"mozTransform",f),B(H,"msTransform",f),B(H,"transform",f),Sn=c,Dn=d,Ae=l}e.cancelable&&e.preventDefault()}},_appendGhost:function(){if(!H){var e=this.options.fallbackOnBody?document.body:te,n=re(P,!0,ln,!0,e),i=this.options;if(ln){for(fe=e;B(fe,"position")==="static"&&B(fe,"transform")==="none"&&fe!==document;)fe=fe.parentNode;fe!==document.body&&fe!==document.documentElement?(fe===document&&(fe=Ne()),n.top+=fe.scrollTop,n.left+=fe.scrollLeft):fe=Ne(),kn=Ai(fe)}H=P.cloneNode(!0),we(H,i.ghostClass,!1),we(H,i.fallbackClass,!0),we(H,i.dragClass,!0),B(H,"transition",""),B(H,"transform",""),B(H,"box-sizing","border-box"),B(H,"margin",0),B(H,"top",n.top),B(H,"left",n.left),B(H,"width",n.width),B(H,"height",n.height),B(H,"opacity","0.8"),B(H,"position",ln?"absolute":"fixed"),B(H,"zIndex","100000"),B(H,"pointerEvents","none"),N.ghost=H,e.appendChild(H),B(H,"transform-origin",Ni/parseInt(H.style.width)*100+"% "+xi/parseInt(H.style.height)*100+"%")}},_onDragStart:function(e,n){var i=this,o=e.dataTransfer,l=i.options;if(be("dragStart",this,{evt:e}),N.eventCanceled){this._onDrop();return}be("setupClone",this),N.eventCanceled||(ne=Mi(P),ne.removeAttribute("id"),ne.draggable=!1,ne.style["will-change"]="",this._hideClone(),we(ne,this.options.chosenClass,!1),N.clone=ne),i.cloneId=an(function(){be("clone",i),!N.eventCanceled&&(i.options.removeCloneOnHide||te.insertBefore(ne,P),i._hideClone(),me({sortable:i,name:"clone"}))}),!n&&we(P,l.dragClass,!0),n?(Jt=!0,i._loopId=setInterval(i._emulateDragOver,50)):(Q(document,"mouseup",i._onDrop),Q(document,"touchend",i._onDrop),Q(document,"touchcancel",i._onDrop),o&&(o.effectAllowed="move",l.setData&&l.setData.call(i,o,P)),K(document,"drop",i),B(P,"transform","translateZ(0)")),vt=!0,i._dragStartId=an(i._dragStarted.bind(i,n,e)),K(document,"selectstart",i),Lt=!0,kt&&B(document.body,"user-select","none")},_onDragOver:function(e){var n=this.el,i=e.target,o,l,r,u=this.options,a=u.group,s=N.active,c=Zt===a,d=u.sort,f=ce||s,p,h=this,b=!1;if(Cn)return;function m(xe,yt){be(xe,h,Fe({evt:e,isOwner:c,axis:p?"vertical":"horizontal",revert:r,dragRect:o,targetRect:l,canSort:d,fromSortable:f,target:i,completed:C,onMove:function(Ve,at){return rn(te,n,P,o,Ve,re(Ve),e,at)},changed:v},yt))}function y(){m("dragOverAnimationCapture"),h.captureAnimationState(),h!==f&&f.captureAnimationState()}function C(xe){return m("dragOverCompleted",{insertion:xe}),xe&&(c?s._hideClone():s._showClone(h),h!==f&&(we(P,ce?ce.options.ghostClass:s.options.ghostClass,!1),we(P,u.ghostClass,!0)),ce!==h&&h!==N.active?ce=h:h===N.active&&ce&&(ce=null),f===h&&(h._ignoreWhileAnimating=i),h.animateAll(function(){m("dragOverAnimationComplete"),h._ignoreWhileAnimating=null}),h!==f&&(f.animateAll(),f._ignoreWhileAnimating=null)),(i===P&&!P.animated||i===n&&!i.animated)&&(bt=null),!u.dragoverBubble&&!e.rootEl&&i!==document&&(P.parentNode[Ee]._isOutsideThisEl(e.target),!xe&&rt(e)),!u.dragoverBubble&&e.stopPropagation&&e.stopPropagation(),b=!0}function v(){Se=Ce(P),tt=Ce(P,u.draggable),me({sortable:h,name:"change",toEl:n,newIndex:Se,newDraggableIndex:tt,originalEvent:e})}if(e.preventDefault!==void 0&&e.cancelable&&e.preventDefault(),i=Le(i,u.draggable,n,!0),m("dragOver"),N.eventCanceled)return b;if(P.contains(e.target)||i.animated&&i.animatingX&&i.animatingY||h._ignoreWhileAnimating===i)return C(!1);if(Jt=!1,s&&!u.disabled&&(c?d||(r=le!==te):ce===this||(this.lastPutMode=Zt.checkPull(this,s,P,e))&&a.checkPut(this,s,P,e))){if(p=this._getDirection(e,i)==="vertical",o=re(P),m("dragOverValid"),N.eventCanceled)return b;if(r)return le=te,y(),this._hideClone(),m("revert"),N.eventCanceled||(ot?te.insertBefore(P,ot):te.appendChild(P)),C(!0);var E=_n(n,u.draggable);if(!E||Cl(e,p,this)&&!E.animated){if(E===P)return C(!1);if(E&&n===e.target&&(i=E),i&&(l=re(i)),rn(te,n,P,o,i,l,e,!!i)!==!1)return y(),E&&E.nextSibling?n.insertBefore(P,E.nextSibling):n.appendChild(P),le=n,v(),C(!0)}else if(E&&kl(e,p,this)){var w=ht(n,0,u,!0);if(w===P)return C(!1);if(i=w,l=re(i),rn(te,n,P,o,i,l,e,!1)!==!1)return y(),n.insertBefore(P,w),le=n,v(),C(!0)}else if(i.parentNode===n){l=re(i);var k=0,D,R=P.parentNode!==n,T=!_l(P.animated&&P.toRect||o,i.animated&&i.toRect||l,p),J=p?"top":"left",Z=Li(i,"top","top")||Li(P,"top","top"),z=Z?Z.scrollTop:void 0;bt!==i&&(D=l[J],It=!1,en=!T&&u.invertSwap||R),k=Pl(e,i,l,p,T?1:u.swapThreshold,u.invertedSwapThreshold==null?u.swapThreshold:u.invertedSwapThreshold,en,bt===i);var j;if(k!==0){var U=Ce(P);do U-=k,j=le.children[U];while(j&&(B(j,"display")==="none"||j===H))}if(k===0||j===i)return C(!1);bt=i,At=k;var M=i.nextElementSibling,Y=!1;Y=k===1;var de=rn(te,n,P,o,i,l,e,Y);if(de!==!1)return(de===1||de===-1)&&(Y=de===1),Cn=!0,setTimeout(Dl,30),y(),Y&&!M?n.appendChild(P):i.parentNode.insertBefore(P,Y?M:i),Z&&Oi(Z,0,z-Z.scrollTop),le=P.parentNode,D!==void 0&&!en&&(tn=Math.abs(D-re(i)[J])),v(),C(!0)}if(n.contains(P))return C(!1)}return!1},_ignoreWhileAnimating:null,_offMoveEvents:function(){Q(document,"mousemove",this._onTouchMove),Q(document,"touchmove",this._onTouchMove),Q(document,"pointermove",this._onTouchMove),Q(document,"dragover",rt),Q(document,"mousemove",rt),Q(document,"touchmove",rt)},_offUpEvents:function(){var e=this.el.ownerDocument;Q(e,"mouseup",this._onDrop),Q(e,"touchend",this._onDrop),Q(e,"pointerup",this._onDrop),Q(e,"touchcancel",this._onDrop),Q(document,"selectstart",this)},_onDrop:function(e){var n=this.el,i=this.options;if(Se=Ce(P),tt=Ce(P,i.draggable),be("drop",this,{evt:e}),le=P&&P.parentNode,Se=Ce(P),tt=Ce(P,i.draggable),N.eventCanceled){this._nulling();return}vt=!1,en=!1,It=!1,clearInterval(this._loopId),clearTimeout(this._dragStartTimer),Tn(this.cloneId),Tn(this._dragStartId),this.nativeDraggable&&(Q(document,"drop",this),Q(n,"dragstart",this._onDragStart)),this._offMoveEvents(),this._offUpEvents(),kt&&B(document.body,"user-select",""),B(P,"transform",""),e&&(Lt&&(e.cancelable&&e.preventDefault(),!i.dropBubble&&e.stopPropagation()),H&&H.parentNode&&H.parentNode.removeChild(H),(te===le||ce&&ce.lastPutMode!=="clone")&&ne&&ne.parentNode&&ne.parentNode.removeChild(ne),P&&(this.nativeDraggable&&Q(P,"dragend",this),Pn(P),P.style["will-change"]="",Lt&&!vt&&we(P,ce?ce.options.ghostClass:this.options.ghostClass,!1),we(P,this.options.chosenClass,!1),me({sortable:this,name:"unchoose",toEl:le,newIndex:null,newDraggableIndex:null,originalEvent:e}),te!==le?(Se>=0&&(me({rootEl:le,name:"add",toEl:le,fromEl:te,originalEvent:e}),me({sortable:this,name:"remove",toEl:le,originalEvent:e}),me({rootEl:le,name:"sort",toEl:le,fromEl:te,originalEvent:e}),me({sortable:this,name:"sort",toEl:le,originalEvent:e})),ce&&ce.save()):Se!==gt&&Se>=0&&(me({sortable:this,name:"update",toEl:le,originalEvent:e}),me({sortable:this,name:"sort",toEl:le,originalEvent:e})),N.active&&((Se==null||Se===-1)&&(Se=gt,tt=Tt),me({sortable:this,name:"end",toEl:le,originalEvent:e}),this.save()))),this._nulling()},_nulling:function(){be("nulling",this),te=P=le=H=ot=ne=Kt=et=lt=Ae=Lt=Se=tt=gt=Tt=bt=At=ce=Zt=N.dragged=N.ghost=N.clone=N.active=null,nn.forEach(function(e){e.checked=!0}),nn.length=Sn=Dn=0},handleEvent:function(e){switch(e.type){case"drop":case"dragend":this._onDrop(e);break;case"dragenter":case"dragover":P&&(this._onDragOver(e),Sl(e));break;case"selectstart":e.preventDefault();break}},toArray:function(){for(var e=[],n,i=this.el.children,o=0,l=i.length,r=this.options;o<l;o++)n=i[o],Le(n,r.draggable,this.el,!1)&&e.push(n.getAttribute(r.dataIdAttr)||Ll(n));return e},sort:function(e,n){var i={},o=this.el;this.toArray().forEach(function(l,r){var u=o.children[r];Le(u,this.options.draggable,o,!1)&&(i[l]=u)},this),n&&this.captureAnimationState(),e.forEach(function(l){i[l]&&(o.removeChild(i[l]),o.appendChild(i[l]))}),n&&this.animateAll()},save:function(){var e=this.options.store;e&&e.set&&e.set(this)},closest:function(e,n){return Le(e,n||this.options.draggable,this.el,!1)},option:function(e,n){var i=this.options;if(n===void 0)return i[e];var o=Pt.modifyOption(this,e,n);typeof o<"u"?i[e]=o:i[e]=n,e==="group"&&Wi(i)},destroy:function(){be("destroy",this);var e=this.el;e[Ee]=null,Q(e,"mousedown",this._onTapStart),Q(e,"touchstart",this._onTapStart),Q(e,"pointerdown",this._onTapStart),this.nativeDraggable&&(Q(e,"dragover",this),Q(e,"dragenter",this)),Array.prototype.forEach.call(e.querySelectorAll("[draggable]"),function(n){n.removeAttribute("draggable")}),this._onDrop(),this._disableDelayedDragEvents(),$t.splice($t.indexOf(this.el),1),this.el=e=null},_hideClone:function(){if(!et){if(be("hideClone",this),N.eventCanceled)return;B(ne,"display","none"),this.options.removeCloneOnHide&&ne.parentNode&&ne.parentNode.removeChild(ne),et=!0}},_showClone:function(e){if(e.lastPutMode!=="clone"){this._hideClone();return}if(et){if(be("showClone",this),N.eventCanceled)return;P.parentNode==te&&!this.options.group.revertClone?te.insertBefore(ne,P):ot?te.insertBefore(ne,ot):te.appendChild(ne),this.options.group.revertClone&&this.animate(P,ne),B(ne,"display",""),et=!1}}};function Sl(t){t.dataTransfer&&(t.dataTransfer.dropEffect="move"),t.cancelable&&t.preventDefault()}function rn(t,e,n,i,o,l,r,u){var a,s=t[Ee],c=s.options.onMove,d;return window.CustomEvent&&!Ue&&!Dt?a=new CustomEvent("move",{bubbles:!0,cancelable:!0}):(a=document.createEvent("Event"),a.initEvent("move",!0,!0)),a.to=e,a.from=t,a.dragged=n,a.draggedRect=i,a.related=o||e,a.relatedRect=l||re(e),a.willInsertAfter=u,a.originalEvent=r,t.dispatchEvent(a),c&&(d=c.call(s,a,r)),d}function Pn(t){t.draggable=!1}function Dl(){Cn=!1}function kl(t,e,n){var i=re(ht(n.el,0,n.options,!0)),o=Fi(n.el,n.options,H),l=10;return e?t.clientX<o.left-l||t.clientY<i.top&&t.clientX<i.right:t.clientY<o.top-l||t.clientY<i.bottom&&t.clientX<i.left}function Cl(t,e,n){var i=re(_n(n.el,n.options.draggable)),o=Fi(n.el,n.options,H),l=10;return e?t.clientX>o.right+l||t.clientY>i.bottom&&t.clientX>i.left:t.clientY>o.bottom+l||t.clientX>i.right&&t.clientY>i.top}function Pl(t,e,n,i,o,l,r,u){var a=i?t.clientY:t.clientX,s=i?n.height:n.width,c=i?n.top:n.left,d=i?n.bottom:n.right,f=!1;if(!r){if(u&&tn<s*o){if(!It&&(At===1?a>c+s*l/2:a<d-s*l/2)&&(It=!0),It)f=!0;else if(At===1?a<c+tn:a>d-tn)return-At}else if(a>c+s*(1-o)/2&&a<d-s*(1-o)/2)return Tl(e)}return f=f||r,f&&(a<c+s*l/2||a>d-s*l/2)?a>c+s/2?1:-1:0}function Tl(t){return Ce(P)<Ce(t)?1:-1}function Ll(t){for(var e=t.tagName+t.className+t.src+t.href+t.textContent,n=e.length,i=0;n--;)i+=e.charCodeAt(n);return i.toString(36)}function Al(t){nn.length=0;for(var e=t.getElementsByTagName("input"),n=e.length;n--;){var i=e[n];i.checked&&nn.push(i)}}function an(t){return setTimeout(t,0)}function Tn(t){return clearTimeout(t)}on&&K(document,"touchmove",function(t){(N.active||vt)&&t.cancelable&&t.preventDefault()}),N.utils={on:K,off:Q,css:B,find:Ti,is:function(e,n){return!!Le(e,n,e,!1)},extend:fl,throttle:Ii,closest:Le,toggleClass:we,clone:Mi,index:Ce,nextTick:an,cancelNextTick:Tn,detectDirection:Hi,getChild:ht},N.get=function(t){return t[Ee]},N.mount=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];e[0].constructor===Array&&(e=e[0]),e.forEach(function(i){if(!i.prototype||!i.prototype.constructor)throw"Sortable: Mounted plugin must be a constructor function, not ".concat({}.toString.call(i));i.utils&&(N.utils=Fe(Fe({},N.utils),i.utils)),Pt.mount(i)})},N.create=function(t,e){return new N(t,e)},N.version=ul;var ae=[],Ot,Ln,An=!1,In,On,sn,Mt;function Il(){function t(){this.defaults={scroll:!0,forceAutoScrollFallback:!1,scrollSensitivity:30,scrollSpeed:10,bubbleScroll:!0};for(var e in this)e.charAt(0)==="_"&&typeof this[e]=="function"&&(this[e]=this[e].bind(this))}return t.prototype={dragStarted:function(n){var i=n.originalEvent;this.sortable.nativeDraggable?K(document,"dragover",this._handleAutoScroll):this.options.supportPointer?K(document,"pointermove",this._handleFallbackAutoScroll):i.touches?K(document,"touchmove",this._handleFallbackAutoScroll):K(document,"mousemove",this._handleFallbackAutoScroll)},dragOverCompleted:function(n){var i=n.originalEvent;!this.options.dragOverBubble&&!i.rootEl&&this._handleAutoScroll(i)},drop:function(){this.sortable.nativeDraggable?Q(document,"dragover",this._handleAutoScroll):(Q(document,"pointermove",this._handleFallbackAutoScroll),Q(document,"touchmove",this._handleFallbackAutoScroll),Q(document,"mousemove",this._handleFallbackAutoScroll)),Yi(),un(),pl()},nulling:function(){sn=Ln=Ot=An=Mt=In=On=null,ae.length=0},_handleFallbackAutoScroll:function(n){this._handleAutoScroll(n,!0)},_handleAutoScroll:function(n,i){var o=this,l=(n.touches?n.touches[0]:n).clientX,r=(n.touches?n.touches[0]:n).clientY,u=document.elementFromPoint(l,r);if(sn=n,i||this.options.forceAutoScrollFallback||Dt||Ue||kt){Mn(n,this.options,u,i);var a=$e(u,!0);An&&(!Mt||l!==In||r!==On)&&(Mt&&Yi(),Mt=setInterval(function(){var s=$e(document.elementFromPoint(l,r),!0);s!==a&&(a=s,un()),Mn(n,o.options,s,i)},10),In=l,On=r)}else{if(!this.options.bubbleScroll||$e(u,!0)===Ne()){un();return}Mn(n,this.options,$e(u,!1),!1)}}},je(t,{pluginName:"scroll",initializeByDefault:!0})}function un(){ae.forEach(function(t){clearInterval(t.pid)}),ae=[]}function Yi(){clearInterval(Mt)}var Mn=Ii(function(t,e,n,i){if(e.scroll){var o=(t.touches?t.touches[0]:t).clientX,l=(t.touches?t.touches[0]:t).clientY,r=e.scrollSensitivity,u=e.scrollSpeed,a=Ne(),s=!1,c;Ln!==n&&(Ln=n,un(),Ot=e.scroll,c=e.scrollFn,Ot===!0&&(Ot=$e(n,!0)));var d=0,f=Ot;do{var p=f,h=re(p),b=h.top,m=h.bottom,y=h.left,C=h.right,v=h.width,E=h.height,w=void 0,k=void 0,D=p.scrollWidth,R=p.scrollHeight,T=B(p),J=p.scrollLeft,Z=p.scrollTop;p===a?(w=v<D&&(T.overflowX==="auto"||T.overflowX==="scroll"||T.overflowX==="visible"),k=E<R&&(T.overflowY==="auto"||T.overflowY==="scroll"||T.overflowY==="visible")):(w=v<D&&(T.overflowX==="auto"||T.overflowX==="scroll"),k=E<R&&(T.overflowY==="auto"||T.overflowY==="scroll"));var z=w&&(Math.abs(C-o)<=r&&J+v<D)-(Math.abs(y-o)<=r&&!!J),j=k&&(Math.abs(m-l)<=r&&Z+E<R)-(Math.abs(b-l)<=r&&!!Z);if(!ae[d])for(var U=0;U<=d;U++)ae[U]||(ae[U]={});(ae[d].vx!=z||ae[d].vy!=j||ae[d].el!==p)&&(ae[d].el=p,ae[d].vx=z,ae[d].vy=j,clearInterval(ae[d].pid),(z!=0||j!=0)&&(s=!0,ae[d].pid=setInterval((function(){i&&this.layer===0&&N.active._onTouchMove(sn);var M=ae[this.layer].vy?ae[this.layer].vy*u:0,Y=ae[this.layer].vx?ae[this.layer].vx*u:0;typeof c=="function"&&c.call(N.dragged.parentNode[Ee],Y,M,t,sn,ae[this.layer].el)!=="continue"||Oi(ae[this.layer].el,Y,M)}).bind({layer:d}),24))),d++}while(e.bubbleScroll&&f!==a&&(f=$e(f,!1)));An=s}},30),Xi=function(e){var n=e.originalEvent,i=e.putSortable,o=e.dragEl,l=e.activeSortable,r=e.dispatchSortableEvent,u=e.hideGhostForTarget,a=e.unhideGhostForTarget;if(n){var s=i||l;u();var c=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:n,d=document.elementFromPoint(c.clientX,c.clientY);a(),s&&!s.el.contains(d)&&(r("spill"),this.onSpill({dragEl:o,putSortable:i}))}};function Fn(){}Fn.prototype={startIndex:null,dragStart:function(e){var n=e.oldDraggableIndex;this.startIndex=n},onSpill:function(e){var n=e.dragEl,i=e.putSortable;this.sortable.captureAnimationState(),i&&i.captureAnimationState();var o=ht(this.sortable.el,this.startIndex,this.options);o?this.sortable.el.insertBefore(n,o):this.sortable.el.appendChild(n),this.sortable.animateAll(),i&&i.animateAll()},drop:Xi},je(Fn,{pluginName:"revertOnSpill"});function Nn(){}Nn.prototype={onSpill:function(e){var n=e.dragEl,i=e.putSortable,o=i||this.sortable;o.captureAnimationState(),n.parentNode&&n.parentNode.removeChild(n),o.animateAll()},drop:Xi},je(Nn,{pluginName:"removeOnSpill"}),N.mount(new Il),N.mount(Nn,Fn);function ji(t,e,n){const i=t.slice();return i[16]=e[n],i}function Gi(t,e,n){const i=t.slice();return i[19]=e[n],i}function Ui(t){let e,n,i,o;function l(){return t[10](t[19])}return{c(){e=S("div"),n=S("a"),n.innerHTML='<i class="fas fa-pencil-alt fa-sm"></i>',g(n,"href","javascript:"),g(n,"data-action","editField"),g(n,"class","edit-field svelte-1mx8y43"),g(e,"class","right svelte-1mx8y43")},m(r,u){V(r,e,u),_(e,n),i||(o=oe(n,"click",l),i=!0)},p(r,u){t=r},d(r){r&&G(e),i=!1,o()}}}function Vi(t,e){let n,i,o,l=e[19].label+"",r,u,a,s=e[2].editable&&Ui(e),c=[e[9](e[19])],d={};for(let f=0;f<c.length;f+=1)d=dn(d,c[f]);return{key:t,first:null,c(){n=S("li"),i=S("div"),o=S("label"),r=ue(l),u=W(),s&&s.c(),a=W(),g(o,"class","svelte-1mx8y43"),g(i,"class","left svelte-1mx8y43"),Wt(n,d),qt(n,"svelte-1mx8y43",!0),this.first=n},m(f,p){V(f,n,p),_(n,i),_(i,o),_(o,r),_(n,u),s&&s.m(n,null),_(n,a)},p(f,p){e=f,p&1&&l!==(l=e[19].label+"")&&Re(r,l),e[2].editable?s?s.p(e,p):(s=Ui(e),s.c(),s.m(n,a)):s&&(s.d(1),s=null),Wt(n,d=ui(c,[p&1&&e[9](e[19])])),qt(n,"svelte-1mx8y43",!0)},d(f){f&&G(n),s&&s.d()}}}function Qi(t,e){let n,i,o,l=e[16].label+"",r,u,a=[e[9](e[16])],s={};for(let c=0;c<a.length;c+=1)s=dn(s,a[c]);return{key:t,first:null,c(){n=S("li"),i=S("div"),o=S("label"),r=ue(l),u=W(),g(o,"class","svelte-1mx8y43"),g(i,"class","left svelte-1mx8y43"),Wt(n,s),qt(n,"svelte-1mx8y43",!0),this.first=n},m(c,d){V(c,n,d),_(n,i),_(i,o),_(o,r),_(n,u)},p(c,d){e=c,d&2&&l!==(l=e[16].label+"")&&Re(r,l),Wt(n,s=ui(a,[d&2&&e[9](e[16])])),qt(n,"svelte-1mx8y43",!0)},d(c){c&&G(n)}}}function Ol(t){let e,n,i,o,l,r,u=[],a=new Map,s,c,d,f,p,h,b=[],m=new Map,y=ve(t[0]);const C=w=>w[19].name;for(let w=0;w<y.length;w+=1){let k=Gi(t,y,w),D=C(k);a.set(D,u[w]=Vi(D,k))}let v=ve(t[1]);const E=w=>w[16].name;for(let w=0;w<v.length;w+=1){let k=ji(t,v,w),D=E(k);m.set(D,b[w]=Qi(D,k))}return{c(){e=S("div"),n=S("div"),i=S("div"),o=S("header"),o.textContent=`${x.translate("Enabled","labels","Admin")}`,l=W(),r=S("ul");for(let w=0;w<u.length;w+=1)u[w].c();s=W(),c=S("div"),d=S("div"),f=S("header"),f.textContent=`${x.translate("Disabled","labels","Admin")}`,p=W(),h=S("ul");for(let w=0;w<b.length;w+=1)b[w].c();g(r,"class","enabled connected svelte-1mx8y43"),g(i,"class","well"),g(n,"class","col-sm-5"),g(h,"class","disabled connected svelte-1mx8y43"),g(d,"class","well"),g(c,"class","col-sm-5"),g(e,"id","layout"),g(e,"class","row")},m(w,k){V(w,e,k),_(e,n),_(n,i),_(i,o),_(i,l),_(i,r);for(let D=0;D<u.length;D+=1)u[D]&&u[D].m(r,null);_(e,s),_(e,c),_(c,d),_(d,f),_(d,p),_(d,h);for(let D=0;D<b.length;D+=1)b[D]&&b[D].m(h,null);t[11](e)},p(w,k){k&645&&(y=ve(w[0]),u=Gt(u,k,C,1,w,y,a,r,jt,Vi,null,Gi)),k&514&&(v=ve(w[1]),b=Gt(b,k,E,1,w,v,m,h,jt,Qi,null,ji))},d(w){w&&G(e);for(let k=0;k<u.length;k+=1)u[k].d();for(let k=0;k<b.length;k+=1)b[k].d();t[11](null)}}}function Ml(t){let e,n,i={params:t[2],validate:t[8],fetch:t[4],loadLayout:t[3],$$slots:{default:[Ol]},$$scope:{ctx:t}};return e=new wi({props:i}),t[12](e),{c(){Je(e.$$.fragment)},m(o,l){qe(e,o,l),n=!0},p(o,[l]){const r={};l&4&&(r.params=o[2]),l&16&&(r.fetch=o[4]),l&8&&(r.loadLayout=o[3]),l&4194343&&(r.$$scope={dirty:l,ctx:o}),e.$set(r)},i(o){n||(Te(e.$$.fragment,o),n=!0)},o(o){We(e.$$.fragment,o),n=!1},d(o){t[12](null),ze(e,o)}}}function Fl(t){return t.toLowerCase()}function Ki(t,e){return t[e]}function Nl(t,e,n){let i,o,l,{params:r}=e,{enabledFields:u=[]}=e,{disabledFields:a=[]}=e,{loadLayout:s}=e,c;Yt(()=>{d()}),ii(()=>{o&&o.destroy(),l&&l.destroy()});function d(){const v={group:"fields",draggable:"li",animation:150};o=N.create(i.querySelector("ul.enabled"),{...v,onEnd(E){if(E.to.closest(".connected").classList.contains("enabled")){const[w]=u.splice(E.oldIndex,1);u.splice(E.newIndex,0,w)}else{const w=u[E.oldIndex];u.splice(E.oldIndex,1),a.splice(E.newIndex,0,w),n(1,a=[...a])}n(0,u=[...u])}}),l=N.create(i.querySelector("ul.disabled"),{...v,onEnd(E){if(E.to.closest(".connected").classList.contains("disabled")){const[w]=a.splice(E.oldIndex,1);a.splice(E.newIndex,0,w)}else{const w=a[E.oldIndex];a.splice(E.oldIndex,1),u.splice(E.newIndex,0,w),n(0,u=[...u])}n(1,a=[...a])}})}function f(v){r.openEditDialog(v,r.scope,r.dataAttributeList,r.dataAttributesDefs,E=>{n(0,u=u.map(w=>{if(w.name===v.name)for(let k in E)w[k]=E[k];return w}))})}let{fetch:p=()=>u}=e;function h(v){return v.length===0?(Ye.notify("Layout cannot be empty","error"),!1):!0}function b(v){const E={};return r.dataAttributeList.forEach(w=>{Ki(v,w)!=null&&(E[`data-${Fl(w)}`]=Ki(v,w))}),E}const m=v=>f(v);function y(v){He[v?"unshift":"push"](()=>{i=v,n(5,i)})}function C(v){He[v?"unshift":"push"](()=>{c=v,n(6,c)})}return t.$$set=v=>{"params"in v&&n(2,r=v.params),"enabledFields"in v&&n(0,u=v.enabledFields),"disabledFields"in v&&n(1,a=v.disabledFields),"loadLayout"in v&&n(3,s=v.loadLayout),"fetch"in v&&n(4,p=v.fetch)},[u,a,r,s,p,i,c,f,h,b,m,y,C]}class xn extends ke{constructor(e){super(),De(this,e,Nl,Ml,_e,{params:2,enabledFields:0,disabledFields:1,loadLayout:3,fetch:4})}}function xl(t){let e,n,i={params:t[0],enabledFields:t[2],disabledFields:t[3],editable:Bl,loadLayout:t[4]};return e=new xn({props:i}),t[5](e),{c(){Je(e.$$.fragment)},m(o,l){qe(e,o,l),n=!0},p(o,[l]){const r={};l&1&&(r.params=o[0]),l&4&&(r.enabledFields=o[2]),l&8&&(r.disabledFields=o[3]),e.$set(r)},i(o){n||(Te(e.$$.fragment,o),n=!0)},o(o){We(e.$$.fragment,o),n=!1},d(o){t[5](null),ze(e,o)}}}let Bl=!0;function Rl(t){return!0}function Hl(t,e,n){let{params:i}=e;i.dataAttributeList||(i.dataAttributeList=["id","name","width","widthPx","link","notSortable","align","view","customLabel"]),i.dataAttributesDefs||(i.dataAttributesDefs={link:{type:"bool"},width:{type:"float"},notSortable:{type:"bool"},align:{type:"enum",options:["left","right"]},view:{type:"varchar",readOnly:!0},customLabel:{type:"varchar",readOnly:!0},widthPx:{type:"float"},name:{type:"varchar",readOnly:!0}});let o,l=[],r=[];const u=[],a=[];function s(p){St.create(i.scope,h=>{Xe.get(i.scope,i.type,i.layoutProfileId,b=>{p&&(c(h,b),p())},!1)})}function c(p,h){const b=Object.keys(p.defs.fields).filter(v=>Rl(p.getFieldParam(v,"type"))&&d(p,v)).sort((v,E)=>x.translate(v,"fields",i.scope).localeCompare(x.translate(E,"fields",i.scope))),m=[],y=[],C=[];n(2,l=h.map(v=>{const E=x.translate(v.name,"fields",i.scope);return y.includes(E)&&C.push(E),y.push(E),m.push(v.name),{...v,label:v.label||E}})),n(3,r=b.filter(v=>!m.includes(v)).map(v=>{const E=x.translate(v,"fields",i.scope);y.includes(E)&&C.push(E),y.push(E);const w={name:v,label:E},k=Me.get(["entityDefs",i.scope,"fields",v,"type"]);return k&&Me.get(["fields",k,"notSortable"])&&(w.notSortable=!0),w})),[l,r].forEach(v=>{v.forEach(E=>{C.includes(E.label)&&(E.label+=` (${E.name})`)})})}function d(p,h){if(u.includes(h)||a.includes(p.getFieldParam(h,"type")))return!1;const b=["disabled",`layout${Espo.utils.upperCaseFirst(i.type)}Disabled`];i.reelType&&b.push(`layout${Espo.utils.upperCaseFirst(i.reelType)}Disabled`);for(let m of b)if(p.getFieldParam(h,m))return!1;return!0}function f(p){He[p?"unshift":"push"](()=>{o=p,n(1,o)})}return t.$$set=p=>{"params"in p&&n(0,i=p.params)},[i,o,l,r,s,f]}class Zi extends ke{constructor(e){super(),De(this,e,Hl,xl,_e,{params:0})}}function Wl(t){let e,n,i={params:t[0],enabledFields:t[2],disabledFields:t[3],loadLayout:t[5],fetch:t[4]};return e=new xn({props:i}),t[7](e),{c(){Je(e.$$.fragment)},m(o,l){qe(e,o,l),n=!0},p(o,[l]){const r={};l&1&&(r.params=o[0]),l&4&&(r.enabledFields=o[2]),l&8&&(r.disabledFields=o[3]),e.$set(r)},i(o){n||(Te(e.$$.fragment,o),n=!0)},o(o){We(e.$$.fragment,o),n=!1},d(o){t[7](null),ze(e,o)}}}function ql(t,e,n){let{params:i}=e,{viewType:o="detail"}=e;i.dataAttributeList||(i.dataAttributeList=["id","name","style","sticked"]),i.dataAttributesDefs||(i.dataAttributesDefs={style:{type:"enum",options:["default","success","danger","primary","info","warning"],translation:"LayoutManager.options.style"},sticked:{type:"bool"},name:{readOnly:!0}});let l,r=[],u=[],a=()=>{let f={};return r.forEach(p=>{f[p.name]=p}),u.forEach(p=>{f[p.name]={...p,disabled:!0}}),f};function s(f){Xe.get(i.scope,i.type,i.layoutProfileId,p=>{f&&(c(p),f())},!1)}function c(f){let p=[],h={},b={};Me.get(["clientDefs",i.scope,"defaultSidePanel",o])!==!1&&!Me.get(["clientDefs",i.scope,"defaultSidePanelDisabled"])&&(p.push("default"),h.default="Default"),(Me.get(["clientDefs",i.scope,"sidePanels",o])||[]).forEach(m=>{m.name&&(p.push(m.name),m.label&&(h[m.name]=m.label),b[m.name]=m)}),n(3,u=[]),f=f||{},n(2,r=[]),p.forEach((m,y)=>{let C=!1,v=f[m]||{};v.disabled&&(C=!0);let E;if(h[m]?E=x.translate(h[m],"labels",i.scope):E=x.translate(m,"panels",i.scope),C)u.push({name:m,label:E});else{let w={name:m,label:E};w.name in b&&i.dataAttributeList.forEach(k=>{if(k==="name")return;let D=b[w.name]||{};k in D&&(w[k]=D[k])});for(let k in v)w[k]=v[k];w.index="index"in v?v.index:y,r.push(w)}}),r.sort((m,y)=>m.index-y.index)}function d(f){He[f?"unshift":"push"](()=>{l=f,n(1,l)})}return t.$$set=f=>{"params"in f&&n(0,i=f.params),"viewType"in f&&n(6,o=f.viewType)},[i,l,r,u,a,s,o,d]}class cn extends ke{constructor(e){super(),De(this,e,ql,Wl,_e,{params:0,viewType:6})}}function zl(t){let e,n;return e=new xn({props:{params:t[0],enabledFields:t[1],disabledFields:t[2],loadLayout:t[3]}}),{c(){Je(e.$$.fragment)},m(i,o){qe(e,i,o),n=!0},p(i,[o]){const l={};o&1&&(l.params=i[0]),o&2&&(l.enabledFields=i[1]),o&4&&(l.disabledFields=i[2]),e.$set(l)},i(i){n||(Te(e.$$.fragment,i),n=!0)},o(i){We(e.$$.fragment,i),n=!1},d(i){ze(e,i)}}}function Yl(t,e){return!t.getLinkParam(e,"disabled")&&!t.getLinkParam(e,"layoutRelationshipsDisabled")}function Xl(t,e,n){let{params:i}=e;i.dataAttributeList||(i.dataAttributeList=["id","name","style","hiddenPerDefault"]),i.dataAttributesDefs||(i.dataAttributesDefs={style:{type:"enum",options:["default","success","danger","primary","info","warning"],translation:"LayoutManager.options.style"},hiddenPerDefault:{type:"bool"},name:{readOnly:!0}});let o=[],l=[];function r(a){St.create(i.scope,function(s){Xe.get(i.scope,i.type,i.layoutProfileId,c=>{a&&(u(s,c),a())},!1)})}function u(a,s){let c=[];for(let p in a.defs.links)["belongsTo","hasMany","hasChildren"].includes(a.defs.links[p].type)&&Yl(a,p)&&c.push(p);const d=Me.get(["clientDefs",i.scope,"bottomPanels","detail"])||[];for(let p of d)p.layoutRelationshipsDisabled||c.push(p.name);c.sort(function(p,h){let b,m,y=d.find(v=>v.name===p),C=d.find(v=>v.name===h);return p in a.defs.links?b=x.translate(p,"links",i.scope):y&&(b=x.translate(y.label,"labels",i.scope)),h in a.defs.links?m=x.translate(h,"links",i.scope):C&&(m=x.translate(C.label,"labels",i.scope)),b.localeCompare(m)});let f=[];n(1,o=[]),n(2,l=[]);for(let p in s){let h=s[p],b,m=d.find(y=>y.name===h.name);typeof h=="string"||h instanceof String?b={name:h,label:m?x.translate(m.label,"labels",i.scope):x.translate(h,"links",i.scope)}:(b=h,b.label=m?x.translate(m.label,"labels",i.scope):x.translate(b.name,"links",i.scope)),i.dataAttributeList.forEach(y=>{if(y==="name"||y in b)return;let C=Me.get(["clientDefs",i.scope,"relationshipPanels",b.name,y]);C!==null&&(b[y]=C)}),o.push(b),f.push(b.name)}for(let p of c)if(!f.includes(p)){let h=d.find(b=>b.name===p);l.push({name:p,label:h?x.translate(h.label,"labels",i.scope):x.translate(p,"links",i.scope)})}}return t.$$set=a=>{"params"in a&&n(0,i=a.params)},[i,o,l,r]}class jl extends ke{constructor(e){super(),De(this,e,Xl,zl,_e,{params:0})}}function Ji(t,e,n){const i=t.slice();return i[39]=e[n],i}function $i(t,e,n){const i=t.slice();return i[42]=e[n],i}function eo(t,e,n){const i=t.slice();return i[45]=e[n],i}function to(t,e,n){const i=t.slice();return i[48]=e[n],i[50]=n,i}function Gl(t){let e,n,i,o,l;function r(){return t[20](t[42],t[45],t[50])}function u(...a){return t[21](t[42],t[45],t[50],...a)}return{c(){e=S("li"),n=S("a"),n.innerHTML='<i class="fas fa-minus"></i>',i=W(),g(n,"href","#"),g(n,"data-action","minusCell"),g(n,"class","remove-field svelte-fp3tbt"),g(e,"class","empty cell svelte-fp3tbt")},m(a,s){V(a,e,s),_(e,n),_(e,i),o||(l=[oe(n,"click",Ze(r)),oe(e,"dragover",Ze(Zl)),oe(e,"drop",u)],o=!0)},p(a,s){t=a},d(a){a&&G(e),o=!1,Be(l)}}}function Ul(t){let e,n=t[48].label+"",i,o,l,r,u,a,s,c,d,f,p;function h(){return t[18](t[42],t[45],t[50])}function b(...m){return t[19](t[48],...m)}return{c(){e=S("li"),i=ue(n),o=W(),l=S("a"),l.innerHTML='<i class="fas fa-times"></i>',r=W(),g(l,"href","#"),g(l,"data-action","removeField"),g(l,"class","remove-field svelte-fp3tbt"),g(e,"class","cell svelte-fp3tbt"),g(e,"draggable","true"),g(e,"data-id",u=t[48].id),g(e,"data-name",a=t[48].name),g(e,"data-full-width",s=t[48].fullWidth?"true":void 0),g(e,"data-custom-label",c=t[48].customLabel?t[48].customLabel:void 0),g(e,"data-no-label",d=t[48].noLabel)},m(m,y){V(m,e,y),_(e,i),_(e,o),_(e,l),_(e,r),f||(p=[oe(l,"click",Ze(h)),oe(e,"dragstart",hn(b))],f=!0)},p(m,y){t=m,y[0]&2&&n!==(n=t[48].label+"")&&Re(i,n),y[0]&2&&u!==(u=t[48].id)&&g(e,"data-id",u),y[0]&2&&a!==(a=t[48].name)&&g(e,"data-name",a),y[0]&2&&s!==(s=t[48].fullWidth?"true":void 0)&&g(e,"data-full-width",s),y[0]&2&&c!==(c=t[48].customLabel?t[48].customLabel:void 0)&&g(e,"data-custom-label",c),y[0]&2&&d!==(d=t[48].noLabel)&&g(e,"data-no-label",d)},d(m){m&&G(e),f=!1,Be(p)}}}function no(t){let e;function n(l,r){return l[48]?Ul:Gl}let i=n(t),o=i(t);return{c(){o.c(),e=ni()},m(l,r){o.m(l,r),V(l,e,r)},p(l,r){i===(i=n(l))&&o?o.p(l,r):(o.d(1),o=i(l),o&&(o.c(),o.m(e.parentNode,e)))},d(l){l&&G(e),o.d(l)}}}function io(t,e){let n,i,o,l,r,u,a,s,c;function d(){return e[17](e[42],e[45])}let f=ve(e[45].cells),p=[];for(let h=0;h<f.length;h+=1)p[h]=no(to(e,f,h));return{key:t,first:null,c(){n=S("li"),i=S("div"),o=S("a"),o.innerHTML='<i class="fas fa-times"></i>',l=W(),r=S("ul");for(let h=0;h<p.length;h+=1)p[h].c();u=W(),g(o,"href","#"),g(o,"data-action","removeRow"),g(o,"class","remove-row pull-right svelte-fp3tbt"),g(i,"class","svelte-fp3tbt"),g(r,"class","cells svelte-fp3tbt"),g(n,"class","row svelte-fp3tbt"),g(n,"data-number",a=e[45].number),this.first=n},m(h,b){V(h,n,b),_(n,i),_(i,o),_(n,l),_(n,r);for(let m=0;m<p.length;m+=1)p[m]&&p[m].m(r,null);_(n,u),s||(c=[oe(o,"click",Ze(d)),oe(r,"mousedown",hn(Jl))],s=!0)},p(h,b){if(e=h,b[0]&5634){f=ve(e[45].cells);let m;for(m=0;m<f.length;m+=1){const y=to(e,f,m);p[m]?p[m].p(y,b):(p[m]=no(y),p[m].c(),p[m].m(r,null))}for(;m<p.length;m+=1)p[m].d(1);p.length=f.length}b[0]&2&&a!==(a=e[45].number)&&g(n,"data-number",a)},d(h){h&&G(n),pn(p,h),s=!1,Be(c)}}}function oo(t,e){let n,i,o,l=(e[42].customLabel||e[42].label||"")+"",r,u,a,s,c,d,f,p,h,b,m,y=[],C=new Map,v,E,w,k,D,R,T;function J(){return e[15](e[42])}function Z(){return e[16](e[42])}let z=ve(e[42].rows);const j=M=>M[45].number;for(let M=0;M<z.length;M+=1){let Y=eo(e,z,M),de=j(Y);C.set(de,y[M]=io(de,Y))}function U(){return e[22](e[42])}return{key:t,first:null,c(){n=S("li"),i=S("header"),o=S("label"),r=ue(l),a=ue(`Â \r
                                `),s=S("a"),s.innerHTML='<i class="fas fa-pencil-alt fa-sm"></i>',c=W(),d=S("a"),f=S("i"),b=W(),m=S("ul");for(let M=0;M<y.length;M+=1)y[M].c();v=W(),E=S("div"),w=S("a"),w.innerHTML='<i class="fas fa-plus"></i>',k=W(),g(o,"data-is-custom",u=e[42].customLabel?"true":void 0),g(o,"class","svelte-fp3tbt"),g(s,"href","#"),g(s,"data-action","edit-panel-label"),g(s,"class","edit-panel-label svelte-fp3tbt"),g(f,"class","fas fa-times"),g(d,"href","#"),Oe(d,"float","right"),g(d,"data-action","removePanel"),g(d,"class","remove-panel svelte-fp3tbt"),g(d,"data-number",p=e[42].number),g(i,"data-name",h=e[42].name),g(i,"class","svelte-fp3tbt"),g(m,"class","rows svelte-fp3tbt"),g(w,"href","#"),g(w,"data-action","addRow"),g(w,"class","svelte-fp3tbt"),g(E,"class","svelte-fp3tbt"),g(n,"data-number",D=e[42].number),g(n,"class","panel-layout svelte-fp3tbt"),this.first=n},m(M,Y){V(M,n,Y),_(n,i),_(i,o),_(o,r),_(i,a),_(i,s),_(i,c),_(i,d),_(d,f),_(n,b),_(n,m);for(let de=0;de<y.length;de+=1)y[de]&&y[de].m(m,null);_(n,v),_(n,E),_(E,w),_(n,k),R||(T=[oe(s,"click",Ze(J)),oe(d,"click",Ze(Z)),oe(m,"mousedown",hn($l)),oe(w,"click",Ze(U))],R=!0)},p(M,Y){e=M,Y[0]&2&&l!==(l=(e[42].customLabel||e[42].label||"")+"")&&Re(r,l),Y[0]&2&&u!==(u=e[42].customLabel?"true":void 0)&&g(o,"data-is-custom",u),Y[0]&2&&p!==(p=e[42].number)&&g(d,"data-number",p),Y[0]&2&&h!==(h=e[42].name)&&g(i,"data-name",h),Y[0]&5890&&(z=ve(e[42].rows),y=Gt(y,Y,j,1,e,z,C,m,jt,io,null,eo)),Y[0]&2&&D!==(D=e[42].number)&&g(n,"data-number",D)},d(M){M&&G(n);for(let Y=0;Y<y.length;Y+=1)y[Y].d();R=!1,Be(T)}}}function lo(t){let e,n=t[39].label+"",i,o,l,r,u;function a(...s){return t[23](t[39],...s)}return{c(){e=S("li"),i=ue(n),o=W(),g(e,"class","cell svelte-fp3tbt"),g(e,"data-name",l=t[39].name)},m(s,c){V(s,e,c),_(e,i),_(e,o),r||(u=oe(e,"dragstart",a),r=!0)},p(s,c){t=s,c[0]&4&&n!==(n=t[39].label+"")&&Re(i,n),c[0]&4&&l!==(l=t[39].name)&&g(e,"data-name",l)},d(s){s&&G(e),r=!1,u()}}}function Vl(t){let e,n,i,o,l,r,u,a,s=[],c=new Map,d,f,p,h,b,m,y,C,v=ve(t[1]);const E=D=>D[42].number;for(let D=0;D<v.length;D+=1){let R=$i(t,v,D),T=E(R);c.set(T,s[D]=oo(T,R))}let w=ve(t[2]),k=[];for(let D=0;D<w.length;D+=1)k[D]=lo(Ji(t,w,D));return{c(){e=S("div"),n=S("div"),i=S("div"),o=S("header"),o.textContent=`${x.translate("Layout","LayoutManager")}`,l=W(),r=S("a"),r.textContent=`${x.translate("Add Panel","Admin")}`,u=W(),a=S("ul");for(let D=0;D<s.length;D+=1)s[D].c();d=W(),f=S("div"),p=S("div"),h=S("header"),h.textContent=`${x.translate("Available Fields","Admin")}`,b=W(),m=S("ul");for(let D=0;D<k.length;D+=1)k[D].c();g(o,"class","svelte-fp3tbt"),g(r,"href","#"),g(r,"class","svelte-fp3tbt"),g(a,"class","panels svelte-fp3tbt"),g(i,"class","well svelte-fp3tbt"),g(n,"class","col-md-8 svelte-fp3tbt"),g(h,"class","svelte-fp3tbt"),g(m,"class","disabled cells clearfix svelte-fp3tbt"),g(p,"class","well svelte-fp3tbt"),g(f,"class","col-md-4 svelte-fp3tbt"),g(e,"id","layout"),g(e,"class","row svelte-fp3tbt")},m(D,R){V(D,e,R),_(e,n),_(n,i),_(i,o),_(i,l),_(i,r),_(i,u),_(i,a);for(let T=0;T<s.length;T+=1)s[T]&&s[T].m(a,null);_(e,d),_(e,f),_(f,p),_(p,h),_(p,b),_(p,m);for(let T=0;T<k.length;T+=1)k[T]&&k[T].m(m,null);y||(C=oe(r,"click",Ze(t[5])),y=!0)},p(D,R){if(R[0]&8130&&(v=ve(D[1]),s=Gt(s,R,E,1,D,v,c,a,jt,oo,null,$i)),R[0]&4){w=ve(D[2]);let T;for(T=0;T<w.length;T+=1){const J=Ji(D,w,T);k[T]?k[T].p(J,R):(k[T]=lo(J),k[T].c(),k[T].m(m,null))}for(;T<k.length;T+=1)k[T].d(1);k.length=w.length}},d(D){D&&G(e);for(let R=0;R<s.length;R+=1)s[R].d();pn(k,D),y=!1,C()}}}function Ql(t){let e,n;return e=new wi({props:{params:t[0],validate:t[13],fetch:t[4],loadLayout:t[3],$$slots:{default:[Vl]},$$scope:{ctx:t}}}),{c(){Je(e.$$.fragment)},m(i,o){qe(e,i,o),n=!0},p(i,o){const l={};o[0]&1&&(l.params=i[0]),o[0]&6|o[1]&1048576&&(l.$$scope={dirty:o,ctx:i}),e.$set(l)},i(i){n||(Te(e.$$.fragment,i),n=!0)},o(i){We(e.$$.fragment,i),n=!1},d(i){ze(e,i)}}}function Kl(t,e){return e.some(n=>n.name===t)}const Zl=t=>t.dataTransfer.dropEffect="move",Jl=()=>{},$l=()=>{};function er(t,e,n){let{params:i}=e,{columnCount:o=2}=e,l=["id","label","style"],r={label:{type:"varchar"},style:{type:"enum",options:["default","success","danger","primary","info","warning"],translation:"LayoutManager.options.style"},dynamicLogicVisible:{type:"base",view:"views/admin/field-manager/fields/dynamic-logic-conditions"}},u=["modifiedAt","createdAt","modifiedBy","createdBy","assignedUser","ownerUser","teams"],a=[],s=[],c=-1,d=-1,f;Bo();function p(A){let L,F;const q=[];q.push(new Promise(X=>{St.create(i.scope,ee=>{Xe.get(i.scope,i.type,i.layoutProfileId,$=>{L=$,F=ee,X()},!1)})})),["detail","detailSmall"].includes(i.type)&&q.push(new Promise(X=>{Xe.get(i.scope,"sidePanels"+Espo.utils.upperCaseFirst(i.type),i.layoutProfileId,ee=>{f=ee,X()},!1)})),Promise.all(q).then(()=>{A&&(h(F,L),C(),ai().then(()=>{E()}),A())})}function h(A,L){let F=[];const q=[];for(const $ in A.defs.fields)b(A,$)&&(q.push(x.translate($,"fields",i.scope)),F.push($));const X=q.filter(($,ye)=>q.indexOf($)!==ye);let ee=[];n(2,s=[]),n(1,a=L),L.forEach(($,ye)=>{$.rows.forEach((ie,Ie)=>{ie&&ie.forEach((Pe,Qe)=>{if(Qe==o||!Pe)return;let nt=x.translate(Pe.name,"fields",i.scope);X.includes(nt)&&(nt+=` (${Pe.name})`),ee.push({name:Pe.name,label:nt}),n(1,a[ye].rows[Ie][Qe].label=nt,a)})})}),F.sort(($,ye)=>x.translate($,"fields",i.scope).localeCompare(x.translate(ye,"fields",i.scope)));for(const $ in F)if(!Kl(F[$],ee)){const ye=F[$];let ie=x.translate(ye,"fields",i.scope);X.includes(ie)&&(ie+=` (${ye})`),s.push({name:ye,label:ie})}}function b(A,L){if(m()&&u.includes(L))return!1;const F=["disabled",`layout${Espo.utils.upperCaseFirst(i.type)}Disabled`];i.reelType&&F.push(`layout${Espo.utils.upperCaseFirst(i.reelType)}Disabled`);for(let q of F)if(A.getFieldParam(L,q))return!1;return!0}function m(){if(Me.get(["clientDefs",i.scope,"defaultSidePanelDisabled"]))return!1;if(f){for(const A in f)if(A==="default"&&f[A].disabled)return!1}return!0}function y(){return a.map(A=>({...A,rows:A.rows.map(L=>L.cells)}))}function C(){c=-1,d=-1,n(1,a=a.map((A,L)=>(A.number=L,c=L,A.rows=A.rows.map(F=>({number:d++,cells:F})),A)))}function v(A){N.create(A,{animation:150,group:"rows",draggable:"li.row",onEnd(L){const F=parseInt(L.to.closest(".panel-layout").getAttribute("data-number")),q=parseInt(L.from.closest(".panel-layout").getAttribute("data-number"));if(q===F)n(1,a=a.map(X=>{if(X.number===F){const[ee]=X.rows.splice(L.oldIndex,1);X.rows.splice(L.newIndex,0,ee)}return X}));else{const ee=a.find($=>$.number===q).rows[L.oldIndex];n(1,a=a.map($=>($.number===q&&$.rows.splice(L.oldIndex,1),$.number===F&&$.rows.splice(L.newIndex,0,ee),$)))}}})}function E(){const A=document.querySelector("ul.panels");A&&N.create(A,{animation:150,group:"panels",draggable:"li.panel-layout",onEnd(L){const F=Array.from(L.to.children);n(1,a=F.map(q=>{const X=parseInt(q.getAttribute("data-number"));return a.find(ee=>ee.number===X)}))}}),document.querySelectorAll("ul.rows").forEach(L=>{v(L)}),document.querySelectorAll("ul.cells.disabled").forEach(L=>{N.create(L,{animation:150,group:"cells",draggable:"li.cell"})})}function w(){c++;const A={label:"New panel",rows:[{number:d++,cells:[!1,!1]}],number:c,name:`panel${c}`,isCustomLabel:!0};n(1,a=[...a,A]),ai().then(()=>{const L=document.querySelector(`.panel-layout[data-number="${A.number}"] > .rows`);v(L)})}function k(A){const L=a.find(q=>q.number===A);n(1,a=a.filter(q=>q!==L));let F=[];L.rows.forEach(q=>{q.cells.forEach(X=>{X&&F.push(X)})}),n(2,s=[...s,...F])}function D(A){n(1,a=a.map(L=>(L.number===A&&(L.rows=[...L.rows,{number:d++,cells:Array(o).fill(!1)}]),L)))}function R(A,L){n(1,a=a.map(F=>{if(F.number===A){const q=F.rows.find(X=>X.number===L);F.rows=F.rows.filter(X=>X!=q),n(2,s=[...s,...q.cells.filter(X=>!!X)])}return F}))}function T(A,L,F){n(1,a=a.map(q=>(q.number===A&&(q.rows=q.rows.map((X,ee)=>{if(X.number===L){const $=X.cells[F];$&&n(2,s=[...s,$]),X.cells[F]=!1}return X})),q)))}function J(A,L,F,q){const X=A.dataTransfer.getData("name");let ee=s.find(ie=>ie.name===X),$=null,ye=null;if(ee)n(2,s=s.filter(ie=>ie!==ee));else{if(a.forEach(ie=>{ie.rows.forEach((Ie,Pe)=>{Ie.cells.forEach(Qe=>{Qe&&Qe.name===X&&(ee=Qe,$=Ie.number,ye=ie.number)})})}),!ee)return;n(1,a=a.map((ie,Ie)=>(ye===ie.number&&(ie.rows=ie.rows.map((Pe,Qe)=>(Pe.number===$&&(Pe.cells=Pe.cells.map((nt,cr)=>nt&&nt.name===X?!1:nt)),Pe))),ie)))}n(1,a=a.map(ie=>(L===ie.number&&(ie.rows=ie.rows.map(Ie=>(F===Ie.number&&(Ie.cells=Ie.cells.map((Pe,Qe)=>Qe===q?(ee.fullWidth&&Ie.cells.length>1&&delete ee.fullWidth,ee):Pe)),Ie))),ie)))}function Z(A){i.onEditPanel(A,l,r,L=>{n(1,a=a.map(F=>(F.number===A.number&&l.forEach(q=>{A[q]=L[q]}),F)))})}function z(A,L,F){n(1,a=a.map(q=>(A===q.number&&(q.rows=q.rows.map(X=>{if(L===X.number){const ee=X.cells.filter(($,ye)=>ye!==F);ee.length===1&&ee[0]&&(ee[0].fullWidth=!0),X.cells=ee}return X})),q)))}function j(A){let L=0;return A.forEach(F=>{F.rows.forEach(q=>{q.forEach(X=>{X&&L++})})}),L===0?(Ye.notify("Layout cannot be empty.","error"),!1):!0}const U=A=>Z(A),M=A=>k(A.number),Y=(A,L)=>R(A.number,L.number),de=(A,L,F)=>T(A.number,L.number,F),xe=(A,L)=>{L.dataTransfer.setData("name",A.name)},yt=(A,L,F)=>z(A.number,L.number,F),Ft=(A,L,F,q)=>J(q,A.number,L.number,F),Ve=A=>D(A.number),at=(A,L)=>{L.dataTransfer.setData("name",A.name)};return t.$$set=A=>{"params"in A&&n(0,i=A.params),"columnCount"in A&&n(14,o=A.columnCount)},[i,a,s,p,y,w,k,D,R,T,J,Z,z,j,o,U,M,Y,de,xe,yt,Ft,Ve,at]}class tr extends ke{constructor(e){super(),De(this,e,er,Ql,_e,{params:0,columnCount:14},null,[-1,-1])}}function nr(t){let e,n;return e=new t[1]({props:{params:t[0],viewType:t[2]}}),{c(){Je(e.$$.fragment)},m(i,o){qe(e,i,o),n=!0},p(i,[o]){const l={};o&1&&(l.params=i[0]),o&4&&(l.viewType=i[2]),e.$set(l)},i(i){n||(Te(e.$$.fragment,i),n=!0)},o(i){We(e.$$.fragment,i),n=!1},d(i){ze(e,i)}}}function ir(t,e,n){let{params:i}=e,o,l;const r=Me.get(["clientDefs",i.scope,"additionalLayouts",i.type])||i.type;switch(r&&(i.reelType=r),t.$$set=u=>{"params"in u&&n(0,i=u.params)},r){case"list":case"listSmall":n(1,o=Zi);break;case"kanban":n(1,o=Zi),n(0,i.dataAttributeList=["id","name","link","align","view","isLarge","cssStyle"],i),n(0,i.dataAttributesDefs={link:{type:"bool"},isLarge:{type:"bool"},width:{type:"float"},cssStyle:{type:"varchar"},align:{type:"enum",options:["left","right"]},view:{type:"varchar",readOnly:!0},name:{type:"varchar",readOnly:!0}},i);break;case"relationships":n(1,o=jl);break;case"detail":case"detailSmall":n(1,o=tr);break;case"sidePanelsDetail":n(2,l="detail"),n(1,o=cn);break;case"sidePanelsDetailSmall":n(2,l="detailSmall"),n(1,o=cn);break;case"sidePanelsEdit":n(2,l="edit"),n(1,o=cn);break;case"sidePanelsEditSmall":n(2,l="editSmall"),n(1,o=cn);break}return[i,o,l]}class or extends ke{constructor(e){super(),De(this,e,ir,nr,_e,{params:0})}}function lr(t){let e,n,i,o,l,r=x.translate("apiRequest","labels","Admin")+"",u,a,s,c,d,f,p,h,b,m,y,C,v,E,w,k,D,R,T,J,Z,z,j=x.translate("response","fields","Admin")+"",U,M,Y=x.translate("status","labels","Admin")+"",de,xe,yt,Ft,Ve,at,A;return{c(){e=S("div"),n=S("h3"),i=S("div"),o=S("div"),l=S("a"),l.textContent=`${x.translate("Administration")}`,u=ue(r),a=W(),s=S("div"),s.textContent=`${x.translate("apiRequest","labels","Admin")}`,c=W(),d=S("button"),d.textContent=`${x.translate("execute","labels","Admin")}`,f=W(),p=S("div"),h=S("div"),b=S("div"),m=S("div"),y=S("label"),y.textContent=`${x.translate("Type","fields","Admin")}`,C=W(),v=S("div"),E=W(),w=S("div"),k=S("div"),D=S("label"),D.textContent=`${x.translate("request","fields","Admin")}`,R=W(),T=S("div"),J=W(),Z=S("div"),z=S("label"),U=ue(j),M=S("span"),de=ue(Y),xe=ue(": "),yt=S("span"),Ft=W(),Ve=S("div"),g(l,"href","#Admin"),g(o,"class","breadcrumbs-wrapper"),g(i,"class","header-breadcrumbs fixed-header-breadcrumbs"),g(s,"class","header-title"),Oe(d,"margin","10px 7px 10px 5px"),g(d,"class","btn btn-primary action"),g(d,"data-action","execute"),g(d,"type","button"),g(e,"class","page-header"),g(y,"class","control-label"),g(y,"data-name","type"),g(v,"class","field"),g(v,"data-name","type"),g(m,"class","col-xs-12 cell form-group"),g(b,"class","row"),g(h,"class","col-sm-3"),g(p,"class","row"),g(D,"class","control-label"),g(D,"data-name","request"),g(T,"class","field"),g(T,"data-name","request"),g(k,"class","col-sm-12 col-md-6 cell form-group"),g(M,"class","pull-right status hidden"),Oe(z,"width","100%"),g(z,"class","control-label"),g(z,"data-name","response"),g(Ve,"class","field"),g(Ve,"data-name","response"),g(Z,"class","col-sm-12 col-md-6 cell form-group"),g(w,"class","row")},m(L,F){V(L,e,F),_(e,n),_(n,i),_(i,o),_(o,l),_(o,u),_(n,a),_(n,s),_(e,c),_(e,d),V(L,f,F),V(L,p,F),_(p,h),_(h,b),_(b,m),_(m,y),_(m,C),_(m,v),V(L,E,F),V(L,w,F),_(w,k),_(k,D),_(k,R),_(k,T),_(w,J),_(w,Z),_(Z,z),_(z,U),_(z,M),_(M,de),_(M,xe),_(M,yt),_(Z,Ft),_(Z,Ve),at||(A=oe(d,"click",function(){fn(t[0](t[1]))&&t[0](t[1]).apply(this,arguments)}),at=!0)},p(L,[F]){t=L},i:ge,o:ge,d(L){L&&(G(e),G(f),G(p),G(E),G(w)),at=!1,A()}}}function rr(t,e,n){let{afterOnMount:i=()=>null}=e,{sendRequest:o=()=>null}=e,l=null;return Yt(()=>{St.create("",function(r){n(1,l=r),i(l)})}),t.$$set=r=>{"afterOnMount"in r&&n(2,i=r.afterOnMount),"sendRequest"in r&&n(0,o=r.sendRequest)},[o,l,i]}class ar extends ke{constructor(e){super(),De(this,e,rr,lr,_e,{afterOnMount:2,sendRequest:0})}}window.SvelteLanguage=x,window.SvelteUserData=di,window.SvelteNotifier=Ye,window.SvelteLayoutManager=Xe,window.SvelteMetadata=Me,window.SvelteModelFactory=St,window.driver=Po,pe.ApiRequestComponent=ar,pe.LayoutComponent=or,pe.QueueManagerIcon=Ko,pe.UpdatePanel=il,Object.defineProperty(pe,Symbol.toStringTag,{value:"Module"})});
