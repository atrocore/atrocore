(function(pe,de){typeof exports=="object"&&typeof module<"u"?de(exports):typeof define=="function"&&define.amd?define(["exports"],de):(pe=typeof globalThis<"u"?globalThis:pe||self,de(pe.Svelte={}))})(this,function(pe){"use strict";var rr=Object.defineProperty;var ar=(pe,de,Ue)=>de in pe?rr(pe,de,{enumerable:!0,configurable:!0,writable:!0,value:Ue}):pe[de]=Ue;var Nn=(pe,de,Ue)=>ar(pe,typeof de!="symbol"?de+"":de,Ue);let de={};function Ue(t={}){de={animate:!0,allowClose:!0,overlayOpacity:.7,smoothScroll:!1,disableActiveInteraction:!1,showProgress:!1,stagePadding:10,stageRadius:5,popoverOffset:10,showButtons:["next","previous","close"],disableButtons:[],overlayColor:"#000",...t}}function I(t){return t?de[t]:de}function At(t,e,n,i){return(t/=i/2)<1?n/2*t*t+e:-n/2*(--t*(t-2)-1)+e}function xn(t){const e='a[href]:not([disabled]), button:not([disabled]), textarea:not([disabled]), input[type="text"]:not([disabled]), input[type="radio"]:not([disabled]), input[type="checkbox"]:not([disabled]), select:not([disabled])';return t.flatMap(n=>{const i=n.matches(e),o=Array.from(n.querySelectorAll(e));return[...i?[n]:[],...o]}).filter(n=>getComputedStyle(n).pointerEvents!=="none"&&so(n))}function Bn(t){if(!t||ao(t))return;const e=I("smoothScroll");t.scrollIntoView({behavior:!e||ro(t)?"auto":"smooth",inline:"center",block:"center"})}function ro(t){if(!t||!t.parentElement)return;const e=t.parentElement;return e.scrollHeight>e.clientHeight}function ao(t){const e=t.getBoundingClientRect();return e.top>=0&&e.left>=0&&e.bottom<=(window.innerHeight||document.documentElement.clientHeight)&&e.right<=(window.innerWidth||document.documentElement.clientWidth)}function so(t){return!!(t.offsetWidth||t.offsetHeight||t.getClientRects().length)}let It={};function se(t,e){It[t]=e}function O(t){return t?It[t]:It}function Hn(){It={}}let Ot={};function Mt(t,e){Ot[t]=e}function tt(t){var e;(e=Ot[t])==null||e.call(Ot)}function uo(){Ot={}}function co(t,e,n,i){let o=O("__activeStagePosition");const l=o||n.getBoundingClientRect(),r=i.getBoundingClientRect(),u=At(t,l.x,r.x-l.x,e),s=At(t,l.y,r.y-l.y,e),a=At(t,l.width,r.width-l.width,e),c=At(t,l.height,r.height-l.height,e);o={x:u,y:s,width:a,height:c},Wn(o),se("__activeStagePosition",o)}function Rn(t){if(!t)return;const e=t.getBoundingClientRect(),n={x:e.x,y:e.y,width:e.width,height:e.height};se("__activeStagePosition",n),Wn(n)}function fo(){const t=O("__activeStagePosition"),e=O("__overlaySvg");if(!t)return;if(!e){console.warn("No stage svg found.");return}const n=window.innerWidth,i=window.innerHeight;e.setAttribute("viewBox",`0 0 ${n} ${i}`)}function po(t){const e=ho(t);document.body.appendChild(e),Xn(e,n=>{n.target.tagName==="path"&&tt("overlayClick")}),se("__overlaySvg",e)}function Wn(t){const e=O("__overlaySvg");if(!e){po(t);return}const n=e.firstElementChild;if((n==null?void 0:n.tagName)!=="path")throw new Error("no path element found in stage svg");n.setAttribute("d",zn(t))}function ho(t){const e=window.innerWidth,n=window.innerHeight,i=document.createElementNS("http://www.w3.org/2000/svg","svg");i.classList.add("driver-overlay","driver-overlay-animated"),i.setAttribute("viewBox",`0 0 ${e} ${n}`),i.setAttribute("xmlSpace","preserve"),i.setAttribute("xmlnsXlink","http://www.w3.org/1999/xlink"),i.setAttribute("version","1.1"),i.setAttribute("preserveAspectRatio","xMinYMin slice"),i.style.fillRule="evenodd",i.style.clipRule="evenodd",i.style.strokeLinejoin="round",i.style.strokeMiterlimit="2",i.style.zIndex="10000",i.style.position="fixed",i.style.top="0",i.style.left="0",i.style.width="100%",i.style.height="100%";const o=document.createElementNS("http://www.w3.org/2000/svg","path");return o.setAttribute("d",zn(t)),o.style.fill=I("overlayColor")||"rgb(0,0,0)",o.style.opacity=`${I("overlayOpacity")}`,o.style.pointerEvents="auto",o.style.cursor="auto",i.appendChild(o),i}function zn(t){const e=window.innerWidth,n=window.innerHeight,i=I("stagePadding")||0,o=I("stageRadius")||0,l=t.width+i*2,r=t.height+i*2,u=Math.min(o,l/2,r/2),s=Math.floor(Math.max(u,0)),a=t.x-i+s,c=t.y-i,d=l-s*2,f=r-s*2;return`M${e},0L0,0L0,${n}L${e},${n}L${e},0Z
    M${a},${c} h${d} a${s},${s} 0 0 1 ${s},${s} v${f} a${s},${s} 0 0 1 -${s},${s} h-${d} a${s},${s} 0 0 1 -${s},-${s} v-${f} a${s},${s} 0 0 1 ${s},-${s} z`}function mo(){const t=O("__overlaySvg");t&&t.remove()}function go(){const t=document.getElementById("driver-dummy-element");if(t)return t;let e=document.createElement("div");return e.id="driver-dummy-element",e.style.width="0",e.style.height="0",e.style.pointerEvents="none",e.style.opacity="0",e.style.position="fixed",e.style.top="50%",e.style.left="50%",document.body.appendChild(e),e}function qn(t){const{element:e}=t;let n=typeof e=="string"?document.querySelector(e):e;n||(n=go()),bo(n,t)}function vo(){const t=O("__activeElement"),e=O("__activeStep");t&&(Rn(t),fo(),Qn(t,e))}function bo(t,e){const n=Date.now(),i=O("__activeStep"),o=O("__activeElement")||t,l=!o||o===t,r=t.id==="driver-dummy-element",u=o.id==="driver-dummy-element",s=I("animate"),a=e.onHighlightStarted||I("onHighlightStarted"),c=(e==null?void 0:e.onHighlighted)||I("onHighlighted"),d=(i==null?void 0:i.onDeselected)||I("onDeselected"),f=I(),h=O();!l&&d&&d(u?void 0:o,i,{config:f,state:h}),a&&a(r?void 0:t,e,{config:f,state:h});const p=!l&&s;let g=!1;Do(),se("previousStep",i),se("previousElement",o),se("activeStep",e),se("activeElement",t);const m=()=>{if(O("__transitionCallback")!==m)return;const b=Date.now()-n,P=400-b<=400/2;e.popover&&P&&!g&&p&&(jn(t,e),g=!0),I("animate")&&b<400?co(b,400,o,t):(Rn(t),c&&c(r?void 0:t,e,{config:I(),state:O()}),se("__transitionCallback",void 0),se("__previousStep",i),se("__previousElement",o),se("__activeStep",e),se("__activeElement",t)),window.requestAnimationFrame(m)};se("__transitionCallback",m),window.requestAnimationFrame(m),Bn(t),!p&&e.popover&&jn(t,e),o.classList.remove("driver-active-element","driver-no-interaction"),o.removeAttribute("aria-haspopup"),o.removeAttribute("aria-expanded"),o.removeAttribute("aria-controls"),I("disableActiveInteraction")&&t.classList.add("driver-no-interaction"),t.classList.add("driver-active-element"),t.setAttribute("aria-haspopup","dialog"),t.setAttribute("aria-expanded","true"),t.setAttribute("aria-controls","driver-popover-content")}function yo(){var t;(t=document.getElementById("driver-dummy-element"))==null||t.remove(),document.querySelectorAll(".driver-active-element").forEach(e=>{e.classList.remove("driver-active-element","driver-no-interaction"),e.removeAttribute("aria-haspopup"),e.removeAttribute("aria-expanded"),e.removeAttribute("aria-controls")})}function vt(){const t=O("__resizeTimeout");t&&window.cancelAnimationFrame(t),se("__resizeTimeout",window.requestAnimationFrame(vo))}function _o(t){var e;if(!O("isInitialized")||!(t.key==="Tab"||t.keyCode===9))return;const n=O("__activeElement"),i=(e=O("popover"))==null?void 0:e.wrapper,o=xn([...i?[i]:[],...n?[n]:[]]),l=o[0],r=o[o.length-1];if(t.preventDefault(),t.shiftKey){const u=o[o.indexOf(document.activeElement)-1]||r;u==null||u.focus()}else{const u=o[o.indexOf(document.activeElement)+1]||l;u==null||u.focus()}}function Yn(t){var e;((e=I("allowKeyboardControl"))==null||e)&&(t.key==="Escape"?tt("escapePress"):t.key==="ArrowRight"?tt("arrowRightPress"):t.key==="ArrowLeft"&&tt("arrowLeftPress"))}function Xn(t,e,n){const i=(o,l)=>{const r=o.target;t.contains(r)&&((!n||n(r))&&(o.preventDefault(),o.stopPropagation(),o.stopImmediatePropagation()),l==null||l(o))};document.addEventListener("pointerdown",i,!0),document.addEventListener("mousedown",i,!0),document.addEventListener("pointerup",i,!0),document.addEventListener("mouseup",i,!0),document.addEventListener("click",o=>{i(o,e)},!0)}function wo(){window.addEventListener("keyup",Yn,!1),window.addEventListener("keydown",_o,!1),window.addEventListener("resize",vt),window.addEventListener("scroll",vt)}function Eo(){window.removeEventListener("keyup",Yn),window.removeEventListener("resize",vt),window.removeEventListener("scroll",vt)}function Do(){const t=O("popover");t&&(t.wrapper.style.display="none")}function jn(t,e){var n,i;let o=O("popover");o&&document.body.removeChild(o.wrapper),o=ko(),document.body.appendChild(o.wrapper);const{title:l,description:r,showButtons:u,disableButtons:s,showProgress:a,nextBtnText:c=I("nextBtnText")||"Next &rarr;",prevBtnText:d=I("prevBtnText")||"&larr; Previous",progressText:f=I("progressText")||"{current} of {total}"}=e.popover||{};o.nextButton.innerHTML=c,o.previousButton.innerHTML=d,o.progress.innerHTML=f,l?(o.title.innerHTML=l,o.title.style.display="block"):o.title.style.display="none",r?(o.description.innerHTML=r,o.description.style.display="block"):o.description.style.display="none";const h=u||I("showButtons"),p=a||I("showProgress")||!1,g=(h==null?void 0:h.includes("next"))||(h==null?void 0:h.includes("previous"))||p;o.closeButton.style.display=h.includes("close")?"block":"none",g?(o.footer.style.display="flex",o.progress.style.display=p?"block":"none",o.nextButton.style.display=h.includes("next")?"block":"none",o.previousButton.style.display=h.includes("previous")?"block":"none"):o.footer.style.display="none";const m=s||I("disableButtons")||[];m!=null&&m.includes("next")&&(o.nextButton.disabled=!0,o.nextButton.classList.add("driver-popover-btn-disabled")),m!=null&&m.includes("previous")&&(o.previousButton.disabled=!0,o.previousButton.classList.add("driver-popover-btn-disabled")),m!=null&&m.includes("close")&&(o.closeButton.disabled=!0,o.closeButton.classList.add("driver-popover-btn-disabled"));const b=o.wrapper;b.style.display="block",b.style.left="",b.style.top="",b.style.bottom="",b.style.right="",b.id="driver-popover-content",b.setAttribute("role","dialog"),b.setAttribute("aria-labelledby","driver-popover-title"),b.setAttribute("aria-describedby","driver-popover-description");const P=o.arrow;P.className="driver-popover-arrow";const y=((n=e.popover)==null?void 0:n.popoverClass)||I("popoverClass")||"";b.className=`driver-popover ${y}`.trim(),Xn(o.wrapper,D=>{var x,T,J;const te=D.target,G=((x=e.popover)==null?void 0:x.onNextClick)||I("onNextClick"),X=((T=e.popover)==null?void 0:T.onPrevClick)||I("onPrevClick"),V=((J=e.popover)==null?void 0:J.onCloseClick)||I("onCloseClick");if(te.classList.contains("driver-popover-next-btn"))return G?G(t,e,{config:I(),state:O()}):tt("nextClick");if(te.classList.contains("driver-popover-prev-btn"))return X?X(t,e,{config:I(),state:O()}):tt("prevClick");if(te.classList.contains("driver-popover-close-btn"))return V?V(t,e,{config:I(),state:O()}):tt("closeClick")},D=>!(o!=null&&o.description.contains(D))&&!(o!=null&&o.title.contains(D))&&typeof D.className=="string"&&D.className.includes("driver-popover")),se("popover",o);const w=((i=e.popover)==null?void 0:i.onPopoverRender)||I("onPopoverRender");w&&w(o,{config:I(),state:O()}),Qn(t,e),Bn(b);const _=t.classList.contains("driver-dummy-element"),S=xn([b,..._?[]:[t]]);S.length>0&&S[0].focus()}function Gn(){const t=O("popover");if(!(t!=null&&t.wrapper))return;const e=t.wrapper.getBoundingClientRect(),n=I("stagePadding")||0,i=I("popoverOffset")||0;return{width:e.width+n+i,height:e.height+n+i,realWidth:e.width,realHeight:e.height}}function Un(t,e){const{elementDimensions:n,popoverDimensions:i,popoverPadding:o,popoverArrowDimensions:l}=e;return t==="start"?Math.max(Math.min(n.top-o,window.innerHeight-i.realHeight-l.width),l.width):t==="end"?Math.max(Math.min(n.top-(i==null?void 0:i.realHeight)+n.height+o,window.innerHeight-(i==null?void 0:i.realHeight)-l.width),l.width):t==="center"?Math.max(Math.min(n.top+n.height/2-(i==null?void 0:i.realHeight)/2,window.innerHeight-(i==null?void 0:i.realHeight)-l.width),l.width):0}function Vn(t,e){const{elementDimensions:n,popoverDimensions:i,popoverPadding:o,popoverArrowDimensions:l}=e;return t==="start"?Math.max(Math.min(n.left-o,window.innerWidth-i.realWidth-l.width),l.width):t==="end"?Math.max(Math.min(n.left-(i==null?void 0:i.realWidth)+n.width+o,window.innerWidth-(i==null?void 0:i.realWidth)-l.width),l.width):t==="center"?Math.max(Math.min(n.left+n.width/2-(i==null?void 0:i.realWidth)/2,window.innerWidth-(i==null?void 0:i.realWidth)-l.width),l.width):0}function Qn(t,e){const n=O("popover");if(!n)return;const{align:i="start",side:o="left"}=(e==null?void 0:e.popover)||{},l=i,r=t.id==="driver-dummy-element"?"over":o,u=I("stagePadding")||0,s=Gn(),a=n.arrow.getBoundingClientRect(),c=t.getBoundingClientRect(),d=c.top-s.height;let f=d>=0;const h=window.innerHeight-(c.bottom+s.height);let p=h>=0;const g=c.left-s.width;let m=g>=0;const b=window.innerWidth-(c.right+s.width);let P=b>=0;const y=!f&&!p&&!m&&!P;let w=r;if(r==="top"&&f?P=m=p=!1:r==="bottom"&&p?P=m=f=!1:r==="left"&&m?P=f=p=!1:r==="right"&&P&&(m=f=p=!1),r==="over"){const _=window.innerWidth/2-s.realWidth/2,S=window.innerHeight/2-s.realHeight/2;n.wrapper.style.left=`${_}px`,n.wrapper.style.right="auto",n.wrapper.style.top=`${S}px`,n.wrapper.style.bottom="auto"}else if(y){const _=window.innerWidth/2-(s==null?void 0:s.realWidth)/2,S=10;n.wrapper.style.left=`${_}px`,n.wrapper.style.right="auto",n.wrapper.style.bottom=`${S}px`,n.wrapper.style.top="auto"}else if(m){const _=Math.min(g,window.innerWidth-(s==null?void 0:s.realWidth)-a.width),S=Un(l,{elementDimensions:c,popoverDimensions:s,popoverPadding:u,popoverArrowDimensions:a});n.wrapper.style.left=`${_}px`,n.wrapper.style.top=`${S}px`,n.wrapper.style.bottom="auto",n.wrapper.style.right="auto",w="left"}else if(P){const _=Math.min(b,window.innerWidth-(s==null?void 0:s.realWidth)-a.width),S=Un(l,{elementDimensions:c,popoverDimensions:s,popoverPadding:u,popoverArrowDimensions:a});n.wrapper.style.right=`${_}px`,n.wrapper.style.top=`${S}px`,n.wrapper.style.bottom="auto",n.wrapper.style.left="auto",w="right"}else if(f){const _=Math.min(d,window.innerHeight-s.realHeight-a.width);let S=Vn(l,{elementDimensions:c,popoverDimensions:s,popoverPadding:u,popoverArrowDimensions:a});n.wrapper.style.top=`${_}px`,n.wrapper.style.left=`${S}px`,n.wrapper.style.bottom="auto",n.wrapper.style.right="auto",w="top"}else if(p){const _=Math.min(h,window.innerHeight-(s==null?void 0:s.realHeight)-a.width);let S=Vn(l,{elementDimensions:c,popoverDimensions:s,popoverPadding:u,popoverArrowDimensions:a});n.wrapper.style.left=`${S}px`,n.wrapper.style.bottom=`${_}px`,n.wrapper.style.top="auto",n.wrapper.style.right="auto",w="bottom"}y?n.arrow.classList.add("driver-popover-arrow-none"):So(l,w,t)}function So(t,e,n){const i=O("popover");if(!i)return;const o=n.getBoundingClientRect(),l=Gn(),r=i.arrow,u=l.width,s=window.innerWidth,a=o.width,c=o.left,d=l.height,f=window.innerHeight,h=o.top,p=o.height;r.className="driver-popover-arrow";let g=e,m=t;e==="top"?(c+a<=0?(g="right",m="end"):c+a-u<=0&&(g="top",m="start"),c>=s?(g="left",m="end"):c+u>=s&&(g="top",m="end")):e==="bottom"?(c+a<=0?(g="right",m="start"):c+a-u<=0&&(g="bottom",m="start"),c>=s?(g="left",m="start"):c+u>=s&&(g="bottom",m="end")):e==="left"?(h+p<=0?(g="bottom",m="end"):h+p-d<=0&&(g="left",m="start"),h>=f?(g="top",m="end"):h+d>=f&&(g="left",m="end")):e==="right"&&(h+p<=0?(g="bottom",m="start"):h+p-d<=0&&(g="right",m="start"),h>=f?(g="top",m="start"):h+d>=f&&(g="right",m="end")),g?(r.classList.add(`driver-popover-arrow-side-${g}`),r.classList.add(`driver-popover-arrow-align-${m}`)):r.classList.add("driver-popover-arrow-none")}function ko(){const t=document.createElement("div");t.classList.add("driver-popover");const e=document.createElement("div");e.classList.add("driver-popover-arrow");const n=document.createElement("header");n.id="driver-popover-title",n.classList.add("driver-popover-title"),n.style.display="none",n.innerText="Popover Title";const i=document.createElement("div");i.id="driver-popover-description",i.classList.add("driver-popover-description"),i.style.display="none",i.innerText="Popover description is here";const o=document.createElement("button");o.type="button",o.classList.add("driver-popover-close-btn"),o.setAttribute("aria-label","Close"),o.innerHTML="&times;";const l=document.createElement("footer");l.classList.add("driver-popover-footer");const r=document.createElement("span");r.classList.add("driver-popover-progress-text"),r.innerText="";const u=document.createElement("span");u.classList.add("driver-popover-navigation-btns");const s=document.createElement("button");s.type="button",s.classList.add("driver-popover-prev-btn"),s.innerHTML="&larr; Previous";const a=document.createElement("button");return a.type="button",a.classList.add("driver-popover-next-btn"),a.innerHTML="Next &rarr;",u.appendChild(s),u.appendChild(a),l.appendChild(r),l.appendChild(u),t.appendChild(o),t.appendChild(e),t.appendChild(n),t.appendChild(i),t.appendChild(l),{wrapper:t,arrow:e,title:n,description:i,footer:l,previousButton:s,nextButton:a,closeButton:o,footerButtons:u,progress:r}}function Po(){var t;const e=O("popover");e&&((t=e.wrapper.parentElement)==null||t.removeChild(e.wrapper))}function Co(t={}){Ue(t);function e(){I("allowClose")&&a()}function n(){const c=O("activeIndex"),d=I("steps")||[];if(typeof c>"u")return;const f=c+1;d[f]?s(f):a()}function i(){const c=O("activeIndex"),d=I("steps")||[];if(typeof c>"u")return;const f=c-1;d[f]?s(f):a()}function o(c){(I("steps")||[])[c]?s(c):a()}function l(){var c;if(O("__transitionCallback"))return;const d=O("activeIndex"),f=O("__activeStep"),h=O("__activeElement");if(typeof d>"u"||typeof f>"u"||typeof O("activeIndex")>"u")return;const p=((c=f.popover)==null?void 0:c.onPrevClick)||I("onPrevClick");if(p)return p(h,f,{config:I(),state:O()});i()}function r(){var c;if(O("__transitionCallback"))return;const d=O("activeIndex"),f=O("__activeStep"),h=O("__activeElement");if(typeof d>"u"||typeof f>"u")return;const p=((c=f.popover)==null?void 0:c.onNextClick)||I("onNextClick");if(p)return p(h,f,{config:I(),state:O()});n()}function u(){O("isInitialized")||(se("isInitialized",!0),document.body.classList.add("driver-active",I("animate")?"driver-fade":"driver-simple"),wo(),Mt("overlayClick",e),Mt("escapePress",e),Mt("arrowLeftPress",l),Mt("arrowRightPress",r))}function s(c=0){var d,f,h,p,g,m,b,P;const y=I("steps");if(!y){console.error("No steps to drive through"),a();return}if(!y[c]){a();return}se("__activeOnDestroyed",document.activeElement),se("activeIndex",c);const w=y[c],_=y[c+1],S=y[c-1],D=((d=w.popover)==null?void 0:d.doneBtnText)||I("doneBtnText")||"Done",x=I("allowClose"),T=typeof((f=w.popover)==null?void 0:f.showProgress)<"u"?(h=w.popover)==null?void 0:h.showProgress:I("showProgress"),J=(((p=w.popover)==null?void 0:p.progressText)||I("progressText")||"{{current}} of {{total}}").replace("{{current}}",`${c+1}`).replace("{{total}}",`${y.length}`),te=((g=w.popover)==null?void 0:g.showButtons)||I("showButtons"),G=["next","previous",...x?["close"]:[]].filter(q=>!(te!=null&&te.length)||te.includes(q)),X=((m=w.popover)==null?void 0:m.onNextClick)||I("onNextClick"),V=((b=w.popover)==null?void 0:b.onPrevClick)||I("onPrevClick"),N=((P=w.popover)==null?void 0:P.onCloseClick)||I("onCloseClick");qn({...w,popover:{showButtons:G,nextBtnText:_?void 0:D,disableButtons:[...S?[]:["previous"]],showProgress:T,progressText:J,onNextClick:X||(()=>{_?s(c+1):a()}),onPrevClick:V||(()=>{s(c-1)}),onCloseClick:N||(()=>{a()}),...(w==null?void 0:w.popover)||{}}})}function a(c=!0){const d=O("__activeElement"),f=O("__activeStep"),h=O("__activeOnDestroyed"),p=I("onDestroyStarted");if(c&&p){const b=!d||(d==null?void 0:d.id)==="driver-dummy-element";p(b?void 0:d,f,{config:I(),state:O()});return}const g=(f==null?void 0:f.onDeselected)||I("onDeselected"),m=I("onDestroyed");if(document.body.classList.remove("driver-active","driver-fade","driver-simple"),Eo(),Po(),yo(),mo(),uo(),Hn(),d&&f){const b=d.id==="driver-dummy-element";g&&g(b?void 0:d,f,{config:I(),state:O()}),m&&m(b?void 0:d,f,{config:I(),state:O()})}h&&h.focus()}return{isActive:()=>O("isInitialized")||!1,refresh:vt,drive:(c=0)=>{u(),s(c)},setConfig:Ue,setSteps:c=>{Hn(),Ue({...I(),steps:c})},getConfig:I,getState:O,getActiveIndex:()=>O("activeIndex"),isFirstStep:()=>O("activeIndex")===0,isLastStep:()=>{const c=I("steps")||[],d=O("activeIndex");return d!==void 0&&d===c.length-1},getActiveStep:()=>O("activeStep"),getActiveElement:()=>O("activeElement"),getPreviousElement:()=>O("previousElement"),getPreviousStep:()=>O("previousStep"),moveNext:n,movePrevious:i,moveTo:o,hasNextStep:()=>{const c=I("steps")||[],d=O("activeIndex");return d!==void 0&&c[d+1]},hasPreviousStep:()=>{const c=I("steps")||[],d=O("activeIndex");return d!==void 0&&c[d-1]},highlight:c=>{u(),qn({...c,popover:c.popover?{showButtons:[],showProgress:!1,progressText:"",...c.popover}:void 0})},destroy:()=>{a(!1)}}}function Ee(){}function an(t,e){for(const n in e)t[n]=e[n];return t}function Kn(t){return t()}function Zn(){return Object.create(null)}function Fe(t){t.forEach(Kn)}function Jn(t){return typeof t=="function"}function De(t,e){return t!=t?e==e:t!==e||t&&typeof t=="object"||typeof t=="function"}let Ft;function $n(t,e){return t===e?!0:(Ft||(Ft=document.createElement("a")),Ft.href=e,t===Ft.href)}function Lo(t){return Object.keys(t).length===0}function To(t,e,n,i){if(t){const o=ei(t,e,n,i);return t[0](o)}}function ei(t,e,n,i){return t[1]&&i?an(n.ctx.slice(),t[1](i(e))):n.ctx}function Ao(t,e,n,i){if(t[2]&&i){const o=t[2](i(n));if(e.dirty===void 0)return o;if(typeof o=="object"){const l=[],r=Math.max(e.dirty.length,o.length);for(let u=0;u<r;u+=1)l[u]=e.dirty[u]|o[u];return l}return e.dirty|o}return e.dirty}function Io(t,e,n,i,o,l){if(o){const r=ei(e,n,i,l);t.p(r,o)}}function Oo(t){if(t.ctx.length>32){const e=[],n=t.ctx.length/32;for(let i=0;i<n;i++)e[i]=-1;return e}return-1}function E(t,e){t.appendChild(e)}function Z(t,e,n){t.insertBefore(e,n||null)}function Q(t){t.parentNode&&t.parentNode.removeChild(t)}function sn(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}function C(t){return document.createElement(t)}function he(t){return document.createTextNode(t)}function Y(){return he(" ")}function ti(){return he("")}function le(t,e,n,i){return t.addEventListener(e,n,i),()=>t.removeEventListener(e,n,i)}function Ve(t){return function(e){return e.preventDefault(),t.call(this,e)}}function un(t){return function(e){return e.stopPropagation(),t.call(this,e)}}function v(t,e,n){n==null?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}const Mo=["width","height"];function Nt(t,e){const n=Object.getOwnPropertyDescriptors(t.__proto__);for(const i in e)e[i]==null?t.removeAttribute(i):i==="style"?t.style.cssText=e[i]:i==="__value"?t.value=t[i]=e[i]:n[i]&&n[i].set&&Mo.indexOf(i)===-1?t[i]=e[i]:v(t,i,e[i])}function Fo(t){return Array.from(t.childNodes)}function Ne(t,e){e=""+e,t.data!==e&&(t.data=e)}function Qe(t,e,n,i){n==null?t.style.removeProperty(e):t.style.setProperty(e,n,"")}function xt(t,e,n){t.classList.toggle(e,!!n)}function No(t,e,{bubbles:n=!1,cancelable:i=!1}={}){return new CustomEvent(t,{detail:e,bubbles:n,cancelable:i})}let bt;function yt(t){bt=t}function Bt(){if(!bt)throw new Error("Function called outside component initialization");return bt}function cn(t){Bt().$$.on_mount.push(t)}function xo(t){Bt().$$.after_update.push(t)}function ni(t){Bt().$$.on_destroy.push(t)}function Bo(){const t=Bt();return(e,n,{cancelable:i=!1}={})=>{const o=t.$$.callbacks[e];if(o){const l=No(e,n,{cancelable:i});return o.slice().forEach(r=>{r.call(t,l)}),!l.defaultPrevented}return!0}}const rt=[],xe=[];let at=[];const ii=[],oi=Promise.resolve();let dn=!1;function li(){dn||(dn=!0,oi.then(ai))}function ri(){return li(),oi}function fn(t){at.push(t)}const pn=new Set;let st=0;function ai(){if(st!==0)return;const t=bt;do{try{for(;st<rt.length;){const e=rt[st];st++,yt(e),Ho(e.$$)}}catch(e){throw rt.length=0,st=0,e}for(yt(null),rt.length=0,st=0;xe.length;)xe.pop()();for(let e=0;e<at.length;e+=1){const n=at[e];pn.has(n)||(pn.add(n),n())}at.length=0}while(rt.length);for(;ii.length;)ii.pop()();dn=!1,pn.clear(),yt(t)}function Ho(t){if(t.fragment!==null){t.update(),Fe(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(fn)}}function Ro(t){const e=[],n=[];at.forEach(i=>t.indexOf(i)===-1?e.push(i):n.push(i)),n.forEach(i=>i()),at=e}const Ht=new Set;let Wo;function Pe(t,e){t&&t.i&&(Ht.delete(t),t.i(e))}function Be(t,e,n,i){if(t&&t.o){if(Ht.has(t))return;Ht.add(t),Wo.c.push(()=>{Ht.delete(t)}),t.o(e)}}function me(t){return(t==null?void 0:t.length)!==void 0?t:Array.from(t)}function Rt(t,e){t.d(1),e.delete(t.key)}function Wt(t,e,n,i,o,l,r,u,s,a,c,d){let f=t.length,h=l.length,p=f;const g={};for(;p--;)g[t[p].key]=p;const m=[],b=new Map,P=new Map,y=[];for(p=h;p--;){const D=d(o,l,p),x=n(D);let T=r.get(x);T?y.push(()=>T.p(D,e)):(T=a(x,D),T.c()),b.set(x,m[p]=T),x in g&&P.set(x,Math.abs(p-g[x]))}const w=new Set,_=new Set;function S(D){Pe(D,1),D.m(u,c),r.set(D.key,D),c=D.first,h--}for(;f&&h;){const D=m[h-1],x=t[f-1],T=D.key,J=x.key;D===x?(c=D.first,f--,h--):b.has(J)?!r.has(T)||w.has(T)?S(D):_.has(J)?f--:P.get(T)>P.get(J)?(_.add(T),S(D)):(w.add(J),f--):(s(x,r),f--)}for(;f--;){const D=t[f];b.has(D.key)||s(D,r)}for(;h;)S(m[h-1]);return Fe(y),m}function si(t,e){const n={},i={},o={$$scope:1};let l=t.length;for(;l--;){const r=t[l],u=e[l];if(u){for(const s in r)s in u||(i[s]=1);for(const s in u)o[s]||(n[s]=u[s],o[s]=1);t[l]=u}else for(const s in r)o[s]=1}for(const r in i)r in n||(n[r]=void 0);return n}function Ke(t){t&&t.c()}function He(t,e,n){const{fragment:i,after_update:o}=t.$$;i&&i.m(e,n),fn(()=>{const l=t.$$.on_mount.map(Kn).filter(Jn);t.$$.on_destroy?t.$$.on_destroy.push(...l):Fe(l),t.$$.on_mount=[]}),o.forEach(fn)}function Re(t,e){const n=t.$$;n.fragment!==null&&(Ro(n.after_update),Fe(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function zo(t,e){t.$$.dirty[0]===-1&&(rt.push(t),li(),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function Ce(t,e,n,i,o,l,r=null,u=[-1]){const s=bt;yt(t);const a=t.$$={fragment:null,ctx:[],props:l,update:Ee,not_equal:o,bound:Zn(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(s?s.$$.context:[])),callbacks:Zn(),dirty:u,skip_bound:!1,root:e.target||s.$$.root};r&&r(a.root);let c=!1;if(a.ctx=n?n(t,e.props||{},(d,f,...h)=>{const p=h.length?h[0]:f;return a.ctx&&o(a.ctx[d],a.ctx[d]=p)&&(!a.skip_bound&&a.bound[d]&&a.bound[d](p),c&&zo(t,d)),f}):[],a.update(),c=!0,Fe(a.before_update),a.fragment=i?i(a.ctx):!1,e.target){if(e.hydrate){const d=Fo(e.target);a.fragment&&a.fragment.l(d),d.forEach(Q)}else a.fragment&&a.fragment.c();e.intro&&Pe(t.$$.fragment),He(t,e.target,e.anchor),ai()}yt(s)}class Le{constructor(){Nn(this,"$$");Nn(this,"$$set")}$destroy(){Re(this,1),this.$destroy=Ee}$on(e,n){if(!Jn(n))return Ee;const i=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return i.push(n),()=>{const o=i.indexOf(n);o!==-1&&i.splice(o,1)}}$set(e){this.$$set&&!Lo(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}const qo="4",ut=[];function ct(t,e=Ee){let n;const i=new Set;function o(u){if(De(t,u)&&(t=u,n)){const s=!ut.length;for(const a of i)a[1](),ut.push(a,t);if(s){for(let a=0;a<ut.length;a+=2)ut[a][0](ut[a+1]);ut.length=0}}}function l(u){o(u(t))}function r(u,s=Ee){const a=[u,s];return i.add(a),i.size===1&&(n=e(o,l)||Ee),u(t),()=>{i.delete(a),i.size===0&&n&&(n(),n=null)}}return{set:o,update:l,subscribe:r}}const hn=ct({}),H={setTranslations(t){hn.set(t)},has(t,e,n){let i=!1;return hn.subscribe(o=>{if(n in o&&e in o[n]&&t in o[n][e]){i=!0;return}})(),i},get(t,e,n){let i=n;return hn.subscribe(o=>{if(t in o&&e in o[t]&&n in o[t][e]){i=o[t][e][n];return}if(t in o&&e in o[t]&&n in o[t][e]){i=o[t][e][n];return}if(t=="Global"){i=n;return}i=null})(),i},translate(t,e=null,n=null){n=n||"Global",e=e||"labels";let i=H.get(n,e,t);return i===null&&n!="Global"&&(i=H.get("Global",e,t)),i},translateOption(t,e,n=null){let i=H.translate(e,"options",n);return i===null?"":typeof i=="object"?i[t]:t}},ui=ct({}),ci={set(t){ui.set(t)},get(){let t=null;return ui.subscribe(e=>{e&&(t=e)})(),t}},mn=ct(),We={setNotifier(t){mn.set(t)},notify(t,e=null,n=2e3){mn.subscribe(i=>{i&&i.notify(t,e,2e3)})()},confirm(t=null,e=null,n){mn.subscribe(i=>{if(i){let o=null,l=null,r=null;typeof t=="string"||t instanceof String?(l=t,r=H.translate("Yes")):(t=t||{},l=t.message,r=t.confirmText,o=t.confirmStyle||null),i.confirm(l,{confirmText:r,cancelText:H.translate("Cancel"),confirmStyle:o},e,n)}})()}},zt=ct(),ze={setLayoutManager(t){zt.set(t)},resetToDefault(t,e,n,i){let o=null;return zt.subscribe(l=>{l&&(o=l.resetToDefault(t,e,n,i))})(),o},get:function(t,e,n,i,o){let l=null;return zt.subscribe(r=>{r&&(l=r.get(t,e,n,i,o))})(),l},set:function(t,e,n,i,o){let l=null;return zt.subscribe(r=>{r&&(l=r.set(t,e,n,i,o))})(),l}},di=ct(),qe={setMetadata(t){di.set(t)},get(t){let e=null;return di.subscribe(n=>{n&&(e=n.get(t))})(),e}},fi=ct(),qt={setModelFactory(t){fi.set(t)},create(t,e){fi.subscribe(n=>{n&&n.create(t,e)})()}};typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(qo);function pi(t){let e,n,i,o,l,r,u,s,a,c,d,f,h,p,g;function m(y,w){return y[2]?Xo:Yo}let b=m(t),P=b(t);return{c(){e=C("div"),n=C("div"),i=C("div"),o=C("span"),o.textContent=`${H.translate("queueManager","labels","QueueItem")}`,l=Y(),r=C("span"),u=C("a"),u.innerHTML='<span aria-hidden="true">Ã—</span>',s=Y(),P.c(),a=Y(),c=C("a"),c.textContent=`${H.translate("View List")}`,d=Y(),f=C("div"),h=C("div"),h.textContent=`${H.translate("Loading...")}`,v(o,"class","panel-heading-title"),v(u,"href","/"),v(u,"class","close svelte-1p6ppx8"),v(c,"href","#QueueItem"),v(c,"title",H.translate("View List")),v(c,"class","qp-view-list svelte-1p6ppx8"),v(r,"class","pull-right"),v(i,"class","panel-heading clearfix"),v(h,"class","list-container"),v(f,"class","panel-body"),v(n,"class","panel panel-default"),v(e,"class","queue-panel-container")},m(y,w){Z(y,e,w),E(e,n),E(n,i),E(i,o),E(i,l),E(i,r),E(r,u),E(r,s),P.m(r,null),E(r,a),E(r,c),E(n,d),E(n,f),E(f,h),t[9](e),p||(g=le(u,"click",t[6]),p=!0)},p(y,w){b===(b=m(y))&&P?P.p(y,w):(P.d(1),P=b(y),P&&(P.c(),P.m(r,a)))},d(y){y&&Q(e),P.d(),t[9](null),p=!1,g()}}}function Yo(t){let e,n,i;return{c(){e=C("a"),e.textContent=`${H.translate("Pause")}`,v(e,"href","/"),v(e,"title",H.translate("Pause")),v(e,"class","qm-button")},m(o,l){Z(o,e,l),n||(i=le(e,"click",t[8]),n=!0)},p:Ee,d(o){o&&Q(e),n=!1,i()}}}function Xo(t){let e,n,i;return{c(){e=C("a"),e.textContent=`${H.translate("Start")}`,v(e,"href","/"),v(e,"title",H.translate("Start")),v(e,"class","qm-button")},m(o,l){Z(o,e,l),n||(i=le(e,"click",t[7]),n=!0)},p:Ee,d(o){o&&Q(e),n=!1,i()}}}function jo(t){let e,n=t[0]&&pi(t);return{c(){n&&n.c(),e=ti()},m(i,o){n&&n.m(i,o),Z(i,e,o)},p(i,[o]){i[0]?n?n.p(i,o):(n=pi(i),n.c(),n.m(e.parentNode,e)):n&&(n.d(1),n=null)},i:Ee,o:Ee,d(i){i&&Q(e),n&&n.d(i)}}}function Go(t,e,n){let{isOpen:i=!1}=e,{close:o}=e,{icon:l}=e,r=!1;window.addEventListener("publicDataFetched",p=>{n(2,r=!!p.detail.qmPaused)});let u;function s(p){u&&!u.contains(p.target)&&l&&!l.contains(p.target)&&i===!0&&o()}cn(()=>{document.addEventListener("click",s)}),ni(()=>{document.removeEventListener("click",s)});async function a(p){let g=ci.get();if(g)try{const m=await fetch("/api/v1/App/action/QueueManagerUpdate",{method:"POST",headers:{"Content-Type":"application/json","Authorization-Token":btoa(g.user.userName+":"+g.token)},body:JSON.stringify({pause:p})});if(!m.ok)throw new Error("Network response was not ok");await m.json(),We.notify("Done","success")}catch(m){console.error("Error:",m)}}const c=p=>{p.preventDefault(),o()},d=p=>{p.preventDefault(),a(!1)},f=p=>{p.preventDefault(),a(!0)};function h(p){xe[p?"unshift":"push"](()=>{u=p,n(3,u)})}return t.$$set=p=>{"isOpen"in p&&n(0,i=p.isOpen),"close"in p&&n(1,o=p.close),"icon"in p&&n(5,l=p.icon)},[i,o,r,u,a,l,c,d,f,h]}class Uo extends Le{constructor(e){super(),Ce(this,e,Go,jo,De,{isOpen:0,close:1,icon:5})}}function hi(t){let e;return{c(){e=C("span"),v(e,"class","fas fa-pause-circle pause-icon")},m(n,i){Z(n,e,i)},d(n){n&&Q(e)}}}function Vo(t){let e,n,i,o,l,r,u,s,a=t[2]&&hi();return l=new Uo({props:{icon:t[0],isOpen:t[1],close:t[4]}}),{c(){e=C("a"),n=C("span"),i=Y(),a&&a.c(),o=Y(),Ke(l.$$.fragment),v(n,"class","fas fa-tasks"),v(e,"href","/"),v(e,"class","notifications-button")},m(c,d){Z(c,e,d),E(e,n),E(e,i),a&&a.m(e,null),t[6](e),Z(c,o,d),He(l,c,d),r=!0,u||(s=le(e,"click",t[7]),u=!0)},p(c,[d]){c[2]?a||(a=hi(),a.c(),a.m(e,null)):a&&(a.d(1),a=null);const f={};d&1&&(f.icon=c[0]),d&2&&(f.isOpen=c[1]),l.$set(f)},i(c){r||(Pe(l.$$.fragment,c),r=!0)},o(c){Be(l.$$.fragment,c),r=!1},d(c){c&&(Q(e),Q(o)),a&&a.d(),t[6](null),Re(l,c),u=!1,s()}}}function Qo(t,e,n){let{renderTable:i=()=>{}}=e,o,l=!1,r=!1;window.addEventListener("publicDataFetched",d=>{n(2,r=!!d.detail.qmPaused)});function u(){l||(n(1,l=!0),i())}function s(){n(1,l=!1),window.dispatchEvent(new Event("qmPanelClosed"))}function a(d){xe[d?"unshift":"push"](()=>{o=d,n(0,o)})}const c=d=>{d.preventDefault(),u()};return t.$$set=d=>{"renderTable"in d&&n(5,i=d.renderTable)},[o,l,r,u,s,i,a,c]}class Ko extends Le{constructor(e){super(),Ce(this,e,Qo,Vo,De,{renderTable:5})}}function Zo(t){let e,n=`${t[0]}px`,i=`${t[0]}px`,o=`${t[1]}px`;return{c(){e=C("div"),v(e,"class","loading-icon spinner svelte-yw8t7l"),Qe(e,"width",n),Qe(e,"height",i),Qe(e,"border-width",o)},m(l,r){Z(l,e,r)},p(l,[r]){r&1&&n!==(n=`${l[0]}px`)&&Qe(e,"width",n),r&1&&i!==(i=`${l[0]}px`)&&Qe(e,"height",i),r&2&&o!==(o=`${l[1]}px`)&&Qe(e,"border-width",o)},i:Ee,o:Ee,d(l){l&&Q(e)}}}function Jo(t,e,n){let{size:i=40}=e,{thickness:o=4}=e;return t.$$set=l=>{"size"in l&&n(0,i=l.size),"thickness"in l&&n(1,o=l.thickness)},[i,o]}class $o extends Le{constructor(e){super(),Ce(this,e,Jo,Zo,De,{size:0,thickness:1})}}function mi(t){let e,n;return{c(){e=C("img"),$n(e.src,n=t[1])||v(e,"src",n),v(e,"class","logo"),v(e,"alt",t[0])},m(i,o){Z(i,e,o)},p(i,o){o&2&&!$n(e.src,n=i[1])&&v(e,"src",n),o&1&&v(e,"alt",i[0])},d(i){i&&Q(e)}}}function gi(t){let e,n,i;return{c(){e=C("a"),n=C("i"),i=he("Recovery Instructions"),v(n,"class","fa fa-history svelte-1qmezxs"),v(e,"href",t[2]),v(e,"target","_blank"),v(e,"class","btn btn-default svelte-1qmezxs"),v(e,"role","button"),Qe(e,"float","right")},m(o,l){Z(o,e,l),E(e,n),E(e,i)},p(o,l){l&4&&v(e,"href",o[2])},d(o){o&&Q(e)}}}function vi(t){let e,n,i,o,l,r;return{c(){e=C("hr"),n=Y(),i=C("pre"),o=he(t[3]),v(i,"class","logs-container svelte-1qmezxs")},m(u,s){Z(u,e,s),Z(u,n,s),Z(u,i,s),E(i,o),t[11](i),l||(r=le(i,"scroll",t[8]),l=!0)},p(u,s){s&8&&Ne(o,u[3])},d(u){u&&(Q(e),Q(n),Q(i)),t[11](null),l=!1,r()}}}function el(t){let e,n,i,o,l,r,u,s,a,c,d,f,h,p,g,m,b,P,y=t[4]?"Hide":"Show",w,_,S,D,x,T,J,te,G=t[1]&&mi(t);c=new $o({props:{size:"40",thickness:"5"}});let X=t[2]&&gi(t),V=t[4]&&t[3]&&vi(t);return{c(){e=C("div"),n=C("div"),i=C("div"),G&&G.c(),o=Y(),l=C("div"),r=C("div"),u=C("h3"),u.textContent="System is updating...",s=Y(),a=C("section"),Ke(c.$$.fragment),d=Y(),f=C("h5"),h=he(t[5]),p=Y(),g=C("section"),m=C("div"),b=C("button"),P=C("i"),w=he(y),_=he(" logs"),D=Y(),X&&X.c(),x=Y(),V&&V.c(),v(i,"class","logo-container"),v(n,"class","panel-heading"),v(f,"class","svelte-1qmezxs"),v(a,"class","progress-section svelte-1qmezxs"),v(P,"class","fa fa-list svelte-1qmezxs"),v(b,"class","btn btn-default svelte-1qmezxs"),b.disabled=S=!t[3],v(m,"class","buttons"),v(g,"class","logs-section"),v(r,"class","form-group"),v(l,"class","panel-body"),v(e,"id","login"),v(e,"class","panel panel-default panel-updating")},m(N,q){Z(N,e,q),E(e,n),E(n,i),G&&G.m(i,null),E(e,o),E(e,l),E(l,r),E(r,u),E(r,s),E(r,a),He(c,a,null),E(a,d),E(a,f),E(f,h),E(r,p),E(r,g),E(g,m),E(m,b),E(b,P),E(b,w),E(b,_),E(m,D),X&&X.m(m,null),E(g,x),V&&V.m(g,null),T=!0,J||(te=le(b,"click",t[7]),J=!0)},p(N,[q]){N[1]?G?G.p(N,q):(G=mi(N),G.c(),G.m(i,null)):G&&(G.d(1),G=null),(!T||q&32)&&Ne(h,N[5]),(!T||q&16)&&y!==(y=N[4]?"Hide":"Show")&&Ne(w,y),(!T||q&8&&S!==(S=!N[3]))&&(b.disabled=S),N[2]?X?X.p(N,q):(X=gi(N),X.c(),X.m(m,null)):X&&(X.d(1),X=null),N[4]&&N[3]?V?V.p(N,q):(V=vi(N),V.c(),V.m(g,null)):V&&(V.d(1),V=null)},i(N){T||(Pe(c.$$.fragment,N),T=!0)},o(N){Be(c.$$.fragment,N),T=!1},d(N){N&&Q(e),G&&G.d(),Re(c),X&&X.d(),V&&V.d(),J=!1,te()}}}function tl(t){return t.replace(/^\d{2,4}.\d{2}.\d{2,4} \d{2}:\d{2}:\d{2}/g,"").replace(/^[\-\|\s]+/,"")}function nl(t,e,n){let{applicationName:i="AtroCore"}=e,{logoPath:o=null}=e,{logFilePath:l}=e,{restoreLink:r=null}=e,u=!1,s=!1,a=0,c=!0,d="",f,h;xo(()=>{h&&c&&h.scrollTo(0,h.scrollHeight)});function p(){n(4,u=!u),u||(c=!0)}function g(b){const P=b.currentTarget;c=P.scrollHeight-P.scrollTop===P.clientHeight}setInterval(async()=>{try{const b=await fetch(l,{cache:"no-store"});a+=1,b.ok?(n(3,d=(await b.text()).trim()),d.search("composer")>=0&&n(10,s=!0),a>65&&!s&&n(3,d="Something wrong. Please, reboot the server.")):s?setTimeout(()=>{location.reload()},2e3):a>65&&n(3,d="Something wrong. Please, reboot the server.")}catch(b){console.error("Error: ",b)}},1e3);function m(b){xe[b?"unshift":"push"](()=>{h=b,n(6,h)})}return t.$$set=b=>{"applicationName"in b&&n(0,i=b.applicationName),"logoPath"in b&&n(1,o=b.logoPath),"logFilePath"in b&&n(9,l=b.logFilePath),"restoreLink"in b&&n(2,r=b.restoreLink)},t.$$.update=()=>{if(t.$$.dirty&1032)if(d){const b=d.trim().split(`
`);n(5,f=tl(b.pop()))}else s?n(5,f=""):n(5,f="Starting...")},[i,o,r,d,u,f,h,p,g,l,s,m]}class il extends Le{constructor(e){super(),Ce(this,e,nl,el,De,{applicationName:0,logoPath:1,logFilePath:9,restoreLink:2})}}function bi(t,e,n){const i=t.slice();return i[16]=e[n],i}function yi(t){let e,n=t[16].label+"",i,o,l,r,u,s,a;function c(){return t[9](t[16])}return{c(){e=C("button"),i=he(n),o=Y(),v(e,"data-action",l=t[16].name),e.disabled=r=t[16].disabled,v(e,"type","button"),v(e,"class",u=`btn action btn-${t[16].style??"default"}`)},m(d,f){Z(d,e,f),E(e,i),E(e,o),s||(a=le(e,"click",c),s=!0)},p(d,f){t=d,f&1&&n!==(n=t[16].label+"")&&Ne(i,n),f&1&&l!==(l=t[16].name)&&v(e,"data-action",l),f&1&&r!==(r=t[16].disabled)&&(e.disabled=r),f&1&&u!==(u=`btn action btn-${t[16].style??"default"}`)&&v(e,"class",u)},d(d){d&&Q(e),s=!1,a()}}}function ol(t){let e,n,i,o=me(t[0]),l=[];for(let s=0;s<o.length;s+=1)l[s]=yi(bi(t,o,s));const r=t[8].default,u=To(r,t,t[7],null);return{c(){e=C("div");for(let s=0;s<l.length;s+=1)l[s].c();n=Y(),u&&u.c(),v(e,"class","button-container")},m(s,a){Z(s,e,a);for(let c=0;c<l.length;c+=1)l[c]&&l[c].m(e,null);Z(s,n,a),u&&u.m(s,a),i=!0},p(s,[a]){if(a&3){o=me(s[0]);let c;for(c=0;c<o.length;c+=1){const d=bi(s,o,c);l[c]?l[c].p(d,a):(l[c]=yi(d),l[c].c(),l[c].m(e,null))}for(;c<l.length;c+=1)l[c].d(1);l.length=o.length}u&&u.p&&(!i||a&128)&&Io(u,r,s,s[7],i?Ao(r,s[7],a,null):Oo(s[7]),null)},i(s){i||(Pe(u,s),i=!0)},o(s){Be(u,s),i=!1},d(s){s&&(Q(e),Q(n)),sn(l,s),u&&u.d(s)}}}function ll(t,e,n){let{$$slots:i={},$$scope:o}=e,{params:l}=e,{fetch:r}=e,{loadLayout:u=()=>{ze.get(scope,type,layoutProfileId,y=>{layout=y},!1)}}=e,{validate:s=()=>!0}=e,a=[{name:"save",label:H.translate("Save","labels"),style:"primary"},{name:"cancel",label:H.translate("Cancel","labels")},{name:"resetToDefault",label:H.translate("resetToDefault","labels","LayoutManager")}];const c=Espo.link_LayoutProfile;if(c)for(const y of c)y.id===l.layoutProfileId&&y.isDefault&&a.splice(2,1);cn(()=>{We.notify("Loading..."),u(()=>{We.notify(!1),l.afterRender&&l.afterRender()})});function d(){g();const y=r();if(!s(y)){m();return}We.notify("Saving..."),ze.set(l.scope,l.type,l.layoutProfileId,y,()=>{We.notify("Saved","success",2e3),f(),m()})}function f(){l.onUpdate&&l.onUpdate({scope:l.scope,type:l.type,layoutProfileId:l.layoutProfileId})}function h(){u()}function p(){We.confirm("Are you sure you want to reset to default?",()=>{ze.resetToDefault(l.scope,l.type,l.layoutProfileId,()=>{f(),h()})})}function g(){n(0,a=a.map(y=>({...y,disabled:!0})))}function m(){n(0,a=a.map(y=>({...y,disabled:!1})))}function b(y){switch(y.name){case"save":d();break;case"cancel":h();break;case"resetToDefault":p();break}}const P=y=>b(y);return t.$$set=y=>{"params"in y&&n(2,l=y.params),"fetch"in y&&n(3,r=y.fetch),"loadLayout"in y&&n(4,u=y.loadLayout),"validate"in y&&n(5,s=y.validate),"$$scope"in y&&n(7,o=y.$$scope)},[a,b,l,r,u,s,d,o,i,P]}class _i extends Le{constructor(e){super(),Ce(this,e,ll,ol,De,{params:2,fetch:3,loadLayout:4,validate:5,save:6})}get save(){return this.$$.ctx[6]}}/**!
 * Sortable 1.15.2
 * @author	RubaXa   <trash@rubaxa.org>
 * @author	owenm    <owen23355@gmail.com>
 * @license MIT
 */function wi(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(o){return Object.getOwnPropertyDescriptor(t,o).enumerable})),n.push.apply(n,i)}return n}function Oe(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?wi(Object(n),!0).forEach(function(i){rl(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):wi(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function Yt(t){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Yt=function(e){return typeof e}:Yt=function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Yt(t)}function rl(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Ye(){return Ye=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},Ye.apply(this,arguments)}function al(t,e){if(t==null)return{};var n={},i=Object.keys(t),o,l;for(l=0;l<i.length;l++)o=i[l],!(e.indexOf(o)>=0)&&(n[o]=t[o]);return n}function sl(t,e){if(t==null)return{};var n=al(t,e),i,o;if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(t);for(o=0;o<l.length;o++)i=l[o],!(e.indexOf(i)>=0)&&Object.prototype.propertyIsEnumerable.call(t,i)&&(n[i]=t[i])}return n}var ul="1.15.2";function Xe(t){if(typeof window<"u"&&window.navigator)return!!navigator.userAgent.match(t)}var je=Xe(/(?:Trident.*rv[ :]?11\.|msie|iemobile|Windows Phone)/i),_t=Xe(/Edge/i),Ei=Xe(/firefox/i),wt=Xe(/safari/i)&&!Xe(/chrome/i)&&!Xe(/android/i),Di=Xe(/iP(ad|od|hone)/i),Si=Xe(/chrome/i)&&Xe(/android/i),ki={capture:!1,passive:!1};function U(t,e,n){t.addEventListener(e,n,!je&&ki)}function j(t,e,n){t.removeEventListener(e,n,!je&&ki)}function Xt(t,e){if(e){if(e[0]===">"&&(e=e.substring(1)),t)try{if(t.matches)return t.matches(e);if(t.msMatchesSelector)return t.msMatchesSelector(e);if(t.webkitMatchesSelector)return t.webkitMatchesSelector(e)}catch{return!1}return!1}}function cl(t){return t.host&&t!==document&&t.host.nodeType?t.host:t.parentNode}function Te(t,e,n,i){if(t){n=n||document;do{if(e!=null&&(e[0]===">"?t.parentNode===n&&Xt(t,e):Xt(t,e))||i&&t===n)return t;if(t===n)break}while(t=cl(t))}return null}var Pi=/\s+/g;function ye(t,e,n){if(t&&e)if(t.classList)t.classList[n?"add":"remove"](e);else{var i=(" "+t.className+" ").replace(Pi," ").replace(" "+e+" "," ");t.className=(i+(n?" "+e:"")).replace(Pi," ")}}function F(t,e,n){var i=t&&t.style;if(i){if(n===void 0)return document.defaultView&&document.defaultView.getComputedStyle?n=document.defaultView.getComputedStyle(t,""):t.currentStyle&&(n=t.currentStyle),e===void 0?n:n[e];!(e in i)&&e.indexOf("webkit")===-1&&(e="-webkit-"+e),i[e]=n+(typeof n=="string"?"":"px")}}function dt(t,e){var n="";if(typeof t=="string")n=t;else do{var i=F(t,"transform");i&&i!=="none"&&(n=i+" "+n)}while(!e&&(t=t.parentNode));var o=window.DOMMatrix||window.WebKitCSSMatrix||window.CSSMatrix||window.MSCSSMatrix;return o&&new o(n)}function Ci(t,e,n){if(t){var i=t.getElementsByTagName(e),o=0,l=i.length;if(n)for(;o<l;o++)n(i[o],o);return i}return[]}function Me(){var t=document.scrollingElement;return t||document.documentElement}function re(t,e,n,i,o){if(!(!t.getBoundingClientRect&&t!==window)){var l,r,u,s,a,c,d;if(t!==window&&t.parentNode&&t!==Me()?(l=t.getBoundingClientRect(),r=l.top,u=l.left,s=l.bottom,a=l.right,c=l.height,d=l.width):(r=0,u=0,s=window.innerHeight,a=window.innerWidth,c=window.innerHeight,d=window.innerWidth),(e||n)&&t!==window&&(o=o||t.parentNode,!je))do if(o&&o.getBoundingClientRect&&(F(o,"transform")!=="none"||n&&F(o,"position")!=="static")){var f=o.getBoundingClientRect();r-=f.top+parseInt(F(o,"border-top-width")),u-=f.left+parseInt(F(o,"border-left-width")),s=r+l.height,a=u+l.width;break}while(o=o.parentNode);if(i&&t!==window){var h=dt(o||t),p=h&&h.a,g=h&&h.d;h&&(r/=g,u/=p,d/=p,c/=g,s=r+c,a=u+d)}return{top:r,left:u,bottom:s,right:a,width:d,height:c}}}function Li(t,e,n){for(var i=Ze(t,!0),o=re(t)[e];i;){var l=re(i)[n],r=void 0;if(r=o>=l,!r)return i;if(i===Me())break;i=Ze(i,!1)}return!1}function ft(t,e,n,i){for(var o=0,l=0,r=t.children;l<r.length;){if(r[l].style.display!=="none"&&r[l]!==M.ghost&&(i||r[l]!==M.dragged)&&Te(r[l],n.draggable,t,!1)){if(o===e)return r[l];o++}l++}return null}function gn(t,e){for(var n=t.lastElementChild;n&&(n===M.ghost||F(n,"display")==="none"||e&&!Xt(n,e));)n=n.previousElementSibling;return n||null}function Se(t,e){var n=0;if(!t||!t.parentNode)return-1;for(;t=t.previousElementSibling;)t.nodeName.toUpperCase()!=="TEMPLATE"&&t!==M.clone&&(!e||Xt(t,e))&&n++;return n}function Ti(t){var e=0,n=0,i=Me();if(t)do{var o=dt(t),l=o.a,r=o.d;e+=t.scrollLeft*l,n+=t.scrollTop*r}while(t!==i&&(t=t.parentNode));return[e,n]}function dl(t,e){for(var n in t)if(t.hasOwnProperty(n)){for(var i in e)if(e.hasOwnProperty(i)&&e[i]===t[n][i])return Number(n)}return-1}function Ze(t,e){if(!t||!t.getBoundingClientRect)return Me();var n=t,i=!1;do if(n.clientWidth<n.scrollWidth||n.clientHeight<n.scrollHeight){var o=F(n);if(n.clientWidth<n.scrollWidth&&(o.overflowX=="auto"||o.overflowX=="scroll")||n.clientHeight<n.scrollHeight&&(o.overflowY=="auto"||o.overflowY=="scroll")){if(!n.getBoundingClientRect||n===document.body)return Me();if(i||e)return n;i=!0}}while(n=n.parentNode);return Me()}function fl(t,e){if(t&&e)for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t}function vn(t,e){return Math.round(t.top)===Math.round(e.top)&&Math.round(t.left)===Math.round(e.left)&&Math.round(t.height)===Math.round(e.height)&&Math.round(t.width)===Math.round(e.width)}var Et;function Ai(t,e){return function(){if(!Et){var n=arguments,i=this;n.length===1?t.call(i,n[0]):t.apply(i,n),Et=setTimeout(function(){Et=void 0},e)}}}function pl(){clearTimeout(Et),Et=void 0}function Ii(t,e,n){t.scrollLeft+=e,t.scrollTop+=n}function Oi(t){var e=window.Polymer,n=window.jQuery||window.Zepto;return e&&e.dom?e.dom(t).cloneNode(!0):n?n(t).clone(!0)[0]:t.cloneNode(!0)}function Mi(t,e,n){var i={};return Array.from(t.children).forEach(function(o){var l,r,u,s;if(!(!Te(o,e.draggable,t,!1)||o.animated||o===n)){var a=re(o);i.left=Math.min((l=i.left)!==null&&l!==void 0?l:1/0,a.left),i.top=Math.min((r=i.top)!==null&&r!==void 0?r:1/0,a.top),i.right=Math.max((u=i.right)!==null&&u!==void 0?u:-1/0,a.right),i.bottom=Math.max((s=i.bottom)!==null&&s!==void 0?s:-1/0,a.bottom)}}),i.width=i.right-i.left,i.height=i.bottom-i.top,i.x=i.left,i.y=i.top,i}var _e="Sortable"+new Date().getTime();function hl(){var t=[],e;return{captureAnimationState:function(){if(t=[],!!this.options.animation){var i=[].slice.call(this.el.children);i.forEach(function(o){if(!(F(o,"display")==="none"||o===M.ghost)){t.push({target:o,rect:re(o)});var l=Oe({},t[t.length-1].rect);if(o.thisAnimationDuration){var r=dt(o,!0);r&&(l.top-=r.f,l.left-=r.e)}o.fromRect=l}})}},addAnimationState:function(i){t.push(i)},removeAnimationState:function(i){t.splice(dl(t,{target:i}),1)},animateAll:function(i){var o=this;if(!this.options.animation){clearTimeout(e),typeof i=="function"&&i();return}var l=!1,r=0;t.forEach(function(u){var s=0,a=u.target,c=a.fromRect,d=re(a),f=a.prevFromRect,h=a.prevToRect,p=u.rect,g=dt(a,!0);g&&(d.top-=g.f,d.left-=g.e),a.toRect=d,a.thisAnimationDuration&&vn(f,d)&&!vn(c,d)&&(p.top-d.top)/(p.left-d.left)===(c.top-d.top)/(c.left-d.left)&&(s=gl(p,f,h,o.options)),vn(d,c)||(a.prevFromRect=c,a.prevToRect=d,s||(s=o.options.animation),o.animate(a,p,d,s)),s&&(l=!0,r=Math.max(r,s),clearTimeout(a.animationResetTimer),a.animationResetTimer=setTimeout(function(){a.animationTime=0,a.prevFromRect=null,a.fromRect=null,a.prevToRect=null,a.thisAnimationDuration=null},s),a.thisAnimationDuration=s)}),clearTimeout(e),l?e=setTimeout(function(){typeof i=="function"&&i()},r):typeof i=="function"&&i(),t=[]},animate:function(i,o,l,r){if(r){F(i,"transition",""),F(i,"transform","");var u=dt(this.el),s=u&&u.a,a=u&&u.d,c=(o.left-l.left)/(s||1),d=(o.top-l.top)/(a||1);i.animatingX=!!c,i.animatingY=!!d,F(i,"transform","translate3d("+c+"px,"+d+"px,0)"),this.forRepaintDummy=ml(i),F(i,"transition","transform "+r+"ms"+(this.options.easing?" "+this.options.easing:"")),F(i,"transform","translate3d(0,0,0)"),typeof i.animated=="number"&&clearTimeout(i.animated),i.animated=setTimeout(function(){F(i,"transition",""),F(i,"transform",""),i.animated=!1,i.animatingX=!1,i.animatingY=!1},r)}}}}function ml(t){return t.offsetWidth}function gl(t,e,n,i){return Math.sqrt(Math.pow(e.top-t.top,2)+Math.pow(e.left-t.left,2))/Math.sqrt(Math.pow(e.top-n.top,2)+Math.pow(e.left-n.left,2))*i.animation}var pt=[],bn={initializeByDefault:!0},Dt={mount:function(e){for(var n in bn)bn.hasOwnProperty(n)&&!(n in e)&&(e[n]=bn[n]);pt.forEach(function(i){if(i.pluginName===e.pluginName)throw"Sortable: Cannot mount plugin ".concat(e.pluginName," more than once")}),pt.push(e)},pluginEvent:function(e,n,i){var o=this;this.eventCanceled=!1,i.cancel=function(){o.eventCanceled=!0};var l=e+"Global";pt.forEach(function(r){n[r.pluginName]&&(n[r.pluginName][l]&&n[r.pluginName][l](Oe({sortable:n},i)),n.options[r.pluginName]&&n[r.pluginName][e]&&n[r.pluginName][e](Oe({sortable:n},i)))})},initializePlugins:function(e,n,i,o){pt.forEach(function(u){var s=u.pluginName;if(!(!e.options[s]&&!u.initializeByDefault)){var a=new u(e,n,e.options);a.sortable=e,a.options=e.options,e[s]=a,Ye(i,a.defaults)}});for(var l in e.options)if(e.options.hasOwnProperty(l)){var r=this.modifyOption(e,l,e.options[l]);typeof r<"u"&&(e.options[l]=r)}},getEventProperties:function(e,n){var i={};return pt.forEach(function(o){typeof o.eventProperties=="function"&&Ye(i,o.eventProperties.call(n[o.pluginName],e))}),i},modifyOption:function(e,n,i){var o;return pt.forEach(function(l){e[l.pluginName]&&l.optionListeners&&typeof l.optionListeners[n]=="function"&&(o=l.optionListeners[n].call(e[l.pluginName],i))}),o}};function vl(t){var e=t.sortable,n=t.rootEl,i=t.name,o=t.targetEl,l=t.cloneEl,r=t.toEl,u=t.fromEl,s=t.oldIndex,a=t.newIndex,c=t.oldDraggableIndex,d=t.newDraggableIndex,f=t.originalEvent,h=t.putSortable,p=t.extraEventProperties;if(e=e||n&&n[_e],!!e){var g,m=e.options,b="on"+i.charAt(0).toUpperCase()+i.substr(1);window.CustomEvent&&!je&&!_t?g=new CustomEvent(i,{bubbles:!0,cancelable:!0}):(g=document.createEvent("Event"),g.initEvent(i,!0,!0)),g.to=r||n,g.from=u||n,g.item=o||n,g.clone=l,g.oldIndex=s,g.newIndex=a,g.oldDraggableIndex=c,g.newDraggableIndex=d,g.originalEvent=f,g.pullMode=h?h.lastPutMode:void 0;var P=Oe(Oe({},p),Dt.getEventProperties(i,e));for(var y in P)g[y]=P[y];n&&n.dispatchEvent(g),m[b]&&m[b].call(e,g)}}var bl=["evt"],ge=function(e,n){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},o=i.evt,l=sl(i,bl);Dt.pluginEvent.bind(M)(e,n,Oe({dragEl:k,parentEl:oe,ghostEl:B,rootEl:ee,nextEl:nt,lastDownEl:jt,cloneEl:ne,cloneHidden:Je,dragStarted:kt,putSortable:ue,activeSortable:M.active,originalEvent:o,oldIndex:ht,oldDraggableIndex:St,newIndex:we,newDraggableIndex:$e,hideGhostForTarget:Wi,unhideGhostForTarget:zi,cloneNowHidden:function(){Je=!0},cloneNowShown:function(){Je=!1},dispatchSortableEvent:function(u){fe({sortable:n,name:u,originalEvent:o})}},l))};function fe(t){vl(Oe({putSortable:ue,cloneEl:ne,targetEl:k,rootEl:ee,oldIndex:ht,oldDraggableIndex:St,newIndex:we,newDraggableIndex:$e},t))}var k,oe,B,ee,nt,jt,ne,Je,ht,we,St,$e,Gt,ue,mt=!1,Ut=!1,Vt=[],it,Ae,yn,_n,Fi,Ni,kt,gt,Pt,Ct=!1,Qt=!1,Kt,ce,wn=[],En=!1,Zt=[],Jt=typeof document<"u",$t=Di,xi=_t||je?"cssFloat":"float",yl=Jt&&!Si&&!Di&&"draggable"in document.createElement("div"),Bi=function(){if(Jt){if(je)return!1;var t=document.createElement("x");return t.style.cssText="pointer-events:auto",t.style.pointerEvents==="auto"}}(),Hi=function(e,n){var i=F(e),o=parseInt(i.width)-parseInt(i.paddingLeft)-parseInt(i.paddingRight)-parseInt(i.borderLeftWidth)-parseInt(i.borderRightWidth),l=ft(e,0,n),r=ft(e,1,n),u=l&&F(l),s=r&&F(r),a=u&&parseInt(u.marginLeft)+parseInt(u.marginRight)+re(l).width,c=s&&parseInt(s.marginLeft)+parseInt(s.marginRight)+re(r).width;if(i.display==="flex")return i.flexDirection==="column"||i.flexDirection==="column-reverse"?"vertical":"horizontal";if(i.display==="grid")return i.gridTemplateColumns.split(" ").length<=1?"vertical":"horizontal";if(l&&u.float&&u.float!=="none"){var d=u.float==="left"?"left":"right";return r&&(s.clear==="both"||s.clear===d)?"vertical":"horizontal"}return l&&(u.display==="block"||u.display==="flex"||u.display==="table"||u.display==="grid"||a>=o&&i[xi]==="none"||r&&i[xi]==="none"&&a+c>o)?"vertical":"horizontal"},_l=function(e,n,i){var o=i?e.left:e.top,l=i?e.right:e.bottom,r=i?e.width:e.height,u=i?n.left:n.top,s=i?n.right:n.bottom,a=i?n.width:n.height;return o===u||l===s||o+r/2===u+a/2},wl=function(e,n){var i;return Vt.some(function(o){var l=o[_e].options.emptyInsertThreshold;if(!(!l||gn(o))){var r=re(o),u=e>=r.left-l&&e<=r.right+l,s=n>=r.top-l&&n<=r.bottom+l;if(u&&s)return i=o}}),i},Ri=function(e){function n(l,r){return function(u,s,a,c){var d=u.options.group.name&&s.options.group.name&&u.options.group.name===s.options.group.name;if(l==null&&(r||d))return!0;if(l==null||l===!1)return!1;if(r&&l==="clone")return l;if(typeof l=="function")return n(l(u,s,a,c),r)(u,s,a,c);var f=(r?u:s).options.group.name;return l===!0||typeof l=="string"&&l===f||l.join&&l.indexOf(f)>-1}}var i={},o=e.group;(!o||Yt(o)!="object")&&(o={name:o}),i.name=o.name,i.checkPull=n(o.pull,!0),i.checkPut=n(o.put),i.revertClone=o.revertClone,e.group=i},Wi=function(){!Bi&&B&&F(B,"display","none")},zi=function(){!Bi&&B&&F(B,"display","")};Jt&&!Si&&document.addEventListener("click",function(t){if(Ut)return t.preventDefault(),t.stopPropagation&&t.stopPropagation(),t.stopImmediatePropagation&&t.stopImmediatePropagation(),Ut=!1,!1},!0);var ot=function(e){if(k){e=e.touches?e.touches[0]:e;var n=wl(e.clientX,e.clientY);if(n){var i={};for(var o in e)e.hasOwnProperty(o)&&(i[o]=e[o]);i.target=i.rootEl=n,i.preventDefault=void 0,i.stopPropagation=void 0,n[_e]._onDragOver(i)}}},El=function(e){k&&k.parentNode[_e]._isOutsideThisEl(e.target)};function M(t,e){if(!(t&&t.nodeType&&t.nodeType===1))throw"Sortable: `el` must be an HTMLElement, not ".concat({}.toString.call(t));this.el=t,this.options=e=Ye({},e),t[_e]=this;var n={group:null,sort:!0,disabled:!1,store:null,handle:null,draggable:/^[uo]l$/i.test(t.nodeName)?">li":">*",swapThreshold:1,invertSwap:!1,invertedSwapThreshold:null,removeCloneOnHide:!0,direction:function(){return Hi(t,this.options)},ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",dragClass:"sortable-drag",ignore:"a, img",filter:null,preventOnFilter:!0,animation:0,easing:null,setData:function(r,u){r.setData("Text",u.textContent)},dropBubble:!1,dragoverBubble:!1,dataIdAttr:"data-id",delay:0,delayOnTouchOnly:!1,touchStartThreshold:(Number.parseInt?Number:window).parseInt(window.devicePixelRatio,10)||1,forceFallback:!1,fallbackClass:"sortable-fallback",fallbackOnBody:!1,fallbackTolerance:0,fallbackOffset:{x:0,y:0},supportPointer:M.supportPointer!==!1&&"PointerEvent"in window&&!wt,emptyInsertThreshold:5};Dt.initializePlugins(this,t,n);for(var i in n)!(i in e)&&(e[i]=n[i]);Ri(e);for(var o in this)o.charAt(0)==="_"&&typeof this[o]=="function"&&(this[o]=this[o].bind(this));this.nativeDraggable=e.forceFallback?!1:yl,this.nativeDraggable&&(this.options.touchStartThreshold=1),e.supportPointer?U(t,"pointerdown",this._onTapStart):(U(t,"mousedown",this._onTapStart),U(t,"touchstart",this._onTapStart)),this.nativeDraggable&&(U(t,"dragover",this),U(t,"dragenter",this)),Vt.push(this.el),e.store&&e.store.get&&this.sort(e.store.get(this)||[]),Ye(this,hl())}M.prototype={constructor:M,_isOutsideThisEl:function(e){!this.el.contains(e)&&e!==this.el&&(gt=null)},_getDirection:function(e,n){return typeof this.options.direction=="function"?this.options.direction.call(this,e,n,k):this.options.direction},_onTapStart:function(e){if(e.cancelable){var n=this,i=this.el,o=this.options,l=o.preventOnFilter,r=e.type,u=e.touches&&e.touches[0]||e.pointerType&&e.pointerType==="touch"&&e,s=(u||e).target,a=e.target.shadowRoot&&(e.path&&e.path[0]||e.composedPath&&e.composedPath()[0])||s,c=o.filter;if(Al(i),!k&&!(/mousedown|pointerdown/.test(r)&&e.button!==0||o.disabled)&&!a.isContentEditable&&!(!this.nativeDraggable&&wt&&s&&s.tagName.toUpperCase()==="SELECT")&&(s=Te(s,o.draggable,i,!1),!(s&&s.animated)&&jt!==s)){if(ht=Se(s),St=Se(s,o.draggable),typeof c=="function"){if(c.call(this,e,s,this)){fe({sortable:n,rootEl:a,name:"filter",targetEl:s,toEl:i,fromEl:i}),ge("filter",n,{evt:e}),l&&e.cancelable&&e.preventDefault();return}}else if(c&&(c=c.split(",").some(function(d){if(d=Te(a,d.trim(),i,!1),d)return fe({sortable:n,rootEl:d,name:"filter",targetEl:s,fromEl:i,toEl:i}),ge("filter",n,{evt:e}),!0}),c)){l&&e.cancelable&&e.preventDefault();return}o.handle&&!Te(a,o.handle,i,!1)||this._prepareDragStart(e,u,s)}}},_prepareDragStart:function(e,n,i){var o=this,l=o.el,r=o.options,u=l.ownerDocument,s;if(i&&!k&&i.parentNode===l){var a=re(i);if(ee=l,k=i,oe=k.parentNode,nt=k.nextSibling,jt=i,Gt=r.group,M.dragged=k,it={target:k,clientX:(n||e).clientX,clientY:(n||e).clientY},Fi=it.clientX-a.left,Ni=it.clientY-a.top,this._lastX=(n||e).clientX,this._lastY=(n||e).clientY,k.style["will-change"]="all",s=function(){if(ge("delayEnded",o,{evt:e}),M.eventCanceled){o._onDrop();return}o._disableDelayedDragEvents(),!Ei&&o.nativeDraggable&&(k.draggable=!0),o._triggerDragStart(e,n),fe({sortable:o,name:"choose",originalEvent:e}),ye(k,r.chosenClass,!0)},r.ignore.split(",").forEach(function(c){Ci(k,c.trim(),Dn)}),U(u,"dragover",ot),U(u,"mousemove",ot),U(u,"touchmove",ot),U(u,"mouseup",o._onDrop),U(u,"touchend",o._onDrop),U(u,"touchcancel",o._onDrop),Ei&&this.nativeDraggable&&(this.options.touchStartThreshold=4,k.draggable=!0),ge("delayStart",this,{evt:e}),r.delay&&(!r.delayOnTouchOnly||n)&&(!this.nativeDraggable||!(_t||je))){if(M.eventCanceled){this._onDrop();return}U(u,"mouseup",o._disableDelayedDrag),U(u,"touchend",o._disableDelayedDrag),U(u,"touchcancel",o._disableDelayedDrag),U(u,"mousemove",o._delayedDragTouchMoveHandler),U(u,"touchmove",o._delayedDragTouchMoveHandler),r.supportPointer&&U(u,"pointermove",o._delayedDragTouchMoveHandler),o._dragStartTimer=setTimeout(s,r.delay)}else s()}},_delayedDragTouchMoveHandler:function(e){var n=e.touches?e.touches[0]:e;Math.max(Math.abs(n.clientX-this._lastX),Math.abs(n.clientY-this._lastY))>=Math.floor(this.options.touchStartThreshold/(this.nativeDraggable&&window.devicePixelRatio||1))&&this._disableDelayedDrag()},_disableDelayedDrag:function(){k&&Dn(k),clearTimeout(this._dragStartTimer),this._disableDelayedDragEvents()},_disableDelayedDragEvents:function(){var e=this.el.ownerDocument;j(e,"mouseup",this._disableDelayedDrag),j(e,"touchend",this._disableDelayedDrag),j(e,"touchcancel",this._disableDelayedDrag),j(e,"mousemove",this._delayedDragTouchMoveHandler),j(e,"touchmove",this._delayedDragTouchMoveHandler),j(e,"pointermove",this._delayedDragTouchMoveHandler)},_triggerDragStart:function(e,n){n=n||e.pointerType=="touch"&&e,!this.nativeDraggable||n?this.options.supportPointer?U(document,"pointermove",this._onTouchMove):n?U(document,"touchmove",this._onTouchMove):U(document,"mousemove",this._onTouchMove):(U(k,"dragend",this),U(ee,"dragstart",this._onDragStart));try{document.selection?tn(function(){document.selection.empty()}):window.getSelection().removeAllRanges()}catch{}},_dragStarted:function(e,n){if(mt=!1,ee&&k){ge("dragStarted",this,{evt:n}),this.nativeDraggable&&U(document,"dragover",El);var i=this.options;!e&&ye(k,i.dragClass,!1),ye(k,i.ghostClass,!0),M.active=this,e&&this._appendGhost(),fe({sortable:this,name:"start",originalEvent:n})}else this._nulling()},_emulateDragOver:function(){if(Ae){this._lastX=Ae.clientX,this._lastY=Ae.clientY,Wi();for(var e=document.elementFromPoint(Ae.clientX,Ae.clientY),n=e;e&&e.shadowRoot&&(e=e.shadowRoot.elementFromPoint(Ae.clientX,Ae.clientY),e!==n);)n=e;if(k.parentNode[_e]._isOutsideThisEl(e),n)do{if(n[_e]){var i=void 0;if(i=n[_e]._onDragOver({clientX:Ae.clientX,clientY:Ae.clientY,target:e,rootEl:n}),i&&!this.options.dragoverBubble)break}e=n}while(n=n.parentNode);zi()}},_onTouchMove:function(e){if(it){var n=this.options,i=n.fallbackTolerance,o=n.fallbackOffset,l=e.touches?e.touches[0]:e,r=B&&dt(B,!0),u=B&&r&&r.a,s=B&&r&&r.d,a=$t&&ce&&Ti(ce),c=(l.clientX-it.clientX+o.x)/(u||1)+(a?a[0]-wn[0]:0)/(u||1),d=(l.clientY-it.clientY+o.y)/(s||1)+(a?a[1]-wn[1]:0)/(s||1);if(!M.active&&!mt){if(i&&Math.max(Math.abs(l.clientX-this._lastX),Math.abs(l.clientY-this._lastY))<i)return;this._onDragStart(e,!0)}if(B){r?(r.e+=c-(yn||0),r.f+=d-(_n||0)):r={a:1,b:0,c:0,d:1,e:c,f:d};var f="matrix(".concat(r.a,",").concat(r.b,",").concat(r.c,",").concat(r.d,",").concat(r.e,",").concat(r.f,")");F(B,"webkitTransform",f),F(B,"mozTransform",f),F(B,"msTransform",f),F(B,"transform",f),yn=c,_n=d,Ae=l}e.cancelable&&e.preventDefault()}},_appendGhost:function(){if(!B){var e=this.options.fallbackOnBody?document.body:ee,n=re(k,!0,$t,!0,e),i=this.options;if($t){for(ce=e;F(ce,"position")==="static"&&F(ce,"transform")==="none"&&ce!==document;)ce=ce.parentNode;ce!==document.body&&ce!==document.documentElement?(ce===document&&(ce=Me()),n.top+=ce.scrollTop,n.left+=ce.scrollLeft):ce=Me(),wn=Ti(ce)}B=k.cloneNode(!0),ye(B,i.ghostClass,!1),ye(B,i.fallbackClass,!0),ye(B,i.dragClass,!0),F(B,"transition",""),F(B,"transform",""),F(B,"box-sizing","border-box"),F(B,"margin",0),F(B,"top",n.top),F(B,"left",n.left),F(B,"width",n.width),F(B,"height",n.height),F(B,"opacity","0.8"),F(B,"position",$t?"absolute":"fixed"),F(B,"zIndex","100000"),F(B,"pointerEvents","none"),M.ghost=B,e.appendChild(B),F(B,"transform-origin",Fi/parseInt(B.style.width)*100+"% "+Ni/parseInt(B.style.height)*100+"%")}},_onDragStart:function(e,n){var i=this,o=e.dataTransfer,l=i.options;if(ge("dragStart",this,{evt:e}),M.eventCanceled){this._onDrop();return}ge("setupClone",this),M.eventCanceled||(ne=Oi(k),ne.removeAttribute("id"),ne.draggable=!1,ne.style["will-change"]="",this._hideClone(),ye(ne,this.options.chosenClass,!1),M.clone=ne),i.cloneId=tn(function(){ge("clone",i),!M.eventCanceled&&(i.options.removeCloneOnHide||ee.insertBefore(ne,k),i._hideClone(),fe({sortable:i,name:"clone"}))}),!n&&ye(k,l.dragClass,!0),n?(Ut=!0,i._loopId=setInterval(i._emulateDragOver,50)):(j(document,"mouseup",i._onDrop),j(document,"touchend",i._onDrop),j(document,"touchcancel",i._onDrop),o&&(o.effectAllowed="move",l.setData&&l.setData.call(i,o,k)),U(document,"drop",i),F(k,"transform","translateZ(0)")),mt=!0,i._dragStartId=tn(i._dragStarted.bind(i,n,e)),U(document,"selectstart",i),kt=!0,wt&&F(document.body,"user-select","none")},_onDragOver:function(e){var n=this.el,i=e.target,o,l,r,u=this.options,s=u.group,a=M.active,c=Gt===s,d=u.sort,f=ue||a,h,p=this,g=!1;if(En)return;function m(lt,Mn){ge(lt,p,Oe({evt:e,isOwner:c,axis:h?"vertical":"horizontal",revert:r,dragRect:o,targetRect:l,canSort:d,fromSortable:f,target:i,completed:P,onMove:function(rn,Fn){return en(ee,n,k,o,rn,re(rn),e,Fn)},changed:y},Mn))}function b(){m("dragOverAnimationCapture"),p.captureAnimationState(),p!==f&&f.captureAnimationState()}function P(lt){return m("dragOverCompleted",{insertion:lt}),lt&&(c?a._hideClone():a._showClone(p),p!==f&&(ye(k,ue?ue.options.ghostClass:a.options.ghostClass,!1),ye(k,u.ghostClass,!0)),ue!==p&&p!==M.active?ue=p:p===M.active&&ue&&(ue=null),f===p&&(p._ignoreWhileAnimating=i),p.animateAll(function(){m("dragOverAnimationComplete"),p._ignoreWhileAnimating=null}),p!==f&&(f.animateAll(),f._ignoreWhileAnimating=null)),(i===k&&!k.animated||i===n&&!i.animated)&&(gt=null),!u.dragoverBubble&&!e.rootEl&&i!==document&&(k.parentNode[_e]._isOutsideThisEl(e.target),!lt&&ot(e)),!u.dragoverBubble&&e.stopPropagation&&e.stopPropagation(),g=!0}function y(){we=Se(k),$e=Se(k,u.draggable),fe({sortable:p,name:"change",toEl:n,newIndex:we,newDraggableIndex:$e,originalEvent:e})}if(e.preventDefault!==void 0&&e.cancelable&&e.preventDefault(),i=Te(i,u.draggable,n,!0),m("dragOver"),M.eventCanceled)return g;if(k.contains(e.target)||i.animated&&i.animatingX&&i.animatingY||p._ignoreWhileAnimating===i)return P(!1);if(Ut=!1,a&&!u.disabled&&(c?d||(r=oe!==ee):ue===this||(this.lastPutMode=Gt.checkPull(this,a,k,e))&&s.checkPut(this,a,k,e))){if(h=this._getDirection(e,i)==="vertical",o=re(k),m("dragOverValid"),M.eventCanceled)return g;if(r)return oe=ee,b(),this._hideClone(),m("revert"),M.eventCanceled||(nt?ee.insertBefore(k,nt):ee.appendChild(k)),P(!0);var w=gn(n,u.draggable);if(!w||Pl(e,h,this)&&!w.animated){if(w===k)return P(!1);if(w&&n===e.target&&(i=w),i&&(l=re(i)),en(ee,n,k,o,i,l,e,!!i)!==!1)return b(),w&&w.nextSibling?n.insertBefore(k,w.nextSibling):n.appendChild(k),oe=n,y(),P(!0)}else if(w&&kl(e,h,this)){var _=ft(n,0,u,!0);if(_===k)return P(!1);if(i=_,l=re(i),en(ee,n,k,o,i,l,e,!1)!==!1)return b(),n.insertBefore(k,_),oe=n,y(),P(!0)}else if(i.parentNode===n){l=re(i);var S=0,D,x=k.parentNode!==n,T=!_l(k.animated&&k.toRect||o,i.animated&&i.toRect||l,h),J=h?"top":"left",te=Li(i,"top","top")||Li(k,"top","top"),G=te?te.scrollTop:void 0;gt!==i&&(D=l[J],Ct=!1,Qt=!T&&u.invertSwap||x),S=Cl(e,i,l,h,T?1:u.swapThreshold,u.invertedSwapThreshold==null?u.swapThreshold:u.invertedSwapThreshold,Qt,gt===i);var X;if(S!==0){var V=Se(k);do V-=S,X=oe.children[V];while(X&&(F(X,"display")==="none"||X===B))}if(S===0||X===i)return P(!1);gt=i,Pt=S;var N=i.nextElementSibling,q=!1;q=S===1;var ve=en(ee,n,k,o,i,l,e,q);if(ve!==!1)return(ve===1||ve===-1)&&(q=ve===1),En=!0,setTimeout(Sl,30),b(),q&&!N?n.appendChild(k):i.parentNode.insertBefore(k,q?N:i),te&&Ii(te,0,G-te.scrollTop),oe=k.parentNode,D!==void 0&&!Qt&&(Kt=Math.abs(D-re(i)[J])),y(),P(!0)}if(n.contains(k))return P(!1)}return!1},_ignoreWhileAnimating:null,_offMoveEvents:function(){j(document,"mousemove",this._onTouchMove),j(document,"touchmove",this._onTouchMove),j(document,"pointermove",this._onTouchMove),j(document,"dragover",ot),j(document,"mousemove",ot),j(document,"touchmove",ot)},_offUpEvents:function(){var e=this.el.ownerDocument;j(e,"mouseup",this._onDrop),j(e,"touchend",this._onDrop),j(e,"pointerup",this._onDrop),j(e,"touchcancel",this._onDrop),j(document,"selectstart",this)},_onDrop:function(e){var n=this.el,i=this.options;if(we=Se(k),$e=Se(k,i.draggable),ge("drop",this,{evt:e}),oe=k&&k.parentNode,we=Se(k),$e=Se(k,i.draggable),M.eventCanceled){this._nulling();return}mt=!1,Qt=!1,Ct=!1,clearInterval(this._loopId),clearTimeout(this._dragStartTimer),Sn(this.cloneId),Sn(this._dragStartId),this.nativeDraggable&&(j(document,"drop",this),j(n,"dragstart",this._onDragStart)),this._offMoveEvents(),this._offUpEvents(),wt&&F(document.body,"user-select",""),F(k,"transform",""),e&&(kt&&(e.cancelable&&e.preventDefault(),!i.dropBubble&&e.stopPropagation()),B&&B.parentNode&&B.parentNode.removeChild(B),(ee===oe||ue&&ue.lastPutMode!=="clone")&&ne&&ne.parentNode&&ne.parentNode.removeChild(ne),k&&(this.nativeDraggable&&j(k,"dragend",this),Dn(k),k.style["will-change"]="",kt&&!mt&&ye(k,ue?ue.options.ghostClass:this.options.ghostClass,!1),ye(k,this.options.chosenClass,!1),fe({sortable:this,name:"unchoose",toEl:oe,newIndex:null,newDraggableIndex:null,originalEvent:e}),ee!==oe?(we>=0&&(fe({rootEl:oe,name:"add",toEl:oe,fromEl:ee,originalEvent:e}),fe({sortable:this,name:"remove",toEl:oe,originalEvent:e}),fe({rootEl:oe,name:"sort",toEl:oe,fromEl:ee,originalEvent:e}),fe({sortable:this,name:"sort",toEl:oe,originalEvent:e})),ue&&ue.save()):we!==ht&&we>=0&&(fe({sortable:this,name:"update",toEl:oe,originalEvent:e}),fe({sortable:this,name:"sort",toEl:oe,originalEvent:e})),M.active&&((we==null||we===-1)&&(we=ht,$e=St),fe({sortable:this,name:"end",toEl:oe,originalEvent:e}),this.save()))),this._nulling()},_nulling:function(){ge("nulling",this),ee=k=oe=B=nt=ne=jt=Je=it=Ae=kt=we=$e=ht=St=gt=Pt=ue=Gt=M.dragged=M.ghost=M.clone=M.active=null,Zt.forEach(function(e){e.checked=!0}),Zt.length=yn=_n=0},handleEvent:function(e){switch(e.type){case"drop":case"dragend":this._onDrop(e);break;case"dragenter":case"dragover":k&&(this._onDragOver(e),Dl(e));break;case"selectstart":e.preventDefault();break}},toArray:function(){for(var e=[],n,i=this.el.children,o=0,l=i.length,r=this.options;o<l;o++)n=i[o],Te(n,r.draggable,this.el,!1)&&e.push(n.getAttribute(r.dataIdAttr)||Tl(n));return e},sort:function(e,n){var i={},o=this.el;this.toArray().forEach(function(l,r){var u=o.children[r];Te(u,this.options.draggable,o,!1)&&(i[l]=u)},this),n&&this.captureAnimationState(),e.forEach(function(l){i[l]&&(o.removeChild(i[l]),o.appendChild(i[l]))}),n&&this.animateAll()},save:function(){var e=this.options.store;e&&e.set&&e.set(this)},closest:function(e,n){return Te(e,n||this.options.draggable,this.el,!1)},option:function(e,n){var i=this.options;if(n===void 0)return i[e];var o=Dt.modifyOption(this,e,n);typeof o<"u"?i[e]=o:i[e]=n,e==="group"&&Ri(i)},destroy:function(){ge("destroy",this);var e=this.el;e[_e]=null,j(e,"mousedown",this._onTapStart),j(e,"touchstart",this._onTapStart),j(e,"pointerdown",this._onTapStart),this.nativeDraggable&&(j(e,"dragover",this),j(e,"dragenter",this)),Array.prototype.forEach.call(e.querySelectorAll("[draggable]"),function(n){n.removeAttribute("draggable")}),this._onDrop(),this._disableDelayedDragEvents(),Vt.splice(Vt.indexOf(this.el),1),this.el=e=null},_hideClone:function(){if(!Je){if(ge("hideClone",this),M.eventCanceled)return;F(ne,"display","none"),this.options.removeCloneOnHide&&ne.parentNode&&ne.parentNode.removeChild(ne),Je=!0}},_showClone:function(e){if(e.lastPutMode!=="clone"){this._hideClone();return}if(Je){if(ge("showClone",this),M.eventCanceled)return;k.parentNode==ee&&!this.options.group.revertClone?ee.insertBefore(ne,k):nt?ee.insertBefore(ne,nt):ee.appendChild(ne),this.options.group.revertClone&&this.animate(k,ne),F(ne,"display",""),Je=!1}}};function Dl(t){t.dataTransfer&&(t.dataTransfer.dropEffect="move"),t.cancelable&&t.preventDefault()}function en(t,e,n,i,o,l,r,u){var s,a=t[_e],c=a.options.onMove,d;return window.CustomEvent&&!je&&!_t?s=new CustomEvent("move",{bubbles:!0,cancelable:!0}):(s=document.createEvent("Event"),s.initEvent("move",!0,!0)),s.to=e,s.from=t,s.dragged=n,s.draggedRect=i,s.related=o||e,s.relatedRect=l||re(e),s.willInsertAfter=u,s.originalEvent=r,t.dispatchEvent(s),c&&(d=c.call(a,s,r)),d}function Dn(t){t.draggable=!1}function Sl(){En=!1}function kl(t,e,n){var i=re(ft(n.el,0,n.options,!0)),o=Mi(n.el,n.options,B),l=10;return e?t.clientX<o.left-l||t.clientY<i.top&&t.clientX<i.right:t.clientY<o.top-l||t.clientY<i.bottom&&t.clientX<i.left}function Pl(t,e,n){var i=re(gn(n.el,n.options.draggable)),o=Mi(n.el,n.options,B),l=10;return e?t.clientX>o.right+l||t.clientY>i.bottom&&t.clientX>i.left:t.clientY>o.bottom+l||t.clientX>i.right&&t.clientY>i.top}function Cl(t,e,n,i,o,l,r,u){var s=i?t.clientY:t.clientX,a=i?n.height:n.width,c=i?n.top:n.left,d=i?n.bottom:n.right,f=!1;if(!r){if(u&&Kt<a*o){if(!Ct&&(Pt===1?s>c+a*l/2:s<d-a*l/2)&&(Ct=!0),Ct)f=!0;else if(Pt===1?s<c+Kt:s>d-Kt)return-Pt}else if(s>c+a*(1-o)/2&&s<d-a*(1-o)/2)return Ll(e)}return f=f||r,f&&(s<c+a*l/2||s>d-a*l/2)?s>c+a/2?1:-1:0}function Ll(t){return Se(k)<Se(t)?1:-1}function Tl(t){for(var e=t.tagName+t.className+t.src+t.href+t.textContent,n=e.length,i=0;n--;)i+=e.charCodeAt(n);return i.toString(36)}function Al(t){Zt.length=0;for(var e=t.getElementsByTagName("input"),n=e.length;n--;){var i=e[n];i.checked&&Zt.push(i)}}function tn(t){return setTimeout(t,0)}function Sn(t){return clearTimeout(t)}Jt&&U(document,"touchmove",function(t){(M.active||mt)&&t.cancelable&&t.preventDefault()}),M.utils={on:U,off:j,css:F,find:Ci,is:function(e,n){return!!Te(e,n,e,!1)},extend:fl,throttle:Ai,closest:Te,toggleClass:ye,clone:Oi,index:Se,nextTick:tn,cancelNextTick:Sn,detectDirection:Hi,getChild:ft},M.get=function(t){return t[_e]},M.mount=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];e[0].constructor===Array&&(e=e[0]),e.forEach(function(i){if(!i.prototype||!i.prototype.constructor)throw"Sortable: Mounted plugin must be a constructor function, not ".concat({}.toString.call(i));i.utils&&(M.utils=Oe(Oe({},M.utils),i.utils)),Dt.mount(i)})},M.create=function(t,e){return new M(t,e)},M.version=ul;var ae=[],Lt,kn,Pn=!1,Cn,Ln,nn,Tt;function Il(){function t(){this.defaults={scroll:!0,forceAutoScrollFallback:!1,scrollSensitivity:30,scrollSpeed:10,bubbleScroll:!0};for(var e in this)e.charAt(0)==="_"&&typeof this[e]=="function"&&(this[e]=this[e].bind(this))}return t.prototype={dragStarted:function(n){var i=n.originalEvent;this.sortable.nativeDraggable?U(document,"dragover",this._handleAutoScroll):this.options.supportPointer?U(document,"pointermove",this._handleFallbackAutoScroll):i.touches?U(document,"touchmove",this._handleFallbackAutoScroll):U(document,"mousemove",this._handleFallbackAutoScroll)},dragOverCompleted:function(n){var i=n.originalEvent;!this.options.dragOverBubble&&!i.rootEl&&this._handleAutoScroll(i)},drop:function(){this.sortable.nativeDraggable?j(document,"dragover",this._handleAutoScroll):(j(document,"pointermove",this._handleFallbackAutoScroll),j(document,"touchmove",this._handleFallbackAutoScroll),j(document,"mousemove",this._handleFallbackAutoScroll)),qi(),on(),pl()},nulling:function(){nn=kn=Lt=Pn=Tt=Cn=Ln=null,ae.length=0},_handleFallbackAutoScroll:function(n){this._handleAutoScroll(n,!0)},_handleAutoScroll:function(n,i){var o=this,l=(n.touches?n.touches[0]:n).clientX,r=(n.touches?n.touches[0]:n).clientY,u=document.elementFromPoint(l,r);if(nn=n,i||this.options.forceAutoScrollFallback||_t||je||wt){Tn(n,this.options,u,i);var s=Ze(u,!0);Pn&&(!Tt||l!==Cn||r!==Ln)&&(Tt&&qi(),Tt=setInterval(function(){var a=Ze(document.elementFromPoint(l,r),!0);a!==s&&(s=a,on()),Tn(n,o.options,a,i)},10),Cn=l,Ln=r)}else{if(!this.options.bubbleScroll||Ze(u,!0)===Me()){on();return}Tn(n,this.options,Ze(u,!1),!1)}}},Ye(t,{pluginName:"scroll",initializeByDefault:!0})}function on(){ae.forEach(function(t){clearInterval(t.pid)}),ae=[]}function qi(){clearInterval(Tt)}var Tn=Ai(function(t,e,n,i){if(e.scroll){var o=(t.touches?t.touches[0]:t).clientX,l=(t.touches?t.touches[0]:t).clientY,r=e.scrollSensitivity,u=e.scrollSpeed,s=Me(),a=!1,c;kn!==n&&(kn=n,on(),Lt=e.scroll,c=e.scrollFn,Lt===!0&&(Lt=Ze(n,!0)));var d=0,f=Lt;do{var h=f,p=re(h),g=p.top,m=p.bottom,b=p.left,P=p.right,y=p.width,w=p.height,_=void 0,S=void 0,D=h.scrollWidth,x=h.scrollHeight,T=F(h),J=h.scrollLeft,te=h.scrollTop;h===s?(_=y<D&&(T.overflowX==="auto"||T.overflowX==="scroll"||T.overflowX==="visible"),S=w<x&&(T.overflowY==="auto"||T.overflowY==="scroll"||T.overflowY==="visible")):(_=y<D&&(T.overflowX==="auto"||T.overflowX==="scroll"),S=w<x&&(T.overflowY==="auto"||T.overflowY==="scroll"));var G=_&&(Math.abs(P-o)<=r&&J+y<D)-(Math.abs(b-o)<=r&&!!J),X=S&&(Math.abs(m-l)<=r&&te+w<x)-(Math.abs(g-l)<=r&&!!te);if(!ae[d])for(var V=0;V<=d;V++)ae[V]||(ae[V]={});(ae[d].vx!=G||ae[d].vy!=X||ae[d].el!==h)&&(ae[d].el=h,ae[d].vx=G,ae[d].vy=X,clearInterval(ae[d].pid),(G!=0||X!=0)&&(a=!0,ae[d].pid=setInterval((function(){i&&this.layer===0&&M.active._onTouchMove(nn);var N=ae[this.layer].vy?ae[this.layer].vy*u:0,q=ae[this.layer].vx?ae[this.layer].vx*u:0;typeof c=="function"&&c.call(M.dragged.parentNode[_e],q,N,t,nn,ae[this.layer].el)!=="continue"||Ii(ae[this.layer].el,q,N)}).bind({layer:d}),24))),d++}while(e.bubbleScroll&&f!==s&&(f=Ze(f,!1)));Pn=a}},30),Yi=function(e){var n=e.originalEvent,i=e.putSortable,o=e.dragEl,l=e.activeSortable,r=e.dispatchSortableEvent,u=e.hideGhostForTarget,s=e.unhideGhostForTarget;if(n){var a=i||l;u();var c=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:n,d=document.elementFromPoint(c.clientX,c.clientY);s(),a&&!a.el.contains(d)&&(r("spill"),this.onSpill({dragEl:o,putSortable:i}))}};function An(){}An.prototype={startIndex:null,dragStart:function(e){var n=e.oldDraggableIndex;this.startIndex=n},onSpill:function(e){var n=e.dragEl,i=e.putSortable;this.sortable.captureAnimationState(),i&&i.captureAnimationState();var o=ft(this.sortable.el,this.startIndex,this.options);o?this.sortable.el.insertBefore(n,o):this.sortable.el.appendChild(n),this.sortable.animateAll(),i&&i.animateAll()},drop:Yi},Ye(An,{pluginName:"revertOnSpill"});function In(){}In.prototype={onSpill:function(e){var n=e.dragEl,i=e.putSortable,o=i||this.sortable;o.captureAnimationState(),n.parentNode&&n.parentNode.removeChild(n),o.animateAll()},drop:Yi},Ye(In,{pluginName:"removeOnSpill"}),M.mount(new Il),M.mount(In,An);function Xi(t,e,n){const i=t.slice();return i[16]=e[n],i}function ji(t,e,n){const i=t.slice();return i[19]=e[n],i}function Gi(t){let e,n,i,o;function l(){return t[10](t[19])}return{c(){e=C("div"),n=C("a"),n.innerHTML='<i class="fas fa-pencil-alt fa-sm"></i>',v(n,"href","javascript:"),v(n,"data-action","editField"),v(n,"class","edit-field svelte-1mx8y43"),v(e,"class","right svelte-1mx8y43")},m(r,u){Z(r,e,u),E(e,n),i||(o=le(n,"click",l),i=!0)},p(r,u){t=r},d(r){r&&Q(e),i=!1,o()}}}function Ui(t,e){let n,i,o,l=e[19].label+"",r,u,s,a=e[2].editable&&Gi(e),c=[e[9](e[19])],d={};for(let f=0;f<c.length;f+=1)d=an(d,c[f]);return{key:t,first:null,c(){n=C("li"),i=C("div"),o=C("label"),r=he(l),u=Y(),a&&a.c(),s=Y(),v(o,"class","svelte-1mx8y43"),v(i,"class","left svelte-1mx8y43"),Nt(n,d),xt(n,"svelte-1mx8y43",!0),this.first=n},m(f,h){Z(f,n,h),E(n,i),E(i,o),E(o,r),E(n,u),a&&a.m(n,null),E(n,s)},p(f,h){e=f,h&1&&l!==(l=e[19].label+"")&&Ne(r,l),e[2].editable?a?a.p(e,h):(a=Gi(e),a.c(),a.m(n,s)):a&&(a.d(1),a=null),Nt(n,d=si(c,[h&1&&e[9](e[19])])),xt(n,"svelte-1mx8y43",!0)},d(f){f&&Q(n),a&&a.d()}}}function Vi(t,e){let n,i,o,l=e[16].label+"",r,u,s=[e[9](e[16])],a={};for(let c=0;c<s.length;c+=1)a=an(a,s[c]);return{key:t,first:null,c(){n=C("li"),i=C("div"),o=C("label"),r=he(l),u=Y(),v(o,"class","svelte-1mx8y43"),v(i,"class","left svelte-1mx8y43"),Nt(n,a),xt(n,"svelte-1mx8y43",!0),this.first=n},m(c,d){Z(c,n,d),E(n,i),E(i,o),E(o,r),E(n,u)},p(c,d){e=c,d&2&&l!==(l=e[16].label+"")&&Ne(r,l),Nt(n,a=si(s,[d&2&&e[9](e[16])])),xt(n,"svelte-1mx8y43",!0)},d(c){c&&Q(n)}}}function Ol(t){let e,n,i,o,l,r,u=[],s=new Map,a,c,d,f,h,p,g=[],m=new Map,b=me(t[0]);const P=_=>_[19].name;for(let _=0;_<b.length;_+=1){let S=ji(t,b,_),D=P(S);s.set(D,u[_]=Ui(D,S))}let y=me(t[1]);const w=_=>_[16].name;for(let _=0;_<y.length;_+=1){let S=Xi(t,y,_),D=w(S);m.set(D,g[_]=Vi(D,S))}return{c(){e=C("div"),n=C("div"),i=C("div"),o=C("header"),o.textContent=`${H.translate("Enabled","labels","Admin")}`,l=Y(),r=C("ul");for(let _=0;_<u.length;_+=1)u[_].c();a=Y(),c=C("div"),d=C("div"),f=C("header"),f.textContent=`${H.translate("Disabled","labels","Admin")}`,h=Y(),p=C("ul");for(let _=0;_<g.length;_+=1)g[_].c();v(r,"class","enabled connected svelte-1mx8y43"),v(i,"class","well"),v(n,"class","col-sm-5"),v(p,"class","disabled connected svelte-1mx8y43"),v(d,"class","well"),v(c,"class","col-sm-5"),v(e,"id","layout"),v(e,"class","row")},m(_,S){Z(_,e,S),E(e,n),E(n,i),E(i,o),E(i,l),E(i,r);for(let D=0;D<u.length;D+=1)u[D]&&u[D].m(r,null);E(e,a),E(e,c),E(c,d),E(d,f),E(d,h),E(d,p);for(let D=0;D<g.length;D+=1)g[D]&&g[D].m(p,null);t[11](e)},p(_,S){S&645&&(b=me(_[0]),u=Wt(u,S,P,1,_,b,s,r,Rt,Ui,null,ji)),S&514&&(y=me(_[1]),g=Wt(g,S,w,1,_,y,m,p,Rt,Vi,null,Xi))},d(_){_&&Q(e);for(let S=0;S<u.length;S+=1)u[S].d();for(let S=0;S<g.length;S+=1)g[S].d();t[11](null)}}}function Ml(t){let e,n,i={params:t[2],validate:t[8],fetch:t[4],loadLayout:t[3],$$slots:{default:[Ol]},$$scope:{ctx:t}};return e=new _i({props:i}),t[12](e),{c(){Ke(e.$$.fragment)},m(o,l){He(e,o,l),n=!0},p(o,[l]){const r={};l&4&&(r.params=o[2]),l&16&&(r.fetch=o[4]),l&8&&(r.loadLayout=o[3]),l&4194343&&(r.$$scope={dirty:l,ctx:o}),e.$set(r)},i(o){n||(Pe(e.$$.fragment,o),n=!0)},o(o){Be(e.$$.fragment,o),n=!1},d(o){t[12](null),Re(e,o)}}}function Fl(t){return t.toLowerCase()}function Qi(t,e){return t[e]}function Nl(t,e,n){let i,o,l,{params:r}=e,{enabledFields:u=[]}=e,{disabledFields:s=[]}=e,{loadLayout:a}=e,c;cn(()=>{d()}),ni(()=>{o&&o.destroy(),l&&l.destroy()});function d(){const y={group:"fields",draggable:"li",animation:150};o=M.create(i.querySelector("ul.enabled"),{...y,onEnd(w){if(w.to.closest(".connected").classList.contains("enabled")){const[_]=u.splice(w.oldIndex,1);u.splice(w.newIndex,0,_)}else{const _=u[w.oldIndex];u.splice(w.oldIndex,1),s.splice(w.newIndex,0,_),n(1,s=[...s])}n(0,u=[...u])}}),l=M.create(i.querySelector("ul.disabled"),{...y,onEnd(w){if(w.to.closest(".connected").classList.contains("disabled")){const[_]=s.splice(w.oldIndex,1);s.splice(w.newIndex,0,_)}else{const _=s[w.oldIndex];s.splice(w.oldIndex,1),u.splice(w.newIndex,0,_),n(0,u=[...u])}n(1,s=[...s])}})}function f(y){r.openEditDialog(y,r.scope,r.dataAttributeList,r.dataAttributesDefs,w=>{n(0,u=u.map(_=>{if(_.name===y.name)for(let S in w)_[S]=w[S];return _}))})}let{fetch:h=()=>u}=e;function p(y){return y.length===0?(We.notify("Layout cannot be empty","error"),!1):!0}function g(y){const w={};return r.dataAttributeList.forEach(_=>{Qi(y,_)!=null&&(w[`data-${Fl(_)}`]=Qi(y,_))}),w}const m=y=>f(y);function b(y){xe[y?"unshift":"push"](()=>{i=y,n(5,i)})}function P(y){xe[y?"unshift":"push"](()=>{c=y,n(6,c)})}return t.$$set=y=>{"params"in y&&n(2,r=y.params),"enabledFields"in y&&n(0,u=y.enabledFields),"disabledFields"in y&&n(1,s=y.disabledFields),"loadLayout"in y&&n(3,a=y.loadLayout),"fetch"in y&&n(4,h=y.fetch)},[u,s,r,a,h,i,c,f,p,g,m,b,P]}class On extends Le{constructor(e){super(),Ce(this,e,Nl,Ml,De,{params:2,enabledFields:0,disabledFields:1,loadLayout:3,fetch:4})}}function xl(t){let e,n,i={params:t[0],enabledFields:t[2],disabledFields:t[3],editable:Bl,loadLayout:t[4]};return e=new On({props:i}),t[6](e),{c(){Ke(e.$$.fragment)},m(o,l){He(e,o,l),n=!0},p(o,[l]){const r={};l&1&&(r.params=o[0]),l&4&&(r.enabledFields=o[2]),l&8&&(r.disabledFields=o[3]),e.$set(r)},i(o){n||(Pe(e.$$.fragment,o),n=!0)},o(o){Be(e.$$.fragment,o),n=!1},d(o){t[6](null),Re(e,o)}}}let Bl=!0;function Hl(t){return!0}function Rl(t,e,n){let{params:i}=e;i.dataAttributeList||(i.dataAttributeList=["id","name","width","widthPx","link","notSortable","align","view","customLabel"]),i.dataAttributesDefs||(i.dataAttributesDefs={link:{type:"bool"},width:{type:"float"},notSortable:{type:"bool"},align:{type:"enum",options:["left","right"]},view:{type:"varchar",readOnly:!0},customLabel:{type:"varchar",readOnly:!0},widthPx:{type:"float"},name:{type:"varchar",readOnly:!0}});let{layoutDisabledParameter:o="layoutListDisabled"}=e,l,r=[],u=[];const s=[],a=[];function c(p){qt.create(i.scope,g=>{ze.get(i.scope,i.type,i.layoutProfileId,m=>{p&&(d(g,m),p())},!1)})}function d(p,g){const m=Object.keys(p.defs.fields).filter(w=>Hl(p.getFieldParam(w,"type"))&&f(p,w)).sort((w,_)=>H.translate(w,"fields",i.scope).localeCompare(H.translate(_,"fields",i.scope))),b=[],P=[],y=[];n(2,r=g.map(w=>{const _=H.translate(w.name,"fields",i.scope);return P.includes(_)&&y.push(_),P.push(_),b.push(w.name),{...w,label:w.label||_}})),n(3,u=m.filter(w=>!b.includes(w)).map(w=>{const _=H.translate(w,"fields",i.scope);P.includes(_)&&y.push(_),P.push(_);const S={name:w,label:_},D=qe.get(["entityDefs",i.scope,"fields",w,"type"]);return D&&qe.get(["fields",D,"notSortable"])&&(S.notSortable=!0),S})),[r,u].forEach(w=>{w.forEach(_=>{y.includes(_.label)&&(_.label+=` (${_.name})`)})})}function f(p,g){return s.includes(g)||a.includes(p.getFieldParam(g,"type"))?!1:!p.getFieldParam(g,"disabled")&&!p.getFieldParam(g,o)}function h(p){xe[p?"unshift":"push"](()=>{l=p,n(1,l)})}return t.$$set=p=>{"params"in p&&n(0,i=p.params),"layoutDisabledParameter"in p&&n(5,o=p.layoutDisabledParameter)},[i,l,r,u,c,o,h]}class Ki extends Le{constructor(e){super(),Ce(this,e,Rl,xl,De,{params:0,layoutDisabledParameter:5})}}function Wl(t){let e,n,i={params:t[0],enabledFields:t[2],disabledFields:t[3],loadLayout:t[5],fetch:t[4]};return e=new On({props:i}),t[7](e),{c(){Ke(e.$$.fragment)},m(o,l){He(e,o,l),n=!0},p(o,[l]){const r={};l&1&&(r.params=o[0]),l&4&&(r.enabledFields=o[2]),l&8&&(r.disabledFields=o[3]),e.$set(r)},i(o){n||(Pe(e.$$.fragment,o),n=!0)},o(o){Be(e.$$.fragment,o),n=!1},d(o){t[7](null),Re(e,o)}}}function zl(t,e,n){let{params:i}=e,{viewType:o="detail"}=e;i.dataAttributeList||(i.dataAttributeList=["id","name","style","sticked"]),i.dataAttributesDefs||(i.dataAttributesDefs={style:{type:"enum",options:["default","success","danger","primary","info","warning"],translation:"LayoutManager.options.style"},sticked:{type:"bool"},name:{readOnly:!0}});let l,r=[],u=[],s=()=>{let f={};return r.forEach(h=>{f[h.name]=h}),u.forEach(h=>{f[h.name]={...h,disabled:!0}}),f};function a(f){ze.get(i.scope,i.type,i.layoutProfileId,h=>{f&&(c(h),f())},!1)}function c(f){let h=[],p={},g={};qe.get(["clientDefs",i.scope,"defaultSidePanel",o])!==!1&&!qe.get(["clientDefs",i.scope,"defaultSidePanelDisabled"])&&(h.push("default"),p.default="Default"),(qe.get(["clientDefs",i.scope,"sidePanels",o])||[]).forEach(m=>{m.name&&(h.push(m.name),m.label&&(p[m.name]=m.label),g[m.name]=m)}),n(3,u=[]),f=f||{},n(2,r=[]),h.forEach((m,b)=>{let P=!1,y=f[m]||{};y.disabled&&(P=!0);let w;if(p[m]?w=H.translate(p[m],"labels",i.scope):w=H.translate(m,"panels",i.scope),P)u.push({name:m,label:w});else{let _={name:m,label:w};_.name in g&&i.dataAttributeList.forEach(S=>{if(S==="name")return;let D=g[_.name]||{};S in D&&(_[S]=D[S])});for(let S in y)_[S]=y[S];_.index="index"in y?y.index:b,r.push(_)}}),r.sort((m,b)=>m.index-b.index)}function d(f){xe[f?"unshift":"push"](()=>{l=f,n(1,l)})}return t.$$set=f=>{"params"in f&&n(0,i=f.params),"viewType"in f&&n(6,o=f.viewType)},[i,l,r,u,s,a,o,d]}class ln extends Le{constructor(e){super(),Ce(this,e,zl,Wl,De,{params:0,viewType:6})}}function ql(t){let e,n;return e=new On({props:{params:t[0],enabledFields:t[1],disabledFields:t[2],loadLayout:t[3]}}),{c(){Ke(e.$$.fragment)},m(i,o){He(e,i,o),n=!0},p(i,[o]){const l={};o&1&&(l.params=i[0]),o&2&&(l.enabledFields=i[1]),o&4&&(l.disabledFields=i[2]),e.$set(l)},i(i){n||(Pe(e.$$.fragment,i),n=!0)},o(i){Be(e.$$.fragment,i),n=!1},d(i){Re(e,i)}}}function Yl(t,e){return!t.getLinkParam(e,"disabled")&&!t.getLinkParam(e,"layoutRelationshipsDisabled")}function Xl(t,e,n){let{params:i}=e;i.dataAttributeList||(i.dataAttributeList=["id","name","style","hiddenPerDefault"]),i.dataAttributesDefs||(i.dataAttributesDefs={style:{type:"enum",options:["default","success","danger","primary","info","warning"],translation:"LayoutManager.options.style"},hiddenPerDefault:{type:"bool"},name:{readOnly:!0}});let o=[],l=[];function r(s){qt.create(i.scope,function(a){ze.get(i.scope,i.type,i.layoutProfileId,c=>{s&&(u(a,c),s())},!1)})}function u(s,a){let c=[];for(let h in s.defs.links)["belongsTo","hasMany","hasChildren"].includes(s.defs.links[h].type)&&Yl(s,h)&&c.push(h);const d=qe.get(["clientDefs",i.scope,"bottomPanels","detail"])||[];for(let h of d)h.layoutRelationshipsDisabled||c.push(h.name);c.sort(function(h,p){let g,m,b=d.find(y=>y.name===h),P=d.find(y=>y.name===p);return h in s.defs.links?g=H.translate(h,"links",i.scope):b&&(g=H.translate(b.label,"labels",i.scope)),p in s.defs.links?m=H.translate(p,"links",i.scope):P&&(m=H.translate(P.label,"labels",i.scope)),g.localeCompare(m)});let f=[];n(1,o=[]),n(2,l=[]);for(let h in a){let p=a[h],g,m=d.find(b=>b.name===p.name);typeof p=="string"||p instanceof String?g={name:p,label:m?H.translate(m.label,"labels",i.scope):H.translate(p,"links",i.scope)}:(g=p,g.label=m?H.translate(m.label,"labels",i.scope):H.translate(g.name,"links",i.scope)),i.dataAttributeList.forEach(b=>{if(b==="name"||b in g)return;let P=qe.get(["clientDefs",i.scope,"relationshipPanels",g.name,b]);P!==null&&(g[b]=P)}),o.push(g),f.push(g.name)}for(let h of c)if(!f.includes(h)){let p=d.find(g=>g.name===h);l.push({name:h,label:p?H.translate(p.label,"labels",i.scope):H.translate(h,"links",i.scope)})}}return t.$$set=s=>{"params"in s&&n(0,i=s.params)},[i,o,l,r]}class jl extends Le{constructor(e){super(),Ce(this,e,Xl,ql,De,{params:0})}}function Zi(t,e,n){const i=t.slice();return i[40]=e[n],i}function Ji(t,e,n){const i=t.slice();return i[43]=e[n],i}function $i(t,e,n){const i=t.slice();return i[46]=e[n],i}function eo(t,e,n){const i=t.slice();return i[49]=e[n],i[51]=n,i}function Gl(t){let e,n,i,o,l;function r(){return t[21](t[43],t[46],t[51])}function u(...s){return t[22](t[43],t[46],t[51],...s)}return{c(){e=C("li"),n=C("a"),n.innerHTML='<i class="fas fa-minus"></i>',i=Y(),v(n,"href","#"),v(n,"data-action","minusCell"),v(n,"class","remove-field svelte-fp3tbt"),v(e,"class","empty cell svelte-fp3tbt")},m(s,a){Z(s,e,a),E(e,n),E(e,i),o||(l=[le(n,"click",Ve(r)),le(e,"dragover",Ve(Zl)),le(e,"drop",u)],o=!0)},p(s,a){t=s},d(s){s&&Q(e),o=!1,Fe(l)}}}function Ul(t){let e,n=t[49].label+"",i,o,l,r,u,s,a,c,d,f,h;function p(){return t[19](t[43],t[46],t[51])}function g(...m){return t[20](t[49],...m)}return{c(){e=C("li"),i=he(n),o=Y(),l=C("a"),l.innerHTML='<i class="fas fa-times"></i>',r=Y(),v(l,"href","#"),v(l,"data-action","removeField"),v(l,"class","remove-field svelte-fp3tbt"),v(e,"class","cell svelte-fp3tbt"),v(e,"draggable","true"),v(e,"data-id",u=t[49].id),v(e,"data-name",s=t[49].name),v(e,"data-full-width",a=t[49].fullWidth?"true":void 0),v(e,"data-custom-label",c=t[49].customLabel?t[49].customLabel:void 0),v(e,"data-no-label",d=t[49].noLabel)},m(m,b){Z(m,e,b),E(e,i),E(e,o),E(e,l),E(e,r),f||(h=[le(l,"click",Ve(p)),le(e,"dragstart",un(g))],f=!0)},p(m,b){t=m,b[0]&2&&n!==(n=t[49].label+"")&&Ne(i,n),b[0]&2&&u!==(u=t[49].id)&&v(e,"data-id",u),b[0]&2&&s!==(s=t[49].name)&&v(e,"data-name",s),b[0]&2&&a!==(a=t[49].fullWidth?"true":void 0)&&v(e,"data-full-width",a),b[0]&2&&c!==(c=t[49].customLabel?t[49].customLabel:void 0)&&v(e,"data-custom-label",c),b[0]&2&&d!==(d=t[49].noLabel)&&v(e,"data-no-label",d)},d(m){m&&Q(e),f=!1,Fe(h)}}}function to(t){let e;function n(l,r){return l[49]?Ul:Gl}let i=n(t),o=i(t);return{c(){o.c(),e=ti()},m(l,r){o.m(l,r),Z(l,e,r)},p(l,r){i===(i=n(l))&&o?o.p(l,r):(o.d(1),o=i(l),o&&(o.c(),o.m(e.parentNode,e)))},d(l){l&&Q(e),o.d(l)}}}function no(t,e){let n,i,o,l,r,u,s,a,c;function d(){return e[18](e[43],e[46])}let f=me(e[46].cells),h=[];for(let p=0;p<f.length;p+=1)h[p]=to(eo(e,f,p));return{key:t,first:null,c(){n=C("li"),i=C("div"),o=C("a"),o.innerHTML='<i class="fas fa-times"></i>',l=Y(),r=C("ul");for(let p=0;p<h.length;p+=1)h[p].c();u=Y(),v(o,"href","#"),v(o,"data-action","removeRow"),v(o,"class","remove-row pull-right svelte-fp3tbt"),v(i,"class","svelte-fp3tbt"),v(r,"class","cells svelte-fp3tbt"),v(n,"class","row svelte-fp3tbt"),v(n,"data-number",s=e[46].number),this.first=n},m(p,g){Z(p,n,g),E(n,i),E(i,o),E(n,l),E(n,r);for(let m=0;m<h.length;m+=1)h[m]&&h[m].m(r,null);E(n,u),a||(c=[le(o,"click",Ve(d)),le(r,"mousedown",un(Jl))],a=!0)},p(p,g){if(e=p,g[0]&5634){f=me(e[46].cells);let m;for(m=0;m<f.length;m+=1){const b=eo(e,f,m);h[m]?h[m].p(b,g):(h[m]=to(b),h[m].c(),h[m].m(r,null))}for(;m<h.length;m+=1)h[m].d(1);h.length=f.length}g[0]&2&&s!==(s=e[46].number)&&v(n,"data-number",s)},d(p){p&&Q(n),sn(h,p),a=!1,Fe(c)}}}function io(t,e){let n,i,o,l=(e[43].customLabel||e[43].label||"")+"",r,u,s,a,c,d,f,h,p,g,m,b=[],P=new Map,y,w,_,S,D,x,T;function J(){return e[16](e[43])}function te(){return e[17](e[43])}let G=me(e[43].rows);const X=N=>N[46].number;for(let N=0;N<G.length;N+=1){let q=$i(e,G,N),ve=X(q);P.set(ve,b[N]=no(ve,q))}function V(){return e[23](e[43])}return{key:t,first:null,c(){n=C("li"),i=C("header"),o=C("label"),r=he(l),s=he(`Â \r
                                `),a=C("a"),a.innerHTML='<i class="fas fa-pencil-alt fa-sm"></i>',c=Y(),d=C("a"),f=C("i"),g=Y(),m=C("ul");for(let N=0;N<b.length;N+=1)b[N].c();y=Y(),w=C("div"),_=C("a"),_.innerHTML='<i class="fas fa-plus"></i>',S=Y(),v(o,"data-is-custom",u=e[43].customLabel?"true":void 0),v(o,"class","svelte-fp3tbt"),v(a,"href","#"),v(a,"data-action","edit-panel-label"),v(a,"class","edit-panel-label svelte-fp3tbt"),v(f,"class","fas fa-times"),v(d,"href","#"),Qe(d,"float","right"),v(d,"data-action","removePanel"),v(d,"class","remove-panel svelte-fp3tbt"),v(d,"data-number",h=e[43].number),v(i,"data-name",p=e[43].name),v(i,"class","svelte-fp3tbt"),v(m,"class","rows svelte-fp3tbt"),v(_,"href","#"),v(_,"data-action","addRow"),v(_,"class","svelte-fp3tbt"),v(w,"class","svelte-fp3tbt"),v(n,"data-number",D=e[43].number),v(n,"class","panel-layout svelte-fp3tbt"),this.first=n},m(N,q){Z(N,n,q),E(n,i),E(i,o),E(o,r),E(i,s),E(i,a),E(i,c),E(i,d),E(d,f),E(n,g),E(n,m);for(let ve=0;ve<b.length;ve+=1)b[ve]&&b[ve].m(m,null);E(n,y),E(n,w),E(w,_),E(n,S),x||(T=[le(a,"click",Ve(J)),le(d,"click",Ve(te)),le(m,"mousedown",un($l)),le(_,"click",Ve(V))],x=!0)},p(N,q){e=N,q[0]&2&&l!==(l=(e[43].customLabel||e[43].label||"")+"")&&Ne(r,l),q[0]&2&&u!==(u=e[43].customLabel?"true":void 0)&&v(o,"data-is-custom",u),q[0]&2&&h!==(h=e[43].number)&&v(d,"data-number",h),q[0]&2&&p!==(p=e[43].name)&&v(i,"data-name",p),q[0]&5890&&(G=me(e[43].rows),b=Wt(b,q,X,1,e,G,P,m,Rt,no,null,$i)),q[0]&2&&D!==(D=e[43].number)&&v(n,"data-number",D)},d(N){N&&Q(n);for(let q=0;q<b.length;q+=1)b[q].d();x=!1,Fe(T)}}}function oo(t){let e,n=t[40].label+"",i,o,l,r,u;function s(...a){return t[24](t[40],...a)}return{c(){e=C("li"),i=he(n),o=Y(),v(e,"class","cell svelte-fp3tbt"),v(e,"data-name",l=t[40].name)},m(a,c){Z(a,e,c),E(e,i),E(e,o),r||(u=le(e,"dragstart",s),r=!0)},p(a,c){t=a,c[0]&4&&n!==(n=t[40].label+"")&&Ne(i,n),c[0]&4&&l!==(l=t[40].name)&&v(e,"data-name",l)},d(a){a&&Q(e),r=!1,u()}}}function Vl(t){let e,n,i,o,l,r,u,s,a=[],c=new Map,d,f,h,p,g,m,b,P,y=me(t[1]);const w=D=>D[43].number;for(let D=0;D<y.length;D+=1){let x=Ji(t,y,D),T=w(x);c.set(T,a[D]=io(T,x))}let _=me(t[2]),S=[];for(let D=0;D<_.length;D+=1)S[D]=oo(Zi(t,_,D));return{c(){e=C("div"),n=C("div"),i=C("div"),o=C("header"),o.textContent=`${H.translate("Layout","LayoutManager")}`,l=Y(),r=C("a"),r.textContent=`${H.translate("Add Panel","Admin")}`,u=Y(),s=C("ul");for(let D=0;D<a.length;D+=1)a[D].c();d=Y(),f=C("div"),h=C("div"),p=C("header"),p.textContent=`${H.translate("Available Fields","Admin")}`,g=Y(),m=C("ul");for(let D=0;D<S.length;D+=1)S[D].c();v(o,"class","svelte-fp3tbt"),v(r,"href","#"),v(r,"class","svelte-fp3tbt"),v(s,"class","panels svelte-fp3tbt"),v(i,"class","well svelte-fp3tbt"),v(n,"class","col-md-8 svelte-fp3tbt"),v(p,"class","svelte-fp3tbt"),v(m,"class","disabled cells clearfix svelte-fp3tbt"),v(h,"class","well svelte-fp3tbt"),v(f,"class","col-md-4 svelte-fp3tbt"),v(e,"id","layout"),v(e,"class","row svelte-fp3tbt")},m(D,x){Z(D,e,x),E(e,n),E(n,i),E(i,o),E(i,l),E(i,r),E(i,u),E(i,s);for(let T=0;T<a.length;T+=1)a[T]&&a[T].m(s,null);E(e,d),E(e,f),E(f,h),E(h,p),E(h,g),E(h,m);for(let T=0;T<S.length;T+=1)S[T]&&S[T].m(m,null);b||(P=le(r,"click",Ve(t[5])),b=!0)},p(D,x){if(x[0]&8130&&(y=me(D[1]),a=Wt(a,x,w,1,D,y,c,s,Rt,io,null,Ji)),x[0]&4){_=me(D[2]);let T;for(T=0;T<_.length;T+=1){const J=Zi(D,_,T);S[T]?S[T].p(J,x):(S[T]=oo(J),S[T].c(),S[T].m(m,null))}for(;T<S.length;T+=1)S[T].d(1);S.length=_.length}},d(D){D&&Q(e);for(let x=0;x<a.length;x+=1)a[x].d();sn(S,D),b=!1,P()}}}function Ql(t){let e,n;return e=new _i({props:{params:t[0],validate:t[13],fetch:t[4],loadLayout:t[3],$$slots:{default:[Vl]},$$scope:{ctx:t}}}),{c(){Ke(e.$$.fragment)},m(i,o){He(e,i,o),n=!0},p(i,o){const l={};o[0]&1&&(l.params=i[0]),o[0]&6|o[1]&2097152&&(l.$$scope={dirty:o,ctx:i}),e.$set(l)},i(i){n||(Pe(e.$$.fragment,i),n=!0)},o(i){Be(e.$$.fragment,i),n=!1},d(i){Re(e,i)}}}function Kl(t,e){return e.some(n=>n.name===t)}const Zl=t=>t.dataTransfer.dropEffect="move",Jl=()=>{},$l=()=>{};function er(t,e,n){let{params:i}=e,{columnCount:o=2}=e,{layoutDisabledParameter:l="layoutDetailDisabled"}=e,r=["id","label","style"],u={label:{type:"varchar"},style:{type:"enum",options:["default","success","danger","primary","info","warning"],translation:"LayoutManager.options.style"},dynamicLogicVisible:{type:"base",view:"views/admin/field-manager/fields/dynamic-logic-conditions"}},s=["modifiedAt","createdAt","modifiedBy","createdBy","assignedUser","ownerUser","teams"],a=[],c=[],d=-1,f=-1,h;Bo();function p(L){let A,R;const W=[];W.push(new Promise(z=>{qt.create(i.scope,$=>{ze.get(i.scope,i.type,i.layoutProfileId,K=>{A=K,R=$,z()},!1)})})),["detail","detailSmall"].includes(i.type)&&W.push(new Promise(z=>{ze.get(i.scope,"sidePanels"+Espo.utils.upperCaseFirst(i.type),i.layoutProfileId,$=>{h=$,z()},!1)})),Promise.all(W).then(()=>{L&&(g(R,A),y(),ri().then(()=>{_()}),L())})}function g(L,A){let R=[];const W=[];for(const K in L.defs.fields)m(L,K)&&(W.push(H.translate(K,"fields",i.scope)),R.push(K));const z=W.filter((K,be)=>W.indexOf(K)!==be);let $=[];n(2,c=[]),n(1,a=A),A.forEach((K,be)=>{K.rows.forEach((ie,Ie)=>{ie&&ie.forEach((ke,Ge)=>{if(Ge==o||!ke)return;let et=H.translate(ke.name,"fields",i.scope);z.includes(et)&&(et+=` (${ke.name})`),$.push({name:ke.name,label:et}),n(1,a[be].rows[Ie][Ge].label=et,a)})})}),R.sort((K,be)=>H.translate(K,"fields",i.scope).localeCompare(H.translate(be,"fields",i.scope)));for(const K in R)if(!Kl(R[K],$)){const be=R[K];let ie=H.translate(be,"fields",i.scope);z.includes(ie)&&(ie+=` (${be})`),c.push({name:be,label:ie})}}function m(L,A){return b()&&s.includes(A)?!1:!L.getFieldParam(A,"disabled")&&!L.getFieldParam(A,l)}function b(){if(qe.get(["clientDefs",i.scope,"defaultSidePanelDisabled"]))return!1;if(h){for(const L in h)if(L==="default"&&h[L].disabled)return!1}return!0}function P(){return a.map(L=>({...L,rows:L.rows.map(A=>A.cells)}))}function y(){d=-1,f=-1,n(1,a=a.map((L,A)=>(L.number=A,d=A,L.rows=L.rows.map(R=>({number:f++,cells:R})),L)))}function w(L){M.create(L,{animation:150,group:"rows",draggable:"li.row",onEnd(A){const R=parseInt(A.to.closest(".panel-layout").getAttribute("data-number")),W=parseInt(A.from.closest(".panel-layout").getAttribute("data-number"));if(W===R)n(1,a=a.map(z=>{if(z.number===R){const[$]=z.rows.splice(A.oldIndex,1);z.rows.splice(A.newIndex,0,$)}return z}));else{const $=a.find(K=>K.number===W).rows[A.oldIndex];n(1,a=a.map(K=>(K.number===W&&K.rows.splice(A.oldIndex,1),K.number===R&&K.rows.splice(A.newIndex,0,$),K)))}}})}function _(){const L=document.querySelector("ul.panels");L&&M.create(L,{animation:150,group:"panels",draggable:"li.panel-layout",onEnd(A){const R=Array.from(A.to.children);n(1,a=R.map(W=>{const z=parseInt(W.getAttribute("data-number"));return a.find($=>$.number===z)}))}}),document.querySelectorAll("ul.rows").forEach(A=>{w(A)}),document.querySelectorAll("ul.cells.disabled").forEach(A=>{M.create(A,{animation:150,group:"cells",draggable:"li.cell"})})}function S(){d++;const L={label:"New panel",rows:[{number:f++,cells:[!1,!1]}],number:d,name:`panel${d}`,isCustomLabel:!0};n(1,a=[...a,L]),ri().then(()=>{const A=document.querySelector(`.panel-layout[data-number="${L.number}"] > .rows`);w(A)})}function D(L){const A=a.find(W=>W.number===L);n(1,a=a.filter(W=>W!==A));let R=[];A.rows.forEach(W=>{W.cells.forEach(z=>{z&&R.push(z)})}),n(2,c=[...c,...R])}function x(L){n(1,a=a.map(A=>(A.number===L&&(A.rows=[...A.rows,{number:f++,cells:Array(o).fill(!1)}]),A)))}function T(L,A){n(1,a=a.map(R=>{if(R.number===L){const W=R.rows.find(z=>z.number===A);R.rows=R.rows.filter(z=>z!=W),n(2,c=[...c,...W.cells.filter(z=>!!z)])}return R}))}function J(L,A,R){n(1,a=a.map(W=>(W.number===L&&(W.rows=W.rows.map((z,$)=>{if(z.number===A){const K=z.cells[R];K&&n(2,c=[...c,K]),z.cells[R]=!1}return z})),W)))}function te(L,A,R,W){const z=L.dataTransfer.getData("name");let $=c.find(ie=>ie.name===z),K=null,be=null;if($)n(2,c=c.filter(ie=>ie!==$));else{if(a.forEach(ie=>{ie.rows.forEach((Ie,ke)=>{Ie.cells.forEach(Ge=>{Ge&&Ge.name===z&&($=Ge,K=Ie.number,be=ie.number)})})}),!$)return;n(1,a=a.map((ie,Ie)=>(be===ie.number&&(ie.rows=ie.rows.map((ke,Ge)=>(ke.number===K&&(ke.cells=ke.cells.map((et,sr)=>et&&et.name===z?!1:et)),ke))),ie)))}n(1,a=a.map(ie=>(A===ie.number&&(ie.rows=ie.rows.map(Ie=>(R===Ie.number&&(Ie.cells=Ie.cells.map((ke,Ge)=>Ge===W?($.fullWidth&&Ie.cells.length>1&&delete $.fullWidth,$):ke)),Ie))),ie)))}function G(L){i.onEditPanel(L,r,u,A=>{n(1,a=a.map(R=>(R.number===L.number&&r.forEach(W=>{L[W]=A[W]}),R)))})}function X(L,A,R){n(1,a=a.map(W=>(L===W.number&&(W.rows=W.rows.map(z=>{if(A===z.number){const $=z.cells.filter((K,be)=>be!==R);$.length===1&&$[0]&&($[0].fullWidth=!0),z.cells=$}return z})),W)))}function V(L){let A=0;return L.forEach(R=>{R.rows.forEach(W=>{W.forEach(z=>{z&&A++})})}),A===0?(We.notify("Layout cannot be empty.","error"),!1):!0}const N=L=>G(L),q=L=>D(L.number),ve=(L,A)=>T(L.number,A.number),lt=(L,A,R)=>J(L.number,A.number,R),Mn=(L,A)=>{A.dataTransfer.setData("name",L.name)},lo=(L,A,R)=>X(L.number,A.number,R),rn=(L,A,R,W)=>te(W,L.number,A.number,R),Fn=L=>x(L.number),lr=(L,A)=>{A.dataTransfer.setData("name",L.name)};return t.$$set=L=>{"params"in L&&n(0,i=L.params),"columnCount"in L&&n(14,o=L.columnCount),"layoutDisabledParameter"in L&&n(15,l=L.layoutDisabledParameter)},[i,a,c,p,P,S,D,x,T,J,te,G,X,V,o,l,N,q,ve,lt,Mn,lo,rn,Fn,lr]}class tr extends Le{constructor(e){super(),Ce(this,e,er,Ql,De,{params:0,columnCount:14,layoutDisabledParameter:15},null,[-1,-1])}}function nr(t){let e,n;return e=new t[1]({props:{params:t[0],layoutDisabledParameter:t[2],viewType:t[3]}}),{c(){Ke(e.$$.fragment)},m(i,o){He(e,i,o),n=!0},p(i,[o]){const l={};o&1&&(l.params=i[0]),o&4&&(l.layoutDisabledParameter=i[2]),o&8&&(l.viewType=i[3]),e.$set(l)},i(i){n||(Pe(e.$$.fragment,i),n=!0)},o(i){Be(e.$$.fragment,i),n=!1},d(i){Re(e,i)}}}function ir(t,e,n){let{params:i}=e,o,l,r;return t.$$set=u=>{"params"in u&&n(0,i=u.params)},t.$$.update=()=>{if(t.$$.dirty&1)switch(i.type){case"list":case"listSmall":n(2,l=i.type==="list"?"layoutListDisabled":"layoutListSmallDisabled"),n(1,o=Ki);break;case"kanban":n(1,o=Ki),n(0,i.dataAttributeList=["id","name","link","align","view","isLarge","cssStyle"],i),n(0,i.dataAttributesDefs={link:{type:"bool"},isLarge:{type:"bool"},width:{type:"float"},cssStyle:{type:"varchar"},align:{type:"enum",options:["left","right"]},view:{type:"varchar",readOnly:!0},name:{type:"varchar",readOnly:!0}},i);break;case"relationships":n(1,o=jl);break;case"detail":case"detailSmall":n(2,l=i.type==="detail"?"layoutDetailDisabled":"layoutDetailSmallDisabled"),n(1,o=tr);break;case"sidePanelsDetail":n(3,r="detail"),n(1,o=ln);break;case"sidePanelsDetailSmall":n(3,r="detailSmall"),n(1,o=ln);break;case"sidePanelsEdit":n(3,r="edit"),n(1,o=ln);break;case"sidePanelsEditSmall":n(3,r="editSmall"),n(1,o=ln);break}},[i,o,l,r]}class or extends Le{constructor(e){super(),Ce(this,e,ir,nr,De,{params:0})}}window.SvelteLanguage=H,window.SvelteUserData=ci,window.SvelteNotifier=We,window.SvelteLayoutManager=ze,window.SvelteMetadata=qe,window.SvelteModelFactory=qt,window.driver=Co,pe.LayoutComponent=or,pe.QueueManagerIcon=Ko,pe.UpdatePanel=il,Object.defineProperty(pe,Symbol.toStringTag,{value:"Module"})});
