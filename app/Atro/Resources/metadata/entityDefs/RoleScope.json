{
  "fields": {
    "name": {
      "type": "varchar",
      "view": "views/role-scope/fields/name",
      "required": true,
      "trim": true
    },
    "nameLabel": {
      "type": "varchar",
      "notStorable": true,
      "readOnly": true,
      "massUpdateDisabled": true,
      "filterDisabled": true,
      "exportDisabled": true,
      "importDisabled": true,
      "emHidden": true
    },
    "role": {
      "type": "link",
      "required": true
    },
    "hasAccess": {
      "type": "bool",
      "notNull": true
    },
    "aclActionList": {
      "type": "array",
      "notStorable": true
    },
    "createAction": {
      "type": "enum",
      "view": "views/role-scope/fields/create-action",
      "options": [
        "no",
        "yes"
      ],
      "default": "no",
      "conditionalProperties": {
        "visible": {
          "conditionGroup": [
            {
              "type": "isTrue",
              "attribute": "hasAccess"
            },
            {
              "type": "or",
              "value": [
                {
                  "type": "isEmpty",
                  "attribute": "aclActionList"
                },
                {
                  "type": "in",
                  "attribute": "aclActionList",
                  "value": [
                    "create"
                  ]
                }
              ]
            }
          ]
        },
        "required": {
          "conditionGroup": [
            {
              "type": "isTrue",
              "attribute": "hasAccess"
            },
            {
              "type": "or",
              "value": [
                {
                  "type": "isEmpty",
                  "attribute": "aclActionList"
                },
                {
                  "type": "in",
                  "attribute": "aclActionList",
                  "value": [
                    "create"
                  ]
                }
              ]
            }
          ]
        }
      }
    },
    "readAction": {
      "type": "enum",
      "view": "views/role-scope/fields/read-action",
      "options": [
        "no",
        "own",
        "team",
        "all"
      ],
      "default": "no",
      "conditionalProperties": {
        "visible": {
          "conditionGroup": [
            {
              "type": "isTrue",
              "attribute": "hasAccess"
            },
            {
              "type": "or",
              "value": [
                {
                  "type": "isEmpty",
                  "attribute": "aclActionList"
                },
                {
                  "type": "in",
                  "attribute": "aclActionList",
                  "value": [
                    "read"
                  ]
                }
              ]
            }
          ]
        },
        "required": {
          "conditionGroup": [
            {
              "type": "isTrue",
              "attribute": "hasAccess"
            },
            {
              "type": "or",
              "value": [
                {
                  "type": "isEmpty",
                  "attribute": "aclActionList"
                },
                {
                  "type": "in",
                  "attribute": "aclActionList",
                  "value": [
                    "read"
                  ]
                }
              ]
            }
          ]
        }
      }
    },
    "editAction": {
      "type": "enum",
      "view": "views/role-scope/fields/edit-action",
      "options": [
        "no",
        "own",
        "team",
        "all"
      ],
      "default": "no",
      "conditionalProperties": {
        "visible": {
          "conditionGroup": [
            {
              "type": "isTrue",
              "attribute": "hasAccess"
            },
            {
              "type": "or",
              "value": [
                {
                  "type": "isEmpty",
                  "attribute": "aclActionList"
                },
                {
                  "type": "in",
                  "attribute": "aclActionList",
                  "value": [
                    "edit"
                  ]
                }
              ]
            }
          ]
        },
        "required": {
          "conditionGroup": [
            {
              "type": "isTrue",
              "attribute": "hasAccess"
            },
            {
              "type": "or",
              "value": [
                {
                  "type": "isEmpty",
                  "attribute": "aclActionList"
                },
                {
                  "type": "in",
                  "attribute": "aclActionList",
                  "value": [
                    "edit"
                  ]
                }
              ]
            }
          ]
        }
      }
    },
    "deleteAction": {
      "type": "enum",
      "view": "views/role-scope/fields/delete-action",
      "options": [
        "no",
        "own",
        "team",
        "all"
      ],
      "default": "no",
      "conditionalProperties": {
        "visible": {
          "conditionGroup": [
            {
              "type": "isTrue",
              "attribute": "hasAccess"
            },
            {
              "type": "or",
              "value": [
                {
                  "type": "isEmpty",
                  "attribute": "aclActionList"
                },
                {
                  "type": "in",
                  "attribute": "aclActionList",
                  "value": [
                    "delete"
                  ]
                }
              ]
            }
          ]
        },
        "required": {
          "conditionGroup": [
            {
              "type": "isTrue",
              "attribute": "hasAccess"
            },
            {
              "type": "or",
              "value": [
                {
                  "type": "isEmpty",
                  "attribute": "aclActionList"
                },
                {
                  "type": "in",
                  "attribute": "aclActionList",
                  "value": [
                    "delete"
                  ]
                }
              ]
            }
          ]
        }
      }
    },
    "streamAction": {
      "type": "enum",
      "view": "views/role-scope/fields/stream-action",
      "options": [
        "no",
        "all"
      ],
      "default": "no",
      "conditionalProperties": {
        "visible": {
          "conditionGroup": [
            {
              "type": "isTrue",
              "attribute": "hasAccess"
            },
            {
              "type": "or",
              "value": [
                {
                  "type": "isEmpty",
                  "attribute": "aclActionList"
                },
                {
                  "type": "in",
                  "attribute": "aclActionList",
                  "value": [
                    "stream"
                  ]
                }
              ]
            }
          ]
        }
      }
    },
    "accessData": {
      "type": "jsonObject",
      "view": "views/role-scope/fields/access-data",
      "notStorable": true,
      "readOnly": true,
      "massUpdateDisabled": true,
      "filterDisabled": true,
      "exportDisabled": true,
      "importDisabled": true,
      "emHidden": true
    },
    "createdAt": {
      "type": "datetime",
      "readOnly": true
    },
    "modifiedAt": {
      "type": "datetime",
      "readOnly": true
    },
    "createdBy": {
      "type": "link",
      "readOnly": true,
      "view": "views/fields/user"
    },
    "modifiedBy": {
      "type": "link",
      "readOnly": true,
      "view": "views/fields/user"
    },
    "fields": {
      "type": "linkMultiple",
      "layoutDetailDisabled": true,
      "massUpdateDisabled": true,
      "noLoad": true
    },
    "createAttributeValueAction": {
      "type": "enum",
      "view": "views/role-scope/fields/create-attribute-value-action",
      "options": [
        "no",
        "yes"
      ],
      "default": "no"
    },
    "deleteAttributeValueAction": {
      "type": "enum",
      "view": "views/role-scope/fields/create-attribute-value-action",
      "options": [
        "no",
        "yes"
      ],
      "default": "no"
    },
    "attributes": {
      "type": "linkMultiple",
      "layoutDetailDisabled": true,
      "massUpdateDisabled": true,
      "noLoad": true
    },
    "attributePanels": {
      "type": "linkMultiple",
      "layoutDetailDisabled": true,
      "massUpdateDisabled": true,
      "noLoad": true
    }
  },
  "links": {
    "role": {
      "type": "belongsTo",
      "foreign": "scopes",
      "entity": "Role"
    },
    "fields": {
      "type": "hasMany",
      "foreign": "roleScope",
      "entity": "RoleScopeField"
    },
    "attributes": {
      "type": "hasMany",
      "foreign": "roleScope",
      "entity": "RoleScopeAttribute"
    },
    "attributePanels": {
      "type": "hasMany",
      "foreign": "roleScope",
      "entity": "RoleScopeAttributePanel"
    }
  },
  "collection": {
    "sortBy": "name",
    "asc": true
  },
  "uniqueIndexes": {
    "unique": [
      "deleted",
      "name",
      "role_id"
    ]
  }
}
